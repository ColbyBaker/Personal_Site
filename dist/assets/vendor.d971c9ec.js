var gd=Object.defineProperty;var iu=Object.getOwnPropertySymbols;var yd=Object.prototype.hasOwnProperty,vd=Object.prototype.propertyIsEnumerable;var su=(b,t,e)=>t in b?gd(b,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):b[t]=e,ou=(b,t)=>{for(var e in t||(t={}))yd.call(t,e)&&su(b,e,t[e]);if(iu)for(var e of iu(t))vd.call(t,e)&&su(b,e,t[e]);return b};/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const au="134",si={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},oi={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bd=0,lu=1,_d=2,uu=1,xd=2,Qi=3,ai=0,or=1,Nn=2,cu=1,pn=0,$i=1,hu=2,du=3,fu=4,wd=5,li=100,Sd=101,Md=102,pu=103,mu=104,Td=200,Ed=201,Ad=202,Ld=203,gu=204,yu=205,Cd=206,Rd=207,Pd=208,Id=209,Dd=210,Od=0,jd=1,kd=2,Xo=3,Nd=4,Fd=5,Ud=6,Bd=7,Us=0,Gd=1,zd=2,Fn=0,Vd=1,Hd=2,Wd=3,qd=4,Xd=5,vu=300,es=301,ts=302,Yo=303,Zo=304,Bs=306,Jo=307,ui=1e3,Mr=1001,Gs=1002,ar=1003,Ko=1004,Qo=1005,Tr=1006,bu=1007,ci=1008,mn=1009,Yd=1010,Zd=1011,zs=1012,Jd=1013,Vs=1014,$r=1015,hi=1016,Kd=1017,Qd=1018,$d=1019,rs=1020,ef=1021,Un=1022,mr=1023,tf=1024,rf=1025,nf=mr,di=1026,ns=1027,sf=1028,of=1029,af=1030,lf=1031,uf=1032,cf=1033,_u=33776,xu=33777,wu=33778,Su=33779,Mu=35840,Tu=35841,Eu=35842,Au=35843,hf=36196,Lu=37492,Cu=37496,df=37808,ff=37809,pf=37810,mf=37811,gf=37812,yf=37813,vf=37814,bf=37815,_f=37816,xf=37817,wf=37818,Sf=37819,Mf=37820,Tf=37821,Ef=36492,Af=37840,Lf=37841,Cf=37842,Rf=37843,Pf=37844,If=37845,Df=37846,Of=37847,jf=37848,kf=37849,Nf=37850,Ff=37851,Uf=37852,Bf=37853,Gf=2200,zf=2201,Vf=2202,is=2300,fi=2301,$o=2302,pi=2400,mi=2401,Hs=2402,ea=2500,Ru=2501,Hf=0,Wf=1,Pu=2,gr=3e3,Hr=3001,ta=3007,ra=3002,qf=3003,Iu=3004,Du=3005,Ou=3006,Xf=3200,Yf=3201,Bn=0,Zf=1,na=7680,Jf=519,ss=35044,Ws=35048,ju="300 es";class gn{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let s=0,r=i.length;s<r;s++)i[s].call(this,t);t.target=null}}}let qs=1234567;const os=Math.PI/180,as=180/Math.PI,dr=[];for(let b=0;b<256;b++)dr[b]=(b<16?"0":"")+b.toString(16);const Kf=typeof crypto!="undefined"&&"randomUUID"in crypto;function Cr(){if(Kf)return crypto.randomUUID().toUpperCase();const b=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(dr[b&255]+dr[b>>8&255]+dr[b>>16&255]+dr[b>>24&255]+"-"+dr[t&255]+dr[t>>8&255]+"-"+dr[t>>16&15|64]+dr[t>>24&255]+"-"+dr[e&63|128]+dr[e>>8&255]+"-"+dr[e>>16&255]+dr[e>>24&255]+dr[n&255]+dr[n>>8&255]+dr[n>>16&255]+dr[n>>24&255]).toUpperCase()}function br(b,t,e){return Math.max(t,Math.min(e,b))}function ia(b,t){return(b%t+t)%t}function Qf(b,t,e,n,i){return n+(b-t)*(i-n)/(e-t)}function $f(b,t,e){return b!==t?(e-b)/(t-b):0}function ls(b,t,e){return(1-e)*b+e*t}function ep(b,t,e,n){return ls(b,t,1-Math.exp(-e*n))}function tp(b,t=1){return t-Math.abs(ia(b,t*2)-t)}function rp(b,t,e){return b<=t?0:b>=e?1:(b=(b-t)/(e-t),b*b*(3-2*b))}function np(b,t,e){return b<=t?0:b>=e?1:(b=(b-t)/(e-t),b*b*b*(b*(b*6-15)+10))}function ip(b,t){return b+Math.floor(Math.random()*(t-b+1))}function sp(b,t){return b+Math.random()*(t-b)}function op(b){return b*(.5-Math.random())}function ap(b){return b!==void 0&&(qs=b%2147483647),qs=qs*16807%2147483647,(qs-1)/2147483646}function lp(b){return b*os}function up(b){return b*as}function sa(b){return(b&b-1)==0&&b!==0}function ku(b){return Math.pow(2,Math.ceil(Math.log(b)/Math.LN2))}function Nu(b){return Math.pow(2,Math.floor(Math.log(b)/Math.LN2))}function cp(b,t,e,n,i){const s=Math.cos,r=Math.sin,a=s(e/2),c=r(e/2),d=s((t+n)/2),p=r((t+n)/2),u=s((t-n)/2),o=r((t-n)/2),l=s((n-t)/2),h=r((n-t)/2);switch(i){case"XYX":b.set(a*p,c*u,c*o,a*d);break;case"YZY":b.set(c*o,a*p,c*u,a*d);break;case"ZXZ":b.set(c*u,c*o,a*p,a*d);break;case"XZX":b.set(a*p,c*h,c*l,a*d);break;case"YXY":b.set(c*l,a*p,c*h,a*d);break;case"ZYZ":b.set(c*h,c*l,a*p,a*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var hp=Object.freeze({__proto__:null,DEG2RAD:os,RAD2DEG:as,generateUUID:Cr,clamp:br,euclideanModulo:ia,mapLinear:Qf,inverseLerp:$f,lerp:ls,damp:ep,pingpong:tp,smoothstep:rp,smootherstep:np,randInt:ip,randFloat:sp,randFloatSpread:op,seededRandom:ap,degToRad:lp,radToDeg:up,isPowerOfTwo:sa,ceilPowerOfTwo:ku,floorPowerOfTwo:Nu,setQuaternionFromProperEuler:cp});class Ke{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),s=this.x-t.x,r=this.y-t.y;return this.x=s*n-r*i+t.x,this.y=s*i+r*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ke.prototype.isVector2=!0;class fr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,s,r,a,c,d){const p=this.elements;return p[0]=t,p[1]=i,p[2]=a,p[3]=e,p[4]=s,p[5]=c,p[6]=n,p[7]=r,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,s=this.elements,r=n[0],a=n[3],c=n[6],d=n[1],p=n[4],u=n[7],o=n[2],l=n[5],h=n[8],f=i[0],m=i[3],g=i[6],v=i[1],x=i[4],w=i[7],M=i[2],A=i[5],E=i[8];return s[0]=r*f+a*v+c*M,s[3]=r*m+a*x+c*A,s[6]=r*g+a*w+c*E,s[1]=d*f+p*v+u*M,s[4]=d*m+p*x+u*A,s[7]=d*g+p*w+u*E,s[2]=o*f+l*v+h*M,s[5]=o*m+l*x+h*A,s[8]=o*g+l*w+h*E,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],c=t[6],d=t[7],p=t[8];return e*r*p-e*a*d-n*s*p+n*a*c+i*s*d-i*r*c}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],c=t[6],d=t[7],p=t[8],u=p*r-a*d,o=a*c-p*s,l=d*s-r*c,h=e*u+n*o+i*l;if(h===0)return this.set(0,0,0,0,0,0,0,0,0);const f=1/h;return t[0]=u*f,t[1]=(i*d-p*n)*f,t[2]=(a*n-i*r)*f,t[3]=o*f,t[4]=(p*e-i*c)*f,t[5]=(i*s-a*e)*f,t[6]=l*f,t[7]=(n*c-d*e)*f,t[8]=(r*e-n*s)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,s,r,a){const c=Math.cos(s),d=Math.sin(s);return this.set(n*c,n*d,-n*(c*r+d*a)+r+t,-i*d,i*c,-i*(-d*r+c*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,s=i[0],r=i[3],a=i[6],c=i[1],d=i[4],p=i[7];return i[0]=e*s+n*c,i[3]=e*r+n*d,i[6]=e*a+n*p,i[1]=-n*s+e*c,i[4]=-n*r+e*d,i[7]=-n*a+e*p,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}fr.prototype.isMatrix3=!0;function Fu(b){if(b.length===0)return-1/0;let t=b[0];for(let e=1,n=b.length;e<n;++e)b[e]>t&&(t=b[e]);return t}function Xs(b){return document.createElementNS("http://www.w3.org/1999/xhtml",b)}function Uu(b,t=0){let e=3735928559^t,n=1103547991^t;for(let i=0,s;i<b.length;i++)s=b.charCodeAt(i),e=Math.imul(e^s,2654435761),n=Math.imul(n^s,1597334677);return e=Math.imul(e^e>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(e^e>>>13,3266489909),4294967296*(2097151&n)+(e>>>0)}let gi;class yi{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{gi===void 0&&(gi=Xs("canvas")),gi.width=t.width,gi.height=t.height;const n=gi.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=gi}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let dp=0;class lr extends gn{constructor(t=lr.DEFAULT_IMAGE,e=lr.DEFAULT_MAPPING,n=Mr,i=Mr,s=Tr,r=ci,a=mr,c=mn,d=1,p=gr){super();Object.defineProperty(this,"id",{value:dp++}),this.uuid=Cr(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=r,this.anisotropy=d,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Ke(0,0),this.repeat=new Ke(1,1),this.center=new Ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Cr()),!e&&t.images[i.uuid]===void 0){let s;if(Array.isArray(i)){s=[];for(let r=0,a=i.length;r<a;r++)i[r].isDataTexture?s.push(oa(i[r].image)):s.push(oa(i[r]))}else s=oa(i);t.images[i.uuid]={uuid:i.uuid,url:s}}n.image=i.uuid}return JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==vu)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ui:t.x=t.x-Math.floor(t.x);break;case Mr:t.x=t.x<0?0:1;break;case Gs:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ui:t.y=t.y-Math.floor(t.y);break;case Mr:t.y=t.y<0?0:1;break;case Gs:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&this.version++}}lr.DEFAULT_IMAGE=void 0;lr.DEFAULT_MAPPING=vu;lr.prototype.isTexture=!0;function oa(b){return typeof HTMLImageElement!="undefined"&&b instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&b instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&b instanceof ImageBitmap?yi.getDataURL(b):b.data?{data:Array.prototype.slice.call(b.data),width:b.width,height:b.height,type:b.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Vt{constructor(t=0,e=0,n=0,i=1){this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,s=this.w,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i+r[12]*s,this.y=r[1]*e+r[5]*n+r[9]*i+r[13]*s,this.z=r[2]*e+r[6]*n+r[10]*i+r[14]*s,this.w=r[3]*e+r[7]*n+r[11]*i+r[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,s;const r=.01,a=.1,c=t.elements,d=c[0],p=c[4],u=c[8],o=c[1],l=c[5],h=c[9],f=c[2],m=c[6],g=c[10];if(Math.abs(p-o)<r&&Math.abs(u-f)<r&&Math.abs(h-m)<r){if(Math.abs(p+o)<a&&Math.abs(u+f)<a&&Math.abs(h+m)<a&&Math.abs(d+l+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const x=(d+1)/2,w=(l+1)/2,M=(g+1)/2,A=(p+o)/4,E=(u+f)/4,I=(h+m)/4;return x>w&&x>M?x<r?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(x),i=A/n,s=E/n):w>M?w<r?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),n=A/i,s=I/i):M<r?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),n=E/s,i=I/s),this.set(n,i,s,e),this}let v=Math.sqrt((m-h)*(m-h)+(u-f)*(u-f)+(o-p)*(o-p));return Math.abs(v)<.001&&(v=1),this.x=(m-h)/v,this.y=(u-f)/v,this.z=(o-p)/v,this.w=Math.acos((d+l+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Vt.prototype.isVector4=!0;class Wr extends gn{constructor(t,e,n={}){super();this.width=t,this.height=e,this.depth=1,this.scissor=new Vt(0,0,t,e),this.scissorTest=!1,this.viewport=new Vt(0,0,t,e),this.texture=new lr(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Tr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=ou({},this.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Wr.prototype.isWebGLRenderTarget=!0;class fp extends Wr{constructor(t,e,n){super(t,e);const i=this.texture;this.texture=[];for(let s=0;s<n;s++)this.texture[s]=i.clone()}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}fp.prototype.isWebGLMultipleRenderTargets=!0;class Bu extends Wr{constructor(t,e,n){super(t,e,n);this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}Bu.prototype.isWebGLMultisampleRenderTarget=!0;class pr{constructor(t=0,e=0,n=0,i=1){this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,s,r,a){let c=n[i+0],d=n[i+1],p=n[i+2],u=n[i+3];const o=s[r+0],l=s[r+1],h=s[r+2],f=s[r+3];if(a===0){t[e+0]=c,t[e+1]=d,t[e+2]=p,t[e+3]=u;return}if(a===1){t[e+0]=o,t[e+1]=l,t[e+2]=h,t[e+3]=f;return}if(u!==f||c!==o||d!==l||p!==h){let m=1-a;const g=c*o+d*l+p*h+u*f,v=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const M=Math.sqrt(x),A=Math.atan2(M,g*v);m=Math.sin(m*A)/M,a=Math.sin(a*A)/M}const w=a*v;if(c=c*m+o*w,d=d*m+l*w,p=p*m+h*w,u=u*m+f*w,m===1-a){const M=1/Math.sqrt(c*c+d*d+p*p+u*u);c*=M,d*=M,p*=M,u*=M}}t[e]=c,t[e+1]=d,t[e+2]=p,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,s,r){const a=n[i],c=n[i+1],d=n[i+2],p=n[i+3],u=s[r],o=s[r+1],l=s[r+2],h=s[r+3];return t[e]=a*h+p*u+c*l-d*o,t[e+1]=c*h+p*o+d*u-a*l,t[e+2]=d*h+p*l+a*o-c*u,t[e+3]=p*h-a*u-c*o-d*l,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,s=t._z,r=t._order,a=Math.cos,c=Math.sin,d=a(n/2),p=a(i/2),u=a(s/2),o=c(n/2),l=c(i/2),h=c(s/2);switch(r){case"XYZ":this._x=o*p*u+d*l*h,this._y=d*l*u-o*p*h,this._z=d*p*h+o*l*u,this._w=d*p*u-o*l*h;break;case"YXZ":this._x=o*p*u+d*l*h,this._y=d*l*u-o*p*h,this._z=d*p*h-o*l*u,this._w=d*p*u+o*l*h;break;case"ZXY":this._x=o*p*u-d*l*h,this._y=d*l*u+o*p*h,this._z=d*p*h+o*l*u,this._w=d*p*u-o*l*h;break;case"ZYX":this._x=o*p*u-d*l*h,this._y=d*l*u+o*p*h,this._z=d*p*h-o*l*u,this._w=d*p*u+o*l*h;break;case"YZX":this._x=o*p*u+d*l*h,this._y=d*l*u+o*p*h,this._z=d*p*h-o*l*u,this._w=d*p*u-o*l*h;break;case"XZY":this._x=o*p*u-d*l*h,this._y=d*l*u-o*p*h,this._z=d*p*h+o*l*u,this._w=d*p*u+o*l*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],s=e[8],r=e[1],a=e[5],c=e[9],d=e[2],p=e[6],u=e[10],o=n+a+u;if(o>0){const l=.5/Math.sqrt(o+1);this._w=.25/l,this._x=(p-c)*l,this._y=(s-d)*l,this._z=(r-i)*l}else if(n>a&&n>u){const l=2*Math.sqrt(1+n-a-u);this._w=(p-c)/l,this._x=.25*l,this._y=(i+r)/l,this._z=(s+d)/l}else if(a>u){const l=2*Math.sqrt(1+a-n-u);this._w=(s-d)/l,this._x=(i+r)/l,this._y=.25*l,this._z=(c+p)/l}else{const l=2*Math.sqrt(1+u-n-a);this._w=(r-i)/l,this._x=(s+d)/l,this._y=(c+p)/l,this._z=.25*l}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(br(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return e!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,s=t._z,r=t._w,a=e._x,c=e._y,d=e._z,p=e._w;return this._x=n*p+r*a+i*d-s*c,this._y=i*p+r*c+s*a-n*d,this._z=s*p+r*d+n*c-i*a,this._w=r*p-n*a-i*c-s*d,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,i=this._y,s=this._z,r=this._w;let a=r*t._w+n*t._x+i*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=r,this._x=n,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const l=1-e;return this._w=l*r+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(c),p=Math.atan2(d,a),u=Math.sin((1-e)*p)/d,o=Math.sin(e*p)/d;return this._w=r*u+this._w*o,this._x=n*u+this._x*o,this._y=i*u+this._y*o,this._z=s*u+this._z*o,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(s),n*Math.cos(s),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}pr.prototype.isQuaternion=!0;class Se{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Gu.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Gu.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*i,this.y=s[1]*e+s[4]*n+s[7]*i,this.z=s[2]*e+s[5]*n+s[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,s=t.elements,r=1/(s[3]*e+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*i+s[12])*r,this.y=(s[1]*e+s[5]*n+s[9]*i+s[13])*r,this.z=(s[2]*e+s[6]*n+s[10]*i+s[14])*r,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,s=t.x,r=t.y,a=t.z,c=t.w,d=c*e+r*i-a*n,p=c*n+a*e-s*i,u=c*i+s*n-r*e,o=-s*e-r*n-a*i;return this.x=d*c+o*-s+p*-a-u*-r,this.y=p*c+o*-r+u*-s-d*-a,this.z=u*c+o*-a+d*-r-p*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i,this.y=s[1]*e+s[5]*n+s[9]*i,this.z=s[2]*e+s[6]*n+s[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return e!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,s=t.z,r=e.x,a=e.y,c=e.z;return this.x=i*c-s*a,this.y=s*r-n*c,this.z=n*a-i*r,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return aa.copy(this).projectOnVector(t),this.sub(aa)}reflect(t){return this.sub(aa.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(br(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Se.prototype.isVector3=!0;const aa=new Se,Gu=new pr;class Rr{constructor(t=new Se(1/0,1/0,1/0),e=new Se(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,s=-1/0,r=-1/0,a=-1/0;for(let c=0,d=t.length;c<d;c+=3){const p=t[c],u=t[c+1],o=t[c+2];p<e&&(e=p),u<n&&(n=u),o<i&&(i=o),p>s&&(s=p),u>r&&(r=u),o>a&&(a=o)}return this.min.set(e,n,i),this.max.set(s,r,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,s=-1/0,r=-1/0,a=-1/0;for(let c=0,d=t.count;c<d;c++){const p=t.getX(c),u=t.getY(c),o=t.getZ(c);p<e&&(e=p),u<n&&(n=u),o<i&&(i=o),p>s&&(s=p),u>r&&(r=u),o>a&&(a=o)}return this.min.set(e,n,i),this.max.set(s,r,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=us.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;e!==void 0&&(e.boundingBox===null&&e.computeBoundingBox(),la.copy(e.boundingBox),la.applyMatrix4(t.matrixWorld),this.union(la));const n=t.children;for(let i=0,s=n.length;i<s;i++)this.expandByObject(n[i]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,us),us.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(cs),Ys.subVectors(this.max,cs),vi.subVectors(t.a,cs),bi.subVectors(t.b,cs),_i.subVectors(t.c,cs),yn.subVectors(bi,vi),vn.subVectors(_i,bi),Gn.subVectors(vi,_i);let e=[0,-yn.z,yn.y,0,-vn.z,vn.y,0,-Gn.z,Gn.y,yn.z,0,-yn.x,vn.z,0,-vn.x,Gn.z,0,-Gn.x,-yn.y,yn.x,0,-vn.y,vn.x,0,-Gn.y,Gn.x,0];return!ua(e,vi,bi,_i,Ys)||(e=[1,0,0,0,1,0,0,0,1],!ua(e,vi,bi,_i,Ys))?!1:(Zs.crossVectors(yn,vn),e=[Zs.x,Zs.y,Zs.z],ua(e,vi,bi,_i,Ys))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return us.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(us).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(en[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),en[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),en[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),en[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),en[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),en[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),en[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),en[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(en),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Rr.prototype.isBox3=!0;const en=[new Se,new Se,new Se,new Se,new Se,new Se,new Se,new Se],us=new Se,la=new Rr,vi=new Se,bi=new Se,_i=new Se,yn=new Se,vn=new Se,Gn=new Se,cs=new Se,Ys=new Se,Zs=new Se,zn=new Se;function ua(b,t,e,n,i){for(let s=0,r=b.length-3;s<=r;s+=3){zn.fromArray(b,s);const a=i.x*Math.abs(zn.x)+i.y*Math.abs(zn.y)+i.z*Math.abs(zn.z),c=t.dot(zn),d=e.dot(zn),p=n.dot(zn);if(Math.max(-Math.max(c,d,p),Math.min(c,d,p))>a)return!1}return!0}const pp=new Rr,zu=new Se,ca=new Se,ha=new Se;class Vn{constructor(t=new Se,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):pp.setFromPoints(t).getCenter(n);let i=0;for(let s=0,r=t.length;s<r;s++)i=Math.max(i,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){ha.subVectors(t,this.center);const e=ha.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),i=(n-this.radius)*.5;this.center.add(ha.multiplyScalar(i/n)),this.radius+=i}return this}union(t){return ca.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(zu.copy(t.center).add(ca)),this.expandByPoint(zu.copy(t.center).sub(ca)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const tn=new Se,da=new Se,Js=new Se,bn=new Se,fa=new Se,Ks=new Se,pa=new Se;class xi{constructor(t=new Se,e=new Se(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,tn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=tn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(tn.copy(this.direction).multiplyScalar(e).add(this.origin),tn.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){da.copy(t).add(e).multiplyScalar(.5),Js.copy(e).sub(t).normalize(),bn.copy(this.origin).sub(da);const s=t.distanceTo(e)*.5,r=-this.direction.dot(Js),a=bn.dot(this.direction),c=-bn.dot(Js),d=bn.lengthSq(),p=Math.abs(1-r*r);let u,o,l,h;if(p>0)if(u=r*c-a,o=r*a-c,h=s*p,u>=0)if(o>=-h)if(o<=h){const f=1/p;u*=f,o*=f,l=u*(u+r*o+2*a)+o*(r*u+o+2*c)+d}else o=s,u=Math.max(0,-(r*o+a)),l=-u*u+o*(o+2*c)+d;else o=-s,u=Math.max(0,-(r*o+a)),l=-u*u+o*(o+2*c)+d;else o<=-h?(u=Math.max(0,-(-r*s+a)),o=u>0?-s:Math.min(Math.max(-s,-c),s),l=-u*u+o*(o+2*c)+d):o<=h?(u=0,o=Math.min(Math.max(-s,-c),s),l=o*(o+2*c)+d):(u=Math.max(0,-(r*s+a)),o=u>0?s:Math.min(Math.max(-s,-c),s),l=-u*u+o*(o+2*c)+d);else o=r>0?-s:s,u=Math.max(0,-(r*o+a)),l=-u*u+o*(o+2*c)+d;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(Js).multiplyScalar(o).add(da),l}intersectSphere(t,e){tn.subVectors(t.center,this.origin);const n=tn.dot(this.direction),i=tn.dot(tn)-n*n,s=t.radius*t.radius;if(i>s)return null;const r=Math.sqrt(s-i),a=n-r,c=n+r;return a<0&&c<0?null:a<0?this.at(c,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,s,r,a,c;const d=1/this.direction.x,p=1/this.direction.y,u=1/this.direction.z,o=this.origin;return d>=0?(n=(t.min.x-o.x)*d,i=(t.max.x-o.x)*d):(n=(t.max.x-o.x)*d,i=(t.min.x-o.x)*d),p>=0?(s=(t.min.y-o.y)*p,r=(t.max.y-o.y)*p):(s=(t.max.y-o.y)*p,r=(t.min.y-o.y)*p),n>r||s>i||((s>n||n!==n)&&(n=s),(r<i||i!==i)&&(i=r),u>=0?(a=(t.min.z-o.z)*u,c=(t.max.z-o.z)*u):(a=(t.max.z-o.z)*u,c=(t.min.z-o.z)*u),n>c||a>i)||((a>n||n!==n)&&(n=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,e)}intersectsBox(t){return this.intersectBox(t,tn)!==null}intersectTriangle(t,e,n,i,s){fa.subVectors(e,t),Ks.subVectors(n,t),pa.crossVectors(fa,Ks);let r=this.direction.dot(pa),a;if(r>0){if(i)return null;a=1}else if(r<0)a=-1,r=-r;else return null;bn.subVectors(this.origin,t);const c=a*this.direction.dot(Ks.crossVectors(bn,Ks));if(c<0)return null;const d=a*this.direction.dot(fa.cross(bn));if(d<0||c+d>r)return null;const p=-a*bn.dot(pa);return p<0?null:this.at(p/r,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,s,r,a,c,d,p,u,o,l,h,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=s,g[5]=r,g[9]=a,g[13]=c,g[2]=d,g[6]=p,g[10]=u,g[14]=o,g[3]=l,g[7]=h,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/wi.setFromMatrixColumn(t,0).length(),s=1/wi.setFromMatrixColumn(t,1).length(),r=1/wi.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*r,e[9]=n[9]*r,e[10]=n[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,s=t.z,r=Math.cos(n),a=Math.sin(n),c=Math.cos(i),d=Math.sin(i),p=Math.cos(s),u=Math.sin(s);if(t.order==="XYZ"){const o=r*p,l=r*u,h=a*p,f=a*u;e[0]=c*p,e[4]=-c*u,e[8]=d,e[1]=l+h*d,e[5]=o-f*d,e[9]=-a*c,e[2]=f-o*d,e[6]=h+l*d,e[10]=r*c}else if(t.order==="YXZ"){const o=c*p,l=c*u,h=d*p,f=d*u;e[0]=o+f*a,e[4]=h*a-l,e[8]=r*d,e[1]=r*u,e[5]=r*p,e[9]=-a,e[2]=l*a-h,e[6]=f+o*a,e[10]=r*c}else if(t.order==="ZXY"){const o=c*p,l=c*u,h=d*p,f=d*u;e[0]=o-f*a,e[4]=-r*u,e[8]=h+l*a,e[1]=l+h*a,e[5]=r*p,e[9]=f-o*a,e[2]=-r*d,e[6]=a,e[10]=r*c}else if(t.order==="ZYX"){const o=r*p,l=r*u,h=a*p,f=a*u;e[0]=c*p,e[4]=h*d-l,e[8]=o*d+f,e[1]=c*u,e[5]=f*d+o,e[9]=l*d-h,e[2]=-d,e[6]=a*c,e[10]=r*c}else if(t.order==="YZX"){const o=r*c,l=r*d,h=a*c,f=a*d;e[0]=c*p,e[4]=f-o*u,e[8]=h*u+l,e[1]=u,e[5]=r*p,e[9]=-a*p,e[2]=-d*p,e[6]=l*u+h,e[10]=o-f*u}else if(t.order==="XZY"){const o=r*c,l=r*d,h=a*c,f=a*d;e[0]=c*p,e[4]=-u,e[8]=d*p,e[1]=o*u+f,e[5]=r*p,e[9]=l*u-h,e[2]=h*u-l,e[6]=a*p,e[10]=f*u+o}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(mp,t,gp)}lookAt(t,e,n){const i=this.elements;return Er.subVectors(t,e),Er.lengthSq()===0&&(Er.z=1),Er.normalize(),_n.crossVectors(n,Er),_n.lengthSq()===0&&(Math.abs(n.z)===1?Er.x+=1e-4:Er.z+=1e-4,Er.normalize(),_n.crossVectors(n,Er)),_n.normalize(),Qs.crossVectors(Er,_n),i[0]=_n.x,i[4]=Qs.x,i[8]=Er.x,i[1]=_n.y,i[5]=Qs.y,i[9]=Er.y,i[2]=_n.z,i[6]=Qs.z,i[10]=Er.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,s=this.elements,r=n[0],a=n[4],c=n[8],d=n[12],p=n[1],u=n[5],o=n[9],l=n[13],h=n[2],f=n[6],m=n[10],g=n[14],v=n[3],x=n[7],w=n[11],M=n[15],A=i[0],E=i[4],I=i[8],R=i[12],P=i[1],D=i[5],O=i[9],j=i[13],N=i[2],q=i[6],X=i[10],V=i[14],$=i[3],K=i[7],_e=i[11],me=i[15];return s[0]=r*A+a*P+c*N+d*$,s[4]=r*E+a*D+c*q+d*K,s[8]=r*I+a*O+c*X+d*_e,s[12]=r*R+a*j+c*V+d*me,s[1]=p*A+u*P+o*N+l*$,s[5]=p*E+u*D+o*q+l*K,s[9]=p*I+u*O+o*X+l*_e,s[13]=p*R+u*j+o*V+l*me,s[2]=h*A+f*P+m*N+g*$,s[6]=h*E+f*D+m*q+g*K,s[10]=h*I+f*O+m*X+g*_e,s[14]=h*R+f*j+m*V+g*me,s[3]=v*A+x*P+w*N+M*$,s[7]=v*E+x*D+w*q+M*K,s[11]=v*I+x*O+w*X+M*_e,s[15]=v*R+x*j+w*V+M*me,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],s=t[12],r=t[1],a=t[5],c=t[9],d=t[13],p=t[2],u=t[6],o=t[10],l=t[14],h=t[3],f=t[7],m=t[11],g=t[15];return h*(+s*c*u-i*d*u-s*a*o+n*d*o+i*a*l-n*c*l)+f*(+e*c*l-e*d*o+s*r*o-i*r*l+i*d*p-s*c*p)+m*(+e*d*u-e*a*l-s*r*u+n*r*l+s*a*p-n*d*p)+g*(-i*a*p-e*c*u+e*a*o+i*r*u-n*r*o+n*c*p)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],c=t[6],d=t[7],p=t[8],u=t[9],o=t[10],l=t[11],h=t[12],f=t[13],m=t[14],g=t[15],v=u*m*d-f*o*d+f*c*l-a*m*l-u*c*g+a*o*g,x=h*o*d-p*m*d-h*c*l+r*m*l+p*c*g-r*o*g,w=p*f*d-h*u*d+h*a*l-r*f*l-p*a*g+r*u*g,M=h*u*c-p*f*c-h*a*o+r*f*o+p*a*m-r*u*m,A=e*v+n*x+i*w+s*M;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/A;return t[0]=v*E,t[1]=(f*o*s-u*m*s-f*i*l+n*m*l+u*i*g-n*o*g)*E,t[2]=(a*m*s-f*c*s+f*i*d-n*m*d-a*i*g+n*c*g)*E,t[3]=(u*c*s-a*o*s-u*i*d+n*o*d+a*i*l-n*c*l)*E,t[4]=x*E,t[5]=(p*m*s-h*o*s+h*i*l-e*m*l-p*i*g+e*o*g)*E,t[6]=(h*c*s-r*m*s-h*i*d+e*m*d+r*i*g-e*c*g)*E,t[7]=(r*o*s-p*c*s+p*i*d-e*o*d-r*i*l+e*c*l)*E,t[8]=w*E,t[9]=(h*u*s-p*f*s-h*n*l+e*f*l+p*n*g-e*u*g)*E,t[10]=(r*f*s-h*a*s+h*n*d-e*f*d-r*n*g+e*a*g)*E,t[11]=(p*a*s-r*u*s-p*n*d+e*u*d+r*n*l-e*a*l)*E,t[12]=M*E,t[13]=(p*f*i-h*u*i+h*n*o-e*f*o-p*n*m+e*u*m)*E,t[14]=(h*a*i-r*f*i-h*n*c+e*f*c+r*n*m-e*a*m)*E,t[15]=(r*u*i-p*a*i+p*n*c-e*u*c-r*n*o+e*a*o)*E,this}scale(t){const e=this.elements,n=t.x,i=t.y,s=t.z;return e[0]*=n,e[4]*=i,e[8]*=s,e[1]*=n,e[5]*=i,e[9]*=s,e[2]*=n,e[6]*=i,e[10]*=s,e[3]*=n,e[7]*=i,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),s=1-n,r=t.x,a=t.y,c=t.z,d=s*r,p=s*a;return this.set(d*r+n,d*a-i*c,d*c+i*a,0,d*a+i*c,p*a+n,p*c-i*r,0,d*c-i*a,p*c+i*r,s*c*c+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,s,r){return this.set(1,n,s,0,t,1,r,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,s=e._x,r=e._y,a=e._z,c=e._w,d=s+s,p=r+r,u=a+a,o=s*d,l=s*p,h=s*u,f=r*p,m=r*u,g=a*u,v=c*d,x=c*p,w=c*u,M=n.x,A=n.y,E=n.z;return i[0]=(1-(f+g))*M,i[1]=(l+w)*M,i[2]=(h-x)*M,i[3]=0,i[4]=(l-w)*A,i[5]=(1-(o+g))*A,i[6]=(m+v)*A,i[7]=0,i[8]=(h+x)*E,i[9]=(m-v)*E,i[10]=(1-(o+f))*E,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let s=wi.set(i[0],i[1],i[2]).length();const r=wi.set(i[4],i[5],i[6]).length(),a=wi.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),t.x=i[12],t.y=i[13],t.z=i[14],Nr.copy(this);const d=1/s,p=1/r,u=1/a;return Nr.elements[0]*=d,Nr.elements[1]*=d,Nr.elements[2]*=d,Nr.elements[4]*=p,Nr.elements[5]*=p,Nr.elements[6]*=p,Nr.elements[8]*=u,Nr.elements[9]*=u,Nr.elements[10]*=u,e.setFromRotationMatrix(Nr),n.x=s,n.y=r,n.z=a,this}makePerspective(t,e,n,i,s,r){r===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(e-t),d=2*s/(n-i),p=(e+t)/(e-t),u=(n+i)/(n-i),o=-(r+s)/(r-s),l=-2*r*s/(r-s);return a[0]=c,a[4]=0,a[8]=p,a[12]=0,a[1]=0,a[5]=d,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=o,a[14]=l,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,i,s,r){const a=this.elements,c=1/(e-t),d=1/(n-i),p=1/(r-s),u=(e+t)*c,o=(n+i)*d,l=(r+s)*p;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*d,a[9]=0,a[13]=-o,a[2]=0,a[6]=0,a[10]=-2*p,a[14]=-l,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}ft.prototype.isMatrix4=!0;const wi=new Se,Nr=new ft,mp=new Se(0,0,0),gp=new Se(1,1,1),_n=new Se,Qs=new Se,Er=new Se,Vu=new ft,Hu=new pr;class Si{constructor(t=0,e=0,n=0,i=Si.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,s=i[0],r=i[4],a=i[8],c=i[1],d=i[5],p=i[9],u=i[2],o=i[6],l=i[10];switch(e){case"XYZ":this._y=Math.asin(br(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-p,l),this._z=Math.atan2(-r,s)):(this._x=Math.atan2(o,d),this._z=0);break;case"YXZ":this._x=Math.asin(-br(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(a,l),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(br(o,-1,1)),Math.abs(o)<.9999999?(this._y=Math.atan2(-u,l),this._z=Math.atan2(-r,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-br(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(o,l),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-r,d));break;case"YZX":this._z=Math.asin(br(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,l));break;case"XZY":this._z=Math.asin(-br(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(o,d),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-p,l),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Vu.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Vu,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Hu.setFromEuler(this),this.setFromQuaternion(Hu,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Se(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Si.prototype.isEuler=!0;Si.DefaultOrder="XYZ";Si.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class yp{constructor(){this.mask=1|0}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=4294967295|0}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!=0}}let vp=0;const Wu=new Se,Mi=new pr,rn=new ft,$s=new Se,hs=new Se,bp=new Se,_p=new pr,qu=new Se(1,0,0),Xu=new Se(0,1,0),Yu=new Se(0,0,1),xp={type:"added"},Zu={type:"removed"};class Ot extends gn{constructor(){super();Object.defineProperty(this,"id",{value:vp++}),this.uuid=Cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ot.DefaultUp.clone();const t=new Se,e=new Si,n=new pr,i=new Se(1,1,1);function s(){n.setFromEuler(e,!1)}function r(){e.setFromQuaternion(n,void 0,!1)}e._onChange(s),n._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ft},normalMatrix:{value:new fr}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=Ot.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new yp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Mi.setFromAxisAngle(t,e),this.quaternion.multiply(Mi),this}rotateOnWorldAxis(t,e){return Mi.setFromAxisAngle(t,e),this.quaternion.premultiply(Mi),this}rotateX(t){return this.rotateOnAxis(qu,t)}rotateY(t){return this.rotateOnAxis(Xu,t)}rotateZ(t){return this.rotateOnAxis(Yu,t)}translateOnAxis(t,e){return Wu.copy(t).applyQuaternion(this.quaternion),this.position.add(Wu.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(qu,t)}translateY(t){return this.translateOnAxis(Xu,t)}translateZ(t){return this.translateOnAxis(Yu,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(rn.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?$s.copy(t):$s.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),hs.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rn.lookAt(hs,$s,this.up):rn.lookAt($s,hs,this.up),this.quaternion.setFromRotationMatrix(rn),i&&(rn.extractRotation(i.matrixWorld),Mi.setFromRotationMatrix(rn),this.quaternion.premultiply(Mi.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(xp)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Zu)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Zu)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),rn.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),rn.multiply(t.parent.matrixWorld)),t.applyMatrix4(rn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const r=this.children[n].getObjectByProperty(t,e);if(r!==void 0)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hs,t,bp),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hs,_p,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let d=0,p=c.length;d<p;d++){const u=c[d];s(t.shapes,u)}else s(t.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,d=this.material.length;c<d;c++)a.push(s(t.materials,this.material[c]));i.material=a}else i.material=s(t.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(s(t.animations,c))}}if(e){const a=r(t.geometries),c=r(t.materials),d=r(t.textures),p=r(t.images),u=r(t.shapes),o=r(t.skeletons),l=r(t.animations);a.length>0&&(n.geometries=a),c.length>0&&(n.materials=c),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),u.length>0&&(n.shapes=u),o.length>0&&(n.skeletons=o),l.length>0&&(n.animations=l)}return n.object=i,n;function r(a){const c=[];for(const d in a){const p=a[d];delete p.metadata,c.push(p)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}}Ot.DefaultUp=new Se(0,1,0);Ot.DefaultMatrixAutoUpdate=!0;Ot.prototype.isObject3D=!0;const Fr=new Se,nn=new Se,ma=new Se,sn=new Se,Ti=new Se,Ei=new Se,Ju=new Se,ga=new Se,ya=new Se,va=new Se;class ir{constructor(t=new Se,e=new Se,n=new Se){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Fr.subVectors(t,e),i.cross(Fr);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(t,e,n,i,s){Fr.subVectors(i,e),nn.subVectors(n,e),ma.subVectors(t,e);const r=Fr.dot(Fr),a=Fr.dot(nn),c=Fr.dot(ma),d=nn.dot(nn),p=nn.dot(ma),u=r*d-a*a;if(u===0)return s.set(-2,-1,-1);const o=1/u,l=(d*c-a*p)*o,h=(r*p-a*c)*o;return s.set(1-l-h,h,l)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,sn),sn.x>=0&&sn.y>=0&&sn.x+sn.y<=1}static getUV(t,e,n,i,s,r,a,c){return this.getBarycoord(t,e,n,i,sn),c.set(0,0),c.addScaledVector(s,sn.x),c.addScaledVector(r,sn.y),c.addScaledVector(a,sn.z),c}static isFrontFacing(t,e,n,i){return Fr.subVectors(n,e),nn.subVectors(t,e),Fr.cross(nn).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Fr.subVectors(this.c,this.b),nn.subVectors(this.a,this.b),Fr.cross(nn).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ir.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ir.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,s){return ir.getUV(t,this.a,this.b,this.c,e,n,i,s)}containsPoint(t){return ir.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ir.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,s=this.c;let r,a;Ti.subVectors(i,n),Ei.subVectors(s,n),ga.subVectors(t,n);const c=Ti.dot(ga),d=Ei.dot(ga);if(c<=0&&d<=0)return e.copy(n);ya.subVectors(t,i);const p=Ti.dot(ya),u=Ei.dot(ya);if(p>=0&&u<=p)return e.copy(i);const o=c*u-p*d;if(o<=0&&c>=0&&p<=0)return r=c/(c-p),e.copy(n).addScaledVector(Ti,r);va.subVectors(t,s);const l=Ti.dot(va),h=Ei.dot(va);if(h>=0&&l<=h)return e.copy(s);const f=l*d-c*h;if(f<=0&&d>=0&&h<=0)return a=d/(d-h),e.copy(n).addScaledVector(Ei,a);const m=p*h-l*u;if(m<=0&&u-p>=0&&l-h>=0)return Ju.subVectors(s,i),a=(u-p)/(u-p+(l-h)),e.copy(i).addScaledVector(Ju,a);const g=1/(m+f+o);return r=f*g,a=o*g,e.copy(n).addScaledVector(Ti,r).addScaledVector(Ei,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let wp=0;class ur extends gn{constructor(){super();Object.defineProperty(this,"id",{value:wp++}),this.uuid=Cr(),this.name="",this.type="Material",this.fog=!0,this.blending=$i,this.side=ai,this.vertexColors=!1,this.opacity=1,this.format=mr,this.transparent=!1,this.blendSrc=gu,this.blendDst=yu,this.blendEquation=li,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Xo,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Jf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=na,this.stencilZFail=na,this.stencilZPass=na,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===cu;continue}const i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==$i&&(n.blending=this.blending),this.side!==ai&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==mr&&(n.format=this.format),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(s){const r=[];for(const a in s){const c=s[a];delete c.metadata,r.push(c)}return r}if(e){const s=i(t.textures),r=i(t.images);s.length>0&&(n.textures=s),r.length>0&&(n.images=r)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const i=e.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}ur.prototype.isMaterial=!0;const Ku={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ur={h:0,s:0,l:0},eo={h:0,s:0,l:0};function ba(b,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?b+(t-b)*6*e:e<1/2?t:e<2/3?b+(t-b)*6*(2/3-e):b}function _a(b){return b<.04045?b*.0773993808:Math.pow(b*.9478672986+.0521327014,2.4)}function xa(b){return b<.0031308?b*12.92:1.055*Math.pow(b,.41666)-.055}class at{constructor(t,e,n){return e===void 0&&n===void 0?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=ia(t,1),e=br(e,0,1),n=br(n,0,1),e===0)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,s=2*n-i;this.r=ba(s,i,t+1/3),this.g=ba(s,i,t),this.b=ba(s,i,t-1/3)}return this}setStyle(t){function e(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let i;const s=n[1],r=n[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const a=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,d=parseInt(i[3],10)/100;return e(i[4]),this.setHSL(a,c,d)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=n[1],s=i.length;if(s===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=Ku[t.toLowerCase()];return e!==void 0?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=_a(t.r),this.g=_a(t.g),this.b=_a(t.b),this}copyLinearToSRGB(t){return this.r=xa(t.r),this.g=xa(t.g),this.b=xa(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,s=Math.max(e,n,i),r=Math.min(e,n,i);let a,c;const d=(r+s)/2;if(r===s)a=0,c=0;else{const p=s-r;switch(c=d<=.5?p/(s+r):p/(2-s-r),s){case e:a=(n-i)/p+(n<i?6:0);break;case n:a=(i-e)/p+2;break;case i:a=(e-n)/p+4;break}a/=6}return t.h=a,t.s=c,t.l=d,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,e,n){return this.getHSL(Ur),Ur.h+=t,Ur.s+=e,Ur.l+=n,this.setHSL(Ur.h,Ur.s,Ur.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Ur),t.getHSL(eo);const n=ls(Ur.h,eo.h,e),i=ls(Ur.s,eo.s,e),s=ls(Ur.l,eo.l,e);return this.setHSL(n,i,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}at.NAMES=Ku;at.prototype.isColor=!0;at.prototype.r=1;at.prototype.g=1;at.prototype.b=1;class xn extends ur{constructor(t){super();this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Us,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}xn.prototype.isMeshBasicMaterial=!0;const qt=new Se,to=new Ke;class tr{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n===!0,this.usage=ss,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new at),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Ke),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Se),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Vt),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)to.fromBufferAttribute(this,e),to.applyMatrix3(t),this.setXY(e,to.x,to.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)qt.fromBufferAttribute(this,e),qt.applyMatrix3(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)qt.x=this.getX(e),qt.y=this.getY(e),qt.z=this.getZ(e),qt.applyMatrix4(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)qt.x=this.getX(e),qt.y=this.getY(e),qt.z=this.getZ(e),qt.applyNormalMatrix(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)qt.x=this.getX(e),qt.y=this.getY(e),qt.z=this.getZ(e),qt.transformDirection(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==ss&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}tr.prototype.isBufferAttribute=!0;class Qu extends tr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class $u extends tr{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Sp extends tr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}Sp.prototype.isFloat16BufferAttribute=!0;class $t extends tr{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Mp=0;const Pr=new ft,wa=new Ot,Ai=new Se,Ar=new Rr,ds=new Rr,cr=new Se;class Ht extends gn{constructor(){super();Object.defineProperty(this,"id",{value:Mp++}),this.uuid=Cr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Fu(t)>65535?$u:Qu)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new fr().getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Pr.makeRotationFromQuaternion(t),this.applyMatrix4(Pr),this}rotateX(t){return Pr.makeRotationX(t),this.applyMatrix4(Pr),this}rotateY(t){return Pr.makeRotationY(t),this.applyMatrix4(Pr),this}rotateZ(t){return Pr.makeRotationZ(t),this.applyMatrix4(Pr),this}translate(t,e,n){return Pr.makeTranslation(t,e,n),this.applyMatrix4(Pr),this}scale(t,e,n){return Pr.makeScale(t,e,n),this.applyMatrix4(Pr),this}lookAt(t){return wa.lookAt(t),wa.updateMatrix(),this.applyMatrix4(wa.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ai).negate(),this.translate(Ai.x,Ai.y,Ai.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new $t(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Se(-1/0,-1/0,-1/0),new Se(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const s=e[n];Ar.setFromBufferAttribute(s),this.morphTargetsRelative?(cr.addVectors(this.boundingBox.min,Ar.min),this.boundingBox.expandByPoint(cr),cr.addVectors(this.boundingBox.max,Ar.max),this.boundingBox.expandByPoint(cr)):(this.boundingBox.expandByPoint(Ar.min),this.boundingBox.expandByPoint(Ar.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Se,1/0);return}if(t){const n=this.boundingSphere.center;if(Ar.setFromBufferAttribute(t),e)for(let s=0,r=e.length;s<r;s++){const a=e[s];ds.setFromBufferAttribute(a),this.morphTargetsRelative?(cr.addVectors(Ar.min,ds.min),Ar.expandByPoint(cr),cr.addVectors(Ar.max,ds.max),Ar.expandByPoint(cr)):(Ar.expandByPoint(ds.min),Ar.expandByPoint(ds.max))}Ar.getCenter(n);let i=0;for(let s=0,r=t.count;s<r;s++)cr.fromBufferAttribute(t,s),i=Math.max(i,n.distanceToSquared(cr));if(e)for(let s=0,r=e.length;s<r;s++){const a=e[s],c=this.morphTargetsRelative;for(let d=0,p=a.count;d<p;d++)cr.fromBufferAttribute(a,d),c&&(Ai.fromBufferAttribute(t,d),cr.add(Ai)),i=Math.max(i,n.distanceToSquared(cr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.array,i=e.position.array,s=e.normal.array,r=e.uv.array,a=i.length/3;e.tangent===void 0&&this.setAttribute("tangent",new tr(new Float32Array(4*a),4));const c=e.tangent.array,d=[],p=[];for(let P=0;P<a;P++)d[P]=new Se,p[P]=new Se;const u=new Se,o=new Se,l=new Se,h=new Ke,f=new Ke,m=new Ke,g=new Se,v=new Se;function x(P,D,O){u.fromArray(i,P*3),o.fromArray(i,D*3),l.fromArray(i,O*3),h.fromArray(r,P*2),f.fromArray(r,D*2),m.fromArray(r,O*2),o.sub(u),l.sub(u),f.sub(h),m.sub(h);const j=1/(f.x*m.y-m.x*f.y);!isFinite(j)||(g.copy(o).multiplyScalar(m.y).addScaledVector(l,-f.y).multiplyScalar(j),v.copy(l).multiplyScalar(f.x).addScaledVector(o,-m.x).multiplyScalar(j),d[P].add(g),d[D].add(g),d[O].add(g),p[P].add(v),p[D].add(v),p[O].add(v))}let w=this.groups;w.length===0&&(w=[{start:0,count:n.length}]);for(let P=0,D=w.length;P<D;++P){const O=w[P],j=O.start,N=O.count;for(let q=j,X=j+N;q<X;q+=3)x(n[q+0],n[q+1],n[q+2])}const M=new Se,A=new Se,E=new Se,I=new Se;function R(P){E.fromArray(s,P*3),I.copy(E);const D=d[P];M.copy(D),M.sub(E.multiplyScalar(E.dot(D))).normalize(),A.crossVectors(I,D);const j=A.dot(p[P])<0?-1:1;c[P*4]=M.x,c[P*4+1]=M.y,c[P*4+2]=M.z,c[P*4+3]=j}for(let P=0,D=w.length;P<D;++P){const O=w[P],j=O.start,N=O.count;for(let q=j,X=j+N;q<X;q+=3)R(n[q+0]),R(n[q+1]),R(n[q+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new tr(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let o=0,l=n.count;o<l;o++)n.setXYZ(o,0,0,0);const i=new Se,s=new Se,r=new Se,a=new Se,c=new Se,d=new Se,p=new Se,u=new Se;if(t)for(let o=0,l=t.count;o<l;o+=3){const h=t.getX(o+0),f=t.getX(o+1),m=t.getX(o+2);i.fromBufferAttribute(e,h),s.fromBufferAttribute(e,f),r.fromBufferAttribute(e,m),p.subVectors(r,s),u.subVectors(i,s),p.cross(u),a.fromBufferAttribute(n,h),c.fromBufferAttribute(n,f),d.fromBufferAttribute(n,m),a.add(p),c.add(p),d.add(p),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(f,c.x,c.y,c.z),n.setXYZ(m,d.x,d.y,d.z)}else for(let o=0,l=e.count;o<l;o+=3)i.fromBufferAttribute(e,o+0),s.fromBufferAttribute(e,o+1),r.fromBufferAttribute(e,o+2),p.subVectors(r,s),u.subVectors(i,s),p.cross(u),n.setXYZ(o+0,p.x,p.y,p.z),n.setXYZ(o+1,p.x,p.y,p.z),n.setXYZ(o+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(t.attributes[i]===void 0)continue;const r=n[i].array,a=t.attributes[i],c=a.array,d=a.itemSize*e,p=Math.min(c.length,r.length-d);for(let u=0,o=d;u<p;u++,o++)r[o]=c[u]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)cr.fromBufferAttribute(t,e),cr.normalize(),t.setXYZ(e,cr.x,cr.y,cr.z)}toNonIndexed(){function t(a,c){const d=a.array,p=a.itemSize,u=a.normalized,o=new d.constructor(c.length*p);let l=0,h=0;for(let f=0,m=c.length;f<m;f++){a.isInterleavedBufferAttribute?l=c[f]*a.data.stride+a.offset:l=c[f]*p;for(let g=0;g<p;g++)o[h++]=d[l++]}return new tr(o,p,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ht,n=this.index.array,i=this.attributes;for(const a in i){const c=i[a],d=t(c,n);e.setAttribute(a,d)}const s=this.morphAttributes;for(const a in s){const c=[],d=s[a];for(let p=0,u=d.length;p<u;p++){const o=d[p],l=t(o,n);c.push(l)}e.morphAttributes[a]=c}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let a=0,c=r.length;a<c;a++){const d=r[a];e.addGroup(d.start,d.count,d.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const d in c)c[d]!==void 0&&(t[d]=c[d]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const c in n){const d=n[c];t.data.attributes[c]=d.toJSON(t.data)}const i={};let s=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],p=[];for(let u=0,o=d.length;u<o;u++){const l=d[u];p.push(l.toJSON(t.data))}p.length>0&&(i[c]=p,s=!0)}s&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(e));const i=t.attributes;for(const d in i){const p=i[d];this.setAttribute(d,p.clone(e))}const s=t.morphAttributes;for(const d in s){const p=[],u=s[d];for(let o=0,l=u.length;o<l;o++)p.push(u[o].clone(e));this.morphAttributes[d]=p}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let d=0,p=r.length;d<p;d++){const u=r[d];this.addGroup(u.start,u.count,u.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ht.prototype.isBufferGeometry=!0;const ec=new ft,Li=new xi,Sa=new Vn,wn=new Se,Sn=new Se,Mn=new Se,Ma=new Se,Ta=new Se,Ea=new Se,ro=new Se,no=new Se,io=new Se,so=new Ke,oo=new Ke,ao=new Ke,Aa=new Se,lo=new Se;class _r extends Ot{constructor(t=new Ht,e=new xn){super();this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Sa.copy(n.boundingSphere),Sa.applyMatrix4(s),t.ray.intersectsSphere(Sa)===!1)||(ec.copy(s).invert(),Li.copy(t.ray).applyMatrix4(ec),n.boundingBox!==null&&Li.intersectsBox(n.boundingBox)===!1))return;let r;if(n.isBufferGeometry){const a=n.index,c=n.attributes.position,d=n.morphAttributes.position,p=n.morphTargetsRelative,u=n.attributes.uv,o=n.attributes.uv2,l=n.groups,h=n.drawRange;if(a!==null)if(Array.isArray(i))for(let f=0,m=l.length;f<m;f++){const g=l[f],v=i[g.materialIndex],x=Math.max(g.start,h.start),w=Math.min(a.count,Math.min(g.start+g.count,h.start+h.count));for(let M=x,A=w;M<A;M+=3){const E=a.getX(M),I=a.getX(M+1),R=a.getX(M+2);r=uo(this,v,t,Li,c,d,p,u,o,E,I,R),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=g.materialIndex,e.push(r))}}else{const f=Math.max(0,h.start),m=Math.min(a.count,h.start+h.count);for(let g=f,v=m;g<v;g+=3){const x=a.getX(g),w=a.getX(g+1),M=a.getX(g+2);r=uo(this,i,t,Li,c,d,p,u,o,x,w,M),r&&(r.faceIndex=Math.floor(g/3),e.push(r))}}else if(c!==void 0)if(Array.isArray(i))for(let f=0,m=l.length;f<m;f++){const g=l[f],v=i[g.materialIndex],x=Math.max(g.start,h.start),w=Math.min(c.count,Math.min(g.start+g.count,h.start+h.count));for(let M=x,A=w;M<A;M+=3){const E=M,I=M+1,R=M+2;r=uo(this,v,t,Li,c,d,p,u,o,E,I,R),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=g.materialIndex,e.push(r))}}else{const f=Math.max(0,h.start),m=Math.min(c.count,h.start+h.count);for(let g=f,v=m;g<v;g+=3){const x=g,w=g+1,M=g+2;r=uo(this,i,t,Li,c,d,p,u,o,x,w,M),r&&(r.faceIndex=Math.floor(g/3),e.push(r))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}_r.prototype.isMesh=!0;function Tp(b,t,e,n,i,s,r,a){let c;if(t.side===or?c=n.intersectTriangle(r,s,i,!0,a):c=n.intersectTriangle(i,s,r,t.side!==Nn,a),c===null)return null;lo.copy(a),lo.applyMatrix4(b.matrixWorld);const d=e.ray.origin.distanceTo(lo);return d<e.near||d>e.far?null:{distance:d,point:lo.clone(),object:b}}function uo(b,t,e,n,i,s,r,a,c,d,p,u){wn.fromBufferAttribute(i,d),Sn.fromBufferAttribute(i,p),Mn.fromBufferAttribute(i,u);const o=b.morphTargetInfluences;if(s&&o){ro.set(0,0,0),no.set(0,0,0),io.set(0,0,0);for(let h=0,f=s.length;h<f;h++){const m=o[h],g=s[h];m!==0&&(Ma.fromBufferAttribute(g,d),Ta.fromBufferAttribute(g,p),Ea.fromBufferAttribute(g,u),r?(ro.addScaledVector(Ma,m),no.addScaledVector(Ta,m),io.addScaledVector(Ea,m)):(ro.addScaledVector(Ma.sub(wn),m),no.addScaledVector(Ta.sub(Sn),m),io.addScaledVector(Ea.sub(Mn),m)))}wn.add(ro),Sn.add(no),Mn.add(io)}b.isSkinnedMesh&&(b.boneTransform(d,wn),b.boneTransform(p,Sn),b.boneTransform(u,Mn));const l=Tp(b,t,e,n,wn,Sn,Mn,Aa);if(l){a&&(so.fromBufferAttribute(a,d),oo.fromBufferAttribute(a,p),ao.fromBufferAttribute(a,u),l.uv=ir.getUV(Aa,wn,Sn,Mn,so,oo,ao,new Ke)),c&&(so.fromBufferAttribute(c,d),oo.fromBufferAttribute(c,p),ao.fromBufferAttribute(c,u),l.uv2=ir.getUV(Aa,wn,Sn,Mn,so,oo,ao,new Ke));const h={a:d,b:p,c:u,normal:new Se,materialIndex:0};ir.getNormal(wn,Sn,Mn,h.normal),l.face=h}return l}class fs extends Ht{constructor(t=1,e=1,n=1,i=1,s=1,r=1){super();this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:s,depthSegments:r};const a=this;i=Math.floor(i),s=Math.floor(s),r=Math.floor(r);const c=[],d=[],p=[],u=[];let o=0,l=0;h("z","y","x",-1,-1,n,e,t,r,s,0),h("z","y","x",1,-1,n,e,-t,r,s,1),h("x","z","y",1,1,t,n,e,i,r,2),h("x","z","y",1,-1,t,n,-e,i,r,3),h("x","y","z",1,-1,t,e,n,i,s,4),h("x","y","z",-1,-1,t,e,-n,i,s,5),this.setIndex(c),this.setAttribute("position",new $t(d,3)),this.setAttribute("normal",new $t(p,3)),this.setAttribute("uv",new $t(u,2));function h(f,m,g,v,x,w,M,A,E,I,R){const P=w/E,D=M/I,O=w/2,j=M/2,N=A/2,q=E+1,X=I+1;let V=0,$=0;const K=new Se;for(let _e=0;_e<X;_e++){const me=_e*D-j;for(let ye=0;ye<q;ye++){const fe=ye*P-O;K[f]=fe*v,K[m]=me*x,K[g]=N,d.push(K.x,K.y,K.z),K[f]=0,K[m]=0,K[g]=A>0?1:-1,p.push(K.x,K.y,K.z),u.push(ye/E),u.push(1-_e/I),V+=1}}for(let _e=0;_e<I;_e++)for(let me=0;me<E;me++){const ye=o+me+q*_e,fe=o+me+q*(_e+1),de=o+(me+1)+q*(_e+1),Ee=o+(me+1)+q*_e;c.push(ye,fe,Ee),c.push(fe,de,Ee),$+=6}a.addGroup(l,$,R),l+=$,o+=V}}static fromJSON(t){return new fs(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ci(b){const t={};for(const e in b){t[e]={};for(const n in b[e]){const i=b[e][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[e][n]=i.clone():Array.isArray(i)?t[e][n]=i.slice():t[e][n]=i}}return t}function yr(b){const t={};for(let e=0;e<b.length;e++){const n=Ci(b[e]);for(const i in n)t[i]=n[i]}return t}const Ep={clone:Ci,merge:yr};var Ap=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Lp=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Hn extends ur{constructor(t){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Ap,this.fragmentShader=Lp,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ci(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}Hn.prototype.isShaderMaterial=!0;class La extends Ot{constructor(){super();this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}La.prototype.isCamera=!0;class xr extends La{constructor(t=50,e=1,n=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=as*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(os*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return as*2*Math.atan(Math.tan(os*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,s,r){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(os*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,s=-.5*i;const r=this.view;if(this.view!==null&&this.view.enabled){const c=r.fullWidth,d=r.fullHeight;s+=r.offsetX*i/c,e-=r.offsetY*n/d,i*=r.width/c,n*=r.height/d}const a=this.filmOffset;a!==0&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}xr.prototype.isPerspectiveCamera=!0;const Ri=90,Pi=1;class Ca extends Ot{constructor(t,e,n){super();if(this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new xr(Ri,Pi,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Se(1,0,0)),this.add(i);const s=new xr(Ri,Pi,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Se(-1,0,0)),this.add(s);const r=new xr(Ri,Pi,t,e);r.layers=this.layers,r.up.set(0,0,1),r.lookAt(new Se(0,1,0)),this.add(r);const a=new xr(Ri,Pi,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Se(0,-1,0)),this.add(a);const c=new xr(Ri,Pi,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Se(0,0,1)),this.add(c);const d=new xr(Ri,Pi,t,e);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new Se(0,0,-1)),this.add(d)}update(t,e){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,s,r,a,c,d]=this.children,p=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const o=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,r),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,c),n.texture.generateMipmaps=o,t.setRenderTarget(n,5),t.render(e,d),t.setRenderTarget(u),t.xr.enabled=p}}class co extends lr{constructor(t,e,n,i,s,r,a,c,d,p){t=t!==void 0?t:[],e=e!==void 0?e:es;super(t,e,n,i,s,r,a,c,d,p);this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}co.prototype.isCubeTexture=!0;class tc extends Wr{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n);super(t,t,e);e=e||{},this.texture=new co(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Tr,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=mr,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fs(5,5,5),s=new Hn({name:"CubemapFromEquirect",uniforms:Ci(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:or,blending:pn});s.uniforms.tEquirect.value=e;const r=new _r(i,s),a=e.minFilter;return e.minFilter===ci&&(e.minFilter=Tr),new Ca(1,10,this).update(t,r),e.minFilter=a,r.geometry.dispose(),r.material.dispose(),this}clear(t,e,n,i){const s=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(s)}}tc.prototype.isWebGLCubeRenderTarget=!0;const Ra=new Se,Cp=new Se,Rp=new fr;class on{constructor(t=new Se(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Ra.subVectors(n,e).cross(Cp.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Ra),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Rp.getNormalMatrix(t),i=this.coplanarPoint(Ra).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}on.prototype.isPlane=!0;const Ii=new Vn,ho=new Se;class fo{constructor(t=new on,e=new on,n=new on,i=new on,s=new on,r=new on){this.planes=[t,e,n,i,s,r]}set(t,e,n,i,s,r){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(s),a[5].copy(r),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],s=n[1],r=n[2],a=n[3],c=n[4],d=n[5],p=n[6],u=n[7],o=n[8],l=n[9],h=n[10],f=n[11],m=n[12],g=n[13],v=n[14],x=n[15];return e[0].setComponents(a-i,u-c,f-o,x-m).normalize(),e[1].setComponents(a+i,u+c,f+o,x+m).normalize(),e[2].setComponents(a+s,u+d,f+l,x+g).normalize(),e[3].setComponents(a-s,u-d,f-l,x-g).normalize(),e[4].setComponents(a-r,u-p,f-h,x-v).normalize(),e[5].setComponents(a+r,u+p,f+h,x+v).normalize(),this}intersectsObject(t){const e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),Ii.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ii)}intersectsSprite(t){return Ii.center.set(0,0,0),Ii.radius=.7071067811865476,Ii.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ii)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(ho.x=i.normal.x>0?t.max.x:t.min.x,ho.y=i.normal.y>0?t.max.y:t.min.y,ho.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(ho)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function rc(){let b=null,t=!1,e=null,n=null;function i(s,r){e(s,r),n=b.requestAnimationFrame(i)}return{start:function(){t!==!0&&e!==null&&(n=b.requestAnimationFrame(i),t=!0)},stop:function(){b.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){b=s}}}function Pp(b,t){const e=t.isWebGL2,n=new WeakMap;function i(d,p){const u=d.array,o=d.usage,l=b.createBuffer();b.bindBuffer(p,l),b.bufferData(p,u,o),d.onUploadCallback();let h=5126;return u instanceof Float32Array?h=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?d.isFloat16BufferAttribute?e?h=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):h=5123:u instanceof Int16Array?h=5122:u instanceof Uint32Array?h=5125:u instanceof Int32Array?h=5124:u instanceof Int8Array?h=5120:(u instanceof Uint8Array||u instanceof Uint8ClampedArray)&&(h=5121),{buffer:l,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:d.version}}function s(d,p,u){const o=p.array,l=p.updateRange;b.bindBuffer(u,d),l.count===-1?b.bufferSubData(u,0,o):(e?b.bufferSubData(u,l.offset*o.BYTES_PER_ELEMENT,o,l.offset,l.count):b.bufferSubData(u,l.offset*o.BYTES_PER_ELEMENT,o.subarray(l.offset,l.offset+l.count)),l.count=-1)}function r(d){return d.isInterleavedBufferAttribute&&(d=d.data),n.get(d)}function a(d){d.isInterleavedBufferAttribute&&(d=d.data);const p=n.get(d);p&&(b.deleteBuffer(p.buffer),n.delete(d))}function c(d,p){if(d.isGLBufferAttribute){const o=n.get(d);(!o||o.version<d.version)&&n.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const u=n.get(d);u===void 0?n.set(d,i(d,p)):u.version<d.version&&(s(u.buffer,d,p),u.version=d.version)}return{get:r,remove:a,update:c}}class Pa extends Ht{constructor(t=1,e=1,n=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const s=t/2,r=e/2,a=Math.floor(n),c=Math.floor(i),d=a+1,p=c+1,u=t/a,o=e/c,l=[],h=[],f=[],m=[];for(let g=0;g<p;g++){const v=g*o-r;for(let x=0;x<d;x++){const w=x*u-s;h.push(w,-v,0),f.push(0,0,1),m.push(x/a),m.push(1-g/c)}}for(let g=0;g<c;g++)for(let v=0;v<a;v++){const x=v+d*g,w=v+d*(g+1),M=v+1+d*(g+1),A=v+1+d*g;l.push(x,w,A),l.push(w,M,A)}this.setIndex(l),this.setAttribute("position",new $t(h,3)),this.setAttribute("normal",new $t(f,3)),this.setAttribute("uv",new $t(m,2))}static fromJSON(t){return new Pa(t.width,t.height,t.widthSegments,t.heightSegments)}}var Ip=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Dp=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Op=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,jp=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,kp=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Np=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Fp="vec3 transformed = vec3( position );",Up=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Bp=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Gp=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,zp=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Vp=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Hp=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Wp=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,qp=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Xp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Yp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Zp=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Jp=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Kp=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Qp=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$p=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,em=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,tm=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rm=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,nm="gl_FragColor = linearToOutputTexel( gl_FragColor );",im=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,sm=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,om=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,am=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lm=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,um=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,cm=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,hm=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dm=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fm=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,pm=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,mm=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,gm=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ym=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,vm=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bm=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,_m=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xm=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,wm=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Sm=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Mm=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Tm=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Em=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Am=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Lm=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Cm=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Rm=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pm=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Im=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Dm=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,Om=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,jm=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,km=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Nm=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Fm=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Um=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Bm=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Gm=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,zm=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Vm=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Hm=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Wm=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qm=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Xm=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Ym=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Zm=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Jm=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Km=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Qm=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,$m=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eg=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tg=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,rg=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ng=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ig=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sg=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,og=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ag=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,lg=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ug=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cg=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,hg=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dg=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,fg=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pg=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mg=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gg=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,yg=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,vg=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,bg=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,_g=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,xg=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,wg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Sg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Mg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Tg=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Eg=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Lg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Cg=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Rg=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Pg=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Ig=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Dg=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Og=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jg=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,kg=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ng=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fg=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Ug=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bg=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gg=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zg=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Vg=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hg=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Wg=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,qg=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xg=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yg=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Zg=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jg=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kg=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qg=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$g=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ey=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ty=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ry=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ny=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Et={alphamap_fragment:Ip,alphamap_pars_fragment:Dp,alphatest_fragment:Op,alphatest_pars_fragment:jp,aomap_fragment:kp,aomap_pars_fragment:Np,begin_vertex:Fp,beginnormal_vertex:Up,bsdfs:Bp,bumpmap_pars_fragment:Gp,clipping_planes_fragment:zp,clipping_planes_pars_fragment:Vp,clipping_planes_pars_vertex:Hp,clipping_planes_vertex:Wp,color_fragment:qp,color_pars_fragment:Xp,color_pars_vertex:Yp,color_vertex:Zp,common:Jp,cube_uv_reflection_fragment:Kp,defaultnormal_vertex:Qp,displacementmap_pars_vertex:$p,displacementmap_vertex:em,emissivemap_fragment:tm,emissivemap_pars_fragment:rm,encodings_fragment:nm,encodings_pars_fragment:im,envmap_fragment:sm,envmap_common_pars_fragment:om,envmap_pars_fragment:am,envmap_pars_vertex:lm,envmap_physical_pars_fragment:bm,envmap_vertex:um,fog_vertex:cm,fog_pars_vertex:hm,fog_fragment:dm,fog_pars_fragment:fm,gradientmap_pars_fragment:pm,lightmap_fragment:mm,lightmap_pars_fragment:gm,lights_lambert_vertex:ym,lights_pars_begin:vm,lights_toon_fragment:_m,lights_toon_pars_fragment:xm,lights_phong_fragment:wm,lights_phong_pars_fragment:Sm,lights_physical_fragment:Mm,lights_physical_pars_fragment:Tm,lights_fragment_begin:Em,lights_fragment_maps:Am,lights_fragment_end:Lm,logdepthbuf_fragment:Cm,logdepthbuf_pars_fragment:Rm,logdepthbuf_pars_vertex:Pm,logdepthbuf_vertex:Im,map_fragment:Dm,map_pars_fragment:Om,map_particle_fragment:jm,map_particle_pars_fragment:km,metalnessmap_fragment:Nm,metalnessmap_pars_fragment:Fm,morphnormal_vertex:Um,morphtarget_pars_vertex:Bm,morphtarget_vertex:Gm,normal_fragment_begin:zm,normal_fragment_maps:Vm,normal_pars_fragment:Hm,normal_pars_vertex:Wm,normal_vertex:qm,normalmap_pars_fragment:Xm,clearcoat_normal_fragment_begin:Ym,clearcoat_normal_fragment_maps:Zm,clearcoat_pars_fragment:Jm,output_fragment:Km,packing:Qm,premultiplied_alpha_fragment:$m,project_vertex:eg,dithering_fragment:tg,dithering_pars_fragment:rg,roughnessmap_fragment:ng,roughnessmap_pars_fragment:ig,shadowmap_pars_fragment:sg,shadowmap_pars_vertex:og,shadowmap_vertex:ag,shadowmask_pars_fragment:lg,skinbase_vertex:ug,skinning_pars_vertex:cg,skinning_vertex:hg,skinnormal_vertex:dg,specularmap_fragment:fg,specularmap_pars_fragment:pg,tonemapping_fragment:mg,tonemapping_pars_fragment:gg,transmission_fragment:yg,transmission_pars_fragment:vg,uv_pars_fragment:bg,uv_pars_vertex:_g,uv_vertex:xg,uv2_pars_fragment:wg,uv2_pars_vertex:Sg,uv2_vertex:Mg,worldpos_vertex:Tg,background_vert:Eg,background_frag:Ag,cube_vert:Lg,cube_frag:Cg,depth_vert:Rg,depth_frag:Pg,distanceRGBA_vert:Ig,distanceRGBA_frag:Dg,equirect_vert:Og,equirect_frag:jg,linedashed_vert:kg,linedashed_frag:Ng,meshbasic_vert:Fg,meshbasic_frag:Ug,meshlambert_vert:Bg,meshlambert_frag:Gg,meshmatcap_vert:zg,meshmatcap_frag:Vg,meshnormal_vert:Hg,meshnormal_frag:Wg,meshphong_vert:qg,meshphong_frag:Xg,meshphysical_vert:Yg,meshphysical_frag:Zg,meshtoon_vert:Jg,meshtoon_frag:Kg,points_vert:Qg,points_frag:$g,shadow_vert:ey,shadow_frag:ty,sprite_vert:ry,sprite_frag:ny},nt={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new fr},uv2Transform:{value:new fr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new fr}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new fr}}},qr={basic:{uniforms:yr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:yr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.fog,nt.lights,{emissive:{value:new at(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:yr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:yr([nt.common,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.roughnessmap,nt.metalnessmap,nt.fog,nt.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:yr([nt.common,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.gradientmap,nt.fog,nt.lights,{emissive:{value:new at(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:yr([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:yr([nt.points,nt.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:yr([nt.common,nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:yr([nt.common,nt.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:yr([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:yr([nt.sprite,nt.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new fr},t2D:{value:null}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},cube:{uniforms:yr([nt.envmap,{opacity:{value:1}}]),vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:yr([nt.common,nt.displacementmap,{referencePosition:{value:new Se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:yr([nt.lights,nt.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};qr.physical={uniforms:yr([qr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};function iy(b,t,e,n,i){const s=new at(0);let r=0,a,c,d=null,p=0,u=null;function o(h,f){let m=!1,g=f.isScene===!0?f.background:null;g&&g.isTexture&&(g=t.get(g));const v=b.xr,x=v.getSession&&v.getSession();x&&x.environmentBlendMode==="additive"&&(g=null),g===null?l(s,r):g&&g.isColor&&(l(g,1),m=!0),(b.autoClear||m)&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil),g&&(g.isCubeTexture||g.mapping===Bs)?(c===void 0&&(c=new _r(new fs(1,1,1),new Hn({name:"BackgroundCubeMaterial",uniforms:Ci(qr.cube.uniforms),vertexShader:qr.cube.vertexShader,fragmentShader:qr.cube.fragmentShader,side:or,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,M,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=g,c.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,(d!==g||p!==g.version||u!==b.toneMapping)&&(c.material.needsUpdate=!0,d=g,p=g.version,u=b.toneMapping),h.unshift(c,c.geometry,c.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new _r(new Pa(2,2),new Hn({name:"BackgroundMaterial",uniforms:Ci(qr.background.uniforms),vertexShader:qr.background.vertexShader,fragmentShader:qr.background.fragmentShader,side:ai,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(d!==g||p!==g.version||u!==b.toneMapping)&&(a.material.needsUpdate=!0,d=g,p=g.version,u=b.toneMapping),h.unshift(a,a.geometry,a.material,0,0,null))}function l(h,f){e.buffers.color.setClear(h.r,h.g,h.b,f,i)}return{getClearColor:function(){return s},setClearColor:function(h,f=1){s.set(h),r=f,l(s,r)},getClearAlpha:function(){return r},setClearAlpha:function(h){r=h,l(s,r)},render:o}}function sy(b,t,e,n){const i=b.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),r=n.isWebGL2||s!==null,a={},c=f(null);let d=c;function p(j,N,q,X,V){let $=!1;if(r){const K=h(X,q,N);d!==K&&(d=K,o(d.object)),$=m(X,V),$&&g(X,V)}else{const K=N.wireframe===!0;(d.geometry!==X.id||d.program!==q.id||d.wireframe!==K)&&(d.geometry=X.id,d.program=q.id,d.wireframe=K,$=!0)}j.isInstancedMesh===!0&&($=!0),V!==null&&e.update(V,34963),$&&(E(j,N,q,X),V!==null&&b.bindBuffer(34963,e.get(V).buffer))}function u(){return n.isWebGL2?b.createVertexArray():s.createVertexArrayOES()}function o(j){return n.isWebGL2?b.bindVertexArray(j):s.bindVertexArrayOES(j)}function l(j){return n.isWebGL2?b.deleteVertexArray(j):s.deleteVertexArrayOES(j)}function h(j,N,q){const X=q.wireframe===!0;let V=a[j.id];V===void 0&&(V={},a[j.id]=V);let $=V[N.id];$===void 0&&($={},V[N.id]=$);let K=$[X];return K===void 0&&(K=f(u()),$[X]=K),K}function f(j){const N=[],q=[],X=[];for(let V=0;V<i;V++)N[V]=0,q[V]=0,X[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:q,attributeDivisors:X,object:j,attributes:{},index:null}}function m(j,N){const q=d.attributes,X=j.attributes;let V=0;for(const $ in X){const K=q[$],_e=X[$];if(K===void 0||K.attribute!==_e||K.data!==_e.data)return!0;V++}return d.attributesNum!==V||d.index!==N}function g(j,N){const q={},X=j.attributes;let V=0;for(const $ in X){const K=X[$],_e={};_e.attribute=K,K.data&&(_e.data=K.data),q[$]=_e,V++}d.attributes=q,d.attributesNum=V,d.index=N}function v(){const j=d.newAttributes;for(let N=0,q=j.length;N<q;N++)j[N]=0}function x(j){w(j,0)}function w(j,N){const q=d.newAttributes,X=d.enabledAttributes,V=d.attributeDivisors;q[j]=1,X[j]===0&&(b.enableVertexAttribArray(j),X[j]=1),V[j]!==N&&((n.isWebGL2?b:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](j,N),V[j]=N)}function M(){const j=d.newAttributes,N=d.enabledAttributes;for(let q=0,X=N.length;q<X;q++)N[q]!==j[q]&&(b.disableVertexAttribArray(q),N[q]=0)}function A(j,N,q,X,V,$){n.isWebGL2===!0&&(q===5124||q===5125)?b.vertexAttribIPointer(j,N,q,V,$):b.vertexAttribPointer(j,N,q,X,V,$)}function E(j,N,q,X){if(n.isWebGL2===!1&&(j.isInstancedMesh||X.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;v();const V=X.attributes,$=q.getAttributes(),K=N.defaultAttributeValues;for(const _e in $){const me=$[_e];if(me.location>=0){let ye=V[_e];if(ye===void 0&&(_e==="instanceMatrix"&&j.instanceMatrix&&(ye=j.instanceMatrix),_e==="instanceColor"&&j.instanceColor&&(ye=j.instanceColor)),ye!==void 0){const fe=ye.normalized,de=ye.itemSize,Ee=e.get(ye);if(Ee===void 0)continue;const C=Ee.buffer,F=Ee.type,H=Ee.bytesPerElement;if(ye.isInterleavedBufferAttribute){const ne=ye.data,re=ne.stride,oe=ye.offset;if(ne&&ne.isInstancedInterleavedBuffer){for(let te=0;te<me.locationSize;te++)w(me.location+te,ne.meshPerAttribute);j.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let te=0;te<me.locationSize;te++)x(me.location+te);b.bindBuffer(34962,C);for(let te=0;te<me.locationSize;te++)A(me.location+te,de/me.locationSize,F,fe,re*H,(oe+de/me.locationSize*te)*H)}else{if(ye.isInstancedBufferAttribute){for(let ne=0;ne<me.locationSize;ne++)w(me.location+ne,ye.meshPerAttribute);j.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let ne=0;ne<me.locationSize;ne++)x(me.location+ne);b.bindBuffer(34962,C);for(let ne=0;ne<me.locationSize;ne++)A(me.location+ne,de/me.locationSize,F,fe,de*H,de/me.locationSize*ne*H)}}else if(K!==void 0){const fe=K[_e];if(fe!==void 0)switch(fe.length){case 2:b.vertexAttrib2fv(me.location,fe);break;case 3:b.vertexAttrib3fv(me.location,fe);break;case 4:b.vertexAttrib4fv(me.location,fe);break;default:b.vertexAttrib1fv(me.location,fe)}}}}M()}function I(){D();for(const j in a){const N=a[j];for(const q in N){const X=N[q];for(const V in X)l(X[V].object),delete X[V];delete N[q]}delete a[j]}}function R(j){if(a[j.id]===void 0)return;const N=a[j.id];for(const q in N){const X=N[q];for(const V in X)l(X[V].object),delete X[V];delete N[q]}delete a[j.id]}function P(j){for(const N in a){const q=a[N];if(q[j.id]===void 0)continue;const X=q[j.id];for(const V in X)l(X[V].object),delete X[V];delete q[j.id]}}function D(){O(),d!==c&&(d=c,o(d.object))}function O(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:p,reset:D,resetDefaultState:O,dispose:I,releaseStatesOfGeometry:R,releaseStatesOfProgram:P,initAttributes:v,enableAttribute:x,disableUnusedAttributes:M}}function oy(b,t,e,n){const i=n.isWebGL2;let s;function r(d){s=d}function a(d,p){b.drawArrays(s,d,p),e.update(p,s,1)}function c(d,p,u){if(u===0)return;let o,l;if(i)o=b,l="drawArraysInstanced";else if(o=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",o===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}o[l](s,d,p,u),e.update(p,s,u)}this.setMode=r,this.render=a,this.renderInstances=c}function ay(b,t,e){let n;function i(){if(n!==void 0)return n;if(t.has("EXT_texture_filter_anisotropic")===!0){const E=t.get("EXT_texture_filter_anisotropic");n=b.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(E){if(E==="highp"){if(b.getShaderPrecisionFormat(35633,36338).precision>0&&b.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&b.getShaderPrecisionFormat(35633,36337).precision>0&&b.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const r=typeof WebGL2RenderingContext!="undefined"&&b instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&b instanceof WebGL2ComputeRenderingContext;let a=e.precision!==void 0?e.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const d=r||t.has("WEBGL_draw_buffers"),p=e.logarithmicDepthBuffer===!0,u=b.getParameter(34930),o=b.getParameter(35660),l=b.getParameter(3379),h=b.getParameter(34076),f=b.getParameter(34921),m=b.getParameter(36347),g=b.getParameter(36348),v=b.getParameter(36349),x=o>0,w=r||t.has("OES_texture_float"),M=x&&w,A=r?b.getParameter(36183):0;return{isWebGL2:r,drawBuffers:d,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:p,maxTextures:u,maxVertexTextures:o,maxTextureSize:l,maxCubemapSize:h,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:w,floatVertexTextures:M,maxSamples:A}}function ly(b){const t=this;let e=null,n=0,i=!1,s=!1;const r=new on,a=new fr,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(u,o,l){const h=u.length!==0||o||n!==0||i;return i=o,e=p(u,l,0),n=u.length,h},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1,d()},this.setState=function(u,o,l){const h=u.clippingPlanes,f=u.clipIntersection,m=u.clipShadows,g=b.get(u);if(!i||h===null||h.length===0||s&&!m)s?p(null):d();else{const v=s?0:n,x=v*4;let w=g.clippingState||null;c.value=w,w=p(h,o,x,l);for(let M=0;M!==x;++M)w[M]=e[M];g.clippingState=w,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}};function d(){c.value!==e&&(c.value=e,c.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function p(u,o,l,h){const f=u!==null?u.length:0;let m=null;if(f!==0){if(m=c.value,h!==!0||m===null){const g=l+f*4,v=o.matrixWorldInverse;a.getNormalMatrix(v),(m===null||m.length<g)&&(m=new Float32Array(g));for(let x=0,w=l;x!==f;++x,w+=4)r.copy(u[x]).applyMatrix4(v,a),r.normal.toArray(m,w),m[w+3]=r.constant}c.value=m,c.needsUpdate=!0}return t.numPlanes=f,t.numIntersection=0,m}}function uy(b){let t=new WeakMap;function e(r,a){return a===Yo?r.mapping=es:a===Zo&&(r.mapping=ts),r}function n(r){if(r&&r.isTexture&&r.isRenderTargetTexture===!1){const a=r.mapping;if(a===Yo||a===Zo)if(t.has(r)){const c=t.get(r).texture;return e(c,r.mapping)}else{const c=r.image;if(c&&c.height>0){const d=b.getRenderTarget(),p=new tc(c.height/2);return p.fromEquirectangularTexture(b,r),t.set(r,p),b.setRenderTarget(d),r.addEventListener("dispose",i),e(p.texture,r.mapping)}else return null}}return r}function i(r){const a=r.target;a.removeEventListener("dispose",i);const c=t.get(a);c!==void 0&&(t.delete(a),c.dispose())}function s(){t=new WeakMap}return{get:n,dispose:s}}class po extends La{constructor(t=-1,e=1,n=1,i=-1,s=.1,r=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=s,this.far=r,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-t,r=n+t,a=i+e,c=i-e;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,r=s+d*this.view.width,a-=p*this.view.offsetY,c=a-p*this.view.height}this.projectionMatrix.makeOrthographic(s,r,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}po.prototype.isOrthographicCamera=!0;class mo extends Hn{constructor(t){super(t);this.type="RawShaderMaterial"}}mo.prototype.isRawShaderMaterial=!0;const Di=4,Tn=8,Xr=Math.pow(2,Tn),nc=[.125,.215,.35,.446,.526,.582],ic=Tn-Di+1+nc.length,Oi=20,En={[gr]:0,[Hr]:1,[ra]:2,[Iu]:3,[Du]:4,[Ou]:5,[ta]:6},Ia=new po,{_lodPlanes:ps,_sizeLods:sc,_sigmas:go}=dy(),oc=new at;let Da=null;const Wn=(1+Math.sqrt(5))/2,ji=1/Wn,ac=[new Se(1,1,1),new Se(-1,1,1),new Se(1,1,-1),new Se(-1,1,-1),new Se(0,Wn,ji),new Se(0,Wn,-ji),new Se(ji,0,Wn),new Se(-ji,0,Wn),new Se(Wn,ji,0),new Se(-Wn,ji,0)];class cy{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=fy(Oi),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){Da=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(t,n,i,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=cc(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=uc(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let t=0;t<ps.length;t++)ps[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Da),t.scissorTest=!1,yo(t,0,0,t.width,t.height)}_fromTexture(t){Da=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:ar,minFilter:ar,generateMipmaps:!1,type:mn,format:nf,encoding:hy(t)?t.encoding:ra,depthBuffer:!1},n=lc(e);return n.depthBuffer=!t,this._pingPongRenderTarget=lc(e),n}_compileMaterial(t){const e=new _r(ps[0],t);this._renderer.compile(e,Ia)}_sceneToCubeUV(t,e,n,i){const s=90,r=1,a=new xr(s,r,e,n),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,u=p.autoClear,o=p.outputEncoding,l=p.toneMapping;p.getClearColor(oc),p.toneMapping=Fn,p.outputEncoding=gr,p.autoClear=!1;const h=new xn({name:"PMREM.Background",side:or,depthWrite:!1,depthTest:!1}),f=new _r(new fs,h);let m=!1;const g=t.background;g?g.isColor&&(h.color.copy(g),t.background=null,m=!0):(h.color.copy(oc),m=!0);for(let v=0;v<6;v++){const x=v%3;x==0?(a.up.set(0,c[v],0),a.lookAt(d[v],0,0)):x==1?(a.up.set(0,0,c[v]),a.lookAt(0,d[v],0)):(a.up.set(0,c[v],0),a.lookAt(0,0,d[v])),yo(i,x*Xr,v>2?Xr:0,Xr,Xr),p.setRenderTarget(i),m&&p.render(f,a),p.render(t,a)}f.geometry.dispose(),f.material.dispose(),p.toneMapping=l,p.outputEncoding=o,p.autoClear=u,t.background=g}_setEncoding(t,e){this._renderer.capabilities.isWebGL2===!0&&e.format===mr&&e.type===mn&&e.encoding===Hr?t.value=En[gr]:t.value=En[e.encoding]}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===es||t.mapping===ts;i?this._cubemapShader==null&&(this._cubemapShader=cc()):this._equirectShader==null&&(this._equirectShader=uc());const s=i?this._cubemapShader:this._equirectShader,r=new _r(ps[0],s),a=s.uniforms;a.envMap.value=t,i||a.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(a.inputEncoding,t),this._setEncoding(a.outputEncoding,e.texture),yo(e,0,0,3*Xr,2*Xr),n.setRenderTarget(e),n.render(r,Ia)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<ic;i++){const s=Math.sqrt(go[i]*go[i]-go[i-1]*go[i-1]),r=ac[(i-1)%ac.length];this._blur(t,i-1,i,s,r)}e.autoClear=n}_blur(t,e,n,i,s){const r=this._pingPongRenderTarget;this._halfBlur(t,r,e,n,i,"latitudinal",s),this._halfBlur(r,t,n,n,i,"longitudinal",s)}_halfBlur(t,e,n,i,s,r,a){const c=this._renderer,d=this._blurMaterial;r!=="latitudinal"&&r!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,u=new _r(ps[i],d),o=d.uniforms,l=sc[n]-1,h=isFinite(s)?Math.PI/(2*l):2*Math.PI/(2*Oi-1),f=s/h,m=isFinite(s)?1+Math.floor(p*f):Oi;m>Oi&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Oi}`);const g=[];let v=0;for(let A=0;A<Oi;++A){const E=A/f,I=Math.exp(-E*E/2);g.push(I),A==0?v+=I:A<m&&(v+=2*I)}for(let A=0;A<g.length;A++)g[A]=g[A]/v;o.envMap.value=t.texture,o.samples.value=m,o.weights.value=g,o.latitudinal.value=r==="latitudinal",a&&(o.poleAxis.value=a),o.dTheta.value=h,o.mipInt.value=Tn-n,this._setEncoding(o.inputEncoding,t.texture),this._setEncoding(o.outputEncoding,t.texture);const x=sc[i],w=3*Math.max(0,Xr-2*x),M=(i===0?0:2*Xr)+2*x*(i>Tn-Di?i-Tn+Di:0);yo(e,w,M,3*x,2*x),c.setRenderTarget(e),c.render(u,Ia)}}function hy(b){return b===void 0||b.type!==mn?!1:b.encoding===gr||b.encoding===Hr||b.encoding===ta}function dy(){const b=[],t=[],e=[];let n=Tn;for(let i=0;i<ic;i++){const s=Math.pow(2,n);t.push(s);let r=1/s;i>Tn-Di?r=nc[i-Tn+Di-1]:i==0&&(r=0),e.push(r);const a=1/(s-1),c=-a/2,d=1+a/2,p=[c,c,d,c,d,d,c,c,d,d,c,d],u=6,o=6,l=3,h=2,f=1,m=new Float32Array(l*o*u),g=new Float32Array(h*o*u),v=new Float32Array(f*o*u);for(let w=0;w<u;w++){const M=w%3*2/3-1,A=w>2?0:-1,E=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];m.set(E,l*o*w),g.set(p,h*o*w);const I=[w,w,w,w,w,w];v.set(I,f*o*w)}const x=new Ht;x.setAttribute("position",new tr(m,l)),x.setAttribute("uv",new tr(g,h)),x.setAttribute("faceIndex",new tr(v,f)),b.push(x),n>Di&&n--}return{_lodPlanes:b,_sizeLods:t,_sigmas:e}}function lc(b){const t=new Wr(3*Xr,3*Xr,b);return t.texture.mapping=Bs,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function yo(b,t,e,n,i){b.viewport.set(t,e,n,i),b.scissor.set(t,e,n,i)}function fy(b){const t=new Float32Array(b),e=new Se(0,1,0);return new mo({name:"SphericalGaussianBlur",defines:{n:b},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e},inputEncoding:{value:En[gr]},outputEncoding:{value:En[gr]}},vertexShader:Oa(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${ja()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:pn,depthTest:!1,depthWrite:!1})}function uc(){const b=new Ke(1,1);return new mo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:b},inputEncoding:{value:En[gr]},outputEncoding:{value:En[gr]}},vertexShader:Oa(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${ja()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:pn,depthTest:!1,depthWrite:!1})}function cc(){return new mo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:En[gr]},outputEncoding:{value:En[gr]}},vertexShader:Oa(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${ja()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:pn,depthTest:!1,depthWrite:!1})}function Oa(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ja(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function py(b){let t=new WeakMap,e=null;function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const c=a.mapping,d=c===Yo||c===Zo,p=c===es||c===ts;if(d||p){if(t.has(a))return t.get(a).texture;{const u=a.image;if(d&&u&&u.height>0||p&&u&&i(u)){const o=b.getRenderTarget();e===null&&(e=new cy(b));const l=d?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,l),b.setRenderTarget(o),a.addEventListener("dispose",s),l.texture}else return null}}}return a}function i(a){let c=0;const d=6;for(let p=0;p<d;p++)a[p]!==void 0&&c++;return c===d}function s(a){const c=a.target;c.removeEventListener("dispose",s);const d=t.get(c);d!==void 0&&(t.delete(c),d.dispose())}function r(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:r}}function my(b){const t={};function e(n){if(t[n]!==void 0)return t[n];let i;switch(n){case"WEBGL_depth_texture":i=b.getExtension("WEBGL_depth_texture")||b.getExtension("MOZ_WEBGL_depth_texture")||b.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=b.getExtension("WEBGL_compressed_texture_s3tc")||b.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=b.getExtension("WEBGL_compressed_texture_pvrtc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=b.getExtension(n)}return t[n]=i,i}return{has:function(n){return e(n)!==null},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float")},get:function(n){const i=e(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function gy(b,t,e,n){const i={},s=new WeakMap;function r(u){const o=u.target;o.index!==null&&t.remove(o.index);for(const h in o.attributes)t.remove(o.attributes[h]);o.removeEventListener("dispose",r),delete i[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),n.releaseStatesOfGeometry(o),o.isInstancedBufferGeometry===!0&&delete o._maxInstanceCount,e.memory.geometries--}function a(u,o){return i[o.id]===!0||(o.addEventListener("dispose",r),i[o.id]=!0,e.memory.geometries++),o}function c(u){const o=u.attributes;for(const h in o)t.update(o[h],34962);const l=u.morphAttributes;for(const h in l){const f=l[h];for(let m=0,g=f.length;m<g;m++)t.update(f[m],34962)}}function d(u){const o=[],l=u.index,h=u.attributes.position;let f=0;if(l!==null){const v=l.array;f=l.version;for(let x=0,w=v.length;x<w;x+=3){const M=v[x+0],A=v[x+1],E=v[x+2];o.push(M,A,A,E,E,M)}}else{const v=h.array;f=h.version;for(let x=0,w=v.length/3-1;x<w;x+=3){const M=x+0,A=x+1,E=x+2;o.push(M,A,A,E,E,M)}}const m=new(Fu(o)>65535?$u:Qu)(o,1);m.version=f;const g=s.get(u);g&&t.remove(g),s.set(u,m)}function p(u){const o=s.get(u);if(o){const l=u.index;l!==null&&o.version<l.version&&d(u)}else d(u);return s.get(u)}return{get:a,update:c,getWireframeAttribute:p}}function yy(b,t,e,n){const i=n.isWebGL2;let s;function r(o){s=o}let a,c;function d(o){a=o.type,c=o.bytesPerElement}function p(o,l){b.drawElements(s,l,a,o*c),e.update(l,s,1)}function u(o,l,h){if(h===0)return;let f,m;if(i)f=b,m="drawElementsInstanced";else if(f=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",f===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](s,l,a,o*c,h),e.update(l,s,h)}this.setMode=r,this.setIndex=d,this.render=p,this.renderInstances=u}function vy(b){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,r,a){switch(e.calls++,r){case 4:e.triangles+=a*(s/3);break;case 1:e.lines+=a*(s/2);break;case 3:e.lines+=a*(s-1);break;case 2:e.lines+=a*s;break;case 0:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:i,update:n}}class ka extends lr{constructor(t=null,e=1,n=1,i=1){super(null);this.image={data:t,width:e,height:n,depth:i},this.magFilter=ar,this.minFilter=ar,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ka.prototype.isDataTexture2DArray=!0;function by(b,t){return b[0]-t[0]}function _y(b,t){return Math.abs(t[1])-Math.abs(b[1])}function hc(b,t){let e=1;const n=t.isInterleavedBufferAttribute?t.data.array:t.array;n instanceof Int8Array?e=127:n instanceof Int16Array?e=32767:n instanceof Int32Array?e=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),b.divideScalar(e)}function xy(b,t,e){const n={},i=new Float32Array(8),s=new WeakMap,r=new Se,a=[];for(let d=0;d<8;d++)a[d]=[d,0];function c(d,p,u,o){const l=d.morphTargetInfluences;if(t.isWebGL2===!0){const h=p.morphAttributes.position.length;let f=s.get(p);if(f===void 0||f.count!==h){f!==void 0&&f.texture.dispose();const v=p.morphAttributes.normal!==void 0,x=p.morphAttributes.position,w=p.morphAttributes.normal||[],M=p.attributes.position.count,A=v===!0?2:1;let E=M*A,I=1;E>t.maxTextureSize&&(I=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const R=new Float32Array(E*I*4*h),P=new ka(R,E,I,h);P.format=mr,P.type=$r;const D=A*4;for(let O=0;O<h;O++){const j=x[O],N=w[O],q=E*I*4*O;for(let X=0;X<j.count;X++){r.fromBufferAttribute(j,X),j.normalized===!0&&hc(r,j);const V=X*D;R[q+V+0]=r.x,R[q+V+1]=r.y,R[q+V+2]=r.z,R[q+V+3]=0,v===!0&&(r.fromBufferAttribute(N,X),N.normalized===!0&&hc(r,N),R[q+V+4]=r.x,R[q+V+5]=r.y,R[q+V+6]=r.z,R[q+V+7]=0)}}f={count:h,texture:P,size:new Ke(E,I)},s.set(p,f)}let m=0;for(let v=0;v<l.length;v++)m+=l[v];const g=p.morphTargetsRelative?1:1-m;o.getUniforms().setValue(b,"morphTargetBaseInfluence",g),o.getUniforms().setValue(b,"morphTargetInfluences",l),o.getUniforms().setValue(b,"morphTargetsTexture",f.texture,e),o.getUniforms().setValue(b,"morphTargetsTextureSize",f.size)}else{const h=l===void 0?0:l.length;let f=n[p.id];if(f===void 0||f.length!==h){f=[];for(let w=0;w<h;w++)f[w]=[w,0];n[p.id]=f}for(let w=0;w<h;w++){const M=f[w];M[0]=w,M[1]=l[w]}f.sort(_y);for(let w=0;w<8;w++)w<h&&f[w][1]?(a[w][0]=f[w][0],a[w][1]=f[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(by);const m=p.morphAttributes.position,g=p.morphAttributes.normal;let v=0;for(let w=0;w<8;w++){const M=a[w],A=M[0],E=M[1];A!==Number.MAX_SAFE_INTEGER&&E?(m&&p.getAttribute("morphTarget"+w)!==m[A]&&p.setAttribute("morphTarget"+w,m[A]),g&&p.getAttribute("morphNormal"+w)!==g[A]&&p.setAttribute("morphNormal"+w,g[A]),i[w]=E,v+=E):(m&&p.hasAttribute("morphTarget"+w)===!0&&p.deleteAttribute("morphTarget"+w),g&&p.hasAttribute("morphNormal"+w)===!0&&p.deleteAttribute("morphNormal"+w),i[w]=0)}const x=p.morphTargetsRelative?1:1-v;o.getUniforms().setValue(b,"morphTargetBaseInfluence",x),o.getUniforms().setValue(b,"morphTargetInfluences",i)}}return{update:c}}function wy(b,t,e,n){let i=new WeakMap;function s(c){const d=n.render.frame,p=c.geometry,u=t.get(c,p);return i.get(u)!==d&&(t.update(u),i.set(u,d)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),e.update(c.instanceMatrix,34962),c.instanceColor!==null&&e.update(c.instanceColor,34962)),u}function r(){i=new WeakMap}function a(c){const d=c.target;d.removeEventListener("dispose",a),e.remove(d.instanceMatrix),d.instanceColor!==null&&e.remove(d.instanceColor)}return{update:s,dispose:r}}class dc extends lr{constructor(t=null,e=1,n=1,i=1){super(null);this.image={data:t,width:e,height:n,depth:i},this.magFilter=ar,this.minFilter=ar,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}dc.prototype.isDataTexture3D=!0;const fc=new lr,Sy=new ka,My=new dc,pc=new co,mc=[],gc=[],yc=new Float32Array(16),vc=new Float32Array(9),bc=new Float32Array(4);function ki(b,t,e){const n=b[0];if(n<=0||n>0)return b;const i=t*e;let s=mc[i];if(s===void 0&&(s=new Float32Array(i),mc[i]=s),t!==0){n.toArray(s,0);for(let r=1,a=0;r!==t;++r)a+=e,b[r].toArray(s,a)}return s}function wr(b,t){if(b.length!==t.length)return!1;for(let e=0,n=b.length;e<n;e++)if(b[e]!==t[e])return!1;return!0}function vr(b,t){for(let e=0,n=t.length;e<n;e++)b[e]=t[e]}function _c(b,t){let e=gc[t];e===void 0&&(e=new Int32Array(t),gc[t]=e);for(let n=0;n!==t;++n)e[n]=b.allocateTextureUnit();return e}function Ty(b,t){const e=this.cache;e[0]!==t&&(b.uniform1f(this.addr,t),e[0]=t)}function Ey(b,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(b.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(wr(e,t))return;b.uniform2fv(this.addr,t),vr(e,t)}}function Ay(b,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(b.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(b.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(wr(e,t))return;b.uniform3fv(this.addr,t),vr(e,t)}}function Ly(b,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(b.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(wr(e,t))return;b.uniform4fv(this.addr,t),vr(e,t)}}function Cy(b,t){const e=this.cache,n=t.elements;if(n===void 0){if(wr(e,t))return;b.uniformMatrix2fv(this.addr,!1,t),vr(e,t)}else{if(wr(e,n))return;bc.set(n),b.uniformMatrix2fv(this.addr,!1,bc),vr(e,n)}}function Ry(b,t){const e=this.cache,n=t.elements;if(n===void 0){if(wr(e,t))return;b.uniformMatrix3fv(this.addr,!1,t),vr(e,t)}else{if(wr(e,n))return;vc.set(n),b.uniformMatrix3fv(this.addr,!1,vc),vr(e,n)}}function Py(b,t){const e=this.cache,n=t.elements;if(n===void 0){if(wr(e,t))return;b.uniformMatrix4fv(this.addr,!1,t),vr(e,t)}else{if(wr(e,n))return;yc.set(n),b.uniformMatrix4fv(this.addr,!1,yc),vr(e,n)}}function Iy(b,t){const e=this.cache;e[0]!==t&&(b.uniform1i(this.addr,t),e[0]=t)}function Dy(b,t){const e=this.cache;wr(e,t)||(b.uniform2iv(this.addr,t),vr(e,t))}function Oy(b,t){const e=this.cache;wr(e,t)||(b.uniform3iv(this.addr,t),vr(e,t))}function jy(b,t){const e=this.cache;wr(e,t)||(b.uniform4iv(this.addr,t),vr(e,t))}function ky(b,t){const e=this.cache;e[0]!==t&&(b.uniform1ui(this.addr,t),e[0]=t)}function Ny(b,t){const e=this.cache;wr(e,t)||(b.uniform2uiv(this.addr,t),vr(e,t))}function Fy(b,t){const e=this.cache;wr(e,t)||(b.uniform3uiv(this.addr,t),vr(e,t))}function Uy(b,t){const e=this.cache;wr(e,t)||(b.uniform4uiv(this.addr,t),vr(e,t))}function By(b,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(b.uniform1i(this.addr,i),n[0]=i),e.safeSetTexture2D(t||fc,i)}function Gy(b,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(b.uniform1i(this.addr,i),n[0]=i),e.setTexture3D(t||My,i)}function zy(b,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(b.uniform1i(this.addr,i),n[0]=i),e.safeSetTextureCube(t||pc,i)}function Vy(b,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(b.uniform1i(this.addr,i),n[0]=i),e.setTexture2DArray(t||Sy,i)}function Hy(b){switch(b){case 5126:return Ty;case 35664:return Ey;case 35665:return Ay;case 35666:return Ly;case 35674:return Cy;case 35675:return Ry;case 35676:return Py;case 5124:case 35670:return Iy;case 35667:case 35671:return Dy;case 35668:case 35672:return Oy;case 35669:case 35673:return jy;case 5125:return ky;case 36294:return Ny;case 36295:return Fy;case 36296:return Uy;case 35678:case 36198:case 36298:case 36306:case 35682:return By;case 35679:case 36299:case 36307:return Gy;case 35680:case 36300:case 36308:case 36293:return zy;case 36289:case 36303:case 36311:case 36292:return Vy}}function Wy(b,t){b.uniform1fv(this.addr,t)}function qy(b,t){const e=ki(t,this.size,2);b.uniform2fv(this.addr,e)}function Xy(b,t){const e=ki(t,this.size,3);b.uniform3fv(this.addr,e)}function Yy(b,t){const e=ki(t,this.size,4);b.uniform4fv(this.addr,e)}function Zy(b,t){const e=ki(t,this.size,4);b.uniformMatrix2fv(this.addr,!1,e)}function Jy(b,t){const e=ki(t,this.size,9);b.uniformMatrix3fv(this.addr,!1,e)}function Ky(b,t){const e=ki(t,this.size,16);b.uniformMatrix4fv(this.addr,!1,e)}function Qy(b,t){b.uniform1iv(this.addr,t)}function $y(b,t){b.uniform2iv(this.addr,t)}function ev(b,t){b.uniform3iv(this.addr,t)}function tv(b,t){b.uniform4iv(this.addr,t)}function rv(b,t){b.uniform1uiv(this.addr,t)}function nv(b,t){b.uniform2uiv(this.addr,t)}function iv(b,t){b.uniform3uiv(this.addr,t)}function sv(b,t){b.uniform4uiv(this.addr,t)}function ov(b,t,e){const n=t.length,i=_c(e,n);b.uniform1iv(this.addr,i);for(let s=0;s!==n;++s)e.safeSetTexture2D(t[s]||fc,i[s])}function av(b,t,e){const n=t.length,i=_c(e,n);b.uniform1iv(this.addr,i);for(let s=0;s!==n;++s)e.safeSetTextureCube(t[s]||pc,i[s])}function lv(b){switch(b){case 5126:return Wy;case 35664:return qy;case 35665:return Xy;case 35666:return Yy;case 35674:return Zy;case 35675:return Jy;case 35676:return Ky;case 5124:case 35670:return Qy;case 35667:case 35671:return $y;case 35668:case 35672:return ev;case 35669:case 35673:return tv;case 5125:return rv;case 36294:return nv;case 36295:return iv;case 36296:return sv;case 35678:case 36198:case 36298:case 36306:case 35682:return ov;case 35680:case 36300:case 36308:case 36293:return av}}function uv(b,t,e){this.id=b,this.addr=e,this.cache=[],this.setValue=Hy(t.type)}function xc(b,t,e){this.id=b,this.addr=e,this.cache=[],this.size=t.size,this.setValue=lv(t.type)}xc.prototype.updateCache=function(b){const t=this.cache;b instanceof Float32Array&&t.length!==b.length&&(this.cache=new Float32Array(b.length)),vr(t,b)};function wc(b){this.id=b,this.seq=[],this.map={}}wc.prototype.setValue=function(b,t,e){const n=this.seq;for(let i=0,s=n.length;i!==s;++i){const r=n[i];r.setValue(b,t[r.id],e)}};const Na=/(\w+)(\])?(\[|\.)?/g;function Sc(b,t){b.seq.push(t),b.map[t.id]=t}function cv(b,t,e){const n=b.name,i=n.length;for(Na.lastIndex=0;;){const s=Na.exec(n),r=Na.lastIndex;let a=s[1];const c=s[2]==="]",d=s[3];if(c&&(a=a|0),d===void 0||d==="["&&r+2===i){Sc(e,d===void 0?new uv(a,b,t):new xc(a,b,t));break}else{let u=e.map[a];u===void 0&&(u=new wc(a),Sc(e,u)),e=u}}}function An(b,t){this.seq=[],this.map={};const e=b.getProgramParameter(t,35718);for(let n=0;n<e;++n){const i=b.getActiveUniform(t,n),s=b.getUniformLocation(t,i.name);cv(i,s,this)}}An.prototype.setValue=function(b,t,e,n){const i=this.map[t];i!==void 0&&i.setValue(b,e,n)};An.prototype.setOptional=function(b,t,e){const n=t[e];n!==void 0&&this.setValue(b,e,n)};An.upload=function(b,t,e,n){for(let i=0,s=t.length;i!==s;++i){const r=t[i],a=e[r.id];a.needsUpdate!==!1&&r.setValue(b,a.value,n)}};An.seqWithValue=function(b,t){const e=[];for(let n=0,i=b.length;n!==i;++n){const s=b[n];s.id in t&&e.push(s)}return e};function Mc(b,t,e){const n=b.createShader(t);return b.shaderSource(n,e),b.compileShader(n),n}let hv=0;function dv(b){const t=b.split(`
`);for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function Tc(b){switch(b){case gr:return["Linear","( value )"];case Hr:return["sRGB","( value )"];case ra:return["RGBE","( value )"];case Iu:return["RGBM","( value, 7.0 )"];case Du:return["RGBM","( value, 16.0 )"];case Ou:return["RGBD","( value, 256.0 )"];case ta:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case qf:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",b),["Linear","( value )"]}}function Ec(b,t,e){const n=b.getShaderParameter(t,35713),i=b.getShaderInfoLog(t).trim();return n&&i===""?"":e.toUpperCase()+`

`+i+`

`+dv(b.getShaderSource(t))}function qn(b,t){const e=Tc(t);return"vec4 "+b+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function fv(b,t){const e=Tc(t);return"vec4 "+b+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function pv(b,t){let e;switch(t){case Vd:e="Linear";break;case Hd:e="Reinhard";break;case Wd:e="OptimizedCineon";break;case qd:e="ACESFilmic";break;case Xd:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+b+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function mv(b){return[b.extensionDerivatives||b.envMapCubeUV||b.bumpMap||b.tangentSpaceNormalMap||b.clearcoatNormalMap||b.flatShading||b.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(b.extensionFragDepth||b.logarithmicDepthBuffer)&&b.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",b.extensionDrawBuffers&&b.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(b.extensionShaderTextureLOD||b.envMap||b.transmission)&&b.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ms).join(`
`)}function gv(b){const t=[];for(const e in b){const n=b[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function yv(b,t){const e={},n=b.getProgramParameter(t,35721);for(let i=0;i<n;i++){const s=b.getActiveAttrib(t,i),r=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),e[r]={type:s.type,location:b.getAttribLocation(t,r),locationSize:a}}return e}function ms(b){return b!==""}function Ac(b,t){return b.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Lc(b,t){return b.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const vv=/^[ \t]*#include +<([\w\d./]+)>/gm;function Fa(b){return b.replace(vv,bv)}function bv(b,t){const e=Et[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return Fa(e)}const _v=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,xv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Cc(b){return b.replace(xv,Rc).replace(_v,wv)}function wv(b,t,e,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Rc(b,t,e,n)}function Rc(b,t,e,n){let i="";for(let s=parseInt(t);s<parseInt(e);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Pc(b){let t="precision "+b.precision+` float;
precision `+b.precision+" int;";return b.precision==="highp"?t+=`
#define HIGH_PRECISION`:b.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:b.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Sv(b){let t="SHADOWMAP_TYPE_BASIC";return b.shadowMapType===uu?t="SHADOWMAP_TYPE_PCF":b.shadowMapType===xd?t="SHADOWMAP_TYPE_PCF_SOFT":b.shadowMapType===Qi&&(t="SHADOWMAP_TYPE_VSM"),t}function Mv(b){let t="ENVMAP_TYPE_CUBE";if(b.envMap)switch(b.envMapMode){case es:case ts:t="ENVMAP_TYPE_CUBE";break;case Bs:case Jo:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Tv(b){let t="ENVMAP_MODE_REFLECTION";if(b.envMap)switch(b.envMapMode){case ts:case Jo:t="ENVMAP_MODE_REFRACTION";break}return t}function Ev(b){let t="ENVMAP_BLENDING_NONE";if(b.envMap)switch(b.combine){case Us:t="ENVMAP_BLENDING_MULTIPLY";break;case Gd:t="ENVMAP_BLENDING_MIX";break;case zd:t="ENVMAP_BLENDING_ADD";break}return t}function Av(b,t,e,n){const i=b.getContext(),s=e.defines;let r=e.vertexShader,a=e.fragmentShader;const c=Sv(e),d=Mv(e),p=Tv(e),u=Ev(e),o=b.gammaFactor>0?b.gammaFactor:1,l=e.isWebGL2?"":mv(e),h=gv(s),f=i.createProgram();let m,g,v=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(m=[h].filter(ms).join(`
`),m.length>0&&(m+=`
`),g=[l,h].filter(ms).join(`
`),g.length>0&&(g+=`
`)):(m=[Pc(e),"#define SHADER_NAME "+e.shaderName,h,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+o,"#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphTargets&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargets&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ms).join(`
`),g=[l,Pc(e),"#define SHADER_NAME "+e.shaderName,h,"#define GAMMA_FACTOR "+o,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.envMap?"#define "+p:"",e.envMap?"#define "+u:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Fn?"#define TONE_MAPPING":"",e.toneMapping!==Fn?Et.tonemapping_pars_fragment:"",e.toneMapping!==Fn?pv("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.format===Un?"#define OPAQUE":"",Et.encodings_pars_fragment,e.map?qn("mapTexelToLinear",e.mapEncoding):"",e.matcap?qn("matcapTexelToLinear",e.matcapEncoding):"",e.envMap?qn("envMapTexelToLinear",e.envMapEncoding):"",e.emissiveMap?qn("emissiveMapTexelToLinear",e.emissiveMapEncoding):"",e.specularColorMap?qn("specularColorMapTexelToLinear",e.specularColorMapEncoding):"",e.sheenColorMap?qn("sheenColorMapTexelToLinear",e.sheenColorMapEncoding):"",e.lightMap?qn("lightMapTexelToLinear",e.lightMapEncoding):"",fv("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(ms).join(`
`)),r=Fa(r),r=Ac(r,e),r=Lc(r,e),a=Fa(a),a=Ac(a,e),a=Lc(a,e),r=Cc(r),a=Cc(a),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",e.glslVersion===ju?"":"out highp vec4 pc_fragColor;",e.glslVersion===ju?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=v+m+r,w=v+g+a,M=Mc(i,35633,x),A=Mc(i,35632,w);if(i.attachShader(f,M),i.attachShader(f,A),e.index0AttributeName!==void 0?i.bindAttribLocation(f,0,e.index0AttributeName):e.morphTargets===!0&&i.bindAttribLocation(f,0,"position"),i.linkProgram(f),b.debug.checkShaderErrors){const R=i.getProgramInfoLog(f).trim(),P=i.getShaderInfoLog(M).trim(),D=i.getShaderInfoLog(A).trim();let O=!0,j=!0;if(i.getProgramParameter(f,35714)===!1){O=!1;const N=Ec(i,M,"vertex"),q=Ec(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(f,35715)+`

Program Info Log: `+R+`
`+N+`
`+q)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(P===""||D==="")&&(j=!1);j&&(this.diagnostics={runnable:O,programLog:R,vertexShader:{log:P,prefix:m},fragmentShader:{log:D,prefix:g}})}i.deleteShader(M),i.deleteShader(A);let E;this.getUniforms=function(){return E===void 0&&(E=new An(i,f)),E};let I;return this.getAttributes=function(){return I===void 0&&(I=yv(i,f)),I},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(f),this.program=void 0},this.name=e.shaderName,this.id=hv++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=M,this.fragmentShader=A,this}function Lv(b,t,e,n,i,s,r){const a=[],c=i.isWebGL2,d=i.logarithmicDepthBuffer,p=i.floatVertexTextures,u=i.maxVertexUniforms,o=i.vertexTextures;let l=i.precision;const h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function m(E){const R=E.skeleton.bones;if(p)return 1024;{const D=Math.floor((u-20)/4),O=Math.min(D,R.length);return O<R.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+R.length+" bones. This GPU supports "+O+"."),0):O}}function g(E){let I;return E&&E.isTexture?I=E.encoding:E&&E.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),I=E.texture.encoding):I=gr,c&&E&&E.isTexture&&E.format===mr&&E.type===mn&&E.encoding===Hr&&(I=gr),I}function v(E,I,R,P,D){const O=P.fog,j=E.isMeshStandardMaterial?P.environment:null,N=(E.isMeshStandardMaterial?e:t).get(E.envMap||j),q=h[E.type],X=D.isSkinnedMesh?m(D):0;E.precision!==null&&(l=i.getMaxPrecision(E.precision),l!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",l,"instead."));let V,$;if(q){const fe=qr[q];V=fe.vertexShader,$=fe.fragmentShader}else V=E.vertexShader,$=E.fragmentShader;const K=b.getRenderTarget(),_e=E.alphaTest>0,me=E.clearcoat>0;return{isWebGL2:c,shaderID:q,shaderName:E.type,vertexShader:V,fragmentShader:$,defines:E.defines,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:l,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:o,outputEncoding:K!==null?g(K.texture):b.outputEncoding,map:!!E.map,mapEncoding:g(E.map),matcap:!!E.matcap,matcapEncoding:g(E.matcap),envMap:!!N,envMapMode:N&&N.mapping,envMapEncoding:g(N),envMapCubeUV:!!N&&(N.mapping===Bs||N.mapping===Jo),lightMap:!!E.lightMap,lightMapEncoding:g(E.lightMap),aoMap:!!E.aoMap,emissiveMap:!!E.emissiveMap,emissiveMapEncoding:g(E.emissiveMap),bumpMap:!!E.bumpMap,normalMap:!!E.normalMap,objectSpaceNormalMap:E.normalMapType===Zf,tangentSpaceNormalMap:E.normalMapType===Bn,clearcoat:me,clearcoatMap:me&&!!E.clearcoatMap,clearcoatRoughnessMap:me&&!!E.clearcoatRoughnessMap,clearcoatNormalMap:me&&!!E.clearcoatNormalMap,displacementMap:!!E.displacementMap,roughnessMap:!!E.roughnessMap,metalnessMap:!!E.metalnessMap,specularMap:!!E.specularMap,specularIntensityMap:!!E.specularIntensityMap,specularColorMap:!!E.specularColorMap,specularColorMapEncoding:g(E.specularColorMap),alphaMap:!!E.alphaMap,alphaTest:_e,gradientMap:!!E.gradientMap,sheen:E.sheen>0,sheenColorMap:!!E.sheenColorMap,sheenColorMapEncoding:g(E.sheenColorMap),sheenRoughnessMap:!!E.sheenRoughnessMap,transmission:E.transmission>0,transmissionMap:!!E.transmissionMap,thicknessMap:!!E.thicknessMap,combine:E.combine,vertexTangents:!!E.normalMap&&!!D.geometry&&!!D.geometry.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!D.geometry&&!!D.geometry.attributes.color&&D.geometry.attributes.color.itemSize===4,vertexUvs:!!E.map||!!E.bumpMap||!!E.normalMap||!!E.specularMap||!!E.alphaMap||!!E.emissiveMap||!!E.roughnessMap||!!E.metalnessMap||!!E.clearcoatMap||!!E.clearcoatRoughnessMap||!!E.clearcoatNormalMap||!!E.displacementMap||!!E.transmissionMap||!!E.thicknessMap||!!E.specularIntensityMap||!!E.specularColorMap||!!E.sheenColorMap||E.sheenRoughnessMap,uvsVertexOnly:!(!!E.map||!!E.bumpMap||!!E.normalMap||!!E.specularMap||!!E.alphaMap||!!E.emissiveMap||!!E.roughnessMap||!!E.metalnessMap||!!E.clearcoatNormalMap||E.transmission>0||!!E.transmissionMap||!!E.thicknessMap||!!E.specularIntensityMap||!!E.specularColorMap||!!E.sheen>0||!!E.sheenColorMap||!!E.sheenRoughnessMap)&&!!E.displacementMap,fog:!!O,useFog:E.fog,fogExp2:O&&O.isFogExp2,flatShading:!!E.flatShading,sizeAttenuation:E.sizeAttenuation,logarithmicDepthBuffer:d,skinning:D.isSkinnedMesh===!0&&X>0,maxBones:X,useVertexTexture:p,morphTargets:!!D.geometry&&!!D.geometry.morphAttributes.position,morphNormals:!!D.geometry&&!!D.geometry.morphAttributes.normal,morphTargetsCount:!!D.geometry&&!!D.geometry.morphAttributes.position?D.geometry.morphAttributes.position.length:0,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,format:E.format,dithering:E.dithering,shadowMapEnabled:b.shadowMap.enabled&&R.length>0,shadowMapType:b.shadowMap.type,toneMapping:E.toneMapped?b.toneMapping:Fn,physicallyCorrectLights:b.physicallyCorrectLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Nn,flipSided:E.side===or,depthPacking:E.depthPacking!==void 0?E.depthPacking:!1,index0AttributeName:E.index0AttributeName,extensionDerivatives:E.extensions&&E.extensions.derivatives,extensionFragDepth:E.extensions&&E.extensions.fragDepth,extensionDrawBuffers:E.extensions&&E.extensions.drawBuffers,extensionShaderTextureLOD:E.extensions&&E.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}}function x(E){const I=[];if(E.shaderID?I.push(E.shaderID):(I.push(Uu(E.fragmentShader)),I.push(Uu(E.vertexShader))),E.defines!==void 0)for(const R in E.defines)I.push(R),I.push(E.defines[R]);if(E.isRawShaderMaterial===!1){for(let R=0;R<f.length;R++)I.push(E[f[R]]);I.push(b.outputEncoding),I.push(b.gammaFactor)}return I.push(E.customProgramCacheKey),I.join()}function w(E){const I=h[E.type];let R;if(I){const P=qr[I];R=Ep.clone(P.uniforms)}else R=E.uniforms;return R}function M(E,I){let R;for(let P=0,D=a.length;P<D;P++){const O=a[P];if(O.cacheKey===I){R=O,++R.usedTimes;break}}return R===void 0&&(R=new Av(b,I,E,s),a.push(R)),R}function A(E){if(--E.usedTimes==0){const I=a.indexOf(E);a[I]=a[a.length-1],a.pop(),E.destroy()}}return{getParameters:v,getProgramCacheKey:x,getUniforms:w,acquireProgram:M,releaseProgram:A,programs:a}}function Cv(){let b=new WeakMap;function t(s){let r=b.get(s);return r===void 0&&(r={},b.set(s,r)),r}function e(s){b.delete(s)}function n(s,r,a){b.get(s)[r]=a}function i(){b=new WeakMap}return{get:t,remove:e,update:n,dispose:i}}function Rv(b,t){return b.groupOrder!==t.groupOrder?b.groupOrder-t.groupOrder:b.renderOrder!==t.renderOrder?b.renderOrder-t.renderOrder:b.program!==t.program?b.program.id-t.program.id:b.material.id!==t.material.id?b.material.id-t.material.id:b.z!==t.z?b.z-t.z:b.id-t.id}function Ic(b,t){return b.groupOrder!==t.groupOrder?b.groupOrder-t.groupOrder:b.renderOrder!==t.renderOrder?b.renderOrder-t.renderOrder:b.z!==t.z?t.z-b.z:b.id-t.id}function Dc(b){const t=[];let e=0;const n=[],i=[],s=[],r={id:-1};function a(){e=0,n.length=0,i.length=0,s.length=0}function c(l,h,f,m,g,v){let x=t[e];const w=b.get(f);return x===void 0?(x={id:l.id,object:l,geometry:h,material:f,program:w.program||r,groupOrder:m,renderOrder:l.renderOrder,z:g,group:v},t[e]=x):(x.id=l.id,x.object=l,x.geometry=h,x.material=f,x.program=w.program||r,x.groupOrder=m,x.renderOrder=l.renderOrder,x.z=g,x.group=v),e++,x}function d(l,h,f,m,g,v){const x=c(l,h,f,m,g,v);f.transmission>0?i.push(x):f.transparent===!0?s.push(x):n.push(x)}function p(l,h,f,m,g,v){const x=c(l,h,f,m,g,v);f.transmission>0?i.unshift(x):f.transparent===!0?s.unshift(x):n.unshift(x)}function u(l,h){n.length>1&&n.sort(l||Rv),i.length>1&&i.sort(h||Ic),s.length>1&&s.sort(h||Ic)}function o(){for(let l=e,h=t.length;l<h;l++){const f=t[l];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.program=null,f.group=null}}return{opaque:n,transmissive:i,transparent:s,init:a,push:d,unshift:p,finish:o,sort:u}}function Pv(b){let t=new WeakMap;function e(i,s){let r;return t.has(i)===!1?(r=new Dc(b),t.set(i,[r])):s>=t.get(i).length?(r=new Dc(b),t.get(i).push(r)):r=t.get(i)[s],r}function n(){t=new WeakMap}return{get:e,dispose:n}}function Iv(){const b={};return{get:function(t){if(b[t.id]!==void 0)return b[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Se,color:new at};break;case"SpotLight":e={position:new Se,direction:new Se,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Se,color:new at,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Se,skyColor:new at,groundColor:new at};break;case"RectAreaLight":e={color:new at,position:new Se,halfWidth:new Se,halfHeight:new Se};break}return b[t.id]=e,e}}}function Dv(){const b={};return{get:function(t){if(b[t.id]!==void 0)return b[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return b[t.id]=e,e}}}let Ov=0;function jv(b,t){return(t.castShadow?1:0)-(b.castShadow?1:0)}function kv(b,t){const e=new Iv,n=Dv(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let p=0;p<9;p++)i.probe.push(new Se);const s=new Se,r=new ft,a=new ft;function c(p,u){let o=0,l=0,h=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let f=0,m=0,g=0,v=0,x=0,w=0,M=0,A=0;p.sort(jv);const E=u!==!0?Math.PI:1;for(let R=0,P=p.length;R<P;R++){const D=p[R],O=D.color,j=D.intensity,N=D.distance,q=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)o+=O.r*j*E,l+=O.g*j*E,h+=O.b*j*E;else if(D.isLightProbe)for(let X=0;X<9;X++)i.probe[X].addScaledVector(D.sh.coefficients[X],j);else if(D.isDirectionalLight){const X=e.get(D);if(X.color.copy(D.color).multiplyScalar(D.intensity*E),D.castShadow){const V=D.shadow,$=n.get(D);$.shadowBias=V.bias,$.shadowNormalBias=V.normalBias,$.shadowRadius=V.radius,$.shadowMapSize=V.mapSize,i.directionalShadow[f]=$,i.directionalShadowMap[f]=q,i.directionalShadowMatrix[f]=D.shadow.matrix,w++}i.directional[f]=X,f++}else if(D.isSpotLight){const X=e.get(D);if(X.position.setFromMatrixPosition(D.matrixWorld),X.color.copy(O).multiplyScalar(j*E),X.distance=N,X.coneCos=Math.cos(D.angle),X.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),X.decay=D.decay,D.castShadow){const V=D.shadow,$=n.get(D);$.shadowBias=V.bias,$.shadowNormalBias=V.normalBias,$.shadowRadius=V.radius,$.shadowMapSize=V.mapSize,i.spotShadow[g]=$,i.spotShadowMap[g]=q,i.spotShadowMatrix[g]=D.shadow.matrix,A++}i.spot[g]=X,g++}else if(D.isRectAreaLight){const X=e.get(D);X.color.copy(O).multiplyScalar(j),X.halfWidth.set(D.width*.5,0,0),X.halfHeight.set(0,D.height*.5,0),i.rectArea[v]=X,v++}else if(D.isPointLight){const X=e.get(D);if(X.color.copy(D.color).multiplyScalar(D.intensity*E),X.distance=D.distance,X.decay=D.decay,D.castShadow){const V=D.shadow,$=n.get(D);$.shadowBias=V.bias,$.shadowNormalBias=V.normalBias,$.shadowRadius=V.radius,$.shadowMapSize=V.mapSize,$.shadowCameraNear=V.camera.near,$.shadowCameraFar=V.camera.far,i.pointShadow[m]=$,i.pointShadowMap[m]=q,i.pointShadowMatrix[m]=D.shadow.matrix,M++}i.point[m]=X,m++}else if(D.isHemisphereLight){const X=e.get(D);X.skyColor.copy(D.color).multiplyScalar(j*E),X.groundColor.copy(D.groundColor).multiplyScalar(j*E),i.hemi[x]=X,x++}}v>0&&(t.isWebGL2||b.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=nt.LTC_FLOAT_1,i.rectAreaLTC2=nt.LTC_FLOAT_2):b.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=nt.LTC_HALF_1,i.rectAreaLTC2=nt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=h;const I=i.hash;(I.directionalLength!==f||I.pointLength!==m||I.spotLength!==g||I.rectAreaLength!==v||I.hemiLength!==x||I.numDirectionalShadows!==w||I.numPointShadows!==M||I.numSpotShadows!==A)&&(i.directional.length=f,i.spot.length=g,i.rectArea.length=v,i.point.length=m,i.hemi.length=x,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=M,i.spotShadowMatrix.length=A,I.directionalLength=f,I.pointLength=m,I.spotLength=g,I.rectAreaLength=v,I.hemiLength=x,I.numDirectionalShadows=w,I.numPointShadows=M,I.numSpotShadows=A,i.version=Ov++)}function d(p,u){let o=0,l=0,h=0,f=0,m=0;const g=u.matrixWorldInverse;for(let v=0,x=p.length;v<x;v++){const w=p[v];if(w.isDirectionalLight){const M=i.directional[o];M.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),o++}else if(w.isSpotLight){const M=i.spot[h];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(g),M.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),h++}else if(w.isRectAreaLight){const M=i.rectArea[f];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(g),a.identity(),r.copy(w.matrixWorld),r.premultiply(g),a.extractRotation(r),M.halfWidth.set(w.width*.5,0,0),M.halfHeight.set(0,w.height*.5,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),f++}else if(w.isPointLight){const M=i.point[l];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(g),l++}else if(w.isHemisphereLight){const M=i.hemi[m];M.direction.setFromMatrixPosition(w.matrixWorld),M.direction.transformDirection(g),M.direction.normalize(),m++}}}return{setup:c,setupView:d,state:i}}function Oc(b,t){const e=new kv(b,t),n=[],i=[];function s(){n.length=0,i.length=0}function r(u){n.push(u)}function a(u){i.push(u)}function c(u){e.setup(n,u)}function d(u){e.setupView(n,u)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:e},setupLights:c,setupLightsView:d,pushLight:r,pushShadow:a}}function Nv(b,t){let e=new WeakMap;function n(s,r=0){let a;return e.has(s)===!1?(a=new Oc(b,t),e.set(s,[a])):r>=e.get(s).length?(a=new Oc(b,t),e.get(s).push(a)):a=e.get(s)[r],a}function i(){e=new WeakMap}return{get:n,dispose:i}}class jc extends ur{constructor(t){super();this.type="MeshDepthMaterial",this.depthPacking=Xf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}jc.prototype.isMeshDepthMaterial=!0;class kc extends ur{constructor(t){super();this.type="MeshDistanceMaterial",this.referencePosition=new Se,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}kc.prototype.isMeshDistanceMaterial=!0;const Fv=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Uv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Nc(b,t,e){let n=new fo;const i=new Ke,s=new Ke,r=new Vt,a=new jc({depthPacking:Yf}),c=new kc,d={},p=e.maxTextureSize,u={0:or,1:ai,2:Nn},o=new Hn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:Fv,fragmentShader:Uv}),l=o.clone();l.defines.HORIZONTAL_PASS=1;const h=new Ht;h.setAttribute("position",new tr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new _r(h,o),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=uu,this.render=function(w,M,A){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||w.length===0)return;const E=b.getRenderTarget(),I=b.getActiveCubeFace(),R=b.getActiveMipmapLevel(),P=b.state;P.setBlending(pn),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let D=0,O=w.length;D<O;D++){const j=w[D],N=j.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;i.copy(N.mapSize);const q=N.getFrameExtents();if(i.multiply(q),s.copy(N.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(s.x=Math.floor(p/q.x),i.x=s.x*q.x,N.mapSize.x=s.x),i.y>p&&(s.y=Math.floor(p/q.y),i.y=s.y*q.y,N.mapSize.y=s.y)),N.map===null&&!N.isPointLightShadow&&this.type===Qi){const V={minFilter:Tr,magFilter:Tr,format:mr};N.map=new Wr(i.x,i.y,V),N.map.texture.name=j.name+".shadowMap",N.mapPass=new Wr(i.x,i.y,V),N.camera.updateProjectionMatrix()}if(N.map===null){const V={minFilter:ar,magFilter:ar,format:mr};N.map=new Wr(i.x,i.y,V),N.map.texture.name=j.name+".shadowMap",N.camera.updateProjectionMatrix()}b.setRenderTarget(N.map),b.clear();const X=N.getViewportCount();for(let V=0;V<X;V++){const $=N.getViewport(V);r.set(s.x*$.x,s.y*$.y,s.x*$.z,s.y*$.w),P.viewport(r),N.updateMatrices(j,V),n=N.getFrustum(),x(M,A,N.camera,j,this.type)}!N.isPointLightShadow&&this.type===Qi&&g(N,A),N.needsUpdate=!1}m.needsUpdate=!1,b.setRenderTarget(E,I,R)};function g(w,M){const A=t.update(f);o.defines.VSM_SAMPLES!==w.blurSamples&&(o.defines.VSM_SAMPLES=w.blurSamples,l.defines.VSM_SAMPLES=w.blurSamples,o.needsUpdate=!0,l.needsUpdate=!0),o.uniforms.shadow_pass.value=w.map.texture,o.uniforms.resolution.value=w.mapSize,o.uniforms.radius.value=w.radius,b.setRenderTarget(w.mapPass),b.clear(),b.renderBufferDirect(M,null,A,o,f,null),l.uniforms.shadow_pass.value=w.mapPass.texture,l.uniforms.resolution.value=w.mapSize,l.uniforms.radius.value=w.radius,b.setRenderTarget(w.map),b.clear(),b.renderBufferDirect(M,null,A,l,f,null)}function v(w,M,A,E,I,R,P){let D=null;const O=E.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(O!==void 0?D=O:D=E.isPointLight===!0?c:a,b.localClippingEnabled&&A.clipShadows===!0&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){const j=D.uuid,N=A.uuid;let q=d[j];q===void 0&&(q={},d[j]=q);let X=q[N];X===void 0&&(X=D.clone(),q[N]=X),D=X}return D.visible=A.visible,D.wireframe=A.wireframe,P===Qi?D.side=A.shadowSide!==null?A.shadowSide:A.side:D.side=A.shadowSide!==null?A.shadowSide:u[A.side],D.alphaMap=A.alphaMap,D.alphaTest=A.alphaTest,D.clipShadows=A.clipShadows,D.clippingPlanes=A.clippingPlanes,D.clipIntersection=A.clipIntersection,D.displacementMap=A.displacementMap,D.displacementScale=A.displacementScale,D.displacementBias=A.displacementBias,D.wireframeLinewidth=A.wireframeLinewidth,D.linewidth=A.linewidth,E.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(E.matrixWorld),D.nearDistance=I,D.farDistance=R),D}function x(w,M,A,E,I){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&I===Qi)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,w.matrixWorld);const D=t.update(w),O=w.material;if(Array.isArray(O)){const j=D.groups;for(let N=0,q=j.length;N<q;N++){const X=j[N],V=O[X.materialIndex];if(V&&V.visible){const $=v(w,D,V,E,A.near,A.far,I);b.renderBufferDirect(A,null,D,$,w,X)}}}else if(O.visible){const j=v(w,D,O,E,A.near,A.far,I);b.renderBufferDirect(A,null,D,j,w,null)}}const P=w.children;for(let D=0,O=P.length;D<O;D++)x(P[D],M,A,E,I)}}function Bv(b,t,e){const n=e.isWebGL2;function i(){let le=!1;const De=new Vt;let se=null;const Ne=new Vt(0,0,0,0);return{setMask:function(ie){se!==ie&&!le&&(b.colorMask(ie,ie,ie,ie),se=ie)},setLocked:function(ie){le=ie},setClear:function(ie,U,Y,z,J){J===!0&&(ie*=z,U*=z,Y*=z),De.set(ie,U,Y,z),Ne.equals(De)===!1&&(b.clearColor(ie,U,Y,z),Ne.copy(De))},reset:function(){le=!1,se=null,Ne.set(-1,0,0,0)}}}function s(){let le=!1,De=null,se=null,Ne=null;return{setTest:function(ie){ie?de(2929):Ee(2929)},setMask:function(ie){De!==ie&&!le&&(b.depthMask(ie),De=ie)},setFunc:function(ie){if(se!==ie){if(ie)switch(ie){case Od:b.depthFunc(512);break;case jd:b.depthFunc(519);break;case kd:b.depthFunc(513);break;case Xo:b.depthFunc(515);break;case Nd:b.depthFunc(514);break;case Fd:b.depthFunc(518);break;case Ud:b.depthFunc(516);break;case Bd:b.depthFunc(517);break;default:b.depthFunc(515)}else b.depthFunc(515);se=ie}},setLocked:function(ie){le=ie},setClear:function(ie){Ne!==ie&&(b.clearDepth(ie),Ne=ie)},reset:function(){le=!1,De=null,se=null,Ne=null}}}function r(){let le=!1,De=null,se=null,Ne=null,ie=null,U=null,Y=null,z=null,J=null;return{setTest:function(ce){le||(ce?de(2960):Ee(2960))},setMask:function(ce){De!==ce&&!le&&(b.stencilMask(ce),De=ce)},setFunc:function(ce,Ae,Ie){(se!==ce||Ne!==Ae||ie!==Ie)&&(b.stencilFunc(ce,Ae,Ie),se=ce,Ne=Ae,ie=Ie)},setOp:function(ce,Ae,Ie){(U!==ce||Y!==Ae||z!==Ie)&&(b.stencilOp(ce,Ae,Ie),U=ce,Y=Ae,z=Ie)},setLocked:function(ce){le=ce},setClear:function(ce){J!==ce&&(b.clearStencil(ce),J=ce)},reset:function(){le=!1,De=null,se=null,Ne=null,ie=null,U=null,Y=null,z=null,J=null}}}const a=new i,c=new s,d=new r;let p={},u=null,o={},l=null,h=!1,f=null,m=null,g=null,v=null,x=null,w=null,M=null,A=!1,E=null,I=null,R=null,P=null,D=null;const O=b.getParameter(35661);let j=!1,N=0;const q=b.getParameter(7938);q.indexOf("WebGL")!==-1?(N=parseFloat(/^WebGL (\d)/.exec(q)[1]),j=N>=1):q.indexOf("OpenGL ES")!==-1&&(N=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),j=N>=2);let X=null,V={};const $=b.getParameter(3088),K=b.getParameter(2978),_e=new Vt().fromArray($),me=new Vt().fromArray(K);function ye(le,De,se){const Ne=new Uint8Array(4),ie=b.createTexture();b.bindTexture(le,ie),b.texParameteri(le,10241,9728),b.texParameteri(le,10240,9728);for(let U=0;U<se;U++)b.texImage2D(De+U,0,6408,1,1,0,6408,5121,Ne);return ie}const fe={};fe[3553]=ye(3553,3553,1),fe[34067]=ye(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),d.setClear(0),de(2929),c.setFunc(Xo),xe(!1),Q(lu),de(2884),oe(pn);function de(le){p[le]!==!0&&(b.enable(le),p[le]=!0)}function Ee(le){p[le]!==!1&&(b.disable(le),p[le]=!1)}function C(le){le!==u&&(b.bindFramebuffer(36160,le),u=le)}function F(le,De){return De===null&&u!==null&&(De=u),o[le]!==De?(b.bindFramebuffer(le,De),o[le]=De,n&&(le===36009&&(o[36160]=De),le===36160&&(o[36009]=De)),!0):!1}function H(le){return l!==le?(b.useProgram(le),l=le,!0):!1}const ne={[li]:32774,[Sd]:32778,[Md]:32779};if(n)ne[pu]=32775,ne[mu]=32776;else{const le=t.get("EXT_blend_minmax");le!==null&&(ne[pu]=le.MIN_EXT,ne[mu]=le.MAX_EXT)}const re={[Td]:0,[Ed]:1,[Ad]:768,[gu]:770,[Dd]:776,[Pd]:774,[Cd]:772,[Ld]:769,[yu]:771,[Id]:775,[Rd]:773};function oe(le,De,se,Ne,ie,U,Y,z){if(le===pn){h===!0&&(Ee(3042),h=!1);return}if(h===!1&&(de(3042),h=!0),le!==wd){if(le!==f||z!==A){if((m!==li||x!==li)&&(b.blendEquation(32774),m=li,x=li),z)switch(le){case $i:b.blendFuncSeparate(1,771,1,771);break;case hu:b.blendFunc(1,1);break;case du:b.blendFuncSeparate(0,0,769,771);break;case fu:b.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case $i:b.blendFuncSeparate(770,771,1,771);break;case hu:b.blendFunc(770,1);break;case du:b.blendFunc(0,769);break;case fu:b.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}g=null,v=null,w=null,M=null,f=le,A=z}return}ie=ie||De,U=U||se,Y=Y||Ne,(De!==m||ie!==x)&&(b.blendEquationSeparate(ne[De],ne[ie]),m=De,x=ie),(se!==g||Ne!==v||U!==w||Y!==M)&&(b.blendFuncSeparate(re[se],re[Ne],re[U],re[Y]),g=se,v=Ne,w=U,M=Y),f=le,A=null}function te(le,De){le.side===Nn?Ee(2884):de(2884);let se=le.side===or;De&&(se=!se),xe(se),le.blending===$i&&le.transparent===!1?oe(pn):oe(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.premultipliedAlpha),c.setFunc(le.depthFunc),c.setTest(le.depthTest),c.setMask(le.depthWrite),a.setMask(le.colorWrite);const Ne=le.stencilWrite;d.setTest(Ne),Ne&&(d.setMask(le.stencilWriteMask),d.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),d.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),he(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?de(32926):Ee(32926)}function xe(le){E!==le&&(le?b.frontFace(2304):b.frontFace(2305),E=le)}function Q(le){le!==bd?(de(2884),le!==I&&(le===lu?b.cullFace(1029):le===_d?b.cullFace(1028):b.cullFace(1032))):Ee(2884),I=le}function ge(le){le!==R&&(j&&b.lineWidth(le),R=le)}function he(le,De,se){le?(de(32823),(P!==De||D!==se)&&(b.polygonOffset(De,se),P=De,D=se)):Ee(32823)}function G(le){le?de(3089):Ee(3089)}function W(le){le===void 0&&(le=33984+O-1),X!==le&&(b.activeTexture(le),X=le)}function ve(le,De){X===null&&W();let se=V[X];se===void 0&&(se={type:void 0,texture:void 0},V[X]=se),(se.type!==le||se.texture!==De)&&(b.bindTexture(le,De||fe[le]),se.type=le,se.texture=De)}function we(){const le=V[X];le!==void 0&&le.type!==void 0&&(b.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function Re(){try{b.compressedTexImage2D.apply(b,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ge(){try{b.texImage2D.apply(b,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Pe(){try{b.texImage3D.apply(b,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ze(le){_e.equals(le)===!1&&(b.scissor(le.x,le.y,le.z,le.w),_e.copy(le))}function Je(le){me.equals(le)===!1&&(b.viewport(le.x,le.y,le.z,le.w),me.copy(le))}function Ce(){b.disable(3042),b.disable(2884),b.disable(2929),b.disable(32823),b.disable(3089),b.disable(2960),b.disable(32926),b.blendEquation(32774),b.blendFunc(1,0),b.blendFuncSeparate(1,0,1,0),b.colorMask(!0,!0,!0,!0),b.clearColor(0,0,0,0),b.depthMask(!0),b.depthFunc(513),b.clearDepth(1),b.stencilMask(4294967295),b.stencilFunc(519,0,4294967295),b.stencilOp(7680,7680,7680),b.clearStencil(0),b.cullFace(1029),b.frontFace(2305),b.polygonOffset(0,0),b.activeTexture(33984),b.bindFramebuffer(36160,null),n===!0&&(b.bindFramebuffer(36009,null),b.bindFramebuffer(36008,null)),b.useProgram(null),b.lineWidth(1),b.scissor(0,0,b.canvas.width,b.canvas.height),b.viewport(0,0,b.canvas.width,b.canvas.height),p={},X=null,V={},u=null,o={},l=null,h=!1,f=null,m=null,g=null,v=null,x=null,w=null,M=null,A=!1,E=null,I=null,R=null,P=null,D=null,_e.set(0,0,b.canvas.width,b.canvas.height),me.set(0,0,b.canvas.width,b.canvas.height),a.reset(),c.reset(),d.reset()}return{buffers:{color:a,depth:c,stencil:d},enable:de,disable:Ee,bindFramebuffer:F,bindXRFramebuffer:C,useProgram:H,setBlending:oe,setMaterial:te,setFlipSided:xe,setCullFace:Q,setLineWidth:ge,setPolygonOffset:he,setScissorTest:G,activeTexture:W,bindTexture:ve,unbindTexture:we,compressedTexImage2D:Re,texImage2D:Ge,texImage3D:Pe,scissor:Ze,viewport:Je,reset:Ce}}function Gv(b,t,e,n,i,s,r){const a=i.isWebGL2,c=i.maxTextures,d=i.maxCubemapSize,p=i.maxTextureSize,u=i.maxSamples,o=new WeakMap;let l,h=!1;try{h=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function f(G,W){return h?new OffscreenCanvas(G,W):Xs("canvas")}function m(G,W,ve,we){let Re=1;if((G.width>we||G.height>we)&&(Re=we/Math.max(G.width,G.height)),Re<1||W===!0)if(typeof HTMLImageElement!="undefined"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&G instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&G instanceof ImageBitmap){const Ge=W?Nu:Math.floor,Pe=Ge(Re*G.width),Ze=Ge(Re*G.height);l===void 0&&(l=f(Pe,Ze));const Je=ve?f(Pe,Ze):l;return Je.width=Pe,Je.height=Ze,Je.getContext("2d").drawImage(G,0,0,Pe,Ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+Pe+"x"+Ze+")."),Je}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function g(G){return sa(G.width)&&sa(G.height)}function v(G){return a?!1:G.wrapS!==Mr||G.wrapT!==Mr||G.minFilter!==ar&&G.minFilter!==Tr}function x(G,W){return G.generateMipmaps&&W&&G.minFilter!==ar&&G.minFilter!==Tr}function w(G,W,ve,we,Re=1){b.generateMipmap(G);const Ge=n.get(W);Ge.__maxMipLevel=Math.log2(Math.max(ve,we,Re))}function M(G,W,ve,we){if(a===!1)return W;if(G!==null){if(b[G]!==void 0)return b[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Re=W;return W===6403&&(ve===5126&&(Re=33326),ve===5131&&(Re=33325),ve===5121&&(Re=33321)),W===6407&&(ve===5126&&(Re=34837),ve===5131&&(Re=34843),ve===5121&&(Re=32849)),W===6408&&(ve===5126&&(Re=34836),ve===5131&&(Re=34842),ve===5121&&(Re=we===Hr?35907:32856)),(Re===33325||Re===33326||Re===34842||Re===34836)&&t.get("EXT_color_buffer_float"),Re}function A(G){return G===ar||G===Ko||G===Qo?9728:9729}function E(G){const W=G.target;W.removeEventListener("dispose",E),R(W),W.isVideoTexture&&o.delete(W),r.memory.textures--}function I(G){const W=G.target;W.removeEventListener("dispose",I),P(W)}function R(G){const W=n.get(G);W.__webglInit!==void 0&&(b.deleteTexture(W.__webglTexture),n.remove(G))}function P(G){const W=G.texture,ve=n.get(G),we=n.get(W);if(!!G){if(we.__webglTexture!==void 0&&(b.deleteTexture(we.__webglTexture),r.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++)b.deleteFramebuffer(ve.__webglFramebuffer[Re]),ve.__webglDepthbuffer&&b.deleteRenderbuffer(ve.__webglDepthbuffer[Re]);else b.deleteFramebuffer(ve.__webglFramebuffer),ve.__webglDepthbuffer&&b.deleteRenderbuffer(ve.__webglDepthbuffer),ve.__webglMultisampledFramebuffer&&b.deleteFramebuffer(ve.__webglMultisampledFramebuffer),ve.__webglColorRenderbuffer&&b.deleteRenderbuffer(ve.__webglColorRenderbuffer),ve.__webglDepthRenderbuffer&&b.deleteRenderbuffer(ve.__webglDepthRenderbuffer);if(G.isWebGLMultipleRenderTargets)for(let Re=0,Ge=W.length;Re<Ge;Re++){const Pe=n.get(W[Re]);Pe.__webglTexture&&(b.deleteTexture(Pe.__webglTexture),r.memory.textures--),n.remove(W[Re])}n.remove(W),n.remove(G)}}let D=0;function O(){D=0}function j(){const G=D;return G>=c&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+c),D+=1,G}function N(G,W){const ve=n.get(G);if(G.isVideoTexture&&te(G),G.version>0&&ve.__version!==G.version){const we=G.image;if(we===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ye(ve,G,W);return}}e.activeTexture(33984+W),e.bindTexture(3553,ve.__webglTexture)}function q(G,W){const ve=n.get(G);if(G.version>0&&ve.__version!==G.version){ye(ve,G,W);return}e.activeTexture(33984+W),e.bindTexture(35866,ve.__webglTexture)}function X(G,W){const ve=n.get(G);if(G.version>0&&ve.__version!==G.version){ye(ve,G,W);return}e.activeTexture(33984+W),e.bindTexture(32879,ve.__webglTexture)}function V(G,W){const ve=n.get(G);if(G.version>0&&ve.__version!==G.version){fe(ve,G,W);return}e.activeTexture(33984+W),e.bindTexture(34067,ve.__webglTexture)}const $={[ui]:10497,[Mr]:33071,[Gs]:33648},K={[ar]:9728,[Ko]:9984,[Qo]:9986,[Tr]:9729,[bu]:9985,[ci]:9987};function _e(G,W,ve){if(ve?(b.texParameteri(G,10242,$[W.wrapS]),b.texParameteri(G,10243,$[W.wrapT]),(G===32879||G===35866)&&b.texParameteri(G,32882,$[W.wrapR]),b.texParameteri(G,10240,K[W.magFilter]),b.texParameteri(G,10241,K[W.minFilter])):(b.texParameteri(G,10242,33071),b.texParameteri(G,10243,33071),(G===32879||G===35866)&&b.texParameteri(G,32882,33071),(W.wrapS!==Mr||W.wrapT!==Mr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),b.texParameteri(G,10240,A(W.magFilter)),b.texParameteri(G,10241,A(W.minFilter)),W.minFilter!==ar&&W.minFilter!==Tr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const we=t.get("EXT_texture_filter_anisotropic");if(W.type===$r&&t.has("OES_texture_float_linear")===!1||a===!1&&W.type===hi&&t.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||n.get(W).__currentAnisotropy)&&(b.texParameterf(G,we.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy)}}function me(G,W){G.__webglInit===void 0&&(G.__webglInit=!0,W.addEventListener("dispose",E),G.__webglTexture=b.createTexture(),r.memory.textures++)}function ye(G,W,ve){let we=3553;W.isDataTexture2DArray&&(we=35866),W.isDataTexture3D&&(we=32879),me(G,W),e.activeTexture(33984+ve),e.bindTexture(we,G.__webglTexture),b.pixelStorei(37440,W.flipY),b.pixelStorei(37441,W.premultiplyAlpha),b.pixelStorei(3317,W.unpackAlignment),b.pixelStorei(37443,0);const Re=v(W)&&g(W.image)===!1,Ge=m(W.image,Re,!1,p),Pe=g(Ge)||a,Ze=s.convert(W.format);let Je=s.convert(W.type),Ce=M(W.internalFormat,Ze,Je,W.encoding);_e(we,W,Pe);let le;const De=W.mipmaps;if(W.isDepthTexture)Ce=6402,a?W.type===$r?Ce=36012:W.type===Vs?Ce=33190:W.type===rs?Ce=35056:Ce=33189:W.type===$r&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===di&&Ce===6402&&W.type!==zs&&W.type!==Vs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=zs,Je=s.convert(W.type)),W.format===ns&&Ce===6402&&(Ce=34041,W.type!==rs&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=rs,Je=s.convert(W.type))),e.texImage2D(3553,0,Ce,Ge.width,Ge.height,0,Ze,Je,null);else if(W.isDataTexture)if(De.length>0&&Pe){for(let se=0,Ne=De.length;se<Ne;se++)le=De[se],e.texImage2D(3553,se,Ce,le.width,le.height,0,Ze,Je,le.data);W.generateMipmaps=!1,G.__maxMipLevel=De.length-1}else e.texImage2D(3553,0,Ce,Ge.width,Ge.height,0,Ze,Je,Ge.data),G.__maxMipLevel=0;else if(W.isCompressedTexture){for(let se=0,Ne=De.length;se<Ne;se++)le=De[se],W.format!==mr&&W.format!==Un?Ze!==null?e.compressedTexImage2D(3553,se,Ce,le.width,le.height,0,le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e.texImage2D(3553,se,Ce,le.width,le.height,0,Ze,Je,le.data);G.__maxMipLevel=De.length-1}else if(W.isDataTexture2DArray)e.texImage3D(35866,0,Ce,Ge.width,Ge.height,Ge.depth,0,Ze,Je,Ge.data),G.__maxMipLevel=0;else if(W.isDataTexture3D)e.texImage3D(32879,0,Ce,Ge.width,Ge.height,Ge.depth,0,Ze,Je,Ge.data),G.__maxMipLevel=0;else if(De.length>0&&Pe){for(let se=0,Ne=De.length;se<Ne;se++)le=De[se],e.texImage2D(3553,se,Ce,Ze,Je,le);W.generateMipmaps=!1,G.__maxMipLevel=De.length-1}else e.texImage2D(3553,0,Ce,Ze,Je,Ge),G.__maxMipLevel=0;x(W,Pe)&&w(we,W,Ge.width,Ge.height),G.__version=W.version,W.onUpdate&&W.onUpdate(W)}function fe(G,W,ve){if(W.image.length!==6)return;me(G,W),e.activeTexture(33984+ve),e.bindTexture(34067,G.__webglTexture),b.pixelStorei(37440,W.flipY),b.pixelStorei(37441,W.premultiplyAlpha),b.pixelStorei(3317,W.unpackAlignment),b.pixelStorei(37443,0);const we=W&&(W.isCompressedTexture||W.image[0].isCompressedTexture),Re=W.image[0]&&W.image[0].isDataTexture,Ge=[];for(let se=0;se<6;se++)!we&&!Re?Ge[se]=m(W.image[se],!1,!0,d):Ge[se]=Re?W.image[se].image:W.image[se];const Pe=Ge[0],Ze=g(Pe)||a,Je=s.convert(W.format),Ce=s.convert(W.type),le=M(W.internalFormat,Je,Ce,W.encoding);_e(34067,W,Ze);let De;if(we){for(let se=0;se<6;se++){De=Ge[se].mipmaps;for(let Ne=0;Ne<De.length;Ne++){const ie=De[Ne];W.format!==mr&&W.format!==Un?Je!==null?e.compressedTexImage2D(34069+se,Ne,le,ie.width,ie.height,0,ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):e.texImage2D(34069+se,Ne,le,ie.width,ie.height,0,Je,Ce,ie.data)}}G.__maxMipLevel=De.length-1}else{De=W.mipmaps;for(let se=0;se<6;se++)if(Re){e.texImage2D(34069+se,0,le,Ge[se].width,Ge[se].height,0,Je,Ce,Ge[se].data);for(let Ne=0;Ne<De.length;Ne++){const U=De[Ne].image[se].image;e.texImage2D(34069+se,Ne+1,le,U.width,U.height,0,Je,Ce,U.data)}}else{e.texImage2D(34069+se,0,le,Je,Ce,Ge[se]);for(let Ne=0;Ne<De.length;Ne++){const ie=De[Ne];e.texImage2D(34069+se,Ne+1,le,Je,Ce,ie.image[se])}}G.__maxMipLevel=De.length}x(W,Ze)&&w(34067,W,Pe.width,Pe.height),G.__version=W.version,W.onUpdate&&W.onUpdate(W)}function de(G,W,ve,we,Re){const Ge=s.convert(ve.format),Pe=s.convert(ve.type),Ze=M(ve.internalFormat,Ge,Pe,ve.encoding);Re===32879||Re===35866?e.texImage3D(Re,0,Ze,W.width,W.height,W.depth,0,Ge,Pe,null):e.texImage2D(Re,0,Ze,W.width,W.height,0,Ge,Pe,null),e.bindFramebuffer(36160,G),b.framebufferTexture2D(36160,we,Re,n.get(ve).__webglTexture,0),e.bindFramebuffer(36160,null)}function Ee(G,W,ve){if(b.bindRenderbuffer(36161,G),W.depthBuffer&&!W.stencilBuffer){let we=33189;if(ve){const Re=W.depthTexture;Re&&Re.isDepthTexture&&(Re.type===$r?we=36012:Re.type===Vs&&(we=33190));const Ge=oe(W);b.renderbufferStorageMultisample(36161,Ge,we,W.width,W.height)}else b.renderbufferStorage(36161,we,W.width,W.height);b.framebufferRenderbuffer(36160,36096,36161,G)}else if(W.depthBuffer&&W.stencilBuffer){if(ve){const we=oe(W);b.renderbufferStorageMultisample(36161,we,35056,W.width,W.height)}else b.renderbufferStorage(36161,34041,W.width,W.height);b.framebufferRenderbuffer(36160,33306,36161,G)}else{const we=W.isWebGLMultipleRenderTargets===!0?W.texture[0]:W.texture,Re=s.convert(we.format),Ge=s.convert(we.type),Pe=M(we.internalFormat,Re,Ge,we.encoding);if(ve){const Ze=oe(W);b.renderbufferStorageMultisample(36161,Ze,Pe,W.width,W.height)}else b.renderbufferStorage(36161,Pe,W.width,W.height)}b.bindRenderbuffer(36161,null)}function C(G,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,G),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),N(W.depthTexture,0);const we=n.get(W.depthTexture).__webglTexture;if(W.depthTexture.format===di)b.framebufferTexture2D(36160,36096,3553,we,0);else if(W.depthTexture.format===ns)b.framebufferTexture2D(36160,33306,3553,we,0);else throw new Error("Unknown depthTexture format")}function F(G){const W=n.get(G),ve=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");C(W.__webglFramebuffer,G)}else if(ve){W.__webglDepthbuffer=[];for(let we=0;we<6;we++)e.bindFramebuffer(36160,W.__webglFramebuffer[we]),W.__webglDepthbuffer[we]=b.createRenderbuffer(),Ee(W.__webglDepthbuffer[we],G,!1)}else e.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=b.createRenderbuffer(),Ee(W.__webglDepthbuffer,G,!1);e.bindFramebuffer(36160,null)}function H(G){const W=G.texture,ve=n.get(G),we=n.get(W);G.addEventListener("dispose",I),G.isWebGLMultipleRenderTargets!==!0&&(we.__webglTexture=b.createTexture(),we.__version=W.version,r.memory.textures++);const Re=G.isWebGLCubeRenderTarget===!0,Ge=G.isWebGLMultipleRenderTargets===!0,Pe=G.isWebGLMultisampleRenderTarget===!0,Ze=W.isDataTexture3D||W.isDataTexture2DArray,Je=g(G)||a;if(a&&W.format===Un&&(W.type===$r||W.type===hi)&&(W.format=mr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Re){ve.__webglFramebuffer=[];for(let Ce=0;Ce<6;Ce++)ve.__webglFramebuffer[Ce]=b.createFramebuffer()}else if(ve.__webglFramebuffer=b.createFramebuffer(),Ge)if(i.drawBuffers){const Ce=G.texture;for(let le=0,De=Ce.length;le<De;le++){const se=n.get(Ce[le]);se.__webglTexture===void 0&&(se.__webglTexture=b.createTexture(),r.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Pe)if(a){ve.__webglMultisampledFramebuffer=b.createFramebuffer(),ve.__webglColorRenderbuffer=b.createRenderbuffer(),b.bindRenderbuffer(36161,ve.__webglColorRenderbuffer);const Ce=s.convert(W.format),le=s.convert(W.type),De=M(W.internalFormat,Ce,le,W.encoding),se=oe(G);b.renderbufferStorageMultisample(36161,se,De,G.width,G.height),e.bindFramebuffer(36160,ve.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(36160,36064,36161,ve.__webglColorRenderbuffer),b.bindRenderbuffer(36161,null),G.depthBuffer&&(ve.__webglDepthRenderbuffer=b.createRenderbuffer(),Ee(ve.__webglDepthRenderbuffer,G,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Re){e.bindTexture(34067,we.__webglTexture),_e(34067,W,Je);for(let Ce=0;Ce<6;Ce++)de(ve.__webglFramebuffer[Ce],G,W,36064,34069+Ce);x(W,Je)&&w(34067,W,G.width,G.height),e.unbindTexture()}else if(Ge){const Ce=G.texture;for(let le=0,De=Ce.length;le<De;le++){const se=Ce[le],Ne=n.get(se);e.bindTexture(3553,Ne.__webglTexture),_e(3553,se,Je),de(ve.__webglFramebuffer,G,se,36064+le,3553),x(se,Je)&&w(3553,se,G.width,G.height)}e.unbindTexture()}else{let Ce=3553;Ze&&(a?Ce=W.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),e.bindTexture(Ce,we.__webglTexture),_e(Ce,W,Je),de(ve.__webglFramebuffer,G,W,36064,Ce),x(W,Je)&&w(Ce,W,G.width,G.height,G.depth),e.unbindTexture()}G.depthBuffer&&F(G)}function ne(G){const W=g(G)||a,ve=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let we=0,Re=ve.length;we<Re;we++){const Ge=ve[we];if(x(Ge,W)){const Pe=G.isWebGLCubeRenderTarget?34067:3553,Ze=n.get(Ge).__webglTexture;e.bindTexture(Pe,Ze),w(Pe,Ge,G.width,G.height),e.unbindTexture()}}}function re(G){if(G.isWebGLMultisampleRenderTarget)if(a){const W=G.width,ve=G.height;let we=16384;G.depthBuffer&&(we|=256),G.stencilBuffer&&(we|=1024);const Re=n.get(G);e.bindFramebuffer(36008,Re.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Re.__webglFramebuffer),b.blitFramebuffer(0,0,W,ve,0,0,W,ve,we,9728),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,Re.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function oe(G){return a&&G.isWebGLMultisampleRenderTarget?Math.min(u,G.samples):0}function te(G){const W=r.render.frame;o.get(G)!==W&&(o.set(G,W),G.update())}let xe=!1,Q=!1;function ge(G,W){G&&G.isWebGLRenderTarget&&(xe===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),xe=!0),G=G.texture),N(G,W)}function he(G,W){G&&G.isWebGLCubeRenderTarget&&(Q===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Q=!0),G=G.texture),V(G,W)}this.allocateTextureUnit=j,this.resetTextureUnits=O,this.setTexture2D=N,this.setTexture2DArray=q,this.setTexture3D=X,this.setTextureCube=V,this.setupRenderTarget=H,this.updateRenderTargetMipmap=ne,this.updateMultisampleRenderTarget=re,this.safeSetTexture2D=ge,this.safeSetTextureCube=he}function zv(b,t,e){const n=e.isWebGL2;function i(s){let r;if(s===mn)return 5121;if(s===Kd)return 32819;if(s===Qd)return 32820;if(s===$d)return 33635;if(s===Yd)return 5120;if(s===Zd)return 5122;if(s===zs)return 5123;if(s===Jd)return 5124;if(s===Vs)return 5125;if(s===$r)return 5126;if(s===hi)return n?5131:(r=t.get("OES_texture_half_float"),r!==null?r.HALF_FLOAT_OES:null);if(s===ef)return 6406;if(s===Un)return 6407;if(s===mr)return 6408;if(s===tf)return 6409;if(s===rf)return 6410;if(s===di)return 6402;if(s===ns)return 34041;if(s===sf)return 6403;if(s===of)return 36244;if(s===af)return 33319;if(s===lf)return 33320;if(s===uf)return 36248;if(s===cf)return 36249;if(s===_u||s===xu||s===wu||s===Su)if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(s===_u)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===xu)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===wu)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Su)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Mu||s===Tu||s===Eu||s===Au)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(s===Mu)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Tu)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Eu)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Au)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===hf)return r=t.get("WEBGL_compressed_texture_etc1"),r!==null?r.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===Lu||s===Cu)&&(r=t.get("WEBGL_compressed_texture_etc"),r!==null)){if(s===Lu)return r.COMPRESSED_RGB8_ETC2;if(s===Cu)return r.COMPRESSED_RGBA8_ETC2_EAC}if(s===df||s===ff||s===pf||s===mf||s===gf||s===yf||s===vf||s===bf||s===_f||s===xf||s===wf||s===Sf||s===Mf||s===Tf||s===Af||s===Lf||s===Cf||s===Rf||s===Pf||s===If||s===Df||s===Of||s===jf||s===kf||s===Nf||s===Ff||s===Uf||s===Bf)return r=t.get("WEBGL_compressed_texture_astc"),r!==null?s:null;if(s===Ef)return r=t.get("EXT_texture_compression_bptc"),r!==null?s:null;if(s===rs)return n?34042:(r=t.get("WEBGL_depth_texture"),r!==null?r.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class Fc extends xr{constructor(t=[]){super();this.cameras=t}}Fc.prototype.isArrayCamera=!0;class Ln extends Ot{constructor(){super();this.type="Group"}}Ln.prototype.isGroup=!0;const Vv={type:"move"};class Ua{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ln,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ln,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ln,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Se),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let i=null,s=null,r=null;const a=this._targetRay,c=this._grip,d=this._hand;if(t&&e.session.visibilityState!=="visible-blurred")if(a!==null&&(i=e.getPose(t.targetRaySpace,n),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Vv))),d&&t.hand){r=!0;for(const f of t.hand.values()){const m=e.getJointPose(f,n);if(d.joints[f.jointName]===void 0){const v=new Ln;v.matrixAutoUpdate=!1,v.visible=!1,d.joints[f.jointName]=v,d.add(v)}const g=d.joints[f.jointName];m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const p=d.joints["index-finger-tip"],u=d.joints["thumb-tip"],o=p.position.distanceTo(u.position),l=.02,h=.005;d.inputState.pinching&&o>l+h?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&o<=l-h&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),d!==null&&(d.visible=r!==null),this}}class Hv extends gn{constructor(t,e){super();const n=this,i=t.state;let s=null,r=1,a=null,c="local-floor",d=null,p=null,u=null,o=null,l=null,h=!1,f=null,m=null,g=null,v=null,x=null,w=null;const M=[],A=new Map,E=new xr;E.layers.enable(1),E.viewport=new Vt;const I=new xr;I.layers.enable(2),I.viewport=new Vt;const R=[E,I],P=new Fc;P.layers.enable(1),P.layers.enable(2);let D=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let de=M[fe];return de===void 0&&(de=new Ua,M[fe]=de),de.getTargetRaySpace()},this.getControllerGrip=function(fe){let de=M[fe];return de===void 0&&(de=new Ua,M[fe]=de),de.getGripSpace()},this.getHand=function(fe){let de=M[fe];return de===void 0&&(de=new Ua,M[fe]=de),de.getHandSpace()};function j(fe){const de=A.get(fe.inputSource);de&&de.dispatchEvent({type:fe.type,data:fe.inputSource})}function N(){A.forEach(function(fe,de){fe.disconnect(de)}),A.clear(),D=null,O=null,i.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),u&&e.deleteFramebuffer(u),f&&e.deleteFramebuffer(f),m&&e.deleteRenderbuffer(m),g&&e.deleteRenderbuffer(g),u=null,f=null,m=null,g=null,l=null,o=null,p=null,s=null,ye.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){r=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){c=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return o!==null?o:l},this.getBinding=function(){return p},this.getFrame=function(){return v},this.getSession=function(){return s},this.setSession=async function(fe){if(s=fe,s!==null){s.addEventListener("select",j),s.addEventListener("selectstart",j),s.addEventListener("selectend",j),s.addEventListener("squeeze",j),s.addEventListener("squeezestart",j),s.addEventListener("squeezeend",j),s.addEventListener("end",N),s.addEventListener("inputsourceschange",q);const de=e.getContextAttributes();if(de.xrCompatible!==!0&&await e.makeXRCompatible(),s.renderState.layers===void 0){const Ee={antialias:de.antialias,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:r};l=new XRWebGLLayer(s,e,Ee),s.updateRenderState({baseLayer:l})}else if(e instanceof WebGLRenderingContext){const Ee={antialias:!0,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:r};l=new XRWebGLLayer(s,e,Ee),s.updateRenderState({layers:[l]})}else{h=de.antialias;let Ee=null;de.depth&&(w=256,de.stencil&&(w|=1024),x=de.stencil?33306:36096,Ee=de.stencil?35056:33190);const C={colorFormat:de.alpha?32856:32849,depthFormat:Ee,scaleFactor:r};p=new XRWebGLBinding(s,e),o=p.createProjectionLayer(C),u=e.createFramebuffer(),s.updateRenderState({layers:[o]}),h&&(f=e.createFramebuffer(),m=e.createRenderbuffer(),e.bindRenderbuffer(36161,m),e.renderbufferStorageMultisample(36161,4,32856,o.textureWidth,o.textureHeight),i.bindFramebuffer(36160,f),e.framebufferRenderbuffer(36160,36064,36161,m),e.bindRenderbuffer(36161,null),Ee!==null&&(g=e.createRenderbuffer(),e.bindRenderbuffer(36161,g),e.renderbufferStorageMultisample(36161,4,Ee,o.textureWidth,o.textureHeight),e.framebufferRenderbuffer(36160,x,36161,g),e.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}a=await s.requestReferenceSpace(c),ye.setContext(s),ye.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function q(fe){const de=s.inputSources;for(let Ee=0;Ee<M.length;Ee++)A.set(de[Ee],M[Ee]);for(let Ee=0;Ee<fe.removed.length;Ee++){const C=fe.removed[Ee],F=A.get(C);F&&(F.dispatchEvent({type:"disconnected",data:C}),A.delete(C))}for(let Ee=0;Ee<fe.added.length;Ee++){const C=fe.added[Ee],F=A.get(C);F&&F.dispatchEvent({type:"connected",data:C})}}const X=new Se,V=new Se;function $(fe,de,Ee){X.setFromMatrixPosition(de.matrixWorld),V.setFromMatrixPosition(Ee.matrixWorld);const C=X.distanceTo(V),F=de.projectionMatrix.elements,H=Ee.projectionMatrix.elements,ne=F[14]/(F[10]-1),re=F[14]/(F[10]+1),oe=(F[9]+1)/F[5],te=(F[9]-1)/F[5],xe=(F[8]-1)/F[0],Q=(H[8]+1)/H[0],ge=ne*xe,he=ne*Q,G=C/(-xe+Q),W=G*-xe;de.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(W),fe.translateZ(G),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert();const ve=ne+G,we=re+G,Re=ge-W,Ge=he+(C-W),Pe=oe*re/we*ve,Ze=te*re/we*ve;fe.projectionMatrix.makePerspective(Re,Ge,Pe,Ze,ve,we)}function K(fe,de){de===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(de.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(s===null)return;P.near=I.near=E.near=fe.near,P.far=I.far=E.far=fe.far,(D!==P.near||O!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),D=P.near,O=P.far);const de=fe.parent,Ee=P.cameras;K(P,de);for(let F=0;F<Ee.length;F++)K(Ee[F],de);P.matrixWorld.decompose(P.position,P.quaternion,P.scale),fe.position.copy(P.position),fe.quaternion.copy(P.quaternion),fe.scale.copy(P.scale),fe.matrix.copy(P.matrix),fe.matrixWorld.copy(P.matrixWorld);const C=fe.children;for(let F=0,H=C.length;F<H;F++)C[F].updateMatrixWorld(!0);Ee.length===2?$(P,E,I):P.projectionMatrix.copy(E.projectionMatrix)},this.getCamera=function(){return P},this.getFoveation=function(){if(o!==null)return o.fixedFoveation;if(l!==null)return l.fixedFoveation},this.setFoveation=function(fe){o!==null&&(o.fixedFoveation=fe),l!==null&&l.fixedFoveation!==void 0&&(l.fixedFoveation=fe)};let _e=null;function me(fe,de){if(d=de.getViewerPose(a),v=de,d!==null){const C=d.views;l!==null&&i.bindXRFramebuffer(l.framebuffer);let F=!1;C.length!==P.cameras.length&&(P.cameras.length=0,F=!0);for(let H=0;H<C.length;H++){const ne=C[H];let re=null;if(l!==null)re=l.getViewport(ne);else{const te=p.getViewSubImage(o,ne);i.bindXRFramebuffer(u),te.depthStencilTexture!==void 0&&e.framebufferTexture2D(36160,x,3553,te.depthStencilTexture,0),e.framebufferTexture2D(36160,36064,3553,te.colorTexture,0),re=te.viewport}const oe=R[H];oe.matrix.fromArray(ne.transform.matrix),oe.projectionMatrix.fromArray(ne.projectionMatrix),oe.viewport.set(re.x,re.y,re.width,re.height),H===0&&P.matrix.copy(oe.matrix),F===!0&&P.cameras.push(oe)}h&&(i.bindXRFramebuffer(f),w!==null&&e.clear(w))}const Ee=s.inputSources;for(let C=0;C<M.length;C++){const F=M[C],H=Ee[C];F.update(H,de,a)}if(_e&&_e(fe,de),h){const C=o.textureWidth,F=o.textureHeight;i.bindFramebuffer(36008,f),i.bindFramebuffer(36009,u),e.invalidateFramebuffer(36008,[x]),e.invalidateFramebuffer(36009,[x]),e.blitFramebuffer(0,0,C,F,0,0,C,F,16384,9728),e.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,f)}v=null}const ye=new rc;ye.setAnimationLoop(me),this.setAnimationLoop=function(fe){_e=fe},this.dispose=function(){}}}function Wv(b){function t(g,v){g.fogColor.value.copy(v.color),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function e(g,v,x,w,M){v.isMeshBasicMaterial?n(g,v):v.isMeshLambertMaterial?(n(g,v),c(g,v)):v.isMeshToonMaterial?(n(g,v),p(g,v)):v.isMeshPhongMaterial?(n(g,v),d(g,v)):v.isMeshStandardMaterial?(n(g,v),v.isMeshPhysicalMaterial?o(g,v,M):u(g,v)):v.isMeshMatcapMaterial?(n(g,v),l(g,v)):v.isMeshDepthMaterial?(n(g,v),h(g,v)):v.isMeshDistanceMaterial?(n(g,v),f(g,v)):v.isMeshNormalMaterial?(n(g,v),m(g,v)):v.isLineBasicMaterial?(i(g,v),v.isLineDashedMaterial&&s(g,v)):v.isPointsMaterial?r(g,v,x,w):v.isSpriteMaterial?a(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function n(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.specularMap&&(g.specularMap.value=v.specularMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const x=b.get(v).envMap;if(x){g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio;const A=b.get(x).__maxMipLevel;A!==void 0&&(g.maxMipLevel.value=A)}v.lightMap&&(g.lightMap.value=v.lightMap,g.lightMapIntensity.value=v.lightMapIntensity),v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity);let w;v.map?w=v.map:v.specularMap?w=v.specularMap:v.displacementMap?w=v.displacementMap:v.normalMap?w=v.normalMap:v.bumpMap?w=v.bumpMap:v.roughnessMap?w=v.roughnessMap:v.metalnessMap?w=v.metalnessMap:v.alphaMap?w=v.alphaMap:v.emissiveMap?w=v.emissiveMap:v.clearcoatMap?w=v.clearcoatMap:v.clearcoatNormalMap?w=v.clearcoatNormalMap:v.clearcoatRoughnessMap?w=v.clearcoatRoughnessMap:v.specularIntensityMap?w=v.specularIntensityMap:v.specularColorMap?w=v.specularColorMap:v.transmissionMap?w=v.transmissionMap:v.thicknessMap?w=v.thicknessMap:v.sheenColorMap?w=v.sheenColorMap:v.sheenRoughnessMap&&(w=v.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix));let M;v.aoMap?M=v.aoMap:v.lightMap&&(M=v.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uv2Transform.value.copy(M.matrix))}function i(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity}function s(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function r(g,v,x,w){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*x,g.scale.value=w*.5,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let M;v.map?M=v.map:v.alphaMap&&(M=v.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uvTransform.value.copy(M.matrix))}function a(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let x;v.map?x=v.map:v.alphaMap&&(x=v.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}function c(g,v){v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap)}function d(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===or&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===or&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function p(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===or&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===or&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function u(g,v){g.roughness.value=v.roughness,g.metalness.value=v.metalness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===or&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===or&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),b.get(v).envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function o(g,v,x){u(g,v),g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),g.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===or&&g.clearcoatNormalScale.value.negate())),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap)}function l(g,v){v.matcap&&(g.matcap.value=v.matcap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===or&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===or&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function h(g,v){v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function f(g,v){v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),g.referencePosition.value.copy(v.referencePosition),g.nearDistance.value=v.nearDistance,g.farDistance.value=v.farDistance}function m(g,v){v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===or&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===or&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:e}}function qv(){const b=Xs("canvas");return b.style.display="block",b}function Bt(b={}){const t=b.canvas!==void 0?b.canvas:qv(),e=b.context!==void 0?b.context:null,n=b.alpha!==void 0?b.alpha:!1,i=b.depth!==void 0?b.depth:!0,s=b.stencil!==void 0?b.stencil:!0,r=b.antialias!==void 0?b.antialias:!1,a=b.premultipliedAlpha!==void 0?b.premultipliedAlpha:!0,c=b.preserveDrawingBuffer!==void 0?b.preserveDrawingBuffer:!1,d=b.powerPreference!==void 0?b.powerPreference:"default",p=b.failIfMajorPerformanceCaveat!==void 0?b.failIfMajorPerformanceCaveat:!1;let u=null,o=null;const l=[],h=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=gr,this.physicallyCorrectLights=!1,this.toneMapping=Fn,this.toneMappingExposure=1;const f=this;let m=!1,g=0,v=0,x=null,w=-1,M=null;const A=new Vt,E=new Vt;let I=null,R=t.width,P=t.height,D=1,O=null,j=null;const N=new Vt(0,0,R,P),q=new Vt(0,0,R,P);let X=!1;const V=[],$=new fo;let K=!1,_e=!1,me=null;const ye=new ft,fe=new Se,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return x===null?D:1}let C=e;function F(be,ke){for(let We=0;We<be.length;We++){const Ue=be[We],Xe=t.getContext(Ue,ke);if(Xe!==null)return Xe}return null}try{const be={alpha:n,depth:i,stencil:s,antialias:r,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:p};if(t.addEventListener("webglcontextlost",Y,!1),t.addEventListener("webglcontextrestored",z,!1),C===null){const ke=["webgl2","webgl","experimental-webgl"];if(f.isWebGL1Renderer===!0&&ke.shift(),C=F(ke,be),C===null)throw F(ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}C.getShaderPrecisionFormat===void 0&&(C.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(be){throw console.error("THREE.WebGLRenderer: "+be.message),be}let H,ne,re,oe,te,xe,Q,ge,he,G,W,ve,we,Re,Ge,Pe,Ze,Je,Ce,le,De,se,Ne;function ie(){H=new my(C),ne=new ay(C,H,b),H.init(ne),se=new zv(C,H,ne),re=new Bv(C,H,ne),V[0]=1029,oe=new vy(C),te=new Cv,xe=new Gv(C,H,re,te,ne,se,oe),Q=new uy(f),ge=new py(f),he=new Pp(C,ne),Ne=new sy(C,H,he,ne),G=new gy(C,he,oe,Ne),W=new wy(C,G,he,oe),Ce=new xy(C,ne,xe),Pe=new ly(te),ve=new Lv(f,Q,ge,H,ne,Ne,Pe),we=new Wv(te),Re=new Pv(te),Ge=new Nv(H,ne),Je=new iy(f,Q,re,W,a),Ze=new Nc(f,W,ne),le=new oy(C,H,oe,ne),De=new yy(C,H,oe,ne),oe.programs=ve.programs,f.capabilities=ne,f.extensions=H,f.properties=te,f.renderLists=Re,f.shadowMap=Ze,f.state=re,f.info=oe}ie();const U=new Hv(f,C);this.xr=U,this.getContext=function(){return C},this.getContextAttributes=function(){return C.getContextAttributes()},this.forceContextLoss=function(){const be=H.get("WEBGL_lose_context");be&&be.loseContext()},this.forceContextRestore=function(){const be=H.get("WEBGL_lose_context");be&&be.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(be){be!==void 0&&(D=be,this.setSize(R,P,!1))},this.getSize=function(be){return be.set(R,P)},this.setSize=function(be,ke,We){if(U.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=be,P=ke,t.width=Math.floor(be*D),t.height=Math.floor(ke*D),We!==!1&&(t.style.width=be+"px",t.style.height=ke+"px"),this.setViewport(0,0,be,ke)},this.getDrawingBufferSize=function(be){return be.set(R*D,P*D).floor()},this.setDrawingBufferSize=function(be,ke,We){R=be,P=ke,D=We,t.width=Math.floor(be*We),t.height=Math.floor(ke*We),this.setViewport(0,0,be,ke)},this.getCurrentViewport=function(be){return be.copy(A)},this.getViewport=function(be){return be.copy(N)},this.setViewport=function(be,ke,We,Ue){be.isVector4?N.set(be.x,be.y,be.z,be.w):N.set(be,ke,We,Ue),re.viewport(A.copy(N).multiplyScalar(D).floor())},this.getScissor=function(be){return be.copy(q)},this.setScissor=function(be,ke,We,Ue){be.isVector4?q.set(be.x,be.y,be.z,be.w):q.set(be,ke,We,Ue),re.scissor(E.copy(q).multiplyScalar(D).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(be){re.setScissorTest(X=be)},this.setOpaqueSort=function(be){O=be},this.setTransparentSort=function(be){j=be},this.getClearColor=function(be){return be.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(be,ke,We){let Ue=0;(be===void 0||be)&&(Ue|=16384),(ke===void 0||ke)&&(Ue|=256),(We===void 0||We)&&(Ue|=1024),C.clear(Ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Y,!1),t.removeEventListener("webglcontextrestored",z,!1),Re.dispose(),Ge.dispose(),te.dispose(),Q.dispose(),ge.dispose(),W.dispose(),Ne.dispose(),U.dispose(),U.removeEventListener("sessionstart",Me),U.removeEventListener("sessionend",Qe),me&&(me.dispose(),me=null),rt.stop()};function Y(be){be.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function z(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const be=oe.autoReset,ke=Ze.enabled,We=Ze.autoUpdate,Ue=Ze.needsUpdate,Xe=Ze.type;ie(),oe.autoReset=be,Ze.enabled=ke,Ze.autoUpdate=We,Ze.needsUpdate=Ue,Ze.type=Xe}function J(be){const ke=be.target;ke.removeEventListener("dispose",J),ce(ke)}function ce(be){Ae(be),te.remove(be)}function Ae(be){const ke=te.get(be).programs;ke!==void 0&&ke.forEach(function(We){ve.releaseProgram(We)})}this.renderBufferDirect=function(be,ke,We,Ue,Xe,vt){ke===null&&(ke=de);const pt=Xe.isMesh&&Xe.matrixWorld.determinant()<0,ht=Br(be,ke,We,Ue,Xe);re.setMaterial(Ue,pt);let ue=We.index;const je=We.attributes.position;if(ue===null){if(je===void 0||je.count===0)return}else if(ue.count===0)return;let qe=1;Ue.wireframe===!0&&(ue=G.getWireframeAttribute(We),qe=2),Ne.setup(Xe,Ue,ht,We,ue);let Fe,$e=le;ue!==null&&(Fe=he.get(ue),$e=De,$e.setIndex(Fe));const ze=ue!==null?ue.count:je.count,st=We.drawRange.start*qe,wt=We.drawRange.count*qe,mt=vt!==null?vt.start*qe:0,_t=vt!==null?vt.count*qe:1/0,tt=Math.max(st,mt),Rt=Math.min(ze,st+wt,mt+_t)-1,ut=Math.max(0,Rt-tt+1);if(ut!==0){if(Xe.isMesh)Ue.wireframe===!0?(re.setLineWidth(Ue.wireframeLinewidth*Ee()),$e.setMode(1)):$e.setMode(4);else if(Xe.isLine){let jt=Ue.linewidth;jt===void 0&&(jt=1),re.setLineWidth(jt*Ee()),Xe.isLineSegments?$e.setMode(1):Xe.isLineLoop?$e.setMode(2):$e.setMode(3)}else Xe.isPoints?$e.setMode(0):Xe.isSprite&&$e.setMode(4);if(Xe.isInstancedMesh)$e.renderInstances(tt,ut,Xe.count);else if(We.isInstancedBufferGeometry){const jt=Math.min(We.instanceCount,We._maxInstanceCount);$e.renderInstances(tt,ut,jt)}else $e.render(tt,ut)}},this.compile=function(be,ke){o=Ge.get(be),o.init(),h.push(o),be.traverseVisible(function(We){We.isLight&&We.layers.test(ke.layers)&&(o.pushLight(We),We.castShadow&&o.pushShadow(We))}),o.setupLights(f.physicallyCorrectLights),be.traverse(function(We){const Ue=We.material;if(Ue)if(Array.isArray(Ue))for(let Xe=0;Xe<Ue.length;Xe++){const vt=Ue[Xe];sr(vt,be,We)}else sr(Ue,be,We)}),h.pop(),o=null};let Ie=null;function Ve(be){Ie&&Ie(be)}function Me(){rt.stop()}function Qe(){rt.start()}const rt=new rc;rt.setAnimationLoop(Ve),typeof window!="undefined"&&rt.setContext(window),this.setAnimationLoop=function(be){Ie=be,U.setAnimationLoop(be),be===null?rt.stop():rt.start()},U.addEventListener("sessionstart",Me),U.addEventListener("sessionend",Qe),this.render=function(be,ke){if(ke!==void 0&&ke.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;be.autoUpdate===!0&&be.updateMatrixWorld(),ke.parent===null&&ke.updateMatrixWorld(),U.enabled===!0&&U.isPresenting===!0&&(U.cameraAutoUpdate===!0&&U.updateCamera(ke),ke=U.getCamera()),be.isScene===!0&&be.onBeforeRender(f,be,ke,x),o=Ge.get(be,h.length),o.init(),h.push(o),ye.multiplyMatrices(ke.projectionMatrix,ke.matrixWorldInverse),$.setFromProjectionMatrix(ye),_e=this.localClippingEnabled,K=Pe.init(this.clippingPlanes,_e,ke),u=Re.get(be,l.length),u.init(),l.push(u),xt(be,ke,0,f.sortObjects),u.finish(),f.sortObjects===!0&&u.sort(O,j),K===!0&&Pe.beginShadows();const We=o.state.shadowsArray;if(Ze.render(We,be,ke),K===!0&&Pe.endShadows(),this.info.autoReset===!0&&this.info.reset(),Je.render(u,be),o.setupLights(f.physicallyCorrectLights),ke.isArrayCamera){const Ue=ke.cameras;for(let Xe=0,vt=Ue.length;Xe<vt;Xe++){const pt=Ue[Xe];bt(u,be,pt,pt.viewport)}}else bt(u,be,ke);x!==null&&(xe.updateMultisampleRenderTarget(x),xe.updateRenderTargetMipmap(x)),be.isScene===!0&&be.onAfterRender(f,be,ke),re.buffers.depth.setTest(!0),re.buffers.depth.setMask(!0),re.buffers.color.setMask(!0),re.setPolygonOffset(!1),Ne.resetDefaultState(),w=-1,M=null,h.pop(),h.length>0?o=h[h.length-1]:o=null,l.pop(),l.length>0?u=l[l.length-1]:u=null};function xt(be,ke,We,Ue){if(be.visible===!1)return;if(be.layers.test(ke.layers)){if(be.isGroup)We=be.renderOrder;else if(be.isLOD)be.autoUpdate===!0&&be.update(ke);else if(be.isLight)o.pushLight(be),be.castShadow&&o.pushShadow(be);else if(be.isSprite){if(!be.frustumCulled||$.intersectsSprite(be)){Ue&&fe.setFromMatrixPosition(be.matrixWorld).applyMatrix4(ye);const pt=W.update(be),ht=be.material;ht.visible&&u.push(be,pt,ht,We,fe.z,null)}}else if((be.isMesh||be.isLine||be.isPoints)&&(be.isSkinnedMesh&&be.skeleton.frame!==oe.render.frame&&(be.skeleton.update(),be.skeleton.frame=oe.render.frame),!be.frustumCulled||$.intersectsObject(be))){Ue&&fe.setFromMatrixPosition(be.matrixWorld).applyMatrix4(ye);const pt=W.update(be),ht=be.material;if(Array.isArray(ht)){const ue=pt.groups;for(let je=0,qe=ue.length;je<qe;je++){const Fe=ue[je],$e=ht[Fe.materialIndex];$e&&$e.visible&&u.push(be,pt,$e,We,fe.z,Fe)}}else ht.visible&&u.push(be,pt,ht,We,fe.z,null)}}const vt=be.children;for(let pt=0,ht=vt.length;pt<ht;pt++)xt(vt[pt],ke,We,Ue)}function bt(be,ke,We,Ue){const Xe=be.opaque,vt=be.transmissive,pt=be.transparent;o.setupLightsView(We),vt.length>0&&ct(Xe,ke,We),Ue&&re.viewport(A.copy(Ue)),Xe.length>0&&yt(Xe,ke,We),vt.length>0&&yt(vt,ke,We),pt.length>0&&yt(pt,ke,We)}function ct(be,ke,We){if(me===null){const pt=r===!0&&ne.isWebGL2===!0?Bu:Wr;me=new pt(1024,1024,{generateMipmaps:!0,type:se.convert(hi)!==null?hi:mn,minFilter:ci,magFilter:ar,wrapS:Mr,wrapT:Mr})}const Ue=f.getRenderTarget();f.setRenderTarget(me),f.clear();const Xe=f.toneMapping;f.toneMapping=Fn,yt(be,ke,We),f.toneMapping=Xe,xe.updateMultisampleRenderTarget(me),xe.updateRenderTargetMipmap(me),f.setRenderTarget(Ue)}function yt(be,ke,We){const Ue=ke.isScene===!0?ke.overrideMaterial:null;for(let Xe=0,vt=be.length;Xe<vt;Xe++){const pt=be[Xe],ht=pt.object,ue=pt.geometry,je=Ue===null?pt.material:Ue,qe=pt.group;ht.layers.test(We.layers)&&Mt(ht,ke,We,ue,je,qe)}}function Mt(be,ke,We,Ue,Xe,vt){be.onBeforeRender(f,ke,We,Ue,Xe,vt),be.modelViewMatrix.multiplyMatrices(We.matrixWorldInverse,be.matrixWorld),be.normalMatrix.getNormalMatrix(be.modelViewMatrix),Xe.onBeforeRender(f,ke,We,Ue,be,vt),Xe.transparent===!0&&Xe.side===Nn?(Xe.side=or,Xe.needsUpdate=!0,f.renderBufferDirect(We,ke,Ue,Xe,be,vt),Xe.side=ai,Xe.needsUpdate=!0,f.renderBufferDirect(We,ke,Ue,Xe,be,vt),Xe.side=Nn):f.renderBufferDirect(We,ke,Ue,Xe,be,vt),be.onAfterRender(f,ke,We,Ue,Xe,vt)}function sr(be,ke,We){ke.isScene!==!0&&(ke=de);const Ue=te.get(be),Xe=o.state.lights,vt=o.state.shadowsArray,pt=Xe.state.version,ht=ve.getParameters(be,Xe.state,vt,ke,We),ue=ve.getProgramCacheKey(ht);let je=Ue.programs;Ue.environment=be.isMeshStandardMaterial?ke.environment:null,Ue.fog=ke.fog,Ue.envMap=(be.isMeshStandardMaterial?ge:Q).get(be.envMap||Ue.environment),je===void 0&&(be.addEventListener("dispose",J),je=new Map,Ue.programs=je);let qe=je.get(ue);if(qe!==void 0){if(Ue.currentProgram===qe&&Ue.lightsStateVersion===pt)return Dr(be,ht),qe}else ht.uniforms=ve.getUniforms(be),be.onBuild(We,ht,f),be.onBeforeCompile(ht,f),qe=ve.acquireProgram(ht,ue),je.set(ue,qe),Ue.uniforms=ht.uniforms;const Fe=Ue.uniforms;(!be.isShaderMaterial&&!be.isRawShaderMaterial||be.clipping===!0)&&(Fe.clippingPlanes=Pe.uniform),Dr(be,ht),Ue.needsLights=Jr(be),Ue.lightsStateVersion=pt,Ue.needsLights&&(Fe.ambientLightColor.value=Xe.state.ambient,Fe.lightProbe.value=Xe.state.probe,Fe.directionalLights.value=Xe.state.directional,Fe.directionalLightShadows.value=Xe.state.directionalShadow,Fe.spotLights.value=Xe.state.spot,Fe.spotLightShadows.value=Xe.state.spotShadow,Fe.rectAreaLights.value=Xe.state.rectArea,Fe.ltc_1.value=Xe.state.rectAreaLTC1,Fe.ltc_2.value=Xe.state.rectAreaLTC2,Fe.pointLights.value=Xe.state.point,Fe.pointLightShadows.value=Xe.state.pointShadow,Fe.hemisphereLights.value=Xe.state.hemi,Fe.directionalShadowMap.value=Xe.state.directionalShadowMap,Fe.directionalShadowMatrix.value=Xe.state.directionalShadowMatrix,Fe.spotShadowMap.value=Xe.state.spotShadowMap,Fe.spotShadowMatrix.value=Xe.state.spotShadowMatrix,Fe.pointShadowMap.value=Xe.state.pointShadowMap,Fe.pointShadowMatrix.value=Xe.state.pointShadowMatrix);const $e=qe.getUniforms(),ze=An.seqWithValue($e.seq,Fe);return Ue.currentProgram=qe,Ue.uniformsList=ze,qe}function Dr(be,ke){const We=te.get(be);We.outputEncoding=ke.outputEncoding,We.instancing=ke.instancing,We.skinning=ke.skinning,We.morphTargets=ke.morphTargets,We.morphNormals=ke.morphNormals,We.morphTargetsCount=ke.morphTargetsCount,We.numClippingPlanes=ke.numClippingPlanes,We.numIntersection=ke.numClipIntersection,We.vertexAlphas=ke.vertexAlphas,We.vertexTangents=ke.vertexTangents}function Br(be,ke,We,Ue,Xe){ke.isScene!==!0&&(ke=de),xe.resetTextureUnits();const vt=ke.fog,pt=Ue.isMeshStandardMaterial?ke.environment:null,ht=x===null?f.outputEncoding:x.texture.encoding,ue=(Ue.isMeshStandardMaterial?ge:Q).get(Ue.envMap||pt),je=Ue.vertexColors===!0&&!!We.attributes.color&&We.attributes.color.itemSize===4,qe=!!Ue.normalMap&&!!We.attributes.tangent,Fe=!!We.morphAttributes.position,$e=!!We.morphAttributes.normal,ze=We.morphAttributes.position?We.morphAttributes.position.length:0,st=te.get(Ue),wt=o.state.lights;if(K===!0&&(_e===!0||be!==M)){const hr=be===M&&Ue.id===w;Pe.setState(Ue,be,hr)}let mt=!1;Ue.version===st.__version?(st.needsLights&&st.lightsStateVersion!==wt.state.version||st.outputEncoding!==ht||Xe.isInstancedMesh&&st.instancing===!1||!Xe.isInstancedMesh&&st.instancing===!0||Xe.isSkinnedMesh&&st.skinning===!1||!Xe.isSkinnedMesh&&st.skinning===!0||st.envMap!==ue||Ue.fog&&st.fog!==vt||st.numClippingPlanes!==void 0&&(st.numClippingPlanes!==Pe.numPlanes||st.numIntersection!==Pe.numIntersection)||st.vertexAlphas!==je||st.vertexTangents!==qe||st.morphTargets!==Fe||st.morphNormals!==$e||ne.isWebGL2===!0&&st.morphTargetsCount!==ze)&&(mt=!0):(mt=!0,st.__version=Ue.version);let _t=st.currentProgram;mt===!0&&(_t=sr(Ue,ke,Xe));let tt=!1,Rt=!1,ut=!1;const jt=_t.getUniforms(),Or=st.uniforms;if(re.useProgram(_t.program)&&(tt=!0,Rt=!0,ut=!0),Ue.id!==w&&(w=Ue.id,Rt=!0),tt||M!==be){if(jt.setValue(C,"projectionMatrix",be.projectionMatrix),ne.logarithmicDepthBuffer&&jt.setValue(C,"logDepthBufFC",2/(Math.log(be.far+1)/Math.LN2)),M!==be&&(M=be,Rt=!0,ut=!0),Ue.isShaderMaterial||Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshStandardMaterial||Ue.envMap){const hr=jt.map.cameraPosition;hr!==void 0&&hr.setValue(C,fe.setFromMatrixPosition(be.matrixWorld))}(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial)&&jt.setValue(C,"isOrthographic",be.isOrthographicCamera===!0),(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial||Ue.isShadowMaterial||Xe.isSkinnedMesh)&&jt.setValue(C,"viewMatrix",be.matrixWorldInverse)}if(Xe.isSkinnedMesh){jt.setOptional(C,Xe,"bindMatrix"),jt.setOptional(C,Xe,"bindMatrixInverse");const hr=Xe.skeleton;hr&&(ne.floatVertexTextures?(hr.boneTexture===null&&hr.computeBoneTexture(),jt.setValue(C,"boneTexture",hr.boneTexture,xe),jt.setValue(C,"boneTextureSize",hr.boneTextureSize)):jt.setOptional(C,hr,"boneMatrices"))}return!!We&&(We.morphAttributes.position!==void 0||We.morphAttributes.normal!==void 0)&&Ce.update(Xe,We,Ue,_t),(Rt||st.receiveShadow!==Xe.receiveShadow)&&(st.receiveShadow=Xe.receiveShadow,jt.setValue(C,"receiveShadow",Xe.receiveShadow)),Rt&&(jt.setValue(C,"toneMappingExposure",f.toneMappingExposure),st.needsLights&&Sr(Or,ut),vt&&Ue.fog&&we.refreshFogUniforms(Or,vt),we.refreshMaterialUniforms(Or,Ue,D,P,me),An.upload(C,st.uniformsList,Or,xe)),Ue.isShaderMaterial&&Ue.uniformsNeedUpdate===!0&&(An.upload(C,st.uniformsList,Or,xe),Ue.uniformsNeedUpdate=!1),Ue.isSpriteMaterial&&jt.setValue(C,"center",Xe.center),jt.setValue(C,"modelViewMatrix",Xe.modelViewMatrix),jt.setValue(C,"normalMatrix",Xe.normalMatrix),jt.setValue(C,"modelMatrix",Xe.matrixWorld),_t}function Sr(be,ke){be.ambientLightColor.needsUpdate=ke,be.lightProbe.needsUpdate=ke,be.directionalLights.needsUpdate=ke,be.directionalLightShadows.needsUpdate=ke,be.pointLights.needsUpdate=ke,be.pointLightShadows.needsUpdate=ke,be.spotLights.needsUpdate=ke,be.spotLightShadows.needsUpdate=ke,be.rectAreaLights.needsUpdate=ke,be.hemisphereLights.needsUpdate=ke}function Jr(be){return be.isMeshLambertMaterial||be.isMeshToonMaterial||be.isMeshPhongMaterial||be.isMeshStandardMaterial||be.isShadowMaterial||be.isShaderMaterial&&be.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return x},this.setRenderTarget=function(be,ke=0,We=0){x=be,g=ke,v=We,be&&te.get(be).__webglFramebuffer===void 0&&xe.setupRenderTarget(be);let Ue=null,Xe=!1,vt=!1;if(be){const ht=be.texture;(ht.isDataTexture3D||ht.isDataTexture2DArray)&&(vt=!0);const ue=te.get(be).__webglFramebuffer;be.isWebGLCubeRenderTarget?(Ue=ue[ke],Xe=!0):be.isWebGLMultisampleRenderTarget?Ue=te.get(be).__webglMultisampledFramebuffer:Ue=ue,A.copy(be.viewport),E.copy(be.scissor),I=be.scissorTest}else A.copy(N).multiplyScalar(D).floor(),E.copy(q).multiplyScalar(D).floor(),I=X;if(re.bindFramebuffer(36160,Ue)&&ne.drawBuffers){let ht=!1;if(be)if(be.isWebGLMultipleRenderTargets){const ue=be.texture;if(V.length!==ue.length||V[0]!==36064){for(let je=0,qe=ue.length;je<qe;je++)V[je]=36064+je;V.length=ue.length,ht=!0}}else(V.length!==1||V[0]!==36064)&&(V[0]=36064,V.length=1,ht=!0);else(V.length!==1||V[0]!==1029)&&(V[0]=1029,V.length=1,ht=!0);ht&&(ne.isWebGL2?C.drawBuffers(V):H.get("WEBGL_draw_buffers").drawBuffersWEBGL(V))}if(re.viewport(A),re.scissor(E),re.setScissorTest(I),Xe){const ht=te.get(be.texture);C.framebufferTexture2D(36160,36064,34069+ke,ht.__webglTexture,We)}else if(vt){const ht=te.get(be.texture),ue=ke||0;C.framebufferTextureLayer(36160,36064,ht.__webglTexture,We||0,ue)}w=-1},this.readRenderTargetPixels=function(be,ke,We,Ue,Xe,vt,pt){if(!(be&&be.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ht=te.get(be).__webglFramebuffer;if(be.isWebGLCubeRenderTarget&&pt!==void 0&&(ht=ht[pt]),ht){re.bindFramebuffer(36160,ht);try{const ue=be.texture,je=ue.format,qe=ue.type;if(je!==mr&&se.convert(je)!==C.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Fe=qe===hi&&(H.has("EXT_color_buffer_half_float")||ne.isWebGL2&&H.has("EXT_color_buffer_float"));if(qe!==mn&&se.convert(qe)!==C.getParameter(35738)&&!(qe===$r&&(ne.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float")))&&!Fe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}C.checkFramebufferStatus(36160)===36053?ke>=0&&ke<=be.width-Ue&&We>=0&&We<=be.height-Xe&&C.readPixels(ke,We,Ue,Xe,se.convert(je),se.convert(qe),vt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const ue=x!==null?te.get(x).__webglFramebuffer:null;re.bindFramebuffer(36160,ue)}}},this.copyFramebufferToTexture=function(be,ke,We=0){const Ue=Math.pow(2,-We),Xe=Math.floor(ke.image.width*Ue),vt=Math.floor(ke.image.height*Ue);let pt=se.convert(ke.format);ne.isWebGL2&&(pt===6407&&(pt=32849),pt===6408&&(pt=32856)),xe.setTexture2D(ke,0),C.copyTexImage2D(3553,We,pt,be.x,be.y,Xe,vt,0),re.unbindTexture()},this.copyTextureToTexture=function(be,ke,We,Ue=0){const Xe=ke.image.width,vt=ke.image.height,pt=se.convert(We.format),ht=se.convert(We.type);xe.setTexture2D(We,0),C.pixelStorei(37440,We.flipY),C.pixelStorei(37441,We.premultiplyAlpha),C.pixelStorei(3317,We.unpackAlignment),ke.isDataTexture?C.texSubImage2D(3553,Ue,be.x,be.y,Xe,vt,pt,ht,ke.image.data):ke.isCompressedTexture?C.compressedTexSubImage2D(3553,Ue,be.x,be.y,ke.mipmaps[0].width,ke.mipmaps[0].height,pt,ke.mipmaps[0].data):C.texSubImage2D(3553,Ue,be.x,be.y,pt,ht,ke.image),Ue===0&&We.generateMipmaps&&C.generateMipmap(3553),re.unbindTexture()},this.copyTextureToTexture3D=function(be,ke,We,Ue,Xe=0){if(f.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const vt=be.max.x-be.min.x+1,pt=be.max.y-be.min.y+1,ht=be.max.z-be.min.z+1,ue=se.convert(Ue.format),je=se.convert(Ue.type);let qe;if(Ue.isDataTexture3D)xe.setTexture3D(Ue,0),qe=32879;else if(Ue.isDataTexture2DArray)xe.setTexture2DArray(Ue,0),qe=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}C.pixelStorei(37440,Ue.flipY),C.pixelStorei(37441,Ue.premultiplyAlpha),C.pixelStorei(3317,Ue.unpackAlignment);const Fe=C.getParameter(3314),$e=C.getParameter(32878),ze=C.getParameter(3316),st=C.getParameter(3315),wt=C.getParameter(32877),mt=We.isCompressedTexture?We.mipmaps[0]:We.image;C.pixelStorei(3314,mt.width),C.pixelStorei(32878,mt.height),C.pixelStorei(3316,be.min.x),C.pixelStorei(3315,be.min.y),C.pixelStorei(32877,be.min.z),We.isDataTexture||We.isDataTexture3D?C.texSubImage3D(qe,Xe,ke.x,ke.y,ke.z,vt,pt,ht,ue,je,mt.data):We.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),C.compressedTexSubImage3D(qe,Xe,ke.x,ke.y,ke.z,vt,pt,ht,ue,mt.data)):C.texSubImage3D(qe,Xe,ke.x,ke.y,ke.z,vt,pt,ht,ue,je,mt),C.pixelStorei(3314,Fe),C.pixelStorei(32878,$e),C.pixelStorei(3316,ze),C.pixelStorei(3315,st),C.pixelStorei(32877,wt),Xe===0&&Ue.generateMipmaps&&C.generateMipmap(qe),re.unbindTexture()},this.initTexture=function(be){xe.setTexture2D(be,0),re.unbindTexture()},this.resetState=function(){g=0,v=0,x=null,re.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Bt.prototype.isWebGLRenderer=!0;class Xv extends Bt{}Xv.prototype.isWebGL1Renderer=!0;class Uc extends Ot{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),e}}Uc.prototype.isScene=!0;class Ni{constructor(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=ss,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Cr()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,s=this.stride;i<s;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Ni.prototype.isInterleavedBuffer=!0;const rr=new Se;class Fi{constructor(t,e,n,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)rr.x=this.getX(e),rr.y=this.getY(e),rr.z=this.getZ(e),rr.applyMatrix4(t),this.setXYZ(e,rr.x,rr.y,rr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)rr.x=this.getX(e),rr.y=this.getY(e),rr.z=this.getZ(e),rr.applyNormalMatrix(t),this.setXYZ(e,rr.x,rr.y,rr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)rr.x=this.getX(e),rr.y=this.getY(e),rr.z=this.getZ(e),rr.transformDirection(t),this.setXYZ(e,rr.x,rr.y,rr.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return new tr(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Fi(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Fi.prototype.isInterleavedBufferAttribute=!0;class Bc extends ur{constructor(t){super();this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}Bc.prototype.isSpriteMaterial=!0;let Ui;const gs=new Se,Bi=new Se,Gi=new Se,zi=new Ke,ys=new Ke,Gc=new ft,vo=new Se,vs=new Se,bo=new Se,zc=new Ke,Ba=new Ke,Vc=new Ke;class Yv extends Ot{constructor(t){super();if(this.type="Sprite",Ui===void 0){Ui=new Ht;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ni(e,5);Ui.setIndex([0,1,2,0,2,3]),Ui.setAttribute("position",new Fi(n,3,0,!1)),Ui.setAttribute("uv",new Fi(n,2,3,!1))}this.geometry=Ui,this.material=t!==void 0?t:new Bc,this.center=new Ke(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bi.setFromMatrixScale(this.matrixWorld),Gc.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Gi.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Bi.multiplyScalar(-Gi.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const r=this.center;_o(vo.set(-.5,-.5,0),Gi,r,Bi,i,s),_o(vs.set(.5,-.5,0),Gi,r,Bi,i,s),_o(bo.set(.5,.5,0),Gi,r,Bi,i,s),zc.set(0,0),Ba.set(1,0),Vc.set(1,1);let a=t.ray.intersectTriangle(vo,vs,bo,!1,gs);if(a===null&&(_o(vs.set(-.5,.5,0),Gi,r,Bi,i,s),Ba.set(0,1),a=t.ray.intersectTriangle(vo,bo,vs,!1,gs),a===null))return;const c=t.ray.origin.distanceTo(gs);c<t.near||c>t.far||e.push({distance:c,point:gs.clone(),uv:ir.getUV(gs,vo,vs,bo,zc,Ba,Vc,new Ke),face:null,object:this})}copy(t){return super.copy(t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}Yv.prototype.isSprite=!0;function _o(b,t,e,n,i,s){zi.subVectors(b,e).addScalar(.5).multiply(n),i!==void 0?(ys.x=s*zi.x-i*zi.y,ys.y=i*zi.x+s*zi.y):ys.copy(zi),b.copy(t),b.x+=ys.x,b.y+=ys.y,b.applyMatrix4(Gc)}const Hc=new Se,Wc=new Vt,qc=new Vt,Zv=new Se,Xc=new ft;class Ga extends _r{constructor(t,e){super(t,e);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ft,this.bindMatrixInverse=new ft}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Vt,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;Wc.fromBufferAttribute(i.attributes.skinIndex,t),qc.fromBufferAttribute(i.attributes.skinWeight,t),Hc.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const r=qc.getComponent(s);if(r!==0){const a=Wc.getComponent(s);Xc.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(Zv.copy(Hc).applyMatrix4(Xc),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}Ga.prototype.isSkinnedMesh=!0;class za extends Ot{constructor(){super();this.type="Bone"}}za.prototype.isBone=!0;class Yc extends lr{constructor(t=null,e=1,n=1,i,s,r,a,c,d=ar,p=ar,u,o){super(null,r,a,c,d,p,i,s,u,o);this.image={data:t,width:e,height:n},this.magFilter=d,this.minFilter=p,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Yc.prototype.isDataTexture=!0;const Zc=new ft,Jv=new ft;class Va{constructor(t=[],e=[]){this.uuid=Cr(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new ft;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,r=t.length;s<r;s++){const a=t[s]?t[s].matrixWorld:Jv;Zc.multiplyMatrices(a,e[s]),Zc.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Va(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=ku(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Yc(e,t,t,mr,$r);return this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];if(i.name===t)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const s=t.bones[n];let r=e[s];r===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),r=new za),this.bones.push(r),this.boneInverses.push(new ft().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,s=e.length;i<s;i++){const r=e[i];t.bones.push(r.uuid);const a=n[i];t.boneInverses.push(a.toArray())}return t}}class Ha extends tr{constructor(t,e,n,i=1){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(t,e,n);this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Ha.prototype.isInstancedBufferAttribute=!0;const Jc=new ft,Kc=new ft,xo=[],bs=new _r;class Kv extends _r{constructor(t,e,n){super(t,e);this.instanceMatrix=new Ha(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(bs.geometry=this.geometry,bs.material=this.material,bs.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,Jc),Kc.multiplyMatrices(n,Jc),bs.matrixWorld=Kc,bs.raycast(t,xo);for(let r=0,a=xo.length;r<a;r++){const c=xo[r];c.instanceId=s,c.object=this,e.push(c)}xo.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Ha(new Float32Array(this.instanceMatrix.count*3),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Kv.prototype.isInstancedMesh=!0;class Xn extends ur{constructor(t){super();this.type="LineBasicMaterial",this.color=new at(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Xn.prototype.isLineBasicMaterial=!0;const Qc=new Se,$c=new Se,eh=new ft,Wa=new xi,wo=new Vn;class So extends Ot{constructor(t=new Ht,e=new Xn){super();this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[0];for(let i=1,s=e.count;i<s;i++)Qc.fromBufferAttribute(e,i-1),$c.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Qc.distanceTo($c);t.setAttribute("lineDistance",new $t(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Line.threshold,r=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),wo.copy(n.boundingSphere),wo.applyMatrix4(i),wo.radius+=s,t.ray.intersectsSphere(wo)===!1)return;eh.copy(i).invert(),Wa.copy(t.ray).applyMatrix4(eh);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,d=new Se,p=new Se,u=new Se,o=new Se,l=this.isLineSegments?2:1;if(n.isBufferGeometry){const h=n.index,m=n.attributes.position;if(h!==null){const g=Math.max(0,r.start),v=Math.min(h.count,r.start+r.count);for(let x=g,w=v-1;x<w;x+=l){const M=h.getX(x),A=h.getX(x+1);if(d.fromBufferAttribute(m,M),p.fromBufferAttribute(m,A),Wa.distanceSqToSegment(d,p,o,u)>c)continue;o.applyMatrix4(this.matrixWorld);const I=t.ray.origin.distanceTo(o);I<t.near||I>t.far||e.push({distance:I,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,r.start),v=Math.min(m.count,r.start+r.count);for(let x=g,w=v-1;x<w;x+=l){if(d.fromBufferAttribute(m,x),p.fromBufferAttribute(m,x+1),Wa.distanceSqToSegment(d,p,o,u)>c)continue;o.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(o);A<t.near||A>t.far||e.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}So.prototype.isLine=!0;const th=new Se,rh=new Se;class _s extends So{constructor(t,e){super(t,e);this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[];for(let i=0,s=e.count;i<s;i+=2)th.fromBufferAttribute(e,i),rh.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+th.distanceTo(rh);t.setAttribute("lineDistance",new $t(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}_s.prototype.isLineSegments=!0;class nh extends So{constructor(t,e){super(t,e);this.type="LineLoop"}}nh.prototype.isLineLoop=!0;class qa extends ur{constructor(t){super();this.type="PointsMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}qa.prototype.isPointsMaterial=!0;const ih=new ft,Xa=new xi,Mo=new Vn,To=new Se;class sh extends Ot{constructor(t=new Ht,e=new qa){super();this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Points.threshold,r=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Mo.copy(n.boundingSphere),Mo.applyMatrix4(i),Mo.radius+=s,t.ray.intersectsSphere(Mo)===!1)return;ih.copy(i).invert(),Xa.copy(t.ray).applyMatrix4(ih);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a;if(n.isBufferGeometry){const d=n.index,u=n.attributes.position;if(d!==null){const o=Math.max(0,r.start),l=Math.min(d.count,r.start+r.count);for(let h=o,f=l;h<f;h++){const m=d.getX(h);To.fromBufferAttribute(u,m),oh(To,m,c,i,t,e,this)}}else{const o=Math.max(0,r.start),l=Math.min(u.count,r.start+r.count);for(let h=o,f=l;h<f;h++)To.fromBufferAttribute(u,h),oh(To,h,c,i,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}sh.prototype.isPoints=!0;function oh(b,t,e,n,i,s,r){const a=Xa.distanceSqToPoint(b);if(a<e){const c=new Se;Xa.closestPointToPoint(b,c),c.applyMatrix4(n);const d=i.ray.origin.distanceTo(c);if(d<i.near||d>i.far)return;s.push({distance:d,distanceToRay:Math.sqrt(a),point:c,index:t,face:null,object:r})}}class Qv extends lr{constructor(t,e,n,i,s,r,a,c,d){super(t,e,n,i,s,r,a,c,d);this.format=a!==void 0?a:Un,this.minFilter=r!==void 0?r:Tr,this.magFilter=s!==void 0?s:Tr,this.generateMipmaps=!1;const p=this;function u(){p.needsUpdate=!0,t.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Qv.prototype.isVideoTexture=!0;class $v extends lr{constructor(t,e,n,i,s,r,a,c,d,p,u,o){super(null,r,a,c,d,p,i,s,u,o);this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}$v.prototype.isCompressedTexture=!0;class e0 extends lr{constructor(t,e,n,i,s,r,a,c,d){super(t,e,n,i,s,r,a,c,d);this.needsUpdate=!0}}e0.prototype.isCanvasTexture=!0;class t0 extends lr{constructor(t,e,n,i,s,r,a,c,d,p){if(p=p!==void 0?p:di,p!==di&&p!==ns)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===di&&(n=zs),n===void 0&&p===ns&&(n=rs);super(null,i,s,r,a,c,p,n,d);this.image={width:t,height:e},this.magFilter=a!==void 0?a:ar,this.minFilter=c!==void 0?c:ar,this.flipY=!1,this.generateMipmaps=!1}}t0.prototype.isDepthTexture=!0;new Se;new Se;new Se;new ir;class Ir{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),s=0;e.push(0);for(let r=1;r<=t;r++)n=this.getPoint(r/t),s+=n.distanceTo(i),e.push(s),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const s=n.length;let r;e?r=e:r=t*n[s-1];let a=0,c=s-1,d;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),d=n[i]-r,d<0)a=i+1;else if(d>0)c=i-1;else{c=i;break}if(i=c,n[i]===r)return i/(s-1);const p=n[i],o=n[i+1]-p,l=(r-p)/o;return(i+l)/(s-1)}getTangent(t,e){const n=1e-4;let i=t-n,s=t+n;i<0&&(i=0),s>1&&(s=1);const r=this.getPoint(i),a=this.getPoint(s),c=e||(r.isVector2?new Ke:new Se);return c.copy(a).sub(r).normalize(),c}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Se,i=[],s=[],r=[],a=new Se,c=new ft;for(let l=0;l<=t;l++){const h=l/t;i[l]=this.getTangentAt(h,new Se)}s[0]=new Se,r[0]=new Se;let d=Number.MAX_VALUE;const p=Math.abs(i[0].x),u=Math.abs(i[0].y),o=Math.abs(i[0].z);p<=d&&(d=p,n.set(1,0,0)),u<=d&&(d=u,n.set(0,1,0)),o<=d&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],a),r[0].crossVectors(i[0],s[0]);for(let l=1;l<=t;l++){if(s[l]=s[l-1].clone(),r[l]=r[l-1].clone(),a.crossVectors(i[l-1],i[l]),a.length()>Number.EPSILON){a.normalize();const h=Math.acos(br(i[l-1].dot(i[l]),-1,1));s[l].applyMatrix4(c.makeRotationAxis(a,h))}r[l].crossVectors(i[l],s[l])}if(e===!0){let l=Math.acos(br(s[0].dot(s[t]),-1,1));l/=t,i[0].dot(a.crossVectors(s[0],s[t]))>0&&(l=-l);for(let h=1;h<=t;h++)s[h].applyMatrix4(c.makeRotationAxis(i[h],l*h)),r[h].crossVectors(i[h],s[h])}return{tangents:i,normals:s,binormals:r}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Eo extends Ir{constructor(t=0,e=0,n=1,i=1,s=0,r=Math.PI*2,a=!1,c=0){super();this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=r,this.aClockwise=a,this.aRotation=c}getPoint(t,e){const n=e||new Ke,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(r?s=0:s=i),this.aClockwise===!0&&!r&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+t*s;let c=this.aX+this.xRadius*Math.cos(a),d=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const p=Math.cos(this.aRotation),u=Math.sin(this.aRotation),o=c-this.aX,l=d-this.aY;c=o*p-l*u+this.aX,d=o*u+l*p+this.aY}return n.set(c,d)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Eo.prototype.isEllipseCurve=!0;class ah extends Eo{constructor(t,e,n,i,s,r){super(t,e,n,n,i,s,r);this.type="ArcCurve"}}ah.prototype.isArcCurve=!0;function Ya(){let b=0,t=0,e=0,n=0;function i(s,r,a,c){b=s,t=a,e=-3*s+3*r-2*a-c,n=2*s-2*r+a+c}return{initCatmullRom:function(s,r,a,c,d){i(r,a,d*(a-s),d*(c-r))},initNonuniformCatmullRom:function(s,r,a,c,d,p,u){let o=(r-s)/d-(a-s)/(d+p)+(a-r)/p,l=(a-r)/p-(c-r)/(p+u)+(c-a)/u;o*=p,l*=p,i(r,a,o,l)},calc:function(s){const r=s*s,a=r*s;return b+t*s+e*r+n*a}}}const Ao=new Se,Za=new Ya,Ja=new Ya,Ka=new Ya;class lh extends Ir{constructor(t=[],e=!1,n="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new Se){const n=e,i=this.points,s=i.length,r=(s-(this.closed?0:1))*t;let a=Math.floor(r),c=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let d,p;this.closed||a>0?d=i[(a-1)%s]:(Ao.subVectors(i[0],i[1]).add(i[0]),d=Ao);const u=i[a%s],o=i[(a+1)%s];if(this.closed||a+2<s?p=i[(a+2)%s]:(Ao.subVectors(i[s-1],i[s-2]).add(i[s-1]),p=Ao),this.curveType==="centripetal"||this.curveType==="chordal"){const l=this.curveType==="chordal"?.5:.25;let h=Math.pow(d.distanceToSquared(u),l),f=Math.pow(u.distanceToSquared(o),l),m=Math.pow(o.distanceToSquared(p),l);f<1e-4&&(f=1),h<1e-4&&(h=f),m<1e-4&&(m=f),Za.initNonuniformCatmullRom(d.x,u.x,o.x,p.x,h,f,m),Ja.initNonuniformCatmullRom(d.y,u.y,o.y,p.y,h,f,m),Ka.initNonuniformCatmullRom(d.z,u.z,o.z,p.z,h,f,m)}else this.curveType==="catmullrom"&&(Za.initCatmullRom(d.x,u.x,o.x,p.x,this.tension),Ja.initCatmullRom(d.y,u.y,o.y,p.y,this.tension),Ka.initCatmullRom(d.z,u.z,o.z,p.z,this.tension));return n.set(Za.calc(c),Ja.calc(c),Ka.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new Se().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}lh.prototype.isCatmullRomCurve3=!0;function uh(b,t,e,n,i){const s=(n-t)*.5,r=(i-e)*.5,a=b*b,c=b*a;return(2*e-2*n+s+r)*c+(-3*e+3*n-2*s-r)*a+s*b+e}function r0(b,t){const e=1-b;return e*e*t}function n0(b,t){return 2*(1-b)*b*t}function i0(b,t){return b*b*t}function xs(b,t,e,n){return r0(b,t)+n0(b,e)+i0(b,n)}function s0(b,t){const e=1-b;return e*e*e*t}function o0(b,t){const e=1-b;return 3*e*e*b*t}function a0(b,t){return 3*(1-b)*b*b*t}function l0(b,t){return b*b*b*t}function ws(b,t,e,n,i){return s0(b,t)+o0(b,e)+a0(b,n)+l0(b,i)}class Qa extends Ir{constructor(t=new Ke,e=new Ke,n=new Ke,i=new Ke){super();this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Ke){const n=e,i=this.v0,s=this.v1,r=this.v2,a=this.v3;return n.set(ws(t,i.x,s.x,r.x,a.x),ws(t,i.y,s.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Qa.prototype.isCubicBezierCurve=!0;class ch extends Ir{constructor(t=new Se,e=new Se,n=new Se,i=new Se){super();this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Se){const n=e,i=this.v0,s=this.v1,r=this.v2,a=this.v3;return n.set(ws(t,i.x,s.x,r.x,a.x),ws(t,i.y,s.y,r.y,a.y),ws(t,i.z,s.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}ch.prototype.isCubicBezierCurve3=!0;class Lo extends Ir{constructor(t=new Ke,e=new Ke){super();this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Ke){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Ke;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Lo.prototype.isLineCurve=!0;class u0 extends Ir{constructor(t=new Se,e=new Se){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new Se){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class $a extends Ir{constructor(t=new Ke,e=new Ke,n=new Ke){super();this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Ke){const n=e,i=this.v0,s=this.v1,r=this.v2;return n.set(xs(t,i.x,s.x,r.x),xs(t,i.y,s.y,r.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}$a.prototype.isQuadraticBezierCurve=!0;class hh extends Ir{constructor(t=new Se,e=new Se,n=new Se){super();this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Se){const n=e,i=this.v0,s=this.v1,r=this.v2;return n.set(xs(t,i.x,s.x,r.x),xs(t,i.y,s.y,r.y),xs(t,i.z,s.z,r.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}hh.prototype.isQuadraticBezierCurve3=!0;class el extends Ir{constructor(t=[]){super();this.type="SplineCurve",this.points=t}getPoint(t,e=new Ke){const n=e,i=this.points,s=(i.length-1)*t,r=Math.floor(s),a=s-r,c=i[r===0?r:r-1],d=i[r],p=i[r>i.length-2?i.length-1:r+1],u=i[r>i.length-3?i.length-1:r+2];return n.set(uh(a,c.x,d.x,p.x,u.x),uh(a,c.y,d.y,p.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new Ke().fromArray(i))}return this}}el.prototype.isSplineCurve=!0;var dh=Object.freeze({__proto__:null,ArcCurve:ah,CatmullRomCurve3:lh,CubicBezierCurve:Qa,CubicBezierCurve3:ch,EllipseCurve:Eo,LineCurve:Lo,LineCurve3:u0,QuadraticBezierCurve:$a,QuadraticBezierCurve3:hh,SplineCurve:el});class c0 extends Ir{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Lo(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const r=i[s]-n,a=this.curves[s],c=a.getLength(),d=c===0?0:1-r/c;return a.getPointAt(d,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const r=s[i],a=r&&r.isEllipseCurve?t*2:r&&(r.isLineCurve||r.isLineCurve3)?1:r&&r.isSplineCurve?t*r.points.length:t,c=r.getPoints(a);for(let d=0;d<c.length;d++){const p=c[d];n&&n.equals(p)||(e.push(p),n=p)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(new dh[i.type]().fromJSON(i))}return this}}class tl extends c0{constructor(t){super();this.type="Path",this.currentPoint=new Ke,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Lo(this.currentPoint.clone(),new Ke(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const s=new $a(this.currentPoint.clone(),new Ke(t,e),new Ke(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,s,r){const a=new Qa(this.currentPoint.clone(),new Ke(t,e),new Ke(n,i),new Ke(s,r));return this.curves.push(a),this.currentPoint.set(s,r),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new el(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,s,r){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+a,e+c,n,i,s,r),this}absarc(t,e,n,i,s,r){return this.absellipse(t,e,n,n,i,s,r),this}ellipse(t,e,n,i,s,r,a,c){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(t+d,e+p,n,i,s,r,a,c),this}absellipse(t,e,n,i,s,r,a,c){const d=new Eo(t,e,n,i,s,r,a,c);if(this.curves.length>0){const u=d.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Ss extends tl{constructor(t){super(t);this.uuid=Cr(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(new tl().fromJSON(i))}return this}}const h0={triangulate:function(b,t,e=2){const n=t&&t.length,i=n?t[0]*e:b.length;let s=fh(b,0,i,e,!0);const r=[];if(!s||s.next===s.prev)return r;let a,c,d,p,u,o,l;if(n&&(s=g0(b,t,s,e)),b.length>80*e){a=d=b[0],c=p=b[1];for(let h=e;h<i;h+=e)u=b[h],o=b[h+1],u<a&&(a=u),o<c&&(c=o),u>d&&(d=u),o>p&&(p=o);l=Math.max(d-a,p-c),l=l!==0?1/l:0}return Ms(s,r,e,a,c,l),r}};function fh(b,t,e,n,i){let s,r;if(i===A0(b,t,e,n)>0)for(s=t;s<e;s+=n)r=gh(s,b[s],b[s+1],r);else for(s=e-n;s>=t;s-=n)r=gh(s,b[s],b[s+1],r);return r&&Co(r,r.next)&&(Es(r),r=r.next),r}function Cn(b,t){if(!b)return b;t||(t=b);let e=b,n;do if(n=!1,!e.steiner&&(Co(e,e.next)||Kt(e.prev,e,e.next)===0)){if(Es(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function Ms(b,t,e,n,i,s,r){if(!b)return;!r&&s&&x0(b,n,i,s);let a=b,c,d;for(;b.prev!==b.next;){if(c=b.prev,d=b.next,s?f0(b,n,i,s):d0(b)){t.push(c.i/e),t.push(b.i/e),t.push(d.i/e),Es(b),b=d.next,a=d.next;continue}if(b=d,b===a){r?r===1?(b=p0(Cn(b),t,e),Ms(b,t,e,n,i,s,2)):r===2&&m0(b,t,e,n,i,s):Ms(Cn(b),t,e,n,i,s,1);break}}}function d0(b){const t=b.prev,e=b,n=b.next;if(Kt(t,e,n)>=0)return!1;let i=b.next.next;for(;i!==b.prev;){if(Vi(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)&&Kt(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function f0(b,t,e,n){const i=b.prev,s=b,r=b.next;if(Kt(i,s,r)>=0)return!1;const a=i.x<s.x?i.x<r.x?i.x:r.x:s.x<r.x?s.x:r.x,c=i.y<s.y?i.y<r.y?i.y:r.y:s.y<r.y?s.y:r.y,d=i.x>s.x?i.x>r.x?i.x:r.x:s.x>r.x?s.x:r.x,p=i.y>s.y?i.y>r.y?i.y:r.y:s.y>r.y?s.y:r.y,u=rl(a,c,t,e,n),o=rl(d,p,t,e,n);let l=b.prevZ,h=b.nextZ;for(;l&&l.z>=u&&h&&h.z<=o;){if(l!==b.prev&&l!==b.next&&Vi(i.x,i.y,s.x,s.y,r.x,r.y,l.x,l.y)&&Kt(l.prev,l,l.next)>=0||(l=l.prevZ,h!==b.prev&&h!==b.next&&Vi(i.x,i.y,s.x,s.y,r.x,r.y,h.x,h.y)&&Kt(h.prev,h,h.next)>=0))return!1;h=h.nextZ}for(;l&&l.z>=u;){if(l!==b.prev&&l!==b.next&&Vi(i.x,i.y,s.x,s.y,r.x,r.y,l.x,l.y)&&Kt(l.prev,l,l.next)>=0)return!1;l=l.prevZ}for(;h&&h.z<=o;){if(h!==b.prev&&h!==b.next&&Vi(i.x,i.y,s.x,s.y,r.x,r.y,h.x,h.y)&&Kt(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function p0(b,t,e){let n=b;do{const i=n.prev,s=n.next.next;!Co(i,s)&&ph(i,n,n.next,s)&&Ts(i,s)&&Ts(s,i)&&(t.push(i.i/e),t.push(n.i/e),t.push(s.i/e),Es(n),Es(n.next),n=b=s),n=n.next}while(n!==b);return Cn(n)}function m0(b,t,e,n,i,s){let r=b;do{let a=r.next.next;for(;a!==r.prev;){if(r.i!==a.i&&M0(r,a)){let c=mh(r,a);r=Cn(r,r.next),c=Cn(c,c.next),Ms(r,t,e,n,i,s),Ms(c,t,e,n,i,s);return}a=a.next}r=r.next}while(r!==b)}function g0(b,t,e,n){const i=[];let s,r,a,c,d;for(s=0,r=t.length;s<r;s++)a=t[s]*n,c=s<r-1?t[s+1]*n:b.length,d=fh(b,a,c,n,!1),d===d.next&&(d.steiner=!0),i.push(S0(d));for(i.sort(y0),s=0;s<i.length;s++)v0(i[s],e),e=Cn(e,e.next);return e}function y0(b,t){return b.x-t.x}function v0(b,t){if(t=b0(b,t),t){const e=mh(t,b);Cn(t,t.next),Cn(e,e.next)}}function b0(b,t){let e=t;const n=b.x,i=b.y;let s=-1/0,r;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){const o=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=n&&o>s){if(s=o,o===n){if(i===e.y)return e;if(i===e.next.y)return e.next}r=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!r)return null;if(n===s)return r;const a=r,c=r.x,d=r.y;let p=1/0,u;e=r;do n>=e.x&&e.x>=c&&n!==e.x&&Vi(i<d?n:s,i,c,d,i<d?s:n,i,e.x,e.y)&&(u=Math.abs(i-e.y)/(n-e.x),Ts(e,b)&&(u<p||u===p&&(e.x>r.x||e.x===r.x&&_0(r,e)))&&(r=e,p=u)),e=e.next;while(e!==a);return r}function _0(b,t){return Kt(b.prev,b,t.prev)<0&&Kt(t.next,b,b.next)<0}function x0(b,t,e,n){let i=b;do i.z===null&&(i.z=rl(i.x,i.y,t,e,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==b);i.prevZ.nextZ=null,i.prevZ=null,w0(i)}function w0(b){let t,e,n,i,s,r,a,c,d=1;do{for(e=b,b=null,s=null,r=0;e;){for(r++,n=e,a=0,t=0;t<d&&(a++,n=n.nextZ,!!n);t++);for(c=d;a>0||c>0&&n;)a!==0&&(c===0||!n||e.z<=n.z)?(i=e,e=e.nextZ,a--):(i=n,n=n.nextZ,c--),s?s.nextZ=i:b=i,i.prevZ=s,s=i;e=n}s.nextZ=null,d*=2}while(r>1);return b}function rl(b,t,e,n,i){return b=32767*(b-e)*i,t=32767*(t-n)*i,b=(b|b<<8)&16711935,b=(b|b<<4)&252645135,b=(b|b<<2)&858993459,b=(b|b<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,b|t<<1}function S0(b){let t=b,e=b;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==b);return e}function Vi(b,t,e,n,i,s,r,a){return(i-r)*(t-a)-(b-r)*(s-a)>=0&&(b-r)*(n-a)-(e-r)*(t-a)>=0&&(e-r)*(s-a)-(i-r)*(n-a)>=0}function M0(b,t){return b.next.i!==t.i&&b.prev.i!==t.i&&!T0(b,t)&&(Ts(b,t)&&Ts(t,b)&&E0(b,t)&&(Kt(b.prev,b,t.prev)||Kt(b,t.prev,t))||Co(b,t)&&Kt(b.prev,b,b.next)>0&&Kt(t.prev,t,t.next)>0)}function Kt(b,t,e){return(t.y-b.y)*(e.x-t.x)-(t.x-b.x)*(e.y-t.y)}function Co(b,t){return b.x===t.x&&b.y===t.y}function ph(b,t,e,n){const i=Po(Kt(b,t,e)),s=Po(Kt(b,t,n)),r=Po(Kt(e,n,b)),a=Po(Kt(e,n,t));return!!(i!==s&&r!==a||i===0&&Ro(b,e,t)||s===0&&Ro(b,n,t)||r===0&&Ro(e,b,n)||a===0&&Ro(e,t,n))}function Ro(b,t,e){return t.x<=Math.max(b.x,e.x)&&t.x>=Math.min(b.x,e.x)&&t.y<=Math.max(b.y,e.y)&&t.y>=Math.min(b.y,e.y)}function Po(b){return b>0?1:b<0?-1:0}function T0(b,t){let e=b;do{if(e.i!==b.i&&e.next.i!==b.i&&e.i!==t.i&&e.next.i!==t.i&&ph(e,e.next,b,t))return!0;e=e.next}while(e!==b);return!1}function Ts(b,t){return Kt(b.prev,b,b.next)<0?Kt(b,t,b.next)>=0&&Kt(b,b.prev,t)>=0:Kt(b,t,b.prev)<0||Kt(b,b.next,t)<0}function E0(b,t){let e=b,n=!1;const i=(b.x+t.x)/2,s=(b.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&i<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==b);return n}function mh(b,t){const e=new nl(b.i,b.x,b.y),n=new nl(t.i,t.x,t.y),i=b.next,s=t.prev;return b.next=t,t.prev=b,e.next=i,i.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function gh(b,t,e,n){const i=new nl(b,t,e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Es(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function nl(b,t,e){this.i=b,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A0(b,t,e,n){let i=0;for(let s=t,r=e-n;s<e;s+=n)i+=(b[r]-b[s])*(b[s+1]+b[r+1]),r=s;return i}class Rn{static area(t){const e=t.length;let n=0;for(let i=e-1,s=0;s<e;i=s++)n+=t[i].x*t[s].y-t[s].x*t[i].y;return n*.5}static isClockWise(t){return Rn.area(t)<0}static triangulateShape(t,e){const n=[],i=[],s=[];yh(t),vh(n,t);let r=t.length;e.forEach(yh);for(let c=0;c<e.length;c++)i.push(r),r+=e[c].length,vh(n,e[c]);const a=h0.triangulate(n,i);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function yh(b){const t=b.length;t>2&&b[t-1].equals(b[0])&&b.pop()}function vh(b,t){for(let e=0;e<t.length;e++)b.push(t[e].x),b.push(t[e].y)}class Hi extends Ht{constructor(t=new Ss([new Ke(.5,.5),new Ke(-.5,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),e={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],s=[];for(let a=0,c=t.length;a<c;a++){const d=t[a];r(d)}this.setAttribute("position",new $t(i,3)),this.setAttribute("uv",new $t(s,2)),this.computeVertexNormals();function r(a){const c=[],d=e.curveSegments!==void 0?e.curveSegments:12,p=e.steps!==void 0?e.steps:1;let u=e.depth!==void 0?e.depth:1,o=e.bevelEnabled!==void 0?e.bevelEnabled:!0,l=e.bevelThickness!==void 0?e.bevelThickness:.2,h=e.bevelSize!==void 0?e.bevelSize:l-.1,f=e.bevelOffset!==void 0?e.bevelOffset:0,m=e.bevelSegments!==void 0?e.bevelSegments:3;const g=e.extrudePath,v=e.UVGenerator!==void 0?e.UVGenerator:L0;e.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);let x,w=!1,M,A,E,I;g&&(x=g.getSpacedPoints(p),w=!0,o=!1,M=g.computeFrenetFrames(p,!1),A=new Se,E=new Se,I=new Se),o||(m=0,l=0,h=0,f=0);const R=a.extractPoints(d);let P=R.shape;const D=R.holes;if(!Rn.isClockWise(P)){P=P.reverse();for(let te=0,xe=D.length;te<xe;te++){const Q=D[te];Rn.isClockWise(Q)&&(D[te]=Q.reverse())}}const j=Rn.triangulateShape(P,D),N=P;for(let te=0,xe=D.length;te<xe;te++){const Q=D[te];P=P.concat(Q)}function q(te,xe,Q){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),xe.clone().multiplyScalar(Q).add(te)}const X=P.length,V=j.length;function $(te,xe,Q){let ge,he,G;const W=te.x-xe.x,ve=te.y-xe.y,we=Q.x-te.x,Re=Q.y-te.y,Ge=W*W+ve*ve,Pe=W*Re-ve*we;if(Math.abs(Pe)>Number.EPSILON){const Ze=Math.sqrt(Ge),Je=Math.sqrt(we*we+Re*Re),Ce=xe.x-ve/Ze,le=xe.y+W/Ze,De=Q.x-Re/Je,se=Q.y+we/Je,Ne=((De-Ce)*Re-(se-le)*we)/(W*Re-ve*we);ge=Ce+W*Ne-te.x,he=le+ve*Ne-te.y;const ie=ge*ge+he*he;if(ie<=2)return new Ke(ge,he);G=Math.sqrt(ie/2)}else{let Ze=!1;W>Number.EPSILON?we>Number.EPSILON&&(Ze=!0):W<-Number.EPSILON?we<-Number.EPSILON&&(Ze=!0):Math.sign(ve)===Math.sign(Re)&&(Ze=!0),Ze?(ge=-ve,he=W,G=Math.sqrt(Ge)):(ge=W,he=ve,G=Math.sqrt(Ge/2))}return new Ke(ge/G,he/G)}const K=[];for(let te=0,xe=N.length,Q=xe-1,ge=te+1;te<xe;te++,Q++,ge++)Q===xe&&(Q=0),ge===xe&&(ge=0),K[te]=$(N[te],N[Q],N[ge]);const _e=[];let me,ye=K.concat();for(let te=0,xe=D.length;te<xe;te++){const Q=D[te];me=[];for(let ge=0,he=Q.length,G=he-1,W=ge+1;ge<he;ge++,G++,W++)G===he&&(G=0),W===he&&(W=0),me[ge]=$(Q[ge],Q[G],Q[W]);_e.push(me),ye=ye.concat(me)}for(let te=0;te<m;te++){const xe=te/m,Q=l*Math.cos(xe*Math.PI/2),ge=h*Math.sin(xe*Math.PI/2)+f;for(let he=0,G=N.length;he<G;he++){const W=q(N[he],K[he],ge);F(W.x,W.y,-Q)}for(let he=0,G=D.length;he<G;he++){const W=D[he];me=_e[he];for(let ve=0,we=W.length;ve<we;ve++){const Re=q(W[ve],me[ve],ge);F(Re.x,Re.y,-Q)}}}const fe=h+f;for(let te=0;te<X;te++){const xe=o?q(P[te],ye[te],fe):P[te];w?(E.copy(M.normals[0]).multiplyScalar(xe.x),A.copy(M.binormals[0]).multiplyScalar(xe.y),I.copy(x[0]).add(E).add(A),F(I.x,I.y,I.z)):F(xe.x,xe.y,0)}for(let te=1;te<=p;te++)for(let xe=0;xe<X;xe++){const Q=o?q(P[xe],ye[xe],fe):P[xe];w?(E.copy(M.normals[te]).multiplyScalar(Q.x),A.copy(M.binormals[te]).multiplyScalar(Q.y),I.copy(x[te]).add(E).add(A),F(I.x,I.y,I.z)):F(Q.x,Q.y,u/p*te)}for(let te=m-1;te>=0;te--){const xe=te/m,Q=l*Math.cos(xe*Math.PI/2),ge=h*Math.sin(xe*Math.PI/2)+f;for(let he=0,G=N.length;he<G;he++){const W=q(N[he],K[he],ge);F(W.x,W.y,u+Q)}for(let he=0,G=D.length;he<G;he++){const W=D[he];me=_e[he];for(let ve=0,we=W.length;ve<we;ve++){const Re=q(W[ve],me[ve],ge);w?F(Re.x,Re.y+x[p-1].y,x[p-1].x+Q):F(Re.x,Re.y,u+Q)}}}de(),Ee();function de(){const te=i.length/3;if(o){let xe=0,Q=X*xe;for(let ge=0;ge<V;ge++){const he=j[ge];H(he[2]+Q,he[1]+Q,he[0]+Q)}xe=p+m*2,Q=X*xe;for(let ge=0;ge<V;ge++){const he=j[ge];H(he[0]+Q,he[1]+Q,he[2]+Q)}}else{for(let xe=0;xe<V;xe++){const Q=j[xe];H(Q[2],Q[1],Q[0])}for(let xe=0;xe<V;xe++){const Q=j[xe];H(Q[0]+X*p,Q[1]+X*p,Q[2]+X*p)}}n.addGroup(te,i.length/3-te,0)}function Ee(){const te=i.length/3;let xe=0;C(N,xe),xe+=N.length;for(let Q=0,ge=D.length;Q<ge;Q++){const he=D[Q];C(he,xe),xe+=he.length}n.addGroup(te,i.length/3-te,1)}function C(te,xe){let Q=te.length;for(;--Q>=0;){const ge=Q;let he=Q-1;he<0&&(he=te.length-1);for(let G=0,W=p+m*2;G<W;G++){const ve=X*G,we=X*(G+1),Re=xe+ge+ve,Ge=xe+he+ve,Pe=xe+he+we,Ze=xe+ge+we;ne(Re,Ge,Pe,Ze)}}}function F(te,xe,Q){c.push(te),c.push(xe),c.push(Q)}function H(te,xe,Q){re(te),re(xe),re(Q);const ge=i.length/3,he=v.generateTopUV(n,i,ge-3,ge-2,ge-1);oe(he[0]),oe(he[1]),oe(he[2])}function ne(te,xe,Q,ge){re(te),re(xe),re(ge),re(xe),re(Q),re(ge);const he=i.length/3,G=v.generateSideWallUV(n,i,he-6,he-3,he-2,he-1);oe(G[0]),oe(G[1]),oe(G[3]),oe(G[1]),oe(G[2]),oe(G[3])}function re(te){i.push(c[te*3+0]),i.push(c[te*3+1]),i.push(c[te*3+2])}function oe(te){s.push(te.x),s.push(te.y)}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return C0(e,n,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const a=e[t.shapes[s]];n.push(a)}const i=t.options.extrudePath;return i!==void 0&&(t.options.extrudePath=new dh[i.type]().fromJSON(i)),new Hi(n,t.options)}}const L0={generateTopUV:function(b,t,e,n,i){const s=t[e*3],r=t[e*3+1],a=t[n*3],c=t[n*3+1],d=t[i*3],p=t[i*3+1];return[new Ke(s,r),new Ke(a,c),new Ke(d,p)]},generateSideWallUV:function(b,t,e,n,i,s){const r=t[e*3],a=t[e*3+1],c=t[e*3+2],d=t[n*3],p=t[n*3+1],u=t[n*3+2],o=t[i*3],l=t[i*3+1],h=t[i*3+2],f=t[s*3],m=t[s*3+1],g=t[s*3+2];return Math.abs(a-p)<Math.abs(r-d)?[new Ke(r,1-c),new Ke(d,1-u),new Ke(o,1-h),new Ke(f,1-g)]:[new Ke(a,1-c),new Ke(p,1-u),new Ke(l,1-h),new Ke(m,1-g)]}};function C0(b,t,e){if(e.shapes=[],Array.isArray(b))for(let n=0,i=b.length;n<i;n++){const s=b[n];e.shapes.push(s.uuid)}else e.shapes.push(b.uuid);return t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class il extends Ht{constructor(t=new Ss([new Ke(0,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),e=12){super();this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],s=[],r=[];let a=0,c=0;if(Array.isArray(t)===!1)d(t);else for(let p=0;p<t.length;p++)d(t[p]),this.addGroup(a,c,p),a+=c,c=0;this.setIndex(n),this.setAttribute("position",new $t(i,3)),this.setAttribute("normal",new $t(s,3)),this.setAttribute("uv",new $t(r,2));function d(p){const u=i.length/3,o=p.extractPoints(e);let l=o.shape;const h=o.holes;Rn.isClockWise(l)===!1&&(l=l.reverse());for(let m=0,g=h.length;m<g;m++){const v=h[m];Rn.isClockWise(v)===!0&&(h[m]=v.reverse())}const f=Rn.triangulateShape(l,h);for(let m=0,g=h.length;m<g;m++){const v=h[m];l=l.concat(v)}for(let m=0,g=l.length;m<g;m++){const v=l[m];i.push(v.x,v.y,0),s.push(0,0,1),r.push(v.x,v.y)}for(let m=0,g=f.length;m<g;m++){const v=f[m],x=v[0]+u,w=v[1]+u,M=v[2]+u;n.push(x,w,M),c+=3}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return R0(e,t)}static fromJSON(t,e){const n=[];for(let i=0,s=t.shapes.length;i<s;i++){const r=e[t.shapes[i]];n.push(r)}return new il(n,t.curveSegments)}}function R0(b,t){if(t.shapes=[],Array.isArray(b))for(let e=0,n=b.length;e<n;e++){const i=b[e];t.shapes.push(i.uuid)}else t.shapes.push(b.uuid);return t}class bh extends Ht{constructor(t=1,e=32,n=16,i=0,s=Math.PI*2,r=0,a=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:s,thetaStart:r,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const c=Math.min(r+a,Math.PI);let d=0;const p=[],u=new Se,o=new Se,l=[],h=[],f=[],m=[];for(let g=0;g<=n;g++){const v=[],x=g/n;let w=0;g==0&&r==0?w=.5/e:g==n&&c==Math.PI&&(w=-.5/e);for(let M=0;M<=e;M++){const A=M/e;u.x=-t*Math.cos(i+A*s)*Math.sin(r+x*a),u.y=t*Math.cos(r+x*a),u.z=t*Math.sin(i+A*s)*Math.sin(r+x*a),h.push(u.x,u.y,u.z),o.copy(u).normalize(),f.push(o.x,o.y,o.z),m.push(A+w,1-x),v.push(d++)}p.push(v)}for(let g=0;g<n;g++)for(let v=0;v<e;v++){const x=p[g][v+1],w=p[g][v],M=p[g+1][v],A=p[g+1][v+1];(g!==0||r>0)&&l.push(x,w,A),(g!==n-1||c<Math.PI)&&l.push(w,M,A)}this.setIndex(l),this.setAttribute("position",new $t(h,3)),this.setAttribute("normal",new $t(f,3)),this.setAttribute("uv",new $t(m,2))}static fromJSON(t){return new bh(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class P0 extends ur{constructor(t){super();this.type="ShadowMaterial",this.color=new at(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}P0.prototype.isShadowMaterial=!0;class As extends ur{constructor(t){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new at(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bn,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}As.prototype.isMeshStandardMaterial=!0;class Yn extends As{constructor(t){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return br(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new at(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new at(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new at(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}Yn.prototype.isMeshPhysicalMaterial=!0;class I0 extends ur{constructor(t){super();this.type="MeshPhongMaterial",this.color=new at(16777215),this.specular=new at(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bn,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Us,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}I0.prototype.isMeshPhongMaterial=!0;class D0 extends ur{constructor(t){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new at(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bn,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}D0.prototype.isMeshToonMaterial=!0;class O0 extends ur{constructor(t){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bn,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}O0.prototype.isMeshNormalMaterial=!0;class j0 extends ur{constructor(t){super();this.type="MeshLambertMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Us,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}j0.prototype.isMeshLambertMaterial=!0;class k0 extends ur{constructor(t){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new at(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bn,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}k0.prototype.isMeshMatcapMaterial=!0;class N0 extends Xn{constructor(t){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}N0.prototype.isLineDashedMaterial=!0;const Jt={arraySlice:function(b,t,e){return Jt.isTypedArray(b)?new b.constructor(b.subarray(t,e!==void 0?e:b.length)):b.slice(t,e)},convertArray:function(b,t,e){return!b||!e&&b.constructor===t?b:typeof t.BYTES_PER_ELEMENT=="number"?new t(b):Array.prototype.slice.call(b)},isTypedArray:function(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)},getKeyframeOrder:function(b){function t(i,s){return b[i]-b[s]}const e=b.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort(t),n},sortedArray:function(b,t,e){const n=b.length,i=new b.constructor(n);for(let s=0,r=0;r!==n;++s){const a=e[s]*t;for(let c=0;c!==t;++c)i[r++]=b[a+c]}return i},flattenJSON:function(b,t,e,n){let i=1,s=b[0];for(;s!==void 0&&s[n]===void 0;)s=b[i++];if(s===void 0)return;let r=s[n];if(r!==void 0)if(Array.isArray(r))do r=s[n],r!==void 0&&(t.push(s.time),e.push.apply(e,r)),s=b[i++];while(s!==void 0);else if(r.toArray!==void 0)do r=s[n],r!==void 0&&(t.push(s.time),r.toArray(e,e.length)),s=b[i++];while(s!==void 0);else do r=s[n],r!==void 0&&(t.push(s.time),e.push(r)),s=b[i++];while(s!==void 0)},subclip:function(b,t,e,n,i=30){const s=b.clone();s.name=t;const r=[];for(let c=0;c<s.tracks.length;++c){const d=s.tracks[c],p=d.getValueSize(),u=[],o=[];for(let l=0;l<d.times.length;++l){const h=d.times[l]*i;if(!(h<e||h>=n)){u.push(d.times[l]);for(let f=0;f<p;++f)o.push(d.values[l*p+f])}}u.length!==0&&(d.times=Jt.convertArray(u,d.times.constructor),d.values=Jt.convertArray(o,d.values.constructor),r.push(d))}s.tracks=r;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(b,t=0,e=b,n=30){n<=0&&(n=30);const i=e.tracks.length,s=t/n;for(let r=0;r<i;++r){const a=e.tracks[r],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const d=b.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===c});if(d===void 0)continue;let p=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=u/3);let o=0;const l=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);const h=a.times.length-1;let f;if(s<=a.times[0]){const g=p,v=u-p;f=Jt.arraySlice(a.values,g,v)}else if(s>=a.times[h]){const g=h*u+p,v=g+u-p;f=Jt.arraySlice(a.values,g,v)}else{const g=a.createInterpolant(),v=p,x=u-p;g.evaluate(s),f=Jt.arraySlice(g.resultBuffer,v,x)}c==="quaternion"&&new pr().fromArray(f).normalize().conjugate().toArray(f);const m=d.times.length;for(let g=0;g<m;++g){const v=g*l+o;if(c==="quaternion")pr.multiplyQuaternionsFlat(d.values,v,f,0,d.values,v);else{const x=l-o*2;for(let w=0;w<x;++w)d.values[v+w]-=f[w]}}}return b.blendMode=Ru,b}};class an{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],s=e[n-1];e:{t:{let r;r:{n:if(!(t<i)){for(let a=n+2;;){if(i===void 0){if(t<s)break n;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,s)}if(n===a)break;if(s=i,i=e[++n],t<i)break t}r=e.length;break r}if(!(t>=s)){const a=e[1];t<a&&(n=2,s=a);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===c)break;if(i=s,s=e[--n-1],t>=s)break t}r=n,n=0;break r}break e}for(;n<r;){const a=n+r>>>1;t<e[a]?r=a:n=a+1}if(i=e[n],s=e[n-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(i===void 0)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,s,t)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=t*i;for(let r=0;r!==i;++r)e[r]=n[s+r];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}an.prototype.beforeStart_=an.prototype.copySampleValue_;an.prototype.afterEnd_=an.prototype.copySampleValue_;class F0 extends an{constructor(t,e,n,i){super(t,e,n,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pi,endingEnd:pi}}intervalChanged_(t,e,n){const i=this.parameterPositions;let s=t-2,r=t+1,a=i[s],c=i[r];if(a===void 0)switch(this.getSettings_().endingStart){case mi:s=t,a=2*e-n;break;case Hs:s=i.length-2,a=e+i[s]-i[s+1];break;default:s=t,a=n}if(c===void 0)switch(this.getSettings_().endingEnd){case mi:r=t,c=2*n-e;break;case Hs:r=1,c=n+i[1]-i[0];break;default:r=t-1,c=e}const d=(n-e)*.5,p=this.valueSize;this._weightPrev=d/(e-a),this._weightNext=d/(c-n),this._offsetPrev=s*p,this._offsetNext=r*p}interpolate_(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=t*a,d=c-a,p=this._offsetPrev,u=this._offsetNext,o=this._weightPrev,l=this._weightNext,h=(n-e)/(i-e),f=h*h,m=f*h,g=-o*m+2*o*f-o*h,v=(1+o)*m+(-1.5-2*o)*f+(-.5+o)*h+1,x=(-1-l)*m+(1.5+l)*f+.5*h,w=l*m-l*f;for(let M=0;M!==a;++M)s[M]=g*r[p+M]+v*r[d+M]+x*r[c+M]+w*r[u+M];return s}}class _h extends an{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=t*a,d=c-a,p=(n-e)/(i-e),u=1-p;for(let o=0;o!==a;++o)s[o]=r[d+o]*u+r[c+o]*p;return s}}class U0 extends an{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Yr{constructor(t,e,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Jt.convertArray(e,this.TimeBufferType),this.values=Jt.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Jt.convertArray(t.times,Array),values:Jt.convertArray(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new U0(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new _h(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new F0(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case is:e=this.InterpolantFactoryMethodDiscrete;break;case fi:e=this.InterpolantFactoryMethodLinear;break;case $o:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return is;case this.InterpolantFactoryMethodLinear:return fi;case this.InterpolantFactoryMethodSmooth:return $o}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let s=0,r=i-1;for(;s!==i&&n[s]<t;)++s;for(;r!==-1&&n[r]>e;)--r;if(++r,s!==0||r!==i){s>=r&&(r=Math.max(r,1),s=r-1);const a=this.getValueSize();this.times=Jt.arraySlice(n,s,r),this.values=Jt.arraySlice(this.values,s*a,r*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let a=0;a!==s;a++){const c=n[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),t=!1;break}if(r!==null&&r>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,r),t=!1;break}r=c}if(i!==void 0&&Jt.isTypedArray(i))for(let a=0,c=i.length;a!==c;++a){const d=i[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),t=!1;break}}return t}optimize(){const t=Jt.arraySlice(this.times),e=Jt.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===$o,s=t.length-1;let r=1;for(let a=1;a<s;++a){let c=!1;const d=t[a],p=t[a+1];if(d!==p&&(a!==1||d!==t[0]))if(i)c=!0;else{const u=a*n,o=u-n,l=u+n;for(let h=0;h!==n;++h){const f=e[u+h];if(f!==e[o+h]||f!==e[l+h]){c=!0;break}}}if(c){if(a!==r){t[r]=t[a];const u=a*n,o=r*n;for(let l=0;l!==n;++l)e[o+l]=e[u+l]}++r}}if(s>0){t[r]=t[s];for(let a=s*n,c=r*n,d=0;d!==n;++d)e[c+d]=e[a+d];++r}return r!==t.length?(this.times=Jt.arraySlice(t,0,r),this.values=Jt.arraySlice(e,0,r*n)):(this.times=t,this.values=e),this}clone(){const t=Jt.arraySlice(this.times,0),e=Jt.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}Yr.prototype.TimeBufferType=Float32Array;Yr.prototype.ValueBufferType=Float32Array;Yr.prototype.DefaultInterpolation=fi;class Wi extends Yr{}Wi.prototype.ValueTypeName="bool";Wi.prototype.ValueBufferType=Array;Wi.prototype.DefaultInterpolation=is;Wi.prototype.InterpolantFactoryMethodLinear=void 0;Wi.prototype.InterpolantFactoryMethodSmooth=void 0;class xh extends Yr{}xh.prototype.ValueTypeName="color";class Ls extends Yr{}Ls.prototype.ValueTypeName="number";class B0 extends an{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=(n-e)/(i-e);let d=t*a;for(let p=d+a;d!==p;d+=4)pr.slerpFlat(s,0,r,d-a,r,d,c);return s}}class Zn extends Yr{InterpolantFactoryMethodLinear(t){return new B0(this.times,this.values,this.getValueSize(),t)}}Zn.prototype.ValueTypeName="quaternion";Zn.prototype.DefaultInterpolation=fi;Zn.prototype.InterpolantFactoryMethodSmooth=void 0;class qi extends Yr{}qi.prototype.ValueTypeName="string";qi.prototype.ValueBufferType=Array;qi.prototype.DefaultInterpolation=is;qi.prototype.InterpolantFactoryMethodLinear=void 0;qi.prototype.InterpolantFactoryMethodSmooth=void 0;class Cs extends Yr{}Cs.prototype.ValueTypeName="vector";class sl{constructor(t,e=-1,n,i=ea){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=Cr(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let r=0,a=n.length;r!==a;++r)e.push(z0(n[r]).scale(i));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,r=n.length;s!==r;++s)e.push(Yr.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const s=e.length,r=[];for(let a=0;a<s;a++){let c=[],d=[];c.push((a+s-1)%s,a,(a+1)%s),d.push(0,1,0);const p=Jt.getKeyframeOrder(c);c=Jt.sortedArray(c,1,p),d=Jt.sortedArray(d,1,p),!i&&c[0]===0&&(c.push(s),d.push(d[0])),r.push(new Ls(".morphTargetInfluences["+e[a].name+"]",c,d).scale(1/n))}return new this(t,-1,r)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=t.length;a<c;a++){const d=t[a],p=d.name.match(s);if(p&&p.length>1){const u=p[1];let o=i[u];o||(i[u]=o=[]),o.push(d)}}const r=[];for(const a in i)r.push(this.CreateFromMorphTargetSequence(a,i[a],e,n));return r}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,o,l,h,f){if(l.length!==0){const m=[],g=[];Jt.flattenJSON(l,m,g,h),m.length!==0&&f.push(new u(o,m,g))}},i=[],s=t.name||"default",r=t.fps||30,a=t.blendMode;let c=t.length||-1;const d=t.hierarchy||[];for(let u=0;u<d.length;u++){const o=d[u].keys;if(!(!o||o.length===0))if(o[0].morphTargets){const l={};let h;for(h=0;h<o.length;h++)if(o[h].morphTargets)for(let f=0;f<o[h].morphTargets.length;f++)l[o[h].morphTargets[f]]=-1;for(const f in l){const m=[],g=[];for(let v=0;v!==o[h].morphTargets.length;++v){const x=o[h];m.push(x.time),g.push(x.morphTarget===f?1:0)}i.push(new Ls(".morphTargetInfluence["+f+"]",m,g))}c=l.length*(r||1)}else{const l=".bones["+e[u].name+"]";n(Cs,l+".position",o,"pos",i),n(Zn,l+".quaternion",o,"rot",i),n(Cs,l+".scale",o,"scl",i)}}return i.length===0?null:new this(s,c,i,a)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function G0(b){switch(b.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ls;case"vector":case"vector2":case"vector3":case"vector4":return Cs;case"color":return xh;case"quaternion":return Zn;case"bool":case"boolean":return Wi;case"string":return qi}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+b)}function z0(b){if(b.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=G0(b.type);if(b.times===void 0){const e=[],n=[];Jt.flattenJSON(b.keys,e,n,"value"),b.times=e,b.values=n}return t.parse!==void 0?t.parse(b):new t(b.name,b.times,b.values,b.interpolation)}const Xi={enabled:!1,files:{},add:function(b,t){this.enabled!==!1&&(this.files[b]=t)},get:function(b){if(this.enabled!==!1)return this.files[b]},remove:function(b){delete this.files[b]},clear:function(){this.files={}}};class V0{constructor(t,e,n){const i=this;let s=!1,r=0,a=0,c;const d=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(p){a++,s===!1&&i.onStart!==void 0&&i.onStart(p,r,a),s=!0},this.itemEnd=function(p){r++,i.onProgress!==void 0&&i.onProgress(p,r,a),r===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,u){return d.push(p,u),this},this.removeHandler=function(p){const u=d.indexOf(p);return u!==-1&&d.splice(u,2),this},this.getHandler=function(p){for(let u=0,o=d.length;u<o;u+=2){const l=d[u],h=d[u+1];if(l.global&&(l.lastIndex=0),l.test(p))return h}return null}}}const H0=new V0;class ln{constructor(t){this.manager=t!==void 0?t:H0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(i,s){n.load(t,i,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const un={};class ol extends ln{constructor(t){super(t)}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Xi.get(t);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(un[t]!==void 0){un[t].push({onLoad:e,onProgress:n,onError:i});return}un[t]=[],un[t].push({onLoad:e,onProgress:n,onError:i});const r=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(r).then(a=>{if(a.status===200||a.status===0){a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const c=un[t],d=a.body.getReader(),p=a.headers.get("Content-Length"),u=p?parseInt(p):0,o=u!==0;let l=0;return new ReadableStream({start(h){f();function f(){d.read().then(({done:m,value:g})=>{if(m)h.close();else{l+=g.byteLength;const v=new ProgressEvent("progress",{lengthComputable:o,loaded:l,total:u});for(let x=0,w=c.length;x<w;x++){const M=c[x];M.onProgress&&M.onProgress(v)}h.enqueue(g),f()}})}}})}else throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const c=new Response(a);switch(this.responseType){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,this.mimeType));case"json":return c.json();default:return c.text()}}).then(a=>{Xi.add(t,a);const c=un[t];delete un[t];for(let d=0,p=c.length;d<p;d++){const u=c[d];u.onLoad&&u.onLoad(a)}this.manager.itemEnd(t)}).catch(a=>{const c=un[t];delete un[t];for(let d=0,p=c.length;d<p;d++){const u=c[d];u.onError&&u.onError(a)}this.manager.itemError(t),this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class wh extends ln{constructor(t){super(t)}load(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=Xi.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const a=Xs("img");function c(){p(),Xi.add(t,this),e&&e(this),s.manager.itemEnd(t)}function d(u){p(),i&&i(u),s.manager.itemError(t),s.manager.itemEnd(t)}function p(){a.removeEventListener("load",c,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",d,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class W0 extends ln{constructor(t){super(t)}load(t,e,n,i){const s=new co,r=new wh(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let a=0;function c(d){r.load(t[d],function(p){s.images[d]=p,a++,a===6&&(s.needsUpdate=!0,e&&e(s))},void 0,i)}for(let d=0;d<t.length;++d)c(d);return s}}class Sh extends ln{constructor(t){super(t)}load(t,e,n,i){const s=new lr,r=new wh(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(t,function(a){s.image=a,s.needsUpdate=!0,e!==void 0&&e(s)},n,i),s}}class Zr extends Ot{constructor(t,e=1){super();this.type="Light",this.color=new at(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}Zr.prototype.isLight=!0;class q0 extends Zr{constructor(t,e,n){super(t,n);this.type="HemisphereLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.groundColor=new at(e)}copy(t){return Zr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}q0.prototype.isHemisphereLight=!0;const Mh=new ft,Th=new Se,Eh=new Se;class al{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fo,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new Vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Th.setFromMatrixPosition(t.matrixWorld),e.position.copy(Th),Eh.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Eh),e.updateMatrixWorld(),Mh.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Ah extends al{constructor(){super(new xr(50,1,.5,500));this.focus=1}updateMatrices(t){const e=this.camera,n=as*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||i!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=i,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}Ah.prototype.isSpotLightShadow=!0;class Lh extends Zr{constructor(t,e,n=0,i=Math.PI/3,s=0,r=1){super(t,e);this.type="SpotLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.target=new Ot,this.distance=n,this.angle=i,this.penumbra=s,this.decay=r,this.shadow=new Ah}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Lh.prototype.isSpotLight=!0;const Ch=new ft,Rs=new Se,ll=new Se;class Rh extends al{constructor(){super(new xr(90,1,.5,500));this._frameExtents=new Ke(4,2),this._viewportCount=6,this._viewports=[new Vt(2,1,1,1),new Vt(0,1,1,1),new Vt(3,1,1,1),new Vt(1,1,1,1),new Vt(3,0,1,1),new Vt(1,0,1,1)],this._cubeDirections=[new Se(1,0,0),new Se(-1,0,0),new Se(0,0,1),new Se(0,0,-1),new Se(0,1,0),new Se(0,-1,0)],this._cubeUps=[new Se(0,1,0),new Se(0,1,0),new Se(0,1,0),new Se(0,1,0),new Se(0,0,1),new Se(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Rs.setFromMatrixPosition(t.matrixWorld),n.position.copy(Rs),ll.copy(n.position),ll.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(ll),n.updateMatrixWorld(),i.makeTranslation(-Rs.x,-Rs.y,-Rs.z),Ch.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ch)}}Rh.prototype.isPointLightShadow=!0;class Ph extends Zr{constructor(t,e,n=0,i=1){super(t,e);this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Rh}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}Ph.prototype.isPointLight=!0;class Ih extends al{constructor(){super(new po(-5,5,5,-5,.5,500))}}Ih.prototype.isDirectionalLightShadow=!0;class Dh extends Zr{constructor(t,e){super(t,e);this.type="DirectionalLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.target=new Ot,this.shadow=new Ih}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Dh.prototype.isDirectionalLight=!0;class X0 extends Zr{constructor(t,e){super(t,e);this.type="AmbientLight"}}X0.prototype.isAmbientLight=!0;class Y0 extends Zr{constructor(t,e,n=10,i=10){super(t,e);this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}Y0.prototype.isRectAreaLight=!0;class Oh{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Se)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,s=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.282095),e.addScaledVector(r[1],.488603*i),e.addScaledVector(r[2],.488603*s),e.addScaledVector(r[3],.488603*n),e.addScaledVector(r[4],1.092548*(n*i)),e.addScaledVector(r[5],1.092548*(i*s)),e.addScaledVector(r[6],.315392*(3*s*s-1)),e.addScaledVector(r[7],1.092548*(n*s)),e.addScaledVector(r[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,s=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.886227),e.addScaledVector(r[1],2*.511664*i),e.addScaledVector(r[2],2*.511664*s),e.addScaledVector(r[3],2*.511664*n),e.addScaledVector(r[4],2*.429043*n*i),e.addScaledVector(r[5],2*.429043*i*s),e.addScaledVector(r[6],.743125*s*s-.247708),e.addScaledVector(r[7],2*.429043*n*s),e.addScaledVector(r[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+i*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+i*3);return t}static getBasisAt(t,e){const n=t.x,i=t.y,s=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*s,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*n*s,e[8]=.546274*(n*n-i*i)}}Oh.prototype.isSphericalHarmonics3=!0;class ul extends Zr{constructor(t=new Oh,e=1){super(void 0,e);this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}ul.prototype.isLightProbe=!0;class Pn{static decodeText(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Z0 extends Ht{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}Z0.prototype.isInstancedBufferGeometry=!0;class jh extends ln{constructor(t){super(t);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=Xi.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){Xi.add(t,c),e&&e(c),s.manager.itemEnd(t)}).catch(function(c){i&&i(c),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}}jh.prototype.isImageBitmapLoader=!0;let Io;const J0={getContext:function(){return Io===void 0&&(Io=new(window.AudioContext||window.webkitAudioContext)),Io},setContext:function(b){Io=b}};class K0 extends ln{constructor(t){super(t)}load(t,e,n,i){const s=this,r=new ol(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(a){try{const c=a.slice(0);J0.getContext().decodeAudioData(c,function(p){e(p)})}catch(c){i?i(c):console.error(c),s.manager.itemError(t)}},n,i)}}class Q0 extends ul{constructor(t,e,n=1){super(void 0,n);const i=new at().set(t),s=new at().set(e),r=new Se(i.r,i.g,i.b),a=new Se(s.r,s.g,s.b),c=Math.sqrt(Math.PI),d=c*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(a).multiplyScalar(c),this.sh.coefficients[1].copy(r).sub(a).multiplyScalar(d)}}Q0.prototype.isHemisphereLightProbe=!0;class $0 extends ul{constructor(t,e=1){super(void 0,e);const n=new at().set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}$0.prototype.isAmbientLightProbe=!0;class eb extends Ot{constructor(t){super();this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class tb{constructor(t,e,n){this.binding=t,this.valueSize=n;let i,s,r;switch(e){case"quaternion":i=this._slerp,s=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,s=t*i+i;let r=this.cumulativeWeight;if(r===0){for(let a=0;a!==i;++a)n[s+a]=n[a];r=e}else{r+=e;const a=e/r;this._mixBufferRegion(n,s,0,a,i)}this.cumulativeWeight=r}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,s=this.cumulativeWeight,r=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=e*this._origIndex;this._mixBufferRegion(n,i,c,1-s,e)}r>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let c=e,d=e+e;c!==d;++c)if(n[c]!==n[c+e]){a.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let s=n,r=i;s!==r;++s)e[s]=e[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,s){if(i>=.5)for(let r=0;r!==s;++r)t[e+r]=t[n+r]}_slerp(t,e,n,i){pr.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,s){const r=this._workIndex*s;pr.multiplyQuaternionsFlat(t,r,t,e,t,n),pr.slerpFlat(t,e,t,e,t,r,i)}_lerp(t,e,n,i,s){const r=1-i;for(let a=0;a!==s;++a){const c=e+a;t[c]=t[c]*r+t[n+a]*i}}_lerpAdditive(t,e,n,i,s){for(let r=0;r!==s;++r){const a=e+r;t[a]=t[a]+t[n+r]*i}}}const cl="\\[\\]\\.:\\/",rb=new RegExp("["+cl+"]","g"),hl="[^"+cl+"]",nb="[^"+cl.replace("\\.","")+"]",ib=/((?:WC+[\/:])*)/.source.replace("WC",hl),sb=/(WCOD+)?/.source.replace("WCOD",nb),ob=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hl),ab=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hl),lb=new RegExp("^"+ib+sb+ob+ab+"$"),ub=["material","materials","bones"];class cb{constructor(t,e,n){const i=n||Ft.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Ft{constructor(t,e,n){this.path=e,this.parsedPath=n||Ft.parseTrackName(e),this.node=Ft.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Ft.Composite(t,e,n):new Ft(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(rb,"")}static parseTrackName(t){const e=lb.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);ub.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(s){for(let r=0;r<s.length;r++){const a=s[r];if(a.name===e||a.uuid===e)return a;const c=n(a.children);if(c)return c}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let s=e.propertyIndex;if(t||(t=Ft.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let d=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let p=0;p<t.length;p++)if(t[p].name===d){d=p;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(d!==void 0){if(t[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[d]}}const r=t[i];if(r===void 0){const d=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",t);return}let a=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else r.fromArray!==void 0&&r.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(c=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ft.Composite=cb;Ft.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ft.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ft.prototype.GetterByBindingType=[Ft.prototype._getValue_direct,Ft.prototype._getValue_array,Ft.prototype._getValue_arrayElement,Ft.prototype._getValue_toArray];Ft.prototype.SetterByBindingTypeAndVersioning=[[Ft.prototype._setValue_direct,Ft.prototype._setValue_direct_setNeedsUpdate,Ft.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_array,Ft.prototype._setValue_array_setNeedsUpdate,Ft.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_arrayElement,Ft.prototype._setValue_arrayElement_setNeedsUpdate,Ft.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_fromArray,Ft.prototype._setValue_fromArray_setNeedsUpdate,Ft.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class hb{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const s=e.tracks,r=s.length,a=new Array(r),c={endingStart:pi,endingEnd:pi};for(let d=0;d!==r;++d){const p=s[d].createInterpolant(null);a[d]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zf,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const i=this._clip.duration,s=t._clip.duration,r=s/i,a=i/s;t.warp(1,r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,s=i.time,r=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,d=a.sampleValues;return c[0]=s,c[1]=s+n,d[0]=t/r,d[1]=e/r,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const c=(t-s)*n;if(c<0||n===0)return;this._startTime=null,e=n*c}e*=this._updateTimeScale(t);const r=this._updateTime(e),a=this._updateWeight(t);if(a>0){const c=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case Ru:for(let p=0,u=c.length;p!==u;++p)c[p].evaluate(r),d[p].accumulateAdditive(a);break;case ea:default:for(let p=0,u=c.length;p!==u;++p)c[p].evaluate(r),d[p].accumulate(i,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;n!==null&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,s=this._loopCount;const r=n===Vf;if(t===0)return s===-1?i:r&&(s&1)==1?e-i:i;if(n===Gf){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=e)i=e;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,r)):this._setEndings(this.repetitions===0,!0,r)),i>=e||i<0){const a=Math.floor(i/e);i-=e*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){const d=t<0;this._setEndings(d,!d,r)}else this._setEndings(!1,!1,r);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(r&&(s&1)==1)return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=mi,i.endingEnd=mi):(t?i.endingStart=this.zeroSlopeAtStart?mi:pi:i.endingStart=Hs,e?i.endingEnd=this.zeroSlopeAtEnd?mi:pi:i.endingEnd=Hs)}_scheduleFading(t,e,n){const i=this._mixer,s=i.time;let r=this._weightInterpolant;r===null&&(r=i._lendControlInterpolant(),this._weightInterpolant=r);const a=r.parameterPositions,c=r.sampleValues;return a[0]=s,c[0]=e,a[1]=s+t,c[1]=n,this}}class db extends gn{constructor(t){super();this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,s=i.length,r=t._propertyBindings,a=t._interpolants,c=n.uuid,d=this._bindingsByRootAndName;let p=d[c];p===void 0&&(p={},d[c]=p);for(let u=0;u!==s;++u){const o=i[u],l=o.name;let h=p[l];if(h!==void 0)r[u]=h;else{if(h=r[u],h!==void 0){h._cacheIndex===null&&(++h.referenceCount,this._addInactiveBinding(h,c,l));continue}const f=e&&e._propertyBindings[u].binding.parsedPath;h=new tb(Ft.create(n,l,f),o.ValueTypeName,o.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,c,l),r[u]=h}a[u].resultBuffer=h.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,i=t._clip.uuid,s=this._actionsByClip[i];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,i,n)}const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];s.useCount++==0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.useCount==0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,s=this._actionsByClip;let r=s[e];if(r===void 0)r={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=r;else{const a=r.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=i.length,i.push(t),r.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,r=this._actionsByClip,a=r[s],c=a.knownActions,d=c[c.length-1],p=t._byClipCacheIndex;d._byClipCacheIndex=p,c[p]=d,c.pop(),t._byClipCacheIndex=null;const u=a.actionByRoot,o=(t._localRoot||this._root).uuid;delete u[o],c.length===0&&delete r[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.referenceCount==0&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,s=this._bindings;let r=i[e];r===void 0&&(r={},i[e]=r),r[n]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,s=n.path,r=this._bindingsByRootAndName,a=r[i],c=e[e.length-1],d=t._cacheIndex;c._cacheIndex=d,e[d]=c,e.pop(),delete a[s],Object.keys(a).length===0&&delete r[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new _h(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,s=e[i];t.__cacheIndex=i,e[i]=t,s.__cacheIndex=n,e[n]=s}clipAction(t,e,n){const i=e||this._root,s=i.uuid;let r=typeof t=="string"?sl.findByName(i,t):t;const a=r!==null?r.uuid:t,c=this._actionsByClip[a];let d=null;if(n===void 0&&(r!==null?n=r.blendMode:n=ea),c!==void 0){const u=c.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;d=c.knownActions[0],r===null&&(r=d._clip)}if(r===null)return null;const p=new hb(this,r,e,n);return this._bindAction(p,d),this._addInactiveAction(p,a,s),p}existingAction(t,e){const n=e||this._root,i=n.uuid,s=typeof t=="string"?sl.findByName(n,t):t,r=s?s.uuid:t,a=this._actionsByClip[r];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,s=Math.sign(t),r=this._accuIndex^=1;for(let d=0;d!==n;++d)e[d]._update(i,t,s,r);const a=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)a[d].apply(r);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const r=s.knownActions;for(let a=0,c=r.length;a!==c;++a){const d=r[a];this._deactivateAction(d);const p=d._cacheIndex,u=e[e.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,u._cacheIndex=p,e[p]=u,e.pop(),this._removeInactiveBindingsForAction(d)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const a=n[r].actionByRoot,c=a[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[e];if(s!==void 0)for(const r in s){const a=s[r];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}db.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class fb extends Ni{constructor(t,e,n=1){super(t,e);this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}fb.prototype.isInstancedInterleavedBuffer=!0;class kh{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(br(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Nh=new Se;class Wb extends Ot{constructor(t,e){super();this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new Ht,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let r=0,a=1,c=32;r<c;r++,a++){const d=r/c*Math.PI*2,p=a/c*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new $t(i,3));const s=new Xn({fog:!1,toneMapped:!1});this.cone=new _s(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Nh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Nh),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const In=new Se,Do=new ft,dl=new ft;class pb extends _s{constructor(t){const e=Fh(t),n=new Ht,i=[],s=[],r=new at(0,0,1),a=new at(0,1,0);for(let d=0;d<e.length;d++){const p=e[d];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(r.r,r.g,r.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new $t(i,3)),n.setAttribute("color",new $t(s,3));const c=new Xn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");dl.copy(this.root.matrixWorld).invert();for(let s=0,r=0;s<e.length;s++){const a=e[s];a.parent&&a.parent.isBone&&(Do.multiplyMatrices(dl,a.matrixWorld),In.setFromMatrixPosition(Do),i.setXYZ(r,In.x,In.y,In.z),Do.multiplyMatrices(dl,a.parent.matrixWorld),In.setFromMatrixPosition(Do),i.setXYZ(r+1,In.x,In.y,In.z),r+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function Fh(b){const t=[];b&&b.isBone&&t.push(b);for(let e=0;e<b.children.length;e++)t.push.apply(t,Fh(b.children[e]));return t}class mb extends _s{constructor(t=10,e=10,n=4473924,i=8947848){n=new at(n),i=new at(i);const s=e/2,r=t/e,a=t/2,c=[],d=[];for(let o=0,l=0,h=-a;o<=e;o++,h+=r){c.push(-a,0,h,a,0,h),c.push(h,0,-a,h,0,a);const f=o===s?n:i;f.toArray(d,l),l+=3,f.toArray(d,l),l+=3,f.toArray(d,l),l+=3,f.toArray(d,l),l+=3}const p=new Ht;p.setAttribute("position",new $t(c,3)),p.setAttribute("color",new $t(d,3));const u=new Xn({vertexColors:!0,toneMapped:!1});super(p,u);this.type="GridHelper"}}const gb=new Float32Array(1);new Int32Array(gb.buffer);Ir.create=function(b,t){return console.log("THREE.Curve.create() has been deprecated"),b.prototype=Object.create(Ir.prototype),b.prototype.constructor=b,b.prototype.getPoint=t,b};tl.prototype.fromPoints=function(b){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(b)};mb.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};pb.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};ln.prototype.extractUrlBase=function(b){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Pn.extractUrlBase(b)};ln.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Rr.prototype.center=function(b){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(b)};Rr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Rr.prototype.isIntersectionBox=function(b){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(b)};Rr.prototype.isIntersectionSphere=function(b){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(b)};Rr.prototype.size=function(b){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(b)};Vn.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};fo.prototype.setFromMatrix=function(b){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(b)};fr.prototype.flattenToArrayOffset=function(b,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(b,t)};fr.prototype.multiplyVector3=function(b){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),b.applyMatrix3(this)};fr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};fr.prototype.applyToBufferAttribute=function(b){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),b.applyMatrix3(this)};fr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};fr.prototype.getInverse=function(b){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(b).invert()};ft.prototype.extractPosition=function(b){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(b)};ft.prototype.flattenToArrayOffset=function(b,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(b,t)};ft.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Se().setFromMatrixColumn(this,3)};ft.prototype.setRotationFromQuaternion=function(b){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(b)};ft.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};ft.prototype.multiplyVector3=function(b){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),b.applyMatrix4(this)};ft.prototype.multiplyVector4=function(b){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),b.applyMatrix4(this)};ft.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};ft.prototype.rotateAxis=function(b){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),b.transformDirection(this)};ft.prototype.crossVector=function(b){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),b.applyMatrix4(this)};ft.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};ft.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};ft.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};ft.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};ft.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};ft.prototype.applyToBufferAttribute=function(b){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),b.applyMatrix4(this)};ft.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};ft.prototype.makeFrustum=function(b,t,e,n,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(b,t,n,e,i,s)};ft.prototype.getInverse=function(b){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(b).invert()};on.prototype.isIntersectionLine=function(b){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(b)};pr.prototype.multiplyVector3=function(b){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),b.applyQuaternion(this)};pr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};xi.prototype.isIntersectionBox=function(b){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(b)};xi.prototype.isIntersectionPlane=function(b){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(b)};xi.prototype.isIntersectionSphere=function(b){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(b)};ir.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};ir.prototype.barycoordFromPoint=function(b,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(b,t)};ir.prototype.midpoint=function(b){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(b)};ir.prototypenormal=function(b){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(b)};ir.prototype.plane=function(b){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(b)};ir.barycoordFromPoint=function(b,t,e,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ir.getBarycoord(b,t,e,n,i)};ir.normal=function(b,t,e,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ir.getNormal(b,t,e,n)};Ss.prototype.extractAllPoints=function(b){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(b)};Ss.prototype.extrude=function(b){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Hi(this,b)};Ss.prototype.makeGeometry=function(b){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new il(this,b)};Ke.prototype.fromAttribute=function(b,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(b,t,e)};Ke.prototype.distanceToManhattan=function(b){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(b)};Ke.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Se.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};Se.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};Se.prototype.getPositionFromMatrix=function(b){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(b)};Se.prototype.getScaleFromMatrix=function(b){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(b)};Se.prototype.getColumnFromMatrix=function(b,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,b)};Se.prototype.applyProjection=function(b){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(b)};Se.prototype.fromAttribute=function(b,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(b,t,e)};Se.prototype.distanceToManhattan=function(b){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(b)};Se.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Vt.prototype.fromAttribute=function(b,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(b,t,e)};Vt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ot.prototype.getChildByName=function(b){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(b)};Ot.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Ot.prototype.translate=function(b,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,b)};Ot.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Ot.prototype.applyMatrix=function(b){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(b)};Object.defineProperties(Ot.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(b){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=b}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});_r.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(_r.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Hf},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Ga.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};xr.prototype.setLens=function(b,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(b)};Object.defineProperties(Zr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(b){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=b}},shadowCameraLeft:{set:function(b){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=b}},shadowCameraRight:{set:function(b){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=b}},shadowCameraTop:{set:function(b){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=b}},shadowCameraBottom:{set:function(b){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=b}},shadowCameraNear:{set:function(b){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=b}},shadowCameraFar:{set:function(b){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=b}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(b){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=b}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(b){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=b}},shadowMapHeight:{set:function(b){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=b}}});Object.defineProperties(tr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ws},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ws)}}});tr.prototype.setDynamic=function(b){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(b===!0?Ws:ss),this};tr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},tr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ht.prototype.addIndex=function(b){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(b)};Ht.prototype.addAttribute=function(b,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(b,new tr(arguments[1],arguments[2]))):b==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(b,t)};Ht.prototype.addDrawCall=function(b,t,e){e!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(b,t)};Ht.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Ht.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Ht.prototype.removeAttribute=function(b){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(b)};Ht.prototype.applyMatrix=function(b){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(b)};Object.defineProperties(Ht.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Ni.prototype.setDynamic=function(b){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(b===!0?Ws:ss),this};Ni.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Hi.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Hi.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Hi.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Uc.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(ur.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new at}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(b){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=b===cu}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(b){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=b}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Hn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(b){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=b}}});Bt.prototype.clearTarget=function(b,t,e,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(b),this.clear(t,e,n)};Bt.prototype.animate=function(b){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(b)};Bt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Bt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Bt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Bt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Bt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Bt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Bt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Bt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Bt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Bt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Bt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Bt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Bt.prototype.enableScissorTest=function(b){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(b)};Bt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Bt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Bt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Bt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Bt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Bt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Bt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Bt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Bt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Bt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Bt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=b}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=b}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(b){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=b===!0?Hr:gr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Nc.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Wr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(b){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=b}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(b){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=b}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(b){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=b}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(b){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=b}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(b){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=b}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(b){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=b}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(b){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=b}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(b){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=b}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(b){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=b}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(b){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=b}}});eb.prototype.load=function(b){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new K0().load(b,function(n){t.setBuffer(n)}),this};Ca.prototype.updateCubeMap=function(b,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(b,t)};Ca.prototype.clear=function(b,t,e,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(b,t,e,n)};yi.crossOrigin=void 0;yi.loadTexture=function(b,t,e,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Sh;i.setCrossOrigin(this.crossOrigin);const s=i.load(b,e,void 0,n);return t&&(s.mapping=t),s};yi.loadTextureCube=function(b,t,e,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new W0;i.setCrossOrigin(this.crossOrigin);const s=i.load(b,e,void 0,n);return t&&(s.mapping=t),s};yi.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};yi.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:au}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=au);var Oo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function yb(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function jo(b){throw new Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Uh={exports:{}};/*! p5.js v1.4.0 June 29, 2021 */(function(b,t){(function(e){b.exports=e()})(function(){return function e(n,i,s){function r(d,p){if(!i[d]){if(!n[d]){var u=typeof jo=="function"&&jo;if(!p&&u)return u(d,!0);if(a)return a(d,!0);var o=new Error("Cannot find module '"+d+"'");throw o.code="MODULE_NOT_FOUND",o}var l=i[d]={exports:{}};n[d][0].call(l.exports,function(h){return r(n[d][1][h]||h)},l,l.exports,e,n,i,s)}return i[d].exports}for(var a=typeof jo=="function"&&jo,c=0;c<s.length;c++)r(s[c]);return r}({1:[function(e,n,i){i.byteLength=function(l){var h=u(l),f=h[0],m=h[1];return 3*(f+m)/4-m},i.toByteArray=function(l){var h,f,m=u(l),g=m[0],v=m[1],x=new a(function(A,E){return 3*(A+E)/4-E}(g,v)),w=0,M=0<v?g-4:g;for(f=0;f<M;f+=4)h=r[l.charCodeAt(f)]<<18|r[l.charCodeAt(f+1)]<<12|r[l.charCodeAt(f+2)]<<6|r[l.charCodeAt(f+3)],x[w++]=h>>16&255,x[w++]=h>>8&255,x[w++]=255&h;return v===2&&(h=r[l.charCodeAt(f)]<<2|r[l.charCodeAt(f+1)]>>4,x[w++]=255&h),v===1&&(h=r[l.charCodeAt(f)]<<10|r[l.charCodeAt(f+1)]<<4|r[l.charCodeAt(f+2)]>>2,x[w++]=h>>8&255,x[w++]=255&h),x},i.fromByteArray=function(l){for(var h,f=l.length,m=f%3,g=[],v=0,x=f-m;v<x;v+=16383)g.push(o(l,v,x<v+16383?x:v+16383));return m==1?(h=l[f-1],g.push(s[h>>2]+s[h<<4&63]+"==")):m==2&&(h=(l[f-2]<<8)+l[f-1],g.push(s[h>>10]+s[h>>4&63]+s[h<<2&63]+"=")),g.join("")};for(var s=[],r=[],a=typeof Uint8Array!="undefined"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=c.length;d<p;++d)s[d]=c[d],r[c.charCodeAt(d)]=d;function u(l){var h=l.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");var f=l.indexOf("=");return f===-1&&(f=h),[f,f===h?0:4-f%4]}function o(l,h,f){for(var m,g,v=[],x=h;x<f;x+=3)m=(l[x]<<16&16711680)+(l[x+1]<<8&65280)+(255&l[x+2]),v.push(s[(g=m)>>18&63]+s[g>>12&63]+s[g>>6&63]+s[63&g]);return v.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(e,n,i){},{}],3:[function(e,n,i){arguments[4][2][0].apply(i,arguments)},{dup:2}],4:[function(e,n,i){(function(s){var r=e("base64-js"),a=e("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=s,i.SlowBuffer=function(C){return+C!=C&&(C=0),s.alloc(+C)},i.INSPECT_MAX_BYTES=50;var d=2147483647;function p(C){if(d<C)throw new RangeError('The value "'+C+'" is invalid for option "size"');var F=new Uint8Array(C);return Object.setPrototypeOf(F,s.prototype),F}function s(C,F,H){if(typeof C!="number")return u(C,F,H);if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(C)}function u(C,F,H){if(typeof C=="string")return function(oe,te){if(typeof te=="string"&&te!==""||(te="utf8"),!s.isEncoding(te))throw new TypeError("Unknown encoding: "+te);var xe=0|m(oe,te),Q=p(xe),ge=Q.write(oe,te);return ge!==xe&&(Q=Q.slice(0,ge)),Q}(C,F);if(ArrayBuffer.isView(C))return h(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(fe(C,ArrayBuffer)||C&&fe(C.buffer,ArrayBuffer))return function(oe,te,xe){if(te<0||oe.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<te+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var Q;return Q=te===void 0&&xe===void 0?new Uint8Array(oe):xe===void 0?new Uint8Array(oe,te):new Uint8Array(oe,te,xe),Object.setPrototypeOf(Q,s.prototype),Q}(C,F,H);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ne=C.valueOf&&C.valueOf();if(ne!=null&&ne!==C)return s.from(ne,F,H);var re=function(oe){if(s.isBuffer(oe)){var te=0|f(oe.length),xe=p(te);return xe.length===0||oe.copy(xe,0,0,te),xe}if(oe.length!==void 0)return typeof oe.length!="number"||de(oe.length)?p(0):h(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return h(oe.data)}(C);if(re)return re;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return s.from(C[Symbol.toPrimitive]("string"),F,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}function o(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function l(C){return o(C),p(C<0?0:0|f(C))}function h(C){for(var F=C.length<0?0:0|f(C.length),H=p(F),ne=0;ne<F;ne+=1)H[ne]=255&C[ne];return H}function f(C){if(d<=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|C}function m(C,F){if(s.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||fe(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);var H=C.length,ne=2<arguments.length&&arguments[2]===!0;if(!ne&&H===0)return 0;for(var re=!1;;)switch(F){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return _e(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return me(C).length;default:if(re)return ne?-1:_e(C).length;F=(""+F).toLowerCase(),re=!0}}function g(C,F,H){var ne=C[F];C[F]=C[H],C[H]=ne}function v(C,F,H,ne,re){if(C.length===0)return-1;if(typeof H=="string"?(ne=H,H=0):2147483647<H?H=2147483647:H<-2147483648&&(H=-2147483648),de(H=+H)&&(H=re?0:C.length-1),H<0&&(H=C.length+H),H>=C.length){if(re)return-1;H=C.length-1}else if(H<0){if(!re)return-1;H=0}if(typeof F=="string"&&(F=s.from(F,ne)),s.isBuffer(F))return F.length===0?-1:x(C,F,H,ne,re);if(typeof F=="number")return F&=255,typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(C,F,H):Uint8Array.prototype.lastIndexOf.call(C,F,H):x(C,[F],H,ne,re);throw new TypeError("val must be string, number or Buffer")}function x(C,F,H,ne,re){var oe,te=1,xe=C.length,Q=F.length;if(ne!==void 0&&((ne=String(ne).toLowerCase())==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(C.length<2||F.length<2)return-1;xe/=te=2,Q/=2,H/=2}function ge(ve,we){return te===1?ve[we]:ve.readUInt16BE(we*te)}if(re){var he=-1;for(oe=H;oe<xe;oe++)if(ge(C,oe)===ge(F,he===-1?0:oe-he)){if(he===-1&&(he=oe),oe-he+1===Q)return he*te}else he!==-1&&(oe-=oe-he),he=-1}else for(xe<H+Q&&(H=xe-Q),oe=H;0<=oe;oe--){for(var G=!0,W=0;W<Q;W++)if(ge(C,oe+W)!==ge(F,W)){G=!1;break}if(G)return oe}return-1}function w(C,F,H,ne){H=Number(H)||0;var re=C.length-H;ne?re<(ne=Number(ne))&&(ne=re):ne=re;var oe=F.length;oe/2<ne&&(ne=oe/2);for(var te=0;te<ne;++te){var xe=parseInt(F.substr(2*te,2),16);if(de(xe))return te;C[H+te]=xe}return te}function M(C,F,H,ne){return ye(function(re){for(var oe=[],te=0;te<re.length;++te)oe.push(255&re.charCodeAt(te));return oe}(F),C,H,ne)}function A(C,F,H,ne){return ye(function(re,oe){for(var te,xe,Q,ge=[],he=0;he<re.length&&!((oe-=2)<0);++he)te=re.charCodeAt(he),xe=te>>8,Q=te%256,ge.push(Q),ge.push(xe);return ge}(F,C.length-H),C,H,ne)}function E(C,F,H){return F===0&&H===C.length?r.fromByteArray(C):r.fromByteArray(C.slice(F,H))}function I(C,F,H){H=Math.min(C.length,H);for(var ne=[],re=F;re<H;){var oe,te,xe,Q,ge=C[re],he=null,G=239<ge?4:223<ge?3:191<ge?2:1;if(re+G<=H)switch(G){case 1:ge<128&&(he=ge);break;case 2:(192&(oe=C[re+1]))==128&&127<(Q=(31&ge)<<6|63&oe)&&(he=Q);break;case 3:oe=C[re+1],te=C[re+2],(192&oe)==128&&(192&te)==128&&2047<(Q=(15&ge)<<12|(63&oe)<<6|63&te)&&(Q<55296||57343<Q)&&(he=Q);break;case 4:oe=C[re+1],te=C[re+2],xe=C[re+3],(192&oe)==128&&(192&te)==128&&(192&xe)==128&&65535<(Q=(15&ge)<<18|(63&oe)<<12|(63&te)<<6|63&xe)&&Q<1114112&&(he=Q)}he===null?(he=65533,G=1):65535<he&&(he-=65536,ne.push(he>>>10&1023|55296),he=56320|1023&he),ne.push(he),re+=G}return function(W){var ve=W.length;if(ve<=R)return String.fromCharCode.apply(String,W);for(var we="",Re=0;Re<ve;)we+=String.fromCharCode.apply(String,W.slice(Re,Re+=R));return we}(ne)}i.kMaxLength=d,(s.TYPED_ARRAY_SUPPORT=function(){try{var C=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf(C,F),C.foo()===42}catch{return!1}}())||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),typeof Symbol!="undefined"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(C,F,H){return u(C,F,H)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(C,F,H){return re=F,oe=H,o(ne=C),ne<=0?p(ne):re!==void 0?typeof oe=="string"?p(ne).fill(re,oe):p(ne).fill(re):p(ne);var ne,re,oe},s.allocUnsafe=function(C){return l(C)},s.allocUnsafeSlow=function(C){return l(C)},s.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==s.prototype},s.compare=function(C,F){if(fe(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),fe(F,Uint8Array)&&(F=s.from(F,F.offset,F.byteLength)),!s.isBuffer(C)||!s.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===F)return 0;for(var H=C.length,ne=F.length,re=0,oe=Math.min(H,ne);re<oe;++re)if(C[re]!==F[re]){H=C[re],ne=F[re];break}return H<ne?-1:ne<H?1:0},s.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(C,F){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return s.alloc(0);var H;if(F===void 0)for(H=F=0;H<C.length;++H)F+=C[H].length;var ne=s.allocUnsafe(F),re=0;for(H=0;H<C.length;++H){var oe=C[H];if(fe(oe,Uint8Array)&&(oe=s.from(oe)),!s.isBuffer(oe))throw new TypeError('"list" argument must be an Array of Buffers');oe.copy(ne,re),re+=oe.length}return ne},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<C;F+=2)g(this,F,F+1);return this},s.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<C;F+=4)g(this,F,F+3),g(this,F+1,F+2);return this},s.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<C;F+=8)g(this,F,F+7),g(this,F+1,F+6),g(this,F+2,F+5),g(this,F+3,F+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var C=this.length;return C===0?"":arguments.length===0?I(this,0,C):function(F,H,ne){var re=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(H>>>=0))return"";for(F=F||"utf8";;)switch(F){case"hex":return O(this,H,ne);case"utf8":case"utf-8":return I(this,H,ne);case"ascii":return P(this,H,ne);case"latin1":case"binary":return D(this,H,ne);case"base64":return E(this,H,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,H,ne);default:if(re)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),re=!0}}.apply(this,arguments)},s.prototype.equals=function(C){if(!s.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||s.compare(this,C)===0},s.prototype.inspect=function(){var C="",F=i.INSPECT_MAX_BYTES;return C=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(C+=" ... "),"<Buffer "+C+">"},c&&(s.prototype[c]=s.prototype.inspect),s.prototype.compare=function(C,F,H,ne,re){if(fe(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),!s.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(F===void 0&&(F=0),H===void 0&&(H=C?C.length:0),ne===void 0&&(ne=0),re===void 0&&(re=this.length),F<0||H>C.length||ne<0||re>this.length)throw new RangeError("out of range index");if(re<=ne&&H<=F)return 0;if(re<=ne)return-1;if(H<=F)return 1;if(this===C)return 0;for(var oe=(re>>>=0)-(ne>>>=0),te=(H>>>=0)-(F>>>=0),xe=Math.min(oe,te),Q=this.slice(ne,re),ge=C.slice(F,H),he=0;he<xe;++he)if(Q[he]!==ge[he]){oe=Q[he],te=ge[he];break}return oe<te?-1:te<oe?1:0},s.prototype.includes=function(C,F,H){return this.indexOf(C,F,H)!==-1},s.prototype.indexOf=function(C,F,H){return v(this,C,F,H,!0)},s.prototype.lastIndexOf=function(C,F,H){return v(this,C,F,H,!1)},s.prototype.write=function(C,F,H,ne){if(F===void 0)ne="utf8",H=this.length,F=0;else if(H===void 0&&typeof F=="string")ne=F,H=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(H)?(H>>>=0,ne===void 0&&(ne="utf8")):(ne=H,H=void 0)}var re=this.length-F;if((H===void 0||re<H)&&(H=re),0<C.length&&(H<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne=ne||"utf8";for(var oe,te,xe,Q,ge,he,G=!1;;)switch(ne){case"hex":return w(this,C,F,H);case"utf8":case"utf-8":return ge=F,he=H,ye(_e(C,(Q=this).length-ge),Q,ge,he);case"ascii":return M(this,C,F,H);case"latin1":case"binary":return M(this,C,F,H);case"base64":return oe=this,te=F,xe=H,ye(me(C),oe,te,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,C,F,H);default:if(G)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),G=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function P(C,F,H){var ne="";H=Math.min(C.length,H);for(var re=F;re<H;++re)ne+=String.fromCharCode(127&C[re]);return ne}function D(C,F,H){var ne="";H=Math.min(C.length,H);for(var re=F;re<H;++re)ne+=String.fromCharCode(C[re]);return ne}function O(C,F,H){var ne=C.length;(!F||F<0)&&(F=0),(!H||H<0||ne<H)&&(H=ne);for(var re="",oe=F;oe<H;++oe)re+=Ee[C[oe]];return re}function j(C,F,H){for(var ne=C.slice(F,H),re="",oe=0;oe<ne.length;oe+=2)re+=String.fromCharCode(ne[oe]+256*ne[oe+1]);return re}function N(C,F,H){if(C%1!=0||C<0)throw new RangeError("offset is not uint");if(H<C+F)throw new RangeError("Trying to access beyond buffer length")}function q(C,F,H,ne,re,oe){if(!s.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(re<F||F<oe)throw new RangeError('"value" argument is out of bounds');if(H+ne>C.length)throw new RangeError("Index out of range")}function X(C,F,H,ne){if(H+ne>C.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function V(C,F,H,ne,re){return F=+F,H>>>=0,re||X(C,0,H,4),a.write(C,F,H,ne,23,4),H+4}function $(C,F,H,ne,re){return F=+F,H>>>=0,re||X(C,0,H,8),a.write(C,F,H,ne,52,8),H+8}s.prototype.slice=function(C,F){var H=this.length;(C=~~C)<0?(C+=H)<0&&(C=0):H<C&&(C=H),(F=F===void 0?H:~~F)<0?(F+=H)<0&&(F=0):H<F&&(F=H),F<C&&(F=C);var ne=this.subarray(C,F);return Object.setPrototypeOf(ne,s.prototype),ne},s.prototype.readUIntLE=function(C,F,H){C>>>=0,F>>>=0,H||N(C,F,this.length);for(var ne=this[C],re=1,oe=0;++oe<F&&(re*=256);)ne+=this[C+oe]*re;return ne},s.prototype.readUIntBE=function(C,F,H){C>>>=0,F>>>=0,H||N(C,F,this.length);for(var ne=this[C+--F],re=1;0<F&&(re*=256);)ne+=this[C+--F]*re;return ne},s.prototype.readUInt8=function(C,F){return C>>>=0,F||N(C,1,this.length),this[C]},s.prototype.readUInt16LE=function(C,F){return C>>>=0,F||N(C,2,this.length),this[C]|this[C+1]<<8},s.prototype.readUInt16BE=function(C,F){return C>>>=0,F||N(C,2,this.length),this[C]<<8|this[C+1]},s.prototype.readUInt32LE=function(C,F){return C>>>=0,F||N(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},s.prototype.readUInt32BE=function(C,F){return C>>>=0,F||N(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},s.prototype.readIntLE=function(C,F,H){C>>>=0,F>>>=0,H||N(C,F,this.length);for(var ne=this[C],re=1,oe=0;++oe<F&&(re*=256);)ne+=this[C+oe]*re;return(re*=128)<=ne&&(ne-=Math.pow(2,8*F)),ne},s.prototype.readIntBE=function(C,F,H){C>>>=0,F>>>=0,H||N(C,F,this.length);for(var ne=F,re=1,oe=this[C+--ne];0<ne&&(re*=256);)oe+=this[C+--ne]*re;return(re*=128)<=oe&&(oe-=Math.pow(2,8*F)),oe},s.prototype.readInt8=function(C,F){return C>>>=0,F||N(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},s.prototype.readInt16LE=function(C,F){C>>>=0,F||N(C,2,this.length);var H=this[C]|this[C+1]<<8;return 32768&H?4294901760|H:H},s.prototype.readInt16BE=function(C,F){C>>>=0,F||N(C,2,this.length);var H=this[C+1]|this[C]<<8;return 32768&H?4294901760|H:H},s.prototype.readInt32LE=function(C,F){return C>>>=0,F||N(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},s.prototype.readInt32BE=function(C,F){return C>>>=0,F||N(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},s.prototype.readFloatLE=function(C,F){return C>>>=0,F||N(C,4,this.length),a.read(this,C,!0,23,4)},s.prototype.readFloatBE=function(C,F){return C>>>=0,F||N(C,4,this.length),a.read(this,C,!1,23,4)},s.prototype.readDoubleLE=function(C,F){return C>>>=0,F||N(C,8,this.length),a.read(this,C,!0,52,8)},s.prototype.readDoubleBE=function(C,F){return C>>>=0,F||N(C,8,this.length),a.read(this,C,!1,52,8)},s.prototype.writeUIntLE=function(C,F,H,ne){C=+C,F>>>=0,H>>>=0,ne||q(this,C,F,H,Math.pow(2,8*H)-1,0);var re=1,oe=0;for(this[F]=255&C;++oe<H&&(re*=256);)this[F+oe]=C/re&255;return F+H},s.prototype.writeUIntBE=function(C,F,H,ne){C=+C,F>>>=0,H>>>=0,ne||q(this,C,F,H,Math.pow(2,8*H)-1,0);var re=H-1,oe=1;for(this[F+re]=255&C;0<=--re&&(oe*=256);)this[F+re]=C/oe&255;return F+H},s.prototype.writeUInt8=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,1,255,0),this[F]=255&C,F+1},s.prototype.writeUInt16LE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,2,65535,0),this[F]=255&C,this[F+1]=C>>>8,F+2},s.prototype.writeUInt16BE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,2,65535,0),this[F]=C>>>8,this[F+1]=255&C,F+2},s.prototype.writeUInt32LE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,4,4294967295,0),this[F+3]=C>>>24,this[F+2]=C>>>16,this[F+1]=C>>>8,this[F]=255&C,F+4},s.prototype.writeUInt32BE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,4,4294967295,0),this[F]=C>>>24,this[F+1]=C>>>16,this[F+2]=C>>>8,this[F+3]=255&C,F+4},s.prototype.writeIntLE=function(C,F,H,ne){if(C=+C,F>>>=0,!ne){var re=Math.pow(2,8*H-1);q(this,C,F,H,re-1,-re)}var oe=0,te=1,xe=0;for(this[F]=255&C;++oe<H&&(te*=256);)C<0&&xe===0&&this[F+oe-1]!==0&&(xe=1),this[F+oe]=(C/te>>0)-xe&255;return F+H},s.prototype.writeIntBE=function(C,F,H,ne){if(C=+C,F>>>=0,!ne){var re=Math.pow(2,8*H-1);q(this,C,F,H,re-1,-re)}var oe=H-1,te=1,xe=0;for(this[F+oe]=255&C;0<=--oe&&(te*=256);)C<0&&xe===0&&this[F+oe+1]!==0&&(xe=1),this[F+oe]=(C/te>>0)-xe&255;return F+H},s.prototype.writeInt8=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,1,127,-128),C<0&&(C=255+C+1),this[F]=255&C,F+1},s.prototype.writeInt16LE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,2,32767,-32768),this[F]=255&C,this[F+1]=C>>>8,F+2},s.prototype.writeInt16BE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,2,32767,-32768),this[F]=C>>>8,this[F+1]=255&C,F+2},s.prototype.writeInt32LE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,4,2147483647,-2147483648),this[F]=255&C,this[F+1]=C>>>8,this[F+2]=C>>>16,this[F+3]=C>>>24,F+4},s.prototype.writeInt32BE=function(C,F,H){return C=+C,F>>>=0,H||q(this,C,F,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[F]=C>>>24,this[F+1]=C>>>16,this[F+2]=C>>>8,this[F+3]=255&C,F+4},s.prototype.writeFloatLE=function(C,F,H){return V(this,C,F,!0,H)},s.prototype.writeFloatBE=function(C,F,H){return V(this,C,F,!1,H)},s.prototype.writeDoubleLE=function(C,F,H){return $(this,C,F,!0,H)},s.prototype.writeDoubleBE=function(C,F,H){return $(this,C,F,!1,H)},s.prototype.copy=function(C,F,H,ne){if(!s.isBuffer(C))throw new TypeError("argument should be a Buffer");if(H=H||0,ne||ne===0||(ne=this.length),F>=C.length&&(F=C.length),F=F||0,0<ne&&ne<H&&(ne=H),ne===H||C.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),C.length-F<ne-H&&(ne=C.length-F+H);var re=ne-H;if(this===C&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(F,H,ne);else if(this===C&&H<F&&F<ne)for(var oe=re-1;0<=oe;--oe)C[oe+F]=this[oe+H];else Uint8Array.prototype.set.call(C,this.subarray(H,ne),F);return re},s.prototype.fill=function(C,F,H,ne){if(typeof C=="string"){if(typeof F=="string"?(ne=F,F=0,H=this.length):typeof H=="string"&&(ne=H,H=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!s.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(C.length===1){var re=C.charCodeAt(0);(ne==="utf8"&&re<128||ne==="latin1")&&(C=re)}}else typeof C=="number"?C&=255:typeof C=="boolean"&&(C=Number(C));if(F<0||this.length<F||this.length<H)throw new RangeError("Out of range index");if(H<=F)return this;var oe;if(F>>>=0,H=H===void 0?this.length:H>>>0,typeof(C=C||0)=="number")for(oe=F;oe<H;++oe)this[oe]=C;else{var te=s.isBuffer(C)?C:s.from(C,ne),xe=te.length;if(xe===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(oe=0;oe<H-F;++oe)this[oe+F]=te[oe%xe]}return this};var K=/[^+/0-9A-Za-z-_]/g;function _e(C,F){var H;F=F||1/0;for(var ne=C.length,re=null,oe=[],te=0;te<ne;++te){if(55295<(H=C.charCodeAt(te))&&H<57344){if(!re){if(56319<H){-1<(F-=3)&&oe.push(239,191,189);continue}if(te+1===ne){-1<(F-=3)&&oe.push(239,191,189);continue}re=H;continue}if(H<56320){-1<(F-=3)&&oe.push(239,191,189),re=H;continue}H=65536+(re-55296<<10|H-56320)}else re&&-1<(F-=3)&&oe.push(239,191,189);if(re=null,H<128){if(--F<0)break;oe.push(H)}else if(H<2048){if((F-=2)<0)break;oe.push(H>>6|192,63&H|128)}else if(H<65536){if((F-=3)<0)break;oe.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((F-=4)<0)break;oe.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return oe}function me(C){return r.toByteArray(function(F){if((F=(F=F.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}(C))}function ye(C,F,H,ne){for(var re=0;re<ne&&!(re+H>=F.length||re>=C.length);++re)F[re+H]=C[re];return re}function fe(C,F){return C instanceof F||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===F.name}function de(C){return C!=C}var Ee=function(){for(var C="0123456789abcdef",F=new Array(256),H=0;H<16;++H)for(var ne=16*H,re=0;re<16;++re)F[ne+re]=C[H]+C[re];return F}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:233}],5:[function(e,n,i){n.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},{}],6:[function(e,n,i){var s=e("../internals/is-object");n.exports=function(r){if(!s(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype");return r}},{"../internals/is-object":73}],7:[function(e,n,i){var s=e("../internals/well-known-symbol"),r=e("../internals/object-create"),a=e("../internals/object-define-property"),c=s("unscopables"),d=Array.prototype;d[c]==null&&a.f(d,c,{configurable:!0,value:r(null)}),n.exports=function(p){d[c][p]=!0}},{"../internals/object-create":89,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],8:[function(e,n,i){var s=e("../internals/string-multibyte").charAt;n.exports=function(r,a,c){return a+(c?s(r,a).length:1)}},{"../internals/string-multibyte":122}],9:[function(e,n,i){n.exports=function(s,r,a){if(!(s instanceof r))throw TypeError("Incorrect "+(a?a+" ":"")+"invocation");return s}},{}],10:[function(e,n,i){var s=e("../internals/is-object");n.exports=function(r){if(!s(r))throw TypeError(String(r)+" is not an object");return r}},{"../internals/is-object":73}],11:[function(e,n,i){n.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},{}],12:[function(e,n,i){function s(V){return p(V)&&u(X,o(V))}var r,a=e("../internals/array-buffer-native"),c=e("../internals/descriptors"),d=e("../internals/global"),p=e("../internals/is-object"),u=e("../internals/has"),o=e("../internals/classof"),l=e("../internals/create-non-enumerable-property"),h=e("../internals/redefine"),f=e("../internals/object-define-property").f,m=e("../internals/object-get-prototype-of"),g=e("../internals/object-set-prototype-of"),v=e("../internals/well-known-symbol"),x=e("../internals/uid"),w=d.Int8Array,M=w&&w.prototype,A=d.Uint8ClampedArray,E=A&&A.prototype,I=w&&m(w),R=M&&m(M),P=Object.prototype,D=P.isPrototypeOf,O=v("toStringTag"),j=x("TYPED_ARRAY_TAG"),N=a&&!!g&&o(d.opera)!=="Opera",q=!1,X={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(r in X)d[r]||(N=!1);if((!N||typeof I!="function"||I===Function.prototype)&&(I=function(){throw TypeError("Incorrect invocation")},N))for(r in X)d[r]&&g(d[r],I);if((!N||!R||R===P)&&(R=I.prototype,N))for(r in X)d[r]&&g(d[r].prototype,R);if(N&&m(E)!==R&&g(E,R),c&&!u(R,O))for(r in q=!0,f(R,O,{get:function(){return p(this)?this[j]:void 0}}),X)d[r]&&l(d[r],j,r);n.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:q&&j,aTypedArray:function(V){if(s(V))return V;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(V){if(g){if(D.call(I,V))return V}else for(var $ in X)if(u(X,r)){var K=d[$];if(K&&(V===K||D.call(K,V)))return V}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(V,$,K){if(c){if(K)for(var _e in X){var me=d[_e];me&&u(me.prototype,V)&&delete me.prototype[V]}R[V]&&!K||h(R,V,K?$:N&&M[V]||$)}},exportTypedArrayStaticMethod:function(V,$,K){var _e,me;if(c){if(g){if(K)for(_e in X)(me=d[_e])&&u(me,V)&&delete me[V];if(I[V]&&!K)return;try{return h(I,V,K?$:N&&w[V]||$)}catch{}}for(_e in X)!(me=d[_e])||me[V]&&!K||h(me,V,$)}},isView:function(V){var $=o(V);return $==="DataView"||u(X,$)},isTypedArray:s,TypedArray:I,TypedArrayPrototype:R}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":58,"../internals/has":59,"../internals/is-object":73,"../internals/object-define-property":91,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine":107,"../internals/uid":142,"../internals/well-known-symbol":145}],13:[function(e,n,i){function s(he){return[255&he]}function r(he){return[255&he,he>>8&255]}function a(he){return[255&he,he>>8&255,he>>16&255,he>>24&255]}function c(he){return he[3]<<24|he[2]<<16|he[1]<<8|he[0]}function d(he){return H(he,23,4)}function p(he){return H(he,52,8)}function u(he,G){O(he[_e],G,{get:function(){return X(this)[G]}})}function o(he,G,W,ve){var we=E(W),Re=X(he);if(we+G>Re.byteLength)throw F(me);var Ge=X(Re.buffer).bytes,Pe=we+Re.byteOffset,Ze=Ge.slice(Pe,Pe+G);return ve?Ze:Ze.reverse()}function l(he,G,W,ve,we,Re){var Ge=E(W),Pe=X(he);if(Ge+G>Pe.byteLength)throw F(me);for(var Ze=X(Pe.buffer).bytes,Je=Ge+Pe.byteOffset,Ce=ve(+we),le=0;le<G;le++)Ze[Je+le]=Ce[Re?le:G-le-1]}var h=e("../internals/global"),f=e("../internals/descriptors"),m=e("../internals/array-buffer-native"),g=e("../internals/create-non-enumerable-property"),v=e("../internals/redefine-all"),x=e("../internals/fails"),w=e("../internals/an-instance"),M=e("../internals/to-integer"),A=e("../internals/to-length"),E=e("../internals/to-index"),I=e("../internals/ieee754"),R=e("../internals/object-get-prototype-of"),P=e("../internals/object-set-prototype-of"),D=e("../internals/object-get-own-property-names").f,O=e("../internals/object-define-property").f,j=e("../internals/array-fill"),N=e("../internals/set-to-string-tag"),q=e("../internals/internal-state"),X=q.get,V=q.set,$="ArrayBuffer",K="DataView",_e="prototype",me="Wrong index",ye=h[$],fe=ye,de=h[K],Ee=de&&de[_e],C=Object.prototype,F=h.RangeError,H=I.pack,ne=I.unpack;if(m){if(!x(function(){ye(1)})||!x(function(){new ye(-1)})||x(function(){return new ye,new ye(1.5),new ye(NaN),ye.name!=$})){for(var re,oe=(fe=function(he){return w(this,fe),new ye(E(he))})[_e]=ye[_e],te=D(ye),xe=0;te.length>xe;)(re=te[xe++])in fe||g(fe,re,ye[re]);oe.constructor=fe}P&&R(Ee)!==C&&P(Ee,C);var Q=new de(new fe(2)),ge=Ee.setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||v(Ee,{setInt8:function(he,G){ge.call(this,he,G<<24>>24)},setUint8:function(he,G){ge.call(this,he,G<<24>>24)}},{unsafe:!0})}else fe=function(he){w(this,fe,$);var G=E(he);V(this,{bytes:j.call(new Array(G),0),byteLength:G}),f||(this.byteLength=G)},de=function(he,G,W){w(this,de,K),w(he,fe,K);var ve=X(he).byteLength,we=M(G);if(we<0||ve<we)throw F("Wrong offset");if(ve<we+(W=W===void 0?ve-we:A(W)))throw F("Wrong length");V(this,{buffer:he,byteLength:W,byteOffset:we}),f||(this.buffer=he,this.byteLength=W,this.byteOffset=we)},f&&(u(fe,"byteLength"),u(de,"buffer"),u(de,"byteLength"),u(de,"byteOffset")),v(de[_e],{getInt8:function(he){return o(this,1,he)[0]<<24>>24},getUint8:function(he){return o(this,1,he)[0]},getInt16:function(he,G){var W=o(this,2,he,1<arguments.length?G:void 0);return(W[1]<<8|W[0])<<16>>16},getUint16:function(he,G){var W=o(this,2,he,1<arguments.length?G:void 0);return W[1]<<8|W[0]},getInt32:function(he,G){return c(o(this,4,he,1<arguments.length?G:void 0))},getUint32:function(he,G){return c(o(this,4,he,1<arguments.length?G:void 0))>>>0},getFloat32:function(he,G){return ne(o(this,4,he,1<arguments.length?G:void 0),23)},getFloat64:function(he,G){return ne(o(this,8,he,1<arguments.length?G:void 0),52)},setInt8:function(he,G){l(this,1,he,s,G)},setUint8:function(he,G){l(this,1,he,s,G)},setInt16:function(he,G,W){l(this,2,he,r,G,2<arguments.length?W:void 0)},setUint16:function(he,G,W){l(this,2,he,r,G,2<arguments.length?W:void 0)},setInt32:function(he,G,W){l(this,4,he,a,G,2<arguments.length?W:void 0)},setUint32:function(he,G,W){l(this,4,he,a,G,2<arguments.length?W:void 0)},setFloat32:function(he,G,W){l(this,4,he,d,G,2<arguments.length?W:void 0)},setFloat64:function(he,G,W){l(this,8,he,p,G,2<arguments.length?W:void 0)}});N(fe,$),N(de,K),n.exports={ArrayBuffer:fe,DataView:de}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/ieee754":64,"../internals/internal-state":69,"../internals/object-define-property":91,"../internals/object-get-own-property-names":94,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine-all":106,"../internals/set-to-string-tag":116,"../internals/to-index":130,"../internals/to-integer":132,"../internals/to-length":133}],14:[function(e,n,i){var s=e("../internals/to-object"),r=e("../internals/to-absolute-index"),a=e("../internals/to-length"),c=Math.min;n.exports=[].copyWithin||function(d,p,u){var o=s(this),l=a(o.length),h=r(d,l),f=r(p,l),m=2<arguments.length?u:void 0,g=c((m===void 0?l:r(m,l))-f,l-h),v=1;for(f<h&&h<f+g&&(v=-1,f+=g-1,h+=g-1);0<g--;)f in o?o[h]=o[f]:delete o[h],h+=v,f+=v;return o}},{"../internals/to-absolute-index":129,"../internals/to-length":133,"../internals/to-object":134}],15:[function(e,n,i){var s=e("../internals/to-object"),r=e("../internals/to-absolute-index"),a=e("../internals/to-length");n.exports=function(c,d,p){for(var u=s(this),o=a(u.length),l=arguments.length,h=r(1<l?d:void 0,o),f=2<l?p:void 0,m=f===void 0?o:r(f,o);h<m;)u[h++]=c;return u}},{"../internals/to-absolute-index":129,"../internals/to-length":133,"../internals/to-object":134}],16:[function(e,n,i){var s=e("../internals/array-iteration").forEach,r=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),c=r("forEach"),d=a("forEach");n.exports=c&&d?[].forEach:function(p,u){return s(this,p,1<arguments.length?u:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,n,i){var s=e("../internals/function-bind-context"),r=e("../internals/to-object"),a=e("../internals/call-with-safe-iteration-closing"),c=e("../internals/is-array-iterator-method"),d=e("../internals/to-length"),p=e("../internals/create-property"),u=e("../internals/get-iterator-method");n.exports=function(o,l,h){var f,m,g,v,x,w,M=r(o),A=typeof this=="function"?this:Array,E=arguments.length,I=1<E?l:void 0,R=I!==void 0,P=u(M),D=0;if(R&&(I=s(I,2<E?h:void 0,2)),P==null||A==Array&&c(P))for(m=new A(f=d(M.length));D<f;D++)w=R?I(M[D],D):M[D],p(m,D,w);else for(x=(v=P.call(M)).next,m=new A;!(g=x.call(v)).done;D++)w=R?a(v,I,[g.value,D],!0):g.value,p(m,D,w);return m.length=D,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133,"../internals/to-object":134}],18:[function(e,n,i){function s(d){return function(p,u,o){var l,h=r(p),f=a(h.length),m=c(o,f);if(d&&u!=u){for(;m<f;)if((l=h[m++])!=l)return!0}else for(;m<f;m++)if((d||m in h)&&h[m]===u)return d||m||0;return!d&&-1}}var r=e("../internals/to-indexed-object"),a=e("../internals/to-length"),c=e("../internals/to-absolute-index");n.exports={includes:s(!0),indexOf:s(!1)}},{"../internals/to-absolute-index":129,"../internals/to-indexed-object":131,"../internals/to-length":133}],19:[function(e,n,i){function s(o){var l=o==1,h=o==2,f=o==3,m=o==4,g=o==6,v=o==5||g;return function(x,w,M,A){for(var E,I,R=c(x),P=a(R),D=r(w,M,3),O=d(P.length),j=0,N=A||p,q=l?N(x,O):h?N(x,0):void 0;j<O;j++)if((v||j in P)&&(I=D(E=P[j],j,R),o)){if(l)q[j]=I;else if(I)switch(o){case 3:return!0;case 5:return E;case 6:return j;case 2:u.call(q,E)}else if(m)return!1}return g?-1:f||m?m:q}}var r=e("../internals/function-bind-context"),a=e("../internals/indexed-object"),c=e("../internals/to-object"),d=e("../internals/to-length"),p=e("../internals/array-species-create"),u=[].push;n.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":53,"../internals/indexed-object":65,"../internals/to-length":133,"../internals/to-object":134}],20:[function(e,n,i){var s=e("../internals/to-indexed-object"),r=e("../internals/to-integer"),a=e("../internals/to-length"),c=e("../internals/array-method-is-strict"),d=e("../internals/array-method-uses-to-length"),p=Math.min,u=[].lastIndexOf,o=!!u&&1/[1].lastIndexOf(1,-0)<0,l=c("lastIndexOf"),h=d("indexOf",{ACCESSORS:!0,1:0}),f=o||!l||!h;n.exports=f?function(m,g){if(o)return u.apply(this,arguments)||0;var v=s(this),x=a(v.length),w=x-1;for(1<arguments.length&&(w=p(w,r(g))),w<0&&(w=x+w);0<=w;w--)if(w in v&&v[w]===m)return w||0;return-1}:u},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":131,"../internals/to-integer":132,"../internals/to-length":133}],21:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/well-known-symbol"),a=e("../internals/engine-v8-version"),c=r("species");n.exports=function(d){return 51<=a||!s(function(){var p=[];return(p.constructor={})[c]=function(){return{foo:1}},p[d](Boolean).foo!==1})}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":145}],22:[function(e,n,i){var s=e("../internals/fails");n.exports=function(r,a){var c=[][r];return!!c&&s(function(){c.call(null,a||function(){throw 1},1)})}},{"../internals/fails":50}],23:[function(e,n,i){function s(u){throw u}var r=e("../internals/descriptors"),a=e("../internals/fails"),c=e("../internals/has"),d=Object.defineProperty,p={};n.exports=function(u,o){if(c(p,u))return p[u];var l=[][u],h=!!c(o=o||{},"ACCESSORS")&&o.ACCESSORS,f=c(o,0)?o[0]:s,m=c(o,1)?o[1]:void 0;return p[u]=!!l&&!a(function(){if(h&&!r)return!0;var g={length:-1};h?d(g,1,{enumerable:!0,get:s}):g[1]=1,l.call(g,f,m)})}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":59}],24:[function(e,n,i){function s(p){return function(u,o,l,h){r(o);var f=a(u),m=c(f),g=d(f.length),v=p?g-1:0,x=p?-1:1;if(l<2)for(;;){if(v in m){h=m[v],v+=x;break}if(v+=x,p?v<0:g<=v)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=v:v<g;v+=x)v in m&&(h=o(h,m[v],v,f));return h}}var r=e("../internals/a-function"),a=e("../internals/to-object"),c=e("../internals/indexed-object"),d=e("../internals/to-length");n.exports={left:s(!1),right:s(!0)}},{"../internals/a-function":5,"../internals/indexed-object":65,"../internals/to-length":133,"../internals/to-object":134}],25:[function(e,n,i){var s=e("../internals/is-object"),r=e("../internals/is-array"),a=e("../internals/well-known-symbol")("species");n.exports=function(c,d){var p;return r(c)&&(typeof(p=c.constructor)!="function"||p!==Array&&!r(p.prototype)?s(p)&&(p=p[a])===null&&(p=void 0):p=void 0),new(p===void 0?Array:p)(d===0?0:d)}},{"../internals/is-array":71,"../internals/is-object":73,"../internals/well-known-symbol":145}],26:[function(e,n,i){var s=e("../internals/an-object");n.exports=function(r,a,c,d){try{return d?a(s(c)[0],c[1]):a(c)}catch(u){var p=r.return;throw p!==void 0&&s(p.call(r)),u}}},{"../internals/an-object":10}],27:[function(e,n,i){var s=e("../internals/well-known-symbol")("iterator"),r=!1;try{var a=0,c={next:function(){return{done:!!a++}},return:function(){r=!0}};c[s]=function(){return this},Array.from(c,function(){throw 2})}catch{}n.exports=function(d,p){if(!p&&!r)return!1;var u=!1;try{var o={};o[s]=function(){return{next:function(){return{done:u=!0}}}},d(o)}catch{}return u}},{"../internals/well-known-symbol":145}],28:[function(e,n,i){var s={}.toString;n.exports=function(r){return s.call(r).slice(8,-1)}},{}],29:[function(e,n,i){var s=e("../internals/to-string-tag-support"),r=e("../internals/classof-raw"),a=e("../internals/well-known-symbol")("toStringTag"),c=r(function(){return arguments}())=="Arguments";n.exports=s?r:function(d){var p,u,o;return d===void 0?"Undefined":d===null?"Null":typeof(u=function(l,h){try{return l[h]}catch{}}(p=Object(d),a))=="string"?u:c?r(p):(o=r(p))=="Object"&&typeof p.callee=="function"?"Arguments":o}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":138,"../internals/well-known-symbol":145}],30:[function(e,n,i){var s=e("../internals/object-define-property").f,r=e("../internals/object-create"),a=e("../internals/redefine-all"),c=e("../internals/function-bind-context"),d=e("../internals/an-instance"),p=e("../internals/iterate"),u=e("../internals/define-iterator"),o=e("../internals/set-species"),l=e("../internals/descriptors"),h=e("../internals/internal-metadata").fastKey,f=e("../internals/internal-state"),m=f.set,g=f.getterFor;n.exports={getConstructor:function(v,x,w,M){function A(P,D,O){var j,N,q=I(P),X=R(P,D);return X?X.value=O:(q.last=X={index:N=h(D,!0),key:D,value:O,previous:j=q.last,next:void 0,removed:!1},q.first||(q.first=X),j&&(j.next=X),l?q.size++:P.size++,N!=="F"&&(q.index[N]=X)),P}var E=v(function(P,D){d(P,E,x),m(P,{type:x,index:r(null),first:void 0,last:void 0,size:0}),l||(P.size=0),D!=null&&p(D,P[M],P,w)}),I=g(x),R=function(P,D){var O,j=I(P),N=h(D);if(N!=="F")return j.index[N];for(O=j.first;O;O=O.next)if(O.key==D)return O};return a(E.prototype,{clear:function(){for(var P=I(this),D=P.index,O=P.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=void 0),delete D[O.index],O=O.next;P.first=P.last=void 0,l?P.size=0:this.size=0},delete:function(P){var D=I(this),O=R(this,P);if(O){var j=O.next,N=O.previous;delete D.index[O.index],O.removed=!0,N&&(N.next=j),j&&(j.previous=N),D.first==O&&(D.first=j),D.last==O&&(D.last=N),l?D.size--:this.size--}return!!O},forEach:function(P,D){for(var O,j=I(this),N=c(P,1<arguments.length?D:void 0,3);O=O?O.next:j.first;)for(N(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(P){return!!R(this,P)}}),a(E.prototype,w?{get:function(P){var D=R(this,P);return D&&D.value},set:function(P,D){return A(this,P===0?0:P,D)}}:{add:function(P){return A(this,P=P===0?0:P,P)}}),l&&s(E.prototype,"size",{get:function(){return I(this).size}}),E},setStrong:function(v,x,w){var M=x+" Iterator",A=g(x),E=g(M);u(v,x,function(I,R){m(this,{type:M,target:I,state:A(I),kind:R,last:void 0})},function(){for(var I=E(this),R=I.kind,P=I.last;P&&P.removed;)P=P.previous;return I.target&&(I.last=P=P?P.next:I.state.first)?R=="keys"?{value:P.key,done:!1}:R=="values"?{value:P.value,done:!1}:{value:[P.key,P.value],done:!1}:{value:I.target=void 0,done:!0}},w?"entries":"values",!w,!0),o(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":53,"../internals/internal-metadata":68,"../internals/internal-state":69,"../internals/iterate":76,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/redefine-all":106,"../internals/set-species":115}],31:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/global"),a=e("../internals/is-forced"),c=e("../internals/redefine"),d=e("../internals/internal-metadata"),p=e("../internals/iterate"),u=e("../internals/an-instance"),o=e("../internals/is-object"),l=e("../internals/fails"),h=e("../internals/check-correctness-of-iteration"),f=e("../internals/set-to-string-tag"),m=e("../internals/inherit-if-required");n.exports=function(g,v,x){function w(V){var $=R[V];c(R,V,V=="add"?function(K){return $.call(this,K===0?0:K),this}:V=="delete"?function(K){return!(A&&!o(K))&&$.call(this,K===0?0:K)}:V=="get"?function(K){return A&&!o(K)?void 0:$.call(this,K===0?0:K)}:V=="has"?function(K){return!(A&&!o(K))&&$.call(this,K===0?0:K)}:function(K,_e){return $.call(this,K===0?0:K,_e),this})}var M=g.indexOf("Map")!==-1,A=g.indexOf("Weak")!==-1,E=M?"set":"add",I=r[g],R=I&&I.prototype,P=I,D={};if(a(g,typeof I!="function"||!(A||R.forEach&&!l(function(){new I().entries().next()}))))P=x.getConstructor(v,g,M,E),d.REQUIRED=!0;else if(a(g,!0)){var O=new P,j=O[E](A?{}:-0,1)!=O,N=l(function(){O.has(1)}),q=h(function(V){new I(V)}),X=!A&&l(function(){for(var V=new I,$=5;$--;)V[E]($,$);return!V.has(-0)});q||(((P=v(function(V,$){u(V,P,g);var K=m(new I,V,P);return $!=null&&p($,K[E],K,M),K})).prototype=R).constructor=P),(N||X)&&(w("delete"),w("has"),M&&w("get")),(X||j)&&w(E),A&&R.clear&&delete R.clear}return D[g]=P,s({global:!0,forced:P!=I},D),f(P,g),A||x.setStrong(P,g,M),P}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":58,"../internals/inherit-if-required":66,"../internals/internal-metadata":68,"../internals/is-forced":72,"../internals/is-object":73,"../internals/iterate":76,"../internals/redefine":107,"../internals/set-to-string-tag":116}],32:[function(e,n,i){var s=e("../internals/has"),r=e("../internals/own-keys"),a=e("../internals/object-get-own-property-descriptor"),c=e("../internals/object-define-property");n.exports=function(d,p){for(var u=r(p),o=c.f,l=a.f,h=0;h<u.length;h++){var f=u[h];s(d,f)||o(d,f,l(p,f))}}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/own-keys":102}],33:[function(e,n,i){var s=e("../internals/well-known-symbol")("match");n.exports=function(r){var a=/./;try{"/./"[r](a)}catch{try{return a[s]=!1,"/./"[r](a)}catch{}}return!1}},{"../internals/well-known-symbol":145}],34:[function(e,n,i){var s=e("../internals/fails");n.exports=!s(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},{"../internals/fails":50}],35:[function(e,n,i){var s=e("../internals/require-object-coercible"),r=/"/g;n.exports=function(a,c,d,p){var u=String(s(a)),o="<"+c;return d!==""&&(o+=" "+d+'="'+String(p).replace(r,"&quot;")+'"'),o+">"+u+"</"+c+">"}},{"../internals/require-object-coercible":112}],36:[function(e,n,i){function s(){return this}var r=e("../internals/iterators-core").IteratorPrototype,a=e("../internals/object-create"),c=e("../internals/create-property-descriptor"),d=e("../internals/set-to-string-tag"),p=e("../internals/iterators");n.exports=function(u,o,l){var h=o+" Iterator";return u.prototype=a(r,{next:c(1,l)}),d(u,h,!1,!0),p[h]=s,u}},{"../internals/create-property-descriptor":38,"../internals/iterators":78,"../internals/iterators-core":77,"../internals/object-create":89,"../internals/set-to-string-tag":116}],37:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-define-property"),a=e("../internals/create-property-descriptor");n.exports=s?function(c,d,p){return r.f(c,d,a(1,p))}:function(c,d,p){return c[d]=p,c}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":91}],38:[function(e,n,i){n.exports=function(s,r){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:r}}},{}],39:[function(e,n,i){var s=e("../internals/to-primitive"),r=e("../internals/object-define-property"),a=e("../internals/create-property-descriptor");n.exports=function(c,d,p){var u=s(d);u in c?r.f(c,u,a(0,p)):c[u]=p}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":91,"../internals/to-primitive":137}],40:[function(e,n,i){function s(){return this}var r=e("../internals/export"),a=e("../internals/create-iterator-constructor"),c=e("../internals/object-get-prototype-of"),d=e("../internals/object-set-prototype-of"),p=e("../internals/set-to-string-tag"),u=e("../internals/create-non-enumerable-property"),o=e("../internals/redefine"),l=e("../internals/well-known-symbol"),h=e("../internals/is-pure"),f=e("../internals/iterators"),m=e("../internals/iterators-core"),g=m.IteratorPrototype,v=m.BUGGY_SAFARI_ITERATORS,x=l("iterator"),w="values",M="entries";n.exports=function(A,E,I,R,P,D,O){a(I,E,R);function j(fe){if(fe===P&&me)return me;if(!v&&fe in K)return K[fe];switch(fe){case"keys":case w:case M:return function(){return new I(this,fe)}}return function(){return new I(this)}}var N,q,X,V=E+" Iterator",$=!1,K=A.prototype,_e=K[x]||K["@@iterator"]||P&&K[P],me=!v&&_e||j(P),ye=E=="Array"&&K.entries||_e;if(ye&&(N=c(ye.call(new A)),g!==Object.prototype&&N.next&&(h||c(N)===g||(d?d(N,g):typeof N[x]!="function"&&u(N,x,s)),p(N,V,!0,!0),h&&(f[V]=s))),P==w&&_e&&_e.name!==w&&($=!0,me=function(){return _e.call(this)}),h&&!O||K[x]===me||u(K,x,me),f[E]=me,P)if(q={values:j(w),keys:D?me:j("keys"),entries:j(M)},O)for(X in q)!v&&!$&&X in K||o(K,X,q[X]);else r({target:E,proto:!0,forced:v||$},q);return q}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":74,"../internals/iterators":78,"../internals/iterators-core":77,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/well-known-symbol":145}],41:[function(e,n,i){var s=e("../internals/path"),r=e("../internals/has"),a=e("../internals/well-known-symbol-wrapped"),c=e("../internals/object-define-property").f;n.exports=function(d){var p=s.Symbol||(s.Symbol={});r(p,d)||c(p,d,{value:a.f(d)})}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/path":103,"../internals/well-known-symbol-wrapped":144}],42:[function(e,n,i){var s=e("../internals/fails");n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":50}],43:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/is-object"),a=s.document,c=r(a)&&r(a.createElement);n.exports=function(d){return c?a.createElement(d):{}}},{"../internals/global":58,"../internals/is-object":73}],44:[function(e,n,i){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(e,n,i){var s=e("../internals/engine-user-agent");n.exports=/(iphone|ipod|ipad).*applewebkit/i.test(s)},{"../internals/engine-user-agent":46}],46:[function(e,n,i){var s=e("../internals/get-built-in");n.exports=s("navigator","userAgent")||""},{"../internals/get-built-in":55}],47:[function(e,n,i){var s,r,a=e("../internals/global"),c=e("../internals/engine-user-agent"),d=a.process,p=d&&d.versions,u=p&&p.v8;u?r=(s=u.split("."))[0]+s[1]:c&&(!(s=c.match(/Edge\/(\d+)/))||74<=s[1])&&(s=c.match(/Chrome\/(\d+)/))&&(r=s[1]),n.exports=r&&+r},{"../internals/engine-user-agent":46,"../internals/global":58}],48:[function(e,n,i){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/object-get-own-property-descriptor").f,a=e("../internals/create-non-enumerable-property"),c=e("../internals/redefine"),d=e("../internals/set-global"),p=e("../internals/copy-constructor-properties"),u=e("../internals/is-forced");n.exports=function(o,l){var h,f,m,g,v,x=o.target,w=o.global,M=o.stat;if(h=w?s:M?s[x]||d(x,{}):(s[x]||{}).prototype)for(f in l){if(g=l[f],m=o.noTargetGet?(v=r(h,f))&&v.value:h[f],!u(w?f:x+(M?".":"#")+f,o.forced)&&m!==void 0){if(typeof g==typeof m)continue;p(g,m)}(o.sham||m&&m.sham)&&a(g,"sham",!0),c(h,f,g,o)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/is-forced":72,"../internals/object-get-own-property-descriptor":92,"../internals/redefine":107,"../internals/set-global":114}],50:[function(e,n,i){n.exports=function(s){try{return!!s()}catch{return!0}}},{}],51:[function(e,n,i){e("../modules/es.regexp.exec");var s=e("../internals/redefine"),r=e("../internals/fails"),a=e("../internals/well-known-symbol"),c=e("../internals/regexp-exec"),d=e("../internals/create-non-enumerable-property"),p=a("species"),u=!r(function(){var m=/./;return m.exec=function(){var g=[];return g.groups={a:"7"},g},"".replace(m,"$<a>")!=="7"}),o="a".replace(/./,"$0")==="$0",l=a("replace"),h=!!/./[l]&&/./[l]("a","$0")==="",f=!r(function(){var m=/(?:)/,g=m.exec;m.exec=function(){return g.apply(this,arguments)};var v="ab".split(m);return v.length!==2||v[0]!=="a"||v[1]!=="b"});n.exports=function(m,g,v,x){var w=a(m),M=!r(function(){var D={};return D[w]=function(){return 7},""[m](D)!=7}),A=M&&!r(function(){var D=!1,O=/a/;return m==="split"&&((O={constructor:{}}).constructor[p]=function(){return O},O.flags="",O[w]=/./[w]),O.exec=function(){return D=!0,null},O[w](""),!D});if(!M||!A||m==="replace"&&(!u||!o||h)||m==="split"&&!f){var E=/./[w],I=v(w,""[m],function(D,O,j,N,q){return O.exec===c?M&&!q?{done:!0,value:E.call(O,j,N)}:{done:!0,value:D.call(j,O,N)}:{done:!1}},{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),R=I[0],P=I[1];s(String.prototype,m,R),s(RegExp.prototype,w,g==2?function(D,O){return P.call(D,this,O)}:function(D){return P.call(D,this)})}x&&d(RegExp.prototype[w],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":107,"../internals/regexp-exec":109,"../internals/well-known-symbol":145,"../modules/es.regexp.exec":178}],52:[function(e,n,i){var s=e("../internals/fails");n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":50}],53:[function(e,n,i){var s=e("../internals/a-function");n.exports=function(r,a,c){if(s(r),a===void 0)return r;switch(c){case 0:return function(){return r.call(a)};case 1:return function(d){return r.call(a,d)};case 2:return function(d,p){return r.call(a,d,p)};case 3:return function(d,p,u){return r.call(a,d,p,u)}}return function(){return r.apply(a,arguments)}}},{"../internals/a-function":5}],54:[function(e,n,i){var s=e("../internals/a-function"),r=e("../internals/is-object"),a=[].slice,c={};n.exports=Function.bind||function(d){var p=s(this),u=a.call(arguments,1),o=function(){var l=u.concat(a.call(arguments));return this instanceof o?function(h,f,m){if(!(f in c)){for(var g=[],v=0;v<f;v++)g[v]="a["+v+"]";c[f]=Function("C,a","return new C("+g.join(",")+")")}return c[f](h,m)}(p,l.length,l):p.apply(d,l)};return r(p.prototype)&&(o.prototype=p.prototype),o}},{"../internals/a-function":5,"../internals/is-object":73}],55:[function(e,n,i){function s(c){return typeof c=="function"?c:void 0}var r=e("../internals/path"),a=e("../internals/global");n.exports=function(c,d){return arguments.length<2?s(r[c])||s(a[c]):r[c]&&r[c][d]||a[c]&&a[c][d]}},{"../internals/global":58,"../internals/path":103}],56:[function(e,n,i){var s=e("../internals/classof"),r=e("../internals/iterators"),a=e("../internals/well-known-symbol")("iterator");n.exports=function(c){if(c!=null)return c[a]||c["@@iterator"]||r[s(c)]}},{"../internals/classof":29,"../internals/iterators":78,"../internals/well-known-symbol":145}],57:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/get-iterator-method");n.exports=function(a){var c=r(a);if(typeof c!="function")throw TypeError(String(a)+" is not iterable");return s(c.call(a))}},{"../internals/an-object":10,"../internals/get-iterator-method":56}],58:[function(e,n,i){(function(s){function r(a){return a&&a.Math==Math&&a}n.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof s=="object"&&s)||Function("return this")()}).call(this,typeof Oo!="undefined"?Oo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],59:[function(e,n,i){var s={}.hasOwnProperty;n.exports=function(r,a){return s.call(r,a)}},{}],60:[function(e,n,i){n.exports={}},{}],61:[function(e,n,i){var s=e("../internals/global");n.exports=function(r,a){var c=s.console;c&&c.error&&(arguments.length===1?c.error(r):c.error(r,a))}},{"../internals/global":58}],62:[function(e,n,i){var s=e("../internals/get-built-in");n.exports=s("document","documentElement")},{"../internals/get-built-in":55}],63:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/fails"),a=e("../internals/document-create-element");n.exports=!s&&!r(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],64:[function(e,n,i){var s=Math.abs,r=Math.pow,a=Math.floor,c=Math.log,d=Math.LN2;n.exports={pack:function(p,u,o){var l,h,f,m=new Array(o),g=8*o-u-1,v=(1<<g)-1,x=v>>1,w=u===23?r(2,-24)-r(2,-77):0,M=p<0||p===0&&1/p<0?1:0,A=0;for((p=s(p))!=p||p===1/0?(h=p!=p?1:0,l=v):(l=a(c(p)/d),p*(f=r(2,-l))<1&&(l--,f*=2),2<=(p+=1<=l+x?w/f:w*r(2,1-x))*f&&(l++,f/=2),v<=l+x?(h=0,l=v):1<=l+x?(h=(p*f-1)*r(2,u),l+=x):(h=p*r(2,x-1)*r(2,u),l=0));8<=u;m[A++]=255&h,h/=256,u-=8);for(l=l<<u|h,g+=u;0<g;m[A++]=255&l,l/=256,g-=8);return m[--A]|=128*M,m},unpack:function(p,u){var o,l=p.length,h=8*l-u-1,f=(1<<h)-1,m=f>>1,g=h-7,v=l-1,x=p[v--],w=127&x;for(x>>=7;0<g;w=256*w+p[v],v--,g-=8);for(o=w&(1<<-g)-1,w>>=-g,g+=u;0<g;o=256*o+p[v],v--,g-=8);if(w===0)w=1-m;else{if(w===f)return o?NaN:x?-1/0:1/0;o+=r(2,u),w-=m}return(x?-1:1)*o*r(2,w-u)}}},{}],65:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/classof-raw"),a="".split;n.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return r(c)=="String"?a.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],66:[function(e,n,i){var s=e("../internals/is-object"),r=e("../internals/object-set-prototype-of");n.exports=function(a,c,d){var p,u;return r&&typeof(p=c.constructor)=="function"&&p!==d&&s(u=p.prototype)&&u!==d.prototype&&r(a,u),a}},{"../internals/is-object":73,"../internals/object-set-prototype-of":100}],67:[function(e,n,i){var s=e("../internals/shared-store"),r=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(a){return r.call(a)}),n.exports=s.inspectSource},{"../internals/shared-store":118}],68:[function(e,n,i){function s(m){d(m,o,{value:{objectID:"O"+ ++l,weakData:{}}})}var r=e("../internals/hidden-keys"),a=e("../internals/is-object"),c=e("../internals/has"),d=e("../internals/object-define-property").f,p=e("../internals/uid"),u=e("../internals/freezing"),o=p("meta"),l=0,h=Object.isExtensible||function(){return!0},f=n.exports={REQUIRED:!1,fastKey:function(m,g){if(!a(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!c(m,o)){if(!h(m))return"F";if(!g)return"E";s(m)}return m[o].objectID},getWeakData:function(m,g){if(!c(m,o)){if(!h(m))return!0;if(!g)return!1;s(m)}return m[o].weakData},onFreeze:function(m){return u&&f.REQUIRED&&h(m)&&!c(m,o)&&s(m),m}};r[o]=!0},{"../internals/freezing":52,"../internals/has":59,"../internals/hidden-keys":60,"../internals/is-object":73,"../internals/object-define-property":91,"../internals/uid":142}],69:[function(e,n,i){var s,r,a,c=e("../internals/native-weak-map"),d=e("../internals/global"),p=e("../internals/is-object"),u=e("../internals/create-non-enumerable-property"),o=e("../internals/has"),l=e("../internals/shared-key"),h=e("../internals/hidden-keys"),f=d.WeakMap;if(c){var m=new f,g=m.get,v=m.has,x=m.set;s=function(M,A){return x.call(m,M,A),A},r=function(M){return g.call(m,M)||{}},a=function(M){return v.call(m,M)}}else{var w=l("state");h[w]=!0,s=function(M,A){return u(M,w,A),A},r=function(M){return o(M,w)?M[w]:{}},a=function(M){return o(M,w)}}n.exports={set:s,get:r,has:a,enforce:function(M){return a(M)?r(M):s(M,{})},getterFor:function(M){return function(A){var E;if(!p(A)||(E=r(A)).type!==M)throw TypeError("Incompatible receiver, "+M+" required");return E}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/has":59,"../internals/hidden-keys":60,"../internals/is-object":73,"../internals/native-weak-map":84,"../internals/shared-key":117}],70:[function(e,n,i){var s=e("../internals/well-known-symbol"),r=e("../internals/iterators"),a=s("iterator"),c=Array.prototype;n.exports=function(d){return d!==void 0&&(r.Array===d||c[a]===d)}},{"../internals/iterators":78,"../internals/well-known-symbol":145}],71:[function(e,n,i){var s=e("../internals/classof-raw");n.exports=Array.isArray||function(r){return s(r)=="Array"}},{"../internals/classof-raw":28}],72:[function(e,n,i){function s(o,l){var h=d[c(o)];return h==u||h!=p&&(typeof l=="function"?r(l):!!l)}var r=e("../internals/fails"),a=/#|\.prototype\./,c=s.normalize=function(o){return String(o).replace(a,".").toLowerCase()},d=s.data={},p=s.NATIVE="N",u=s.POLYFILL="P";n.exports=s},{"../internals/fails":50}],73:[function(e,n,i){n.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},{}],74:[function(e,n,i){n.exports=!1},{}],75:[function(e,n,i){var s=e("../internals/is-object"),r=e("../internals/classof-raw"),a=e("../internals/well-known-symbol")("match");n.exports=function(c){var d;return s(c)&&((d=c[a])!==void 0?!!d:r(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":73,"../internals/well-known-symbol":145}],76:[function(e,n,i){function s(o,l){this.stopped=o,this.result=l}var r=e("../internals/an-object"),a=e("../internals/is-array-iterator-method"),c=e("../internals/to-length"),d=e("../internals/function-bind-context"),p=e("../internals/get-iterator-method"),u=e("../internals/call-with-safe-iteration-closing");(n.exports=function(o,l,h,f,m){var g,v,x,w,M,A,E,I=d(l,h,f?2:1);if(m)g=o;else{if(typeof(v=p(o))!="function")throw TypeError("Target is not iterable");if(a(v)){for(x=0,w=c(o.length);x<w;x++)if((M=f?I(r(E=o[x])[0],E[1]):I(o[x]))&&M instanceof s)return M;return new s(!1)}g=v.call(o)}for(A=g.next;!(E=A.call(g)).done;)if(typeof(M=u(g,I,E.value,f))=="object"&&M&&M instanceof s)return M;return new s(!1)}).stop=function(o){return new s(!0,o)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133}],77:[function(e,n,i){var s,r,a,c=e("../internals/object-get-prototype-of"),d=e("../internals/create-non-enumerable-property"),p=e("../internals/has"),u=e("../internals/well-known-symbol"),o=e("../internals/is-pure"),l=u("iterator"),h=!1;[].keys&&("next"in(a=[].keys())?(r=c(c(a)))!==Object.prototype&&(s=r):h=!0),s==null&&(s={}),o||p(s,l)||d(s,l,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":37,"../internals/has":59,"../internals/is-pure":74,"../internals/object-get-prototype-of":96,"../internals/well-known-symbol":145}],78:[function(e,n,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],79:[function(e,n,i){n.exports=Math.sign||function(s){return(s=+s)==0||s!=s?s:s<0?-1:1}},{}],80:[function(e,n,i){var s,r,a,c,d,p,u,o,l=e("../internals/global"),h=e("../internals/object-get-own-property-descriptor").f,f=e("../internals/classof-raw"),m=e("../internals/task").set,g=e("../internals/engine-is-ios"),v=l.MutationObserver||l.WebKitMutationObserver,x=l.process,w=l.Promise,M=f(x)=="process",A=h(l,"queueMicrotask"),E=A&&A.value;E||(s=function(){var I,R;for(M&&(I=x.domain)&&I.exit();r;){R=r.fn,r=r.next;try{R()}catch(P){throw r?c():a=void 0,P}}a=void 0,I&&I.enter()},c=M?function(){x.nextTick(s)}:v&&!g?(d=!0,p=document.createTextNode(""),new v(s).observe(p,{characterData:!0}),function(){p.data=d=!d}):w&&w.resolve?(u=w.resolve(void 0),o=u.then,function(){o.call(u,s)}):function(){m.call(l,s)}),n.exports=E||function(I){var R={fn:I,next:void 0};a&&(a.next=R),r||(r=R,c()),a=R}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":58,"../internals/object-get-own-property-descriptor":92,"../internals/task":127}],81:[function(e,n,i){var s=e("../internals/global");n.exports=s.Promise},{"../internals/global":58}],82:[function(e,n,i){var s=e("../internals/fails");n.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},{"../internals/fails":50}],83:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/well-known-symbol"),a=e("../internals/is-pure"),c=r("iterator");n.exports=!s(function(){var d=new URL("b?a=1&b=2&c=3","http://a"),p=d.searchParams,u="";return d.pathname="c%20d",p.forEach(function(o,l){p.delete("b"),u+=l+o}),a&&!d.toJSON||!p.sort||d.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":50,"../internals/is-pure":74,"../internals/well-known-symbol":145}],84:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/inspect-source"),a=s.WeakMap;n.exports=typeof a=="function"&&/native code/.test(r(a))},{"../internals/global":58,"../internals/inspect-source":67}],85:[function(e,n,i){function s(a){var c,d;this.promise=new a(function(p,u){if(c!==void 0||d!==void 0)throw TypeError("Bad Promise constructor");c=p,d=u}),this.resolve=r(c),this.reject=r(d)}var r=e("../internals/a-function");n.exports.f=function(a){return new s(a)}},{"../internals/a-function":5}],86:[function(e,n,i){var s=e("../internals/is-regexp");n.exports=function(r){if(s(r))throw TypeError("The method doesn't accept regular expressions");return r}},{"../internals/is-regexp":75}],87:[function(e,n,i){var s=e("../internals/global").isFinite;n.exports=Number.isFinite||function(r){return typeof r=="number"&&s(r)}},{"../internals/global":58}],88:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/fails"),a=e("../internals/object-keys"),c=e("../internals/object-get-own-property-symbols"),d=e("../internals/object-property-is-enumerable"),p=e("../internals/to-object"),u=e("../internals/indexed-object"),o=Object.assign,l=Object.defineProperty;n.exports=!o||r(function(){if(s&&o({b:1},o(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var h={},f={},m=Symbol(),g="abcdefghijklmnopqrst";return h[m]=7,g.split("").forEach(function(v){f[v]=v}),o({},h)[m]!=7||a(o({},f)).join("")!=g})?function(h,f){for(var m=p(h),g=arguments.length,v=1,x=c.f,w=d.f;v<g;)for(var M,A=u(arguments[v++]),E=x?a(A).concat(x(A)):a(A),I=E.length,R=0;R<I;)M=E[R++],s&&!w.call(A,M)||(m[M]=A[M]);return m}:o},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":65,"../internals/object-get-own-property-symbols":95,"../internals/object-keys":98,"../internals/object-property-is-enumerable":99,"../internals/to-object":134}],89:[function(e,n,i){function s(){}function r(x){return"<script>"+x+"</"+m+">"}var a,c=e("../internals/an-object"),d=e("../internals/object-define-properties"),p=e("../internals/enum-bug-keys"),u=e("../internals/hidden-keys"),o=e("../internals/html"),l=e("../internals/document-create-element"),h=e("../internals/shared-key"),f="prototype",m="script",g=h("IE_PROTO"),v=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch{}var x,w;v=a?function(A){A.write(r("")),A.close();var E=A.parentWindow.Object;return A=null,E}(a):((w=l("iframe")).style.display="none",o.appendChild(w),w.src=String("javascript:"),(x=w.contentWindow.document).open(),x.write(r("document.F=Object")),x.close(),x.F);for(var M=p.length;M--;)delete v[f][p[M]];return v()};u[g]=!0,n.exports=Object.create||function(x,w){var M;return x!==null?(s[f]=c(x),M=new s,s[f]=null,M[g]=x):M=v(),w===void 0?M:d(M,w)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":60,"../internals/html":62,"../internals/object-define-properties":90,"../internals/shared-key":117}],90:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-define-property"),a=e("../internals/an-object"),c=e("../internals/object-keys");n.exports=s?Object.defineProperties:function(d,p){a(d);for(var u,o=c(p),l=o.length,h=0;h<l;)r.f(d,u=o[h++],p[u]);return d}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":91,"../internals/object-keys":98}],91:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/ie8-dom-define"),a=e("../internals/an-object"),c=e("../internals/to-primitive"),d=Object.defineProperty;i.f=s?d:function(p,u,o){if(a(p),u=c(u,!0),a(o),r)try{return d(p,u,o)}catch{}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(p[u]=o.value),p}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":63,"../internals/to-primitive":137}],92:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-property-is-enumerable"),a=e("../internals/create-property-descriptor"),c=e("../internals/to-indexed-object"),d=e("../internals/to-primitive"),p=e("../internals/has"),u=e("../internals/ie8-dom-define"),o=Object.getOwnPropertyDescriptor;i.f=s?o:function(l,h){if(l=c(l),h=d(h,!0),u)try{return o(l,h)}catch{}if(p(l,h))return a(!r.f.call(l,h),l[h])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":59,"../internals/ie8-dom-define":63,"../internals/object-property-is-enumerable":99,"../internals/to-indexed-object":131,"../internals/to-primitive":137}],93:[function(e,n,i){var s=e("../internals/to-indexed-object"),r=e("../internals/object-get-own-property-names").f,a={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(d){return c&&a.call(d)=="[object Window]"?function(p){try{return r(p)}catch{return c.slice()}}(d):r(s(d))}},{"../internals/object-get-own-property-names":94,"../internals/to-indexed-object":131}],94:[function(e,n,i){var s=e("../internals/object-keys-internal"),r=e("../internals/enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(a){return s(a,r)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":97}],95:[function(e,n,i){i.f=Object.getOwnPropertySymbols},{}],96:[function(e,n,i){var s=e("../internals/has"),r=e("../internals/to-object"),a=e("../internals/shared-key"),c=e("../internals/correct-prototype-getter"),d=a("IE_PROTO"),p=Object.prototype;n.exports=c?Object.getPrototypeOf:function(u){return u=r(u),s(u,d)?u[d]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?p:null}},{"../internals/correct-prototype-getter":34,"../internals/has":59,"../internals/shared-key":117,"../internals/to-object":134}],97:[function(e,n,i){var s=e("../internals/has"),r=e("../internals/to-indexed-object"),a=e("../internals/array-includes").indexOf,c=e("../internals/hidden-keys");n.exports=function(d,p){var u,o=r(d),l=0,h=[];for(u in o)!s(c,u)&&s(o,u)&&h.push(u);for(;p.length>l;)s(o,u=p[l++])&&(~a(h,u)||h.push(u));return h}},{"../internals/array-includes":18,"../internals/has":59,"../internals/hidden-keys":60,"../internals/to-indexed-object":131}],98:[function(e,n,i){var s=e("../internals/object-keys-internal"),r=e("../internals/enum-bug-keys");n.exports=Object.keys||function(a){return s(a,r)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":97}],99:[function(e,n,i){var s={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!s.call({1:2},1);i.f=a?function(c){var d=r(this,c);return!!d&&d.enumerable}:s},{}],100:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/a-possible-prototype");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,d={};try{(a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(d,[]),c=d instanceof Array}catch{}return function(p,u){return s(p),r(u),c?a.call(p,u):p.__proto__=u,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],101:[function(e,n,i){var s=e("../internals/to-string-tag-support"),r=e("../internals/classof");n.exports=s?{}.toString:function(){return"[object "+r(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":138}],102:[function(e,n,i){var s=e("../internals/get-built-in"),r=e("../internals/object-get-own-property-names"),a=e("../internals/object-get-own-property-symbols"),c=e("../internals/an-object");n.exports=s("Reflect","ownKeys")||function(d){var p=r.f(c(d)),u=a.f;return u?p.concat(u(d)):p}},{"../internals/an-object":10,"../internals/get-built-in":55,"../internals/object-get-own-property-names":94,"../internals/object-get-own-property-symbols":95}],103:[function(e,n,i){var s=e("../internals/global");n.exports=s},{"../internals/global":58}],104:[function(e,n,i){n.exports=function(s){try{return{error:!1,value:s()}}catch(r){return{error:!0,value:r}}}},{}],105:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/is-object"),a=e("../internals/new-promise-capability");n.exports=function(c,d){if(s(c),r(d)&&d.constructor===c)return d;var p=a.f(c);return(0,p.resolve)(d),p.promise}},{"../internals/an-object":10,"../internals/is-object":73,"../internals/new-promise-capability":85}],106:[function(e,n,i){var s=e("../internals/redefine");n.exports=function(r,a,c){for(var d in a)s(r,d,a[d],c);return r}},{"../internals/redefine":107}],107:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/create-non-enumerable-property"),a=e("../internals/has"),c=e("../internals/set-global"),d=e("../internals/inspect-source"),p=e("../internals/internal-state"),u=p.get,o=p.enforce,l=String(String).split("String");(n.exports=function(h,f,m,g){var v=!!g&&!!g.unsafe,x=!!g&&!!g.enumerable,w=!!g&&!!g.noTargetGet;typeof m=="function"&&(typeof f!="string"||a(m,"name")||r(m,"name",f),o(m).source=l.join(typeof f=="string"?f:"")),h!==s?(v?!w&&h[f]&&(x=!0):delete h[f],x?h[f]=m:r(h,f,m)):x?h[f]=m:c(f,m)})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||d(this)})},{"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/has":59,"../internals/inspect-source":67,"../internals/internal-state":69,"../internals/set-global":114}],108:[function(e,n,i){var s=e("./classof-raw"),r=e("./regexp-exec");n.exports=function(a,c){var d=a.exec;if(typeof d=="function"){var p=d.call(a,c);if(typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(s(a)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return r.call(a,c)}},{"./classof-raw":28,"./regexp-exec":109}],109:[function(e,n,i){var s,r,a=e("./regexp-flags"),c=e("./regexp-sticky-helpers"),d=RegExp.prototype.exec,p=String.prototype.replace,u=d,o=(s=/a/,r=/b*/g,d.call(s,"a"),d.call(r,"a"),s.lastIndex!==0||r.lastIndex!==0),l=c.UNSUPPORTED_Y||c.BROKEN_CARET,h=/()??/.exec("")[1]!==void 0;(o||h||l)&&(u=function(f){var m,g,v,x,w=this,M=l&&w.sticky,A=a.call(w),E=w.source,I=0,R=f;return M&&((A=A.replace("y","")).indexOf("g")===-1&&(A+="g"),R=String(f).slice(w.lastIndex),0<w.lastIndex&&(!w.multiline||w.multiline&&f[w.lastIndex-1]!==`
`)&&(E="(?: "+E+")",R=" "+R,I++),g=new RegExp("^(?:"+E+")",A)),h&&(g=new RegExp("^"+E+"$(?!\\s)",A)),o&&(m=w.lastIndex),v=d.call(M?g:w,R),M?v?(v.input=v.input.slice(I),v[0]=v[0].slice(I),v.index=w.lastIndex,w.lastIndex+=v[0].length):w.lastIndex=0:o&&v&&(w.lastIndex=w.global?v.index+v[0].length:m),h&&v&&1<v.length&&p.call(v[0],g,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(v[x]=void 0)}),v}),n.exports=u},{"./regexp-flags":110,"./regexp-sticky-helpers":111}],110:[function(e,n,i){var s=e("../internals/an-object");n.exports=function(){var r=s(this),a="";return r.global&&(a+="g"),r.ignoreCase&&(a+="i"),r.multiline&&(a+="m"),r.dotAll&&(a+="s"),r.unicode&&(a+="u"),r.sticky&&(a+="y"),a}},{"../internals/an-object":10}],111:[function(e,n,i){var s=e("./fails");function r(a,c){return RegExp(a,c)}i.UNSUPPORTED_Y=s(function(){var a=r("a","y");return a.lastIndex=2,a.exec("abcd")!=null}),i.BROKEN_CARET=s(function(){var a=r("^r","gy");return a.lastIndex=2,a.exec("str")!=null})},{"./fails":50}],112:[function(e,n,i){n.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},{}],113:[function(e,n,i){n.exports=Object.is||function(s,r){return s===r?s!==0||1/s==1/r:s!=s&&r!=r}},{}],114:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/create-non-enumerable-property");n.exports=function(a,c){try{r(s,a,c)}catch{s[a]=c}return c}},{"../internals/create-non-enumerable-property":37,"../internals/global":58}],115:[function(e,n,i){var s=e("../internals/get-built-in"),r=e("../internals/object-define-property"),a=e("../internals/well-known-symbol"),c=e("../internals/descriptors"),d=a("species");n.exports=function(p){var u=s(p),o=r.f;c&&u&&!u[d]&&o(u,d,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":55,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],116:[function(e,n,i){var s=e("../internals/object-define-property").f,r=e("../internals/has"),a=e("../internals/well-known-symbol")("toStringTag");n.exports=function(c,d,p){c&&!r(c=p?c:c.prototype,a)&&s(c,a,{configurable:!0,value:d})}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],117:[function(e,n,i){var s=e("../internals/shared"),r=e("../internals/uid"),a=s("keys");n.exports=function(c){return a[c]||(a[c]=r(c))}},{"../internals/shared":119,"../internals/uid":142}],118:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/set-global"),a="__core-js_shared__",c=s[a]||r(a,{});n.exports=c},{"../internals/global":58,"../internals/set-global":114}],119:[function(e,n,i){var s=e("../internals/is-pure"),r=e("../internals/shared-store");(n.exports=function(a,c){return r[a]||(r[a]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":74,"../internals/shared-store":118}],120:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/a-function"),a=e("../internals/well-known-symbol")("species");n.exports=function(c,d){var p,u=s(c).constructor;return u===void 0||(p=s(u)[a])==null?d:r(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":145}],121:[function(e,n,i){var s=e("../internals/fails");n.exports=function(r){return s(function(){var a=""[r]('"');return a!==a.toLowerCase()||3<a.split('"').length})}},{"../internals/fails":50}],122:[function(e,n,i){function s(c){return function(d,p){var u,o,l=String(a(d)),h=r(p),f=l.length;return h<0||f<=h?c?"":void 0:(u=l.charCodeAt(h))<55296||56319<u||h+1===f||(o=l.charCodeAt(h+1))<56320||57343<o?c?l.charAt(h):u:c?l.slice(h,h+2):o-56320+(u-55296<<10)+65536}}var r=e("../internals/to-integer"),a=e("../internals/require-object-coercible");n.exports={codeAt:s(!1),charAt:s(!0)}},{"../internals/require-object-coercible":112,"../internals/to-integer":132}],123:[function(e,n,i){function s(h){return h+22+75*(h<26)}function r(h,f,m){var g=0;for(h=m?o(h/700):h>>1,h+=o(h/f);455<h;g+=36)h=o(h/35);return o(g+36*h/(h+38))}function a(h){var f,m,g=[],v=(h=function(q){for(var X=[],V=0,$=q.length;V<$;){var K=q.charCodeAt(V++);if(55296<=K&&K<=56319&&V<$){var _e=q.charCodeAt(V++);(64512&_e)==56320?X.push(((1023&K)<<10)+(1023&_e)+65536):(X.push(K),V--)}else X.push(K)}return X}(h)).length,x=128,w=0,M=72;for(f=0;f<h.length;f++)(m=h[f])<128&&g.push(l(m));var A=g.length,E=A;for(A&&g.push("-");E<v;){var I=c;for(f=0;f<h.length;f++)x<=(m=h[f])&&m<I&&(I=m);var R=E+1;if(I-x>o((c-w)/R))throw RangeError(u);for(w+=(I-x)*R,x=I,f=0;f<h.length;f++){if((m=h[f])<x&&++w>c)throw RangeError(u);if(m==x){for(var P=w,D=36;;D+=36){var O=D<=M?1:M+26<=D?26:D-M;if(P<O)break;var j=P-O,N=36-O;g.push(l(s(O+j%N))),P=o(j/N)}g.push(l(s(P))),M=r(w,R,E==A),w=0,++E}}++w,++x}return g.join("")}var c=2147483647,d=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",o=Math.floor,l=String.fromCharCode;n.exports=function(h){var f,m,g=[],v=h.toLowerCase().replace(p,".").split(".");for(f=0;f<v.length;f++)m=v[f],g.push(d.test(m)?"xn--"+a(m):m);return g.join(".")}},{}],124:[function(e,n,i){var s=e("../internals/to-integer"),r=e("../internals/require-object-coercible");n.exports="".repeat||function(a){var c=String(r(this)),d="",p=s(a);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(c+=c))1&p&&(d+=c);return d}},{"../internals/require-object-coercible":112,"../internals/to-integer":132}],125:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/whitespaces");n.exports=function(a){return s(function(){return!!r[a]()||"\u200B\x85\u180E"[a]()!="\u200B\x85\u180E"||r[a].name!==a})}},{"../internals/fails":50,"../internals/whitespaces":146}],126:[function(e,n,i){function s(p){return function(u){var o=String(r(u));return 1&p&&(o=o.replace(c,"")),2&p&&(o=o.replace(d,"")),o}}var r=e("../internals/require-object-coercible"),a="["+e("../internals/whitespaces")+"]",c=RegExp("^"+a+a+"*"),d=RegExp(a+a+"*$");n.exports={start:s(1),end:s(2),trim:s(3)}},{"../internals/require-object-coercible":112,"../internals/whitespaces":146}],127:[function(e,n,i){function s(O){if(P.hasOwnProperty(O)){var j=P[O];delete P[O],j()}}function r(O){return function(){s(O)}}function a(O){s(O.data)}function c(O){o.postMessage(O+"",x.protocol+"//"+x.host)}var d,p,u,o=e("../internals/global"),l=e("../internals/fails"),h=e("../internals/classof-raw"),f=e("../internals/function-bind-context"),m=e("../internals/html"),g=e("../internals/document-create-element"),v=e("../internals/engine-is-ios"),x=o.location,w=o.setImmediate,M=o.clearImmediate,A=o.process,E=o.MessageChannel,I=o.Dispatch,R=0,P={},D="onreadystatechange";w&&M||(w=function(O){for(var j=[],N=1;N<arguments.length;)j.push(arguments[N++]);return P[++R]=function(){(typeof O=="function"?O:Function(O)).apply(void 0,j)},d(R),R},M=function(O){delete P[O]},h(A)=="process"?d=function(O){A.nextTick(r(O))}:I&&I.now?d=function(O){I.now(r(O))}:E&&!v?(u=(p=new E).port2,p.port1.onmessage=a,d=f(u.postMessage,u,1)):!o.addEventListener||typeof postMessage!="function"||o.importScripts||l(c)||x.protocol==="file:"?d=D in g("script")?function(O){m.appendChild(g("script"))[D]=function(){m.removeChild(this),s(O)}}:function(O){setTimeout(r(O),0)}:(d=c,o.addEventListener("message",a,!1))),n.exports={set:w,clear:M}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":53,"../internals/global":58,"../internals/html":62}],128:[function(e,n,i){var s=e("../internals/classof-raw");n.exports=function(r){if(typeof r!="number"&&s(r)!="Number")throw TypeError("Incorrect invocation");return+r}},{"../internals/classof-raw":28}],129:[function(e,n,i){var s=e("../internals/to-integer"),r=Math.max,a=Math.min;n.exports=function(c,d){var p=s(c);return p<0?r(p+d,0):a(p,d)}},{"../internals/to-integer":132}],130:[function(e,n,i){var s=e("../internals/to-integer"),r=e("../internals/to-length");n.exports=function(a){if(a===void 0)return 0;var c=s(a),d=r(c);if(c!==d)throw RangeError("Wrong length or index");return d}},{"../internals/to-integer":132,"../internals/to-length":133}],131:[function(e,n,i){var s=e("../internals/indexed-object"),r=e("../internals/require-object-coercible");n.exports=function(a){return s(r(a))}},{"../internals/indexed-object":65,"../internals/require-object-coercible":112}],132:[function(e,n,i){var s=Math.ceil,r=Math.floor;n.exports=function(a){return isNaN(a=+a)?0:(0<a?r:s)(a)}},{}],133:[function(e,n,i){var s=e("../internals/to-integer"),r=Math.min;n.exports=function(a){return 0<a?r(s(a),9007199254740991):0}},{"../internals/to-integer":132}],134:[function(e,n,i){var s=e("../internals/require-object-coercible");n.exports=function(r){return Object(s(r))}},{"../internals/require-object-coercible":112}],135:[function(e,n,i){var s=e("../internals/to-positive-integer");n.exports=function(r,a){var c=s(r);if(c%a)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":136}],136:[function(e,n,i){var s=e("../internals/to-integer");n.exports=function(r){var a=s(r);if(a<0)throw RangeError("The argument can't be less than 0");return a}},{"../internals/to-integer":132}],137:[function(e,n,i){var s=e("../internals/is-object");n.exports=function(r,a){if(!s(r))return r;var c,d;if(a&&typeof(c=r.toString)=="function"&&!s(d=c.call(r))||typeof(c=r.valueOf)=="function"&&!s(d=c.call(r))||!a&&typeof(c=r.toString)=="function"&&!s(d=c.call(r)))return d;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":73}],138:[function(e,n,i){var s={};s[e("../internals/well-known-symbol")("toStringTag")]="z",n.exports=String(s)==="[object z]"},{"../internals/well-known-symbol":145}],139:[function(e,n,i){function s(G,W){for(var ve=0,we=W.length,Re=new(xe(G))(we);ve<we;)Re[ve]=W[ve++];return Re}function r(G,W){fe(G,W,{get:function(){return me(this)[W]}})}function a(G){var W;return G instanceof F||(W=R(G))=="ArrayBuffer"||W=="SharedArrayBuffer"}function c(G,W){return Q(G)&&typeof W!="symbol"&&W in G&&String(+W)==String(W)}function d(G,W){return c(G,W=E(W,!0))?v(2,G[W]):de(G,W)}function p(G,W,ve){return!(c(G,W=E(W,!0))&&P(ve)&&I(ve,"value"))||I(ve,"get")||I(ve,"set")||ve.configurable||I(ve,"writable")&&!ve.writable||I(ve,"enumerable")&&!ve.enumerable?fe(G,W,ve):(G[W]=ve.value,G)}var u=e("../internals/export"),o=e("../internals/global"),l=e("../internals/descriptors"),h=e("../internals/typed-array-constructors-require-wrappers"),f=e("../internals/array-buffer-view-core"),m=e("../internals/array-buffer"),g=e("../internals/an-instance"),v=e("../internals/create-property-descriptor"),x=e("../internals/create-non-enumerable-property"),w=e("../internals/to-length"),M=e("../internals/to-index"),A=e("../internals/to-offset"),E=e("../internals/to-primitive"),I=e("../internals/has"),R=e("../internals/classof"),P=e("../internals/is-object"),D=e("../internals/object-create"),O=e("../internals/object-set-prototype-of"),j=e("../internals/object-get-own-property-names").f,N=e("../internals/typed-array-from"),q=e("../internals/array-iteration").forEach,X=e("../internals/set-species"),V=e("../internals/object-define-property"),$=e("../internals/object-get-own-property-descriptor"),K=e("../internals/internal-state"),_e=e("../internals/inherit-if-required"),me=K.get,ye=K.set,fe=V.f,de=$.f,Ee=Math.round,C=o.RangeError,F=m.ArrayBuffer,H=m.DataView,ne=f.NATIVE_ARRAY_BUFFER_VIEWS,re=f.TYPED_ARRAY_TAG,oe=f.TypedArray,te=f.TypedArrayPrototype,xe=f.aTypedArrayConstructor,Q=f.isTypedArray,ge="BYTES_PER_ELEMENT",he="Wrong length";l?(ne||($.f=d,V.f=p,r(te,"buffer"),r(te,"byteOffset"),r(te,"byteLength"),r(te,"length")),u({target:"Object",stat:!0,forced:!ne},{getOwnPropertyDescriptor:d,defineProperty:p}),n.exports=function(G,W,ve){function we(se,Ne){fe(se,Ne,{get:function(){return ie=Ne,(U=me(this)).view[Pe](ie*Re+U.byteOffset,!0);var ie,U},set:function(ie){return U=Ne,Y=ie,z=me(this),ve&&(Y=(Y=Ee(Y))<0?0:255<Y?255:255&Y),void z.view[Ze](U*Re+z.byteOffset,Y,!0);var U,Y,z},enumerable:!0})}var Re=G.match(/\d+$/)[0]/8,Ge=G+(ve?"Clamped":"")+"Array",Pe="get"+G,Ze="set"+G,Je=o[Ge],Ce=Je,le=Ce&&Ce.prototype,De={};ne?h&&(Ce=W(function(se,Ne,ie,U){return g(se,Ce,Ge),_e(P(Ne)?a(Ne)?U!==void 0?new Je(Ne,A(ie,Re),U):ie!==void 0?new Je(Ne,A(ie,Re)):new Je(Ne):Q(Ne)?s(Ce,Ne):N.call(Ce,Ne):new Je(M(Ne)),se,Ce)}),O&&O(Ce,oe),q(j(Je),function(se){se in Ce||x(Ce,se,Je[se])}),Ce.prototype=le):(Ce=W(function(se,Ne,ie,U){g(se,Ce,Ge);var Y,z,J,ce=0,Ae=0;if(P(Ne)){if(!a(Ne))return Q(Ne)?s(Ce,Ne):N.call(Ce,Ne);Y=Ne,Ae=A(ie,Re);var Ie=Ne.byteLength;if(U===void 0){if(Ie%Re||(z=Ie-Ae)<0)throw C(he)}else if(Ie<(z=w(U)*Re)+Ae)throw C(he);J=z/Re}else J=M(Ne),Y=new F(z=J*Re);for(ye(se,{buffer:Y,byteOffset:Ae,byteLength:z,length:J,view:new H(Y)});ce<J;)we(se,ce++)}),O&&O(Ce,oe),le=Ce.prototype=D(te)),le.constructor!==Ce&&x(le,"constructor",Ce),re&&x(le,re,Ge),De[Ge]=Ce,u({global:!0,forced:Ce!=Je,sham:!ne},De),ge in Ce||x(Ce,ge,Re),ge in le||x(le,ge,Re),X(Ge)}):n.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/inherit-if-required":66,"../internals/internal-state":69,"../internals/is-object":73,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/object-set-prototype-of":100,"../internals/set-species":115,"../internals/to-index":130,"../internals/to-length":133,"../internals/to-offset":135,"../internals/to-primitive":137,"../internals/typed-array-constructors-require-wrappers":140,"../internals/typed-array-from":141}],140:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/fails"),a=e("../internals/check-correctness-of-iteration"),c=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,d=s.ArrayBuffer,p=s.Int8Array;n.exports=!c||!r(function(){p(1)})||!r(function(){new p(-1)})||!a(function(u){new p,new p(null),new p(1.5),new p(u)},!0)||r(function(){return new p(new d(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":58}],141:[function(e,n,i){var s=e("../internals/to-object"),r=e("../internals/to-length"),a=e("../internals/get-iterator-method"),c=e("../internals/is-array-iterator-method"),d=e("../internals/function-bind-context"),p=e("../internals/array-buffer-view-core").aTypedArrayConstructor;n.exports=function(u,o,l){var h,f,m,g,v,x,w=s(u),M=arguments.length,A=1<M?o:void 0,E=A!==void 0,I=a(w);if(I!=null&&!c(I))for(x=(v=I.call(w)).next,w=[];!(g=x.call(v)).done;)w.push(g.value);for(E&&2<M&&(A=d(A,l,2)),f=r(w.length),m=new(p(this))(f),h=0;h<f;h++)m[h]=E?A(w[h],h):w[h];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133,"../internals/to-object":134}],142:[function(e,n,i){var s=0,r=Math.random();n.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++s+r).toString(36)}},{}],143:[function(e,n,i){var s=e("../internals/native-symbol");n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":82}],144:[function(e,n,i){var s=e("../internals/well-known-symbol");i.f=s},{"../internals/well-known-symbol":145}],145:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/shared"),a=e("../internals/has"),c=e("../internals/uid"),d=e("../internals/native-symbol"),p=e("../internals/use-symbol-as-uid"),u=r("wks"),o=s.Symbol,l=p?o:o&&o.withoutSetter||c;n.exports=function(h){return a(u,h)||(d&&a(o,h)?u[h]=o[h]:u[h]=l("Symbol."+h)),u[h]}},{"../internals/global":58,"../internals/has":59,"../internals/native-symbol":82,"../internals/shared":119,"../internals/uid":142,"../internals/use-symbol-as-uid":143}],146:[function(e,n,i){n.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],147:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/global"),a=e("../internals/array-buffer"),c=e("../internals/set-species"),d="ArrayBuffer",p=a[d];s({global:!0,forced:r[d]!==p},{ArrayBuffer:p}),c(d)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":58,"../internals/set-species":115}],148:[function(e,n,i){function s(A){if(!d(A))return!1;var E=A[g];return E!==void 0?!!E:c(A)}var r=e("../internals/export"),a=e("../internals/fails"),c=e("../internals/is-array"),d=e("../internals/is-object"),p=e("../internals/to-object"),u=e("../internals/to-length"),o=e("../internals/create-property"),l=e("../internals/array-species-create"),h=e("../internals/array-method-has-species-support"),f=e("../internals/well-known-symbol"),m=e("../internals/engine-v8-version"),g=f("isConcatSpreadable"),v=9007199254740991,x="Maximum allowed index exceeded",w=51<=m||!a(function(){var A=[];return A[g]=!1,A.concat()[0]!==A}),M=h("concat");r({target:"Array",proto:!0,forced:!w||!M},{concat:function(A){var E,I,R,P,D,O=p(this),j=l(O,0),N=0;for(E=-1,R=arguments.length;E<R;E++)if(s(D=E===-1?O:arguments[E])){if(P=u(D.length),v<N+P)throw TypeError(x);for(I=0;I<P;I++,N++)I in D&&o(j,N,D[I])}else{if(v<=N)throw TypeError(x);o(j,N++,D)}return j.length=N,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":71,"../internals/is-object":73,"../internals/to-length":133,"../internals/to-object":134,"../internals/well-known-symbol":145}],149:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").every,a=e("../internals/array-method-is-strict"),c=e("../internals/array-method-uses-to-length"),d=a("every"),p=c("every");s({target:"Array",proto:!0,forced:!d||!p},{every:function(u,o){return r(this,u,1<arguments.length?o:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],150:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-fill"),a=e("../internals/add-to-unscopables");s({target:"Array",proto:!0},{fill:r}),a("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],151:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").filter,a=e("../internals/array-method-has-species-support"),c=e("../internals/array-method-uses-to-length"),d=a("filter"),p=c("filter");s({target:"Array",proto:!0,forced:!d||!p},{filter:function(u,o){return r(this,u,1<arguments.length?o:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],152:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-for-each");s({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},{"../internals/array-for-each":16,"../internals/export":49}],153:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-from");s({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(a){Array.from(a)})},{from:r})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],154:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-includes").includes,a=e("../internals/add-to-unscopables");s({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c,d){return r(this,c,1<arguments.length?d:void 0)}}),a("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],155:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-includes").indexOf,a=e("../internals/array-method-is-strict"),c=e("../internals/array-method-uses-to-length"),d=[].indexOf,p=!!d&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),o=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:p||!u||!o},{indexOf:function(l,h){return p?d.apply(this,arguments)||0:r(this,l,1<arguments.length?h:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],156:[function(e,n,i){var s=e("../internals/to-indexed-object"),r=e("../internals/add-to-unscopables"),a=e("../internals/iterators"),c=e("../internals/internal-state"),d=e("../internals/define-iterator"),p="Array Iterator",u=c.set,o=c.getterFor(p);n.exports=d(Array,"Array",function(l,h){u(this,{type:p,target:s(l),index:0,kind:h})},function(){var l=o(this),h=l.target,f=l.kind,m=l.index++;return!h||m>=h.length?{value:l.target=void 0,done:!0}:f=="keys"?{value:m,done:!1}:f=="values"?{value:h[m],done:!1}:{value:[m,h[m]],done:!1}},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":69,"../internals/iterators":78,"../internals/to-indexed-object":131}],157:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/indexed-object"),a=e("../internals/to-indexed-object"),c=e("../internals/array-method-is-strict"),d=[].join,p=r!=Object,u=c("join",",");s({target:"Array",proto:!0,forced:p||!u},{join:function(o){return d.call(a(this),o===void 0?",":o)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":65,"../internals/to-indexed-object":131}],158:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-last-index-of");s({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},{"../internals/array-last-index-of":20,"../internals/export":49}],159:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").map,a=e("../internals/array-method-has-species-support"),c=e("../internals/array-method-uses-to-length"),d=a("map"),p=c("map");s({target:"Array",proto:!0,forced:!d||!p},{map:function(u,o){return r(this,u,1<arguments.length?o:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],160:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/is-object"),a=e("../internals/is-array"),c=e("../internals/to-absolute-index"),d=e("../internals/to-length"),p=e("../internals/to-indexed-object"),u=e("../internals/create-property"),o=e("../internals/well-known-symbol"),l=e("../internals/array-method-has-species-support"),h=e("../internals/array-method-uses-to-length"),f=l("slice"),m=h("slice",{ACCESSORS:!0,0:0,1:2}),g=o("species"),v=[].slice,x=Math.max;s({target:"Array",proto:!0,forced:!f||!m},{slice:function(w,M){var A,E,I,R=p(this),P=d(R.length),D=c(w,P),O=c(M===void 0?P:M,P);if(a(R)&&(typeof(A=R.constructor)!="function"||A!==Array&&!a(A.prototype)?r(A)&&(A=A[g])===null&&(A=void 0):A=void 0,A===Array||A===void 0))return v.call(R,D,O);for(E=new(A===void 0?Array:A)(x(O-D,0)),I=0;D<O;D++,I++)D in R&&u(E,I,R[D]);return E.length=I,E}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":71,"../internals/is-object":73,"../internals/to-absolute-index":129,"../internals/to-indexed-object":131,"../internals/to-length":133,"../internals/well-known-symbol":145}],161:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").some,a=e("../internals/array-method-is-strict"),c=e("../internals/array-method-uses-to-length"),d=a("some"),p=c("some");s({target:"Array",proto:!0,forced:!d||!p},{some:function(u,o){return r(this,u,1<arguments.length?o:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/to-absolute-index"),a=e("../internals/to-integer"),c=e("../internals/to-length"),d=e("../internals/to-object"),p=e("../internals/array-species-create"),u=e("../internals/create-property"),o=e("../internals/array-method-has-species-support"),l=e("../internals/array-method-uses-to-length"),h=o("splice"),f=l("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min;s({target:"Array",proto:!0,forced:!h||!f},{splice:function(v,x){var w,M,A,E,I,R,P=d(this),D=c(P.length),O=r(v,D),j=arguments.length;if(j===0?w=M=0:M=j===1?(w=0,D-O):(w=j-2,g(m(a(x),0),D-O)),9007199254740991<D+w-M)throw TypeError("Maximum allowed length exceeded");for(A=p(P,M),E=0;E<M;E++)(I=O+E)in P&&u(A,E,P[I]);if(w<(A.length=M)){for(E=O;E<D-M;E++)R=E+w,(I=E+M)in P?P[R]=P[I]:delete P[R];for(E=D;D-M+w<E;E--)delete P[E-1]}else if(M<w)for(E=D-M;O<E;E--)R=E+w-1,(I=E+M-1)in P?P[R]=P[I]:delete P[R];for(E=0;E<w;E++)P[E+O]=arguments[E+2];return P.length=D-M+w,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":129,"../internals/to-integer":132,"../internals/to-length":133,"../internals/to-object":134}],163:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-define-property").f,a=Function.prototype,c=a.toString,d=/^\s*function ([^ (]*)/;!s||"name"in a||r(a,"name",{configurable:!0,get:function(){try{return c.call(this).match(d)[1]}catch{return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":91}],164:[function(e,n,i){var s=e("../internals/collection"),r=e("../internals/collection-strong");n.exports=s("Map",function(a){return function(c){return a(this,arguments.length?c:void 0)}},r)},{"../internals/collection":31,"../internals/collection-strong":30}],165:[function(e,n,i){var s=e("../internals/export"),r=Math.hypot,a=Math.abs,c=Math.sqrt;s({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(d,p){for(var u,o,l=0,h=0,f=arguments.length,m=0;h<f;)m<(u=a(arguments[h++]))?(l=l*(o=m/u)*o+1,m=u):l+=0<u?(o=u/m)*o:u;return m===1/0?1/0:m*c(l)}})},{"../internals/export":49}],166:[function(e,n,i){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":79}],167:[function(e,n,i){function s(O){var j,N,q,X,V,$,K,_e,me=l(O,!1);if(typeof me=="string"&&2<me.length){if((j=(me=x(me)).charCodeAt(0))===43||j===45){if((N=me.charCodeAt(2))===88||N===120)return NaN}else if(j===48){switch(me.charCodeAt(1)){case 66:case 98:q=2,X=49;break;case 79:case 111:q=8,X=55;break;default:return+me}for($=(V=me.slice(2)).length,K=0;K<$;K++)if((_e=V.charCodeAt(K))<48||X<_e)return NaN;return parseInt(V,q)}}return+me}var r=e("../internals/descriptors"),a=e("../internals/global"),c=e("../internals/is-forced"),d=e("../internals/redefine"),p=e("../internals/has"),u=e("../internals/classof-raw"),o=e("../internals/inherit-if-required"),l=e("../internals/to-primitive"),h=e("../internals/fails"),f=e("../internals/object-create"),m=e("../internals/object-get-own-property-names").f,g=e("../internals/object-get-own-property-descriptor").f,v=e("../internals/object-define-property").f,x=e("../internals/string-trim").trim,w="Number",M=a[w],A=M.prototype,E=u(f(A))==w;if(c(w,!M(" 0o1")||!M("0b1")||M("+0x1"))){for(var I,R=function(O){var j=arguments.length<1?0:O,N=this;return N instanceof R&&(E?h(function(){A.valueOf.call(N)}):u(N)!=w)?o(new M(s(j)),N,R):s(j)},P=r?m(M):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;P.length>D;D++)p(M,I=P[D])&&!p(R,I)&&v(R,I,g(M,I));(R.prototype=A).constructor=R,d(a,w,R)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/has":59,"../internals/inherit-if-required":66,"../internals/is-forced":72,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/redefine":107,"../internals/string-trim":126,"../internals/to-primitive":137}],168:[function(e,n,i){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":87}],169:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/to-integer"),a=e("../internals/this-number-value"),c=e("../internals/string-repeat"),d=e("../internals/fails"),p=1 .toFixed,u=Math.floor,o=function(l,h,f){return h===0?f:h%2==1?o(l,h-1,f*l):o(l*l,h/2,f)};s({target:"Number",proto:!0,forced:p&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!d(function(){p.call({})})},{toFixed:function(l){function h(P,D){for(var O=-1,j=D;++O<6;)j+=P*E[O],E[O]=j%1e7,j=u(j/1e7)}function f(P){for(var D=6,O=0;0<=--D;)O+=E[D],E[D]=u(O/P),O=O%P*1e7}function m(){for(var P=6,D="";0<=--P;)if(D!==""||P===0||E[P]!==0){var O=String(E[P]);D=D===""?O:D+c.call("0",7-O.length)+O}return D}var g,v,x,w,M=a(this),A=r(l),E=[0,0,0,0,0,0],I="",R="0";if(A<0||20<A)throw RangeError("Incorrect fraction digits");if(M!=M)return"NaN";if(M<=-1e21||1e21<=M)return String(M);if(M<0&&(I="-",M=-M),1e-21<M)if(v=(g=function(P){for(var D=0,O=P;4096<=O;)D+=12,O/=4096;for(;2<=O;)D+=1,O/=2;return D}(M*o(2,69,1))-69)<0?M*o(2,-g,1):M/o(2,g,1),v*=4503599627370496,0<(g=52-g)){for(h(0,v),x=A;7<=x;)h(1e7,0),x-=7;for(h(o(10,x,1),0),x=g-1;23<=x;)f(1<<23),x-=23;f(1<<x),h(1,1),f(2),R=m()}else h(0,v),h(1<<-g,0),R=m()+c.call("0",A);return R=0<A?I+((w=R.length)<=A?"0."+c.call("0",A-w)+R:R.slice(0,w-A)+"."+R.slice(w-A)):I+R}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":124,"../internals/this-number-value":128,"../internals/to-integer":132}],170:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/object-assign");s({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},{"../internals/export":49,"../internals/object-assign":88}],171:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/fails"),a=e("../internals/object-get-own-property-names-external").f;s({target:"Object",stat:!0,forced:r(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:a})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":93}],172:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/fails"),a=e("../internals/to-object"),c=e("../internals/object-get-prototype-of"),d=e("../internals/correct-prototype-getter");s({target:"Object",stat:!0,forced:r(function(){c(1)}),sham:!d},{getPrototypeOf:function(p){return c(a(p))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":96,"../internals/to-object":134}],173:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/to-object"),a=e("../internals/object-keys");s({target:"Object",stat:!0,forced:e("../internals/fails")(function(){a(1)})},{keys:function(c){return a(r(c))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":98,"../internals/to-object":134}],174:[function(e,n,i){var s=e("../internals/to-string-tag-support"),r=e("../internals/redefine"),a=e("../internals/object-to-string");s||r(Object.prototype,"toString",a,{unsafe:!0})},{"../internals/object-to-string":101,"../internals/redefine":107,"../internals/to-string-tag-support":138}],175:[function(e,n,i){function s(Ce){var le;return!(!E(Ce)||typeof(le=Ce.then)!="function")&&le}function r(Ce,le,De){if(!le.notified){le.notified=!0;var se=le.reactions;X(function(){for(var Ne=le.value,ie=le.state==1,U=0;se.length>U;){var Y,z,J,ce=se[U++],Ae=ie?ce.ok:ce.fail,Ie=ce.resolve,Ve=ce.reject,Me=ce.domain;try{Ae?(ie||(le.rejection===2&&Ze(Ce,le),le.rejection=1),Ae===!0?Y=Ne:(Me&&Me.enter(),Y=Ae(Ne),Me&&(Me.exit(),J=!0)),Y===ce.promise?Ve(oe("Promise-chain cycle")):(z=s(Y))?z.call(Y,Ie,Ve):Ie(Y)):Ve(Ne)}catch(Qe){Me&&!J&&Me.exit(),Ve(Qe)}}le.reactions=[],le.notified=!1,De&&!le.rejection&&Ge(Ce,le)})}}function a(Ce,le,De){var se,Ne;W?((se=te.createEvent("Event")).promise=le,se.reason=De,se.initEvent(Ce,!1,!0),m.dispatchEvent(se)):se={promise:le,reason:De},(Ne=m["on"+Ce])?Ne(se):Ce===ve&&$("Unhandled promise rejection",De)}function c(Ce,le,De,se){return function(Ne){Ce(le,De,Ne,se)}}function d(Ce,le,De,se){le.done||(le.done=!0,se&&(le=se),le.value=De,le.state=2,r(Ce,le,!0))}var p,u,o,l,h=e("../internals/export"),f=e("../internals/is-pure"),m=e("../internals/global"),g=e("../internals/get-built-in"),v=e("../internals/native-promise-constructor"),x=e("../internals/redefine"),w=e("../internals/redefine-all"),M=e("../internals/set-to-string-tag"),A=e("../internals/set-species"),E=e("../internals/is-object"),I=e("../internals/a-function"),R=e("../internals/an-instance"),P=e("../internals/classof-raw"),D=e("../internals/inspect-source"),O=e("../internals/iterate"),j=e("../internals/check-correctness-of-iteration"),N=e("../internals/species-constructor"),q=e("../internals/task").set,X=e("../internals/microtask"),V=e("../internals/promise-resolve"),$=e("../internals/host-report-errors"),K=e("../internals/new-promise-capability"),_e=e("../internals/perform"),me=e("../internals/internal-state"),ye=e("../internals/is-forced"),fe=e("../internals/well-known-symbol"),de=e("../internals/engine-v8-version"),Ee=fe("species"),C="Promise",F=me.get,H=me.set,ne=me.getterFor(C),re=v,oe=m.TypeError,te=m.document,xe=m.process,Q=g("fetch"),ge=K.f,he=ge,G=P(xe)=="process",W=!!(te&&te.createEvent&&m.dispatchEvent),ve="unhandledrejection",we=ye(C,function(){if(D(re)===String(re)&&(de===66||!G&&typeof PromiseRejectionEvent!="function")||f&&!re.prototype.finally)return!0;if(51<=de&&/native code/.test(re))return!1;function Ce(De){De(function(){},function(){})}var le=re.resolve(1);return(le.constructor={})[Ee]=Ce,!(le.then(function(){})instanceof Ce)}),Re=we||!j(function(Ce){re.all(Ce).catch(function(){})}),Ge=function(Ce,le){q.call(m,function(){var De,se=le.value;if(Pe(le)&&(De=_e(function(){G?xe.emit("unhandledRejection",se,Ce):a(ve,Ce,se)}),le.rejection=G||Pe(le)?2:1,De.error))throw De.value})},Pe=function(Ce){return Ce.rejection!==1&&!Ce.parent},Ze=function(Ce,le){q.call(m,function(){G?xe.emit("rejectionHandled",Ce):a("rejectionhandled",Ce,le.value)})},Je=function(Ce,le,De,se){if(!le.done){le.done=!0,se&&(le=se);try{if(Ce===De)throw oe("Promise can't be resolved itself");var Ne=s(De);Ne?X(function(){var ie={done:!1};try{Ne.call(De,c(Je,Ce,ie,le),c(d,Ce,ie,le))}catch(U){d(Ce,ie,U,le)}}):(le.value=De,le.state=1,r(Ce,le,!1))}catch(ie){d(Ce,{done:!1},ie,le)}}};we&&(re=function(Ce){R(this,re,C),I(Ce),p.call(this);var le=F(this);try{Ce(c(Je,this,le),c(d,this,le))}catch(De){d(this,le,De)}},(p=function(){H(this,{type:C,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=w(re.prototype,{then:function(Ce,le){var De=ne(this),se=ge(N(this,re));return se.ok=typeof Ce!="function"||Ce,se.fail=typeof le=="function"&&le,se.domain=G?xe.domain:void 0,De.parent=!0,De.reactions.push(se),De.state!=0&&r(this,De,!1),se.promise},catch:function(Ce){return this.then(void 0,Ce)}}),u=function(){var Ce=new p,le=F(Ce);this.promise=Ce,this.resolve=c(Je,Ce,le),this.reject=c(d,Ce,le)},K.f=ge=function(Ce){return Ce===re||Ce===o?new u(Ce):he(Ce)},f||typeof v!="function"||(l=v.prototype.then,x(v.prototype,"then",function(Ce,le){var De=this;return new re(function(se,Ne){l.call(De,se,Ne)}).then(Ce,le)},{unsafe:!0}),typeof Q=="function"&&h({global:!0,enumerable:!0,forced:!0},{fetch:function(Ce){return V(re,Q.apply(m,arguments))}}))),h({global:!0,wrap:!0,forced:we},{Promise:re}),M(re,C,!1,!0),A(C),o=g(C),h({target:C,stat:!0,forced:we},{reject:function(Ce){var le=ge(this);return le.reject.call(void 0,Ce),le.promise}}),h({target:C,stat:!0,forced:f||we},{resolve:function(Ce){return V(f&&this===o?re:this,Ce)}}),h({target:C,stat:!0,forced:Re},{all:function(Ce){var le=this,De=ge(le),se=De.resolve,Ne=De.reject,ie=_e(function(){var U=I(le.resolve),Y=[],z=0,J=1;O(Ce,function(ce){var Ae=z++,Ie=!1;Y.push(void 0),J++,U.call(le,ce).then(function(Ve){Ie||(Ie=!0,Y[Ae]=Ve,--J||se(Y))},Ne)}),--J||se(Y)});return ie.error&&Ne(ie.value),De.promise},race:function(Ce){var le=this,De=ge(le),se=De.reject,Ne=_e(function(){var ie=I(le.resolve);O(Ce,function(U){ie.call(le,U).then(De.resolve,se)})});return Ne.error&&se(Ne.value),De.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":55,"../internals/global":58,"../internals/host-report-errors":61,"../internals/inspect-source":67,"../internals/internal-state":69,"../internals/is-forced":72,"../internals/is-object":73,"../internals/is-pure":74,"../internals/iterate":76,"../internals/microtask":80,"../internals/native-promise-constructor":81,"../internals/new-promise-capability":85,"../internals/perform":104,"../internals/promise-resolve":105,"../internals/redefine":107,"../internals/redefine-all":106,"../internals/set-species":115,"../internals/set-to-string-tag":116,"../internals/species-constructor":120,"../internals/task":127,"../internals/well-known-symbol":145}],176:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/get-built-in"),a=e("../internals/a-function"),c=e("../internals/an-object"),d=e("../internals/is-object"),p=e("../internals/object-create"),u=e("../internals/function-bind"),o=e("../internals/fails"),l=r("Reflect","construct"),h=o(function(){function g(){}return!(l(function(){},[],g)instanceof g)}),f=!o(function(){l(function(){})}),m=h||f;s({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(g,v,x){a(g),c(v);var w=arguments.length<3?g:a(x);if(f&&!h)return l(g,v,w);if(g==w){switch(v.length){case 0:return new g;case 1:return new g(v[0]);case 2:return new g(v[0],v[1]);case 3:return new g(v[0],v[1],v[2]);case 4:return new g(v[0],v[1],v[2],v[3])}var M=[null];return M.push.apply(M,v),new(u.apply(g,M))}var A=w.prototype,E=p(d(A)?A:Object.prototype),I=Function.apply.call(g,E,v);return d(I)?I:E}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":54,"../internals/get-built-in":55,"../internals/is-object":73,"../internals/object-create":89}],177:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/global"),a=e("../internals/is-forced"),c=e("../internals/inherit-if-required"),d=e("../internals/object-define-property").f,p=e("../internals/object-get-own-property-names").f,u=e("../internals/is-regexp"),o=e("../internals/regexp-flags"),l=e("../internals/regexp-sticky-helpers"),h=e("../internals/redefine"),f=e("../internals/fails"),m=e("../internals/internal-state").set,g=e("../internals/set-species"),v=e("../internals/well-known-symbol")("match"),x=r.RegExp,w=x.prototype,M=/a/g,A=/a/g,E=new x(M)!==M,I=l.UNSUPPORTED_Y;if(s&&a("RegExp",!E||I||f(function(){return A[v]=!1,x(M)!=M||x(A)==A||x(M,"i")!="/a/i"}))){let O=function(j){j in R||d(R,j,{configurable:!0,get:function(){return x[j]},set:function(N){x[j]=N}})};for(var R=function(j,N){var q,X=this instanceof R,V=u(j),$=N===void 0;if(!X&&V&&j.constructor===R&&$)return j;E?V&&!$&&(j=j.source):j instanceof R&&($&&(N=o.call(j)),j=j.source),I&&(q=!!N&&-1<N.indexOf("y"))&&(N=N.replace(/y/g,""));var K=c(E?new x(j,N):x(j,N),X?this:w,R);return I&&q&&m(K,{sticky:q}),K},P=p(x),D=0;P.length>D;)O(P[D++]);(w.constructor=R).prototype=w,h(r,"RegExp",R)}g("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/inherit-if-required":66,"../internals/internal-state":69,"../internals/is-forced":72,"../internals/is-regexp":75,"../internals/object-define-property":91,"../internals/object-get-own-property-names":94,"../internals/redefine":107,"../internals/regexp-flags":110,"../internals/regexp-sticky-helpers":111,"../internals/set-species":115,"../internals/well-known-symbol":145}],178:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/regexp-exec");s({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},{"../internals/export":49,"../internals/regexp-exec":109}],179:[function(e,n,i){var s=e("../internals/redefine"),r=e("../internals/an-object"),a=e("../internals/fails"),c=e("../internals/regexp-flags"),d="toString",p=RegExp.prototype,u=p[d],o=a(function(){return u.call({source:"a",flags:"b"})!="/a/b"}),l=u.name!=d;(o||l)&&s(RegExp.prototype,d,function(){var h=r(this),f=String(h.source),m=h.flags;return"/"+f+"/"+String(m===void 0&&h instanceof RegExp&&!("flags"in p)?c.call(h):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":107,"../internals/regexp-flags":110}],180:[function(e,n,i){var s=e("../internals/collection"),r=e("../internals/collection-strong");n.exports=s("Set",function(a){return function(c){return a(this,arguments.length?c:void 0)}},r)},{"../internals/collection":31,"../internals/collection-strong":30}],181:[function(e,n,i){var s,r=e("../internals/export"),a=e("../internals/object-get-own-property-descriptor").f,c=e("../internals/to-length"),d=e("../internals/not-a-regexp"),p=e("../internals/require-object-coercible"),u=e("../internals/correct-is-regexp-logic"),o=e("../internals/is-pure"),l="".endsWith,h=Math.min,f=u("endsWith");r({target:"String",proto:!0,forced:!!(o||f||!(s=a(String.prototype,"endsWith"))||s.writable)&&!f},{endsWith:function(m,g){var v=String(p(this));d(m);var x=1<arguments.length?g:void 0,w=c(v.length),M=x===void 0?w:h(c(x),w),A=String(m);return l?l.call(v,A,M):v.slice(M-A.length,M)===A}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":74,"../internals/not-a-regexp":86,"../internals/object-get-own-property-descriptor":92,"../internals/require-object-coercible":112,"../internals/to-length":133}],182:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/not-a-regexp"),a=e("../internals/require-object-coercible");s({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(c,d){return!!~String(a(this)).indexOf(r(c),1<arguments.length?d:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":86,"../internals/require-object-coercible":112}],183:[function(e,n,i){var s=e("../internals/string-multibyte").charAt,r=e("../internals/internal-state"),a=e("../internals/define-iterator"),c="String Iterator",d=r.set,p=r.getterFor(c);a(String,"String",function(u){d(this,{type:c,string:String(u),index:0})},function(){var u,o=p(this),l=o.string,h=o.index;return h>=l.length?{value:void 0,done:!0}:(u=s(l,h),o.index+=u.length,{value:u,done:!1})})},{"../internals/define-iterator":40,"../internals/internal-state":69,"../internals/string-multibyte":122}],184:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/an-object"),a=e("../internals/to-length"),c=e("../internals/require-object-coercible"),d=e("../internals/advance-string-index"),p=e("../internals/regexp-exec-abstract");s("match",1,function(u,o,l){return[function(h){var f=c(this),m=h==null?void 0:h[u];return m!==void 0?m.call(h,f):new RegExp(h)[u](String(f))},function(h){var f=l(o,h,this);if(f.done)return f.value;var m=r(h),g=String(this);if(!m.global)return p(m,g);for(var v,x=m.unicode,w=[],M=m.lastIndex=0;(v=p(m,g))!==null;){var A=String(v[0]);(w[M]=A)===""&&(m.lastIndex=d(g,a(m.lastIndex),x)),M++}return M===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/to-length":133}],185:[function(e,n,i){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":124}],186:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/an-object"),a=e("../internals/to-object"),c=e("../internals/to-length"),d=e("../internals/to-integer"),p=e("../internals/require-object-coercible"),u=e("../internals/advance-string-index"),o=e("../internals/regexp-exec-abstract"),l=Math.max,h=Math.min,f=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;s("replace",2,function(v,x,w,M){var A=M.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=M.REPLACE_KEEPS_$0,I=A?"$":"$0";return[function(P,D){var O=p(this),j=P==null?void 0:P[v];return j!==void 0?j.call(P,O,D):x.call(String(O),P,D)},function(P,D){if(!A&&E||typeof D=="string"&&D.indexOf(I)===-1){var O=w(x,P,this,D);if(O.done)return O.value}var j=r(P),N=String(this),q=typeof D=="function";q||(D=String(D));var X=j.global;if(X){var V=j.unicode;j.lastIndex=0}for(var $=[];;){var K=o(j,N);if(K===null||($.push(K),!X))break;String(K[0])===""&&(j.lastIndex=u(N,c(j.lastIndex),V))}for(var _e,me="",ye=0,fe=0;fe<$.length;fe++){K=$[fe];for(var de=String(K[0]),Ee=l(h(d(K.index),N.length),0),C=[],F=1;F<K.length;F++)C.push((_e=K[F])===void 0?_e:String(_e));var H=K.groups;if(q){var ne=[de].concat(C,Ee,N);H!==void 0&&ne.push(H);var re=String(D.apply(void 0,ne))}else re=R(de,N,Ee,C,H,D);ye<=Ee&&(me+=N.slice(ye,Ee)+re,ye=Ee+de.length)}return me+N.slice(ye)}];function R(P,D,O,j,N,q){var X=O+P.length,V=j.length,$=g;return N!==void 0&&(N=a(N),$=m),x.call(q,$,function(K,_e){var me;switch(_e.charAt(0)){case"$":return"$";case"&":return P;case"`":return D.slice(0,O);case"'":return D.slice(X);case"<":me=N[_e.slice(1,-1)];break;default:var ye=+_e;if(ye==0)return K;if(V<ye){var fe=f(ye/10);return fe===0?K:fe<=V?j[fe-1]===void 0?_e.charAt(1):j[fe-1]+_e.charAt(1):K}me=j[ye-1]}return me===void 0?"":me})}})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/to-integer":132,"../internals/to-length":133,"../internals/to-object":134}],187:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/an-object"),a=e("../internals/require-object-coercible"),c=e("../internals/same-value"),d=e("../internals/regexp-exec-abstract");s("search",1,function(p,u,o){return[function(l){var h=a(this),f=l==null?void 0:l[p];return f!==void 0?f.call(l,h):new RegExp(l)[p](String(h))},function(l){var h=o(u,l,this);if(h.done)return h.value;var f=r(l),m=String(this),g=f.lastIndex;c(g,0)||(f.lastIndex=0);var v=d(f,m);return c(f.lastIndex,g)||(f.lastIndex=g),v===null?-1:v.index}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/same-value":113}],188:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/is-regexp"),a=e("../internals/an-object"),c=e("../internals/require-object-coercible"),d=e("../internals/species-constructor"),p=e("../internals/advance-string-index"),u=e("../internals/to-length"),o=e("../internals/regexp-exec-abstract"),l=e("../internals/regexp-exec"),h=e("../internals/fails"),f=[].push,m=Math.min,g=4294967295,v=!h(function(){return!RegExp(g,"y")});s("split",2,function(x,w,M){var A;return A="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(E,I){var R=String(c(this)),P=I===void 0?g:I>>>0;if(P==0)return[];if(E===void 0)return[R];if(!r(E))return w.call(R,E,P);for(var D,O,j,N=[],q=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(E.sticky?"y":""),X=0,V=new RegExp(E.source,q+"g");(D=l.call(V,R))&&!(X<(O=V.lastIndex)&&(N.push(R.slice(X,D.index)),1<D.length&&D.index<R.length&&f.apply(N,D.slice(1)),j=D[0].length,X=O,N.length>=P));)V.lastIndex===D.index&&V.lastIndex++;return X===R.length?!j&&V.test("")||N.push(""):N.push(R.slice(X)),N.length>P?N.slice(0,P):N}:"0".split(void 0,0).length?function(E,I){return E===void 0&&I===0?[]:w.call(this,E,I)}:w,[function(E,I){var R=c(this),P=E==null?void 0:E[x];return P!==void 0?P.call(E,R,I):A.call(String(R),E,I)},function(E,I){var R=M(A,E,this,I,A!==w);if(R.done)return R.value;var P=a(E),D=String(this),O=d(P,RegExp),j=P.unicode,N=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(v?"y":"g"),q=new O(v?P:"^(?:"+P.source+")",N),X=I===void 0?g:I>>>0;if(X==0)return[];if(D.length===0)return o(q,D)===null?[D]:[];for(var V=0,$=0,K=[];$<D.length;){q.lastIndex=v?$:0;var _e,me=o(q,v?D:D.slice($));if(me===null||(_e=m(u(q.lastIndex+(v?0:$)),D.length))===V)$=p(D,$,j);else{if(K.push(D.slice(V,$)),K.length===X)return K;for(var ye=1;ye<=me.length-1;ye++)if(K.push(me[ye]),K.length===X)return K;$=V=_e}}return K.push(D.slice(V)),K}]},!v)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":75,"../internals/regexp-exec":109,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/species-constructor":120,"../internals/to-length":133}],189:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/create-html");s({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return r(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":121}],190:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/string-trim").trim;s({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return r(this)}})},{"../internals/export":49,"../internals/string-trim":126,"../internals/string-trim-forced":125}],191:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/descriptors"),a=e("../internals/global"),c=e("../internals/has"),d=e("../internals/is-object"),p=e("../internals/object-define-property").f,u=e("../internals/copy-constructor-properties"),o=a.Symbol;if(r&&typeof o=="function"&&(!("description"in o.prototype)||o().description!==void 0)){var l={},h=function(x){var w=arguments.length<1||x===void 0?void 0:String(x),M=this instanceof h?new o(w):w===void 0?o():o(w);return w===""&&(l[M]=!0),M};u(h,o);var f=h.prototype=o.prototype;f.constructor=h;var m=f.toString,g=String(o("test"))=="Symbol(test)",v=/^Symbol\((.*)\)[^)]+$/;p(f,"description",{configurable:!0,get:function(){var x=d(this)?this.valueOf():this,w=m.call(x);if(c(l,x))return"";var M=g?w.slice(7,-1):w.replace(v,"$1");return M===""?void 0:M}}),s({global:!0,forced:!0},{Symbol:h})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/is-object":73,"../internals/object-define-property":91}],192:[function(e,n,i){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],193:[function(e,n,i){function s(z,J){var ce=Ge[z]=R(he[oe]);return xe(ce,{type:re,tag:z,description:J}),l||(ce.description=J),ce}function r(z,J){w(z);var ce=A(J),Ae=P(ce).concat(Y(ce));return H(Ae,function(Ie){l&&!U.call(ce,Ie)||ie(z,Ie,ce[Ie])}),z}function a(z,J){var ce=A(z),Ae=E(J,!0);if(ce!==ge||!g(Ge,Ae)||g(Pe,Ae)){var Ie=W(ce,Ae);return!Ie||!g(Ge,Ae)||g(ce,ne)&&ce[ne][Ae]||(Ie.enumerable=!0),Ie}}function c(z){var J=we(A(z)),ce=[];return H(J,function(Ae){g(Ge,Ae)||g(me,Ae)||ce.push(Ae)}),ce}var d=e("../internals/export"),p=e("../internals/global"),u=e("../internals/get-built-in"),o=e("../internals/is-pure"),l=e("../internals/descriptors"),h=e("../internals/native-symbol"),f=e("../internals/use-symbol-as-uid"),m=e("../internals/fails"),g=e("../internals/has"),v=e("../internals/is-array"),x=e("../internals/is-object"),w=e("../internals/an-object"),M=e("../internals/to-object"),A=e("../internals/to-indexed-object"),E=e("../internals/to-primitive"),I=e("../internals/create-property-descriptor"),R=e("../internals/object-create"),P=e("../internals/object-keys"),D=e("../internals/object-get-own-property-names"),O=e("../internals/object-get-own-property-names-external"),j=e("../internals/object-get-own-property-symbols"),N=e("../internals/object-get-own-property-descriptor"),q=e("../internals/object-define-property"),X=e("../internals/object-property-is-enumerable"),V=e("../internals/create-non-enumerable-property"),$=e("../internals/redefine"),K=e("../internals/shared"),_e=e("../internals/shared-key"),me=e("../internals/hidden-keys"),ye=e("../internals/uid"),fe=e("../internals/well-known-symbol"),de=e("../internals/well-known-symbol-wrapped"),Ee=e("../internals/define-well-known-symbol"),C=e("../internals/set-to-string-tag"),F=e("../internals/internal-state"),H=e("../internals/array-iteration").forEach,ne=_e("hidden"),re="Symbol",oe="prototype",te=fe("toPrimitive"),xe=F.set,Q=F.getterFor(re),ge=Object[oe],he=p.Symbol,G=u("JSON","stringify"),W=N.f,ve=q.f,we=O.f,Re=X.f,Ge=K("symbols"),Pe=K("op-symbols"),Ze=K("string-to-symbol-registry"),Je=K("symbol-to-string-registry"),Ce=K("wks"),le=p.QObject,De=!le||!le[oe]||!le[oe].findChild,se=l&&m(function(){return R(ve({},"a",{get:function(){return ve(this,"a",{value:7}).a}})).a!=7})?function(z,J,ce){var Ae=W(ge,J);Ae&&delete ge[J],ve(z,J,ce),Ae&&z!==ge&&ve(ge,J,Ae)}:ve,Ne=f?function(z){return typeof z=="symbol"}:function(z){return Object(z)instanceof he},ie=function(z,J,ce){z===ge&&ie(Pe,J,ce),w(z);var Ae=E(J,!0);return w(ce),g(Ge,Ae)?(ce.enumerable?(g(z,ne)&&z[ne][Ae]&&(z[ne][Ae]=!1),ce=R(ce,{enumerable:I(0,!1)})):(g(z,ne)||ve(z,ne,I(1,{})),z[ne][Ae]=!0),se(z,Ae,ce)):ve(z,Ae,ce)},U=function(z){var J=E(z,!0),ce=Re.call(this,J);return!(this===ge&&g(Ge,J)&&!g(Pe,J))&&(!(ce||!g(this,J)||!g(Ge,J)||g(this,ne)&&this[ne][J])||ce)},Y=function(z){var J=z===ge,ce=we(J?Pe:A(z)),Ae=[];return H(ce,function(Ie){!g(Ge,Ie)||J&&!g(ge,Ie)||Ae.push(Ge[Ie])}),Ae};h||($((he=function(z){if(this instanceof he)throw TypeError("Symbol is not a constructor");var J=arguments.length&&z!==void 0?String(z):void 0,ce=ye(J),Ae=function(Ie){this===ge&&Ae.call(Pe,Ie),g(this,ne)&&g(this[ne],ce)&&(this[ne][ce]=!1),se(this,ce,I(1,Ie))};return l&&De&&se(ge,ce,{configurable:!0,set:Ae}),s(ce,J)})[oe],"toString",function(){return Q(this).tag}),$(he,"withoutSetter",function(z){return s(ye(z),z)}),X.f=U,q.f=ie,N.f=a,D.f=O.f=c,j.f=Y,de.f=function(z){return s(fe(z),z)},l&&(ve(he[oe],"description",{configurable:!0,get:function(){return Q(this).description}}),o||$(ge,"propertyIsEnumerable",U,{unsafe:!0}))),d({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:he}),H(P(Ce),function(z){Ee(z)}),d({target:re,stat:!0,forced:!h},{for:function(z){var J=String(z);if(g(Ze,J))return Ze[J];var ce=he(J);return Ze[J]=ce,Je[ce]=J,ce},keyFor:function(z){if(!Ne(z))throw TypeError(z+" is not a symbol");if(g(Je,z))return Je[z]},useSetter:function(){De=!0},useSimple:function(){De=!1}}),d({target:"Object",stat:!0,forced:!h,sham:!l},{create:function(z,J){return J===void 0?R(z):r(R(z),J)},defineProperty:ie,defineProperties:r,getOwnPropertyDescriptor:a}),d({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:c,getOwnPropertySymbols:Y}),d({target:"Object",stat:!0,forced:m(function(){j.f(1)})},{getOwnPropertySymbols:function(z){return j.f(M(z))}}),G&&d({target:"JSON",stat:!0,forced:!h||m(function(){var z=he();return G([z])!="[null]"||G({a:z})!="{}"||G(Object(z))!="{}"})},{stringify:function(z,J,ce){for(var Ae,Ie=[z],Ve=1;Ve<arguments.length;)Ie.push(arguments[Ve++]);if((x(Ae=J)||z!==void 0)&&!Ne(z))return v(J)||(J=function(Me,Qe){if(typeof Ae=="function"&&(Qe=Ae.call(this,Me,Qe)),!Ne(Qe))return Qe}),Ie[1]=J,G.apply(null,Ie)}}),he[oe][te]||V(he[oe],te,he[oe].valueOf),C(he,re),me[ne]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":55,"../internals/global":58,"../internals/has":59,"../internals/hidden-keys":60,"../internals/internal-state":69,"../internals/is-array":71,"../internals/is-object":73,"../internals/is-pure":74,"../internals/native-symbol":82,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/object-get-own-property-names-external":93,"../internals/object-get-own-property-symbols":95,"../internals/object-keys":98,"../internals/object-property-is-enumerable":99,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/shared":119,"../internals/shared-key":117,"../internals/to-indexed-object":131,"../internals/to-object":134,"../internals/to-primitive":137,"../internals/uid":142,"../internals/use-symbol-as-uid":143,"../internals/well-known-symbol":145,"../internals/well-known-symbol-wrapped":144}],194:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-copy-within"),a=s.aTypedArray;(0,s.exportTypedArrayMethod)("copyWithin",function(c,d,p){return r.call(a(this),c,d,2<arguments.length?p:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],195:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").every,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("every",function(c,d){return r(a(this),c,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],196:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-fill"),a=s.aTypedArray;(0,s.exportTypedArrayMethod)("fill",function(c){return r.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],197:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").filter,a=e("../internals/species-constructor"),c=s.aTypedArray,d=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("filter",function(p,u){for(var o=r(c(this),p,1<arguments.length?u:void 0),l=a(this,this.constructor),h=0,f=o.length,m=new(d(l))(f);h<f;)m[h]=o[h++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":120}],198:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").findIndex,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("findIndex",function(c,d){return r(a(this),c,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").find,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("find",function(c,d){return r(a(this),c,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],200:[function(e,n,i){e("../internals/typed-array-constructor")("Float32",function(s){return function(r,a,c){return s(this,r,a,c)}})},{"../internals/typed-array-constructor":139}],201:[function(e,n,i){e("../internals/typed-array-constructor")("Float64",function(s){return function(r,a,c){return s(this,r,a,c)}})},{"../internals/typed-array-constructor":139}],202:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").forEach,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("forEach",function(c,d){r(a(this),c,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-includes").includes,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("includes",function(c,d){return r(a(this),c,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],204:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-includes").indexOf,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("indexOf",function(c,d){return r(a(this),c,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],205:[function(e,n,i){e("../internals/typed-array-constructor")("Int16",function(s){return function(r,a,c){return s(this,r,a,c)}})},{"../internals/typed-array-constructor":139}],206:[function(e,n,i){e("../internals/typed-array-constructor")("Int32",function(s){return function(r,a,c){return s(this,r,a,c)}})},{"../internals/typed-array-constructor":139}],207:[function(e,n,i){function s(){return u.call(h(this))}var r=e("../internals/global"),a=e("../internals/array-buffer-view-core"),c=e("../modules/es.array.iterator"),d=e("../internals/well-known-symbol")("iterator"),p=r.Uint8Array,u=c.values,o=c.keys,l=c.entries,h=a.aTypedArray,f=a.exportTypedArrayMethod,m=p&&p.prototype[d],g=!!m&&(m.name=="values"||m.name==null);f("entries",function(){return l.call(h(this))}),f("keys",function(){return o.call(h(this))}),f("values",s,!g),f(d,s,!g)},{"../internals/array-buffer-view-core":12,"../internals/global":58,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],208:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=s.aTypedArray,a=s.exportTypedArrayMethod,c=[].join;a("join",function(d){return c.apply(r(this),arguments)})},{"../internals/array-buffer-view-core":12}],209:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-last-index-of"),a=s.aTypedArray;(0,s.exportTypedArrayMethod)("lastIndexOf",function(c){return r.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],210:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").map,a=e("../internals/species-constructor"),c=s.aTypedArray,d=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("map",function(p,u){return r(c(this),p,1<arguments.length?u:void 0,function(o,l){return new(d(a(o,o.constructor)))(l)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":120}],211:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-reduce").right,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduceRight",function(c,d){return r(a(this),c,arguments.length,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],212:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-reduce").left,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduce",function(c,d){return r(a(this),c,arguments.length,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],213:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=s.aTypedArray,a=s.exportTypedArrayMethod,c=Math.floor;a("reverse",function(){for(var d,p=r(this).length,u=c(p/2),o=0;o<u;)d=this[o],this[o++]=this[--p],this[p]=d;return this})},{"../internals/array-buffer-view-core":12}],214:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/to-length"),a=e("../internals/to-offset"),c=e("../internals/to-object"),d=e("../internals/fails"),p=s.aTypedArray;(0,s.exportTypedArrayMethod)("set",function(u,o){p(this);var l=a(1<arguments.length?o:void 0,1),h=this.length,f=c(u),m=r(f.length),g=0;if(h<m+l)throw RangeError("Wrong length");for(;g<m;)this[l+g]=f[g++]},d(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":133,"../internals/to-object":134,"../internals/to-offset":135}],215:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/species-constructor"),a=e("../internals/fails"),c=s.aTypedArray,d=s.aTypedArrayConstructor,p=s.exportTypedArrayMethod,u=[].slice;p("slice",function(o,l){for(var h=u.call(c(this),o,l),f=r(this,this.constructor),m=0,g=h.length,v=new(d(f))(g);m<g;)v[m]=h[m++];return v},a(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":120}],216:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").some,a=s.aTypedArray;(0,s.exportTypedArrayMethod)("some",function(c,d){return r(a(this),c,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],217:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=s.aTypedArray,a=s.exportTypedArrayMethod,c=[].sort;a("sort",function(d){return c.call(r(this),d)})},{"../internals/array-buffer-view-core":12}],218:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/to-length"),a=e("../internals/to-absolute-index"),c=e("../internals/species-constructor"),d=s.aTypedArray;(0,s.exportTypedArrayMethod)("subarray",function(p,u){var o=d(this),l=o.length,h=a(p,l);return new(c(o,o.constructor))(o.buffer,o.byteOffset+h*o.BYTES_PER_ELEMENT,r((u===void 0?l:a(u,l))-h))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":120,"../internals/to-absolute-index":129,"../internals/to-length":133}],219:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/array-buffer-view-core"),a=e("../internals/fails"),c=s.Int8Array,d=r.aTypedArray,p=r.exportTypedArrayMethod,u=[].toLocaleString,o=[].slice,l=!!c&&a(function(){u.call(new c(1))});p("toLocaleString",function(){return u.apply(l?o.call(d(this)):d(this),arguments)},a(function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()})||!a(function(){c.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":58}],220:[function(e,n,i){var s=e("../internals/array-buffer-view-core").exportTypedArrayMethod,r=e("../internals/fails"),a=e("../internals/global").Uint8Array,c=a&&a.prototype||{},d=[].toString,p=[].join;r(function(){d.call({})})&&(d=function(){return p.call(this)}),s("toString",d,c.toString!=d)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":58}],221:[function(e,n,i){e("../internals/typed-array-constructor")("Uint16",function(s){return function(r,a,c){return s(this,r,a,c)}})},{"../internals/typed-array-constructor":139}],222:[function(e,n,i){e("../internals/typed-array-constructor")("Uint32",function(s){return function(r,a,c){return s(this,r,a,c)}})},{"../internals/typed-array-constructor":139}],223:[function(e,n,i){e("../internals/typed-array-constructor")("Uint8",function(s){return function(r,a,c){return s(this,r,a,c)}})},{"../internals/typed-array-constructor":139}],224:[function(e,n,i){e("../internals/typed-array-constructor")("Uint8",function(s){return function(r,a,c){return s(this,r,a,c)}},!0)},{"../internals/typed-array-constructor":139}],225:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/dom-iterables"),a=e("../internals/array-for-each"),c=e("../internals/create-non-enumerable-property");for(var d in r){var p=s[d],u=p&&p.prototype;if(u&&u.forEach!==a)try{c(u,"forEach",a)}catch{u.forEach=a}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":58}],226:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/dom-iterables"),a=e("../modules/es.array.iterator"),c=e("../internals/create-non-enumerable-property"),d=e("../internals/well-known-symbol"),p=d("iterator"),u=d("toStringTag"),o=a.values;for(var l in r){var h=s[l],f=h&&h.prototype;if(f){if(f[p]!==o)try{c(f,p,o)}catch{f[p]=o}if(f[u]||c(f,u,l),r[l]){for(var m in a)if(f[m]!==a[m])try{c(f,m,a[m])}catch{f[m]=a[m]}}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":58,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],227:[function(e,n,i){e("../modules/es.array.iterator");function s(re){try{return decodeURIComponent(re)}catch{return re}}function r(re){var oe,te=re.replace(fe," "),xe=4;try{return decodeURIComponent(te)}catch{for(;xe;)te=te.replace((oe=xe--,de[oe-1]||(de[oe-1]=RegExp("((?:%[\\da-f]{2}){"+oe+"})","gi"))),s);return te}}function a(re){return C[re]}function c(re){return encodeURIComponent(re).replace(Ee,a)}function d(re,oe){if(oe)for(var te,xe,Q=oe.split("&"),ge=0;ge<Q.length;)(te=Q[ge++]).length&&(xe=te.split("="),re.push({key:r(xe.shift()),value:r(xe.join("="))}))}function p(re){this.entries.length=0,d(this.entries,re)}function u(re,oe){if(re<oe)throw TypeError("Not enough arguments")}var o=e("../internals/export"),l=e("../internals/get-built-in"),h=e("../internals/native-url"),f=e("../internals/redefine"),m=e("../internals/redefine-all"),g=e("../internals/set-to-string-tag"),v=e("../internals/create-iterator-constructor"),x=e("../internals/internal-state"),w=e("../internals/an-instance"),M=e("../internals/has"),A=e("../internals/function-bind-context"),E=e("../internals/classof"),I=e("../internals/an-object"),R=e("../internals/is-object"),P=e("../internals/object-create"),D=e("../internals/create-property-descriptor"),O=e("../internals/get-iterator"),j=e("../internals/get-iterator-method"),N=e("../internals/well-known-symbol"),q=l("fetch"),X=l("Headers"),V=N("iterator"),$="URLSearchParams",K=$+"Iterator",_e=x.set,me=x.getterFor($),ye=x.getterFor(K),fe=/\+/g,de=Array(4),Ee=/[!'()~]|%20/g,C={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=v(function(re,oe){_e(this,{type:K,iterator:O(me(re).entries),kind:oe})},"Iterator",function(){var re=ye(this),oe=re.kind,te=re.iterator.next(),xe=te.value;return te.done||(te.value=oe==="keys"?xe.key:oe==="values"?xe.value:[xe.key,xe.value]),te}),H=function(re){w(this,H,$);var oe,te,xe,Q,ge,he,G,W,ve,we=0<arguments.length?re:void 0,Re=[];if(_e(this,{type:$,entries:Re,updateURL:function(){},updateSearchParams:p}),we!==void 0)if(R(we))if(typeof(oe=j(we))=="function")for(xe=(te=oe.call(we)).next;!(Q=xe.call(te)).done;){if((G=(he=(ge=O(I(Q.value))).next).call(ge)).done||(W=he.call(ge)).done||!he.call(ge).done)throw TypeError("Expected sequence with length 2");Re.push({key:G.value+"",value:W.value+""})}else for(ve in we)M(we,ve)&&Re.push({key:ve,value:we[ve]+""});else d(Re,typeof we=="string"?we.charAt(0)==="?"?we.slice(1):we:we+"")},ne=H.prototype;m(ne,{append:function(re,oe){u(arguments.length,2);var te=me(this);te.entries.push({key:re+"",value:oe+""}),te.updateURL()},delete:function(re){u(arguments.length,1);for(var oe=me(this),te=oe.entries,xe=re+"",Q=0;Q<te.length;)te[Q].key===xe?te.splice(Q,1):Q++;oe.updateURL()},get:function(re){u(arguments.length,1);for(var oe=me(this).entries,te=re+"",xe=0;xe<oe.length;xe++)if(oe[xe].key===te)return oe[xe].value;return null},getAll:function(re){u(arguments.length,1);for(var oe=me(this).entries,te=re+"",xe=[],Q=0;Q<oe.length;Q++)oe[Q].key===te&&xe.push(oe[Q].value);return xe},has:function(re){u(arguments.length,1);for(var oe=me(this).entries,te=re+"",xe=0;xe<oe.length;)if(oe[xe++].key===te)return!0;return!1},set:function(re,oe){u(arguments.length,1);for(var te,xe=me(this),Q=xe.entries,ge=!1,he=re+"",G=oe+"",W=0;W<Q.length;W++)(te=Q[W]).key===he&&(ge?Q.splice(W--,1):(ge=!0,te.value=G));ge||Q.push({key:he,value:G}),xe.updateURL()},sort:function(){var re,oe,te,xe=me(this),Q=xe.entries,ge=Q.slice();for(te=Q.length=0;te<ge.length;te++){for(re=ge[te],oe=0;oe<te;oe++)if(Q[oe].key>re.key){Q.splice(oe,0,re);break}oe===te&&Q.push(re)}xe.updateURL()},forEach:function(re,oe){for(var te,xe=me(this).entries,Q=A(re,1<arguments.length?oe:void 0,3),ge=0;ge<xe.length;)Q((te=xe[ge++]).value,te.key,this)},keys:function(){return new F(this,"keys")},values:function(){return new F(this,"values")},entries:function(){return new F(this,"entries")}},{enumerable:!0}),f(ne,V,ne.entries),f(ne,"toString",function(){for(var re,oe=me(this).entries,te=[],xe=0;xe<oe.length;)re=oe[xe++],te.push(c(re.key)+"="+c(re.value));return te.join("&")},{enumerable:!0}),g(H,$),o({global:!0,forced:!h},{URLSearchParams:H}),h||typeof q!="function"||typeof X!="function"||o({global:!0,enumerable:!0,forced:!0},{fetch:function(re,oe){var te,xe,Q,ge=[re];return 1<arguments.length&&(R(te=oe)&&(xe=te.body,E(xe)===$&&((Q=te.headers?new X(te.headers):new X).has("content-type")||Q.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),te=P(te,{body:D(0,String(xe)),headers:D(0,Q)}))),ge.push(te)),q.apply(this,ge)}}),n.exports={URLSearchParams:H,getState:me}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":53,"../internals/get-built-in":55,"../internals/get-iterator":57,"../internals/get-iterator-method":56,"../internals/has":59,"../internals/internal-state":69,"../internals/is-object":73,"../internals/native-url":83,"../internals/object-create":89,"../internals/redefine":107,"../internals/redefine-all":106,"../internals/set-to-string-tag":116,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],228:[function(e,n,i){e("../modules/es.string.iterator");function s(ue,je){var qe,Fe,$e;if(je.charAt(0)=="["){if(je.charAt(je.length-1)!="]"||!(qe=he(je.slice(1,-1))))return ye;ue.host=qe}else if(Pe(ue)){if(je=P(je),oe.test(je)||(qe=ge(je))===null)return ye;ue.host=qe}else{if(te.test(je))return ye;for(qe="",Fe=I(je),$e=0;$e<Fe.length;$e++)qe+=Re(Fe[$e],G);ue.host=qe}}function r(ue){var je,qe,Fe,$e;if(typeof ue=="number"){for(je=[],qe=0;qe<4;qe++)je.unshift(ue%256),ue=K(ue/256);return je.join(".")}if(typeof ue!="object")return ue;for(je="",Fe=function(ze){for(var st=null,wt=1,mt=null,_t=0,tt=0;tt<8;tt++)ze[tt]!==0?(wt<_t&&(st=mt,wt=_t),mt=null,_t=0):(mt===null&&(mt=tt),++_t);return wt<_t&&(st=mt,wt=_t),st}(ue),qe=0;qe<8;qe++)$e&&ue[qe]===0||($e=$e&&!1,Fe===qe?(je+=qe?":":"::",$e=!0):(je+=ue[qe].toString(16),qe<7&&(je+=":")));return"["+je+"]"}function a(ue){return ue.username!=""||ue.password!=""}function c(ue){return!ue.host||ue.cannotBeABaseURL||ue.scheme=="file"}function d(ue,je){var qe;return ue.length==2&&de.test(ue.charAt(0))&&((qe=ue.charAt(1))==":"||!je&&qe=="|")}function p(ue){var je;return 1<ue.length&&d(ue.slice(0,2))&&(ue.length==2||(je=ue.charAt(2))==="/"||je==="\\"||je==="?"||je==="#")}function u(ue){var je=ue.path,qe=je.length;!qe||ue.scheme=="file"&&qe==1&&d(je[0],!0)||je.pop()}function o(ue,je,qe,Fe){var $e,ze,st,wt,mt,_t,tt=qe||Ze,Rt=0,ut="",jt=!1,Or=!1,hr=!1;for(qe||(ue.scheme="",ue.username="",ue.password="",ue.host=null,ue.port=null,ue.path=[],ue.query=null,ue.fragment=null,ue.cannotBeABaseURL=!1,je=je.replace(xe,"")),je=je.replace(Q,""),$e=I(je);Rt<=$e.length;){switch(ze=$e[Rt],tt){case Ze:if(!ze||!de.test(ze)){if(qe)return me;tt=Ce;continue}ut+=ze.toLowerCase(),tt=Je;break;case Je:if(ze&&(Ee.test(ze)||ze=="+"||ze=="-"||ze=="."))ut+=ze.toLowerCase();else{if(ze!=":"){if(qe)return me;ut="",tt=Ce,Rt=0;continue}if(qe&&(Pe(ue)!=A(Ge,ut)||ut=="file"&&(a(ue)||ue.port!==null)||ue.scheme=="file"&&!ue.host))return;if(ue.scheme=ut,qe)return void(Pe(ue)&&Ge[ue.scheme]==ue.port&&(ue.port=null));ut="",ue.scheme=="file"?tt=Ae:Pe(ue)&&Fe&&Fe.scheme==ue.scheme?tt=le:Pe(ue)?tt=ie:$e[Rt+1]=="/"?(tt=De,Rt++):(ue.cannotBeABaseURL=!0,ue.path.push(""),tt=rt)}break;case Ce:if(!Fe||Fe.cannotBeABaseURL&&ze!="#")return me;if(Fe.cannotBeABaseURL&&ze=="#"){ue.scheme=Fe.scheme,ue.path=Fe.path.slice(),ue.query=Fe.query,ue.fragment="",ue.cannotBeABaseURL=!0,tt=bt;break}tt=Fe.scheme=="file"?Ae:se;continue;case le:if(ze!="/"||$e[Rt+1]!="/"){tt=se;continue}tt=U,Rt++;break;case De:if(ze=="/"){tt=Y;break}tt=Qe;continue;case se:if(ue.scheme=Fe.scheme,ze==h)ue.username=Fe.username,ue.password=Fe.password,ue.host=Fe.host,ue.port=Fe.port,ue.path=Fe.path.slice(),ue.query=Fe.query;else if(ze=="/"||ze=="\\"&&Pe(ue))tt=Ne;else if(ze=="?")ue.username=Fe.username,ue.password=Fe.password,ue.host=Fe.host,ue.port=Fe.port,ue.path=Fe.path.slice(),ue.query="",tt=xt;else{if(ze!="#"){ue.username=Fe.username,ue.password=Fe.password,ue.host=Fe.host,ue.port=Fe.port,ue.path=Fe.path.slice(),ue.path.pop(),tt=Qe;continue}ue.username=Fe.username,ue.password=Fe.password,ue.host=Fe.host,ue.port=Fe.port,ue.path=Fe.path.slice(),ue.query=Fe.query,ue.fragment="",tt=bt}break;case Ne:if(!Pe(ue)||ze!="/"&&ze!="\\"){if(ze!="/"){ue.username=Fe.username,ue.password=Fe.password,ue.host=Fe.host,ue.port=Fe.port,tt=Qe;continue}tt=Y}else tt=U;break;case ie:if(tt=U,ze!="/"||ut.charAt(Rt+1)!="/")continue;Rt++;break;case U:if(ze=="/"||ze=="\\")break;tt=Y;continue;case Y:if(ze=="@"){jt&&(ut="%40"+ut),jt=!0,st=I(ut);for(var Qn=0;Qn<st.length;Qn++){var $n=st[Qn];if($n!=":"||hr){var Yi=Re($n,we);hr?ue.password+=Yi:ue.username+=Yi}else hr=!0}ut=""}else if(ze==h||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Pe(ue)){if(jt&&ut=="")return"Invalid authority";Rt-=I(ut).length+1,ut="",tt=z}else ut+=ze;break;case z:case J:if(qe&&ue.scheme=="file"){tt=Ve;continue}if(ze!=":"||Or){if(ze==h||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Pe(ue)){if(Pe(ue)&&ut=="")return ye;if(qe&&ut==""&&(a(ue)||ue.port!==null))return;if(wt=s(ue,ut))return wt;if(ut="",tt=Me,qe)return;continue}ze=="["?Or=!0:ze=="]"&&(Or=!1),ut+=ze}else{if(ut=="")return ye;if(wt=s(ue,ut))return wt;if(ut="",tt=ce,qe==J)return}break;case ce:if(!C.test(ze)){if(ze==h||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Pe(ue)||qe){if(ut!=""){var ei=parseInt(ut,10);if(65535<ei)return fe;ue.port=Pe(ue)&&ei===Ge[ue.scheme]?null:ei,ut=""}if(qe)return;tt=Me;continue}return fe}ut+=ze;break;case Ae:if(ue.scheme="file",ze=="/"||ze=="\\")tt=Ie;else{if(!Fe||Fe.scheme!="file"){tt=Qe;continue}if(ze==h)ue.host=Fe.host,ue.path=Fe.path.slice(),ue.query=Fe.query;else if(ze=="?")ue.host=Fe.host,ue.path=Fe.path.slice(),ue.query="",tt=xt;else{if(ze!="#"){p($e.slice(Rt).join(""))||(ue.host=Fe.host,ue.path=Fe.path.slice(),u(ue)),tt=Qe;continue}ue.host=Fe.host,ue.path=Fe.path.slice(),ue.query=Fe.query,ue.fragment="",tt=bt}}break;case Ie:if(ze=="/"||ze=="\\"){tt=Ve;break}Fe&&Fe.scheme=="file"&&!p($e.slice(Rt).join(""))&&(d(Fe.path[0],!0)?ue.path.push(Fe.path[0]):ue.host=Fe.host),tt=Qe;continue;case Ve:if(ze==h||ze=="/"||ze=="\\"||ze=="?"||ze=="#"){if(!qe&&d(ut))tt=Qe;else if(ut==""){if(ue.host="",qe)return;tt=Me}else{if(wt=s(ue,ut))return wt;if(ue.host=="localhost"&&(ue.host=""),qe)return;ut="",tt=Me}continue}ut+=ze;break;case Me:if(Pe(ue)){if(tt=Qe,ze!="/"&&ze!="\\")continue}else if(qe||ze!="?")if(qe||ze!="#"){if(ze!=h&&(tt=Qe,ze!="/"))continue}else ue.fragment="",tt=bt;else ue.query="",tt=xt;break;case Qe:if(ze==h||ze=="/"||ze=="\\"&&Pe(ue)||!qe&&(ze=="?"||ze=="#")){if((_t=(_t=ut).toLowerCase())===".."||_t==="%2e."||_t===".%2e"||_t==="%2e%2e"?(u(ue),ze=="/"||ze=="\\"&&Pe(ue)||ue.path.push("")):(mt=ut)==="."||mt.toLowerCase()==="%2e"?ze=="/"||ze=="\\"&&Pe(ue)||ue.path.push(""):(ue.scheme=="file"&&!ue.path.length&&d(ut)&&(ue.host&&(ue.host=""),ut=ut.charAt(0)+":"),ue.path.push(ut)),ut="",ue.scheme=="file"&&(ze==h||ze=="?"||ze=="#"))for(;1<ue.path.length&&ue.path[0]==="";)ue.path.shift();ze=="?"?(ue.query="",tt=xt):ze=="#"&&(ue.fragment="",tt=bt)}else ut+=Re(ze,ve);break;case rt:ze=="?"?(ue.query="",tt=xt):ze=="#"?(ue.fragment="",tt=bt):ze!=h&&(ue.path[0]+=Re(ze,G));break;case xt:qe||ze!="#"?ze!=h&&(ze=="'"&&Pe(ue)?ue.query+="%27":ue.query+=ze=="#"?"%23":Re(ze,G)):(ue.fragment="",tt=bt);break;case bt:ze!=h&&(ue.fragment+=Re(ze,W))}Rt++}}function l(ue,je){return{get:ue,set:je,configurable:!0,enumerable:!0}}var h,f=e("../internals/export"),m=e("../internals/descriptors"),g=e("../internals/native-url"),v=e("../internals/global"),x=e("../internals/object-define-properties"),w=e("../internals/redefine"),M=e("../internals/an-instance"),A=e("../internals/has"),E=e("../internals/object-assign"),I=e("../internals/array-from"),R=e("../internals/string-multibyte").codeAt,P=e("../internals/string-punycode-to-ascii"),D=e("../internals/set-to-string-tag"),O=e("../modules/web.url-search-params"),j=e("../internals/internal-state"),N=v.URL,q=O.URLSearchParams,X=O.getState,V=j.set,$=j.getterFor("URL"),K=Math.floor,_e=Math.pow,me="Invalid scheme",ye="Invalid host",fe="Invalid port",de=/[A-Za-z]/,Ee=/[\d+-.A-Za-z]/,C=/\d/,F=/^(0x|0X)/,H=/^[0-7]+$/,ne=/^\d+$/,re=/^[\dA-Fa-f]+$/,oe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,te=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,xe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Q=/[\u0009\u000A\u000D]/g,ge=function(ue){var je,qe,Fe,$e,ze,st,wt,mt=ue.split(".");if(mt.length&&mt[mt.length-1]==""&&mt.pop(),4<(je=mt.length))return ue;for(qe=[],Fe=0;Fe<je;Fe++){if(($e=mt[Fe])=="")return ue;if(ze=10,1<$e.length&&$e.charAt(0)=="0"&&(ze=F.test($e)?16:8,$e=$e.slice(ze==8?1:2)),$e==="")st=0;else{if(!(ze==10?ne:ze==8?H:re).test($e))return ue;st=parseInt($e,ze)}qe.push(st)}for(Fe=0;Fe<je;Fe++)if(st=qe[Fe],Fe==je-1){if(st>=_e(256,5-je))return null}else if(255<st)return null;for(wt=qe.pop(),Fe=0;Fe<qe.length;Fe++)wt+=qe[Fe]*_e(256,3-Fe);return wt},he=function(ue){function je(){return ue.charAt(ut)}var qe,Fe,$e,ze,st,wt,mt,_t=[0,0,0,0,0,0,0,0],tt=0,Rt=null,ut=0;if(je()==":"){if(ue.charAt(1)!=":")return;ut+=2,Rt=++tt}for(;je();){if(tt==8)return;if(je()!=":"){for(qe=Fe=0;Fe<4&&re.test(je());)qe=16*qe+parseInt(je(),16),ut++,Fe++;if(je()=="."){if(Fe==0||(ut-=Fe,6<tt))return;for($e=0;je();){if(ze=null,0<$e){if(!(je()=="."&&$e<4))return;ut++}if(!C.test(je()))return;for(;C.test(je());){if(st=parseInt(je(),10),ze===null)ze=st;else{if(ze==0)return;ze=10*ze+st}if(255<ze)return;ut++}_t[tt]=256*_t[tt]+ze,++$e!=2&&$e!=4||tt++}if($e!=4)return;break}if(je()==":"){if(ut++,!je())return}else if(je())return;_t[tt++]=qe}else{if(Rt!==null)return;ut++,Rt=++tt}}if(Rt!==null)for(wt=tt-Rt,tt=7;tt!=0&&0<wt;)mt=_t[tt],_t[tt--]=_t[Rt+wt-1],_t[Rt+--wt]=mt;else if(tt!=8)return;return _t},G={},W=E({},G,{" ":1,'"':1,"<":1,">":1,"`":1}),ve=E({},W,{"#":1,"?":1,"{":1,"}":1}),we=E({},ve,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Re=function(ue,je){var qe=R(ue,0);return 32<qe&&qe<127&&!A(je,ue)?ue:encodeURIComponent(ue)},Ge={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Pe=function(ue){return A(Ge,ue.scheme)},Ze={},Je={},Ce={},le={},De={},se={},Ne={},ie={},U={},Y={},z={},J={},ce={},Ae={},Ie={},Ve={},Me={},Qe={},rt={},xt={},bt={},ct=function(ue,je){var qe,Fe,$e=M(this,ct,"URL"),ze=1<arguments.length?je:void 0,st=String(ue),wt=V($e,{type:"URL"});if(ze!==void 0){if(ze instanceof ct)qe=$(ze);else if(Fe=o(qe={},String(ze)))throw TypeError(Fe)}if(Fe=o(wt,st,null,qe))throw TypeError(Fe);var mt=wt.searchParams=new q,_t=X(mt);_t.updateSearchParams(wt.query),_t.updateURL=function(){wt.query=String(mt)||null},m||($e.href=Mt.call($e),$e.origin=sr.call($e),$e.protocol=Dr.call($e),$e.username=Br.call($e),$e.password=Sr.call($e),$e.host=Jr.call($e),$e.hostname=be.call($e),$e.port=ke.call($e),$e.pathname=We.call($e),$e.search=Ue.call($e),$e.searchParams=Xe.call($e),$e.hash=vt.call($e))},yt=ct.prototype,Mt=function(){var ue=$(this),je=ue.scheme,qe=ue.username,Fe=ue.password,$e=ue.host,ze=ue.port,st=ue.path,wt=ue.query,mt=ue.fragment,_t=je+":";return $e!==null?(_t+="//",a(ue)&&(_t+=qe+(Fe?":"+Fe:"")+"@"),_t+=r($e),ze!==null&&(_t+=":"+ze)):je=="file"&&(_t+="//"),_t+=ue.cannotBeABaseURL?st[0]:st.length?"/"+st.join("/"):"",wt!==null&&(_t+="?"+wt),mt!==null&&(_t+="#"+mt),_t},sr=function(){var ue=$(this),je=ue.scheme,qe=ue.port;if(je=="blob")try{return new URL(je.path[0]).origin}catch{return"null"}return je!="file"&&Pe(ue)?je+"://"+r(ue.host)+(qe!==null?":"+qe:""):"null"},Dr=function(){return $(this).scheme+":"},Br=function(){return $(this).username},Sr=function(){return $(this).password},Jr=function(){var ue=$(this),je=ue.host,qe=ue.port;return je===null?"":qe===null?r(je):r(je)+":"+qe},be=function(){var ue=$(this).host;return ue===null?"":r(ue)},ke=function(){var ue=$(this).port;return ue===null?"":String(ue)},We=function(){var ue=$(this),je=ue.path;return ue.cannotBeABaseURL?je[0]:je.length?"/"+je.join("/"):""},Ue=function(){var ue=$(this).query;return ue?"?"+ue:""},Xe=function(){return $(this).searchParams},vt=function(){var ue=$(this).fragment;return ue?"#"+ue:""};if(m&&x(yt,{href:l(Mt,function(ue){var je=$(this),qe=String(ue),Fe=o(je,qe);if(Fe)throw TypeError(Fe);X(je.searchParams).updateSearchParams(je.query)}),origin:l(sr),protocol:l(Dr,function(ue){var je=$(this);o(je,String(ue)+":",Ze)}),username:l(Br,function(ue){var je=$(this),qe=I(String(ue));if(!c(je)){je.username="";for(var Fe=0;Fe<qe.length;Fe++)je.username+=Re(qe[Fe],we)}}),password:l(Sr,function(ue){var je=$(this),qe=I(String(ue));if(!c(je)){je.password="";for(var Fe=0;Fe<qe.length;Fe++)je.password+=Re(qe[Fe],we)}}),host:l(Jr,function(ue){var je=$(this);je.cannotBeABaseURL||o(je,String(ue),z)}),hostname:l(be,function(ue){var je=$(this);je.cannotBeABaseURL||o(je,String(ue),J)}),port:l(ke,function(ue){var je=$(this);c(je)||((ue=String(ue))==""?je.port=null:o(je,ue,ce))}),pathname:l(We,function(ue){var je=$(this);je.cannotBeABaseURL||(je.path=[],o(je,ue+"",Me))}),search:l(Ue,function(ue){var je=$(this);(ue=String(ue))==""?je.query=null:(ue.charAt(0)=="?"&&(ue=ue.slice(1)),je.query="",o(je,ue,xt)),X(je.searchParams).updateSearchParams(je.query)}),searchParams:l(Xe),hash:l(vt,function(ue){var je=$(this);(ue=String(ue))!=""?(ue.charAt(0)=="#"&&(ue=ue.slice(1)),je.fragment="",o(je,ue,bt)):je.fragment=null})}),w(yt,"toJSON",function(){return Mt.call(this)},{enumerable:!0}),w(yt,"toString",function(){return Mt.call(this)},{enumerable:!0}),N){var pt=N.createObjectURL,ht=N.revokeObjectURL;pt&&w(ct,"createObjectURL",function(ue){return pt.apply(N,arguments)}),ht&&w(ct,"revokeObjectURL",function(ue){return ht.apply(N,arguments)})}D(ct,"URL"),f({global:!0,forced:!g,sham:!m},{URL:ct})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/internal-state":69,"../internals/native-url":83,"../internals/object-assign":88,"../internals/object-define-properties":90,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/string-multibyte":122,"../internals/string-punycode-to-ascii":123,"../modules/es.string.iterator":183,"../modules/web.url-search-params":227}],229:[function(e,n,i){n.exports=e("./").polyfill()},{"./":230}],230:[function(e,n,i){(function(s,r){var a,c;a=this,c=function(){function d(Q){return typeof Q=="function"}var p=Array.isArray?Array.isArray:function(Q){return Object.prototype.toString.call(Q)==="[object Array]"},u=0,o=void 0,l=void 0,h=function(Q,ge){M[u]=Q,M[u+1]=ge,(u+=2)===2&&(l?l(A):D())},f=typeof window!="undefined"?window:void 0,m=f||{},g=m.MutationObserver||m.WebKitMutationObserver,v=typeof self=="undefined"&&s!==void 0&&{}.toString.call(s)==="[object process]",x=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";function w(){var Q=setTimeout;return function(){return Q(A,1)}}var M=new Array(1e3);function A(){for(var Q=0;Q<u;Q+=2)(0,M[Q])(M[Q+1]),M[Q]=void 0,M[Q+1]=void 0;u=0}var E,I,R,P,D=void 0;function O(Q,ge){var he=this,G=new this.constructor(q);G[N]===void 0&&ne(G);var W=he._state;if(W){var ve=arguments[W-1];h(function(){return F(W,G,ve,he._result)})}else Ee(he,G,Q,ge);return G}function j(Q){if(Q&&typeof Q=="object"&&Q.constructor===this)return Q;var ge=new this(q);return me(ge,Q),ge}D=v?function(){return s.nextTick(A)}:g?(I=0,R=new g(A),P=document.createTextNode(""),R.observe(P,{characterData:!0}),function(){P.data=I=++I%2}):x?((E=new MessageChannel).port1.onmessage=A,function(){return E.port2.postMessage(0)}):f===void 0&&typeof e=="function"?function(){try{var Q=Function("return this")().require("vertx");return(o=Q.runOnLoop||Q.runOnContext)!==void 0?function(){o(A)}:w()}catch{return w()}}():w();var N=Math.random().toString(36).substring(2);function q(){}var X=void 0,V=1,$=2;function K(Q,ge,he){h(function(G){var W=!1,ve=function(we,Re,Ge,Pe){try{we.call(Re,Ge,Pe)}catch(Ze){return Ze}}(he,ge,function(we){W||(W=!0,ge!==we?me(G,we):fe(G,we))},function(we){W||(W=!0,de(G,we))},G._label);!W&&ve&&(W=!0,de(G,ve))},Q)}function _e(Q,ge,he){var G,W;ge.constructor===Q.constructor&&he===O&&ge.constructor.resolve===j?(G=Q,(W=ge)._state===V?fe(G,W._result):W._state===$?de(G,W._result):Ee(W,void 0,function(ve){return me(G,ve)},function(ve){return de(G,ve)})):he===void 0?fe(Q,ge):d(he)?K(Q,ge,he):fe(Q,ge)}function me(Q,ge){if(Q===ge)de(Q,new TypeError("You cannot resolve a promise with itself"));else if(W=typeof(G=ge),G===null||W!="object"&&W!="function")fe(Q,ge);else{var he=void 0;try{he=ge.then}catch(ve){return void de(Q,ve)}_e(Q,ge,he)}var G,W}function ye(Q){Q._onerror&&Q._onerror(Q._result),C(Q)}function fe(Q,ge){Q._state===X&&(Q._result=ge,Q._state=V,Q._subscribers.length!==0&&h(C,Q))}function de(Q,ge){Q._state===X&&(Q._state=$,Q._result=ge,h(ye,Q))}function Ee(Q,ge,he,G){var W=Q._subscribers,ve=W.length;Q._onerror=null,W[ve]=ge,W[ve+V]=he,W[ve+$]=G,ve===0&&Q._state&&h(C,Q)}function C(Q){var ge=Q._subscribers,he=Q._state;if(ge.length!==0){for(var G=void 0,W=void 0,ve=Q._result,we=0;we<ge.length;we+=3)G=ge[we],W=ge[we+he],G?F(he,G,W,ve):W(ve);Q._subscribers.length=0}}function F(Q,ge,he,G){var W=d(he),ve=void 0,we=void 0,Re=!0;if(W){try{ve=he(G)}catch(Ge){Re=!1,we=Ge}if(ge===ve)return void de(ge,new TypeError("A promises callback cannot return that same promise."))}else ve=G;ge._state!==X||(W&&Re?me(ge,ve):Re===!1?de(ge,we):Q===V?fe(ge,ve):Q===$&&de(ge,ve))}var H=0;function ne(Q){Q[N]=H++,Q._state=void 0,Q._result=void 0,Q._subscribers=[]}var re=(oe.prototype._enumerate=function(Q){for(var ge=0;this._state===X&&ge<Q.length;ge++)this._eachEntry(Q[ge],ge)},oe.prototype._eachEntry=function(Q,ge){var he=this._instanceConstructor,G=he.resolve;if(G===j){var W=void 0,ve=void 0,we=!1;try{W=Q.then}catch(Ge){we=!0,ve=Ge}if(W===O&&Q._state!==X)this._settledAt(Q._state,ge,Q._result);else if(typeof W!="function")this._remaining--,this._result[ge]=Q;else if(he===te){var Re=new he(q);we?de(Re,ve):_e(Re,Q,W),this._willSettleAt(Re,ge)}else this._willSettleAt(new he(function(Ge){return Ge(Q)}),ge)}else this._willSettleAt(G(Q),ge)},oe.prototype._settledAt=function(Q,ge,he){var G=this.promise;G._state===X&&(this._remaining--,Q===$?de(G,he):this._result[ge]=he),this._remaining===0&&fe(G,this._result)},oe.prototype._willSettleAt=function(Q,ge){var he=this;Ee(Q,void 0,function(G){return he._settledAt(V,ge,G)},function(G){return he._settledAt($,ge,G)})},oe);function oe(Q,ge){this._instanceConstructor=Q,this.promise=new Q(q),this.promise[N]||ne(this.promise),p(ge)?(this.length=ge.length,this._remaining=ge.length,this._result=new Array(this.length),this.length===0?fe(this.promise,this._result):(this.length=this.length||0,this._enumerate(ge),this._remaining===0&&fe(this.promise,this._result))):de(this.promise,new Error("Array Methods must be provided an Array"))}var te=(xe.prototype.catch=function(Q){return this.then(null,Q)},xe.prototype.finally=function(Q){var ge=this.constructor;return d(Q)?this.then(function(he){return ge.resolve(Q()).then(function(){return he})},function(he){return ge.resolve(Q()).then(function(){throw he})}):this.then(Q,Q)},xe);function xe(Q){this[N]=H++,this._result=this._state=void 0,this._subscribers=[],q!==Q&&(typeof Q!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof xe?function(ge,he){try{he(function(G){me(ge,G)},function(G){de(ge,G)})}catch(G){de(ge,G)}}(this,Q):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return te.prototype.then=O,te.all=function(Q){return new re(this,Q).promise},te.race=function(Q){var ge=this;return p(Q)?new ge(function(he,G){for(var W=Q.length,ve=0;ve<W;ve++)ge.resolve(Q[ve]).then(he,G)}):new ge(function(he,G){return G(new TypeError("You must pass an array to race."))})},te.resolve=j,te.reject=function(Q){var ge=new this(q);return de(ge,Q),ge},te._setScheduler=function(Q){l=Q},te._setAsap=function(Q){h=Q},te._asap=h,te.polyfill=function(){var Q=void 0;if(r!==void 0)Q=r;else if(typeof self!="undefined")Q=self;else try{Q=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ge=Q.Promise;if(ge){var he=null;try{he=Object.prototype.toString.call(ge.resolve())}catch{}if(he==="[object Promise]"&&!ge.cast)return}Q.Promise=te},te.Promise=te},typeof i=="object"&&n!==void 0?n.exports=c():a.ES6Promise=c()}).call(this,e("_process"),typeof Oo!="undefined"?Oo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:238}],231:[function(e,n,i){(function(s,r){if(i!==void 0&&n!==void 0)r(i,n);else{var a={exports:{}};r(a.exports,a),s.fetchJsonp=a.exports}})(this,function(s,r){var a=5e3,c="callback";function d(u){try{delete window[u]}catch{window[u]=void 0}}function p(u){var o=document.getElementById(u);o&&document.getElementsByTagName("head")[0].removeChild(o)}r.exports=function(u){var o=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],l=u,h=o.timeout||a,f=o.jsonpCallback||c,m=void 0;return new Promise(function(g,v){var x=o.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),w=f+"_"+x;window[x]=function(A){g({ok:!0,json:function(){return Promise.resolve(A)}}),m&&clearTimeout(m),p(w),d(x)},l+=l.indexOf("?")===-1?"?":"&";var M=document.createElement("script");M.setAttribute("src",""+l+f+"="+x),o.charset&&M.setAttribute("charset",o.charset),M.id=w,document.getElementsByTagName("head")[0].appendChild(M),m=setTimeout(function(){v(new Error("JSONP request to "+u+" timed out")),d(x),p(w),window[x]=function(){d(x)}},h),M.onerror=function(){v(new Error("JSONP request to "+u+" failed")),d(x),p(w),m&&clearTimeout(m)}})}})},{}],232:[function(e,n,i){var s=s||function(r){if(!(r===void 0||typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))){var a=r.document,c=function(){return r.URL||r.webkitURL||r},d=a.createElementNS("http://www.w3.org/1999/xhtml","a"),p="download"in d,u=/constructor/i.test(r.HTMLElement)||r.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(v){(r.setImmediate||r.setTimeout)(function(){throw v},0)},h=function(v){setTimeout(function(){typeof v=="string"?c().revokeObjectURL(v):v.remove()},4e4)},f=function(v){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob([String.fromCharCode(65279),v],{type:v.type}):v},m=function(v,x,w){w||(v=f(v));function M(){(function(R,P,D){for(var O=(P=[].concat(P)).length;O--;){var j=R["on"+P[O]];if(typeof j=="function")try{j.call(R,D||R)}catch(N){l(N)}}})(E,"writestart progress write writeend".split(" "))}var A,E=this,I=v.type==="application/octet-stream";if(E.readyState=E.INIT,p)return A=c().createObjectURL(v),void setTimeout(function(){var R,P;d.href=A,d.download=x,R=d,P=new MouseEvent("click"),R.dispatchEvent(P),M(),h(A),E.readyState=E.DONE});(function(){if((o||I&&u)&&r.FileReader){var R=new FileReader;return R.onloadend=function(){var P=o?R.result:R.result.replace(/^data:[^;]*;/,"data:attachment/file;");r.open(P,"_blank")||(r.location.href=P),P=void 0,E.readyState=E.DONE,M()},R.readAsDataURL(v),E.readyState=E.INIT}A=A||c().createObjectURL(v),I?r.location.href=A:r.open(A,"_blank")||(r.location.href=A),E.readyState=E.DONE,M(),h(A)})()},g=m.prototype;return typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob?function(v,x,w){return x=x||v.name||"download",w||(v=f(v)),navigator.msSaveOrOpenBlob(v,x)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,function(v,x,w){return new m(v,x||v.name||"download",w)})}}(typeof self!="undefined"&&self||typeof window!="undefined"&&window||this.content);n!==void 0&&n.exports&&(n.exports.saveAs=s)},{}],233:[function(e,n,i){i.read=function(s,r,a,c,d){var p,u,o=8*d-c-1,l=(1<<o)-1,h=l>>1,f=-7,m=a?d-1:0,g=a?-1:1,v=s[r+m];for(m+=g,p=v&(1<<-f)-1,v>>=-f,f+=o;0<f;p=256*p+s[r+m],m+=g,f-=8);for(u=p&(1<<-f)-1,p>>=-f,f+=c;0<f;u=256*u+s[r+m],m+=g,f-=8);if(p===0)p=1-h;else{if(p===l)return u?NaN:1/0*(v?-1:1);u+=Math.pow(2,c),p-=h}return(v?-1:1)*u*Math.pow(2,p-c)},i.write=function(s,r,a,c,d,p){var u,o,l,h=8*p-d-1,f=(1<<h)-1,m=f>>1,g=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=c?0:p-1,x=c?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(o=isNaN(r)?1:0,u=f):(u=Math.floor(Math.log(r)/Math.LN2),r*(l=Math.pow(2,-u))<1&&(u--,l*=2),2<=(r+=1<=u+m?g/l:g*Math.pow(2,1-m))*l&&(u++,l/=2),f<=u+m?(o=0,u=f):1<=u+m?(o=(r*l-1)*Math.pow(2,d),u+=m):(o=r*Math.pow(2,m-1)*Math.pow(2,d),u=0));8<=d;s[a+v]=255&o,v+=x,o/=256,d-=8);for(u=u<<d|o,h+=d;0<h;s[a+v]=255&u,v+=x,u/=256,h-=8);s[a+v-x]|=128*w}},{}],234:[function(e,n,i){var s;function r(U,Y){return U.b===Y.b&&U.a===Y.a}function a(U,Y){return U.b<Y.b||U.b===Y.b&&U.a<=Y.a}function c(U,Y,z){var J=Y.b-U.b,ce=z.b-Y.b;return 0<J+ce?J<ce?Y.a-U.a+J/(J+ce)*(U.a-z.a):Y.a-z.a+ce/(J+ce)*(z.a-U.a):0}function d(U,Y,z){var J=Y.b-U.b,ce=z.b-Y.b;return 0<J+ce?(Y.a-z.a)*J+(Y.a-U.a)*ce:0}function p(U,Y){return U.a<Y.a||U.a===Y.a&&U.b<=Y.b}function u(U,Y,z){var J=Y.a-U.a,ce=z.a-Y.a;return 0<J+ce?J<ce?Y.b-U.b+J/(J+ce)*(U.b-z.b):Y.b-z.b+ce/(J+ce)*(z.b-U.b):0}function o(U,Y,z){var J=Y.a-U.a,ce=z.a-Y.a;return 0<J+ce?(Y.b-z.b)*J+(Y.b-U.b)*ce:0}function l(U,Y,z,J){return(U=U<0?0:U)<=(z=z<0?0:z)?z===0?(Y+J)/2:Y+U/(U+z)*(J-Y):J+z/(U+z)*(Y-J)}function h(U){var Y=x(U.b);return M(Y,U.c),M(Y.b,U.c),A(Y,U.a),Y}function f(U,Y){var z=!1,J=!1;U!==Y&&(Y.a!==U.a&&(J=!0,I(Y.a,U.a)),Y.d!==U.d&&(z=!0,R(Y.d,U.d)),w(Y,U),J||(M(Y,U.a),U.a.c=U),z||(A(Y,U.d),U.d.a=U))}function m(U){var Y=U.b,z=!1;U.d!==U.b.d&&(z=!0,R(U.d,U.b.d)),U.c===U?I(U.a,null):(U.b.d.a=G(U),U.a.c=U.c,w(U,G(U)),z||A(U,U.d)),Y.c===Y?(I(Y.a,null),R(Y.d,null)):(U.d.a=G(Y),Y.a.c=Y.c,w(Y,G(Y))),E(U)}function g(U){var Y=x(U),z=Y.b;return w(Y,U.e),Y.a=U.b.a,M(z,Y.a),Y.d=z.d=U.d,Y=Y.b,w(U.b,G(U.b)),w(U.b,Y),U.b.a=Y.a,Y.b.a.c=Y.b,Y.b.d=U.b.d,Y.f=U.f,Y.b.f=U.b.f,Y}function v(U,Y){var z=!1,J=x(U),ce=J.b;return Y.d!==U.d&&(z=!0,R(Y.d,U.d)),w(J,U.e),w(ce,Y),J.a=U.b.a,ce.a=Y.a,J.d=ce.d=U.d,U.d.a=ce,z||A(J,U.d),J}function x(U){var Y=new he,z=new he,J=U.b.h;return(((z.h=J).b.h=Y).h=U).b.h=z,Y.b=z,((Y.c=Y).e=z).b=Y,(z.c=z).e=Y}function w(U,Y){var z=U.c,J=Y.c;z.b.e=Y,(J.b.e=U).c=J,Y.c=z}function M(U,Y){var z=Y.f,J=new ve(Y,z);for(z.e=J,z=(Y.f=J).c=U;z.a=J,(z=z.c)!==U;);}function A(U,Y){var z=Y.d,J=new ge(Y,z);for(z.b=J,(Y.d=J).a=U,J.c=Y.c,z=U;z.d=J,(z=z.e)!==U;);}function E(U){var Y=U.h;U=U.b.h,(Y.b.h=U).b.h=Y}function I(U,Y){for(var z=U.c,J=z;J.a=Y,(J=J.c)!==z;);z=U.f,((J=U.e).f=z).e=J}function R(U,Y){for(var z=U.a,J=z;J.d=Y,(J=J.e)!==z;);z=U.d,((J=U.b).d=z).b=J}function P(U){var Y=0;return Math.abs(U[1])>Math.abs(U[0])&&(Y=1),Math.abs(U[2])>Math.abs(U[Y])&&(Y=2),Y}function D(U,Y){U.f+=Y.f,U.b.f+=Y.b.f}function O(U,Y,z){return U=U.a,Y=Y.a,z=z.a,Y.b.a===U?z.b.a===U?a(Y.a,z.a)?d(z.b.a,Y.a,z.a)<=0:0<=d(Y.b.a,z.a,Y.a):d(z.b.a,U,z.a)<=0:z.b.a===U?0<=d(Y.b.a,U,Y.a):(Y=c(Y.b.a,U,Y.a),(U=c(z.b.a,U,z.a))<=Y)}function j(U){U.a.i=null;var Y=U.e;Y.a.c=Y.c,Y.c.a=Y.a,U.e=null}function N(U,Y){m(U.a),U.c=!1,(U.a=Y).i=U}function q(U){for(var Y=U.a.a;(U=ie(U)).a.a===Y;);return U.c&&(N(U,Y=v(Ne(U).a.b,U.a.e)),U=ie(U)),U}function X(U,Y,z){var J=new se;return J.a=z,J.e=re(U.f,Y.e,J),z.i=J}function V(U,Y){switch(U.s){case 100130:return(1&Y)!=0;case 100131:return Y!==0;case 100132:return 0<Y;case 100133:return Y<0;case 100134:return 2<=Y||Y<=-2}return!1}function $(U){var Y=U.a,z=Y.d;z.c=U.d,z.a=Y,j(U)}function K(U,Y,z){for(Y=(U=Y).a;U!==z;){U.c=!1;var J=Ne(U),ce=J.a;if(ce.a!==Y.a){if(!J.c){$(U);break}N(J,ce=v(Y.c.b,ce.b))}Y.c!==ce&&(f(G(ce),ce),f(Y,ce)),$(U),Y=J.a,U=J}return Y}function _e(U,Y,z,J,ce,Ae){for(var Ie=!0;X(U,Y,z.b),(z=z.c)!==J;);for(ce===null&&(ce=Ne(Y).a.b.c);(z=(J=Ne(Y)).a.b).a===ce.a;)z.c!==ce&&(f(G(z),z),f(G(ce),z)),J.f=Y.f-z.f,J.d=V(U,J.f),Y.b=!0,!Ie&&de(U,Y)&&(D(z,ce),j(Y),m(ce)),Ie=!1,Y=J,ce=z;Y.b=!0,Ae&&C(U,Y)}function me(U,Y,z,J,ce){var Ae=[Y.g[0],Y.g[1],Y.g[2]];Y.d=null,Y.d=U.o&&U.o(Ae,z,J,U.c)||null,Y.d===null&&(ce?U.n||(Q(U,100156),U.n=!0):Y.d=z[0])}function ye(U,Y,z){var J=[null,null,null,null];J[0]=Y.a.d,J[1]=z.a.d,me(U,Y.a,J,[.5,.5,0,0],!1),f(Y,z)}function fe(U,Y,z,J,ce){var Ae=Math.abs(Y.b-U.b)+Math.abs(Y.a-U.a),Ie=Math.abs(z.b-U.b)+Math.abs(z.a-U.a),Ve=ce+1;J[ce]=.5*Ie/(Ae+Ie),J[Ve]=.5*Ae/(Ae+Ie),U.g[0]+=J[ce]*Y.g[0]+J[Ve]*z.g[0],U.g[1]+=J[ce]*Y.g[1]+J[Ve]*z.g[1],U.g[2]+=J[ce]*Y.g[2]+J[Ve]*z.g[2]}function de(U,Y){var z=Ne(Y),J=Y.a,ce=z.a;if(a(J.a,ce.a)){if(0<d(ce.b.a,J.a,ce.a))return!1;if(r(J.a,ce.a)){if(J.a!==ce.a){z=U.e;var Ae=J.a.h;if(0<=Ae){var Ie=(z=z.b).d,Ve=z.e,Me=z.c,Qe=Me[Ae];Ie[Qe]=Ie[z.a],(Me[Ie[Qe]]=Qe)<=--z.a&&(Qe<=1||a(Ve[Ie[Qe>>1]],Ve[Ie[Qe]])?le(z,Qe):De(z,Qe)),Ve[Ae]=null,Me[Ae]=z.b,z.b=Ae}else for(z.c[-(Ae+1)]=null;0<z.a&&z.c[z.d[z.a-1]]===null;)--z.a;ye(U,G(ce),J)}}else g(ce.b),f(J,G(ce)),Y.b=z.b=!0}else{if(d(J.b.a,ce.a,J.a)<0)return!1;ie(Y).b=Y.b=!0,g(J.b),f(G(ce),J)}return!0}function Ee(U,Y){var z=Ne(Y),J=Y.a,ce=z.a,Ae=J.a,Ie=ce.a,Ve=J.b.a,Me=ce.b.a,Qe=new ve;if(d(Ve,U.a,Ae),d(Me,U.a,Ie),Ae===Ie||Math.min(Ae.a,Ve.a)>Math.max(Ie.a,Me.a))return!1;if(a(Ae,Ie)){if(0<d(Me,Ae,Ie))return!1}else if(d(Ve,Ie,Ae)<0)return!1;var rt,xt,bt=Ve,ct=Ae,yt=Me,Mt=Ie;if(a(bt,ct)||(rt=bt,bt=ct,ct=rt),a(yt,Mt)||(rt=yt,yt=Mt,Mt=rt),a(bt,yt)||(rt=bt,bt=yt,yt=rt,rt=ct,ct=Mt,Mt=rt),a(yt,ct)?a(ct,Mt)?((rt=c(bt,yt,ct))+(xt=c(yt,ct,Mt))<0&&(rt=-rt,xt=-xt),Qe.b=l(rt,yt.b,xt,ct.b)):((rt=d(bt,yt,ct))+(xt=-d(bt,Mt,ct))<0&&(rt=-rt,xt=-xt),Qe.b=l(rt,yt.b,xt,Mt.b)):Qe.b=(yt.b+ct.b)/2,p(bt,ct)||(rt=bt,bt=ct,ct=rt),p(yt,Mt)||(rt=yt,yt=Mt,Mt=rt),p(bt,yt)||(rt=bt,bt=yt,yt=rt,rt=ct,ct=Mt,Mt=rt),p(yt,ct)?p(ct,Mt)?((rt=u(bt,yt,ct))+(xt=u(yt,ct,Mt))<0&&(rt=-rt,xt=-xt),Qe.a=l(rt,yt.a,xt,ct.a)):((rt=o(bt,yt,ct))+(xt=-o(bt,Mt,ct))<0&&(rt=-rt,xt=-xt),Qe.a=l(rt,yt.a,xt,Mt.a)):Qe.a=(yt.a+ct.a)/2,a(Qe,U.a)&&(Qe.b=U.a.b,Qe.a=U.a.a),bt=a(Ae,Ie)?Ae:Ie,a(bt,Qe)&&(Qe.b=bt.b,Qe.a=bt.a),r(Qe,Ae)||r(Qe,Ie))return de(U,Y),!1;if(!r(Ve,U.a)&&0<=d(Ve,U.a,Qe)||!r(Me,U.a)&&d(Me,U.a,Qe)<=0){if(Me===U.a)return g(J.b),f(ce.b,J),J=Ne(Y=q(Y)).a,K(U,Ne(Y),z),_e(U,Y,G(J),J,J,!0),!0;if(Ve!==U.a)return 0<=d(Ve,U.a,Qe)&&(ie(Y).b=Y.b=!0,g(J.b),J.a.b=U.a.b,J.a.a=U.a.a),d(Me,U.a,Qe)<=0&&(Y.b=z.b=!0,g(ce.b),ce.a.b=U.a.b,ce.a.a=U.a.a),!1;for(g(ce.b),f(J.e,G(ce)),Ie=(Ae=z=Y).a.b.a;(Ae=ie(Ae)).a.b.a===Ie;);return Ae=Ne(Y=Ae).a.b.c,z.a=G(ce),_e(U,Y,(ce=K(U,z,null)).c,J.b.c,Ae,!0),!0}return g(J.b),g(ce.b),f(G(ce),J),J.a.b=Qe.b,J.a.a=Qe.a,J.a.h=Re(U.e,J.a),J=J.a,ce=[0,0,0,0],Qe=[Ae.d,Ve.d,Ie.d,Me.d],J.g[0]=J.g[1]=J.g[2]=0,fe(J,Ae,Ve,ce,0),fe(J,Ie,Me,ce,2),me(U,J,Qe,ce,!0),ie(Y).b=Y.b=z.b=!0,!1}function C(U,Y){for(var z=Ne(Y);;){for(;z.b;)z=Ne(Y=z);if(!Y.b&&((Y=ie(z=Y))===null||!Y.b))break;Y.b=!1;var J,ce=Y.a,Ae=z.a;if(J=ce.b.a!==Ae.b.a)e:{var Ie=Ne(J=Y),Ve=J.a,Me=Ie.a,Qe=void 0;if(a(Ve.b.a,Me.b.a)){if(d(Ve.b.a,Me.b.a,Ve.a)<0){J=!1;break e}ie(J).b=J.b=!0,Qe=g(Ve),f(Me.b,Qe),Qe.d.c=J.d}else{if(0<d(Me.b.a,Ve.b.a,Me.a)){J=!1;break e}J.b=Ie.b=!0,Qe=g(Me),f(Ve.e,Me.b),Qe.b.d.c=J.d}J=!0}if(J&&(z.c?(j(z),m(Ae),Ae=(z=Ne(Y)).a):Y.c&&(j(Y),m(ce),ce=(Y=ie(z)).a)),ce.a!==Ae.a){if(ce.b.a===Ae.b.a||Y.c||z.c||ce.b.a!==U.a&&Ae.b.a!==U.a)de(U,Y);else if(Ee(U,Y))break}ce.a===Ae.a&&ce.b.a===Ae.b.a&&(D(Ae,ce),j(Y),m(ce),Y=ie(z))}}function F(U,Y){for(var z=(U.a=Y).c;z.i===null;)if((z=z.c)===Y.c){z=U;var J=Y;(Ie=new se).a=J.c.b;for(var ce=(Me=z.f).a;(ce=ce.a).b!==null&&!Me.c(Me.b,Ie,ce.b););var Ae=Ne(Me=ce.b),Ie=Me.a;if(ce=Ae.a,d(Ie.b.a,J,Ie.a)===0)r((Ie=Me.a).a,J)||r(Ie.b.a,J)||(g(Ie.b),Me.c&&(m(Ie.c),Me.c=!1),f(J.c,Ie),F(z,J));else{var Ve=a(ce.b.a,Ie.b.a)?Me:Ae;Ae=void 0,Me.d||Ve.c?(Ae=Ve===Me?v(J.c.b,Ie.e):v(ce.b.c.b,J.c).b,Ve.c?N(Ve,Ae):((Me=X(Ie=z,Me,Ae)).f=ie(Me).f+Me.a.f,Me.d=V(Ie,Me.f)),F(z,J)):_e(z,Me,J.c,J.c,null,!0)}return}if(Me=(Ie=Ne(z=q(z.i))).a,(Ie=K(U,Ie,null)).c===Me){Ie=(Me=Ie).c,ce=Ne(z),Ae=z.a,Ve=ce.a;var Me,Qe=!1;Ae.b.a!==Ve.b.a&&Ee(U,z),r(Ae.a,U.a)&&(f(G(Ie),Ae),Ie=Ne(z=q(z)).a,K(U,Ne(z),ce),Qe=!0),r(Ve.a,U.a)&&(f(Me,G(Ve)),Me=K(U,ce,null),Qe=!0),Qe?_e(U,z,Me.c,Ie,Ie,!0):(J=a(Ve.a,Ae.a)?G(Ve):Ae,_e(U,z,J=v(Me.c.b,J),J.c,J.c,!1),J.b.i.c=!0,C(U,z))}else _e(U,z,Ie.c,Me,Me,!0)}function H(U,Y){var z=new se,J=h(U.b);J.a.b=4e150,J.a.a=Y,J.b.a.b=-4e150,J.b.a.a=Y,U.a=J.b.a,z.a=J,z.f=0,z.d=!1,z.c=!1,z.h=!0,z.b=!1,J=re(J=U.f,J.a,z),z.e=J}function ne(U){this.a=new oe,this.b=U,this.c=O}function re(U,Y,z){for(;(Y=Y.c).b!==null&&!U.c(U.b,Y.b,z););return U=new oe(z,Y.a,Y),Y.a.c=U,Y.a=U}function oe(U,Y,z){this.b=U||null,this.a=Y||this,this.c=z||this}function te(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function xe(U,Y){if(U.d!==Y)for(;U.d!==Y;)if(U.d<Y)switch(U.d){case 0:Q(U,100151),U.u(null);break;case 1:Q(U,100152),U.t()}else switch(U.d){case 2:Q(U,100154),U.v();break;case 1:Q(U,100153),U.w()}}function Q(U,Y){U.p&&U.p(Y,U.c)}function ge(U,Y){this.b=U||this,this.d=Y||this,this.a=null,this.c=!1}function he(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function G(U){return U.b.e}function W(){this.c=new ve,this.a=new ge,this.b=new he,this.d=new he,this.b.b=this.d,this.d.b=this.b}function ve(U,Y){this.e=U||this,this.f=Y||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function we(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Pe}function Re(U,Y){if(U.e){var z,J=U.b,ce=++J.a;return 2*ce>J.f&&(J.f*=2,J.c=Ze(J.c,J.f+1)),J.b===0?z=ce:(z=J.b,J.b=J.c[J.b]),J.e[z]=Y,J.c[z]=ce,J.d[ce]=z,J.h&&De(J,ce),z}return J=U.a++,U.c[J]=Y,-(J+1)}function Ge(U){if(U.a===0)return Ce(U.b);var Y=U.c[U.d[U.a-1]];if(U.b.a!==0&&a(Je(U.b),Y))return Ce(U.b);for(;--U.a,0<U.a&&U.c[U.d[U.a-1]]===null;);return Y}function Pe(){this.d=Ze([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ze(U,Y){for(var z=Array(Y),J=0;J<U.length;J++)z[J]=U[J];for(;J<Y;J++)z[J]=0;return z}function Je(U){return U.e[U.d[1]]}function Ce(U){var Y=U.d,z=U.e,J=U.c,ce=Y[1],Ae=z[ce];return 0<U.a&&(Y[1]=Y[U.a],J[Y[1]]=1,z[ce]=null,J[ce]=U.b,U.b=ce,0<--U.a&&le(U,1)),Ae}function le(U,Y){for(var z=U.d,J=U.e,ce=U.c,Ae=Y,Ie=z[Ae];;){var Ve=Ae<<1;Ve<U.a&&a(J[z[Ve+1]],J[z[Ve]])&&(Ve+=1);var Me=z[Ve];if(Ve>U.a||a(J[Ie],J[Me])){ce[z[Ae]=Ie]=Ae;break}ce[z[Ae]=Me]=Ae,Ae=Ve}}function De(U,Y){for(var z=U.d,J=U.e,ce=U.c,Ae=Y,Ie=z[Ae];;){var Ve=Ae>>1,Me=z[Ve];if(Ve==0||a(J[Me],J[Ie])){ce[z[Ae]=Ie]=Ae;break}ce[z[Ae]=Me]=Ae,Ae=Ve}}function se(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ne(U){return U.e.c.b}function ie(U){return U.e.a.b}(s=te.prototype).x=function(){xe(this,0)},s.B=function(U,Y){switch(U){case 100142:return;case 100140:switch(Y){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=Y)}break;case 100141:return void(this.m=!!Y);default:return void Q(this,100900)}Q(this,100901)},s.y=function(U){switch(U){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Q(this,100900)}return!1},s.A=function(U,Y,z){this.j[0]=U,this.j[1]=Y,this.j[2]=z},s.z=function(U,Y){var z=Y||null;switch(U){case 100100:case 100106:this.h=z;break;case 100104:case 100110:this.l=z;break;case 100101:case 100107:this.k=z;break;case 100102:case 100108:this.i=z;break;case 100103:case 100109:this.p=z;break;case 100105:case 100111:this.o=z;break;case 100112:this.r=z;break;default:Q(this,100900)}},s.C=function(U,Y){var z=!1,J=[0,0,0];xe(this,2);for(var ce=0;ce<3;++ce){var Ae=U[ce];Ae<-1e150&&(Ae=-1e150,z=!0),1e150<Ae&&(Ae=1e150,z=!0),J[ce]=Ae}z&&Q(this,100155),(z=this.q)===null?f(z=h(this.b),z.b):(g(z),z=z.e),z.a.d=Y,z.a.g[0]=J[0],z.a.g[1]=J[1],z.a.g[2]=J[2],z.f=1,z.b.f=-1,this.q=z},s.u=function(U){xe(this,0),this.d=1,this.b=new W,this.c=U},s.t=function(){xe(this,1),this.d=2,this.q=null},s.v=function(){xe(this,2),this.d=1},s.w=function(){xe(this,1),this.d=0;var U,Y,z=!1,J=[Me=this.j[0],ce=this.j[1],Ie=this.j[2]];if(Me===0&&ce===0&&Ie===0){for(var ce=[-2e150,-2e150,-2e150],Ae=[2e150,2e150,2e150],Ie=[],Ve=[],Me=(z=this.b.c).e;Me!==z;Me=Me.e)for(var Qe=0;Qe<3;++Qe){var rt=Me.g[Qe];rt<Ae[Qe]&&(Ae[Qe]=rt,Ve[Qe]=Me),rt>ce[Qe]&&(ce[Qe]=rt,Ie[Qe]=Me)}if(Me=0,ce[1]-Ae[1]>ce[0]-Ae[0]&&(Me=1),ce[2]-Ae[2]>ce[Me]-Ae[Me]&&(Me=2),Ae[Me]>=ce[Me])J[0]=0,J[1]=0,J[2]=1;else{for(ce=0,Ae=Ve[Me],Ie=Ie[Me],Ve=[0,0,0],Ae=[Ae.g[0]-Ie.g[0],Ae.g[1]-Ie.g[1],Ae.g[2]-Ie.g[2]],Qe=[0,0,0],Me=z.e;Me!==z;Me=Me.e)Qe[0]=Me.g[0]-Ie.g[0],Qe[1]=Me.g[1]-Ie.g[1],Qe[2]=Me.g[2]-Ie.g[2],Ve[0]=Ae[1]*Qe[2]-Ae[2]*Qe[1],Ve[1]=Ae[2]*Qe[0]-Ae[0]*Qe[2],Ve[2]=Ae[0]*Qe[1]-Ae[1]*Qe[0],ce<(rt=Ve[0]*Ve[0]+Ve[1]*Ve[1]+Ve[2]*Ve[2])&&(ce=rt,J[0]=Ve[0],J[1]=Ve[1],J[2]=Ve[2]);ce<=0&&(J[0]=J[1]=J[2]=0,J[P(Ae)]=1)}z=!0}for(Ve=P(J),Me=this.b.c,ce=(Ve+1)%3,Ie=(Ve+2)%3,Ve=0<J[Ve]?1:-1,J=Me.e;J!==Me;J=J.e)J.b=J.g[ce],J.a=Ve*J.g[Ie];if(z){for(J=0,Me=(z=this.b.a).b;Me!==z;Me=Me.b)if(!((ce=Me.a).f<=0))for(;J+=(ce.a.b-ce.b.a.b)*(ce.a.a+ce.b.a.a),(ce=ce.e)!==Me.a;);if(J<0)for(z=(J=this.b.c).e;z!==J;z=z.e)z.a=-z.a}for(this.n=!1,Me=(J=this.b.b).h;Me!==J;Me=z)z=Me.h,ce=Me.e,r(Me.a,Me.b.a)&&Me.e.e!==Me&&(ye(this,ce,Me),m(Me),ce=(Me=ce).e),ce.e===Me&&(ce!==Me&&(ce!==z&&ce!==z.b||(z=z.h),m(ce)),Me!==z&&Me!==z.b||(z=z.h),m(Me));for(this.e=J=new we,Me=(z=this.b.c).e;Me!==z;Me=Me.e)Me.h=Re(J,Me);for(function(xt){xt.d=[];for(var bt=0;bt<xt.a;bt++)xt.d[bt]=bt;xt.d.sort(function(ct){return function(yt,Mt){return a(ct[yt],ct[Mt])?1:-1}}(xt.c)),xt.e=!0,function(ct){for(var yt=ct.a;1<=yt;--yt)le(ct,yt);ct.h=!0}(xt.b)}(J),this.f=new ne(this),H(this,-4e150),H(this,4e150);(J=Ge(this.e))!==null;){for(;;){e:if(Me=this.e,Me.a===0)z=Je(Me.b);else if(z=Me.c[Me.d[Me.a-1]],Me.b.a!==0&&(Me=Je(Me.b),a(Me,z))){z=Me;break e}if(z===null||!r(z,J))break;z=Ge(this.e),ye(this,J.c,z.c)}F(this,J)}for(this.a=this.f.a.a.b.a.a,J=0;(z=this.f.a.a.b)!==null;)z.h||++J,j(z);for(this.f=null,(J=this.e).b=null,J.d=null,this.e=J.c=null,Me=(J=this.b).a.b;Me!==J.a;Me=z)z=Me.b,(Me=Me.a).e.e===Me&&(D(Me.c,Me),m(Me));if(!this.n){if(J=this.b,this.m)for(Me=J.b.h;Me!==J.b;Me=z)z=Me.h,Me.b.d.c!==Me.d.c?Me.f=Me.d.c?1:-1:m(Me);else for(Me=J.a.b;Me!==J.a;Me=z)if(z=Me.b,Me.c){for(Me=Me.a;a(Me.b.a,Me.a);Me=Me.c.b);for(;a(Me.a,Me.b.a);Me=Me.e);for(ce=Me.c.b,Ie=void 0;Me.e!==ce;)if(a(Me.b.a,ce.a)){for(;ce.e!==Me&&(a((Y=ce.e).b.a,Y.a)||d(ce.a,ce.b.a,ce.e.b.a)<=0);)ce=(Ie=v(ce.e,ce)).b;ce=ce.c.b}else{for(;ce.e!==Me&&(a((U=Me.c.b).a,U.b.a)||0<=d(Me.b.a,Me.a,Me.c.b.a));)Me=(Ie=v(Me,Me.c.b)).b;Me=Me.e}for(;ce.e.e!==Me;)ce=(Ie=v(ce.e,ce)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(z=(J=this.b).a.b;z!==J.a;z=z.b)if(z.c){for(this.h&&this.h(2,this.c),Me=z.a;this.k&&this.k(Me.a.d,this.c),(Me=Me.e)!==z.a;);this.i&&this.i(this.c)}}else{for(J=this.b,z=!!this.l,Me=!1,ce=-1,Ie=J.a.d;Ie!==J.a;Ie=Ie.d)if(Ie.c)for(Me||(this.h&&this.h(4,this.c),Me=!0),Ve=Ie.a;z&&ce!==(Ae=Ve.b.d.c?0:1)&&(ce=Ae,this.l&&this.l(!!ce,this.c)),this.k&&this.k(Ve.a.d,this.c),(Ve=Ve.e)!==Ie.a;);Me&&this.i&&this.i(this.c)}if(this.r){for(Me=(J=this.b).a.b;Me!==J.a;Me=z)if(z=Me.b,!Me.c){for(Ie=(ce=Me.a).e,Ve=void 0;Ie=(Ve=Ie).e,(Ve.d=null)===Ve.b.d&&(Ve.c===Ve?I(Ve.a,null):(Ve.a.c=Ve.c,w(Ve,G(Ve))),(Ae=Ve.b).c===Ae?I(Ae.a,null):(Ae.a.c=Ae.c,w(Ae,G(Ae))),E(Ve)),Ve!==ce;);ce=Me.d,((Me=Me.b).d=ce).b=Me}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:te,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},te.prototype.gluDeleteTess=te.prototype.x,te.prototype.gluTessProperty=te.prototype.B,te.prototype.gluGetTessProperty=te.prototype.y,te.prototype.gluTessNormal=te.prototype.A,te.prototype.gluTessCallback=te.prototype.z,te.prototype.gluTessVertex=te.prototype.C,te.prototype.gluTessBeginPolygon=te.prototype.u,te.prototype.gluTessBeginContour=te.prototype.t,te.prototype.gluTessEndContour=te.prototype.v,te.prototype.gluTessEndPolygon=te.prototype.w,n!==void 0&&(n.exports=this.libtess)},{}],235:[function(e,n,i){function s(r,a,c,d){for(var p=r[a++],u=1<<p,o=1+u,l=1+o,h=p+1,f=(1<<h)-1,m=0,g=0,v=0,x=r[a++],w=new Int32Array(4096),M=null;;){for(;m<16&&x!==0;)g|=r[a++]<<m,m+=8,x===1?x=r[a++]:--x;if(m<h)break;var A=g&f;if(g>>=h,m-=h,A!=u){if(A==o)break;for(var E=A<l?A:M,I=0,R=E;u<R;)R=w[R]>>8,++I;var P=R;if(d<v+I+(E!==A?1:0))return void console.log("Warning, gif stream longer than expected.");c[v++]=P;var D=v+=I;for(E!==A&&(c[v++]=P),R=E;I--;)R=w[R],c[--D]=255&R,R>>=8;M!==null&&l<4096&&(w[l++]=M<<8|P,f+1<=l&&h<12&&(++h,f=f<<1|1)),M=A}else l=1+o,f=(1<<(h=p+1))-1,M=null}return v!==d&&console.log("Warning, gif stream shorter than expected."),c}try{i.GifWriter=function(r,a,c,d){var p=0,u=(d=d===void 0?{}:d).loop===void 0?null:d.loop,o=d.palette===void 0?null:d.palette;if(a<=0||c<=0||65535<a||65535<c)throw new Error("Width/Height invalid.");function l(M){var A=M.length;if(A<2||256<A||A&A-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return A}r[p++]=71,r[p++]=73,r[p++]=70,r[p++]=56,r[p++]=57,r[p++]=97;var h=0,f=0;if(o!==null){for(var m=l(o);m>>=1;)++h;if(m=1<<h,--h,d.background!==void 0){if(m<=(f=d.background))throw new Error("Background index out of range.");if(f===0)throw new Error("Background index explicitly passed as 0.")}}if(r[p++]=255&a,r[p++]=a>>8&255,r[p++]=255&c,r[p++]=c>>8&255,r[p++]=(o!==null?128:0)|h,r[p++]=f,r[p++]=0,o!==null)for(var g=0,v=o.length;g<v;++g){var x=o[g];r[p++]=x>>16&255,r[p++]=x>>8&255,r[p++]=255&x}if(u!==null){if(u<0||65535<u)throw new Error("Loop count invalid.");r[p++]=33,r[p++]=255,r[p++]=11,r[p++]=78,r[p++]=69,r[p++]=84,r[p++]=83,r[p++]=67,r[p++]=65,r[p++]=80,r[p++]=69,r[p++]=50,r[p++]=46,r[p++]=48,r[p++]=3,r[p++]=1,r[p++]=255&u,r[p++]=u>>8&255,r[p++]=0}var w=!1;this.addFrame=function(M,A,E,I,R,P){if(w===!0&&(--p,w=!1),P=P===void 0?{}:P,M<0||A<0||65535<M||65535<A)throw new Error("x/y invalid.");if(E<=0||I<=0||65535<E||65535<I)throw new Error("Width/Height invalid.");if(R.length<E*I)throw new Error("Not enough pixels for the frame size.");var D=!0,O=P.palette;if(O==null&&(D=!1,O=o),O==null)throw new Error("Must supply either a local or global palette.");for(var j=l(O),N=0;j>>=1;)++N;j=1<<N;var q=P.delay===void 0?0:P.delay,X=P.disposal===void 0?0:P.disposal;if(X<0||3<X)throw new Error("Disposal out of range.");var V=!1,$=0;if(P.transparent!==void 0&&P.transparent!==null&&(V=!0,($=P.transparent)<0||j<=$))throw new Error("Transparent color index.");if(X===0&&!V&&q===0||(r[p++]=33,r[p++]=249,r[p++]=4,r[p++]=X<<2|(V===!0?1:0),r[p++]=255&q,r[p++]=q>>8&255,r[p++]=$,r[p++]=0),r[p++]=44,r[p++]=255&M,r[p++]=M>>8&255,r[p++]=255&A,r[p++]=A>>8&255,r[p++]=255&E,r[p++]=E>>8&255,r[p++]=255&I,r[p++]=I>>8&255,r[p++]=D===!0?128|N-1:0,D===!0)for(var K=0,_e=O.length;K<_e;++K){var me=O[K];r[p++]=me>>16&255,r[p++]=me>>8&255,r[p++]=255&me}return p=function(ye,fe,de,Ee){ye[fe++]=de;var C=fe++,F=1<<de,H=F-1,ne=1+F,re=1+ne,oe=de+1,te=0,xe=0;function Q(Pe){for(;Pe<=te;)ye[fe++]=255&xe,xe>>=8,te-=8,fe===C+256&&(ye[C]=255,C=fe++)}function ge(Pe){xe|=Pe<<te,te+=oe,Q(8)}var he=Ee[0]&H,G={};ge(F);for(var W=1,ve=Ee.length;W<ve;++W){var we=Ee[W]&H,Re=he<<8|we,Ge=G[Re];if(Ge===void 0){for(xe|=he<<te,te+=oe;8<=te;)ye[fe++]=255&xe,xe>>=8,te-=8,fe===C+256&&(ye[C]=255,C=fe++);re===4096?(ge(F),re=1+ne,oe=de+1,G={}):(1<<oe<=re&&++oe,G[Re]=re++),he=we}else he=Ge}return ge(he),ge(ne),Q(1),C+1===fe?ye[C]=0:(ye[C]=fe-C-1,ye[fe++]=0),fe}(r,p,N<2?2:N,R)},this.end=function(){return w===!1&&(r[p++]=59,w=!0),p},this.getOutputBuffer=function(){return r},this.setOutputBuffer=function(M){r=M},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(M){p=M}},i.GifReader=function(r){var a=0;if(r[a++]!==71||r[a++]!==73||r[a++]!==70||r[a++]!==56||(r[a++]+1&253)!=56||r[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var c=r[a++]|r[a++]<<8,d=r[a++]|r[a++]<<8,p=r[a++],u=p>>7,o=1<<1+(7&p);r[a++],r[a++];var l=null,h=null;u&&(l=a,a+=3*(h=o));var f=!0,m=[],g=0,v=null,x=0,w=null;for(this.width=c,this.height=d;f&&a<r.length;)switch(r[a++]){case 33:switch(r[a++]){case 255:if(r[a]!==11||r[a+1]==78&&r[a+2]==69&&r[a+3]==84&&r[a+4]==83&&r[a+5]==67&&r[a+6]==65&&r[a+7]==80&&r[a+8]==69&&r[a+9]==50&&r[a+10]==46&&r[a+11]==48&&r[a+12]==3&&r[a+13]==1&&r[a+16]==0)a+=14,w=r[a++]|r[a++]<<8,a++;else for(a+=12;;){if(!(0<=(V=r[a++])))throw Error("Invalid block size");if(V===0)break;a+=V}break;case 249:if(r[a++]!==4||r[a+4]!==0)throw new Error("Invalid graphics extension block.");var M=r[a++];g=r[a++]|r[a++]<<8,v=r[a++],(1&M)==0&&(v=null),x=M>>2&7,a++;break;case 254:for(;;){if(!(0<=(V=r[a++])))throw Error("Invalid block size");if(V===0)break;a+=V}break;default:throw new Error("Unknown graphic control label: 0x"+r[a-1].toString(16))}break;case 44:var A=r[a++]|r[a++]<<8,E=r[a++]|r[a++]<<8,I=r[a++]|r[a++]<<8,R=r[a++]|r[a++]<<8,P=r[a++],D=P>>6&1,O=1<<1+(7&P),j=l,N=h,q=!1;P>>7&&(q=!0,j=a,a+=3*(N=O));var X=a;for(a++;;){var V;if(!(0<=(V=r[a++])))throw Error("Invalid block size");if(V===0)break;a+=V}m.push({x:A,y:E,width:I,height:R,has_local_palette:q,palette_offset:j,palette_size:N,data_offset:X,data_length:a-X,transparent_index:v,interlaced:!!D,delay:g,disposal:x});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+r[a-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return w},this.frameInfo=function($){if($<0||$>=m.length)throw new Error("Frame index out of range.");return m[$]},this.decodeAndBlitFrameBGRA=function($,K){var _e=this.frameInfo($),me=_e.width*_e.height,ye=new Uint8Array(me);s(r,_e.data_offset,ye,me);var fe=_e.palette_offset,de=_e.transparent_index;de===null&&(de=256);var Ee=_e.width,C=c-Ee,F=Ee,H=4*(_e.y*c+_e.x),ne=4*((_e.y+_e.height)*c+_e.x),re=H,oe=4*C;_e.interlaced===!0&&(oe+=4*c*7);for(var te=8,xe=0,Q=ye.length;xe<Q;++xe){var ge=ye[xe];if(F===0&&(F=Ee,ne<=(re+=oe)&&(oe=4*C+4*c*(te-1),re=H+(Ee+C)*(te<<1),te>>=1)),ge===de)re+=4;else{var he=r[fe+3*ge],G=r[fe+3*ge+1],W=r[fe+3*ge+2];K[re++]=W,K[re++]=G,K[re++]=he,K[re++]=255}--F}},this.decodeAndBlitFrameRGBA=function($,K){var _e=this.frameInfo($),me=_e.width*_e.height,ye=new Uint8Array(me);s(r,_e.data_offset,ye,me);var fe=_e.palette_offset,de=_e.transparent_index;de===null&&(de=256);var Ee=_e.width,C=c-Ee,F=Ee,H=4*(_e.y*c+_e.x),ne=4*((_e.y+_e.height)*c+_e.x),re=H,oe=4*C;_e.interlaced===!0&&(oe+=4*c*7);for(var te=8,xe=0,Q=ye.length;xe<Q;++xe){var ge=ye[xe];if(F===0&&(F=Ee,ne<=(re+=oe)&&(oe=4*C+4*c*(te-1),re=H+(Ee+C)*(te<<1),te>>=1)),ge===de)re+=4;else{var he=r[fe+3*ge],G=r[fe+3*ge+1],W=r[fe+3*ge+2];K[re++]=he,K[re++]=G,K[re++]=W,K[re++]=255}--F}}}}catch{}},{}],236:[function(e,n,i){(function(s){var r;r=this,function(a){function c(y){if(this==null)throw TypeError();var _=String(this),S=_.length,T=y?Number(y):0;if(T!=T&&(T=0),!(T<0||S<=T)){var L,k=_.charCodeAt(T);return 55296<=k&&k<=56319&&T+1<S&&56320<=(L=_.charCodeAt(T+1))&&L<=57343?1024*(k-55296)+L-56320+65536:k}}var d;String.prototype.codePointAt||((d=function(){try{var y={},_=Object.defineProperty,S=_(y,y,y)&&_}catch{}return S}())?d(String.prototype,"codePointAt",{value:c,configurable:!0,writable:!0}):String.prototype.codePointAt=c);var p=0,u=-3;function o(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function l(y,_){this.source=y,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=_,this.destLen=0,this.ltree=new o,this.dtree=new o}var h=new o,f=new o,m=new Uint8Array(30),g=new Uint16Array(30),v=new Uint8Array(30),x=new Uint16Array(30),w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new o,A=new Uint8Array(320);function E(y,_,S,T){var L,k;for(L=0;L<S;++L)y[L]=0;for(L=0;L<30-S;++L)y[L+S]=L/S|0;for(k=T,L=0;L<30;++L)_[L]=k,k+=1<<y[L]}var I=new Uint16Array(16);function R(y,_,S,T){var L,k;for(L=0;L<16;++L)y.table[L]=0;for(L=0;L<T;++L)y.table[_[S+L]]++;for(L=k=y.table[0]=0;L<16;++L)I[L]=k,k+=y.table[L];for(L=0;L<T;++L)_[S+L]&&(y.trans[I[_[S+L]]++]=L)}function P(y){y.bitcount--||(y.tag=y.source[y.sourceIndex++],y.bitcount=7);var _=1&y.tag;return y.tag>>>=1,_}function D(y,_,S){if(!_)return S;for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;var T=y.tag&65535>>>16-_;return y.tag>>>=_,y.bitcount-=_,T+S}function O(y,_){for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;for(var S=0,T=0,L=0,k=y.tag;T=2*T+(1&k),k>>>=1,++L,S+=_.table[L],0<=(T-=_.table[L]););return y.tag=k,y.bitcount-=L,_.trans[S+T]}function j(y,_,S){var T,L,k,B,Z,ee;for(T=D(y,5,257),L=D(y,5,1),k=D(y,4,4),B=0;B<19;++B)A[B]=0;for(B=0;B<k;++B){var pe=D(y,3,0);A[w[B]]=pe}for(R(M,A,0,19),Z=0;Z<T+L;){var Te=O(y,M);switch(Te){case 16:var Le=A[Z-1];for(ee=D(y,2,3);ee;--ee)A[Z++]=Le;break;case 17:for(ee=D(y,3,3);ee;--ee)A[Z++]=0;break;case 18:for(ee=D(y,7,11);ee;--ee)A[Z++]=0;break;default:A[Z++]=Te}}R(_,A,0,T),R(S,A,T,L)}function N(y,_,S){for(;;){var T,L,k,B,Z=O(y,_);if(Z===256)return p;if(Z<256)y.dest[y.destLen++]=Z;else for(T=D(y,m[Z-=257],g[Z]),L=O(y,S),B=k=y.destLen-D(y,v[L],x[L]);B<k+T;++B)y.dest[y.destLen++]=y.dest[B]}}function q(y){for(var _,S;8<y.bitcount;)y.sourceIndex--,y.bitcount-=8;if((_=256*(_=y.source[y.sourceIndex+1])+y.source[y.sourceIndex])!==(65535&~(256*y.source[y.sourceIndex+3]+y.source[y.sourceIndex+2])))return u;for(y.sourceIndex+=4,S=_;S;--S)y.dest[y.destLen++]=y.source[y.sourceIndex++];return y.bitcount=0,p}(function(y,_){var S;for(S=0;S<7;++S)y.table[S]=0;for(y.table[7]=24,y.table[8]=152,y.table[9]=112,S=0;S<24;++S)y.trans[S]=256+S;for(S=0;S<144;++S)y.trans[24+S]=S;for(S=0;S<8;++S)y.trans[168+S]=280+S;for(S=0;S<112;++S)y.trans[176+S]=144+S;for(S=0;S<5;++S)_.table[S]=0;for(_.table[5]=32,S=0;S<32;++S)_.trans[S]=S})(h,f),E(m,g,4,3),E(v,x,2,1),m[28]=0,g[28]=258;var X=function(y,_){var S,T,L=new l(y,_);do{switch(S=P(L),D(L,2,0)){case 0:T=q(L);break;case 1:T=N(L,h,f);break;case 2:j(L,L.ltree,L.dtree),T=N(L,L.ltree,L.dtree);break;default:T=u}if(T!==p)throw new Error("Data error")}while(!S);return L.destLen<L.dest.length?typeof L.dest.slice=="function"?L.dest.slice(0,L.destLen):L.dest.subarray(0,L.destLen):L.dest};function V(y,_,S,T,L){return Math.pow(1-L,3)*y+3*Math.pow(1-L,2)*L*_+3*(1-L)*Math.pow(L,2)*S+Math.pow(L,3)*T}function $(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function K(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function _e(y){throw new Error(y)}function me(y,_){y||_e(_)}$.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},$.prototype.addPoint=function(y,_){typeof y=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=y,this.x2=y),y<this.x1&&(this.x1=y),y>this.x2&&(this.x2=y)),typeof _=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=_,this.y2=_),_<this.y1&&(this.y1=_),_>this.y2&&(this.y2=_))},$.prototype.addX=function(y){this.addPoint(y,null)},$.prototype.addY=function(y){this.addPoint(null,y)},$.prototype.addBezier=function(y,_,S,T,L,k,B,Z){var ee=[y,_],pe=[S,T],Te=[L,k],Le=[B,Z];this.addPoint(y,_),this.addPoint(B,Z);for(var ae=0;ae<=1;ae++){var et=6*ee[ae]-12*pe[ae]+6*Te[ae],Ye=-3*ee[ae]+9*pe[ae]-9*Te[ae]+3*Le[ae],He=3*pe[ae]-3*ee[ae];if(Ye!=0){var Oe=Math.pow(et,2)-4*He*Ye;if(!(Oe<0)){var Be=(-et+Math.sqrt(Oe))/(2*Ye);0<Be&&Be<1&&(ae===0&&this.addX(V(ee[ae],pe[ae],Te[ae],Le[ae],Be)),ae===1&&this.addY(V(ee[ae],pe[ae],Te[ae],Le[ae],Be)));var ot=(-et-Math.sqrt(Oe))/(2*Ye);0<ot&&ot<1&&(ae===0&&this.addX(V(ee[ae],pe[ae],Te[ae],Le[ae],ot)),ae===1&&this.addY(V(ee[ae],pe[ae],Te[ae],Le[ae],ot)))}}else{if(et==0)continue;var it=-He/et;0<it&&it<1&&(ae===0&&this.addX(V(ee[ae],pe[ae],Te[ae],Le[ae],it)),ae===1&&this.addY(V(ee[ae],pe[ae],Te[ae],Le[ae],it)))}}},$.prototype.addQuad=function(y,_,S,T,L,k){var B=y+2/3*(S-y),Z=_+2/3*(T-_),ee=B+1/3*(L-y),pe=Z+1/3*(k-_);this.addBezier(y,_,B,Z,ee,pe,L,k)},K.prototype.moveTo=function(y,_){this.commands.push({type:"M",x:y,y:_})},K.prototype.lineTo=function(y,_){this.commands.push({type:"L",x:y,y:_})},K.prototype.curveTo=K.prototype.bezierCurveTo=function(y,_,S,T,L,k){this.commands.push({type:"C",x1:y,y1:_,x2:S,y2:T,x:L,y:k})},K.prototype.quadTo=K.prototype.quadraticCurveTo=function(y,_,S,T){this.commands.push({type:"Q",x1:y,y1:_,x:S,y:T})},K.prototype.close=K.prototype.closePath=function(){this.commands.push({type:"Z"})},K.prototype.extend=function(y){if(y.commands)y=y.commands;else if(y instanceof $){var _=y;return this.moveTo(_.x1,_.y1),this.lineTo(_.x2,_.y1),this.lineTo(_.x2,_.y2),this.lineTo(_.x1,_.y2),void this.close()}Array.prototype.push.apply(this.commands,y)},K.prototype.getBoundingBox=function(){for(var y=new $,_=0,S=0,T=0,L=0,k=0;k<this.commands.length;k++){var B=this.commands[k];switch(B.type){case"M":y.addPoint(B.x,B.y),_=T=B.x,S=L=B.y;break;case"L":y.addPoint(B.x,B.y),T=B.x,L=B.y;break;case"Q":y.addQuad(T,L,B.x1,B.y1,B.x,B.y),T=B.x,L=B.y;break;case"C":y.addBezier(T,L,B.x1,B.y1,B.x2,B.y2,B.x,B.y),T=B.x,L=B.y;break;case"Z":T=_,L=S;break;default:throw new Error("Unexpected path command "+B.type)}}return y.isEmpty()&&y.addPoint(0,0),y},K.prototype.draw=function(y){y.beginPath();for(var _=0;_<this.commands.length;_+=1){var S=this.commands[_];S.type==="M"?y.moveTo(S.x,S.y):S.type==="L"?y.lineTo(S.x,S.y):S.type==="C"?y.bezierCurveTo(S.x1,S.y1,S.x2,S.y2,S.x,S.y):S.type==="Q"?y.quadraticCurveTo(S.x1,S.y1,S.x,S.y):S.type==="Z"&&y.closePath()}this.fill&&(y.fillStyle=this.fill,y.fill()),this.stroke&&(y.strokeStyle=this.stroke,y.lineWidth=this.strokeWidth,y.stroke())},K.prototype.toPathData=function(y){function _(){for(var k,B=arguments,Z="",ee=0;ee<arguments.length;ee+=1){var pe=B[ee];0<=pe&&0<ee&&(Z+=" "),Z+=(k=pe,Math.round(k)===k?""+Math.round(k):k.toFixed(y))}return Z}y=y!==void 0?y:2;for(var S="",T=0;T<this.commands.length;T+=1){var L=this.commands[T];L.type==="M"?S+="M"+_(L.x,L.y):L.type==="L"?S+="L"+_(L.x,L.y):L.type==="C"?S+="C"+_(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?S+="Q"+_(L.x1,L.y1,L.x,L.y):L.type==="Z"&&(S+="Z")}return S},K.prototype.toSVG=function(y){var _='<path d="';return _+=this.toPathData(y),_+='"',this.fill&&this.fill!=="black"&&(this.fill===null?_+=' fill="none"':_+=' fill="'+this.fill+'"'),this.stroke&&(_+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),_+="/>"},K.prototype.toDOMElement=function(y){var _=this.toPathData(y),S=document.createElementNS("http://www.w3.org/2000/svg","path");return S.setAttribute("d",_),S};var ye={fail:_e,argument:me,assert:me},fe={},de={},Ee={};function C(y){return function(){return y}}de.BYTE=function(y){return ye.argument(0<=y&&y<=255,"Byte value should be between 0 and 255."),[y]},Ee.BYTE=C(1),de.CHAR=function(y){return[y.charCodeAt(0)]},Ee.CHAR=C(1),de.CHARARRAY=function(y){for(var _=[],S=0;S<y.length;S+=1)_[S]=y.charCodeAt(S);return _},Ee.CHARARRAY=function(y){return y.length},de.USHORT=function(y){return[y>>8&255,255&y]},Ee.USHORT=C(2),de.SHORT=function(y){return 32768<=y&&(y=-(65536-y)),[y>>8&255,255&y]},Ee.SHORT=C(2),de.UINT24=function(y){return[y>>16&255,y>>8&255,255&y]},Ee.UINT24=C(3),de.ULONG=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]},Ee.ULONG=C(4),de.LONG=function(y){return 2147483648<=y&&(y=-(4294967296-y)),[y>>24&255,y>>16&255,y>>8&255,255&y]},Ee.LONG=C(4),de.FIXED=de.ULONG,Ee.FIXED=Ee.ULONG,de.FWORD=de.SHORT,Ee.FWORD=Ee.SHORT,de.UFWORD=de.USHORT,Ee.UFWORD=Ee.USHORT,de.LONGDATETIME=function(y){return[0,0,0,0,y>>24&255,y>>16&255,y>>8&255,255&y]},Ee.LONGDATETIME=C(8),de.TAG=function(y){return ye.argument(y.length===4,"Tag should be exactly 4 ASCII characters."),[y.charCodeAt(0),y.charCodeAt(1),y.charCodeAt(2),y.charCodeAt(3)]},Ee.TAG=C(4),de.Card8=de.BYTE,Ee.Card8=Ee.BYTE,de.Card16=de.USHORT,Ee.Card16=Ee.USHORT,de.OffSize=de.BYTE,Ee.OffSize=Ee.BYTE,de.SID=de.USHORT,Ee.SID=Ee.USHORT,de.NUMBER=function(y){return-107<=y&&y<=107?[y+139]:108<=y&&y<=1131?[247+((y-=108)>>8),255&y]:-1131<=y&&y<=-108?[251+((y=-y-108)>>8),255&y]:-32768<=y&&y<=32767?de.NUMBER16(y):de.NUMBER32(y)},Ee.NUMBER=function(y){return de.NUMBER(y).length},de.NUMBER16=function(y){return[28,y>>8&255,255&y]},Ee.NUMBER16=C(3),de.NUMBER32=function(y){return[29,y>>24&255,y>>16&255,y>>8&255,255&y]},Ee.NUMBER32=C(5),de.REAL=function(y){var _=y.toString(),S=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(_);if(S){var T=parseFloat("1e"+((S[2]?+S[2]:0)+S[1].length));_=(Math.round(y*T)/T).toString()}for(var L="",k=0,B=_.length;k<B;k+=1){var Z=_[k];L+=Z==="e"?_[++k]==="-"?"c":"b":Z==="."?"a":Z==="-"?"e":Z}for(var ee=[30],pe=0,Te=(L+=1&L.length?"f":"ff").length;pe<Te;pe+=2)ee.push(parseInt(L.substr(pe,2),16));return ee},Ee.REAL=function(y){return de.REAL(y).length},de.NAME=de.CHARARRAY,Ee.NAME=Ee.CHARARRAY,de.STRING=de.CHARARRAY,Ee.STRING=Ee.CHARARRAY,fe.UTF8=function(y,_,S){for(var T=[],L=S,k=0;k<L;k++,_+=1)T[k]=y.getUint8(_);return String.fromCharCode.apply(null,T)},fe.UTF16=function(y,_,S){for(var T=[],L=S/2,k=0;k<L;k++,_+=2)T[k]=y.getUint16(_);return String.fromCharCode.apply(null,T)},de.UTF16=function(y){for(var _=[],S=0;S<y.length;S+=1){var T=y.charCodeAt(S);_[_.length]=T>>8&255,_[_.length]=255&T}return _},Ee.UTF16=function(y){return 2*y.length};var F={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};fe.MACSTRING=function(y,_,S,T){var L=F[T];if(L!==void 0){for(var k="",B=0;B<S;B++){var Z=y.getUint8(_+B);k+=Z<=127?String.fromCharCode(Z):L[127&Z]}return k}};var H,ne=typeof WeakMap=="function"&&new WeakMap;function re(y){return-128<=y&&y<=127}function oe(y,_,S){for(var T=0,L=y.length;_<L&&T<64&&y[_]===0;)++_,++T;return S.push(128|T-1),_}function te(y,_,S){for(var T=0,L=y.length,k=_;k<L&&T<64;){var B=y[k];if(!re(B)||B===0&&k+1<L&&y[k+1]===0)break;++k,++T}S.push(T-1);for(var Z=_;Z<k;++Z)S.push(y[Z]+256&255);return k}function xe(y,_,S){for(var T=0,L=y.length,k=_;k<L&&T<64;){var B=y[k];if(B===0||re(B)&&k+1<L&&re(y[k+1]))break;++k,++T}S.push(64|T-1);for(var Z=_;Z<k;++Z){var ee=y[Z];S.push(ee+65536>>8&255,ee+256&255)}return k}de.MACSTRING=function(y,_){var S=function(B){if(!H)for(var Z in H={},F)H[Z]=new String(Z);var ee=H[B];if(ee!==void 0){if(ne){var pe=ne.get(ee);if(pe!==void 0)return pe}var Te=F[B];if(Te!==void 0){for(var Le={},ae=0;ae<Te.length;ae++)Le[Te.charCodeAt(ae)]=ae+128;return ne&&ne.set(ee,Le),Le}}}(_);if(S!==void 0){for(var T=[],L=0;L<y.length;L++){var k=y.charCodeAt(L);if(128<=k&&(k=S[k])===void 0)return;T[L]=k}return T}},Ee.MACSTRING=function(y,_){var S=de.MACSTRING(y,_);return S!==void 0?S.length:0},de.VARDELTAS=function(y){for(var _=0,S=[];_<y.length;){var T=y[_];_=T===0?oe(y,_,S):-128<=T&&T<=127?te(y,_,S):xe(y,_,S)}return S},de.INDEX=function(y){for(var _=1,S=[_],T=[],L=0;L<y.length;L+=1){var k=de.OBJECT(y[L]);Array.prototype.push.apply(T,k),_+=k.length,S.push(_)}if(T.length===0)return[0,0];for(var B=[],Z=1+Math.floor(Math.log(_)/Math.log(2))/8|0,ee=[void 0,de.BYTE,de.USHORT,de.UINT24,de.ULONG][Z],pe=0;pe<S.length;pe+=1){var Te=ee(S[pe]);Array.prototype.push.apply(B,Te)}return Array.prototype.concat(de.Card16(y.length),de.OffSize(Z),B,T)},Ee.INDEX=function(y){return de.INDEX(y).length},de.DICT=function(y){for(var _=[],S=Object.keys(y),T=S.length,L=0;L<T;L+=1){var k=parseInt(S[L],0),B=y[k];_=(_=_.concat(de.OPERAND(B.value,B.type))).concat(de.OPERATOR(k))}return _},Ee.DICT=function(y){return de.DICT(y).length},de.OPERATOR=function(y){return y<1200?[y]:[12,y-1200]},de.OPERAND=function(y,_){var S=[];if(Array.isArray(_))for(var T=0;T<_.length;T+=1)ye.argument(y.length===_.length,"Not enough arguments given for type"+_),S=S.concat(de.OPERAND(y[T],_[T]));else if(_==="SID")S=S.concat(de.NUMBER(y));else if(_==="offset")S=S.concat(de.NUMBER32(y));else if(_==="number")S=S.concat(de.NUMBER(y));else{if(_!=="real")throw new Error("Unknown operand type "+_);S=S.concat(de.REAL(y))}return S},de.OP=de.BYTE,Ee.OP=Ee.BYTE;var Q=typeof WeakMap=="function"&&new WeakMap;function ge(y,_,S){for(var T=0;T<_.length;T+=1){var L=_[T];this[L.name]=L.value}if(this.tableName=y,this.fields=_,S)for(var k=Object.keys(S),B=0;B<k.length;B+=1){var Z=k[B],ee=S[Z];this[Z]!==void 0&&(this[Z]=ee)}}function he(y,_,S){S===void 0&&(S=_.length);var T=new Array(_.length+1);T[0]={name:y+"Count",type:"USHORT",value:S};for(var L=0;L<_.length;L++)T[L+1]={name:y+L,type:"USHORT",value:_[L]};return T}function G(y,_,S){var T=_.length,L=new Array(T+1);L[0]={name:y+"Count",type:"USHORT",value:T};for(var k=0;k<T;k++)L[k+1]={name:y+k,type:"TABLE",value:S(_[k],k)};return L}function W(y,_,S){var T=_.length,L=[];L[0]={name:y+"Count",type:"USHORT",value:T};for(var k=0;k<T;k++)L=L.concat(S(_[k],k));return L}function ve(y){y.format===1?ge.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(he("glyph",y.glyphs))):ye.assert(!1,"Can't create coverage table format 2 yet.")}function we(y){ge.call(this,"scriptListTable",W("scriptRecord",y,function(_,S){var T=_.script,L=T.defaultLangSys;return ye.assert(!!L,"Unable to write GSUB: script "+_.tag+" has no default language system."),[{name:"scriptTag"+S,type:"TAG",value:_.tag},{name:"script"+S,type:"TABLE",value:new ge("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ge("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:L.reqFeatureIndex}].concat(he("featureIndex",L.featureIndexes)))}].concat(W("langSys",T.langSysRecords,function(k,B){var Z=k.langSys;return[{name:"langSysTag"+B,type:"TAG",value:k.tag},{name:"langSys"+B,type:"TABLE",value:new ge("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Z.reqFeatureIndex}].concat(he("featureIndex",Z.featureIndexes)))}]})))}]}))}function Re(y){ge.call(this,"featureListTable",W("featureRecord",y,function(_,S){var T=_.feature;return[{name:"featureTag"+S,type:"TAG",value:_.tag},{name:"feature"+S,type:"TABLE",value:new ge("featureTable",[{name:"featureParams",type:"USHORT",value:T.featureParams}].concat(he("lookupListIndex",T.lookupListIndexes)))}]}))}function Ge(y,_){ge.call(this,"lookupListTable",G("lookup",y,function(S){var T=_[S.lookupType];return ye.assert(!!T,"Unable to write GSUB lookup type "+S.lookupType+" tables."),new ge("lookupTable",[{name:"lookupType",type:"USHORT",value:S.lookupType},{name:"lookupFlag",type:"USHORT",value:S.lookupFlag}].concat(G("subtable",S.subtables,T)))}))}de.CHARSTRING=function(y){if(Q){var _=Q.get(y);if(_!==void 0)return _}for(var S=[],T=y.length,L=0;L<T;L+=1){var k=y[L];S=S.concat(de[k.type](k.value))}return Q&&Q.set(y,S),S},Ee.CHARSTRING=function(y){return de.CHARSTRING(y).length},de.OBJECT=function(y){var _=de[y.type];return ye.argument(_!==void 0,"No encoding function for type "+y.type),_(y.value)},Ee.OBJECT=function(y){var _=Ee[y.type];return ye.argument(_!==void 0,"No sizeOf function for type "+y.type),_(y.value)},de.TABLE=function(y){for(var _=[],S=y.fields.length,T=[],L=[],k=0;k<S;k+=1){var B=y.fields[k],Z=de[B.type];ye.argument(Z!==void 0,"No encoding function for field type "+B.type+" ("+B.name+")");var ee=y[B.name];ee===void 0&&(ee=B.value);var pe=Z(ee);B.type==="TABLE"?(L.push(_.length),_=_.concat([0,0]),T.push(pe)):_=_.concat(pe)}for(var Te=0;Te<T.length;Te+=1){var Le=L[Te],ae=_.length;ye.argument(ae<65536,"Table "+y.tableName+" too big."),_[Le]=ae>>8,_[Le+1]=255&ae,_=_.concat(T[Te])}return _},Ee.TABLE=function(y){for(var _=0,S=y.fields.length,T=0;T<S;T+=1){var L=y.fields[T],k=Ee[L.type];ye.argument(k!==void 0,"No sizeOf function for field type "+L.type+" ("+L.name+")");var B=y[L.name];B===void 0&&(B=L.value),_+=k(B),L.type==="TABLE"&&(_+=2)}return _},de.RECORD=de.TABLE,Ee.RECORD=Ee.TABLE,de.LITERAL=function(y){return y},Ee.LITERAL=function(y){return y.length},ge.prototype.encode=function(){return de.TABLE(this)},ge.prototype.sizeOf=function(){return Ee.TABLE(this)};var Pe={Table:ge,Record:ge,Coverage:(ve.prototype=Object.create(ge.prototype)).constructor=ve,ScriptList:(we.prototype=Object.create(ge.prototype)).constructor=we,FeatureList:(Re.prototype=Object.create(ge.prototype)).constructor=Re,LookupList:(Ge.prototype=Object.create(ge.prototype)).constructor=Ge,ushortList:he,tableList:G,recordList:W};function Ze(y,_){return y.getUint8(_)}function Je(y,_){return y.getUint16(_,!1)}function Ce(y,_){return y.getUint32(_,!1)}function le(y,_){return y.getInt16(_,!1)+y.getUint16(_+2,!1)/65535}var De={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function se(y,_){this.data=y,this.offset=_,this.relativeOffset=0}se.prototype.parseByte=function(){var y=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},se.prototype.parseChar=function(){var y=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},se.prototype.parseCard8=se.prototype.parseByte,se.prototype.parseCard16=se.prototype.parseUShort=function(){var y=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},se.prototype.parseSID=se.prototype.parseUShort,se.prototype.parseOffset16=se.prototype.parseUShort,se.prototype.parseShort=function(){var y=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},se.prototype.parseF2Dot14=function(){var y=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,y},se.prototype.parseOffset32=se.prototype.parseULong=function(){var y=Ce(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},se.prototype.parseFixed=function(){var y=le(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},se.prototype.parseString=function(y){var _=this.data,S=this.offset+this.relativeOffset,T="";this.relativeOffset+=y;for(var L=0;L<y;L++)T+=String.fromCharCode(_.getUint8(S+L));return T},se.prototype.parseTag=function(){return this.parseString(4)},se.prototype.parseLongDateTime=function(){var y=Ce(this.data,this.offset+this.relativeOffset+4);return y-=2082844800,this.relativeOffset+=8,y},se.prototype.parseVersion=function(y){var _=Je(this.data,this.offset+this.relativeOffset),S=Je(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,y===void 0&&(y=4096),_+S/y/10},se.prototype.skip=function(y,_){_===void 0&&(_=1),this.relativeOffset+=De[y]*_},se.prototype.parseULongList=function(y){y===void 0&&(y=this.parseULong());for(var _=new Array(y),S=this.data,T=this.offset+this.relativeOffset,L=0;L<y;L++)_[L]=S.getUint32(T),T+=4;return this.relativeOffset+=4*y,_},se.prototype.parseOffset16List=se.prototype.parseUShortList=function(y){y===void 0&&(y=this.parseUShort());for(var _=new Array(y),S=this.data,T=this.offset+this.relativeOffset,L=0;L<y;L++)_[L]=S.getUint16(T),T+=2;return this.relativeOffset+=2*y,_},se.prototype.parseShortList=function(y){for(var _=new Array(y),S=this.data,T=this.offset+this.relativeOffset,L=0;L<y;L++)_[L]=S.getInt16(T),T+=2;return this.relativeOffset+=2*y,_},se.prototype.parseByteList=function(y){for(var _=new Array(y),S=this.data,T=this.offset+this.relativeOffset,L=0;L<y;L++)_[L]=S.getUint8(T++);return this.relativeOffset+=y,_},se.prototype.parseList=function(y,_){_||(_=y,y=this.parseUShort());for(var S=new Array(y),T=0;T<y;T++)S[T]=_.call(this);return S},se.prototype.parseList32=function(y,_){_||(_=y,y=this.parseULong());for(var S=new Array(y),T=0;T<y;T++)S[T]=_.call(this);return S},se.prototype.parseRecordList=function(y,_){_||(_=y,y=this.parseUShort());for(var S=new Array(y),T=Object.keys(_),L=0;L<y;L++){for(var k={},B=0;B<T.length;B++){var Z=T[B],ee=_[Z];k[Z]=ee.call(this)}S[L]=k}return S},se.prototype.parseRecordList32=function(y,_){_||(_=y,y=this.parseULong());for(var S=new Array(y),T=Object.keys(_),L=0;L<y;L++){for(var k={},B=0;B<T.length;B++){var Z=T[B],ee=_[Z];k[Z]=ee.call(this)}S[L]=k}return S},se.prototype.parseStruct=function(y){if(typeof y=="function")return y.call(this);for(var _=Object.keys(y),S={},T=0;T<_.length;T++){var L=_[T],k=y[L];S[L]=k.call(this)}return S},se.prototype.parseValueRecord=function(y){if(y===void 0&&(y=this.parseUShort()),y!==0){var _={};return 1&y&&(_.xPlacement=this.parseShort()),2&y&&(_.yPlacement=this.parseShort()),4&y&&(_.xAdvance=this.parseShort()),8&y&&(_.yAdvance=this.parseShort()),16&y&&(_.xPlaDevice=void 0,this.parseShort()),32&y&&(_.yPlaDevice=void 0,this.parseShort()),64&y&&(_.xAdvDevice=void 0,this.parseShort()),128&y&&(_.yAdvDevice=void 0,this.parseShort()),_}},se.prototype.parseValueRecordList=function(){for(var y=this.parseUShort(),_=this.parseUShort(),S=new Array(_),T=0;T<_;T++)S[T]=this.parseValueRecord(y);return S},se.prototype.parsePointer=function(y){var _=this.parseOffset16();if(0<_)return new se(this.data,this.offset+_).parseStruct(y)},se.prototype.parsePointer32=function(y){var _=this.parseOffset32();if(0<_)return new se(this.data,this.offset+_).parseStruct(y)},se.prototype.parseListOfLists=function(y){for(var _=this.parseOffset16List(),S=_.length,T=this.relativeOffset,L=new Array(S),k=0;k<S;k++){var B=_[k];if(B!==0)if(this.relativeOffset=B,y){for(var Z=this.parseOffset16List(),ee=new Array(Z.length),pe=0;pe<Z.length;pe++)this.relativeOffset=B+Z[pe],ee[pe]=y.call(this);L[k]=ee}else L[k]=this.parseUShortList();else L[k]=void 0}return this.relativeOffset=T,L},se.prototype.parseCoverage=function(){var y=this.offset+this.relativeOffset,_=this.parseUShort(),S=this.parseUShort();if(_===1)return{format:1,glyphs:this.parseUShortList(S)};if(_!==2)throw new Error("0x"+y.toString(16)+": Coverage format must be 1 or 2.");for(var T=new Array(S),L=0;L<S;L++)T[L]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:T}},se.prototype.parseClassDef=function(){var y=this.offset+this.relativeOffset,_=this.parseUShort();if(_===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(_===2)return{format:2,ranges:this.parseRecordList({start:se.uShort,end:se.uShort,classId:se.uShort})};throw new Error("0x"+y.toString(16)+": ClassDef format must be 1 or 2.")},se.list=function(y,_){return function(){return this.parseList(y,_)}},se.list32=function(y,_){return function(){return this.parseList32(y,_)}},se.recordList=function(y,_){return function(){return this.parseRecordList(y,_)}},se.recordList32=function(y,_){return function(){return this.parseRecordList32(y,_)}},se.pointer=function(y){return function(){return this.parsePointer(y)}},se.pointer32=function(y){return function(){return this.parsePointer32(y)}},se.tag=se.prototype.parseTag,se.byte=se.prototype.parseByte,se.uShort=se.offset16=se.prototype.parseUShort,se.uShortList=se.prototype.parseUShortList,se.uLong=se.offset32=se.prototype.parseULong,se.uLongList=se.prototype.parseULongList,se.struct=se.prototype.parseStruct,se.coverage=se.prototype.parseCoverage,se.classDef=se.prototype.parseClassDef;var Ne={reserved:se.uShort,reqFeatureIndex:se.uShort,featureIndexes:se.uShortList};se.prototype.parseScriptList=function(){return this.parsePointer(se.recordList({tag:se.tag,script:se.pointer({defaultLangSys:se.pointer(Ne),langSysRecords:se.recordList({tag:se.tag,langSys:se.pointer(Ne)})})}))||[]},se.prototype.parseFeatureList=function(){return this.parsePointer(se.recordList({tag:se.tag,feature:se.pointer({featureParams:se.offset16,lookupListIndexes:se.uShortList})}))||[]},se.prototype.parseLookupList=function(y){return this.parsePointer(se.list(se.pointer(function(){var _=this.parseUShort();ye.argument(1<=_&&_<=9,"GPOS/GSUB lookup type "+_+" unknown.");var S=this.parseUShort(),T=16&S;return{lookupType:_,lookupFlag:S,subtables:this.parseList(se.pointer(y[_])),markFilteringSet:T?this.parseUShort():void 0}})))||[]},se.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var y=this.parseUShort(),_=this.parseUShort();return ye.argument(y===1&&_<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:se.offset32,featureTableSubstitutionOffset:se.offset32})})||[]};var ie={getByte:Ze,getCard8:Ze,getUShort:Je,getCard16:Je,getShort:function(y,_){return y.getInt16(_,!1)},getULong:Ce,getFixed:le,getTag:function(y,_){for(var S="",T=_;T<_+4;T+=1)S+=String.fromCharCode(y.getInt8(T));return S},getOffset:function(y,_,S){for(var T=0,L=0;L<S;L+=1)T<<=8,T+=y.getUint8(_+L);return T},getBytes:function(y,_,S){for(var T=[],L=_;L<S;L+=1)T.push(y.getUint8(L));return T},bytesToString:function(y){for(var _="",S=0;S<y.length;S+=1)_+=String.fromCharCode(y[S]);return _},Parser:se},U={parse:function(y,_){var S={};S.version=ie.getUShort(y,_),ye.argument(S.version===0,"cmap table version should be 0."),S.numTables=ie.getUShort(y,_+2);for(var T=-1,L=S.numTables-1;0<=L;--L){var k=ie.getUShort(y,_+4+8*L),B=ie.getUShort(y,_+4+8*L+2);if(k===3&&(B===0||B===1||B===10)||k===0&&(B===0||B===1||B===2||B===3||B===4)){T=ie.getULong(y,_+4+8*L+4);break}}if(T===-1)throw new Error("No valid cmap sub-tables found.");var Z=new ie.Parser(y,_+T);if(S.format=Z.parseUShort(),S.format===12)(function(ee,pe){var Te;pe.parseUShort(),ee.length=pe.parseULong(),ee.language=pe.parseULong(),ee.groupCount=Te=pe.parseULong(),ee.glyphIndexMap={};for(var Le=0;Le<Te;Le+=1)for(var ae=pe.parseULong(),et=pe.parseULong(),Ye=pe.parseULong(),He=ae;He<=et;He+=1)ee.glyphIndexMap[He]=Ye,Ye++})(S,Z);else{if(S.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+S.format+").");(function(ee,pe,Te,Le,ae){var et;ee.length=pe.parseUShort(),ee.language=pe.parseUShort(),ee.segCount=et=pe.parseUShort()>>1,pe.skip("uShort",3),ee.glyphIndexMap={};for(var Ye=new ie.Parser(Te,Le+ae+14),He=new ie.Parser(Te,Le+ae+16+2*et),Oe=new ie.Parser(Te,Le+ae+16+4*et),Be=new ie.Parser(Te,Le+ae+16+6*et),ot=Le+ae+16+8*et,it=0;it<et-1;it+=1)for(var St=void 0,dt=Ye.parseUShort(),gt=He.parseUShort(),Zt=Oe.parseShort(),At=Be.parseUShort(),Tt=gt;Tt<=dt;Tt+=1)At!==0?(ot=Be.offset+Be.relativeOffset-2,ot+=At,ot+=2*(Tt-gt),(St=ie.getUShort(Te,ot))!==0&&(St=St+Zt&65535)):St=Tt+Zt&65535,ee.glyphIndexMap[Tt]=St})(S,Z,y,_,T)}return S},make:function(y){var _,S=!0;for(_=y.length-1;0<_;--_)if(65535<y.get(_).unicode){console.log("Adding CMAP format 12 (needed!)"),S=!1;break}var T=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:S?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:S?12:20}];S||(T=T.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),T=T.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var L,k,B,Z=new Pe.Table("cmap",T);for(Z.segments=[],_=0;_<y.length;_+=1){for(var ee=y.get(_),pe=0;pe<ee.unicodes.length;pe+=1)L=Z,k=ee.unicodes[pe],B=_,L.segments.push({end:k,start:k,delta:-(k-B),offset:0,glyphIndex:B});Z.segments=Z.segments.sort(function(St,dt){return St.start-dt.start})}Z.segments.push({end:65535,start:65535,delta:1,offset:0});var Te=Z.segments.length,Le=0,ae=[],et=[],Ye=[],He=[],Oe=[],Be=[];for(_=0;_<Te;_+=1){var ot=Z.segments[_];ot.end<=65535&&ot.start<=65535?(ae=ae.concat({name:"end_"+_,type:"USHORT",value:ot.end}),et=et.concat({name:"start_"+_,type:"USHORT",value:ot.start}),Ye=Ye.concat({name:"idDelta_"+_,type:"SHORT",value:ot.delta}),He=He.concat({name:"idRangeOffset_"+_,type:"USHORT",value:ot.offset}),ot.glyphId!==void 0&&(Oe=Oe.concat({name:"glyph_"+_,type:"USHORT",value:ot.glyphId}))):Le+=1,S||ot.glyphIndex===void 0||(Be=(Be=(Be=Be.concat({name:"cmap12Start_"+_,type:"ULONG",value:ot.start})).concat({name:"cmap12End_"+_,type:"ULONG",value:ot.end})).concat({name:"cmap12Glyph_"+_,type:"ULONG",value:ot.glyphIndex}))}if(Z.segCountX2=2*(Te-Le),Z.searchRange=2*Math.pow(2,Math.floor(Math.log(Te-Le)/Math.log(2))),Z.entrySelector=Math.log(Z.searchRange/2)/Math.log(2),Z.rangeShift=Z.segCountX2-Z.searchRange,Z.fields=Z.fields.concat(ae),Z.fields.push({name:"reservedPad",type:"USHORT",value:0}),Z.fields=Z.fields.concat(et),Z.fields=Z.fields.concat(Ye),Z.fields=Z.fields.concat(He),Z.fields=Z.fields.concat(Oe),Z.cmap4Length=14+2*ae.length+2+2*et.length+2*Ye.length+2*He.length+2*Oe.length,!S){var it=16+4*Be.length;Z.cmap12Offset=20+Z.cmap4Length,Z.fields=Z.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:it},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Be.length/3}]),Z.fields=Z.fields.concat(Be)}return Z}},Y=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],z=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],J=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ce=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ae(y){this.font=y}function Ie(y){this.cmap=y}function Ve(y,_){this.encoding=y,this.charset=_}function Me(y){switch(y.version){case 1:this.names=ce.slice();break;case 2:this.names=new Array(y.numberOfGlyphs);for(var _=0;_<y.numberOfGlyphs;_++)y.glyphNameIndex[_]<ce.length?this.names[_]=ce[y.glyphNameIndex[_]]:this.names[_]=y.names[y.glyphNameIndex[_]-ce.length];break;case 2.5:this.names=new Array(y.numberOfGlyphs);for(var S=0;S<y.numberOfGlyphs;S++)this.names[S]=ce[S+y.glyphNameIndex[S]];break;case 3:default:this.names=[]}}Ae.prototype.charToGlyphIndex=function(y){var _=y.codePointAt(0),S=this.font.glyphs;if(S){for(var T=0;T<S.length;T+=1)for(var L=S.get(T),k=0;k<L.unicodes.length;k+=1)if(L.unicodes[k]===_)return T}return null},Ie.prototype.charToGlyphIndex=function(y){return this.cmap.glyphIndexMap[y.codePointAt(0)]||0},Ve.prototype.charToGlyphIndex=function(y){var _=y.codePointAt(0),S=this.encoding[_];return this.charset.indexOf(S)},Me.prototype.nameToGlyphIndex=function(y){return this.names.indexOf(y)},Me.prototype.glyphIndexToName=function(y){return this.names[y]};var Qe={line:function(y,_,S,T,L){y.beginPath(),y.moveTo(_,S),y.lineTo(T,L),y.stroke()}};function rt(y){this.bindConstructorValues(y)}function xt(y,_,S){Object.defineProperty(y,_,{get:function(){return y.path,y[S]},set:function(T){y[S]=T},enumerable:!0,configurable:!0})}function bt(y,_){if(this.font=y,this.glyphs={},Array.isArray(_))for(var S=0;S<_.length;S++)this.glyphs[S]=_[S];this.length=_&&_.length||0}rt.prototype.bindConstructorValues=function(y){var _,S;this.index=y.index||0,this.name=y.name||null,this.unicode=y.unicode||void 0,this.unicodes=y.unicodes||y.unicode!==void 0?[y.unicode]:[],y.xMin&&(this.xMin=y.xMin),y.yMin&&(this.yMin=y.yMin),y.xMax&&(this.xMax=y.xMax),y.yMax&&(this.yMax=y.yMax),y.advanceWidth&&(this.advanceWidth=y.advanceWidth),Object.defineProperty(this,"path",(_=y.path,S=_||new K,{configurable:!0,get:function(){return typeof S=="function"&&(S=S()),S},set:function(T){S=T}}))},rt.prototype.addUnicode=function(y){this.unicodes.length===0&&(this.unicode=y),this.unicodes.push(y)},rt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},rt.prototype.getPath=function(y,_,S,T,L){var k,B;y=y!==void 0?y:0,_=_!==void 0?_:0,S=S!==void 0?S:72;var Z=(T=T||{}).xScale,ee=T.yScale;if(T.hinting&&L&&L.hinting&&(B=this.path&&L.hinting.exec(this,S)),B)k=L.hinting.getCommands(B),y=Math.round(y),_=Math.round(_),Z=ee=1;else{k=this.path.commands;var pe=1/this.path.unitsPerEm*S;Z===void 0&&(Z=pe),ee===void 0&&(ee=pe)}for(var Te=new K,Le=0;Le<k.length;Le+=1){var ae=k[Le];ae.type==="M"?Te.moveTo(y+ae.x*Z,_+-ae.y*ee):ae.type==="L"?Te.lineTo(y+ae.x*Z,_+-ae.y*ee):ae.type==="Q"?Te.quadraticCurveTo(y+ae.x1*Z,_+-ae.y1*ee,y+ae.x*Z,_+-ae.y*ee):ae.type==="C"?Te.curveTo(y+ae.x1*Z,_+-ae.y1*ee,y+ae.x2*Z,_+-ae.y2*ee,y+ae.x*Z,_+-ae.y*ee):ae.type==="Z"&&Te.closePath()}return Te},rt.prototype.getContours=function(){if(this.points===void 0)return[];for(var y=[],_=[],S=0;S<this.points.length;S+=1){var T=this.points[S];_.push(T),T.lastPointOfContour&&(y.push(_),_=[])}return ye.argument(_.length===0,"There are still points left in the current contour."),y},rt.prototype.getMetrics=function(){for(var y=this.path.commands,_=[],S=[],T=0;T<y.length;T+=1){var L=y[T];L.type!=="Z"&&(_.push(L.x),S.push(L.y)),L.type!=="Q"&&L.type!=="C"||(_.push(L.x1),S.push(L.y1)),L.type==="C"&&(_.push(L.x2),S.push(L.y2))}var k={xMin:Math.min.apply(null,_),yMin:Math.min.apply(null,S),xMax:Math.max.apply(null,_),yMax:Math.max.apply(null,S),leftSideBearing:this.leftSideBearing};return isFinite(k.xMin)||(k.xMin=0),isFinite(k.xMax)||(k.xMax=this.advanceWidth),isFinite(k.yMin)||(k.yMin=0),isFinite(k.yMax)||(k.yMax=0),k.rightSideBearing=this.advanceWidth-k.leftSideBearing-(k.xMax-k.xMin),k},rt.prototype.draw=function(y,_,S,T,L){this.getPath(_,S,T,L).draw(y)},rt.prototype.drawPoints=function(y,_,S,T){function L(Le,ae,et,Ye){var He=2*Math.PI;y.beginPath();for(var Oe=0;Oe<Le.length;Oe+=1)y.moveTo(ae+Le[Oe].x*Ye,et+Le[Oe].y*Ye),y.arc(ae+Le[Oe].x*Ye,et+Le[Oe].y*Ye,2,0,He,!1);y.closePath(),y.fill()}_=_!==void 0?_:0,S=S!==void 0?S:0,T=T!==void 0?T:24;for(var k=1/this.path.unitsPerEm*T,B=[],Z=[],ee=this.path,pe=0;pe<ee.commands.length;pe+=1){var Te=ee.commands[pe];Te.x!==void 0&&B.push({x:Te.x,y:-Te.y}),Te.x1!==void 0&&Z.push({x:Te.x1,y:-Te.y1}),Te.x2!==void 0&&Z.push({x:Te.x2,y:-Te.y2})}y.fillStyle="blue",L(B,_,S,k),y.fillStyle="red",L(Z,_,S,k)},rt.prototype.drawMetrics=function(y,_,S,T){var L;_=_!==void 0?_:0,S=S!==void 0?S:0,T=T!==void 0?T:24,L=1/this.path.unitsPerEm*T,y.lineWidth=1,y.strokeStyle="black",Qe.line(y,_,-1e4,_,1e4),Qe.line(y,-1e4,S,1e4,S);var k=this.xMin||0,B=this.yMin||0,Z=this.xMax||0,ee=this.yMax||0,pe=this.advanceWidth||0;y.strokeStyle="blue",Qe.line(y,_+k*L,-1e4,_+k*L,1e4),Qe.line(y,_+Z*L,-1e4,_+Z*L,1e4),Qe.line(y,-1e4,S+-B*L,1e4,S+-B*L),Qe.line(y,-1e4,S+-ee*L,1e4,S+-ee*L),y.strokeStyle="green",Qe.line(y,_+pe*L,-1e4,_+pe*L,1e4)},bt.prototype.get=function(y){return typeof this.glyphs[y]=="function"&&(this.glyphs[y]=this.glyphs[y]()),this.glyphs[y]},bt.prototype.push=function(y,_){this.glyphs[y]=_,this.length++};var ct={GlyphSet:bt,glyphLoader:function(y,_){return new rt({index:_,font:y})},ttfGlyphLoader:function(y,_,S,T,L,k){return function(){var B=new rt({index:_,font:y});return B.path=function(){S(B,T,L);var Z=k(y.glyphs,B);return Z.unitsPerEm=y.unitsPerEm,Z},xt(B,"xMin","_xMin"),xt(B,"xMax","_xMax"),xt(B,"yMin","_yMin"),xt(B,"yMax","_yMax"),B}},cffGlyphLoader:function(y,_,S,T){return function(){var L=new rt({index:_,font:y});return L.path=function(){var k=S(y,L,T);return k.unitsPerEm=y.unitsPerEm,k},L}}};function yt(y,_){if(y===_)return!0;if(Array.isArray(y)&&Array.isArray(_)){if(y.length!==_.length)return!1;for(var S=0;S<y.length;S+=1)if(!yt(y[S],_[S]))return!1;return!0}return!1}function Mt(y){return y.length<1240?107:y.length<33900?1131:32768}function sr(y,_,S){var T,L,k=[],B=[],Z=ie.getCard16(y,_);if(Z!==0){var ee=ie.getByte(y,_+2);T=_+(Z+1)*ee+2;for(var pe=_+3,Te=0;Te<Z+1;Te+=1)k.push(ie.getOffset(y,pe,ee)),pe+=ee;L=T+k[Z]}else L=_+2;for(var Le=0;Le<k.length-1;Le+=1){var ae=ie.getBytes(y,T+k[Le],T+k[Le+1]);S&&(ae=S(ae)),B.push(ae)}return{objects:B,startOffset:_,endOffset:L}}function Dr(y,_){if(_===28)return y.parseByte()<<8|y.parseByte();if(_===29)return y.parseByte()<<24|y.parseByte()<<16|y.parseByte()<<8|y.parseByte();if(_===30)return function(S){for(var T="",L=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var k=S.parseByte(),B=k>>4,Z=15&k;if(B==15||(T+=L[B],Z==15))break;T+=L[Z]}return parseFloat(T)}(y);if(32<=_&&_<=246)return _-139;if(247<=_&&_<=250)return 256*(_-247)+y.parseByte()+108;if(251<=_&&_<=254)return 256*-(_-251)-y.parseByte()-108;throw new Error("Invalid b0 "+_)}function Br(y,_,S){_=_!==void 0?_:0;var T=new ie.Parser(y,_),L=[],k=[];for(S=S!==void 0?S:y.length;T.relativeOffset<S;){var B=T.parseByte();B<=21?(B===12&&(B=1200+T.parseByte()),L.push([B,k]),k=[]):k.push(Dr(T,B))}return function(Z){for(var ee={},pe=0;pe<Z.length;pe+=1){var Te=Z[pe][0],Le=Z[pe][1],ae=void 0;if(ae=Le.length===1?Le[0]:Le,ee.hasOwnProperty(Te)&&!isNaN(ee[Te]))throw new Error("Object "+ee+" already has key "+Te);ee[Te]=ae}return ee}(L)}function Sr(y,_){return _=_<=390?Y[_]:y[_-391]}function Jr(y,_,S){for(var T,L={},k=0;k<_.length;k+=1){var B=_[k];if(Array.isArray(B.type)){var Z=[];Z.length=B.type.length;for(var ee=0;ee<B.type.length;ee++)(T=y[B.op]!==void 0?y[B.op][ee]:void 0)===void 0&&(T=B.value!==void 0&&B.value[ee]!==void 0?B.value[ee]:null),B.type[ee]==="SID"&&(T=Sr(S,T)),Z[ee]=T;L[B.name]=Z}else(T=y[B.op])===void 0&&(T=B.value!==void 0?B.value:null),B.type==="SID"&&(T=Sr(S,T)),L[B.name]=T}return L}var be=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],ke=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function We(y,_,S,T){return Jr(Br(y,_,S),ke,T)}function Ue(y,_,S,T){for(var L,k,B=[],Z=0;Z<S.length;Z+=1){var ee=new DataView(new Uint8Array(S[Z]).buffer),pe=(k=T,Jr(Br(L=ee,0,L.byteLength),be,k));pe._subrs=[],pe._subrsBias=0;var Te=pe.private[0],Le=pe.private[1];if(Te!==0&&Le!==0){var ae=We(y,Le+_,Te,T);if(pe._defaultWidthX=ae.defaultWidthX,pe._nominalWidthX=ae.nominalWidthX,ae.subrs!==0){var et=sr(y,Le+ae.subrs+_);pe._subrs=et.objects,pe._subrsBias=Mt(pe._subrs)}pe._privateDict=ae}B.push(pe)}return B}function Xe(y,_,S){var T,L,k,B,Z,ee,pe,Te,Le=new K,ae=[],et=0,Ye=!1,He=!1,Oe=0,Be=0;if(y.isCIDFont){var ot=y.tables.cff.topDict._fdSelect[_.index],it=y.tables.cff.topDict._fdArray[ot];Z=it._subrs,ee=it._subrsBias,pe=it._defaultWidthX,Te=it._nominalWidthX}else Z=y.tables.cff.topDict._subrs,ee=y.tables.cff.topDict._subrsBias,pe=y.tables.cff.topDict._defaultWidthX,Te=y.tables.cff.topDict._nominalWidthX;var St=pe;function dt(Zt,At){He&&Le.closePath(),Le.moveTo(Zt,At),He=!0}function gt(){ae.length%2==0||Ye||(St=ae.shift()+Te),et+=ae.length>>1,ae.length=0,Ye=!0}return function Zt(At){for(var Tt,Lt,kt,It,Xt,Nt,Dt,Yt,Ut,Qt,Pt,er,zt=0;zt<At.length;){var Wt=At[zt];switch(zt+=1,Wt){case 1:case 3:gt();break;case 4:1<ae.length&&!Ye&&(St=ae.shift()+Te,Ye=!0),Be+=ae.pop(),dt(Oe,Be);break;case 5:for(;0<ae.length;)Oe+=ae.shift(),Be+=ae.shift(),Le.lineTo(Oe,Be);break;case 6:for(;0<ae.length&&(Oe+=ae.shift(),Le.lineTo(Oe,Be),ae.length!==0);)Be+=ae.shift(),Le.lineTo(Oe,Be);break;case 7:for(;0<ae.length&&(Be+=ae.shift(),Le.lineTo(Oe,Be),ae.length!==0);)Oe+=ae.shift(),Le.lineTo(Oe,Be);break;case 8:for(;0<ae.length;)T=Oe+ae.shift(),L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Oe=k+ae.shift(),Be=B+ae.shift(),Le.curveTo(T,L,k,B,Oe,Be);break;case 10:Xt=ae.pop()+ee,(Nt=Z[Xt])&&Zt(Nt);break;case 11:return;case 12:switch(Wt=At[zt],zt+=1,Wt){case 35:T=Oe+ae.shift(),L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Dt=k+ae.shift(),Yt=B+ae.shift(),Ut=Dt+ae.shift(),Qt=Yt+ae.shift(),Pt=Ut+ae.shift(),er=Qt+ae.shift(),Oe=Pt+ae.shift(),Be=er+ae.shift(),ae.shift(),Le.curveTo(T,L,k,B,Dt,Yt),Le.curveTo(Ut,Qt,Pt,er,Oe,Be);break;case 34:T=Oe+ae.shift(),L=Be,k=T+ae.shift(),B=L+ae.shift(),Dt=k+ae.shift(),Yt=B,Ut=Dt+ae.shift(),Qt=B,Pt=Ut+ae.shift(),er=Be,Oe=Pt+ae.shift(),Le.curveTo(T,L,k,B,Dt,Yt),Le.curveTo(Ut,Qt,Pt,er,Oe,Be);break;case 36:T=Oe+ae.shift(),L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Dt=k+ae.shift(),Yt=B,Ut=Dt+ae.shift(),Qt=B,Pt=Ut+ae.shift(),er=Qt+ae.shift(),Oe=Pt+ae.shift(),Le.curveTo(T,L,k,B,Dt,Yt),Le.curveTo(Ut,Qt,Pt,er,Oe,Be);break;case 37:T=Oe+ae.shift(),L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Dt=k+ae.shift(),Yt=B+ae.shift(),Ut=Dt+ae.shift(),Qt=Yt+ae.shift(),Pt=Ut+ae.shift(),er=Qt+ae.shift(),Math.abs(Pt-Oe)>Math.abs(er-Be)?Oe=Pt+ae.shift():Be=er+ae.shift(),Le.curveTo(T,L,k,B,Dt,Yt),Le.curveTo(Ut,Qt,Pt,er,Oe,Be);break;default:console.log("Glyph "+_.index+": unknown operator 1200"+Wt),ae.length=0}break;case 14:0<ae.length&&!Ye&&(St=ae.shift()+Te,Ye=!0),He&&(Le.closePath(),He=!1);break;case 18:gt();break;case 19:case 20:gt(),zt+=et+7>>3;break;case 21:2<ae.length&&!Ye&&(St=ae.shift()+Te,Ye=!0),Be+=ae.pop(),dt(Oe+=ae.pop(),Be);break;case 22:1<ae.length&&!Ye&&(St=ae.shift()+Te,Ye=!0),dt(Oe+=ae.pop(),Be);break;case 23:gt();break;case 24:for(;2<ae.length;)T=Oe+ae.shift(),L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Oe=k+ae.shift(),Be=B+ae.shift(),Le.curveTo(T,L,k,B,Oe,Be);Oe+=ae.shift(),Be+=ae.shift(),Le.lineTo(Oe,Be);break;case 25:for(;6<ae.length;)Oe+=ae.shift(),Be+=ae.shift(),Le.lineTo(Oe,Be);T=Oe+ae.shift(),L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Oe=k+ae.shift(),Be=B+ae.shift(),Le.curveTo(T,L,k,B,Oe,Be);break;case 26:for(ae.length%2&&(Oe+=ae.shift());0<ae.length;)T=Oe,L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Oe=k,Be=B+ae.shift(),Le.curveTo(T,L,k,B,Oe,Be);break;case 27:for(ae.length%2&&(Be+=ae.shift());0<ae.length;)T=Oe+ae.shift(),L=Be,k=T+ae.shift(),B=L+ae.shift(),Oe=k+ae.shift(),Be=B,Le.curveTo(T,L,k,B,Oe,Be);break;case 28:Tt=At[zt],Lt=At[zt+1],ae.push((Tt<<24|Lt<<16)>>16),zt+=2;break;case 29:Xt=ae.pop()+y.gsubrsBias,(Nt=y.gsubrs[Xt])&&Zt(Nt);break;case 30:for(;0<ae.length&&(T=Oe,L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Oe=k+ae.shift(),Be=B+(ae.length===1?ae.shift():0),Le.curveTo(T,L,k,B,Oe,Be),ae.length!==0);)T=Oe+ae.shift(),L=Be,k=T+ae.shift(),B=L+ae.shift(),Be=B+ae.shift(),Oe=k+(ae.length===1?ae.shift():0),Le.curveTo(T,L,k,B,Oe,Be);break;case 31:for(;0<ae.length&&(T=Oe+ae.shift(),L=Be,k=T+ae.shift(),B=L+ae.shift(),Be=B+ae.shift(),Oe=k+(ae.length===1?ae.shift():0),Le.curveTo(T,L,k,B,Oe,Be),ae.length!==0);)T=Oe,L=Be+ae.shift(),k=T+ae.shift(),B=L+ae.shift(),Oe=k+ae.shift(),Be=B+(ae.length===1?ae.shift():0),Le.curveTo(T,L,k,B,Oe,Be);break;default:Wt<32?console.log("Glyph "+_.index+": unknown operator "+Wt):Wt<247?ae.push(Wt-139):Wt<251?(Tt=At[zt],zt+=1,ae.push(256*(Wt-247)+Tt+108)):Wt<255?(Tt=At[zt],zt+=1,ae.push(256*-(Wt-251)-Tt-108)):(Tt=At[zt],Lt=At[zt+1],kt=At[zt+2],It=At[zt+3],zt+=4,ae.push((Tt<<24|Lt<<16|kt<<8|It)/65536))}}}(S),_.advanceWidth=St,Le}function vt(y,_){var S,T=Y.indexOf(y);return 0<=T&&(S=T),0<=(T=_.indexOf(y))?S=T+Y.length:(S=Y.length+_.length,_.push(y)),S}function pt(y,_,S){for(var T={},L=0;L<y.length;L+=1){var k=y[L],B=_[k.name];B===void 0||yt(B,k.value)||(k.type==="SID"&&(B=vt(B,S)),T[k.op]={name:k.name,type:k.type,value:B})}return T}function ht(y,_){var S=new Pe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return S.dict=pt(be,y,_),S}function ue(y){var _=new Pe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return _.topDicts=[{name:"topDict_0",type:"TABLE",value:y}],_}function je(y){var _=[],S=y.path;_.push({name:"width",type:"NUMBER",value:y.advanceWidth});for(var T=0,L=0,k=0;k<S.commands.length;k+=1){var B=void 0,Z=void 0,ee=S.commands[k];if(ee.type==="Q"&&(ee={type:"C",x:ee.x,y:ee.y,x1:1/3*T+2/3*ee.x1,y1:1/3*L+2/3*ee.y1,x2:1/3*ee.x+2/3*ee.x1,y2:1/3*ee.y+2/3*ee.y1}),ee.type==="M")B=Math.round(ee.x-T),Z=Math.round(ee.y-L),_.push({name:"dx",type:"NUMBER",value:B}),_.push({name:"dy",type:"NUMBER",value:Z}),_.push({name:"rmoveto",type:"OP",value:21}),T=Math.round(ee.x),L=Math.round(ee.y);else if(ee.type==="L")B=Math.round(ee.x-T),Z=Math.round(ee.y-L),_.push({name:"dx",type:"NUMBER",value:B}),_.push({name:"dy",type:"NUMBER",value:Z}),_.push({name:"rlineto",type:"OP",value:5}),T=Math.round(ee.x),L=Math.round(ee.y);else if(ee.type==="C"){var pe=Math.round(ee.x1-T),Te=Math.round(ee.y1-L),Le=Math.round(ee.x2-ee.x1),ae=Math.round(ee.y2-ee.y1);B=Math.round(ee.x-ee.x2),Z=Math.round(ee.y-ee.y2),_.push({name:"dx1",type:"NUMBER",value:pe}),_.push({name:"dy1",type:"NUMBER",value:Te}),_.push({name:"dx2",type:"NUMBER",value:Le}),_.push({name:"dy2",type:"NUMBER",value:ae}),_.push({name:"dx",type:"NUMBER",value:B}),_.push({name:"dy",type:"NUMBER",value:Z}),_.push({name:"rrcurveto",type:"OP",value:8}),T=Math.round(ee.x),L=Math.round(ee.y)}}return _.push({name:"endchar",type:"OP",value:14}),_}var qe={parse:function(y,_,S){S.tables.cff={};var T,L,k,B=sr(y,(T=y,L=_,(k={}).formatMajor=ie.getCard8(T,L),k.formatMinor=ie.getCard8(T,L+1),k.size=ie.getCard8(T,L+2),k.offsetSize=ie.getCard8(T,L+3),k.startOffset=L,k.endOffset=L+4,k).endOffset,ie.bytesToString),Z=sr(y,B.endOffset),ee=sr(y,Z.endOffset,ie.bytesToString),pe=sr(y,ee.endOffset);S.gsubrs=pe.objects,S.gsubrsBias=Mt(S.gsubrs);var Te=Ue(y,_,Z.objects,ee.objects);if(Te.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Te.length);var Le=Te[0];if((S.tables.cff.topDict=Le)._privateDict&&(S.defaultWidthX=Le._privateDict.defaultWidthX,S.nominalWidthX=Le._privateDict.nominalWidthX),Le.ros[0]!==void 0&&Le.ros[1]!==void 0&&(S.isCIDFont=!0),S.isCIDFont){var ae=Le.fdArray,et=Le.fdSelect;if(ae===0||et===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var Ye=Ue(y,_,sr(y,ae+=_).objects,ee.objects);Le._fdArray=Ye,et+=_,Le._fdSelect=function(gt,Zt,At,Tt){var Lt,kt=[],It=new ie.Parser(gt,Zt),Xt=It.parseCard8();if(Xt===0)for(var Nt=0;Nt<At;Nt++){if(Tt<=(Lt=It.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Lt+" (FD count "+Tt+")");kt.push(Lt)}else{if(Xt!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Xt);var Dt,Yt=It.parseCard16(),Ut=It.parseCard16();if(Ut!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Ut);for(var Qt=0;Qt<Yt;Qt++){if(Lt=It.parseCard8(),Dt=It.parseCard16(),Tt<=Lt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Lt+" (FD count "+Tt+")");if(At<Dt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Dt);for(;Ut<Dt;Ut++)kt.push(Lt);Ut=Dt}if(Dt!==At)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Dt)}return kt}(y,et,S.numGlyphs,Ye.length)}var He=_+Le.private[1],Oe=We(y,He,Le.private[0],ee.objects);if(S.defaultWidthX=Oe.defaultWidthX,S.nominalWidthX=Oe.nominalWidthX,Oe.subrs!==0){var Be=sr(y,He+Oe.subrs);S.subrs=Be.objects,S.subrsBias=Mt(S.subrs)}else S.subrs=[],S.subrsBias=0;var ot=sr(y,_+Le.charStrings);S.nGlyphs=ot.objects.length;var it=function(gt,Zt,At,Tt){var Lt,kt,It=new ie.Parser(gt,Zt);--At;var Xt=[".notdef"],Nt=It.parseCard8();if(Nt===0)for(var Dt=0;Dt<At;Dt+=1)Lt=It.parseSID(),Xt.push(Sr(Tt,Lt));else if(Nt===1)for(;Xt.length<=At;){Lt=It.parseSID(),kt=It.parseCard8();for(var Yt=0;Yt<=kt;Yt+=1)Xt.push(Sr(Tt,Lt)),Lt+=1}else{if(Nt!==2)throw new Error("Unknown charset format "+Nt);for(;Xt.length<=At;){Lt=It.parseSID(),kt=It.parseCard16();for(var Ut=0;Ut<=kt;Ut+=1)Xt.push(Sr(Tt,Lt)),Lt+=1}}return Xt}(y,_+Le.charset,S.nGlyphs,ee.objects);Le.encoding===0?S.cffEncoding=new Ve(z,it):Le.encoding===1?S.cffEncoding=new Ve(J,it):S.cffEncoding=function(gt,Zt,At){var Tt,Lt={},kt=new ie.Parser(gt,Zt),It=kt.parseCard8();if(It===0)for(var Xt=kt.parseCard8(),Nt=0;Nt<Xt;Nt+=1)Lt[Tt=kt.parseCard8()]=Nt;else{if(It!==1)throw new Error("Unknown encoding format "+It);var Dt=kt.parseCard8();Tt=1;for(var Yt=0;Yt<Dt;Yt+=1)for(var Ut=kt.parseCard8(),Qt=kt.parseCard8(),Pt=Ut;Pt<=Ut+Qt;Pt+=1)Lt[Pt]=Tt,Tt+=1}return new Ve(Lt,At)}(y,_+Le.encoding,it),S.encoding=S.encoding||S.cffEncoding,S.glyphs=new ct.GlyphSet(S);for(var St=0;St<S.nGlyphs;St+=1){var dt=ot.objects[St];S.glyphs.push(St,ct.cffGlyphLoader(S,St,Xe,dt))}},make:function(y,_){for(var S,T=new Pe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),L=1/_.unitsPerEm,k={version:_.version,fullName:_.fullName,familyName:_.familyName,weight:_.weightName,fontBBox:_.fontBBox||[0,0,0,0],fontMatrix:[L,0,0,L,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},B=[],Z=1;Z<y.length;Z+=1)S=y.get(Z),B.push(S.name);var ee=[];T.header=new Pe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),T.nameIndex=function(Ye){var He=new Pe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);He.names=[];for(var Oe=0;Oe<Ye.length;Oe+=1)He.names.push({name:"name_"+Oe,type:"NAME",value:Ye[Oe]});return He}([_.postScriptName]);var pe,Te,Le,ae=ht(k,ee);T.topDictIndex=ue(ae),T.globalSubrIndex=new Pe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),T.charsets=function(Ye,He){for(var Oe=new Pe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Be=0;Be<Ye.length;Be+=1){var ot=vt(Ye[Be],He);Oe.fields.push({name:"glyph_"+Be,type:"SID",value:ot})}return Oe}(B,ee),T.charStringsIndex=function(Ye){for(var He=new Pe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Oe=0;Oe<Ye.length;Oe+=1){var Be=Ye.get(Oe),ot=je(Be);He.charStrings.push({name:Be.name,type:"CHARSTRING",value:ot})}return He}(y),T.privateDict=(pe={},Te=ee,(Le=new Pe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=pt(ke,pe,Te),Le),T.stringIndex=function(Ye){var He=new Pe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);He.strings=[];for(var Oe=0;Oe<Ye.length;Oe+=1)He.strings.push({name:"string_"+Oe,type:"STRING",value:Ye[Oe]});return He}(ee);var et=T.header.sizeOf()+T.nameIndex.sizeOf()+T.topDictIndex.sizeOf()+T.stringIndex.sizeOf()+T.globalSubrIndex.sizeOf();return k.charset=et,k.encoding=0,k.charStrings=k.charset+T.charsets.sizeOf(),k.private[1]=k.charStrings+T.charStringsIndex.sizeOf(),ae=ht(k,ee),T.topDictIndex=ue(ae),T}},Fe={parse:function(y,_){var S={},T=new ie.Parser(y,_);return S.version=T.parseVersion(),S.fontRevision=Math.round(1e3*T.parseFixed())/1e3,S.checkSumAdjustment=T.parseULong(),S.magicNumber=T.parseULong(),ye.argument(S.magicNumber===1594834165,"Font header has wrong magic number."),S.flags=T.parseUShort(),S.unitsPerEm=T.parseUShort(),S.created=T.parseLongDateTime(),S.modified=T.parseLongDateTime(),S.xMin=T.parseShort(),S.yMin=T.parseShort(),S.xMax=T.parseShort(),S.yMax=T.parseShort(),S.macStyle=T.parseUShort(),S.lowestRecPPEM=T.parseUShort(),S.fontDirectionHint=T.parseShort(),S.indexToLocFormat=T.parseShort(),S.glyphDataFormat=T.parseShort(),S},make:function(y){var _=Math.round(new Date().getTime()/1e3)+2082844800,S=_;return y.createdTimestamp&&(S=y.createdTimestamp+2082844800),new Pe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:S},{name:"modified",type:"LONGDATETIME",value:_},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],y)}},$e={parse:function(y,_){var S={},T=new ie.Parser(y,_);return S.version=T.parseVersion(),S.ascender=T.parseShort(),S.descender=T.parseShort(),S.lineGap=T.parseShort(),S.advanceWidthMax=T.parseUShort(),S.minLeftSideBearing=T.parseShort(),S.minRightSideBearing=T.parseShort(),S.xMaxExtent=T.parseShort(),S.caretSlopeRise=T.parseShort(),S.caretSlopeRun=T.parseShort(),S.caretOffset=T.parseShort(),T.relativeOffset+=8,S.metricDataFormat=T.parseShort(),S.numberOfHMetrics=T.parseUShort(),S},make:function(y){return new Pe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],y)}},ze={parse:function(y,_,S,T,L){for(var k,B,Z=new ie.Parser(y,_),ee=0;ee<T;ee+=1){ee<S&&(k=Z.parseUShort(),B=Z.parseShort());var pe=L.get(ee);pe.advanceWidth=k,pe.leftSideBearing=B}},make:function(y){for(var _=new Pe.Table("hmtx",[]),S=0;S<y.length;S+=1){var T=y.get(S),L=T.advanceWidth||0,k=T.leftSideBearing||0;_.fields.push({name:"advanceWidth_"+S,type:"USHORT",value:L}),_.fields.push({name:"leftSideBearing_"+S,type:"SHORT",value:k})}return _}},st={make:function(y){for(var _=new Pe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:y.length}]),S="",T=12+4*y.length,L=0;L<y.length;++L){var k=S.indexOf(y[L]);k<0&&(k=S.length,S+=y[L]),_.fields.push({name:"offset "+L,type:"USHORT",value:T+k}),_.fields.push({name:"length "+L,type:"USHORT",value:y[L].length})}return _.fields.push({name:"stringPool",type:"CHARARRAY",value:S}),_},parse:function(y,_){var S=new ie.Parser(y,_),T=S.parseULong();ye.argument(T===1,"Unsupported ltag table version."),S.skip("uLong",1);for(var L=S.parseULong(),k=[],B=0;B<L;B++){for(var Z="",ee=_+S.parseUShort(),pe=S.parseUShort(),Te=ee;Te<ee+pe;++Te)Z+=String.fromCharCode(y.getInt8(Te));k.push(Z)}return k}},wt={parse:function(y,_){var S={},T=new ie.Parser(y,_);return S.version=T.parseVersion(),S.numGlyphs=T.parseUShort(),S.version===1&&(S.maxPoints=T.parseUShort(),S.maxContours=T.parseUShort(),S.maxCompositePoints=T.parseUShort(),S.maxCompositeContours=T.parseUShort(),S.maxZones=T.parseUShort(),S.maxTwilightPoints=T.parseUShort(),S.maxStorage=T.parseUShort(),S.maxFunctionDefs=T.parseUShort(),S.maxInstructionDefs=T.parseUShort(),S.maxStackElements=T.parseUShort(),S.maxSizeOfInstructions=T.parseUShort(),S.maxComponentElements=T.parseUShort(),S.maxComponentDepth=T.parseUShort()),S},make:function(y){return new Pe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:y}])}},mt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],_t={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},tt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Rt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function ut(y,_,S){switch(y){case 0:if(_===65535)return"und";if(S)return S[_];break;case 1:return _t[_];case 3:return Rt[_]}}var jt="utf-16",Or={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},hr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Qn(y,_,S){switch(y){case 0:return jt;case 1:return hr[S]||Or[_];case 3:if(_===1||_===10)return jt}}function $n(y){var _={};for(var S in y)_[y[S]]=parseInt(S);return _}function Yi(y,_,S,T,L,k){return new Pe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:y},{name:"encodingID",type:"USHORT",value:_},{name:"languageID",type:"USHORT",value:S},{name:"nameID",type:"USHORT",value:T},{name:"length",type:"USHORT",value:L},{name:"offset",type:"USHORT",value:k}])}function ei(y,_){var S=function(k,B){var Z=k.length,ee=B.length-Z+1;e:for(var pe=0;pe<ee;pe++)for(;pe<ee;pe++){for(var Te=0;Te<Z;Te++)if(B[pe+Te]!==k[Te])continue e;return pe}return-1}(y,_);if(S<0){S=_.length;for(var T=0,L=y.length;T<L;++T)_.push(y[T])}return S}var bl={parse:function(y,_,S){for(var T={},L=new ie.Parser(y,_),k=L.parseUShort(),B=L.parseUShort(),Z=L.offset+L.parseUShort(),ee=0;ee<B;ee++){var pe=L.parseUShort(),Te=L.parseUShort(),Le=L.parseUShort(),ae=L.parseUShort(),et=mt[ae]||ae,Ye=L.parseUShort(),He=L.parseUShort(),Oe=ut(pe,Le,S),Be=Qn(pe,Te,Le);if(Be!==void 0&&Oe!==void 0){var ot=void 0;if(ot=Be===jt?fe.UTF16(y,Z+He,Ye):fe.MACSTRING(y,Z+He,Ye,Be)){var it=T[et];it===void 0&&(it=T[et]={}),it[Oe]=ot}}}return k===1&&L.parseUShort(),T},make:function(y,_){var S,T=[],L={},k=$n(mt);for(var B in y){var Z=k[B];if(Z===void 0&&(Z=B),S=parseInt(Z),isNaN(S))throw new Error('Name table entry "'+B+'" does not exist, see nameTableNames for complete list.');L[S]=y[B],T.push(S)}for(var ee=$n(_t),pe=$n(Rt),Te=[],Le=[],ae=0;ae<T.length;ae++){var et=L[S=T[ae]];for(var Ye in et){var He=et[Ye],Oe=1,Be=ee[Ye],ot=tt[Be],it=Qn(Oe,ot,Be),St=de.MACSTRING(He,it);St===void 0&&(Oe=0,(Be=_.indexOf(Ye))<0&&(Be=_.length,_.push(Ye)),ot=4,St=de.UTF16(He));var dt=ei(St,Le);Te.push(Yi(Oe,ot,Be,S,St.length,dt));var gt=pe[Ye];if(gt!==void 0){var Zt=de.UTF16(He),At=ei(Zt,Le);Te.push(Yi(3,1,gt,S,Zt.length,At))}}}Te.sort(function(kt,It){return kt.platformID-It.platformID||kt.encodingID-It.encodingID||kt.languageID-It.languageID||kt.nameID-It.nameID});for(var Tt=new Pe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Te.length},{name:"stringOffset",type:"USHORT",value:6+12*Te.length}]),Lt=0;Lt<Te.length;Lt++)Tt.fields.push({name:"record_"+Lt,type:"RECORD",value:Te[Lt]});return Tt.fields.push({name:"strings",type:"LITERAL",value:Le}),Tt}},ko=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],No={parse:function(y,_){var S={},T=new ie.Parser(y,_);S.version=T.parseUShort(),S.xAvgCharWidth=T.parseShort(),S.usWeightClass=T.parseUShort(),S.usWidthClass=T.parseUShort(),S.fsType=T.parseUShort(),S.ySubscriptXSize=T.parseShort(),S.ySubscriptYSize=T.parseShort(),S.ySubscriptXOffset=T.parseShort(),S.ySubscriptYOffset=T.parseShort(),S.ySuperscriptXSize=T.parseShort(),S.ySuperscriptYSize=T.parseShort(),S.ySuperscriptXOffset=T.parseShort(),S.ySuperscriptYOffset=T.parseShort(),S.yStrikeoutSize=T.parseShort(),S.yStrikeoutPosition=T.parseShort(),S.sFamilyClass=T.parseShort(),S.panose=[];for(var L=0;L<10;L++)S.panose[L]=T.parseByte();return S.ulUnicodeRange1=T.parseULong(),S.ulUnicodeRange2=T.parseULong(),S.ulUnicodeRange3=T.parseULong(),S.ulUnicodeRange4=T.parseULong(),S.achVendID=String.fromCharCode(T.parseByte(),T.parseByte(),T.parseByte(),T.parseByte()),S.fsSelection=T.parseUShort(),S.usFirstCharIndex=T.parseUShort(),S.usLastCharIndex=T.parseUShort(),S.sTypoAscender=T.parseShort(),S.sTypoDescender=T.parseShort(),S.sTypoLineGap=T.parseShort(),S.usWinAscent=T.parseUShort(),S.usWinDescent=T.parseUShort(),1<=S.version&&(S.ulCodePageRange1=T.parseULong(),S.ulCodePageRange2=T.parseULong()),2<=S.version&&(S.sxHeight=T.parseShort(),S.sCapHeight=T.parseShort(),S.usDefaultChar=T.parseUShort(),S.usBreakChar=T.parseUShort(),S.usMaxContent=T.parseUShort()),S},make:function(y){return new Pe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],y)},unicodeRanges:ko,getUnicodeRange:function(y){for(var _=0;_<ko.length;_+=1){var S=ko[_];if(y>=S.begin&&y<S.end)return _}return-1}},_l={parse:function(y,_){var S={},T=new ie.Parser(y,_);switch(S.version=T.parseVersion(),S.italicAngle=T.parseFixed(),S.underlinePosition=T.parseShort(),S.underlineThickness=T.parseShort(),S.isFixedPitch=T.parseULong(),S.minMemType42=T.parseULong(),S.maxMemType42=T.parseULong(),S.minMemType1=T.parseULong(),S.maxMemType1=T.parseULong(),S.version){case 1:S.names=ce.slice();break;case 2:S.numberOfGlyphs=T.parseUShort(),S.glyphNameIndex=new Array(S.numberOfGlyphs);for(var L=0;L<S.numberOfGlyphs;L++)S.glyphNameIndex[L]=T.parseUShort();S.names=[];for(var k=0;k<S.numberOfGlyphs;k++)if(S.glyphNameIndex[k]>=ce.length){var B=T.parseChar();S.names.push(T.parseString(B))}break;case 2.5:S.numberOfGlyphs=T.parseUShort(),S.offset=new Array(S.numberOfGlyphs);for(var Z=0;Z<S.numberOfGlyphs;Z++)S.offset[Z]=T.parseChar()}return S},make:function(){return new Pe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},jr=new Array(9);jr[1]=function(){var y=this.offset+this.relativeOffset,_=this.parseUShort();return _===1?{substFormat:1,coverage:this.parsePointer(se.coverage),deltaGlyphId:this.parseUShort()}:_===2?{substFormat:2,coverage:this.parsePointer(se.coverage),substitute:this.parseOffset16List()}:void ye.assert(!1,"0x"+y.toString(16)+": lookup type 1 format must be 1 or 2.")},jr[2]=function(){var y=this.parseUShort();return ye.argument(y===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(se.coverage),sequences:this.parseListOfLists()}},jr[3]=function(){var y=this.parseUShort();return ye.argument(y===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(se.coverage),alternateSets:this.parseListOfLists()}},jr[4]=function(){var y=this.parseUShort();return ye.argument(y===1,"GSUB ligature table identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(se.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var ti={sequenceIndex:se.uShort,lookupListIndex:se.uShort};jr[5]=function(){var y=this.offset+this.relativeOffset,_=this.parseUShort();if(_===1)return{substFormat:_,coverage:this.parsePointer(se.coverage),ruleSets:this.parseListOfLists(function(){var L=this.parseUShort(),k=this.parseUShort();return{input:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(k,ti)}})};if(_===2)return{substFormat:_,coverage:this.parsePointer(se.coverage),classDef:this.parsePointer(se.classDef),classSets:this.parseListOfLists(function(){var L=this.parseUShort(),k=this.parseUShort();return{classes:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(k,ti)}})};if(_===3){var S=this.parseUShort(),T=this.parseUShort();return{substFormat:_,coverages:this.parseList(S,se.pointer(se.coverage)),lookupRecords:this.parseRecordList(T,ti)}}ye.assert(!1,"0x"+y.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},jr[6]=function(){var y=this.offset+this.relativeOffset,_=this.parseUShort();return _===1?{substFormat:1,coverage:this.parsePointer(se.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ti)}})}:_===2?{substFormat:2,coverage:this.parsePointer(se.coverage),backtrackClassDef:this.parsePointer(se.classDef),inputClassDef:this.parsePointer(se.classDef),lookaheadClassDef:this.parsePointer(se.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ti)}})}:_===3?{substFormat:3,backtrackCoverage:this.parseList(se.pointer(se.coverage)),inputCoverage:this.parseList(se.pointer(se.coverage)),lookaheadCoverage:this.parseList(se.pointer(se.coverage)),lookupRecords:this.parseRecordList(ti)}:void ye.assert(!1,"0x"+y.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},jr[7]=function(){var y=this.parseUShort();ye.argument(y===1,"GSUB Extension Substitution subtable identifier-format must be 1");var _=this.parseUShort(),S=new se(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:_,extension:jr[_].call(S)}},jr[8]=function(){var y=this.parseUShort();return ye.argument(y===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(se.coverage),backtrackCoverage:this.parseList(se.pointer(se.coverage)),lookaheadCoverage:this.parseList(se.pointer(se.coverage)),substitutes:this.parseUShortList()}};var Os=new Array(9);Os[1]=function(y){return y.substFormat===1?new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Pe.Coverage(y.coverage)},{name:"deltaGlyphID",type:"USHORT",value:y.deltaGlyphId}]):new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Pe.Coverage(y.coverage)}].concat(Pe.ushortList("substitute",y.substitute)))},Os[3]=function(y){return ye.assert(y.substFormat===1,"Lookup type 3 substFormat must be 1."),new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Pe.Coverage(y.coverage)}].concat(Pe.tableList("altSet",y.alternateSets,function(_){return new Pe.Table("alternateSetTable",Pe.ushortList("alternate",_))})))},Os[4]=function(y){return ye.assert(y.substFormat===1,"Lookup type 4 substFormat must be 1."),new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Pe.Coverage(y.coverage)}].concat(Pe.tableList("ligSet",y.ligatureSets,function(_){return new Pe.Table("ligatureSetTable",Pe.tableList("ligature",_,function(S){return new Pe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:S.ligGlyph}].concat(Pe.ushortList("component",S.components,S.components.length+1)))}))})))};var xl={parse:function(y,_){var S=new se(y,_=_||0),T=S.parseVersion(1);return ye.argument(T===1||T===1.1,"Unsupported GSUB table version."),T===1?{version:T,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(jr)}:{version:T,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(jr),variations:S.parseFeatureVariationsList()}},make:function(y){return new Pe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Pe.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new Pe.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new Pe.LookupList(y.lookups,Os)}])}},wl={parse:function(y,_){var S=new ie.Parser(y,_),T=S.parseULong();ye.argument(T===1,"Unsupported META table version."),S.parseULong(),S.parseULong();for(var L=S.parseULong(),k={},B=0;B<L;B++){var Z=S.parseTag(),ee=S.parseULong(),pe=S.parseULong(),Te=fe.UTF8(y,_+ee,pe);k[Z]=Te}return k},make:function(y){var _=Object.keys(y).length,S="",T=16+12*_,L=new Pe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:T},{name:"numTags",type:"ULONG",value:_}]);for(var k in y){var B=S.length;S+=y[k],L.fields.push({name:"tag "+k,type:"TAG",value:k}),L.fields.push({name:"offset "+k,type:"ULONG",value:T+B}),L.fields.push({name:"length "+k,type:"ULONG",value:y[k].length})}return L.fields.push({name:"stringPool",type:"CHARARRAY",value:S}),L}};function Sl(y){return Math.log(y)/Math.log(2)|0}function Fo(y){for(;y.length%4!=0;)y.push(0);for(var _=0,S=0;S<y.length;S+=4)_+=(y[S]<<24)+(y[S+1]<<16)+(y[S+2]<<8)+y[S+3];return _%=Math.pow(2,32)}function Ml(y,_,S,T){return new Pe.Record("Table Record",[{name:"tag",type:"TAG",value:y!==void 0?y:""},{name:"checkSum",type:"ULONG",value:_!==void 0?_:0},{name:"offset",type:"ULONG",value:S!==void 0?S:0},{name:"length",type:"ULONG",value:T!==void 0?T:0}])}function Tl(y){var _=new Pe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);_.tables=y,_.numTables=y.length;var S=Math.pow(2,Sl(_.numTables));_.searchRange=16*S,_.entrySelector=Sl(S),_.rangeShift=16*_.numTables-_.searchRange;for(var T=[],L=[],k=_.sizeOf()+Ml().sizeOf()*_.numTables;k%4!=0;)k+=1,L.push({name:"padding",type:"BYTE",value:0});for(var B=0;B<y.length;B+=1){var Z=y[B];ye.argument(Z.tableName.length===4,"Table name"+Z.tableName+" is invalid.");var ee=Z.sizeOf(),pe=Ml(Z.tableName,Fo(Z.encode()),k,ee);for(T.push({name:pe.tag+" Table Record",type:"RECORD",value:pe}),L.push({name:Z.tableName+" table",type:"RECORD",value:Z}),k+=ee,ye.argument(!isNaN(k),"Something went wrong calculating the offset.");k%4!=0;)k+=1,L.push({name:"padding",type:"BYTE",value:0})}return T.sort(function(Te,Le){return Te.value.tag>Le.value.tag?1:-1}),_.fields=_.fields.concat(T),_.fields=_.fields.concat(L),_}function El(y,_,S){for(var T=0;T<_.length;T+=1){var L=y.charToGlyphIndex(_[T]);if(0<L)return y.glyphs.get(L).getMetrics()}return S}var Jh={make:Tl,fontToTable:function(y){for(var _,S=[],T=[],L=[],k=[],B=[],Z=[],ee=[],pe=0,Te=0,Le=0,ae=0,et=0,Ye=0;Ye<y.glyphs.length;Ye+=1){var He=y.glyphs.get(Ye),Oe=0|He.unicode;if(isNaN(He.advanceWidth))throw new Error("Glyph "+He.name+" ("+Ye+"): advanceWidth is not a number.");(Oe<_||_===void 0)&&0<Oe&&(_=Oe),pe<Oe&&(pe=Oe);var Be=No.getUnicodeRange(Oe);if(Be<32)Te|=1<<Be;else if(Be<64)Le|=1<<Be-32;else if(Be<96)ae|=1<<Be-64;else{if(!(Be<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");et|=1<<Be-96}if(He.name!==".notdef"){var ot=He.getMetrics();S.push(ot.xMin),T.push(ot.yMin),L.push(ot.xMax),k.push(ot.yMax),Z.push(ot.leftSideBearing),ee.push(ot.rightSideBearing),B.push(He.advanceWidth)}}var it={xMin:Math.min.apply(null,S),yMin:Math.min.apply(null,T),xMax:Math.max.apply(null,L),yMax:Math.max.apply(null,k),advanceWidthMax:Math.max.apply(null,B),advanceWidthAvg:function(ii){for(var nu=0,qo=0;qo<ii.length;qo+=1)nu+=ii[qo];return nu/ii.length}(B),minLeftSideBearing:Math.min.apply(null,Z),maxLeftSideBearing:Math.max.apply(null,Z),minRightSideBearing:Math.min.apply(null,ee)};it.ascender=y.ascender,it.descender=y.descender;var St=Fe.make({flags:3,unitsPerEm:y.unitsPerEm,xMin:it.xMin,yMin:it.yMin,xMax:it.xMax,yMax:it.yMax,lowestRecPPEM:3,createdTimestamp:y.createdTimestamp}),dt=$e.make({ascender:it.ascender,descender:it.descender,advanceWidthMax:it.advanceWidthMax,minLeftSideBearing:it.minLeftSideBearing,minRightSideBearing:it.minRightSideBearing,xMaxExtent:it.maxLeftSideBearing+(it.xMax-it.xMin),numberOfHMetrics:y.glyphs.length}),gt=wt.make(y.glyphs.length),Zt=No.make({xAvgCharWidth:Math.round(it.advanceWidthAvg),usWeightClass:y.tables.os2.usWeightClass,usWidthClass:y.tables.os2.usWidthClass,usFirstCharIndex:_,usLastCharIndex:pe,ulUnicodeRange1:Te,ulUnicodeRange2:Le,ulUnicodeRange3:ae,ulUnicodeRange4:et,fsSelection:y.tables.os2.fsSelection,sTypoAscender:it.ascender,sTypoDescender:it.descender,sTypoLineGap:0,usWinAscent:it.yMax,usWinDescent:Math.abs(it.yMin),ulCodePageRange1:1,sxHeight:El(y,"xyvw",{yMax:Math.round(it.ascender/2)}).yMax,sCapHeight:El(y,"HIKLEFJMNTZBDPRAGOQSUVWXY",it).yMax,usDefaultChar:y.hasChar(" ")?32:0,usBreakChar:y.hasChar(" ")?32:0}),At=ze.make(y.glyphs),Tt=U.make(y.glyphs),Lt=y.getEnglishName("fontFamily"),kt=y.getEnglishName("fontSubfamily"),It=Lt+" "+kt,Xt=y.getEnglishName("postScriptName");Xt=Xt||Lt.replace(/\s/g,"")+"-"+kt;var Nt={};for(var Dt in y.names)Nt[Dt]=y.names[Dt];Nt.uniqueID||(Nt.uniqueID={en:y.getEnglishName("manufacturer")+":"+It}),Nt.postScriptName||(Nt.postScriptName={en:Xt}),Nt.preferredFamily||(Nt.preferredFamily=y.names.fontFamily),Nt.preferredSubfamily||(Nt.preferredSubfamily=y.names.fontSubfamily);var Yt=[],Ut=bl.make(Nt,Yt),Qt=0<Yt.length?st.make(Yt):void 0,Pt=_l.make(),er=qe.make(y.glyphs,{version:y.getEnglishName("version"),fullName:It,familyName:Lt,weightName:kt,postScriptName:Xt,unitsPerEm:y.unitsPerEm,fontBBox:[0,it.yMin,it.ascender,it.advanceWidthMax]}),zt=y.metas&&0<Object.keys(y.metas).length?wl.make(y.metas):void 0,Wt=[St,dt,gt,Zt,Ut,Tt,Pt,er,At];Qt&&Wt.push(Qt),y.tables.gsub&&Wt.push(xl.make(y.tables.gsub)),zt&&Wt.push(zt);for(var Vr=Tl(Wt),ni=Fo(Vr.encode()),jn=Vr.fields,Lr=!1,kn=0;kn<jn.length;kn+=1)if(jn[kn].name==="head table"){jn[kn].value.checkSumAdjustment=2981146554-ni,Lr=!0;break}if(!Lr)throw new Error("Could not find head table with checkSum to adjust.");return Vr},computeCheckSum:Fo};function Uo(y,_){for(var S=0,T=y.length-1;S<=T;){var L=S+T>>>1,k=y[L].tag;if(k===_)return L;k<_?S=1+L:T=L-1}return-S-1}function Al(y,_){for(var S=0,T=y.length-1;S<=T;){var L=S+T>>>1,k=y[L];if(k===_)return L;k<_?S=1+L:T=L-1}return-S-1}function Ll(y,_){for(var S,T=0,L=y.length-1;T<=L;){var k=T+L>>>1,B=(S=y[k]).start;if(B===_)return S;B<_?T=1+k:L=k-1}if(0<T)return _>(S=y[T-1]).end?0:S}function js(y,_){this.font=y,this.tableName=_}function ks(y){js.call(this,y,"gpos")}function Gr(y){js.call(this,y,"gsub")}function Kh(y,_){var S=y.length;if(S!==_.length)return!1;for(var T=0;T<S;T++)if(y[T]!==_[T])return!1;return!0}function Cl(y,_,S){for(var T=y.subtables,L=0;L<T.length;L++){var k=T[L];if(k.substFormat===_)return k}if(S)return T.push(S),S}function Rl(y){for(var _=new ArrayBuffer(y.length),S=new Uint8Array(_),T=0;T<y.length;++T)S[T]=y[T];return _}function ri(y,_){if(!y)throw _}function Pl(y,_,S,T,L){var k;return k=0<(_&T)?(k=y.parseByte(),(_&L)==0&&(k=-k),S+k):0<(_&L)?S:S+y.parseShort()}function Qh(y,_,S){var T,L,k=new ie.Parser(_,S);if(y.numberOfContours=k.parseShort(),y._xMin=k.parseShort(),y._yMin=k.parseShort(),y._xMax=k.parseShort(),y._yMax=k.parseShort(),0<y.numberOfContours){for(var B=y.endPointIndices=[],Z=0;Z<y.numberOfContours;Z+=1)B.push(k.parseUShort());y.instructionLength=k.parseUShort(),y.instructions=[];for(var ee=0;ee<y.instructionLength;ee+=1)y.instructions.push(k.parseByte());var pe=B[B.length-1]+1;T=[];for(var Te=0;Te<pe;Te+=1)if(L=k.parseByte(),T.push(L),0<(8&L))for(var Le=k.parseByte(),ae=0;ae<Le;ae+=1)T.push(L),Te+=1;if(ye.argument(T.length===pe,"Bad flags."),0<B.length){var et,Ye=[];if(0<pe){for(var He=0;He<pe;He+=1)L=T[He],(et={}).onCurve=!!(1&L),et.lastPointOfContour=0<=B.indexOf(He),Ye.push(et);for(var Oe=0,Be=0;Be<pe;Be+=1)L=T[Be],(et=Ye[Be]).x=Pl(k,L,Oe,2,16),Oe=et.x;for(var ot=0,it=0;it<pe;it+=1)L=T[it],(et=Ye[it]).y=Pl(k,L,ot,4,32),ot=et.y}y.points=Ye}else y.points=[]}else if(y.numberOfContours===0)y.points=[];else{y.isComposite=!0,y.points=[],y.components=[];for(var St=!0;St;){T=k.parseUShort();var dt={glyphIndex:k.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&T)?0<(2&T)?(dt.dx=k.parseShort(),dt.dy=k.parseShort()):dt.matchedPoints=[k.parseUShort(),k.parseUShort()]:0<(2&T)?(dt.dx=k.parseChar(),dt.dy=k.parseChar()):dt.matchedPoints=[k.parseByte(),k.parseByte()],0<(8&T)?dt.xScale=dt.yScale=k.parseF2Dot14():0<(64&T)?(dt.xScale=k.parseF2Dot14(),dt.yScale=k.parseF2Dot14()):0<(128&T)&&(dt.xScale=k.parseF2Dot14(),dt.scale01=k.parseF2Dot14(),dt.scale10=k.parseF2Dot14(),dt.yScale=k.parseF2Dot14()),y.components.push(dt),St=!!(32&T)}if(256&T){y.instructionLength=k.parseUShort(),y.instructions=[];for(var gt=0;gt<y.instructionLength;gt+=1)y.instructions.push(k.parseByte())}}}function Bo(y,_){for(var S=[],T=0;T<y.length;T+=1){var L=y[T],k={x:_.xScale*L.x+_.scale01*L.y+_.dx,y:_.scale10*L.x+_.yScale*L.y+_.dy,onCurve:L.onCurve,lastPointOfContour:L.lastPointOfContour};S.push(k)}return S}function Il(y){var _=new K;if(!y)return _;for(var S=function(Le){for(var ae=[],et=[],Ye=0;Ye<Le.length;Ye+=1){var He=Le[Ye];et.push(He),He.lastPointOfContour&&(ae.push(et),et=[])}return ye.argument(et.length===0,"There are still points left in the current contour."),ae}(y),T=0;T<S.length;++T){var L=S[T],k=null,B=L[L.length-1],Z=L[0];if(B.onCurve)_.moveTo(B.x,B.y);else if(Z.onCurve)_.moveTo(Z.x,Z.y);else{var ee={x:.5*(B.x+Z.x),y:.5*(B.y+Z.y)};_.moveTo(ee.x,ee.y)}for(var pe=0;pe<L.length;++pe)if(k=B,B=Z,Z=L[(pe+1)%L.length],B.onCurve)_.lineTo(B.x,B.y);else{var Te=Z;k.onCurve||(.5*(B.x+k.x),.5*(B.y+k.y)),Z.onCurve||(Te={x:.5*(B.x+Z.x),y:.5*(B.y+Z.y)}),_.quadraticCurveTo(B.x,B.y,Te.x,Te.y)}_.closePath()}return _}function $h(y,_){if(_.isComposite)for(var S=0;S<_.components.length;S+=1){var T=_.components[S],L=y.get(T.glyphIndex);if(L.getPath(),L.points){var k=void 0;if(T.matchedPoints===void 0)k=Bo(L.points,T);else{if(T.matchedPoints[0]>_.points.length-1||T.matchedPoints[1]>L.points.length-1)throw Error("Matched points out of range in "+_.name);var B=_.points[T.matchedPoints[0]],Z=L.points[T.matchedPoints[1]],ee={xScale:T.xScale,scale01:T.scale01,scale10:T.scale10,yScale:T.yScale,dx:0,dy:0};Z=Bo([Z],ee)[0],ee.dx=B.x-Z.x,ee.dy=B.y-Z.y,k=Bo(L.points,ee)}_.points=_.points.concat(k)}}return Il(_.points)}(ks.prototype=js.prototype={searchTag:Uo,binSearch:Al,getTable:function(y){var _=this.font.tables[this.tableName];return!_&&y&&(_=this.font.tables[this.tableName]=this.createDefaultTable()),_},getScriptNames:function(){var y=this.getTable();return y?y.scripts.map(function(_){return _.tag}):[]},getDefaultScriptName:function(){var y=this.getTable();if(y){for(var _=!1,S=0;S<y.scripts.length;S++){var T=y.scripts[S].tag;if(T==="DFLT")return T;T==="latn"&&(_=!0)}return _?"latn":void 0}},getScriptTable:function(y,_){var S=this.getTable(_);if(S){y=y||"DFLT";var T=S.scripts,L=Uo(S.scripts,y);if(0<=L)return T[L].script;if(_){var k={tag:y,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return T.splice(-1-L,0,k),k.script}}},getLangSysTable:function(y,_,S){var T=this.getScriptTable(y,S);if(T){if(!_||_==="dflt"||_==="DFLT")return T.defaultLangSys;var L=Uo(T.langSysRecords,_);if(0<=L)return T.langSysRecords[L].langSys;if(S){var k={tag:_,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return T.langSysRecords.splice(-1-L,0,k),k.langSys}}},getFeatureTable:function(y,_,S,T){var L=this.getLangSysTable(y,_,T);if(L){for(var k,B=L.featureIndexes,Z=this.font.tables[this.tableName].features,ee=0;ee<B.length;ee++)if((k=Z[B[ee]]).tag===S)return k.feature;if(T){var pe=Z.length;return ye.assert(pe===0||S>=Z[pe-1].tag,"Features must be added in alphabetical order."),k={tag:S,feature:{params:0,lookupListIndexes:[]}},Z.push(k),B.push(pe),k.feature}}},getLookupTables:function(y,_,S,T,L){var k=this.getFeatureTable(y,_,S,L),B=[];if(k){for(var Z,ee=k.lookupListIndexes,pe=this.font.tables[this.tableName].lookups,Te=0;Te<ee.length;Te++)(Z=pe[ee[Te]]).lookupType===T&&B.push(Z);if(B.length===0&&L){Z={lookupType:T,lookupFlag:0,subtables:[],markFilteringSet:void 0};var Le=pe.length;return pe.push(Z),ee.push(Le),[Z]}}return B},getGlyphClass:function(y,_){switch(y.format){case 1:return y.startGlyph<=_&&_<y.startGlyph+y.classes.length?y.classes[_-y.startGlyph]:0;case 2:var S=Ll(y.ranges,_);return S?S.classId:0}},getCoverageIndex:function(y,_){switch(y.format){case 1:var S=Al(y.glyphs,_);return 0<=S?S:-1;case 2:var T=Ll(y.ranges,_);return T?T.index+_-T.start:-1}},expandCoverage:function(y){if(y.format===1)return y.glyphs;for(var _=[],S=y.ranges,T=0;T<S.length;T++)for(var L=S[T],k=L.start,B=L.end,Z=k;Z<=B;Z++)_.push(Z);return _}}).init=function(){var y=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(y)},ks.prototype.getKerningValue=function(y,_,S){for(var T=0;T<y.length;T++)for(var L=y[T].subtables,k=0;k<L.length;k++){var B=L[k],Z=this.getCoverageIndex(B.coverage,_);if(!(Z<0))switch(B.posFormat){case 1:for(var ee=B.pairSets[Z],pe=0;pe<ee.length;pe++){var Te=ee[pe];if(Te.secondGlyph===S)return Te.value1&&Te.value1.xAdvance||0}break;case 2:var Le=this.getGlyphClass(B.classDef1,_),ae=this.getGlyphClass(B.classDef2,S),et=B.classRecords[Le][ae];return et.value1&&et.value1.xAdvance||0}}return 0},ks.prototype.getKerningTables=function(y,_){if(this.font.tables.gpos)return this.getLookupTables(y,_,"kern",2)},(Gr.prototype=js.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Gr.prototype.getSingle=function(y,_,S){for(var T=[],L=this.getLookupTables(_,S,y,1),k=0;k<L.length;k++)for(var B=L[k].subtables,Z=0;Z<B.length;Z++){var ee=B[Z],pe=this.expandCoverage(ee.coverage),Te=void 0;if(ee.substFormat===1){var Le=ee.deltaGlyphId;for(Te=0;Te<pe.length;Te++){var ae=pe[Te];T.push({sub:ae,by:ae+Le})}}else{var et=ee.substitute;for(Te=0;Te<pe.length;Te++)T.push({sub:pe[Te],by:et[Te]})}}return T},Gr.prototype.getAlternates=function(y,_,S){for(var T=[],L=this.getLookupTables(_,S,y,3),k=0;k<L.length;k++)for(var B=L[k].subtables,Z=0;Z<B.length;Z++)for(var ee=B[Z],pe=this.expandCoverage(ee.coverage),Te=ee.alternateSets,Le=0;Le<pe.length;Le++)T.push({sub:pe[Le],by:Te[Le]});return T},Gr.prototype.getLigatures=function(y,_,S){for(var T=[],L=this.getLookupTables(_,S,y,4),k=0;k<L.length;k++)for(var B=L[k].subtables,Z=0;Z<B.length;Z++)for(var ee=B[Z],pe=this.expandCoverage(ee.coverage),Te=ee.ligatureSets,Le=0;Le<pe.length;Le++)for(var ae=pe[Le],et=Te[Le],Ye=0;Ye<et.length;Ye++){var He=et[Ye];T.push({sub:[ae].concat(He.components),by:He.ligGlyph})}return T},Gr.prototype.addSingle=function(y,_,S,T){var L=Cl(this.getLookupTables(S,T,y,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});ye.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format);var k=_.sub,B=this.binSearch(L.coverage.glyphs,k);B<0&&(B=-1-B,L.coverage.glyphs.splice(B,0,k),L.substitute.splice(B,0,0)),L.substitute[B]=_.by},Gr.prototype.addAlternate=function(y,_,S,T){var L=Cl(this.getLookupTables(S,T,y,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});ye.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format);var k=_.sub,B=this.binSearch(L.coverage.glyphs,k);B<0&&(B=-1-B,L.coverage.glyphs.splice(B,0,k),L.alternateSets.splice(B,0,0)),L.alternateSets[B]=_.by},Gr.prototype.addLigature=function(y,_,S,T){var L=this.getLookupTables(S,T,y,4,!0)[0],k=L.subtables[0];k||(k={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},L.subtables[0]=k),ye.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format);var B=_.sub[0],Z=_.sub.slice(1),ee={ligGlyph:_.by,components:Z},pe=this.binSearch(k.coverage.glyphs,B);if(0<=pe){for(var Te=k.ligatureSets[pe],Le=0;Le<Te.length;Le++)if(Kh(Te[Le].components,Z))return;Te.push(ee)}else pe=-1-pe,k.coverage.glyphs.splice(pe,0,B),k.ligatureSets.splice(pe,0,[ee])},Gr.prototype.getFeature=function(y,_,S){if(/ss\d\d/.test(y))return this.getSingle(y,_,S);switch(y){case"aalt":case"salt":return this.getSingle(y,_,S).concat(this.getAlternates(y,_,S));case"dlig":case"liga":case"rlig":return this.getLigatures(y,_,S)}},Gr.prototype.add=function(y,_,S,T){if(/ss\d\d/.test(y))return this.addSingle(y,_,S,T);switch(y){case"aalt":case"salt":return typeof _.by=="number"?this.addSingle(y,_,S,T):this.addAlternate(y,_,S,T);case"dlig":case"liga":case"rlig":return this.addLigature(y,_,S,T)}};var Dl,On,Ol,Go,jl={getPath:Il,parse:function(y,_,S,T){for(var L=new ct.GlyphSet(T),k=0;k<S.length-1;k+=1){var B=S[k];B!==S[k+1]?L.push(k,ct.ttfGlyphLoader(T,k,Qh,y,_+B,$h)):L.push(k,ct.glyphLoader(T,k))}return L}};function kl(y){this.font=y,this.getCommands=function(_){return jl.getPath(_).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function ed(y){return y}function Nl(y){return Math.sign(y)*Math.round(Math.abs(y))}function td(y){return Math.sign(y)*Math.round(Math.abs(2*y))/2}function rd(y){return Math.sign(y)*(Math.round(Math.abs(y)+.5)-.5)}function nd(y){return Math.sign(y)*Math.ceil(Math.abs(y))}function id(y){return Math.sign(y)*Math.floor(Math.abs(y))}function Fl(y){var _=this.srPeriod,S=this.srPhase,T=1;return y<0&&(y=-y,T=-1),y+=this.srThreshold-S,y=Math.trunc(y/_)*_,(y+=S)<0?S*T:y*T}var zr={x:1,y:0,axis:"x",distance:function(y,_,S,T){return(S?y.xo:y.x)-(T?_.xo:_.x)},interpolate:function(y,_,S,T){var L,k,B,Z,ee,pe,Te;if(!T||T===this)return L=y.xo-_.xo,k=y.xo-S.xo,ee=_.x-_.xo,pe=S.x-S.xo,(Te=(B=Math.abs(L))+(Z=Math.abs(k)))===0?void(y.x=y.xo+(ee+pe)/2):void(y.x=y.xo+(ee*Z+pe*B)/Te);L=T.distance(y,_,!0,!0),k=T.distance(y,S,!0,!0),ee=T.distance(_,_,!1,!0),pe=T.distance(S,S,!1,!0),(Te=(B=Math.abs(L))+(Z=Math.abs(k)))!==0?zr.setRelative(y,y,(ee*Z+pe*B)/Te,T,!0):zr.setRelative(y,y,(ee+pe)/2,T,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(y,_,S,T,L){if(T&&T!==this){var k=L?_.xo:_.x,B=L?_.yo:_.y,Z=k+S*T.x,ee=B+S*T.y;y.x=Z+(y.y-ee)/T.normalSlope}else y.x=(L?_.xo:_.x)+S},slope:0,touch:function(y){y.xTouched=!0},touched:function(y){return y.xTouched},untouch:function(y){y.xTouched=!1}},Kr={x:0,y:1,axis:"y",distance:function(y,_,S,T){return(S?y.yo:y.y)-(T?_.yo:_.y)},interpolate:function(y,_,S,T){var L,k,B,Z,ee,pe,Te;if(!T||T===this)return L=y.yo-_.yo,k=y.yo-S.yo,ee=_.y-_.yo,pe=S.y-S.yo,(Te=(B=Math.abs(L))+(Z=Math.abs(k)))===0?void(y.y=y.yo+(ee+pe)/2):void(y.y=y.yo+(ee*Z+pe*B)/Te);L=T.distance(y,_,!0,!0),k=T.distance(y,S,!0,!0),ee=T.distance(_,_,!1,!0),pe=T.distance(S,S,!1,!0),(Te=(B=Math.abs(L))+(Z=Math.abs(k)))!==0?Kr.setRelative(y,y,(ee*Z+pe*B)/Te,T,!0):Kr.setRelative(y,y,(ee+pe)/2,T,!0)},normalSlope:0,setRelative:function(y,_,S,T,L){if(T&&T!==this){var k=L?_.xo:_.x,B=L?_.yo:_.y,Z=k+S*T.x,ee=B+S*T.y;y.y=ee+T.normalSlope*(y.x-Z)}else y.y=(L?_.yo:_.y)+S},slope:Number.POSITIVE_INFINITY,touch:function(y){y.yTouched=!0},touched:function(y){return y.yTouched},untouch:function(y){y.yTouched=!1}};function Zi(y,_){this.x=y,this.y=_,this.axis=void 0,this.slope=_/y,this.normalSlope=-y/_,Object.freeze(this)}function Ji(y,_){var S=Math.sqrt(y*y+_*_);return _/=S,(y/=S)==1&&_===0?zr:y===0&&_===1?Kr:new Zi(y,_)}function Qr(y,_,S,T){this.x=this.xo=Math.round(64*y)/64,this.y=this.yo=Math.round(64*_)/64,this.lastPointOfContour=S,this.onCurve=T,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(zr),Object.freeze(Kr),Zi.prototype.distance=function(y,_,S,T){return this.x*zr.distance(y,_,S,T)+this.y*Kr.distance(y,_,S,T)},Zi.prototype.interpolate=function(y,_,S,T){var L,k,B,Z,ee,pe,Te;B=T.distance(y,_,!0,!0),Z=T.distance(y,S,!0,!0),L=T.distance(_,_,!1,!0),k=T.distance(S,S,!1,!0),(Te=(ee=Math.abs(B))+(pe=Math.abs(Z)))!==0?this.setRelative(y,y,(L*pe+k*ee)/Te,T,!0):this.setRelative(y,y,(L+k)/2,T,!0)},Zi.prototype.setRelative=function(y,_,S,T,L){T=T||this;var k=L?_.xo:_.x,B=L?_.yo:_.y,Z=k+S*T.x,ee=B+S*T.y,pe=T.normalSlope,Te=this.slope,Le=y.x,ae=y.y;y.x=(Te*Le-pe*Z+ee-ae)/(Te-pe),y.y=Te*(y.x-Le)+ae},Zi.prototype.touch=function(y){y.xTouched=!0,y.yTouched=!0},Qr.prototype.nextTouched=function(y){for(var _=this.nextPointOnContour;!y.touched(_)&&_!==this;)_=_.nextPointOnContour;return _},Qr.prototype.prevTouched=function(y){for(var _=this.prevPointOnContour;!y.touched(_)&&_!==this;)_=_.prevPointOnContour;return _};var Ki=Object.freeze(new Qr(0,0)),sd={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function hn(y,_){switch(this.env=y,this.stack=[],this.prog=_,y){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=zr,this.round=Nl}}function Ns(y){for(var _=y.tZone=new Array(y.gZone.length),S=0;S<_.length;S++)_[S]=new Qr(0,0)}function Ul(y,_){var S,T=y.prog,L=y.ip,k=1;do if((S=T[++L])===88)k++;else if(S===89)k--;else if(S===64)L+=T[L+1]+1;else if(S===65)L+=2*T[L+1]+1;else if(176<=S&&S<=183)L+=S-176+1;else if(184<=S&&S<=191)L+=2*(S-184+1);else if(_&&k===1&&S===27)break;while(0<k);y.ip=L}function Bl(y,_){a.DEBUG&&console.log(_.step,"SVTCA["+y.axis+"]"),_.fv=_.pv=_.dpv=y}function Gl(y,_){a.DEBUG&&console.log(_.step,"SPVTCA["+y.axis+"]"),_.pv=_.dpv=y}function zl(y,_){a.DEBUG&&console.log(_.step,"SFVTCA["+y.axis+"]"),_.fv=y}function Vl(y,_){var S,T,L=_.stack,k=L.pop(),B=L.pop(),Z=_.z2[k],ee=_.z1[B];a.DEBUG&&console.log("SPVTL["+y+"]",k,B),T=y?(S=Z.y-ee.y,ee.x-Z.x):(S=ee.x-Z.x,ee.y-Z.y),_.pv=_.dpv=Ji(S,T)}function Hl(y,_){var S,T,L=_.stack,k=L.pop(),B=L.pop(),Z=_.z2[k],ee=_.z1[B];a.DEBUG&&console.log("SFVTL["+y+"]",k,B),T=y?(S=Z.y-ee.y,ee.x-Z.x):(S=ee.x-Z.x,ee.y-Z.y),_.fv=Ji(S,T)}function zo(y){a.DEBUG&&console.log(y.step,"POP[]"),y.stack.pop()}function Wl(y,_){var S=_.stack.pop(),T=_.z0[S],L=_.fv,k=_.pv;a.DEBUG&&console.log(_.step,"MDAP["+y+"]",S);var B=k.distance(T,Ki);y&&(B=_.round(B)),L.setRelative(T,Ki,B,k),L.touch(T),_.rp0=_.rp1=S}function ql(y,_){var S,T,L,k=_.z2,B=k.length-2;a.DEBUG&&console.log(_.step,"IUP["+y.axis+"]");for(var Z=0;Z<B;Z++)S=k[Z],y.touched(S)||(T=S.prevTouched(y))!==S&&(T===(L=S.nextTouched(y))&&y.setRelative(S,S,y.distance(T,T,!1,!0),y,!0),y.interpolate(S,T,L,y))}function Xl(y,_){for(var S=_.stack,T=y?_.rp1:_.rp2,L=(y?_.z0:_.z1)[T],k=_.fv,B=_.pv,Z=_.loop,ee=_.z2;Z--;){var pe=S.pop(),Te=ee[pe],Le=B.distance(L,L,!1,!0);k.setRelative(Te,Te,Le,B),k.touch(Te),a.DEBUG&&console.log(_.step,(1<_.loop?"loop "+(_.loop-Z)+": ":"")+"SHP["+(y?"rp1":"rp2")+"]",pe)}_.loop=1}function Yl(y,_){var S=_.stack,T=y?_.rp1:_.rp2,L=(y?_.z0:_.z1)[T],k=_.fv,B=_.pv,Z=S.pop(),ee=_.z2[_.contours[Z]],pe=ee;a.DEBUG&&console.log(_.step,"SHC["+y+"]",Z);for(var Te=B.distance(L,L,!1,!0);pe!==L&&k.setRelative(pe,pe,Te,B),(pe=pe.nextPointOnContour)!==ee;);}function Zl(y,_){var S,T,L=_.stack,k=y?_.rp1:_.rp2,B=(y?_.z0:_.z1)[k],Z=_.fv,ee=_.pv,pe=L.pop();switch(a.DEBUG&&console.log(_.step,"SHZ["+y+"]",pe),pe){case 0:S=_.tZone;break;case 1:S=_.gZone;break;default:throw new Error("Invalid zone")}for(var Te=ee.distance(B,B,!1,!0),Le=S.length-2,ae=0;ae<Le;ae++)T=S[ae],Z.setRelative(T,T,Te,ee)}function Jl(y,_){var S=_.stack,T=S.pop()/64,L=S.pop(),k=_.z1[L],B=_.z0[_.rp0],Z=_.fv,ee=_.pv;Z.setRelative(k,B,T,ee),Z.touch(k),a.DEBUG&&console.log(_.step,"MSIRP["+y+"]",T,L),_.rp1=_.rp0,_.rp2=L,y&&(_.rp0=L)}function Kl(y,_){var S=_.stack,T=S.pop(),L=S.pop(),k=_.z0[L],B=_.fv,Z=_.pv,ee=_.cvt[T];a.DEBUG&&console.log(_.step,"MIAP["+y+"]",T,"(",ee,")",L);var pe=Z.distance(k,Ki);y&&(Math.abs(pe-ee)<_.cvCutIn&&(pe=ee),pe=_.round(pe)),B.setRelative(k,Ki,pe,Z),_.zp0===0&&(k.xo=k.x,k.yo=k.y),B.touch(k),_.rp0=_.rp1=L}function Ql(y,_){var S=_.stack,T=S.pop(),L=_.z2[T];a.DEBUG&&console.log(_.step,"GC["+y+"]",T),S.push(64*_.dpv.distance(L,Ki,y,!1))}function $l(y,_){var S=_.stack,T=S.pop(),L=S.pop(),k=_.z1[T],B=_.z0[L],Z=_.dpv.distance(B,k,y,y);a.DEBUG&&console.log(_.step,"MD["+y+"]",T,L,"->",Z),_.stack.push(Math.round(64*Z))}function Vo(y,_){var S=_.stack,T=S.pop(),L=_.fv,k=_.pv,B=_.ppem,Z=_.deltaBase+16*(y-1),ee=_.deltaShift,pe=_.z0;a.DEBUG&&console.log(_.step,"DELTAP["+y+"]",T,S);for(var Te=0;Te<T;Te++){var Le=S.pop(),ae=S.pop();if(Z+((240&ae)>>4)===B){var et=(15&ae)-8;0<=et&&et++,a.DEBUG&&console.log(_.step,"DELTAPFIX",Le,"by",et*ee);var Ye=pe[Le];L.setRelative(Ye,Ye,et*ee,k)}}}function Fs(y,_){var S=_.stack,T=S.pop();a.DEBUG&&console.log(_.step,"ROUND[]"),S.push(64*_.round(T/64))}function Ho(y,_){var S=_.stack,T=S.pop(),L=_.ppem,k=_.deltaBase+16*(y-1),B=_.deltaShift;a.DEBUG&&console.log(_.step,"DELTAC["+y+"]",T,S);for(var Z=0;Z<T;Z++){var ee=S.pop(),pe=S.pop();if(k+((240&pe)>>4)===L){var Te=(15&pe)-8;0<=Te&&Te++;var Le=Te*B;a.DEBUG&&console.log(_.step,"DELTACFIX",ee,"by",Le),_.cvt[ee]+=Le}}}function eu(y,_){var S,T,L=_.stack,k=L.pop(),B=L.pop(),Z=_.z2[k],ee=_.z1[B];a.DEBUG&&console.log(_.step,"SDPVTL["+y+"]",k,B),T=y?(S=Z.y-ee.y,ee.x-Z.x):(S=ee.x-Z.x,ee.y-Z.y),_.dpv=Ji(S,T)}function dn(y,_){var S=_.stack,T=_.prog,L=_.ip;a.DEBUG&&console.log(_.step,"PUSHB["+y+"]");for(var k=0;k<y;k++)S.push(T[++L]);_.ip=L}function fn(y,_){var S=_.ip,T=_.prog,L=_.stack;a.DEBUG&&console.log(_.ip,"PUSHW["+y+"]");for(var k=0;k<y;k++){var B=T[++S]<<8|T[++S];32768&B&&(B=-(1+(65535^B))),L.push(B)}_.ip=S}function lt(y,_,S,T,L,k){var B,Z,ee,pe,Te=k.stack,Le=y&&Te.pop(),ae=Te.pop(),et=k.rp0,Ye=k.z0[et],He=k.z1[ae],Oe=k.minDis,Be=k.fv,ot=k.dpv;ee=0<=(Z=B=ot.distance(He,Ye,!0,!0))?1:-1,Z=Math.abs(Z),y&&(pe=k.cvt[Le],T&&Math.abs(Z-pe)<k.cvCutIn&&(Z=pe)),S&&Z<Oe&&(Z=Oe),T&&(Z=k.round(Z)),Be.setRelative(He,Ye,ee*Z,ot),Be.touch(He),a.DEBUG&&console.log(k.step,(y?"MIRP[":"MDRP[")+(_?"M":"m")+(S?">":"_")+(T?"R":"_")+(L===0?"Gr":L===1?"Bl":L===2?"Wh":"")+"]",y?Le+"("+k.cvt[Le]+","+pe+")":"",ae,"(d =",B,"->",ee*Z,")"),k.rp1=k.rp0,k.rp2=ae,_&&(k.rp0=ae)}kl.prototype.exec=function(y,_){if(typeof _!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var S=this.font,T=this._prepState;if(!T||T.ppem!==_){var L=this._fpgmState;if(!L){hn.prototype=sd,(L=this._fpgmState=new hn("fpgm",S.tables.fpgm)).funcs=[],L.font=S,a.DEBUG&&(console.log("---EXEC FPGM---"),L.step=-1);try{On(L)}catch(pe){return console.log("Hinting error in FPGM:"+pe),void(this._errorState=3)}}hn.prototype=L,(T=this._prepState=new hn("prep",S.tables.prep)).ppem=_;var k=S.tables.cvt;if(k)for(var B=T.cvt=new Array(k.length),Z=_/S.unitsPerEm,ee=0;ee<k.length;ee++)B[ee]=k[ee]*Z;else T.cvt=[];a.DEBUG&&(console.log("---EXEC PREP---"),T.step=-1);try{On(T)}catch(pe){this._errorState<2&&console.log("Hinting error in PREP:"+pe),this._errorState=2}}if(!(1<this._errorState))try{return Ol(y,T)}catch(pe){return this._errorState<1&&(console.log("Hinting error:"+pe),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Ol=function(y,_){var S,T,L,k=_.ppem/_.font.unitsPerEm,B=k,Z=y.components;if(hn.prototype=_,Z){var ee=_.font;T=[],S=[];for(var pe=0;pe<Z.length;pe++){var Te=Z[pe],Le=ee.glyphs.get(Te.glyphIndex);L=new hn("glyf",Le.instructions),a.DEBUG&&(console.log("---EXEC COMP "+pe+"---"),L.step=-1),Go(Le,L,k,B);for(var ae=Math.round(Te.dx*k),et=Math.round(Te.dy*B),Ye=L.gZone,He=L.contours,Oe=0;Oe<Ye.length;Oe++){var Be=Ye[Oe];Be.xTouched=Be.yTouched=!1,Be.xo=Be.x=Be.x+ae,Be.yo=Be.y=Be.y+et}var ot=T.length;T.push.apply(T,Ye);for(var it=0;it<He.length;it++)S.push(He[it]+ot)}y.instructions&&!L.inhibitGridFit&&((L=new hn("glyf",y.instructions)).gZone=L.z0=L.z1=L.z2=T,L.contours=S,T.push(new Qr(0,0),new Qr(Math.round(y.advanceWidth*k),0)),a.DEBUG&&(console.log("---EXEC COMPOSITE---"),L.step=-1),On(L),T.length-=2)}else L=new hn("glyf",y.instructions),a.DEBUG&&(console.log("---EXEC GLYPH---"),L.step=-1),Go(y,L,k,B),T=L.gZone;return T},Go=function(y,_,S,T){for(var L,k,B,Z=y.points||[],ee=Z.length,pe=_.gZone=_.z0=_.z1=_.z2=[],Te=_.contours=[],Le=0;Le<ee;Le++)L=Z[Le],pe[Le]=new Qr(L.x*S,L.y*T,L.lastPointOfContour,L.onCurve);for(var ae=0;ae<ee;ae++)L=pe[ae],k||(k=L,Te.push(ae)),L.lastPointOfContour?((L.nextPointOnContour=k).prevPointOnContour=L,k=void 0):(B=pe[ae+1],(L.nextPointOnContour=B).prevPointOnContour=L);if(!_.inhibitGridFit){if(a.DEBUG){console.log("PROCESSING GLYPH",_.stack);for(var et=0;et<ee;et++)console.log(et,pe[et].x,pe[et].y)}if(pe.push(new Qr(0,0),new Qr(Math.round(y.advanceWidth*S),0)),On(_),pe.length-=2,a.DEBUG){console.log("FINISHED GLYPH",_.stack);for(var Ye=0;Ye<ee;Ye++)console.log(Ye,pe[Ye].x,pe[Ye].y)}}},On=function(y){var _=y.prog;if(_){var S,T=_.length;for(y.ip=0;y.ip<T;y.ip++){if(a.DEBUG&&y.step++,!(S=Dl[_[y.ip]]))throw new Error("unknown instruction: 0x"+Number(_[y.ip]).toString(16));S(y)}}},Dl=[Bl.bind(void 0,Kr),Bl.bind(void 0,zr),Gl.bind(void 0,Kr),Gl.bind(void 0,zr),zl.bind(void 0,Kr),zl.bind(void 0,zr),Vl.bind(void 0,0),Vl.bind(void 0,1),Hl.bind(void 0,0),Hl.bind(void 0,1),function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"SPVFS[]",S,T),y.pv=y.dpv=Ji(T,S)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"SPVFS[]",S,T),y.fv=Ji(T,S)},function(y){var _=y.stack,S=y.pv;a.DEBUG&&console.log(y.step,"GPV[]"),_.push(16384*S.x),_.push(16384*S.y)},function(y){var _=y.stack,S=y.fv;a.DEBUG&&console.log(y.step,"GFV[]"),_.push(16384*S.x),_.push(16384*S.y)},function(y){y.fv=y.pv,a.DEBUG&&console.log(y.step,"SFVTPV[]")},function(y){var _=y.stack,S=_.pop(),T=_.pop(),L=_.pop(),k=_.pop(),B=_.pop(),Z=y.z0,ee=y.z1,pe=Z[S],Te=Z[T],Le=ee[L],ae=ee[k],et=y.z2[B];a.DEBUG&&console.log("ISECT[], ",S,T,L,k,B);var Ye=pe.x,He=pe.y,Oe=Te.x,Be=Te.y,ot=Le.x,it=Le.y,St=ae.x,dt=ae.y,gt=(Ye-Oe)*(it-dt)-(He-Be)*(ot-St),Zt=Ye*Be-He*Oe,At=ot*dt-it*St;et.x=(Zt*(ot-St)-At*(Ye-Oe))/gt,et.y=(Zt*(it-dt)-At*(He-Be))/gt},function(y){y.rp0=y.stack.pop(),a.DEBUG&&console.log(y.step,"SRP0[]",y.rp0)},function(y){y.rp1=y.stack.pop(),a.DEBUG&&console.log(y.step,"SRP1[]",y.rp1)},function(y){y.rp2=y.stack.pop(),a.DEBUG&&console.log(y.step,"SRP2[]",y.rp2)},function(y){var _=y.stack.pop();switch(a.DEBUG&&console.log(y.step,"SZP0[]",_),y.zp0=_){case 0:y.tZone||Ns(y),y.z0=y.tZone;break;case 1:y.z0=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var _=y.stack.pop();switch(a.DEBUG&&console.log(y.step,"SZP1[]",_),y.zp1=_){case 0:y.tZone||Ns(y),y.z1=y.tZone;break;case 1:y.z1=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var _=y.stack.pop();switch(a.DEBUG&&console.log(y.step,"SZP2[]",_),y.zp2=_){case 0:y.tZone||Ns(y),y.z2=y.tZone;break;case 1:y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var _=y.stack.pop();switch(a.DEBUG&&console.log(y.step,"SZPS[]",_),y.zp0=y.zp1=y.zp2=_,_){case 0:y.tZone||Ns(y),y.z0=y.z1=y.z2=y.tZone;break;case 1:y.z0=y.z1=y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){y.loop=y.stack.pop(),a.DEBUG&&console.log(y.step,"SLOOP[]",y.loop)},function(y){a.DEBUG&&console.log(y.step,"RTG[]"),y.round=Nl},function(y){a.DEBUG&&console.log(y.step,"RTHG[]"),y.round=rd},function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"SMD[]",_),y.minDis=_/64},function(y){a.DEBUG&&console.log(y.step,"ELSE[]"),Ul(y,!1)},function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"JMPR[]",_),y.ip+=_-1},function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"SCVTCI[]",_),y.cvCutIn=_/64},void 0,void 0,function(y){var _=y.stack;a.DEBUG&&console.log(y.step,"DUP[]"),_.push(_[_.length-1])},zo,function(y){a.DEBUG&&console.log(y.step,"CLEAR[]"),y.stack.length=0},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"SWAP[]"),_.push(S),_.push(T)},function(y){var _=y.stack;a.DEBUG&&console.log(y.step,"DEPTH[]"),_.push(_.length)},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"CINDEX[]",S),_.push(_[_.length-S])},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"MINDEX[]",S),_.push(_.splice(_.length-S,1)[0])},void 0,void 0,void 0,function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"LOOPCALL[]",S,T);var L=y.ip,k=y.prog;y.prog=y.funcs[S];for(var B=0;B<T;B++)On(y),a.DEBUG&&console.log(++y.step,B+1<T?"next loopcall":"done loopcall",B);y.ip=L,y.prog=k},function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"CALL[]",_);var S=y.ip,T=y.prog;y.prog=y.funcs[_],On(y),y.ip=S,y.prog=T,a.DEBUG&&console.log(++y.step,"returning from",_)},function(y){if(y.env!=="fpgm")throw new Error("FDEF not allowed here");var _=y.stack,S=y.prog,T=y.ip,L=_.pop(),k=T;for(a.DEBUG&&console.log(y.step,"FDEF[]",L);S[++T]!==45;);y.ip=T,y.funcs[L]=S.slice(k+1,T)},void 0,Wl.bind(void 0,0),Wl.bind(void 0,1),ql.bind(void 0,Kr),ql.bind(void 0,zr),Xl.bind(void 0,0),Xl.bind(void 0,1),Yl.bind(void 0,0),Yl.bind(void 0,1),Zl.bind(void 0,0),Zl.bind(void 0,1),function(y){for(var _=y.stack,S=y.loop,T=y.fv,L=_.pop()/64,k=y.z2;S--;){var B=_.pop(),Z=k[B];a.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-S)+": ":"")+"SHPIX[]",B,L),T.setRelative(Z,Z,L),T.touch(Z)}y.loop=1},function(y){for(var _=y.stack,S=y.rp1,T=y.rp2,L=y.loop,k=y.z0[S],B=y.z1[T],Z=y.fv,ee=y.dpv,pe=y.z2;L--;){var Te=_.pop(),Le=pe[Te];a.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-L)+": ":"")+"IP[]",Te,S,"<->",T),Z.interpolate(Le,k,B,ee),Z.touch(Le)}y.loop=1},Jl.bind(void 0,0),Jl.bind(void 0,1),function(y){for(var _=y.stack,S=y.rp0,T=y.z0[S],L=y.loop,k=y.fv,B=y.pv,Z=y.z1;L--;){var ee=_.pop(),pe=Z[ee];a.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-L)+": ":"")+"ALIGNRP[]",ee),k.setRelative(pe,T,0,B),k.touch(pe)}y.loop=1},function(y){a.DEBUG&&console.log(y.step,"RTDG[]"),y.round=td},Kl.bind(void 0,0),Kl.bind(void 0,1),function(y){var _=y.prog,S=y.ip,T=y.stack,L=_[++S];a.DEBUG&&console.log(y.step,"NPUSHB[]",L);for(var k=0;k<L;k++)T.push(_[++S]);y.ip=S},function(y){var _=y.ip,S=y.prog,T=y.stack,L=S[++_];a.DEBUG&&console.log(y.step,"NPUSHW[]",L);for(var k=0;k<L;k++){var B=S[++_]<<8|S[++_];32768&B&&(B=-(1+(65535^B))),T.push(B)}y.ip=_},function(y){var _=y.stack,S=y.store;S=S||(y.store=[]);var T=_.pop(),L=_.pop();a.DEBUG&&console.log(y.step,"WS",T,L),S[L]=T},function(y){var _=y.stack,S=y.store,T=_.pop();a.DEBUG&&console.log(y.step,"RS",T);var L=S&&S[T]||0;_.push(L)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"WCVTP",S,T),y.cvt[T]=S/64},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"RCVT",S),_.push(64*y.cvt[S])},Ql.bind(void 0,0),Ql.bind(void 0,1),void 0,$l.bind(void 0,0),$l.bind(void 0,1),function(y){a.DEBUG&&console.log(y.step,"MPPEM[]"),y.stack.push(y.ppem)},void 0,function(y){a.DEBUG&&console.log(y.step,"FLIPON[]"),y.autoFlip=!0},void 0,void 0,function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"LT[]",S,T),_.push(T<S?1:0)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"LTEQ[]",S,T),_.push(T<=S?1:0)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"GT[]",S,T),_.push(S<T?1:0)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"GTEQ[]",S,T),_.push(S<=T?1:0)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"EQ[]",S,T),_.push(S===T?1:0)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"NEQ[]",S,T),_.push(S!==T?1:0)},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"ODD[]",S),_.push(Math.trunc(S)%2?1:0)},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"EVEN[]",S),_.push(Math.trunc(S)%2?0:1)},function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"IF[]",_),_||(Ul(y,!0),a.DEBUG&&console.log(y.step,"EIF[]"))},function(y){a.DEBUG&&console.log(y.step,"EIF[]")},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"AND[]",S,T),_.push(S&&T?1:0)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"OR[]",S,T),_.push(S||T?1:0)},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"NOT[]",S),_.push(S?0:1)},Vo.bind(void 0,1),function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"SDB[]",_),y.deltaBase=_},function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"SDS[]",_),y.deltaShift=Math.pow(.5,_)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"ADD[]",S,T),_.push(T+S)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"SUB[]",S,T),_.push(T-S)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"DIV[]",S,T),_.push(64*T/S)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"MUL[]",S,T),_.push(T*S/64)},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"ABS[]",S),_.push(Math.abs(S))},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"NEG[]",S),_.push(-S)},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"FLOOR[]",S),_.push(64*Math.floor(S/64))},function(y){var _=y.stack,S=_.pop();a.DEBUG&&console.log(y.step,"CEILING[]",S),_.push(64*Math.ceil(S/64))},Fs.bind(void 0,0),Fs.bind(void 0,1),Fs.bind(void 0,2),Fs.bind(void 0,3),void 0,void 0,void 0,void 0,function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"WCVTF[]",S,T),y.cvt[T]=S*y.ppem/y.font.unitsPerEm},Vo.bind(void 0,2),Vo.bind(void 0,3),Ho.bind(void 0,1),Ho.bind(void 0,2),Ho.bind(void 0,3),function(y){var _,S=y.stack.pop();switch(a.DEBUG&&console.log(y.step,"SROUND[]",S),y.round=Fl,192&S){case 0:_=.5;break;case 64:_=1;break;case 128:_=2;break;default:throw new Error("invalid SROUND value")}switch(y.srPeriod=_,48&S){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*_;break;case 32:y.srPhase=.5*_;break;case 48:y.srPhase=.75*_;break;default:throw new Error("invalid SROUND value")}S&=15,y.srThreshold=S===0?0:(S/8-.5)*_},function(y){var _,S=y.stack.pop();switch(a.DEBUG&&console.log(y.step,"S45ROUND[]",S),y.round=Fl,192&S){case 0:_=Math.sqrt(2)/2;break;case 64:_=Math.sqrt(2);break;case 128:_=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(y.srPeriod=_,48&S){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*_;break;case 32:y.srPhase=.5*_;break;case 48:y.srPhase=.75*_;break;default:throw new Error("invalid S45ROUND value")}S&=15,y.srThreshold=S===0?0:(S/8-.5)*_},void 0,void 0,function(y){a.DEBUG&&console.log(y.step,"ROFF[]"),y.round=ed},void 0,function(y){a.DEBUG&&console.log(y.step,"RUTG[]"),y.round=nd},function(y){a.DEBUG&&console.log(y.step,"RDTG[]"),y.round=id},zo,zo,void 0,void 0,void 0,void 0,void 0,function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"SCANCTRL[]",_)},eu.bind(void 0,0),eu.bind(void 0,1),function(y){var _=y.stack,S=_.pop(),T=0;a.DEBUG&&console.log(y.step,"GETINFO[]",S),1&S&&(T=35),32&S&&(T|=4096),_.push(T)},void 0,function(y){var _=y.stack,S=_.pop(),T=_.pop(),L=_.pop();a.DEBUG&&console.log(y.step,"ROLL[]"),_.push(T),_.push(S),_.push(L)},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"MAX[]",S,T),_.push(Math.max(T,S))},function(y){var _=y.stack,S=_.pop(),T=_.pop();a.DEBUG&&console.log(y.step,"MIN[]",S,T),_.push(Math.min(T,S))},function(y){var _=y.stack.pop();a.DEBUG&&console.log(y.step,"SCANTYPE[]",_)},function(y){var _=y.stack.pop(),S=y.stack.pop();switch(a.DEBUG&&console.log(y.step,"INSTCTRL[]",_,S),_){case 1:return void(y.inhibitGridFit=!!S);case 2:return void(y.ignoreCvt=!!S);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,dn.bind(void 0,1),dn.bind(void 0,2),dn.bind(void 0,3),dn.bind(void 0,4),dn.bind(void 0,5),dn.bind(void 0,6),dn.bind(void 0,7),dn.bind(void 0,8),fn.bind(void 0,1),fn.bind(void 0,2),fn.bind(void 0,3),fn.bind(void 0,4),fn.bind(void 0,5),fn.bind(void 0,6),fn.bind(void 0,7),fn.bind(void 0,8),lt.bind(void 0,0,0,0,0,0),lt.bind(void 0,0,0,0,0,1),lt.bind(void 0,0,0,0,0,2),lt.bind(void 0,0,0,0,0,3),lt.bind(void 0,0,0,0,1,0),lt.bind(void 0,0,0,0,1,1),lt.bind(void 0,0,0,0,1,2),lt.bind(void 0,0,0,0,1,3),lt.bind(void 0,0,0,1,0,0),lt.bind(void 0,0,0,1,0,1),lt.bind(void 0,0,0,1,0,2),lt.bind(void 0,0,0,1,0,3),lt.bind(void 0,0,0,1,1,0),lt.bind(void 0,0,0,1,1,1),lt.bind(void 0,0,0,1,1,2),lt.bind(void 0,0,0,1,1,3),lt.bind(void 0,0,1,0,0,0),lt.bind(void 0,0,1,0,0,1),lt.bind(void 0,0,1,0,0,2),lt.bind(void 0,0,1,0,0,3),lt.bind(void 0,0,1,0,1,0),lt.bind(void 0,0,1,0,1,1),lt.bind(void 0,0,1,0,1,2),lt.bind(void 0,0,1,0,1,3),lt.bind(void 0,0,1,1,0,0),lt.bind(void 0,0,1,1,0,1),lt.bind(void 0,0,1,1,0,2),lt.bind(void 0,0,1,1,0,3),lt.bind(void 0,0,1,1,1,0),lt.bind(void 0,0,1,1,1,1),lt.bind(void 0,0,1,1,1,2),lt.bind(void 0,0,1,1,1,3),lt.bind(void 0,1,0,0,0,0),lt.bind(void 0,1,0,0,0,1),lt.bind(void 0,1,0,0,0,2),lt.bind(void 0,1,0,0,0,3),lt.bind(void 0,1,0,0,1,0),lt.bind(void 0,1,0,0,1,1),lt.bind(void 0,1,0,0,1,2),lt.bind(void 0,1,0,0,1,3),lt.bind(void 0,1,0,1,0,0),lt.bind(void 0,1,0,1,0,1),lt.bind(void 0,1,0,1,0,2),lt.bind(void 0,1,0,1,0,3),lt.bind(void 0,1,0,1,1,0),lt.bind(void 0,1,0,1,1,1),lt.bind(void 0,1,0,1,1,2),lt.bind(void 0,1,0,1,1,3),lt.bind(void 0,1,1,0,0,0),lt.bind(void 0,1,1,0,0,1),lt.bind(void 0,1,1,0,0,2),lt.bind(void 0,1,1,0,0,3),lt.bind(void 0,1,1,0,1,0),lt.bind(void 0,1,1,0,1,1),lt.bind(void 0,1,1,0,1,2),lt.bind(void 0,1,1,0,1,3),lt.bind(void 0,1,1,1,0,0),lt.bind(void 0,1,1,1,0,1),lt.bind(void 0,1,1,1,0,2),lt.bind(void 0,1,1,1,0,3),lt.bind(void 0,1,1,1,1,0),lt.bind(void 0,1,1,1,1,1),lt.bind(void 0,1,1,1,1,2),lt.bind(void 0,1,1,1,1,3)];var od=Array.from||function(y){return y.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Gt(y){(y=y||{}).empty||(ri(y.familyName,"When creating a new Font object, familyName is required."),ri(y.styleName,"When creating a new Font object, styleName is required."),ri(y.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ri(y.ascender,"When creating a new Font object, ascender is required."),ri(y.descender,"When creating a new Font object, descender is required."),ri(y.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:y.familyName||" "},fontSubfamily:{en:y.styleName||" "},fullName:{en:y.fullName||y.familyName+" "+y.styleName},postScriptName:{en:y.postScriptName||(y.familyName+y.styleName).replace(/\s/g,"")},designer:{en:y.designer||" "},designerURL:{en:y.designerURL||" "},manufacturer:{en:y.manufacturer||" "},manufacturerURL:{en:y.manufacturerURL||" "},license:{en:y.license||" "},licenseURL:{en:y.licenseURL||" "},version:{en:y.version||"Version 0.1"},description:{en:y.description||" "},copyright:{en:y.copyright||" "},trademark:{en:y.trademark||" "}},this.unitsPerEm=y.unitsPerEm||1e3,this.ascender=y.ascender,this.descender=y.descender,this.createdTimestamp=y.createdTimestamp,this.tables={os2:{usWeightClass:y.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:y.widthClass||this.usWidthClasses.MEDIUM,fsSelection:y.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ct.GlyphSet(this,y.glyphs||[]),this.encoding=new Ae(this),this.position=new ks(this),this.substitution=new Gr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new kl(this):void 0}})}function tu(y,_){var S=JSON.stringify(y),T=256;for(var L in _){var k=parseInt(L);if(k&&!(k<256)){if(JSON.stringify(_[L])===S)return k;T<=k&&(T=k+1)}}return _[T]=y,T}function ad(y,_,S,T){for(var L=[{name:"nameID_"+y,type:"USHORT",value:tu(_.name,T)},{name:"flags_"+y,type:"USHORT",value:0}],k=0;k<S.length;++k){var B=S[k].tag;L.push({name:"axis_"+y+" "+B,type:"FIXED",value:_.coordinates[B]<<16})}return L}function ld(y,_,S,T){var L={},k=new ie.Parser(y,_);L.name=T[k.parseUShort()]||{},k.skip("uShort",1),L.coordinates={};for(var B=0;B<S.length;++B)L.coordinates[S[B].tag]=k.parseFixed();return L}Gt.prototype.hasChar=function(y){return this.encoding.charToGlyphIndex(y)!==null},Gt.prototype.charToGlyphIndex=function(y){return this.encoding.charToGlyphIndex(y)},Gt.prototype.charToGlyph=function(y){var _=this.charToGlyphIndex(y),S=this.glyphs.get(_);return S=S||this.glyphs.get(0)},Gt.prototype.stringToGlyphs=function(y,_){_=_||this.defaultRenderOptions;for(var S=od(y),T=[],L=0;L<S.length;L+=1){var k=S[L];T.push(this.charToGlyphIndex(k))}var B=T.length;if(_.features){var Z=_.script||this.substitution.getDefaultScriptName(),ee=[];_.features.liga&&(ee=ee.concat(this.substitution.getFeature("liga",Z,_.language))),_.features.rlig&&(ee=ee.concat(this.substitution.getFeature("rlig",Z,_.language)));for(var pe=0;pe<B;pe+=1)for(var Te=0;Te<ee.length;Te++){for(var Le=ee[Te],ae=Le.sub,et=ae.length,Ye=0;Ye<et&&ae[Ye]===T[pe+Ye];)Ye++;Ye===et&&(T.splice(pe,et,Le.by),B=B-et+1)}}for(var He=new Array(B),Oe=this.glyphs.get(0),Be=0;Be<B;Be+=1)He[Be]=this.glyphs.get(T[Be])||Oe;return He},Gt.prototype.nameToGlyphIndex=function(y){return this.glyphNames.nameToGlyphIndex(y)},Gt.prototype.nameToGlyph=function(y){var _=this.nameToGlyphIndex(y),S=this.glyphs.get(_);return S=S||this.glyphs.get(0)},Gt.prototype.glyphIndexToName=function(y){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(y):""},Gt.prototype.getKerningValue=function(y,_){y=y.index||y,_=_.index||_;var S=this.position.defaultKerningTables;return S?this.position.getKerningValue(S,y,_):this.kerningPairs[y+","+_]||0},Gt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Gt.prototype.forEachGlyph=function(y,_,S,T,L,k){_=_!==void 0?_:0,S=S!==void 0?S:0,T=T!==void 0?T:72,L=L||this.defaultRenderOptions;var B,Z=1/this.unitsPerEm*T,ee=this.stringToGlyphs(y,L);if(L.kerning){var pe=L.script||this.position.getDefaultScriptName();B=this.position.getKerningTables(pe,L.language)}for(var Te=0;Te<ee.length;Te+=1){var Le=ee[Te];k.call(this,Le,_,S,T,L),Le.advanceWidth&&(_+=Le.advanceWidth*Z),L.kerning&&Te<ee.length-1&&(_+=(B?this.position.getKerningValue(B,Le.index,ee[Te+1].index):this.getKerningValue(Le,ee[Te+1]))*Z),L.letterSpacing?_+=L.letterSpacing*T:L.tracking&&(_+=L.tracking/1e3*T)}return _},Gt.prototype.getPath=function(y,_,S,T,L){var k=new K;return this.forEachGlyph(y,_,S,T,L,function(B,Z,ee,pe){var Te=B.getPath(Z,ee,pe,L,this);k.extend(Te)}),k},Gt.prototype.getPaths=function(y,_,S,T,L){var k=[];return this.forEachGlyph(y,_,S,T,L,function(B,Z,ee,pe){var Te=B.getPath(Z,ee,pe,L,this);k.push(Te)}),k},Gt.prototype.getAdvanceWidth=function(y,_,S){return this.forEachGlyph(y,0,0,_,S,function(){})},Gt.prototype.draw=function(y,_,S,T,L,k){this.getPath(_,S,T,L,k).draw(y)},Gt.prototype.drawPoints=function(y,_,S,T,L,k){this.forEachGlyph(_,S,T,L,k,function(B,Z,ee,pe){B.drawPoints(y,Z,ee,pe)})},Gt.prototype.drawMetrics=function(y,_,S,T,L,k){this.forEachGlyph(_,S,T,L,k,function(B,Z,ee,pe){B.drawMetrics(y,Z,ee,pe)})},Gt.prototype.getEnglishName=function(y){var _=this.names[y];if(_)return _.en},Gt.prototype.validate=function(){var y=this;function _(S){var T=y.getEnglishName(S);T&&T.trim().length}_("fontFamily"),_("weightName"),_("manufacturer"),_("copyright"),_("version"),this.unitsPerEm},Gt.prototype.toTables=function(){return Jh.fontToTable(this)},Gt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Gt.prototype.toArrayBuffer=function(){for(var y=this.toTables().encode(),_=new ArrayBuffer(y.length),S=new Uint8Array(_),T=0;T<y.length;T++)S[T]=y[T];return _},Gt.prototype.download=function(y){var _=this.getEnglishName("fontFamily"),S=this.getEnglishName("fontSubfamily");y=y||_.replace(/\s/g,"")+"-"+S+".otf";var T=this.toArrayBuffer();if(typeof window!="undefined")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,T.byteLength,function(B){B.root.getFile(y,{create:!0},function(Z){Z.createWriter(function(ee){var pe=new DataView(T),Te=new Blob([pe],{type:"font/opentype"});ee.write(Te),ee.addEventListener("writeend",function(){location.href=Z.toURL()},!1)})})},function(B){throw new Error(B.name+": "+B.message)});else{var L=e("fs"),k=function(B){for(var Z=new s(B.byteLength),ee=new Uint8Array(B),pe=0;pe<Z.length;++pe)Z[pe]=ee[pe];return Z}(T);L.writeFileSync(y,k)}},Gt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Gt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Gt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var ud={make:function(y,_){var S,T,L,k,B=new Pe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:y.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:y.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*y.axes.length}]);B.offsetToData=B.sizeOf();for(var Z=0;Z<y.axes.length;Z++)B.fields=B.fields.concat((S=Z,T=y.axes[Z],L=_,k=tu(T.name,L),[{name:"tag_"+S,type:"TAG",value:T.tag},{name:"minValue_"+S,type:"FIXED",value:T.minValue<<16},{name:"defaultValue_"+S,type:"FIXED",value:T.defaultValue<<16},{name:"maxValue_"+S,type:"FIXED",value:T.maxValue<<16},{name:"flags_"+S,type:"USHORT",value:0},{name:"nameID_"+S,type:"USHORT",value:k}]));for(var ee=0;ee<y.instances.length;ee++)B.fields=B.fields.concat(ad(ee,y.instances[ee],y.axes,_));return B},parse:function(y,_,S){var T=new ie.Parser(y,_),L=T.parseULong();ye.argument(L===65536,"Unsupported fvar table version.");var k=T.parseOffset16();T.skip("uShort",1);for(var B,Z,ee,pe,Te,Le=T.parseUShort(),ae=T.parseUShort(),et=T.parseUShort(),Ye=T.parseUShort(),He=[],Oe=0;Oe<Le;Oe++)He.push((B=y,Z=_+k+Oe*ae,ee=S,Te=pe=void 0,pe={},Te=new ie.Parser(B,Z),pe.tag=Te.parseTag(),pe.minValue=Te.parseFixed(),pe.defaultValue=Te.parseFixed(),pe.maxValue=Te.parseFixed(),Te.skip("uShort",1),pe.name=ee[Te.parseUShort()]||{},pe));for(var Be=[],ot=_+k+Le*ae,it=0;it<et;it++)Be.push(ld(y,ot+it*Ye,He,S));return{axes:He,instances:Be}}},kr=new Array(10);kr[1]=function(){var y=this.offset+this.relativeOffset,_=this.parseUShort();return _===1?{posFormat:1,coverage:this.parsePointer(se.coverage),value:this.parseValueRecord()}:_===2?{posFormat:2,coverage:this.parsePointer(se.coverage),values:this.parseValueRecordList()}:void ye.assert(!1,"0x"+y.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},kr[2]=function(){var y=this.offset+this.relativeOffset,_=this.parseUShort();ye.assert(_===1||_===2,"0x"+y.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var S=this.parsePointer(se.coverage),T=this.parseUShort(),L=this.parseUShort();if(_===1)return{posFormat:_,coverage:S,valueFormat1:T,valueFormat2:L,pairSets:this.parseList(se.pointer(se.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(T),value2:this.parseValueRecord(L)}})))};if(_===2){var k=this.parsePointer(se.classDef),B=this.parsePointer(se.classDef),Z=this.parseUShort(),ee=this.parseUShort();return{posFormat:_,coverage:S,valueFormat1:T,valueFormat2:L,classDef1:k,classDef2:B,class1Count:Z,class2Count:ee,classRecords:this.parseList(Z,se.list(ee,function(){return{value1:this.parseValueRecord(T),value2:this.parseValueRecord(L)}}))}}},kr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},kr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},kr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},kr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},kr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},kr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},kr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var cd=new Array(10),hd={parse:function(y,_){var S=new se(y,_=_||0),T=S.parseVersion(1);return ye.argument(T===1||T===1.1,"Unsupported GPOS table version "+T),T===1?{version:T,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(kr)}:{version:T,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(kr),variations:S.parseFeatureVariationsList()}},make:function(y){return new Pe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Pe.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new Pe.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new Pe.LookupList(y.lookups,cd)}])}},dd={parse:function(y,_){var S=new ie.Parser(y,_),T=S.parseUShort();if(T===0)return function(L){var k={};L.skip("uShort");var B=L.parseUShort();ye.argument(B===0,"Unsupported kern sub-table version."),L.skip("uShort",2);var Z=L.parseUShort();L.skip("uShort",3);for(var ee=0;ee<Z;ee+=1){var pe=L.parseUShort(),Te=L.parseUShort(),Le=L.parseShort();k[pe+","+Te]=Le}return k}(S);if(T===1)return function(L){var k={};L.skip("uShort"),1<L.parseULong()&&console.warn("Only the first kern subtable is supported."),L.skip("uLong");var B=255&L.parseUShort();if(L.skip("uShort"),B==0){var Z=L.parseUShort();L.skip("uShort",3);for(var ee=0;ee<Z;ee+=1){var pe=L.parseUShort(),Te=L.parseUShort(),Le=L.parseShort();k[pe+","+Te]=Le}}return k}(S);throw new Error("Unsupported kern table version ("+T+").")}},fd={parse:function(y,_,S,T){for(var L=new ie.Parser(y,_),k=T?L.parseUShort:L.parseULong,B=[],Z=0;Z<S+1;Z+=1){var ee=k.call(L);T&&(ee*=2),B.push(ee)}return B}};function pd(y,_){e("fs").readFile(y,function(S,T){if(S)return _(S.message);_(null,Rl(T))})}function md(y,_){var S=new XMLHttpRequest;S.open("get",y,!0),S.responseType="arraybuffer",S.onload=function(){return S.response?_(null,S.response):_("Font could not be loaded: "+S.statusText)},S.onerror=function(){_("Font could not be loaded")},S.send()}function ru(y,_){for(var S=[],T=12,L=0;L<_;L+=1){var k=ie.getTag(y,T),B=ie.getULong(y,T+4),Z=ie.getULong(y,T+8),ee=ie.getULong(y,T+12);S.push({tag:k,checksum:B,offset:Z,length:ee,compression:!1}),T+=16}return S}function nr(y,_){if(_.compression!=="WOFF")return{data:y,offset:_.offset};var S=new Uint8Array(y.buffer,_.offset+2,_.compressedLength-2),T=new Uint8Array(_.length);if(X(S,T),T.byteLength!==_.length)throw new Error("Decompression error: "+_.tag+" decompressed length doesn't match recorded length");return{data:new DataView(T.buffer,0),offset:0}}function Wo(y){var _,S,T,L,k,B,Z,ee,pe,Te,Le,ae,et,Ye,He=new Gt({empty:!0}),Oe=new DataView(y,0),Be=[],ot=ie.getTag(Oe,0);if(ot===String.fromCharCode(0,1,0,0)||ot==="true"||ot==="typ1")He.outlinesFormat="truetype",Be=ru(Oe,T=ie.getUShort(Oe,4));else if(ot==="OTTO")He.outlinesFormat="cff",Be=ru(Oe,T=ie.getUShort(Oe,4));else{if(ot!=="wOFF")throw new Error("Unsupported OpenType signature "+ot);var it=ie.getTag(Oe,4);if(it===String.fromCharCode(0,1,0,0))He.outlinesFormat="truetype";else{if(it!=="OTTO")throw new Error("Unsupported OpenType flavor "+ot);He.outlinesFormat="cff"}Be=function(Pt,er){for(var zt=[],Wt=44,Vr=0;Vr<er;Vr+=1){var ni=ie.getTag(Pt,Wt),jn=ie.getULong(Pt,Wt+4),Lr=ie.getULong(Pt,Wt+8),kn=ie.getULong(Pt,Wt+12),ii=void 0;ii=Lr<kn&&"WOFF",zt.push({tag:ni,offset:jn,compression:ii,compressedLength:Lr,length:kn}),Wt+=20}return zt}(Oe,T=ie.getUShort(Oe,12))}for(var St=0;St<T;St+=1){var dt=Be[St],gt=void 0;switch(dt.tag){case"cmap":gt=nr(Oe,dt),He.tables.cmap=U.parse(gt.data,gt.offset),He.encoding=new Ie(He.tables.cmap);break;case"cvt ":gt=nr(Oe,dt),Ye=new ie.Parser(gt.data,gt.offset),He.tables.cvt=Ye.parseShortList(dt.length/2);break;case"fvar":k=dt;break;case"fpgm":gt=nr(Oe,dt),Ye=new ie.Parser(gt.data,gt.offset),He.tables.fpgm=Ye.parseByteList(dt.length);break;case"head":gt=nr(Oe,dt),He.tables.head=Fe.parse(gt.data,gt.offset),He.unitsPerEm=He.tables.head.unitsPerEm,_=He.tables.head.indexToLocFormat;break;case"hhea":gt=nr(Oe,dt),He.tables.hhea=$e.parse(gt.data,gt.offset),He.ascender=He.tables.hhea.ascender,He.descender=He.tables.hhea.descender,He.numberOfHMetrics=He.tables.hhea.numberOfHMetrics;break;case"hmtx":pe=dt;break;case"ltag":gt=nr(Oe,dt),S=st.parse(gt.data,gt.offset);break;case"maxp":gt=nr(Oe,dt),He.tables.maxp=wt.parse(gt.data,gt.offset),He.numGlyphs=He.tables.maxp.numGlyphs;break;case"name":ae=dt;break;case"OS/2":gt=nr(Oe,dt),He.tables.os2=No.parse(gt.data,gt.offset);break;case"post":gt=nr(Oe,dt),He.tables.post=_l.parse(gt.data,gt.offset),He.glyphNames=new Me(He.tables.post);break;case"prep":gt=nr(Oe,dt),Ye=new ie.Parser(gt.data,gt.offset),He.tables.prep=Ye.parseByteList(dt.length);break;case"glyf":B=dt;break;case"loca":Le=dt;break;case"CFF ":L=dt;break;case"kern":Te=dt;break;case"GPOS":Z=dt;break;case"GSUB":ee=dt;break;case"meta":et=dt}}var Zt=nr(Oe,ae);if(He.tables.name=bl.parse(Zt.data,Zt.offset,S),He.names=He.tables.name,B&&Le){var At=_===0,Tt=nr(Oe,Le),Lt=fd.parse(Tt.data,Tt.offset,He.numGlyphs,At),kt=nr(Oe,B);He.glyphs=jl.parse(kt.data,kt.offset,Lt,He)}else{if(!L)throw new Error("Font doesn't contain TrueType or CFF outlines.");var It=nr(Oe,L);qe.parse(It.data,It.offset,He)}var Xt=nr(Oe,pe);if(ze.parse(Xt.data,Xt.offset,He.numberOfHMetrics,He.numGlyphs,He.glyphs),function(Pt){for(var er,zt=Pt.tables.cmap.glyphIndexMap,Wt=Object.keys(zt),Vr=0;Vr<Wt.length;Vr+=1){var ni=Wt[Vr],jn=zt[ni];(er=Pt.glyphs.get(jn)).addUnicode(parseInt(ni))}for(var Lr=0;Lr<Pt.glyphs.length;Lr+=1)er=Pt.glyphs.get(Lr),Pt.cffEncoding?Pt.isCIDFont?er.name="gid"+Lr:er.name=Pt.cffEncoding.charset[Lr]:Pt.glyphNames.names&&(er.name=Pt.glyphNames.glyphIndexToName(Lr))}(He),Te){var Nt=nr(Oe,Te);He.kerningPairs=dd.parse(Nt.data,Nt.offset)}else He.kerningPairs={};if(Z){var Dt=nr(Oe,Z);He.tables.gpos=hd.parse(Dt.data,Dt.offset),He.position.init()}if(ee){var Yt=nr(Oe,ee);He.tables.gsub=xl.parse(Yt.data,Yt.offset)}if(k){var Ut=nr(Oe,k);He.tables.fvar=ud.parse(Ut.data,Ut.offset,He.names)}if(et){var Qt=nr(Oe,et);He.tables.meta=wl.parse(Qt.data,Qt.offset),He.metas=He.tables.meta}return He}a.Font=Gt,a.Glyph=rt,a.Path=K,a.BoundingBox=$,a._parse=ie,a.parse=Wo,a.load=function(y,_){(typeof window=="undefined"?pd:md)(y,function(S,T){if(S)return _(S);var L;try{L=Wo(T)}catch(k){return _(k,null)}return _(null,L)})},a.loadSync=function(y){return Wo(Rl(e("fs").readFileSync(y)))},Object.defineProperty(a,"__esModule",{value:!0})}(typeof i=="object"&&n!==void 0?i:r.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],237:[function(e,n,i){(function(s){function r(d,p){for(var u=0,o=d.length-1;0<=o;o--){var l=d[o];l==="."?d.splice(o,1):l===".."?(d.splice(o,1),u++):u&&(d.splice(o,1),u--)}if(p)for(;u--;)d.unshift("..");return d}function a(d,p){if(d.filter)return d.filter(p);for(var u=[],o=0;o<d.length;o++)p(d[o],o,d)&&u.push(d[o]);return u}i.resolve=function(){for(var d="",p=!1,u=arguments.length-1;-1<=u&&!p;u--){var o=0<=u?arguments[u]:s.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");o&&(d=o+"/"+d,p=o.charAt(0)==="/")}return(p?"/":"")+(d=r(a(d.split("/"),function(l){return!!l}),!p).join("/"))||"."},i.normalize=function(d){var p=i.isAbsolute(d),u=c(d,-1)==="/";return(d=r(a(d.split("/"),function(o){return!!o}),!p).join("/"))||p||(d="."),d&&u&&(d+="/"),(p?"/":"")+d},i.isAbsolute=function(d){return d.charAt(0)==="/"},i.join=function(){var d=Array.prototype.slice.call(arguments,0);return i.normalize(a(d,function(p,u){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},i.relative=function(d,p){function u(v){for(var x=0;x<v.length&&v[x]==="";x++);for(var w=v.length-1;0<=w&&v[w]==="";w--);return w<x?[]:v.slice(x,w-x+1)}d=i.resolve(d).substr(1),p=i.resolve(p).substr(1);for(var o=u(d.split("/")),l=u(p.split("/")),h=Math.min(o.length,l.length),f=h,m=0;m<h;m++)if(o[m]!==l[m]){f=m;break}var g=[];for(m=f;m<o.length;m++)g.push("..");return(g=g.concat(l.slice(f))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(d){if(typeof d!="string"&&(d+=""),d.length===0)return".";for(var p=d.charCodeAt(0),u=p===47,o=-1,l=!0,h=d.length-1;1<=h;--h)if((p=d.charCodeAt(h))===47){if(!l){o=h;break}}else l=!1;return o===-1?u?"/":".":u&&o===1?"/":d.slice(0,o)},i.basename=function(d,p){var u=function(o){typeof o!="string"&&(o+="");var l,h=0,f=-1,m=!0;for(l=o.length-1;0<=l;--l)if(o.charCodeAt(l)===47){if(!m){h=l+1;break}}else f===-1&&(m=!1,f=l+1);return f===-1?"":o.slice(h,f)}(d);return p&&u.substr(-1*p.length)===p&&(u=u.substr(0,u.length-p.length)),u},i.extname=function(d){typeof d!="string"&&(d+="");for(var p=-1,u=0,o=-1,l=!0,h=0,f=d.length-1;0<=f;--f){var m=d.charCodeAt(f);if(m===47){if(l)continue;u=f+1;break}o===-1&&(l=!1,o=f+1),m===46?p===-1?p=f:h!==1&&(h=1):p!==-1&&(h=-1)}return p===-1||o===-1||h===0||h===1&&p===o-1&&p===u+1?"":d.slice(p,o)};var c="ab".substr(-1)==="b"?function(d,p,u){return d.substr(p,u)}:function(d,p,u){return p<0&&(p=d.length+p),d.substr(p,u)}}).call(this,e("_process"))},{_process:238}],238:[function(e,n,i){var s,r,a=n.exports={};function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function p(x){if(s===setTimeout)return setTimeout(x,0);if((s===c||!s)&&setTimeout)return s=setTimeout,setTimeout(x,0);try{return s(x,0)}catch{try{return s.call(null,x,0)}catch{return s.call(this,x,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:c}catch{s=c}try{r=typeof clearTimeout=="function"?clearTimeout:d}catch{r=d}})();var u,o=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?o=u.concat(o):h=-1,o.length&&m())}function m(){if(!l){var x=p(f);l=!0;for(var w=o.length;w;){for(u=o,o=[];++h<w;)u&&u[h].run();h=-1,w=o.length}u=null,l=!1,function(M){if(r===clearTimeout)return clearTimeout(M);if((r===d||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(M);try{r(M)}catch{try{return r.call(null,M)}catch{return r.call(this,M)}}}(x)}}function g(x,w){this.fun=x,this.array=w}function v(){}a.nextTick=function(x){var w=new Array(arguments.length-1);if(1<arguments.length)for(var M=1;M<arguments.length;M++)w[M-1]=arguments[M];o.push(new g(x,w)),o.length!==1||l||p(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(x){return[]},a.binding=function(x){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(x){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],239:[function(e,n,i){(function(s){if(!s.fetch){var r="URLSearchParams"in s,a="Symbol"in s&&"iterator"in Symbol,c="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in s,p="ArrayBuffer"in s;if(p)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=function(O){return O&&DataView.prototype.isPrototypeOf(O)},l=ArrayBuffer.isView||function(O){return O&&-1<u.indexOf(Object.prototype.toString.call(O))};x.prototype.append=function(O,j){O=m(O),j=g(j);var N=this.map[O];this.map[O]=N?N+","+j:j},x.prototype.delete=function(O){delete this.map[m(O)]},x.prototype.get=function(O){return O=m(O),this.has(O)?this.map[O]:null},x.prototype.has=function(O){return this.map.hasOwnProperty(m(O))},x.prototype.set=function(O,j){this.map[m(O)]=g(j)},x.prototype.forEach=function(O,j){for(var N in this.map)this.map.hasOwnProperty(N)&&O.call(j,this.map[N],N,this)},x.prototype.keys=function(){var O=[];return this.forEach(function(j,N){O.push(N)}),v(O)},x.prototype.values=function(){var O=[];return this.forEach(function(j){O.push(j)}),v(O)},x.prototype.entries=function(){var O=[];return this.forEach(function(j,N){O.push([N,j])}),v(O)},a&&(x.prototype[Symbol.iterator]=x.prototype.entries);var h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},I.call(R.prototype),I.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},D.error=function(){var O=new D(null,{status:0,statusText:""});return O.type="error",O};var f=[301,302,303,307,308];D.redirect=function(O,j){if(f.indexOf(j)===-1)throw new RangeError("Invalid status code");return new D(null,{status:j,headers:{location:O}})},s.Headers=x,s.Request=R,s.Response=D,s.fetch=function(O,j){return new Promise(function(N,q){var X=new R(O,j),V=new XMLHttpRequest;V.onload=function(){var $,K,_e={status:V.status,statusText:V.statusText,headers:($=V.getAllResponseHeaders()||"",K=new x,$.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ye){var fe=ye.split(":"),de=fe.shift().trim();if(de){var Ee=fe.join(":").trim();K.append(de,Ee)}}),K)};_e.url="responseURL"in V?V.responseURL:_e.headers.get("X-Request-URL");var me="response"in V?V.response:V.responseText;N(new D(me,_e))},V.onerror=function(){q(new TypeError("Network request failed"))},V.ontimeout=function(){q(new TypeError("Network request failed"))},V.open(X.method,X.url,!0),X.credentials==="include"?V.withCredentials=!0:X.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&c&&(V.responseType="blob"),X.headers.forEach(function($,K){V.setRequestHeader(K,$)}),V.send(X._bodyInit===void 0?null:X._bodyInit)})},s.fetch.polyfill=!0}function m(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function g(O){return typeof O!="string"&&(O=String(O)),O}function v(O){var j={next:function(){var N=O.shift();return{done:N===void 0,value:N}}};return a&&(j[Symbol.iterator]=function(){return j}),j}function x(O){this.map={},O instanceof x?O.forEach(function(j,N){this.append(N,j)},this):Array.isArray(O)?O.forEach(function(j){this.append(j[0],j[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(j){this.append(j,O[j])},this)}function w(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function M(O){return new Promise(function(j,N){O.onload=function(){j(O.result)},O.onerror=function(){N(O.error)}})}function A(O){var j=new FileReader,N=M(j);return j.readAsArrayBuffer(O),N}function E(O){if(O.slice)return O.slice(0);var j=new Uint8Array(O.byteLength);return j.set(new Uint8Array(O)),j.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(O){if(this._bodyInit=O)if(typeof O=="string")this._bodyText=O;else if(c&&Blob.prototype.isPrototypeOf(O))this._bodyBlob=O;else if(d&&FormData.prototype.isPrototypeOf(O))this._bodyFormData=O;else if(r&&URLSearchParams.prototype.isPrototypeOf(O))this._bodyText=O.toString();else if(p&&c&&o(O))this._bodyArrayBuffer=E(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(O)&&!l(O))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=E(O)}else this._bodyText="";this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var O=w(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var O,j,N,q=w(this);if(q)return q;if(this._bodyBlob)return O=this._bodyBlob,j=new FileReader,N=M(j),j.readAsText(O),N;if(this._bodyArrayBuffer)return Promise.resolve(function(X){for(var V=new Uint8Array(X),$=new Array(V.length),K=0;K<V.length;K++)$[K]=String.fromCharCode(V[K]);return $.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(O,j){var N,q,X=(j=j||{}).body;if(O instanceof R){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,j.headers||(this.headers=new x(O.headers)),this.method=O.method,this.mode=O.mode,X||O._bodyInit==null||(X=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=j.credentials||this.credentials||"omit",!j.headers&&this.headers||(this.headers=new x(j.headers)),this.method=(N=j.method||this.method||"GET",q=N.toUpperCase(),-1<h.indexOf(q)?q:N),this.mode=j.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&X)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(X)}function P(O){var j=new FormData;return O.trim().split("&").forEach(function(N){if(N){var q=N.split("="),X=q.shift().replace(/\+/g," "),V=q.join("=").replace(/\+/g," ");j.append(decodeURIComponent(X),decodeURIComponent(V))}}),j}function D(O,j){j=j||{},this.type="default",this.status=j.status===void 0?200:j.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in j?j.statusText:"OK",this.headers=new x(j.headers),this.url=j.url||"",this._initBody(O)}})(typeof self!="undefined"?self:this)},{}],240:[function(e,n,i){e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=c(e("../core/main")),a=c(e("../color/color_conversion"));function c(o){return o&&o.__esModule?o:{default:o}}var d=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];r.default.prototype._rgbColorName=function(o){var l=a.default._rgbaToHSBA(o);return function(h){var f;if(h[0]!==0){h[0]=Math.round(100*h[0]);var m=h[0].toString().split(""),g=m.length-1;m[g]=parseInt(m[g]),m[g]<2.5?m[g]=0:2.5<=m[g]&&m[g]<7.5&&(m[g]=5),m.length===2?(m[0]=parseInt(m[0]),7.5<=m[g]&&(m[g]=0,m[0]=m[0]+1),h[0]=10*m[0]+m[1]):7.5<=m[g]?h[0]=10:h[0]=m[g]}h[2]=h[2]/255;for(var v=h.length-1;1<=v;v--)h[v]<=.25?h[v]=0:.25<h[v]&&h[v]<.75?h[v]=.5:h[v]=1;if(h[0]===0&&h[1]===0&&h[2]===1){for(var x=2;0<=x;x--)s[x]=Math.round(1e4*s[x])/1e4;for(var w=0;w<d.length;w++){if(d[w].h===s[0]&&d[w].s===s[1]&&d[w].b===s[2]){f=d[w].name;break}f="white"}}else for(var M=0;M<p.length;M++)if(p[M].h===h[0]&&p[M].s===h[1]&&p[M].b===h[2]){f=p[M].name;break}return f}([(s=l)[0],l[1],l[2]])};var u=r.default;i.default=u},{"../color/color_conversion":246,"../core/main":260,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.split":188}],241:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},a="_Description",c="_fallbackDesc",d="_fallbackTable",p="_Label",u="_labelDesc",o="_labelTable";function l(f){if(f==="label"||f==="fallback")throw new Error("description should not be LABEL or FALLBACK");return f.endsWith(".")||f.endsWith(";")||f.endsWith(",")||f.endsWith("?")||f.endsWith("!")||(f+="."),f}r.default.prototype.describe=function(f,m){if(r.default._validateParameters("describe",arguments),typeof f=="string"){var g=this.canvas.id;f=l(f),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==f&&(this.descriptions.fallback.innerHTML=f):this._describeHTML("fallback",f),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==f&&(this.descriptions.label.innerHTML=f):this._describeHTML("label",f))}},r.default.prototype.describeElement=function(f,m,g){if(r.default._validateParameters("describeElement",arguments),typeof m=="string"&&typeof f=="string"){var v=this.canvas.id;m=l(m);var x=function(M){if(M==="label"||M==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return M.endsWith(".")||M.endsWith(";")||M.endsWith(",")?M=M.replace(/.$/,":"):M.endsWith(":")||(M+=":"),M}(f);f=f.replace(/[^a-zA-Z0-9]/g,"");var w='<th scope="row">'.concat(x,"</th><td>").concat(m,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[f]?this.descriptions.fallbackElements[f].innerHTML!==w&&(this.descriptions.fallbackElements[f].innerHTML=w):this._describeElementHTML("fallback",f,w),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[f]?this.descriptions.labelElements[f].innerHTML!==w&&(this.descriptions.labelElements[f].innerHTML=w):this._describeElementHTML("label",f,w))}},r.default.prototype._describeHTML=function(f,m){var g=this.canvas.id;if(f==="fallback"){if(this.dummyDOM.querySelector("#".concat(g+a)))this.dummyDOM.querySelector("#"+g+d).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+c,'"></p>'));else{var v='<div id="'.concat(g).concat(a,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(c,'"></p></div>');this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#".concat(g)).innerHTML=v}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(c)),void(this.descriptions.fallback.innerHTML=m)}if(f==="label"){if(this.dummyDOM.querySelector("#".concat(g+p)))this.dummyDOM.querySelector("#".concat(g+o))&&this.dummyDOM.querySelector("#".concat(g+o)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(u,'"></p>'));else{var x='<div id="'.concat(g).concat(p,'" class="p5Label"><p id="').concat(g).concat(u,'"></p></div>');this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",x)}return this.descriptions.label=this.dummyDOM.querySelector("#"+g+u),void(this.descriptions.label.innerHTML=m)}},r.default.prototype._describeElementHTML=function(f,m,g){var v=this.canvas.id;if(f==="fallback"){if(this.dummyDOM.querySelector("#".concat(v+a)))this.dummyDOM.querySelector("#"+v+d)||this.dummyDOM.querySelector("#"+v+c).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(d,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var x='<div id="'.concat(v).concat(a,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(d,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+v).innerHTML=x}var w=document.createElement("tr");return w.id=v+"_fte_"+m,this.dummyDOM.querySelector("#"+v+d).appendChild(w),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(m)),void(this.descriptions.fallbackElements[m].innerHTML=g)}if(f==="label"){if(this.dummyDOM.querySelector("#".concat(v+p)))this.dummyDOM.querySelector("#".concat(v+o))||this.dummyDOM.querySelector("#"+v+u).insertAdjacentHTML("afterend",'<table id="'.concat(v+o,'"></table>'));else{var M='<div id="'.concat(v).concat(p,'" class="p5Label"><table id="').concat(v).concat(o,'"></table></div>');this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",M):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",M)}var A=document.createElement("tr");A.id=v+"_lte_"+m,this.dummyDOM.querySelector("#"+v+o).appendChild(A),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=g}};var h=r.default;i.default=h},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.ends-with":181,"core-js/modules/es.string.replace":186}],242:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype._updateGridOutput=function(c){if(this.dummyDOM.querySelector("#".concat(c,"_summary"))){var d=this._accessibleOutputs[c],p=function(l,h){var f="",m="",g=0;for(var v in h){var x=0;for(var w in h[v]){var M='<li id="'.concat(l,"shape").concat(g,'">').concat(h[v][w].color," ").concat(v,",");v==="line"?M+=" location = ".concat(h[v][w].pos,", length = ").concat(h[v][w].length," pixels"):(M+=" location = ".concat(h[v][w].pos),v!=="point"&&(M+=", area = ".concat(h[v][w].area," %")),M+="</li>"),f+=M,x++,g++}m=1<x?"".concat(m," ").concat(x," ").concat(v,"s"):"".concat(m," ").concat(x," ").concat(v)}return{numShapes:[g,m],details:f}}(c,this.ingredients.shapes),u=function(l,h,f,m){var g="".concat(h," canvas, ").concat(f," by ").concat(m," pixels, contains ").concat(l[0]);return g=l[0]===1?"".concat(g," shape: ").concat(l[1]):"".concat(g," shapes: ").concat(l[1]),g}(p.numShapes,this.ingredients.colors.background,this.width,this.height),o=function(l,h){var f=0,m="",g=Array.apply(null,Array(10)).map(function(){});for(var v in g)g[v]=Array.apply(null,Array(10)).map(function(){});for(var x in h)for(var w in h[x]){var M=void 0;M=x!=="line"?'<a href="#'.concat(l,"shape").concat(f,'">').concat(h[x][w].color," ").concat(x,"</a>"):'<a href="#'.concat(l,"shape").concat(f,'">').concat(h[x][w].color," ").concat(x," midpoint</a>"),g[h[x][w].loc.locY][h[x][w].loc.locX]?g[h[x][w].loc.locY][h[x][w].loc.locX]=g[h[x][w].loc.locY][h[x][w].loc.locX]+"  "+M:g[h[x][w].loc.locY][h[x][w].loc.locX]=M,f++}for(var A in g){var E="<tr>";for(var I in g[A])E+="<td>",g[A][I]!==void 0&&(E+=g[A][I]),E+="</td>";m=m+E+"</tr>"}return m}(c,this.ingredients.shapes);u!==d.summary.innerHTML&&(d.summary.innerHTML=u),o!==d.map.innerHTML&&(d.map.innerHTML=o),p.details!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=p.details),this._accessibleOutputs[c]=d}};var a=r.default;i.default=a},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.map":159}],243:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(p,u,o){return p[0]<.4*u?p[1]<.4*o?"top left":p[1]>.6*o?"bottom left":"mid left":p[0]>.6*u?p[1]<.4*o?"top right":p[1]>.6*o?"bottom right":"mid right":p[1]<.4*o?"top middle":p[1]>.6*o?"bottom middle":"middle"}function c(p,u,o){var l=Math.floor(p[0]/u*10),h=Math.floor(p[1]/o*10);return l===10&&--l,h===10&&--h,{locX:l,locY:h}}r.default.prototype.textOutput=function(p){r.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),p===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},r.default.prototype.gridOutput=function(p){r.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),p===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},r.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},r.default.prototype._createOutput=function(p,u){var o,l,h,f=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(f).parentNode);var m="";u==="Fallback"?(o=f+p,l=f+"accessibleOutput",this.dummyDOM.querySelector("#".concat(l))||(this.dummyDOM.querySelector("#".concat(f,"_Description"))?this.dummyDOM.querySelector("#".concat(f,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(l,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(f)).innerHTML='<div id="'.concat(l,'" role="region" aria-label="Canvas Outputs"></div>'))):u==="Label"&&(o=f+p+(m=u),l=f+"accessibleOutput"+u,this.dummyDOM.querySelector("#".concat(l))||(this.dummyDOM.querySelector("#".concat(f,"_Label"))?this.dummyDOM.querySelector("#".concat(f,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(l,'"></div>')):this.dummyDOM.querySelector("#".concat(f)).insertAdjacentHTML("afterend",'<div id="'.concat(l,'"></div>')))),this._accessibleOutputs[o]={},p==="textOutput"?(m="#".concat(f,"gridOutput").concat(m),h='<div id="'.concat(o,'">Text Output<div id="').concat(o,'Summary" aria-label="text output summary"><p id="').concat(o,'_summary"></p><ul id="').concat(o,'_list"></ul></div><table id="').concat(o,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#".concat(l)).innerHTML=h,this._accessibleOutputs[o].list=this.dummyDOM.querySelector("#".concat(o,"_list"))):p==="gridOutput"&&(m="#".concat(f,"textOutput").concat(m),h='<div id="'.concat(o,'">Grid Output<p id="').concat(o,'_summary" aria-label="grid output summary"><table id="').concat(o,'_map" summary="grid output content"></table><ul id="').concat(o,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("afterend",h):this.dummyDOM.querySelector("#".concat(l)).innerHTML=h,this._accessibleOutputs[o].map=this.dummyDOM.querySelector("#".concat(o,"_map"))),this._accessibleOutputs[o].shapeDetails=this.dummyDOM.querySelector("#".concat(o,"_shapeDetails")),this._accessibleOutputs[o].summary=this.dummyDOM.querySelector("#".concat(o,"_summary"))},r.default.prototype._updateAccsOutput=function(){var p=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(p+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(p+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(p+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(p+"gridOutputLabel"))},r.default.prototype._accsBackground=function(p){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==p&&(this.ingredients.colors.backgroundRGBA=p,this.ingredients.colors.background=this._rgbColorName(p))},r.default.prototype._accsCanvasColors=function(p,u){p==="fill"?this.ingredients.colors.fillRGBA!==u&&(this.ingredients.colors.fillRGBA=u,this.ingredients.colors.fill=this._rgbColorName(u)):p==="stroke"&&this.ingredients.colors.strokeRGBA!==u&&(this.ingredients.colors.strokeRGBA=u,this.ingredients.colors.stroke=this._rgbColorName(u))},r.default.prototype._accsOutput=function(p,u){p==="ellipse"&&u[2]===u[3]?p="circle":p==="rectangle"&&u[2]===u[3]&&(p="square");var o={},l=!0,h=function(v,x){var w,M;return M=v==="rectangle"||v==="ellipse"||v==="arc"||v==="circle"||v==="square"?(w=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):v==="triangle"?(w=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):v==="quadrilateral"?(w=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):v==="line"?(w=(x[0]+x[2])/2,(x[1]+x[3])/2):(w=x[0],x[1]),[w,M]}(p,u);if(p==="line"){o.color=this.ingredients.colors.stroke,o.length=Math.round(this.dist(u[0],u[1],u[2],u[3]));var f=a([u[0],[1]],this.width,this.height),m=a([u[2],[3]],this.width,this.height);o.loc=c(h,this.width,this.height),o.pos=f===m?"at ".concat(f):"from ".concat(f," to ").concat(m)}else p==="point"?o.color=this.ingredients.colors.stroke:(o.color=this.ingredients.colors.fill,o.area=function(v,x,w,M){var A=0;if(v==="arc"){var E=((x[5]-x[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(A=E*x[2]*x[3]/8,x[6]==="open"||x[6]==="chord"){var I=x[0],R=x[1],P=x[0]+x[2]/2*Math.cos(x[4]).toFixed(2),D=x[1]+x[3]/2*Math.sin(x[4]).toFixed(2),O=x[0]+x[2]/2*Math.cos(x[5]).toFixed(2),j=x[1]+x[3]/2*Math.sin(x[5]).toFixed(2),N=Math.abs(I*(D-j)+P*(j-R)+O*(R-D))/2;E>Math.PI?A+=N:A-=N}}else v==="ellipse"||v==="circle"?A=3.14*x[2]/2*x[3]/2:v==="line"||v==="point"?A=0:v==="quadrilateral"?A=Math.abs((x[6]+x[0])*(x[7]-x[1])+(x[0]+x[2])*(x[1]-x[3])+(x[2]+x[4])*(x[3]-x[5])+(x[4]+x[6])*(x[5]-x[7]))/2:v==="rectangle"||v==="square"?A=x[2]*x[3]:v==="triangle"&&(A=Math.abs(x[0]*(x[3]-x[5])+x[2]*(x[5]-x[1])+x[4]*(x[1]-x[3]))/2);return Math.round(100*A/(w*M))}(p,u,this.width,this.height)),o.pos=a(h,this.width,this.height),o.loc=c(h,this.width,this.height);if(this.ingredients.shapes[p]){if(this.ingredients.shapes[p]!==[o]){for(var g in this.ingredients.shapes[p])JSON.stringify(this.ingredients.shapes[p][g])===JSON.stringify(o)&&(l=!1);l===!0&&this.ingredients.shapes[p].push(o)}}else this.ingredients.shapes[p]=[o]};var d=r.default;i.default=d},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.map":159,"core-js/modules/es.number.to-fixed":169}],244:[function(e,n,i){e("core-js/modules/es.array.concat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype._updateTextOutput=function(c){if(this.dummyDOM.querySelector("#".concat(c,"_summary"))){var d=this._accessibleOutputs[c],p=function(l,h){var f="",m=0;for(var g in h)for(var v in h[g]){var x='<li><a href="#'.concat(l,"shape").concat(m,'">').concat(h[g][v].color," ").concat(g,"</a>");g==="line"?x+=", ".concat(h[g][v].pos,", ").concat(h[g][v].length," pixels long.</li>"):(x+=", at ".concat(h[g][v].pos),g!=="point"&&(x+=", covering ".concat(h[g][v].area,"% of the canvas")),x+=".</li>"),f+=x,m++}return{numShapes:m,listShapes:f}}(c,this.ingredients.shapes),u=function(l,h,f,m){var g="Your output is a, ".concat(f," by ").concat(m," pixels, ").concat(h," canvas containing the following");return g=l===1?"".concat(g," shape:"):"".concat(g," ").concat(l," shapes:"),g}(p.numShapes,this.ingredients.colors.background,this.width,this.height),o=function(l,h){var f="",m=0;for(var g in h)for(var v in h[g]){var x='<tr id="'.concat(l,"shape").concat(m,'"><th>').concat(h[g][v].color," ").concat(g,"</th>");g==="line"?x+="<td>location = ".concat(h[g][v].pos,"</td><td>length = ").concat(h[g][v].length," pixels</td></tr>"):(x+="<td>location = ".concat(h[g][v].pos,"</td>"),g!=="point"&&(x+="<td> area = ".concat(h[g][v].area,"%</td>")),x+="</tr>"),f+=x,m++}return f}(c,this.ingredients.shapes);u!==d.summary.innerHTML&&(d.summary.innerHTML=u),p.listShapes!==d.list.innerHTML&&(d.list.innerHTML=p.listShapes),o!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=o),this._accessibleOutputs[c]=d}};var a=r.default;i.default=a},{"../core/main":260,"core-js/modules/es.array.concat":148}],245:[function(e,n,i){var s,r=(s=e("./core/main"))&&s.__esModule?s:{default:s};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),n.exports=r.default},{"./accessibility/color_namer":240,"./accessibility/describe":241,"./accessibility/gridOutput":242,"./accessibility/outputs":243,"./accessibility/textOutput":244,"./color/color_conversion":246,"./color/creating_reading":247,"./color/p5.Color":248,"./color/setting":249,"./core/constants":250,"./core/environment":251,"./core/friendly_errors/fes_core":252,"./core/friendly_errors/file_errors":253,"./core/friendly_errors/stacktrace":254,"./core/friendly_errors/validate_params":255,"./core/helpers":256,"./core/init":257,"./core/legacy":259,"./core/main":260,"./core/p5.Element":261,"./core/p5.Graphics":262,"./core/p5.Renderer":263,"./core/p5.Renderer2D":264,"./core/preload":265,"./core/rendering":266,"./core/shape/2d_primitives":267,"./core/shape/attributes":268,"./core/shape/curves":269,"./core/shape/vertex":270,"./core/shim":271,"./core/structure":272,"./core/transform":273,"./data/local_storage.js":274,"./data/p5.TypedDict":275,"./dom/dom":276,"./events/acceleration":277,"./events/keyboard":278,"./events/mouse":279,"./events/touch":280,"./image/filters":281,"./image/image":282,"./image/loading_displaying":283,"./image/p5.Image":284,"./image/pixels":285,"./io/files":286,"./io/p5.Table":287,"./io/p5.TableRow":288,"./io/p5.XML":289,"./math/calculation":290,"./math/math":291,"./math/noise":292,"./math/p5.Vector":293,"./math/random":294,"./math/trigonometry":295,"./typography/attributes":296,"./typography/loading_displaying":297,"./typography/p5.Font":298,"./utilities/array_functions":299,"./utilities/conversion":300,"./utilities/string_functions":301,"./utilities/time_date":302,"./webgl/3d_primitives":303,"./webgl/interaction":304,"./webgl/light":305,"./webgl/loading":306,"./webgl/material":307,"./webgl/p5.Camera":308,"./webgl/p5.Geometry":309,"./webgl/p5.Matrix":310,"./webgl/p5.RenderBuffer":311,"./webgl/p5.RendererGL":314,"./webgl/p5.RendererGL.Immediate":312,"./webgl/p5.RendererGL.Retained":313,"./webgl/p5.Shader":315,"./webgl/p5.Texture":316,"./webgl/text":317}],246:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.ColorConversion={},r.default.ColorConversion._hsbaToHSLA=function(c){var d=c[0],p=c[1],u=c[2],o=(2-p)*u/2;return o!=0&&(o==1?p=0:o<.5?p/=2-p:p=p*u/(2-2*o)),[d,p,o,c[3]]},r.default.ColorConversion._hsbaToRGBA=function(c){var d=6*c[0],p=c[1],u=c[2],o=[];if(p===0)o=[u,u,u,c[3]];else{var l,h,f,m=Math.floor(d),g=u*(1-p),v=u*(1-p*(d-m)),x=u*(1-p*(1+m-d));f=m===1?(l=v,h=u,g):m===2?(l=g,h=u,x):m===3?(l=g,h=v,u):m===4?(l=x,h=g,u):m===5?(l=u,h=g,v):(l=u,h=x,g),o=[l,h,f,c[3]]}return o},r.default.ColorConversion._hslaToHSBA=function(c){var d,p=c[0],u=c[1],o=c[2];return[p,u=2*((d=o<.5?(1+u)*o:o+u-o*u)-o)/d,d,c[3]]},r.default.ColorConversion._hslaToRGBA=function(c){var d=6*c[0],p=c[1],u=c[2],o=[];if(p===0)o=[u,u,u,c[3]];else{var l,h=2*u-(l=u<.5?(1+p)*u:u+p-u*p),f=function(m,g,v){return m<0?m+=6:6<=m&&(m-=6),m<1?g+(v-g)*m:m<3?v:m<4?g+(v-g)*(4-m):g};o=[f(2+d,h,l),f(d,h,l),f(d-2,h,l),c[3]]}return o},r.default.ColorConversion._rgbaToHSBA=function(c){var d,p,u=c[0],o=c[1],l=c[2],h=Math.max(u,o,l),f=h-Math.min(u,o,l);return f==0?p=d=0:(p=f/h,u===h?d=(o-l)/f:o===h?d=2+(l-u)/f:l===h&&(d=4+(u-o)/f),d<0?d+=6:6<=d&&(d-=6)),[d/6,p,h,c[3]]},r.default.ColorConversion._rgbaToHSLA=function(c){var d,p,u=c[0],o=c[1],l=c[2],h=Math.max(u,o,l),f=Math.min(u,o,l),m=h+f,g=h-f;return g==0?p=d=0:(p=m<1?g/m:g/(2-m),u===h?d=(o-l)/g:o===h?d=2+(l-u)/g:l===h&&(d=4+(u-o)/g),d<0?d+=6:6<=d&&(d-=6)),[d/6,p,m/2,c[3]]};var a=r.default.ColorConversion;i.default=a},{"../core/main":260}],247:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.alpha=function(u){return a.default._validateParameters("alpha",arguments),this.color(u)._getAlpha()},a.default.prototype.blue=function(u){return a.default._validateParameters("blue",arguments),this.color(u)._getBlue()},a.default.prototype.brightness=function(u){return a.default._validateParameters("brightness",arguments),this.color(u)._getBrightness()},a.default.prototype.color=function(){if(a.default._validateParameters("color",arguments),arguments[0]instanceof a.default.Color)return arguments[0];var u=arguments[0]instanceof Array?arguments[0]:arguments;return new a.default.Color(this,u)},a.default.prototype.green=function(u){return a.default._validateParameters("green",arguments),this.color(u)._getGreen()},a.default.prototype.hue=function(u){return a.default._validateParameters("hue",arguments),this.color(u)._getHue()},a.default.prototype.lerpColor=function(u,o,l){a.default._validateParameters("lerpColor",arguments);var h,f,m,g,v,x,w=this._colorMode,M=this._colorMaxes;if(w===c.RGB)v=u.levels.map(function(A){return A/255}),x=o.levels.map(function(A){return A/255});else if(w===c.HSB)u._getBrightness(),o._getBrightness(),v=u.hsba,x=o.hsba;else{if(w!==c.HSL)throw new Error("".concat(w,"cannot be used for interpolation."));u._getLightness(),o._getLightness(),v=u.hsla,x=o.hsla}return l=Math.max(Math.min(l,1),0),this.lerp===void 0&&(this.lerp=function(A,E,I){return I*(E-A)+A}),h=this.lerp(v[0],x[0],l),f=this.lerp(v[1],x[1],l),m=this.lerp(v[2],x[2],l),g=this.lerp(v[3],x[3],l),h*=M[w][0],f*=M[w][1],m*=M[w][2],g*=M[w][3],this.color(h,f,m,g)},a.default.prototype.lightness=function(u){return a.default._validateParameters("lightness",arguments),this.color(u)._getLightness()},a.default.prototype.red=function(u){return a.default._validateParameters("red",arguments),this.color(u)._getRed()},a.default.prototype.saturation=function(u){return a.default._validateParameters("saturation",arguments),this.color(u)._getSaturation()};var p=a.default;i.default=p},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"./p5.Color":248,"core-js/modules/es.array.map":159}],248:[function(e,n,i){function s(v){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("../core/main")),a=function(v){if(v&&v.__esModule)return v;if(v===null||s(v)!=="object"&&typeof v!="function")return{default:v};var x=d();if(x&&x.has(v))return x.get(v);var w={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in v)if(Object.prototype.hasOwnProperty.call(v,A)){var E=M?Object.getOwnPropertyDescriptor(v,A):null;E&&(E.get||E.set)?Object.defineProperty(w,A,E):w[A]=v[A]}return w.default=v,x&&x.set(v,w),w}(e("../core/constants")),c=p(e("./color_conversion"));function d(){if(typeof WeakMap!="function")return null;var v=new WeakMap;return d=function(){return v},v}function p(v){return v&&v.__esModule?v:{default:v}}r.default.Color=function(v,x){if(this._storeModeAndMaxes(v._colorMode,v._colorMaxes),this.mode!==a.RGB&&this.mode!==a.HSL&&this.mode!==a.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=r.default.Color._parseInputs.apply(this,x),this._calculateLevels(),this},r.default.Color.prototype.toString=function(v){var x=this.levels,w=this._array,M=w[3];switch(v){case"#rrggbb":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16));case"#rrggbbaa":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16),x[3]<16?"0".concat(x[3].toString(16)):x[3].toString(16));case"#rgb":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16),Math.round(15*w[3]).toString(16));case"rgb":return"rgb(".concat(x[0],", ",x[1],", ",x[2],")");case"rgb%":return"rgb(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%, ",(100*w[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],", ",M,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],", ",M,")");case"hsla%":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(x[0],",",x[1],",",x[2],",",M,")")}},r.default.Color.prototype.setRed=function(v){this._array[0]=v/this.maxes[a.RGB][0],this._calculateLevels()},r.default.Color.prototype.setGreen=function(v){this._array[1]=v/this.maxes[a.RGB][1],this._calculateLevels()},r.default.Color.prototype.setBlue=function(v){this._array[2]=v/this.maxes[a.RGB][2],this._calculateLevels()},r.default.Color.prototype.setAlpha=function(v){this._array[3]=v/this.maxes[this.mode][3],this._calculateLevels()},r.default.Color.prototype._calculateLevels=function(){for(var v=this._array,x=this.levels=new Array(v.length),w=v.length-1;0<=w;--w)x[w]=Math.round(255*v[w])},r.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},r.default.Color.prototype._storeModeAndMaxes=function(v,x){this.mode=v,this.maxes=x},r.default.Color.prototype._getMode=function(){return this.mode},r.default.Color.prototype._getMaxes=function(){return this.maxes},r.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[a.RGB][2]},r.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[a.HSB][2]},r.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[a.RGB][1]},r.default.Color.prototype._getHue=function(){return this.mode===a.HSB?(this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[a.HSB][0]):(this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[a.HSL][0])},r.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[a.HSL][2]},r.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[a.RGB][0]},r.default.Color.prototype._getSaturation=function(){return this.mode===a.HSB?(this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[a.HSB][1]):(this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[a.HSL][1])};var u={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},o=/\s*/,l=/(\d{1,3})/,h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,f=new RegExp("".concat(h.source,"%")),m={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",l.source,",",l.source,",",l.source,"\\)$"].join(o.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(o.source),"i"),RGBA:new RegExp(["^rgba\\(",l.source,",",l.source,",",l.source,",",h.source,"\\)$"].join(o.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",h.source,"\\)$"].join(o.source),"i"),HSL:new RegExp(["^hsl\\(",l.source,",",f.source,",",f.source,"\\)$"].join(o.source),"i"),HSLA:new RegExp(["^hsla\\(",l.source,",",f.source,",",f.source,",",h.source,"\\)$"].join(o.source),"i"),HSB:new RegExp(["^hsb\\(",l.source,",",f.source,",",f.source,"\\)$"].join(o.source),"i"),HSBA:new RegExp(["^hsba\\(",l.source,",",f.source,",",f.source,",",h.source,"\\)$"].join(o.source),"i")};r.default.Color._parseInputs=function(v,x,w,M){var A,E=arguments.length,I=this.mode,R=this.maxes[I],P=[];if(3<=E){for(P[0]=v/R[0],P[1]=x/R[1],P[2]=w/R[2],P[3]=typeof M=="number"?M/R[3]:1,A=P.length-1;0<=A;--A){var D=P[A];D<0?P[A]=0:1<D&&(P[A]=1)}return I===a.HSL?c.default._hslaToRGBA(P):I===a.HSB?c.default._hsbaToRGBA(P):P}if(E===1&&typeof v=="string"){var O=v.trim().toLowerCase();if(u[O])return r.default.Color._parseInputs.call(this,u[O]);if(m.HEX3.test(O))return(P=m.HEX3.exec(O).slice(1).map(function(j){return parseInt(j+j,16)/255}))[3]=1,P;if(m.HEX6.test(O))return(P=m.HEX6.exec(O).slice(1).map(function(j){return parseInt(j,16)/255}))[3]=1,P;if(m.HEX4.test(O))return P=m.HEX4.exec(O).slice(1).map(function(j){return parseInt(j+j,16)/255});if(m.HEX8.test(O))return P=m.HEX8.exec(O).slice(1).map(function(j){return parseInt(j,16)/255});if(m.RGB.test(O))return(P=m.RGB.exec(O).slice(1).map(function(j){return j/255}))[3]=1,P;if(m.RGB_PERCENT.test(O))return(P=m.RGB_PERCENT.exec(O).slice(1).map(function(j){return parseFloat(j)/100}))[3]=1,P;if(m.RGBA.test(O))return P=m.RGBA.exec(O).slice(1).map(function(j,N){return N===3?parseFloat(j):j/255});if(m.RGBA_PERCENT.test(O))return P=m.RGBA_PERCENT.exec(O).slice(1).map(function(j,N){return N===3?parseFloat(j):parseFloat(j)/100});if(m.HSL.test(O)?(P=m.HSL.exec(O).slice(1).map(function(j,N){return N===0?parseInt(j,10)/360:parseInt(j,10)/100}))[3]=1:m.HSLA.test(O)&&(P=m.HSLA.exec(O).slice(1).map(function(j,N){return N===0?parseInt(j,10)/360:N===3?parseFloat(j):parseInt(j,10)/100})),(P=P.map(function(j){return Math.max(Math.min(j,1),0)})).length)return c.default._hslaToRGBA(P);if(m.HSB.test(O)?(P=m.HSB.exec(O).slice(1).map(function(j,N){return N===0?parseInt(j,10)/360:parseInt(j,10)/100}))[3]=1:m.HSBA.test(O)&&(P=m.HSBA.exec(O).slice(1).map(function(j,N){return N===0?parseInt(j,10)/360:N===3?parseFloat(j):parseInt(j,10)/100})),P.length){for(A=P.length-1;0<=A;--A)P[A]=Math.max(Math.min(P[A],1),0);return c.default._hsbaToRGBA(P)}P=[1,1,1,1]}else{if(E!==1&&E!==2||typeof v!="number")throw new Error("".concat(arguments,"is not a valid color representation."));P[0]=v/R[2],P[1]=v/R[2],P[2]=v/R[2],P[3]=typeof x=="number"?x/R[3]:1,P=P.map(function(j){return Math.max(Math.min(j,1),0)})}return P};var g=r.default.Color;i.default=g},{"../core/constants":250,"../core/main":260,"./color_conversion":246,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.trim":190}],249:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.array.fill"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}e("./p5.Color"),a.default.prototype.background=function(){var u;return(u=this._renderer).background.apply(u,arguments),this},a.default.prototype.clear=function(){return this._renderer.clear(),this},a.default.prototype.colorMode=function(u,o,l,h,f){if(a.default._validateParameters("colorMode",arguments),u===c.RGB||u===c.HSB||u===c.HSL){this._colorMode=u;var m=this._colorMaxes[u];arguments.length===2?(m[0]=o,m[1]=o,m[2]=o,m[3]=o):arguments.length===4?(m[0]=o,m[1]=l,m[2]=h):arguments.length===5&&(m[0]=o,m[1]=l,m[2]=h,m[3]=f)}return this},a.default.prototype.fill=function(){var u;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(u=this._renderer).fill.apply(u,arguments),this},a.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},a.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},a.default.prototype.stroke=function(){var u;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(u=this._renderer).stroke.apply(u,arguments),this},a.default.prototype.erase=function(){var u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255;return this._renderer.erase(u,o),this},a.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=a.default;i.default=p},{"../core/constants":250,"../core/main":260,"./p5.Color":248,"core-js/modules/es.array.fill":150}],250:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.BEZIER=i.QUADRATIC=i.LINEAR=i._CTX_MIDDLE=i._DEFAULT_LEADMULT=i._DEFAULT_TEXT_FILL=i.WORD=i.CHAR=i.BOLDITALIC=i.BOLD=i.ITALIC=i.NORMAL=i.BLUR=i.ERODE=i.DILATE=i.POSTERIZE=i.INVERT=i.OPAQUE=i.GRAY=i.THRESHOLD=i.BURN=i.DODGE=i.SOFT_LIGHT=i.HARD_LIGHT=i.OVERLAY=i.REPLACE=i.SCREEN=i.MULTIPLY=i.EXCLUSION=i.SUBTRACT=i.DIFFERENCE=i.LIGHTEST=i.DARKEST=i.ADD=i.REMOVE=i.BLEND=i.UP_ARROW=i.TAB=i.SHIFT=i.RIGHT_ARROW=i.RETURN=i.OPTION=i.LEFT_ARROW=i.ESCAPE=i.ENTER=i.DOWN_ARROW=i.DELETE=i.CONTROL=i.BACKSPACE=i.ALT=i.AUTO=i.HSL=i.HSB=i.RGB=i.MITER=i.BEVEL=i.ROUND=i.SQUARE=i.PROJECT=i.PIE=i.CHORD=i.OPEN=i.CLOSE=i.TESS=i.QUAD_STRIP=i.QUADS=i.TRIANGLE_STRIP=i.TRIANGLE_FAN=i.TRIANGLES=i.LINE_LOOP=i.LINE_STRIP=i.LINES=i.POINTS=i.BASELINE=i.BOTTOM=i.TOP=i.CENTER=i.LEFT=i.RIGHT=i.RADIUS=i.CORNERS=i.CORNER=i.RAD_TO_DEG=i.DEG_TO_RAD=i.RADIANS=i.DEGREES=i.TWO_PI=i.TAU=i.QUARTER_PI=i.PI=i.HALF_PI=i.WAIT=i.TEXT=i.MOVE=i.HAND=i.CROSS=i.ARROW=i.WEBGL=i.P2D=i.VERSION=void 0,i.FALLBACK=i.LABEL=i.AXES=i.GRID=i._DEFAULT_FILL=i._DEFAULT_STROKE=i.PORTRAIT=i.LANDSCAPE=i.MIRROR=i.CLAMP=i.REPEAT=i.NEAREST=i.IMAGE=i.IMMEDIATE=i.TEXTURE=i.FILL=i.STROKE=i.CURVE=void 0;var s=Math.PI;i.VERSION="1.4.0",i.P2D="p2d",i.WEBGL="webgl",i.ARROW="default",i.CROSS="crosshair",i.HAND="pointer",i.MOVE="move",i.TEXT="text",i.WAIT="wait";var r=s/2;i.HALF_PI=r;var a=s;i.PI=a;var c=s/4;i.QUARTER_PI=c;var d=2*s;i.TAU=d;var p=2*s;i.TWO_PI=p,i.DEGREES="degrees",i.RADIANS="radians";var u=s/180;i.DEG_TO_RAD=u;var o=180/s;i.RAD_TO_DEG=o,i.CORNER="corner",i.CORNERS="corners",i.RADIUS="radius",i.RIGHT="right",i.LEFT="left",i.CENTER="center",i.TOP="top",i.BOTTOM="bottom",i.BASELINE="alphabetic",i.POINTS=0,i.LINES=1,i.LINE_STRIP=3,i.LINE_LOOP=2,i.TRIANGLES=4,i.TRIANGLE_FAN=6,i.TRIANGLE_STRIP=5,i.QUADS="quads",i.QUAD_STRIP="quad_strip",i.TESS="tess",i.CLOSE="close",i.OPEN="open",i.CHORD="chord",i.PIE="pie",i.PROJECT="square",i.SQUARE="butt",i.ROUND="round",i.BEVEL="bevel",i.MITER="miter",i.RGB="rgb",i.HSB="hsb",i.HSL="hsl",i.AUTO="auto",i.ALT=18,i.BACKSPACE=8,i.CONTROL=17,i.DELETE=46,i.DOWN_ARROW=40,i.ENTER=13,i.ESCAPE=27,i.LEFT_ARROW=37,i.OPTION=18,i.RETURN=13,i.RIGHT_ARROW=39,i.SHIFT=16,i.TAB=9,i.UP_ARROW=38,i.BLEND="source-over",i.REMOVE="destination-out",i.ADD="lighter",i.DARKEST="darken",i.LIGHTEST="lighten",i.DIFFERENCE="difference",i.SUBTRACT="subtract",i.EXCLUSION="exclusion",i.MULTIPLY="multiply",i.SCREEN="screen",i.REPLACE="copy",i.OVERLAY="overlay",i.HARD_LIGHT="hard-light",i.SOFT_LIGHT="soft-light",i.DODGE="color-dodge",i.BURN="color-burn",i.THRESHOLD="threshold",i.GRAY="gray",i.OPAQUE="opaque",i.INVERT="invert",i.POSTERIZE="posterize",i.DILATE="dilate",i.ERODE="erode",i.BLUR="blur",i.NORMAL="normal",i.ITALIC="italic",i.BOLD="bold",i.BOLDITALIC="bold italic",i.CHAR="CHAR",i.WORD="WORD",i._DEFAULT_TEXT_FILL="#000000",i._DEFAULT_LEADMULT=1.25,i._CTX_MIDDLE="middle",i.LINEAR="linear",i.QUADRATIC="quadratic",i.BEZIER="bezier",i.CURVE="curve",i.STROKE="stroke",i.FILL="fill",i.TEXTURE="texture",i.IMMEDIATE="immediate",i.IMAGE="image",i.NEAREST="nearest",i.REPEAT="repeat",i.CLAMP="clamp",i.MIRROR="mirror",i.LANDSCAPE="landscape",i.PORTRAIT="portrait",i._DEFAULT_STROKE="#000000",i._DEFAULT_FILL="#FFFFFF",i.GRID="grid",i.AXES="axes",i.LABEL="label",i.FALLBACK="fallback"},{}],251:[function(e,n,i){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r},c=function(f){if(f&&f.__esModule)return f;if(f===null||s(f)!=="object"&&typeof f!="function")return{default:f};var m=d();if(m&&m.has(f))return m.get(f);var g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var w=v?Object.getOwnPropertyDescriptor(f,x):null;w&&(w.get||w.set)?Object.defineProperty(g,x,w):g[x]=f[x]}return g.default=f,m&&m.set(f,g),g}(e("./constants"));function d(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return d=function(){return f},f}var p=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT];a.default.prototype._frameRate=0,a.default.prototype._lastFrameTime=window.performance.now(),a.default.prototype._targetFrameRate=60;var u=window.print;function o(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function l(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}a.default.prototype.print=function(){var f;arguments.length?(f=console).log.apply(f,arguments):u()},a.default.prototype.frameCount=0,a.default.prototype.deltaTime=0,a.default.prototype.focused=document.hasFocus(),a.default.prototype.cursor=function(f,m,g){var v="auto",x=this._curElement.elt;if(p.includes(f))v=f;else if(typeof f=="string"){var w="";m&&g&&typeof m=="number"&&typeof g=="number"&&(w="".concat(m," ").concat(g)),v=f.substring(0,7)==="http://"||f.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(f)?"url(".concat(f,") ").concat(w,", auto"):f}x.style.cursor=v},a.default.prototype.frameRate=function(f){return a.default._validateParameters("frameRate",arguments),typeof f!="number"||f<0?this._frameRate:(this._setProperty("_targetFrameRate",f),f===0&&this._setProperty("_frameRate",f),this)},a.default.prototype.getFrameRate=function(){return this.frameRate()},a.default.prototype.setFrameRate=function(f){return this.frameRate(f)},a.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.default.prototype.displayWidth=screen.width,a.default.prototype.displayHeight=screen.height,a.default.prototype.windowWidth=o(),a.default.prototype.windowHeight=l(),a.default.prototype._onresize=function(f){this._setProperty("windowWidth",o()),this._setProperty("windowHeight",l());var m,g=this._isGlobal?window:this;typeof g.windowResized=="function"&&((m=g.windowResized(f))===void 0||m||f.preventDefault())},a.default.prototype.width=0,a.default.prototype.height=0,a.default.prototype.fullscreen=function(f){if(a.default._validateParameters("fullscreen",arguments),f===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;f?function(m){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");m.requestFullscreen?m.requestFullscreen():m.mozRequestFullScreen?m.mozRequestFullScreen():m.webkitRequestFullscreen?m.webkitRequestFullscreen():m.msRequestFullscreen&&m.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},a.default.prototype.pixelDensity=function(f){var m;return a.default._validateParameters("pixelDensity",arguments),typeof f=="number"?(f!==this._pixelDensity&&(this._pixelDensity=f),(m=this).resizeCanvas(this.width,this.height,!0)):m=this._pixelDensity,m},a.default.prototype.displayDensity=function(){return window.devicePixelRatio},a.default.prototype.getURL=function(){return location.href},a.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(f){return f!==""})},a.default.prototype.getURLParams=function(){for(var f,m=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,g={};(f=m.exec(location.search))!=null;)f.index===m.lastIndex&&m.lastIndex++,g[f[1]]=f[2];return g};var h=a.default;i.default=h},{"./constants":250,"./main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.includes":154,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.search":187,"core-js/modules/es.string.split":188}],252:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};e("../internationalization");var a=null,c=null;r.default._friendlyError=r.default._checkForUserDefinedFunctions=r.default._fesErrorMonitor=function(){},a=null;var d="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";c=function(){function o(h){return Object.getOwnPropertyNames(h).filter(function(f){return f[0]!=="_"&&!(f in l)&&(l[f]=!0)}).map(function(f){var m;return m=typeof h[f]=="function"?"function":f===f.toUpperCase()?"constant":"variable",{name:f,type:m}})}var l={};(a=[].concat(o(r.default.prototype),o(e("../constants")))).sort(function(h,f){return f.name.length-h.name.length})};function p(o,l){l=l||console.log.bind(console),a||c(),a.some(function(h){if(o.message&&o.message.match("\\W?".concat(h.name,"\\W"))!==null){var f=h.type==="function"?"".concat(h.name,"()"):h.name;return l("Did you just try to use p5.js's ".concat(f," ").concat(h.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(d)),!0}})}r.default.prototype._helpForMisusedAtTopLevelCode=p,document.readyState!=="complete"&&(window.addEventListener("error",p,!1),window.addEventListener("load",function(){window.removeEventListener("error",p,!1)}));var u=r.default;i.default=u},{"../constants":250,"../internationalization":258,"../main":260,"./browser_errors":void 0,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.some":161,"core-js/modules/es.function.name":163,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.get-own-property-names":171,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.search":187,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],253:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};e("../internationalization"),r.default._friendlyFileLoadError=function(){};var a=r.default;i.default=a},{"../internationalization":258,"../main":260}],254:[function(e,n,i){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};function a(){var d=/(^|@)\S+:\d+/,p=/^\s*at .*(\S+:\d+|\(native\))/m,u=/^(eval@)?(\[native code])?$/;return{parse:function(o){return o.stacktrace!==void 0||o["opera#sourceloc"]!==void 0?this.parseOpera(o):o.stack&&o.stack.match(p)?this.parseV8OrIE(o):o.stack?this.parseFFOrSafari(o):void 0},extractLocation:function(o){if(o.indexOf(":")===-1)return[o];var l=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o.replace(/[()]/g,""));return[l[1],l[2]||void 0,l[3]||void 0]},parseV8OrIE:function(o){return o.stack.split(`
`).filter(function(l){return!!l.match(p)},this).map(function(l){-1<l.indexOf("(eval ")&&(l=l.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var h=l.replace(/^\s+/,"").replace(/\(eval code/g,"("),f=h.match(/ (\((.+):(\d+):(\d+)\)$)/),m=(h=f?h.replace(f[0],""):h).split(/\s+/).slice(1),g=this.extractLocation(f?f[1]:m.pop());return{functionName:m.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(g[0])?void 0:g[0],lineNumber:g[1],columnNumber:g[2],source:l}},this)},parseFFOrSafari:function(o){return o.stack.split(`
`).filter(function(l){return!l.match(u)},this).map(function(l){if(-1<l.indexOf(" > eval")&&(l=l.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),l.indexOf("@")===-1&&l.indexOf(":")===-1)return{functionName:l};var h=/((.*".+"[^@]*)?[^@]*)(?:@)/,f=l.match(h),m=f&&f[1]?f[1]:void 0,g=this.extractLocation(l.replace(h,""));return{functionName:m,fileName:g[0],lineNumber:g[1],columnNumber:g[2],source:l}},this)},parseOpera:function(o){return!o.stacktrace||-1<o.message.indexOf(`
`)&&o.message.split(`
`).length>o.stacktrace.split(`
`).length?this.parseOpera9(o):o.stack?this.parseOpera11(o):this.parseOpera10(o)},parseOpera9:function(o){for(var l=/Line (\d+).*script (?:in )?(\S+)/i,h=o.message.split(`
`),f=[],m=2,g=h.length;m<g;m+=2){var v=l.exec(h[m]);v&&f.push({fileName:v[2],lineNumber:v[1],source:h[m]})}return f},parseOpera10:function(o){for(var l=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=o.stacktrace.split(`
`),f=[],m=0,g=h.length;m<g;m+=2){var v=l.exec(h[m]);v&&f.push({functionName:v[3]||void 0,fileName:v[2],lineNumber:v[1],source:h[m]})}return f},parseOpera11:function(o){return o.stack.split(`
`).filter(function(l){return!!l.match(d)&&!l.match(/^Error created at/)},this).map(function(l){var h,f=l.split("@"),m=this.extractLocation(f.pop()),g=f.shift()||"",v=g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return g.match(/\(([^)]*)\)/)&&(h=g.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:v,args:h===void 0||h==="[arguments not available]"?void 0:h.split(","),fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:l}},this)}}}r.default._getErrorStackParser=function(){return new a};var c=r.default;i.default=c},{"../main":260,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188}],255:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};(function(p){if(!(p&&p.__esModule)&&!(p===null||c(p)!=="object"&&typeof p!="function")){var u=a();if(u&&u.has(p))return u.get(p);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in p)if(Object.prototype.hasOwnProperty.call(p,h)){var f=l?Object.getOwnPropertyDescriptor(p,h):null;f&&(f.get||f.set)?Object.defineProperty(o,h,f):o[h]=p[h]}o.default=p,u&&u.set(p,o)}})(e("../constants")),e("../internationalization");function a(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return a=function(){return p},p}function c(p){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(p)}r.default._validateParameters=r.default._clearValidateParamsCache=function(){};var d=r.default;i.default=d},{"../../../docs/parameterData.json":void 0,"../constants":250,"../internationalization":258,"../main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.map":164,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.get-prototype-of":172,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.reflect.construct":176,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.set":180,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],256:[function(e,n,i){function s(d){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=function(d){if(d&&d.__esModule)return d;if(d===null||s(d)!=="object"&&typeof d!="function")return{default:d};var p=a();if(p&&p.has(d))return p.get(d);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in d)if(Object.prototype.hasOwnProperty.call(d,l)){var h=o?Object.getOwnPropertyDescriptor(d,l):null;h&&(h.get||h.set)?Object.defineProperty(u,l,h):u[l]=d[l]}return u.default=d,p&&p.set(d,u),u}(e("./constants"));function a(){if(typeof WeakMap!="function")return null;var d=new WeakMap;return a=function(){return d},d}var c={modeAdjust:function(d,p,u,o,l){return l===r.CORNER?{x:d,y:p,w:u,h:o}:l===r.CORNERS?{x:d,y:p,w:u-d,h:o-p}:l===r.RADIUS?{x:d-u,y:p-o,w:2*u,h:2*o}:l===r.CENTER?{x:d-.5*u,y:p-.5*o,w:u,h:o}:void 0}};i.default=c},{"./constants":250}],257:[function(e,n,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};e("./internationalization");var a=Promise.resolve();Promise.all([new Promise(function(c,d){document.readyState==="complete"?c():window.addEventListener("load",c,!1)}),a]).then(function(){window._setupDone===void 0?window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!r.default.instance&&new r.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")})},{"../core/main":260,"./internationalization":258,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.iterator":183,"core-js/modules/web.dom-collections.iterator":226}],258:[function(e,n,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.initialize=i.translator=void 0;var s,r,a=d(e("i18next")),c=d(e("i18next-browser-languagedetector"));function d(l){return l&&l.__esModule?l:{default:l}}function p(l,h){for(var f=0;f<h.length;f++){var m=h[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var u=function(){function l(m,g){(function(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")})(this,l),this.init(m,g)}var h,f;return h=l,(f=[{key:"fetchWithTimeout",value:function(m,g,v){var x=2<arguments.length&&v!==void 0?v:2e3;return Promise.race([fetch(m,g),new Promise(function(w,M){return setTimeout(function(){return M(new Error("timeout"))},x)})])}},{key:"init",value:function(m,g){var v=1<arguments.length&&g!==void 0?g:{};this.services=m,this.options=v}},{key:"read",value:function(m,g,v){var x=this.options.loadPath;if(m===this.options.fallback)v(null,s[m][g]);else if(r.includes(m)){var w=this.services.interpolator.interpolate(x,{lng:m,ns:g});this.loadUrl(w,v)}else v("Not found",!1)}},{key:"loadUrl",value:function(m,g){this.fetchWithTimeout(m).then(function(v){if(!v.ok)throw new Error("failed loading ".concat(m));return v.json()},function(){throw new Error("failed loading ".concat(m))}).then(function(v){return g(null,v)}).catch(g)}}])&&p(h.prototype,f),l}();u.type="backend";var o=function(l,h){console.debug("p5.js translator called before translations were loaded"),a.default.t(l,h)};i.translator=o,i.initialize=function(){return a.default.use(c.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:s}).then(function(l){i.translator=o=l},function(l){return console.debug("Translations failed to load (".concat(l,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/web.dom-collections.iterator":226,i18next:3,"i18next-browser-languagedetector":3}],259:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var a=r.default;i.default=a},{"./main":260}],260:[function(e,n,i){function s(o){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("./shim");var r=function(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var l=a();if(l&&l.has(o))return l.get(o);var h={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in o)if(Object.prototype.hasOwnProperty.call(o,m)){var g=f?Object.getOwnPropertyDescriptor(o,m):null;g&&(g.get||g.set)?Object.defineProperty(h,m,g):h[m]=o[m]}return h.default=o,l&&l.set(o,h),h}(e("./constants"));function a(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return a=function(){return o},o}function c(o,l){for(var h=0;h<l.length;h++){var f=l[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}var d=function(){function o(f,m,g){var v=this;(function(K,_e){if(!(K instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,o),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=m,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var x=Object.getOwnPropertyNames(o.prototype._registeredMethods),w=!0,M=!1,A=void 0;try{for(var E,I=x[Symbol.iterator]();!(w=(E=I.next()).done);w=!0){var R=E.value;this._registeredMethods[R]=o.prototype._registeredMethods[R].slice()}}catch(K){M=!0,A=K}finally{try{w||I.return==null||I.return()}finally{if(M)throw A}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var K=v._isGlobal?window:v;if(K.preload){var _e=document.getElementById(v._loadingScreenId);_e||((_e=document.createElement("div")).innerHTML="Loading...",_e.style.position="absolute",_e.id=v._loadingScreenId,(v._userNode||document.body).appendChild(_e));var me=v._preloadMethods;for(var ye in me){me[ye]=me[ye]||o;var fe=me[ye];fe!==o.prototype&&fe!==o||(v._isGlobal&&(window[ye]=v._wrapPreload(v,ye)),fe=v),v._registeredPreloadMethods[ye]=fe[ye],fe[ye]=v._wrapPreload(fe,ye)}K.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._draw()},this._runIfPreloadsAreDone=function(){var K=this._isGlobal?window:this;if(K._preloadCount===0){var _e=document.getElementById(K._loadingScreenId);_e&&_e.parentNode.removeChild(_e),this._setupDone||(this._lastFrameTime=window.performance.now(),K._setup(),K._draw())}},this._decrementPreload=function(){var K=this._isGlobal?window:this;typeof K.preload=="function"&&(K._setProperty("_preloadCount",K._preloadCount-1),K._runIfPreloadsAreDone())},this._wrapPreload=function(K,_e){var me=this;return function(){me._incrementPreload();for(var ye=arguments.length,fe=new Array(ye),de=0;de<ye;de++)fe[de]=arguments[de];return me._registeredPreloadMethods[_e].apply(K,fe)}},this._incrementPreload=function(){var K=this._isGlobal?window:this;K._setProperty("_preloadCount",K._preloadCount+1)},this._setup=function(){v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var K=v._isGlobal?window:v;if(typeof K.preload=="function")for(var _e in v._preloadMethods)K[_e]=v._preloadMethods[_e][_e],K[_e]&&v&&(K[_e]=K[_e].bind(v));v._millisStart=window.performance.now(),typeof K.setup=="function"&&K.setup();var me=document.getElementsByTagName("canvas"),ye=!0,fe=!1,de=void 0;try{for(var Ee,C=me[Symbol.iterator]();!(ye=(Ee=C.next()).done);ye=!0){var F=Ee.value;F.dataset.hidden==="true"&&(F.style.visibility="",delete F.dataset.hidden)}}catch(H){fe=!0,de=H}finally{try{ye||C.return==null||C.return()}finally{if(fe)throw de}}v._lastFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput()},this._draw=function(){var K=window.performance.now(),_e=K-v._lastFrameTime,me=1e3/v._targetFrameRate;(!v._loop||me-5<=_e)&&(v.redraw(),v._frameRate=1e3/(K-v._lastFrameTime),v.deltaTime=K-v._lastFrameTime,v._setProperty("deltaTime",v.deltaTime),v._lastFrameTime=K,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(K,_e){v[K]=_e,v._isGlobal&&(window[K]=_e)},this.remove=function(){var K=document.getElementById(v._loadingScreenId);if(K&&(K.parentNode.removeChild(K),v._incrementPreload()),v._curElement){for(var _e in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(_e,v._events[_e]);var me=!0,ye=!1,fe=void 0;try{for(var de,Ee=v._elements[Symbol.iterator]();!(me=(de=Ee.next()).done);me=!0){var C=de.value;for(var F in C.elt&&C.elt.parentNode&&C.elt.parentNode.removeChild(C.elt),C._events)C.elt.removeEventListener(F,C._events[F])}}catch(oe){ye=!0,fe=oe}finally{try{me||Ee.return==null||Ee.return()}finally{if(ye)throw fe}}var H=v;v._registeredMethods.remove.forEach(function(oe){oe!==void 0&&oe.call(H)})}if(v._isGlobal){for(var ne in o.prototype)try{delete window[ne]}catch{window[ne]=void 0}for(var re in v)if(v.hasOwnProperty(re))try{delete window[re]}catch{window[re]=void 0}o.instance=null}},this._registeredMethods.init.forEach(function(K){K!==void 0&&K.call(this)},this),this._setupPromisePreloads();var P=this._createFriendlyGlobalFunctionBinder();if(f)f(this),o._checkForUserDefinedFunctions(this);else{for(var D in this._isGlobal=!0,o.instance=this,o.prototype)if(typeof o.prototype[D]=="function"){var O=D.substring(2);this._events.hasOwnProperty(O)||(Math.hasOwnProperty(D)&&Math[D]===o.prototype[D]?P(D,o.prototype[D]):P(D,o.prototype[D].bind(this)))}else P(D,o.prototype[D]);for(var j in this)this.hasOwnProperty(j)&&P(j,this[j])}for(var N in this._events){var q=this["_on".concat(N)];if(q){var X=q.bind(this);window.addEventListener(N,X,{passive:!1}),this._events[N]=X}}function V(){v._setProperty("focused",!0)}function $(){v._setProperty("focused",!1)}window.addEventListener("focus",V),window.addEventListener("blur",$),this.registerMethod("remove",function(){window.removeEventListener("focus",V),window.removeEventListener("blur",$)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var l,h;return l=o,(h=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=r.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(f,m){o.prototype._preloadMethods.hasOwnProperty(f)||(o.prototype._preloadMethods[f]=m)}},{key:"registerMethod",value:function(f,m){var g=this||o.prototype;g._registeredMethods.hasOwnProperty(f)||(g._registeredMethods[f]=[]),g._registeredMethods[f].push(m)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(f){var m=0<arguments.length&&f!==void 0?f:{},g=m.globalObject||window;return m.log||console.log.bind(console),function(v,x){g[v]=x}}}])&&c(l.prototype,h),o}();for(var p in d.instance=null,d.disableFriendlyErrors=!1,r)d.prototype[p]=r[p];d.prototype._preloadMethods={loadJSON:d.prototype,loadImage:d.prototype,loadStrings:d.prototype,loadXML:d.prototype,loadBytes:d.prototype,loadTable:d.prototype,loadFont:d.prototype,loadModel:d.prototype,loadShader:d.prototype},d.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},d.prototype._registeredPreloadMethods={};var u=d;i.default=u},{"./constants":250,"./shim":271,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.get-own-property-names":171,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],261:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.Element=function(c,d){this.elt=c,this._pInst=this._pixelsState=d,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},r.default.Element.prototype.parent=function(c){return c===void 0?this.elt.parentNode:(typeof c=="string"?(c[0]==="#"&&(c=c.substring(1)),c=document.getElementById(c)):c instanceof r.default.Element&&(c=c.elt),c.appendChild(this.elt),this)},r.default.Element.prototype.id=function(c){return c===void 0?this.elt.id:(this.elt.id=c,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},r.default.Element.prototype.class=function(c){return c===void 0?this.elt.className:(this.elt.className=c,this)},r.default.Element.prototype.mousePressed=function(c){return r.default.Element._adjustListener("mousedown",function(d){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(d),c.call(this)},this),this},r.default.Element.prototype.doubleClicked=function(c){return r.default.Element._adjustListener("dblclick",c,this),this},r.default.Element.prototype.mouseWheel=function(c){return r.default.Element._adjustListener("wheel",c,this),this},r.default.Element.prototype.mouseReleased=function(c){return r.default.Element._adjustListener("mouseup",c,this),this},r.default.Element.prototype.mouseClicked=function(c){return r.default.Element._adjustListener("click",c,this),this},r.default.Element.prototype.mouseMoved=function(c){return r.default.Element._adjustListener("mousemove",c,this),this},r.default.Element.prototype.mouseOver=function(c){return r.default.Element._adjustListener("mouseover",c,this),this},r.default.Element.prototype.mouseOut=function(c){return r.default.Element._adjustListener("mouseout",c,this),this},r.default.Element.prototype.touchStarted=function(c){return r.default.Element._adjustListener("touchstart",c,this),this},r.default.Element.prototype.touchMoved=function(c){return r.default.Element._adjustListener("touchmove",c,this),this},r.default.Element.prototype.touchEnded=function(c){return r.default.Element._adjustListener("touchend",c,this),this},r.default.Element.prototype.dragOver=function(c){return r.default.Element._adjustListener("dragover",c,this),this},r.default.Element.prototype.dragLeave=function(c){return r.default.Element._adjustListener("dragleave",c,this),this},r.default.Element._adjustListener=function(c,d,p){return d===!1?r.default.Element._detachListener(c,p):r.default.Element._attachListener(c,d,p),this},r.default.Element._attachListener=function(c,d,p){p._events[c]&&r.default.Element._detachListener(c,p);var u=d.bind(p);p.elt.addEventListener(c,u,!1),p._events[c]=u},r.default.Element._detachListener=function(c,d){var p=d._events[c];d.elt.removeEventListener(c,p,!1),d._events[c]=null},r.default.Element.prototype._setProperty=function(c,d){this[c]=d};var a=r.default.Element;i.default=a},{"./main":260}],262:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("./constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}a.default.Graphics=function(u,o,l,h){var f=l||c.P2D;this.canvas=document.createElement("canvas");var m=h._userNode||document.body;for(var g in m.appendChild(this.canvas),a.default.Element.call(this,this.canvas,h),a.default.prototype)this[g]||(typeof a.default.prototype[g]=="function"?this[g]=a.default.prototype[g].bind(this):this[g]=a.default.prototype[g]);return a.default.prototype._initializeInstanceVariables.apply(this),this.width=u,this.height=o,this._pixelDensity=h._pixelDensity,f===c.WEBGL?this._renderer=new a.default.RendererGL(this.canvas,this,!1):this._renderer=new a.default.Renderer2D(this.canvas,this,!1),h._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(u,o),this._renderer._applyDefaults(),this},a.default.Graphics.prototype=Object.create(a.default.Element.prototype),a.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},a.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var u=this._pInst._elements.indexOf(this);for(var o in u!==-1&&this._pInst._elements.splice(u,1),this._events)this.elt.removeEventListener(o,this._events[o])};var p=a.default.Graphics;i.default=p},{"./constants":250,"./main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.splice":162}],263:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s},a=function(o){if(o&&o.__esModule)return o;if(o===null||d(o)!=="object"&&typeof o!="function")return{default:o};var l=c();if(l&&l.has(o))return l.get(o);var h={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in o)if(Object.prototype.hasOwnProperty.call(o,m)){var g=f?Object.getOwnPropertyDescriptor(o,m):null;g&&(g.get||g.set)?Object.defineProperty(h,m,g):h[m]=o[m]}return h.default=o,l&&l.set(o,h),h}(e("../core/constants"));function c(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return c=function(){return o},o}function d(o){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}function p(o){var l=0,h=0;if(o.offsetParent)for(;l+=o.offsetLeft,h+=o.offsetTop,o=o.offsetParent;);else l+=o.offsetLeft,h+=o.offsetTop;return[l,h]}r.default.Renderer=function(o,l,h){r.default.Element.call(this,o,l),this.canvas=o,this._pixelsState=l,h?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=a.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=a.LEFT,this._textBaseline=a.BASELINE,this._textWrap=a.WORD,this._rectMode=a.CORNER,this._ellipseMode=a.CENTER,this._curveTightness=0,this._imageMode=a.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},r.default.Renderer.prototype=Object.create(r.default.Element.prototype),r.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},r.default.Renderer.prototype.pop=function(o){o.properties&&Object.assign(this,o.properties)},r.default.Renderer.prototype.resize=function(o,l){this.width=o,this.height=l,this.elt.width=o*this._pInst._pixelDensity,this.elt.height=l*this._pInst._pixelDensity,this.elt.style.width="".concat(o,"px"),this.elt.style.height="".concat(l,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},r.default.Renderer.prototype.get=function(o,l,h,f){var m=this._pixelsState,g=m._pixelDensity,v=this.canvas;if(o===void 0&&l===void 0)o=l=0,h=m.width,f=m.height;else if(o*=g,l*=g,h===void 0&&f===void 0)return o<0||l<0||o>=v.width||l>=v.height?[0,0,0,0]:this._getPixel(o,l);var x=new r.default.Image(h,f);return x.canvas.getContext("2d").drawImage(v,o,l,h*g,f*g,0,0,h,f),x},r.default.Renderer.prototype.textLeading=function(o){return typeof o=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",o),this._pInst):this._textLeading},r.default.Renderer.prototype.textSize=function(o){return typeof o=="number"?(this._setProperty("_textSize",o),this._leadingSet||this._setProperty("_textLeading",o*a._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},r.default.Renderer.prototype.textStyle=function(o){return o?(o!==a.NORMAL&&o!==a.ITALIC&&o!==a.BOLD&&o!==a.BOLDITALIC||this._setProperty("_textStyle",o),this._applyTextProperties()):this._textStyle},r.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},r.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},r.default.Renderer.prototype.textAlign=function(o,l){return o!==void 0?(this._setProperty("_textAlign",o),l!==void 0&&this._setProperty("_textBaseline",l),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},r.default.Renderer.prototype.textWrap=function(o){return this._setProperty("_textWrap",o),this._textWrap},r.default.Renderer.prototype.text=function(o,l,h,f,m){var g,v,x,w,M,A,E,I=this._pInst,R=this._textWrap,P=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&o!==void 0){if(typeof o!="string"&&(o=o.toString()),g=(o=o.replace(/(\t)/g,"  ")).split(`
`),f!==void 0){switch(this._rectMode===a.CENTER&&(l-=f/2),this._textAlign){case a.CENTER:l+=f/2;break;case a.RIGHT:l+=f}var D=!1;if(m!==void 0){switch(this._rectMode===a.CENTER&&(h-=m/2),this._textBaseline){case a.BOTTOM:E=h+(m-totalHeight),h=Math.max(E,h);break;case a.CENTER:E=h+(m-totalHeight)/2,h=Math.max(E,h);break;case a.BASELINE:D=!0,this._textBaseline=a.TOP}P=h+m-I.textAscent()}if(R===a.WORD)for(var O=0;O<g.length;O++){v="",M=g[O].split(" ");for(var j=0;j<M.length;j++)x="".concat(v+M[j])+" ",f<(w=this.textWidth(x))&&0<v.length?(this._renderText(I,v,l,h,P),v="".concat(M[j])+" ",h+=I.textLeading()):v=x;this._renderText(I,v,l,h,P),h+=I.textLeading(),D&&(this._textBaseline=a.BASELINE)}else{for(var N=0;N<g.length;N++){v="",A=g[N].split("");for(var q=0;q<A.length;q++)x="".concat(v+A[q]),(w=this.textWidth(x))<=f?v+=A[q]:f<w&&0<v.length&&(this._renderText(I,v,l,h,P),h+=I.textLeading(),v="".concat(A[q]))}this._renderText(I,v,l,h,P),h+=I.textLeading(),D&&(this._textBaseline=a.BASELINE)}}else{var X=0,V=I.textAlign().vertical;V===a.CENTER?X=(g.length-1)*I.textLeading()/2:V===a.BOTTOM&&(X=(g.length-1)*I.textLeading());for(var $=0;$<g.length;$++)this._renderText(I,g[$],l,h-X,P),h+=I.textLeading()}return I}},r.default.Renderer.prototype._applyDefaults=function(){return this},r.default.Renderer.prototype._isOpenType=function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return d(o)==="object"&&o.font&&o.font.supported},r.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var o=document.createElement("span");o.style.fontFamily=this._textFont,o.style.fontSize="".concat(this._textSize,"px"),o.innerHTML="ABCjgq|";var l=document.createElement("div");l.style.display="inline-block",l.style.width="1px",l.style.height="0px";var h=document.createElement("div");h.appendChild(o),h.appendChild(l),h.style.height="0px",h.style.overflow="hidden",document.body.appendChild(h),l.style.verticalAlign="baseline";var f=p(l),m=p(o),g=f[1]-m[1];l.style.verticalAlign="bottom",f=p(l),m=p(o);var v=f[1]-m[1]-g;return document.body.removeChild(h),this._setProperty("_textAscent",g),this._setProperty("_textDescent",v),this};var u=r.default.Renderer;i.default=u},{"../core/constants":250,"./main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],264:[function(e,n,i){function s(l){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(l)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("./main")),a=function(l){if(l&&l.__esModule)return l;if(l===null||s(l)!=="object"&&typeof l!="function")return{default:l};var h=d();if(h&&h.has(l))return h.get(l);var f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)){var v=m?Object.getOwnPropertyDescriptor(l,g):null;v&&(v.get||v.set)?Object.defineProperty(f,g,v):f[g]=l[g]}return f.default=l,h&&h.set(l,f),f}(e("./constants")),c=p(e("../image/filters"));function d(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return d=function(){return l},l}function p(l){return l&&l.__esModule?l:{default:l}}e("./p5.Renderer");var u="rgba(0,0,0,0)";r.default.Renderer2D=function(l,h,f){return r.default.Renderer.call(this,l,h,f),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},r.default.Renderer2D.prototype=Object.create(r.default.Renderer.prototype),r.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=a.BLEND,this._setFill(a._DEFAULT_FILL),this._setStroke(a._DEFAULT_STROKE),this.drawingContext.lineCap=a.ROUND,this.drawingContext.font="normal 12px sans-serif"},r.default.Renderer2D.prototype.resize=function(l,h){r.default.Renderer.prototype.resize.call(this,l,h),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},r.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof r.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var l,h=this._getFill(),f=(l=this._pInst).color.apply(l,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(f.levels);var m=f.toString();this._setFill(m),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(h),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},r.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},r.default.Renderer2D.prototype.fill=function(){var l,h=(l=this._pInst).color.apply(l,arguments);this._setFill(h.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",h.levels)},r.default.Renderer2D.prototype.stroke=function(){var l,h=(l=this._pInst).color.apply(l,arguments);this._setStroke(h.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",h.levels)},r.default.Renderer2D.prototype.erase=function(l,h){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var f=this._pInst.color(255,l).toString();this.drawingContext.fillStyle=f,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var m=this._pInst.color(255,h).toString();this.drawingContext.strokeStyle=m;var g=this._cachedBlendMode;this.blendMode(a.REMOVE),this._cachedBlendMode=g,this._isErasing=!0}},r.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},r.default.Renderer2D.prototype.image=function(l,h,f,m,g,v,x,w,M){var A;l.gifProperties&&l._animateGif(this._pInst);try{this._tint&&(r.default.MediaElement&&l instanceof r.default.MediaElement&&l.loadPixels(),l.canvas&&(A=this._getTintedImageCanvas(l))),A=A||l.canvas||l.elt;var E=1;l.width&&0<l.width&&(E=A.width/l.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(A,E*h,E*f,E*m,E*g,v,x,w,M),this._isErasing&&this._pInst.erase()}catch(I){if(I.name!=="NS_ERROR_NOT_AVAILABLE")throw I}},r.default.Renderer2D.prototype._getTintedImageCanvas=function(l){if(!l.canvas)return l;var h=c.default._toPixels(l.canvas),f=document.createElement("canvas");f.width=l.canvas.width,f.height=l.canvas.height;for(var m=f.getContext("2d"),g=m.createImageData(l.canvas.width,l.canvas.height),v=g.data,x=0;x<h.length;x+=4){var w=h[x],M=h[x+1],A=h[x+2],E=h[x+3];v[x]=w*this._tint[0]/255,v[x+1]=M*this._tint[1]/255,v[x+2]=A*this._tint[2]/255,v[x+3]=E*this._tint[3]/255}return m.putImageData(g,0,0),f},r.default.Renderer2D.prototype.blendMode=function(l){if(l===a.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(l!==a.BLEND&&l!==a.REMOVE&&l!==a.DARKEST&&l!==a.LIGHTEST&&l!==a.DIFFERENCE&&l!==a.MULTIPLY&&l!==a.EXCLUSION&&l!==a.SCREEN&&l!==a.REPLACE&&l!==a.OVERLAY&&l!==a.HARD_LIGHT&&l!==a.SOFT_LIGHT&&l!==a.DODGE&&l!==a.BURN&&l!==a.ADD)throw new Error("Mode ".concat(l," not recognized."));this._cachedBlendMode=l,this.drawingContext.globalCompositeOperation=l}},r.default.Renderer2D.prototype.blend=function(){for(var l=this.drawingContext.globalCompositeOperation,h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];var g=f[f.length-1],v=Array.prototype.slice.call(f,0,f.length-1);this.drawingContext.globalCompositeOperation=g,r.default.prototype.copy.apply(this,v),this.drawingContext.globalCompositeOperation=l},r.default.Renderer2D.prototype._getPixel=function(l,h){var f;return[(f=this.drawingContext.getImageData(l,h,1,1).data)[0],f[1],f[2],f[3]]},r.default.Renderer2D.prototype.loadPixels=function(){var l=this._pixelsState,h=l._pixelDensity,f=this.width*h,m=this.height*h,g=this.drawingContext.getImageData(0,0,f,m);l._setProperty("imageData",g),l._setProperty("pixels",g.data)},r.default.Renderer2D.prototype.set=function(l,h,f){l=Math.floor(l),h=Math.floor(h);var m=this._pixelsState;if(f instanceof r.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(m._pixelDensity,m._pixelDensity),this.drawingContext.clearRect(l,h,f.width,f.height),this.drawingContext.drawImage(f.canvas,l,h),this.drawingContext.restore();else{var g=0,v=0,x=0,w=0,M=4*(h*m._pixelDensity*(this.width*m._pixelDensity)+l*m._pixelDensity);if(m.imageData||m.loadPixels.call(m),typeof f=="number")M<m.pixels.length&&(x=v=g=f,w=255);else if(f instanceof Array){if(f.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");M<m.pixels.length&&(g=f[0],v=f[1],x=f[2],w=f[3])}else f instanceof r.default.Color&&M<m.pixels.length&&(g=f.levels[0],v=f.levels[1],x=f.levels[2],w=f.levels[3]);for(var A=0;A<m._pixelDensity;A++)for(var E=0;E<m._pixelDensity;E++)M=4*((h*m._pixelDensity+E)*this.width*m._pixelDensity+(l*m._pixelDensity+A)),m.pixels[M]=g,m.pixels[M+1]=v,m.pixels[M+2]=x,m.pixels[M+3]=w}},r.default.Renderer2D.prototype.updatePixels=function(l,h,f,m){var g=this._pixelsState,v=g._pixelDensity;l===void 0&&h===void 0&&f===void 0&&m===void 0&&(h=l=0,f=this.width,m=this.height),l*=v,h*=v,f*=v,m*=v,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=g.imageData),this.drawingContext.putImageData(g.imageData,l,h,0,0,f,m)},r.default.Renderer2D.prototype._acuteArcToBezier=function(l,h){var f=h/2,m=Math.cos(f),g=Math.sin(f),v=1/Math.tan(f),x=l+f,w=Math.cos(x),M=Math.sin(x),A=(4-m)/3,E=g+(m-A)*v;return{ax:Math.cos(l).toFixed(7),ay:Math.sin(l).toFixed(7),bx:(A*w+E*M).toFixed(7),by:(A*M-E*w).toFixed(7),cx:(A*w-E*M).toFixed(7),cy:(A*M+E*w).toFixed(7),dx:Math.cos(l+h).toFixed(7),dy:Math.sin(l+h).toFixed(7)}},r.default.Renderer2D.prototype.arc=function(l,h,f,m,g,v,x){var w=this.drawingContext,M=f/2,A=m/2,E=0,I=[];for(l+=M,h+=A;1e-5<=v-g;)E=Math.min(v-g,a.HALF_PI),I.push(this._acuteArcToBezier(g,E)),g+=E;return this._doFill&&(w.beginPath(),I.forEach(function(R,P){P===0&&w.moveTo(l+R.ax*M,h+R.ay*A),w.bezierCurveTo(l+R.bx*M,h+R.by*A,l+R.cx*M,h+R.cy*A,l+R.dx*M,h+R.dy*A)}),x!==a.PIE&&x!=null||w.lineTo(l,h),w.closePath(),w.fill()),this._doStroke&&(w.beginPath(),I.forEach(function(R,P){P===0&&w.moveTo(l+R.ax*M,h+R.ay*A),w.bezierCurveTo(l+R.bx*M,h+R.by*A,l+R.cx*M,h+R.cy*A,l+R.dx*M,h+R.dy*A)}),x===a.PIE?(w.lineTo(l,h),w.closePath()):x===a.CHORD&&w.closePath(),w.stroke()),this},r.default.Renderer2D.prototype.ellipse=function(l){var h=this.drawingContext,f=this._doFill,m=this._doStroke,g=parseFloat(l[0]),v=parseFloat(l[1]),x=parseFloat(l[2]),w=parseFloat(l[3]);if(f&&!m){if(this._getFill()===u)return this}else if(!f&&m&&this._getStroke()===u)return this;var M=x/2*.5522847498,A=w/2*.5522847498,E=g+x,I=v+w,R=g+x/2,P=v+w/2;h.beginPath(),h.moveTo(g,P),h.bezierCurveTo(g,P-A,R-M,v,R,v),h.bezierCurveTo(R+M,v,E,P-A,E,P),h.bezierCurveTo(E,P+A,R+M,I,R,I),h.bezierCurveTo(R-M,I,g,P+A,g,P),f&&h.fill(),m&&h.stroke()},r.default.Renderer2D.prototype.line=function(l,h,f,m){var g=this.drawingContext;return this._doStroke&&(this._getStroke()===u||(g.beginPath(),g.moveTo(l,h),g.lineTo(f,m),g.stroke())),this},r.default.Renderer2D.prototype.point=function(l,h){var f=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===u)return this;var m=this._getStroke(),g=this._getFill();this._setFill(m),f.beginPath(),f.arc(l,h,f.lineWidth/2,0,a.TWO_PI,!1),f.fill(),this._setFill(g)},r.default.Renderer2D.prototype.quad=function(l,h,f,m,g,v,x,w){var M=this.drawingContext,A=this._doFill,E=this._doStroke;if(A&&!E){if(this._getFill()===u)return this}else if(!A&&E&&this._getStroke()===u)return this;return M.beginPath(),M.moveTo(l,h),M.lineTo(f,m),M.lineTo(g,v),M.lineTo(x,w),M.closePath(),A&&M.fill(),E&&M.stroke(),this},r.default.Renderer2D.prototype.rect=function(l){var h=l[0],f=l[1],m=l[2],g=l[3],v=l[4],x=l[5],w=l[6],M=l[7],A=this.drawingContext,E=this._doFill,I=this._doStroke;if(E&&!I){if(this._getFill()===u)return this}else if(!E&&I&&this._getStroke()===u)return this;if(A.beginPath(),v===void 0)A.rect(h,f,m,g);else{x===void 0&&(x=v),w===void 0&&(w=x),M===void 0&&(M=w);var R=Math.abs(m),P=Math.abs(g),D=R/2,O=P/2;R<2*v&&(v=D),P<2*v&&(v=O),R<2*x&&(x=D),P<2*x&&(x=O),R<2*w&&(w=D),P<2*w&&(w=O),R<2*M&&(M=D),P<2*M&&(M=O),A.beginPath(),A.moveTo(h+v,f),A.arcTo(h+m,f,h+m,f+g,x),A.arcTo(h+m,f+g,h,f+g,w),A.arcTo(h,f+g,h,f,M),A.arcTo(h,f,h+m,f,v),A.closePath()}return this._doFill&&A.fill(),this._doStroke&&A.stroke(),this},r.default.Renderer2D.prototype.triangle=function(l){var h=this.drawingContext,f=this._doFill,m=this._doStroke,g=l[0],v=l[1],x=l[2],w=l[3],M=l[4],A=l[5];if(f&&!m){if(this._getFill()===u)return this}else if(!f&&m&&this._getStroke()===u)return this;h.beginPath(),h.moveTo(g,v),h.lineTo(x,w),h.lineTo(M,A),h.closePath(),f&&h.fill(),m&&h.stroke()},r.default.Renderer2D.prototype.endShape=function(l,h,f,m,g,v,x){if(h.length===0)return this;if(!this._doStroke&&!this._doFill)return this;var w,M,A,E=l===a.CLOSE;E&&!v&&h.push(h[0]);var I=h.length;if(!f||x!==a.POLYGON&&x!==null)if(!m||x!==a.POLYGON&&x!==null)if(!g||x!==a.POLYGON&&x!==null)if(x===a.POINTS)for(M=0;M<I;M++)w=h[M],this._doStroke&&this._pInst.stroke(w[6]),this._pInst.point(w[0],w[1]);else if(x===a.LINES)for(M=0;M+1<I;M+=2)w=h[M],this._doStroke&&this._pInst.stroke(h[M+1][6]),this._pInst.line(w[0],w[1],h[M+1][0],h[M+1][1]);else if(x===a.TRIANGLES)for(M=0;M+2<I;M+=3)w=h[M],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(h[M+1][0],h[M+1][1]),this.drawingContext.lineTo(h[M+2][0],h[M+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(h[M+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(h[M+2][6]),this.drawingContext.stroke());else if(x===a.TRIANGLE_STRIP)for(M=0;M+1<I;M++)w=h[M],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[M+1][0],h[M+1][1]),this.drawingContext.lineTo(w[0],w[1]),this._doStroke&&this._pInst.stroke(h[M+1][6]),this._doFill&&this._pInst.fill(h[M+1][5]),M+2<I&&(this.drawingContext.lineTo(h[M+2][0],h[M+2][1]),this._doStroke&&this._pInst.stroke(h[M+2][6]),this._doFill&&this._pInst.fill(h[M+2][5])),this._doFillStrokeClose(E);else if(x===a.TRIANGLE_FAN){if(2<I){for(this.drawingContext.beginPath(),M=2;M<I;M++)w=h[M],this.drawingContext.moveTo(h[0][0],h[0][1]),this.drawingContext.lineTo(h[M-1][0],h[M-1][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(h[0][0],h[0][1]),M<I-1&&(this._doFill&&w[5]!==h[M+1][5]||this._doStroke&&w[6]!==h[M+1][6])&&(this._doFill&&(this._pInst.fill(w[5]),this.drawingContext.fill(),this._pInst.fill(h[M+1][5])),this._doStroke&&(this._pInst.stroke(w[6]),this.drawingContext.stroke(),this._pInst.stroke(h[M+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(E)}}else if(x===a.QUADS)for(M=0;M+3<I;M+=4){for(w=h[M],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),A=1;A<4;A++)this.drawingContext.lineTo(h[M+A][0],h[M+A][1]);this.drawingContext.lineTo(w[0],w[1]),this._doFill&&this._pInst.fill(h[M+3][5]),this._doStroke&&this._pInst.stroke(h[M+3][6]),this._doFillStrokeClose(E)}else if(x===a.QUAD_STRIP){if(3<I)for(M=0;M+1<I;M+=2)w=h[M],this.drawingContext.beginPath(),M+3<I?(this.drawingContext.moveTo(h[M+2][0],h[M+2][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(h[M+1][0],h[M+1][1]),this.drawingContext.lineTo(h[M+3][0],h[M+3][1]),this._doFill&&this._pInst.fill(h[M+3][5]),this._doStroke&&this._pInst.stroke(h[M+3][6])):(this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(h[M+1][0],h[M+1][1])),this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0][0],h[0][1]),M=1;M<I;M++)(w=h[M]).isVert&&(w.moveTo?this.drawingContext.moveTo(w[0],w[1]):this.drawingContext.lineTo(w[0],w[1]));this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),M=0;M<I;M++)h[M].isVert?h[M].moveTo?this.drawingContext.moveTo(h[M][0],h[M][1]):this.drawingContext.lineTo(h[M][0],h[M][1]):this.drawingContext.quadraticCurveTo(h[M][0],h[M][1],h[M][2],h[M][3]);this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),M=0;M<I;M++)h[M].isVert?h[M].moveTo?this.drawingContext.moveTo(h[M][0],h[M][1]):this.drawingContext.lineTo(h[M][0],h[M][1]):this.drawingContext.bezierCurveTo(h[M][0],h[M][1],h[M][2],h[M][3],h[M][4],h[M][5]);this._doFillStrokeClose(E)}else if(3<I){var R=[],P=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(h[1][0],h[1][1]),M=1;M+2<I;M++)w=h[M],R[0]=[w[0],w[1]],R[1]=[w[0]+(P*h[M+1][0]-P*h[M-1][0])/6,w[1]+(P*h[M+1][1]-P*h[M-1][1])/6],R[2]=[h[M+1][0]+(P*h[M][0]-P*h[M+2][0])/6,h[M+1][1]+(P*h[M][1]-P*h[M+2][1])/6],R[3]=[h[M+1][0],h[M+1][1]],this.drawingContext.bezierCurveTo(R[1][0],R[1][1],R[2][0],R[2][1],R[3][0],R[3][1]);E&&this.drawingContext.lineTo(h[M+1][0],h[M+1][1]),this._doFillStrokeClose(E)}return v=g=m=f=!1,E&&h.pop(),this},r.default.Renderer2D.prototype.strokeCap=function(l){return l!==a.ROUND&&l!==a.SQUARE&&l!==a.PROJECT||(this.drawingContext.lineCap=l),this},r.default.Renderer2D.prototype.strokeJoin=function(l){return l!==a.ROUND&&l!==a.BEVEL&&l!==a.MITER||(this.drawingContext.lineJoin=l),this},r.default.Renderer2D.prototype.strokeWeight=function(l){return this.drawingContext.lineWidth=l===void 0||l===0?1e-4:l,this},r.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},r.default.Renderer2D.prototype._setFill=function(l){l!==this._cachedFillStyle&&(this.drawingContext.fillStyle=l,this._cachedFillStyle=l)},r.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},r.default.Renderer2D.prototype._setStroke=function(l){l!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=l,this._cachedStrokeStyle=l)},r.default.Renderer2D.prototype.bezier=function(l,h,f,m,g,v,x,w){return this._pInst.beginShape(),this._pInst.vertex(l,h),this._pInst.bezierVertex(f,m,g,v,x,w),this._pInst.endShape(),this},r.default.Renderer2D.prototype.curve=function(l,h,f,m,g,v,x,w){return this._pInst.beginShape(),this._pInst.curveVertex(l,h),this._pInst.curveVertex(f,m),this._pInst.curveVertex(g,v),this._pInst.curveVertex(x,w),this._pInst.endShape(),this},r.default.Renderer2D.prototype._doFillStrokeClose=function(l){l&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},r.default.Renderer2D.prototype.applyMatrix=function(l,h,f,m,g,v){this.drawingContext.transform(l,h,f,m,g,v)},r.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},r.default.Renderer2D.prototype.rotate=function(l){this.drawingContext.rotate(l)},r.default.Renderer2D.prototype.scale=function(l,h){return this.drawingContext.scale(l,h),this},r.default.Renderer2D.prototype.translate=function(l,h){return l instanceof r.default.Vector&&(h=l.y,l=l.x),this.drawingContext.translate(l,h),this},r.default.Renderer2D.prototype.text=function(l,h,f,m,g){var v;m!==void 0&&this.drawingContext.textBaseline===a.BASELINE&&(v=!0,this.drawingContext.textBaseline=a.TOP);var x=r.default.Renderer.prototype.text.apply(this,arguments);return v&&(this.drawingContext.textBaseline=a.BASELINE),x},r.default.Renderer2D.prototype._renderText=function(l,h,f,m,g){if(!(g<=m))return l.push(),this._isOpenType()?this._textFont._renderPath(h,f,m,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(h,f,m),this._doFill&&(this._fillSet||this._setFill(a._DEFAULT_TEXT_FILL),this.drawingContext.fillText(h,f,m))),l.pop(),l},r.default.Renderer2D.prototype.textWidth=function(l){return this._isOpenType()?this._textFont._textWidth(l,this._textSize):this.drawingContext.measureText(l).width},r.default.Renderer2D.prototype._applyTextProperties=function(){var l,h=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),l=this._textFont,this._isOpenType()&&(l=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(l||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===a.CENTER?this.drawingContext.textBaseline=a._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,h},r.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),r.default.Renderer.prototype.push.apply(this)},r.default.Renderer2D.prototype.pop=function(l){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,r.default.Renderer.prototype.pop.call(this,l)};var o=r.default.Renderer2D;i.default=o},{"../image/filters":281,"./constants":250,"./main":260,"./p5.Renderer":263,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.number.to-fixed":169,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179}],265:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.prototype._promisePreloads=[];var a=!(r.default.prototype.registerPromisePreload=function(d){r.default.prototype._promisePreloads.push(d)});r.default.prototype._setupPromisePreloads=function(){var d=!0,p=!1,u=void 0;try{for(var o,l=this._promisePreloads[Symbol.iterator]();!(d=(o=l.next()).done);d=!0){var h=o.value,f=this,m=h.method,g=h.addCallbacks,v=h.legacyPreloadSetup,x=h.target||this,w=x[m].bind(x);if(x===r.default.prototype){if(a)continue;f=null,w=x[m]}x[m]=this._wrapPromisePreload(f,w,g),v&&(x[v.method]=this._legacyPreloadGenerator(f,v,x[m]))}}catch(M){p=!0,u=M}finally{try{d||l.return==null||l.return()}finally{if(p)throw u}}a=!0},r.default.prototype._wrapPromisePreload=function(d,p,u){var o=function(){var l=this;this._incrementPreload();for(var h=null,f=null,m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];if(u)for(var x=g.length-1;0<=x&&!f&&typeof g[x]=="function";x--)f=h,h=g.pop();var w=Promise.resolve(p.apply(this,g));return h&&w.then(h),f&&w.catch(f),w.then(function(){return l._decrementPreload()}),w};return d&&(o=o.bind(d)),o};function c(){return{}}r.default.prototype._legacyPreloadGenerator=function(d,p,u){var o=p.createBaseObject||c,l=function(){var h=this;this._incrementPreload();var f=o.apply(this,arguments);return u.apply(this,arguments).then(function(m){Object.assign(f,m),h._decrementPreload()}),f};return d&&(l=l.bind(d)),l}},{"./main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],266:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s},a=function(o){if(o&&o.__esModule)return o;if(o===null||d(o)!=="object"&&typeof o!="function")return{default:o};var l=c();if(l&&l.has(o))return l.get(o);var h={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in o)if(Object.prototype.hasOwnProperty.call(o,m)){var g=f?Object.getOwnPropertyDescriptor(o,m):null;g&&(g.get||g.set)?Object.defineProperty(h,m,g):h[m]=o[m]}return h.default=o,l&&l.set(o,h),h}(e("./constants"));function c(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return c=function(){return o},o}function d(o){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var p="defaultCanvas0";r.default.prototype.createCanvas=function(o,l,h){r.default._validateParameters("createCanvas",arguments);var f,m=h||a.P2D;if(m===a.WEBGL){if(f=document.getElementById(p)){f.parentNode.removeChild(f);var g=this._renderer;this._elements=this._elements.filter(function(w){return w!==g})}(f=document.createElement("canvas")).id=p,f.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)f=this.canvas;else{f=document.createElement("canvas");for(var v=0;document.getElementById("defaultCanvas".concat(v));)v++;p="defaultCanvas".concat(v),f.id=p,f.classList.add("p5Canvas")}if(this._setupDone||(f.dataset.hidden=!0,f.style.visibility="hidden"),this._userNode)this._userNode.appendChild(f);else{if(document.getElementsByTagName("main").length===0){var x=document.createElement("main");document.body.appendChild(x)}document.getElementsByTagName("main")[0].appendChild(f)}return m===a.WEBGL?(this._setProperty("_renderer",new r.default.RendererGL(f,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new r.default.Renderer2D(f,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(o,l),this._renderer._applyDefaults(),this._renderer},r.default.prototype.resizeCanvas=function(o,l,h){if(r.default._validateParameters("resizeCanvas",arguments),this._renderer){var f={};for(var m in this.drawingContext){var g=this.drawingContext[m];d(g)!=="object"&&typeof g!="function"&&(f[m]=g)}for(var v in this._renderer.resize(o,l),this.width=o,this.height=l,f)try{this.drawingContext[v]=f[v]}catch{}h||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},r.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},r.default.prototype.createGraphics=function(o,l,h){return r.default._validateParameters("createGraphics",arguments),new r.default.Graphics(o,l,h,this)},r.default.prototype.blendMode=function(o){r.default._validateParameters("blendMode",arguments),o===a.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),o=a.BLEND),this._renderer.blendMode(o)};var u=r.default;i.default=u},{"../webgl/p5.RendererGL":314,"./constants":250,"./main":260,"./p5.Graphics":262,"./p5.Renderer2D":264,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],267:[function(e,n,i){function s(o){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}e("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("../main")),a=function(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var l=d();if(l&&l.has(o))return l.get(o);var h={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in o)if(Object.prototype.hasOwnProperty.call(o,m)){var g=f?Object.getOwnPropertyDescriptor(o,m):null;g&&(g.get||g.set)?Object.defineProperty(h,m,g):h[m]=o[m]}return h.default=o,l&&l.set(o,h),h}(e("../constants")),c=p(e("../helpers"));function d(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return d=function(){return o},o}function p(o){return o&&o.__esModule?o:{default:o}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),r.default.prototype._normalizeArcAngles=function(o,l,h,f,m){var g;return o-=a.TWO_PI*Math.floor(o/a.TWO_PI),l-=a.TWO_PI*Math.floor(l/a.TWO_PI),g=Math.min(Math.abs(o-l),a.TWO_PI-Math.abs(o-l)),m&&(o=o<=a.HALF_PI?Math.atan(h/f*Math.tan(o)):o>a.HALF_PI&&o<=3*a.HALF_PI?Math.atan(h/f*Math.tan(o))+a.PI:Math.atan(h/f*Math.tan(o))+a.TWO_PI,l=l<=a.HALF_PI?Math.atan(h/f*Math.tan(l)):l>a.HALF_PI&&l<=3*a.HALF_PI?Math.atan(h/f*Math.tan(l))+a.PI:Math.atan(h/f*Math.tan(l))+a.TWO_PI),l<o&&(l+=a.TWO_PI),{start:o,stop:l,correspondToSamePoint:g<1e-5}},r.default.prototype.arc=function(o,l,h,f,m,g,v,x){if(r.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(m===g)return this;m=this._toRadians(m),g=this._toRadians(g),h=Math.abs(h),f=Math.abs(f);var w=c.default.modeAdjust(o,l,h,f,this._renderer._ellipseMode),M=this._normalizeArcAngles(m,g,w.w,w.h,!0);return M.correspondToSamePoint?this._renderer.ellipse([w.x,w.y,w.w,w.h,x]):(this._renderer.arc(w.x,w.y,w.w,w.h,M.start,M.stop,v,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[w.x,w.y,w.w,w.h,M.start,M.stop,v])),this},r.default.prototype.ellipse=function(o,l,h,f,m){return r.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},r.default.prototype.circle=function(){r.default._validateParameters("circle",arguments);var o=Array.prototype.slice.call(arguments,0,2);return o.push(arguments[2]),o.push(arguments[2]),this._renderEllipse.apply(this,o)},r.default.prototype._renderEllipse=function(o,l,h,f,m){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;h<0&&(h=Math.abs(h)),f===void 0?f=h:f<0&&(f=Math.abs(f));var g=c.default.modeAdjust(o,l,h,f,this._renderer._ellipseMode);return this._renderer.ellipse([g.x,g.y,g.w,g.h,m]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[g.x,g.y,g.w,g.h]),this},r.default.prototype.line=function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];var f;return r.default._validateParameters("line",l),this._renderer._doStroke&&(f=this._renderer).line.apply(f,l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",l),this},r.default.prototype.point=function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];var f;return r.default._validateParameters("point",l),this._renderer._doStroke&&(l.length===1&&l[0]instanceof r.default.Vector?this._renderer.point.call(this._renderer,l[0].x,l[0].y,l[0].z):((f=this._renderer).point.apply(f,l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",l))),this},r.default.prototype.quad=function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];var f;return r.default._validateParameters("quad",l),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&l.length<=12?this._renderer.quad.call(this._renderer,l[0],l[1],0,l[2],l[3],0,l[4],l[5],0,l[6],l[7],0,l[8],l[9]):((f=this._renderer).quad.apply(f,l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",l))),this},r.default.prototype.rect=function(){return r.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},r.default.prototype.square=function(o,l,h,f,m,g,v){return r.default._validateParameters("square",arguments),this._renderRect.call(this,o,l,h,h,f,m,g,v)},r.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var o=c.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),l=[o.x,o.y,o.w,o.h],h=4;h<arguments.length;h++)l[h]=arguments[h];this._renderer.rect(l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[o.x,o.y,o.w,o.h])}return this},r.default.prototype.triangle=function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return r.default._validateParameters("triangle",l),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",l),this};var u=r.default;i.default=u},{"../constants":250,"../friendly_errors/fes_core":252,"../friendly_errors/file_errors":253,"../friendly_errors/validate_params":255,"../helpers":256,"../main":260,"core-js/modules/es.array.slice":160}],268:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}a.default.prototype.ellipseMode=function(u){return a.default._validateParameters("ellipseMode",arguments),u!==c.CORNER&&u!==c.CORNERS&&u!==c.RADIUS&&u!==c.CENTER||(this._renderer._ellipseMode=u),this},a.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},a.default.prototype.rectMode=function(u){return a.default._validateParameters("rectMode",arguments),u!==c.CORNER&&u!==c.CORNERS&&u!==c.RADIUS&&u!==c.CENTER||(this._renderer._rectMode=u),this},a.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},a.default.prototype.strokeCap=function(u){return a.default._validateParameters("strokeCap",arguments),u!==c.ROUND&&u!==c.SQUARE&&u!==c.PROJECT||this._renderer.strokeCap(u),this},a.default.prototype.strokeJoin=function(u){return a.default._validateParameters("strokeJoin",arguments),u!==c.ROUND&&u!==c.BEVEL&&u!==c.MITER||this._renderer.strokeJoin(u),this},a.default.prototype.strokeWeight=function(u){return a.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(u),this};var p=a.default;i.default=p},{"../constants":250,"../main":260}],269:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),r.default.prototype.bezier=function(){for(var c,d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return r.default._validateParameters("bezier",p),(this._renderer._doStroke||this._renderer._doFill)&&(c=this._renderer).bezier.apply(c,p),this},r.default.prototype.bezierDetail=function(c){return r.default._validateParameters("bezierDetail",arguments),this._bezierDetail=c,this},r.default.prototype.bezierPoint=function(c,d,p,u,o){r.default._validateParameters("bezierPoint",arguments);var l=1-o;return Math.pow(l,3)*c+3*Math.pow(l,2)*o*d+3*l*Math.pow(o,2)*p+Math.pow(o,3)*u},r.default.prototype.bezierTangent=function(c,d,p,u,o){r.default._validateParameters("bezierTangent",arguments);var l=1-o;return 3*u*Math.pow(o,2)-3*p*Math.pow(o,2)+6*p*l*o-6*d*l*o+3*d*Math.pow(l,2)-3*c*Math.pow(l,2)},r.default.prototype.curve=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];var u;return r.default._validateParameters("curve",d),this._renderer._doStroke&&(u=this._renderer).curve.apply(u,d),this},r.default.prototype.curveDetail=function(c){return r.default._validateParameters("curveDetail",arguments),this._curveDetail=c<3?3:c,this},r.default.prototype.curveTightness=function(c){return r.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=c,this},r.default.prototype.curvePoint=function(c,d,p,u,o){r.default._validateParameters("curvePoint",arguments);var l=o*o*o,h=o*o;return c*(-.5*l+h-.5*o)+d*(1.5*l-2.5*h+1)+p*(-1.5*l+2*h+.5*o)+u*(.5*l-.5*h)},r.default.prototype.curveTangent=function(c,d,p,u,o){r.default._validateParameters("curveTangent",arguments);var l=o*o;return c*(-3*l/2+2*o-.5)+d*(9*l/2-5*o)+p*(-9*l/2+4*o+.5)+u*(3*l/2-o)};var a=r.default;i.default=a},{"../friendly_errors/fes_core":252,"../friendly_errors/file_errors":253,"../friendly_errors/validate_params":255,"../main":260}],270:[function(e,n,i){function s(x){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}e("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r},c=function(x){if(x&&x.__esModule)return x;if(x===null||s(x)!=="object"&&typeof x!="function")return{default:x};var w=d();if(w&&w.has(x))return w.get(x);var M={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in x)if(Object.prototype.hasOwnProperty.call(x,E)){var I=A?Object.getOwnPropertyDescriptor(x,E):null;I&&(I.get||I.set)?Object.defineProperty(M,E,I):M[E]=x[E]}return M.default=x,w&&w.set(x,M),M}(e("../constants"));function d(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return d=function(){return x},x}var p=null,u=[],o=[],l=!1,h=!1,f=!1,m=!1,g=!0;a.default.prototype.beginContour=function(){return o=[],m=!0,this},a.default.prototype.beginShape=function(x){var w;return a.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(w=this._renderer).beginShape.apply(w,arguments):(p=x===c.POINTS||x===c.LINES||x===c.TRIANGLES||x===c.TRIANGLE_FAN||x===c.TRIANGLE_STRIP||x===c.QUADS||x===c.QUAD_STRIP?x:null,u=[],o=[]),this},a.default.prototype.bezierVertex=function(){for(var x=arguments.length,w=new Array(x),M=0;M<x;M++)w[M]=arguments[M];var A;if(a.default._validateParameters("bezierVertex",w),this._renderer.isP3D)(A=this._renderer).bezierVertex.apply(A,w);else if(u.length===0)a.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{l=!0;for(var E=[],I=0;I<w.length;I++)E[I]=w[I];E.isVert=!1,m?o.push(E):u.push(E)}return this},a.default.prototype.curveVertex=function(){for(var x=arguments.length,w=new Array(x),M=0;M<x;M++)w[M]=arguments[M];var A;return a.default._validateParameters("curveVertex",w),this._renderer.isP3D?(A=this._renderer).curveVertex.apply(A,w):(h=!0,this.vertex(w[0],w[1])),this},a.default.prototype.endContour=function(){var x=o[0].slice();x.isVert=o[0].isVert,x.moveTo=!1,o.push(x),g&&(u.push(u[0]),g=!1);for(var w=0;w<o.length;w++)u.push(o[w]);return this},a.default.prototype.endShape=function(x){if(a.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(x,h,l,f,m,p);else{if(u.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var w=x===c.CLOSE;w&&!m&&u.push(u[0]),this._renderer.endShape(x,u,h,l,f,m,p),g=!(m=f=l=h=!1),w&&u.pop()}return this},a.default.prototype.quadraticVertex=function(){for(var x=arguments.length,w=new Array(x),M=0;M<x;M++)w[M]=arguments[M];if(a.default._validateParameters("quadraticVertex",w),this._renderer.isP3D){var A;(A=this._renderer).quadraticVertex.apply(A,w)}else{if(this._contourInited){var E={};return E.x=w[0],E.y=w[1],E.x3=w[2],E.y3=w[3],E.type=c.QUADRATIC,this._contourVertices.push(E),this}if(0<u.length){f=!0;for(var I=[],R=0;R<w.length;R++)I[R]=w[R];I.isVert=!1,m?o.push(I):u.push(I)}else a.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},a.default.prototype.vertex=function(x,w,M,A,E){if(this._renderer.isP3D){var I;(I=this._renderer).vertex.apply(I,arguments)}else{var R=[];R.isVert=!0,R[0]=x,R[1]=w,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),M&&(R.moveTo=M),m?(o.length===0&&(R.moveTo=!0),o.push(R)):u.push(R)}return this},a.default.prototype.normal=function(x,w,M){var A;return this._assert3d("normal"),a.default._validateParameters("normal",arguments),(A=this._renderer).normal.apply(A,arguments),this};var v=a.default;i.default=v},{"../constants":250,"../main":260,"core-js/modules/es.array.slice":160}],271:[function(e,n,i){function s(r){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(r)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r,a){window.setTimeout(r,1e3/60)},typeof Uint8ClampedArray=="undefined"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var r=Object.keys,a=Object.defineProperty,c=typeof Symbol=="function"&&s(Symbol())==="symbol",d=Object.prototype.propertyIsEnumerable,p=function(u){return function(o){return d.call(u,o)}};a(Object,"assign",{value:function(u,o){if(u==null)throw new TypeError("target must be an object");var l,h,f,m,g=Object(u);for(l=1;l<arguments.length;++l)for(h=Object(arguments[l]),m=r(h),c&&Object.getOwnPropertySymbols&&m.push.apply(m,Object.getOwnPropertySymbols(h).filter(p(h))),f=0;f<m.length;++f)g[m[f]]=h[m[f]];return g},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-clamped-array":224,"core-js/modules/web.dom-collections.iterator":226}],272:[function(e,n,i){e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var c=this._styles.pop();c?(this._renderer.pop(c.renderer),Object.assign(this,c.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(c){if(!this._inUserDraw&&this._setupDone){var d=parseInt(c);(isNaN(d)||d<1)&&(d=1);var p=this._isGlobal?window:this;if(typeof p.draw=="function"){p.setup===void 0&&p.scale(p._pixelDensity,p._pixelDensity);for(var u=function(l){l.call(p)},o=0;o<d;o++){p.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),p._renderer.isP3D&&p._renderer._update(),p._setProperty("frameCount",p.frameCount+1),p._registeredMethods.pre.forEach(u),this._inUserDraw=!0;try{p.draw()}finally{this._inUserDraw=!1}p._registeredMethods.post.forEach(u)}}}};var a=r.default;i.default=a},{"./main":260,"core-js/modules/es.array.for-each":152,"core-js/modules/es.object.assign":170,"core-js/modules/web.dom-collections.for-each":225}],273:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};function a(d){return function(p){if(Array.isArray(p)){for(var u=0,o=new Array(p.length);u<p.length;u++)o[u]=p[u];return o}}(d)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.applyMatrix=function(){var d,p,u=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||u?(d=this._renderer).applyMatrix.apply(d,a(arguments[0])):(p=this._renderer).applyMatrix.apply(p,arguments),this},r.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.default.prototype.rotate=function(d,p){return r.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(d),p),this},r.default.prototype.rotateX=function(d){return this._assert3d("rotateX"),r.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(d)),this},r.default.prototype.rotateY=function(d){return this._assert3d("rotateY"),r.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(d)),this},r.default.prototype.rotateZ=function(d){return this._assert3d("rotateZ"),r.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(d)),this},r.default.prototype.scale=function(d,p,u){if(r.default._validateParameters("scale",arguments),d instanceof r.default.Vector){var o=d;d=o.x,p=o.y,u=o.z}else if(d instanceof Array){var l=d;d=l[0],p=l[1],u=l[2]||1}return isNaN(p)?p=u=d:isNaN(u)&&(u=1),this._renderer.scale.call(this._renderer,d,p,u),this},r.default.prototype.shearX=function(d){r.default._validateParameters("shearX",arguments);var p=this._toRadians(d);return this._renderer.applyMatrix(1,0,Math.tan(p),1,0,0),this},r.default.prototype.shearY=function(d){r.default._validateParameters("shearY",arguments);var p=this._toRadians(d);return this._renderer.applyMatrix(1,Math.tan(p),0,1,0,0),this},r.default.prototype.translate=function(d,p,u){return r.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(d,p,u):this._renderer.translate(d,p),this};var c=r.default;i.default=c},{"./main":260,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.get-prototype-of":172,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226}],274:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(d){return function(p){if(Array.isArray(p)){for(var u=0,o=new Array(p.length);u<p.length;u++)o[u]=p[u];return o}}(d)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(d){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}r.default.prototype.storeItem=function(d,p){typeof d!="string"&&console.log("The argument that you passed to storeItem() - ".concat(d," is not a string.")),d.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(d," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var u=c(p);switch(u){case"number":case"boolean":p=p.toString();break;case"object":p instanceof r.default.Color?u="p5.Color":p instanceof r.default.Vector&&(u="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(d,p);var o="".concat(d,"p5TypeID");localStorage.setItem(o,u)},r.default.prototype.getItem=function(d){var p=localStorage.getItem(d),u=localStorage.getItem("".concat(d,"p5TypeID"));if(u===void 0)console.log("Unable to determine type of item stored under ".concat(d,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(u){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,a(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,a(p))}return p},r.default.prototype.clearStorage=function(){localStorage.clear()},r.default.prototype.removeItem=function(d){typeof d!="string"&&console.log("The argument that you passed to removeItem() - ".concat(d," is not a string.")),localStorage.removeItem(d),localStorage.removeItem("".concat(d,"p5TypeID"))}},{"../core/main":260,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.ends-with":181,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],275:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.createStringDict=function(c,d){return r.default._validateParameters("createStringDict",arguments),new r.default.StringDict(c,d)},r.default.prototype.createNumberDict=function(c,d){return r.default._validateParameters("createNumberDict",arguments),new r.default.NumberDict(c,d)},r.default.TypedDict=function(c,d){return c instanceof Object?this.data=c:(this.data={},this.data[c]=d),this},r.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},r.default.TypedDict.prototype.hasKey=function(c){return this.data.hasOwnProperty(c)},r.default.TypedDict.prototype.get=function(c){if(this.data.hasOwnProperty(c))return this.data[c];console.log("".concat(c," does not exist in this Dictionary"))},r.default.TypedDict.prototype.set=function(c,d){this._validate(d)?this.data[c]=d:console.log("Those values dont work for this dictionary type.")},r.default.TypedDict.prototype._addObj=function(c){for(var d in c)this.set(d,c[d])},r.default.TypedDict.prototype.create=function(c,d){c instanceof Object&&d===void 0?this._addObj(c):c!==void 0?this.set(c,d):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},r.default.TypedDict.prototype.clear=function(){this.data={}},r.default.TypedDict.prototype.remove=function(c){if(!this.data.hasOwnProperty(c))throw new Error("".concat(c," does not exist in this Dictionary"));delete this.data[c]},r.default.TypedDict.prototype.print=function(){for(var c in this.data)console.log("key:".concat(c," value:").concat(this.data[c]))},r.default.TypedDict.prototype.saveTable=function(c){var d="";for(var p in this.data)d+="".concat(p,",").concat(this.data[p],`
`);var u=new Blob([d],{type:"text/csv"});r.default.prototype.downloadFile(u,c||"mycsv","csv")},r.default.TypedDict.prototype.saveJSON=function(c,d){r.default.prototype.saveJSON(this.data,c,d)},r.default.TypedDict.prototype._validate=function(c){return!0},r.default.StringDict=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];r.default.TypedDict.apply(this,d)},r.default.StringDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.StringDict.prototype._validate=function(c){return typeof c=="string"},r.default.NumberDict=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];r.default.TypedDict.apply(this,d)},r.default.NumberDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.NumberDict.prototype._validate=function(c){return typeof c=="number"},r.default.NumberDict.prototype.add=function(c,d){this.data.hasOwnProperty(c)?this.data[c]+=d:console.log("The key - ".concat(c," does not exist in this dictionary."))},r.default.NumberDict.prototype.sub=function(c,d){this.add(c,-d)},r.default.NumberDict.prototype.mult=function(c,d){this.data.hasOwnProperty(c)?this.data[c]*=d:console.log("The key - ".concat(c," does not exist in this dictionary."))},r.default.NumberDict.prototype.div=function(c,d){this.data.hasOwnProperty(c)?this.data[c]/=d:console.log("The key - ".concat(c," does not exist in this dictionary."))},r.default.NumberDict.prototype._valueTest=function(c){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var d=this.data[Object.keys(this.data)[0]];for(var p in this.data)this.data[p]*c<d*c&&(d=this.data[p]);return d},r.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},r.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},r.default.NumberDict.prototype._keyTest=function(c){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var d=Object.keys(this.data)[0],p=1;p<Object.keys(this.data).length;p++)Object.keys(this.data)[p]*c<d*c&&(d=Object.keys(this.data)[p]);return d},r.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},r.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var a=r.default.TypedDict;i.default=a},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.object.keys":173,"core-js/modules/es.string.sub":189}],276:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}function c(o,l,h){(l._userNode?l._userNode:document.body).appendChild(o);var f=h?new r.default.MediaElement(o,l):new r.default.Element(o,l);return l._elements.push(f),f}function d(o,l,h,f){var m=document.createElement(l);typeof(h=h||"")=="string"&&(h=[h]);var g=!0,v=!1,x=void 0;try{for(var w,M=h[Symbol.iterator]();!(g=(w=M.next()).done);g=!0){var A=w.value,E=document.createElement("source");E.setAttribute("src",A),m.appendChild(E)}}catch(R){v=!0,x=R}finally{try{g||M.return==null||M.return()}finally{if(v)throw x}}typeof f=="function"&&m.addEventListener("canplaythrough",function R(){f(),m.removeEventListener("canplaythrough",R)});var I=c(m,o,!0);return I.loadedmetadata=!1,m.addEventListener("loadedmetadata",function(){I.width=m.videoWidth,I.height=m.videoHeight,I.elt.width===0&&(I.elt.width=m.videoWidth),I.elt.height===0&&(I.elt.height=m.videoHeight),I.presetPlaybackRate&&(I.elt.playbackRate=I.presetPlaybackRate,delete I.presetPlaybackRate),I.loadedmetadata=!0}),I}r.default.prototype.select=function(o,l){r.default._validateParameters("select",arguments);var h=this._getContainer(l).querySelector(o);return h?this._wrapElement(h):null},r.default.prototype.selectAll=function(o,l){r.default._validateParameters("selectAll",arguments);var h=[],f=this._getContainer(l).querySelectorAll(o);if(f)for(var m=0;m<f.length;m++){var g=this._wrapElement(f[m]);h.push(g)}return h},r.default.prototype._getContainer=function(o){var l=document;return typeof o=="string"?l=document.querySelector(o)||document:o instanceof r.default.Element?l=o.elt:o instanceof HTMLElement&&(l=o),l},r.default.prototype._wrapElement=function(o){var l=Array.prototype.slice.call(o.children);if(o.tagName!=="INPUT"||o.type!=="checkbox")return o.tagName==="VIDEO"||o.tagName==="AUDIO"?new r.default.MediaElement(o,this):o.tagName==="SELECT"?this.createSelect(new r.default.Element(o,this)):0<l.length&&l.every(function(f){return f.tagName==="INPUT"||f.tagName==="LABEL"})?this.createRadio(new r.default.Element(o,this)):new r.default.Element(o,this);var h=new r.default.Element(o,this);return h.checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},h},r.default.prototype.removeElements=function(o){r.default._validateParameters("removeElements",arguments),this._elements.filter(function(l){return!(l.elt instanceof HTMLCanvasElement)}).map(function(l){return l.remove()})},r.default.Element.prototype.changed=function(o){return r.default.Element._adjustListener("change",o,this),this},r.default.Element.prototype.input=function(o){return r.default.Element._adjustListener("input",o,this),this},r.default.prototype.createDiv=function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("div");return l.innerHTML=o,c(l,this)},r.default.prototype.createP=function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("p");return l.innerHTML=o,c(l,this)},r.default.prototype.createSpan=function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("span");return l.innerHTML=o,c(l,this)},r.default.prototype.createImg=function(){r.default._validateParameters("createImg",arguments);var o,l=document.createElement("img"),h=arguments;return 1<h.length&&typeof h[1]=="string"&&(l.alt=h[1]),2<h.length&&typeof h[2]=="string"&&(l.crossOrigin=h[2]),l.src=h[0],o=c(l,this),l.addEventListener("load",function(){o.width=l.offsetWidth||l.width,o.height=l.offsetHeight||l.height;var f=h[h.length-1];typeof f=="function"&&f(o)}),o},r.default.prototype.createA=function(o,l,h){r.default._validateParameters("createA",arguments);var f=document.createElement("a");return f.href=o,f.innerHTML=l,h&&(f.target=h),c(f,this)},r.default.prototype.createSlider=function(o,l,h,f){r.default._validateParameters("createSlider",arguments);var m=document.createElement("input");return m.type="range",m.min=o,m.max=l,f===0?m.step=1e-18:f&&(m.step=f),typeof h=="number"&&(m.value=h),c(m,this)},r.default.prototype.createButton=function(o,l){r.default._validateParameters("createButton",arguments);var h=document.createElement("button");return h.innerHTML=o,l&&(h.value=l),c(h,this)},r.default.prototype.createCheckbox=function(){r.default._validateParameters("createCheckbox",arguments);var o=document.createElement("div"),l=document.createElement("input");l.type="checkbox",o.appendChild(l);var h=c(o,this);if(h.checked=function(){var g=h.elt.getElementsByTagName("input")[0];if(g){if(arguments.length===0)return g.checked;g.checked=!!arguments[0]}return h},this.value=function(g){return h.value=g,this},arguments[0]){var f=Math.random().toString(36).slice(2),m=document.createElement("label");l.setAttribute("id",f),m.htmlFor=f,h.value(arguments[0]),m.appendChild(document.createTextNode(arguments[0])),o.appendChild(m)}return arguments[1]&&(l.checked=!0),h},r.default.prototype.createSelect=function(){var o;r.default._validateParameters("createSelect",arguments);var l=arguments[0];if(l instanceof r.default.Element&&l.elt instanceof HTMLSelectElement)o=l,this.elt=l.elt;else if(l instanceof HTMLSelectElement)o=c(l,this),this.elt=l;else{var h=document.createElement("select");l&&typeof l=="boolean"&&h.setAttribute("multiple","true"),o=c(h,this),this.elt=h}return o.option=function(f,m){var g;if(f!==void 0){for(var v=0;v<this.elt.length;v+=1)if(this.elt[v].innerHTML===f){g=v;break}if(g!==void 0)m===!1?this.elt.remove(g):this.elt[g].value=m;else{var x=document.createElement("option");x.innerHTML=f,x.value=m===void 0?f:m,this.elt.appendChild(x),this._pInst._elements.push(x)}}},o.selected=function(f){if(f!==void 0){for(var m=0;m<this.elt.length;m+=1)this.elt[m].value.toString()===f.toString()&&(this.elt.selectedIndex=m);return this}if(this.elt.getAttribute("multiple")){var g=[],v=!0,x=!1,w=void 0;try{for(var M,A=this.elt.selectedOptions[Symbol.iterator]();!(v=(M=A.next()).done);v=!0){var E=M.value;g.push(E.value)}}catch(I){x=!0,w=I}finally{try{v||A.return==null||A.return()}finally{if(x)throw w}}return g}return this.elt.value},o.disable=function(f){if(typeof f=="string")for(var m=0;m<this.elt.length;m++)this.elt[m].value.toString()===f&&(this.elt[m].disabled=!0,this.elt[m].selected=!1);else this.elt.disabled=!0;return this},o},r.default.prototype.createRadio=function(){var o,l,h=arguments[0];h instanceof HTMLDivElement||h instanceof HTMLSpanElement?(o=h,typeof arguments[1]=="string"&&(l=arguments[1])):(typeof h=="string"&&(l=h),o=document.createElement("div"));var f=c(this.elt=o,this);f._name=l||"radioOption";function m(v){return v instanceof HTMLInputElement&&v.type==="radio"}function g(v){return v.nextElementSibling instanceof HTMLLabelElement}return f._getOptionsArray=function(){return Array.from(this.elt.children).filter(m)},f.option=function(v,x){var w,M,A=!0,E=!1,I=void 0;try{for(var R,P=f._getOptionsArray()[Symbol.iterator]();!(A=(R=P.next()).done);A=!0){var D=R.value;if(D.value===v){w=D;break}}}catch(O){E=!0,I=O}finally{try{A||P.return==null||P.return()}finally{if(E)throw I}}return w===void 0&&((w=document.createElement("input")).setAttribute("type","radio"),w.setAttribute("value",v),this.elt.appendChild(w)),g(w)?M=w.nextElementSibling:(M=document.createElement("label"),w.insertAdjacentElement("afterend",M)),M.innerHTML=x===void 0?v:x,w.setAttribute("name",f._name),w},f.remove=function(v){var x=!0,w=!1,M=void 0;try{for(var A,E=f._getOptionsArray()[Symbol.iterator]();!(x=(A=E.next()).done);x=!0){var I=A.value;if(I.value===v)return g(I)&&I.nextElementSibling.remove(),void I.remove()}}catch(R){w=!0,M=R}finally{try{x||E.return==null||E.return()}finally{if(w)throw M}}},f.value=function(){var v="",x=!0,w=!1,M=void 0;try{for(var A,E=f._getOptionsArray()[Symbol.iterator]();!(x=(A=E.next()).done);x=!0){var I=A.value;if(I.checked){v=I.value;break}}}catch(R){w=!0,M=R}finally{try{x||E.return==null||E.return()}finally{if(w)throw M}}return v},f.selected=function(v){var x=null;if(v===void 0){var w=!0,M=!1,A=void 0;try{for(var E,I=f._getOptionsArray()[Symbol.iterator]();!(w=(E=I.next()).done);w=!0){var R=E.value;if(R.checked){x=R;break}}}catch(X){M=!0,A=X}finally{try{w||I.return==null||I.return()}finally{if(M)throw A}}}else{var P=!0,D=!1,O=void 0;try{for(var j,N=f._getOptionsArray()[Symbol.iterator]();!(P=(j=N.next()).done);P=!0){var q=j.value;q.value===v&&(q.setAttribute("checked",!0),x=q)}}catch(X){D=!0,O=X}finally{try{P||N.return==null||N.return()}finally{if(D)throw O}}}return x},f.disable=function(){var v=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],x=!0,w=!1,M=void 0;try{for(var A,E=f._getOptionsArray()[Symbol.iterator]();!(x=(A=E.next()).done);x=!0)A.value.setAttribute("disabled",v)}catch(I){w=!0,M=I}finally{try{x||E.return==null||E.return()}finally{if(w)throw M}}},f},r.default.prototype.createColorPicker=function(o){r.default._validateParameters("createColorPicker",arguments);var l,h=document.createElement("input");return h.type="color",o?o instanceof r.default.Color?h.value=o.toString("#rrggbb"):(r.default.prototype._colorMode="rgb",r.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},h.value=r.default.prototype.color(o).toString("#rrggbb")):h.value="#000000",(l=c(h,this)).color=function(){return o&&(o.mode&&(r.default.prototype._colorMode=o.mode),o.maxes&&(r.default.prototype._colorMaxes=o.maxes)),r.default.prototype.color(this.elt.value)},l},r.default.prototype.createInput=function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";r.default._validateParameters("createInput",arguments);var h=document.createElement("input");return h.setAttribute("value",o),h.setAttribute("type",l),c(h,this)},r.default.prototype.createFileInput=function(o){var l=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(r.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var h=document.createElement("input");return h.setAttribute("type","file"),l&&h.setAttribute("multiple",!0),h.addEventListener("change",function(f){var m=!0,g=!1,v=void 0;try{for(var x,w=f.target.files[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var M=x.value;r.default.File._load(M,o)}}catch(A){g=!0,v=A}finally{try{m||w.return==null||w.return()}finally{if(g)throw v}}},!1),c(h,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},r.default.prototype.createVideo=function(o,l){return r.default._validateParameters("createVideo",arguments),d(this,"video",o,l)},r.default.prototype.createAudio=function(o,l){return r.default._validateParameters("createAudio",arguments),d(this,"audio",o,l)},r.default.prototype.VIDEO="video",r.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(o){var l=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return l?new Promise(function(h,f){l.call(navigator,o,h,f)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),r.default.prototype.createCapture=function(){if(r.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var o,l,h=!0,f=!0,m=!0,g=!1,v=void 0;try{for(var x,w=arguments[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var M=x.value;M===r.default.prototype.VIDEO?f=!1:M===r.default.prototype.AUDIO?h=!1:a(M)==="object"?o=M:typeof M=="function"&&(l=M)}}catch(I){g=!0,v=I}finally{try{m||w.return==null||w.return()}finally{if(g)throw v}}o=o||{video:h,audio:f};var A=document.createElement("video");A.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(o).then(function(I){try{"srcObject"in A?A.srcObject=I:A.src=window.URL.createObjectURL(I)}catch{A.src=I}},console.log);var E=c(A,this,!0);return E.loadedmetadata=!1,A.addEventListener("loadedmetadata",function(){A.play(),A.width?(E.width=A.width,E.height=A.height):(E.width=E.elt.width=A.videoWidth,E.height=E.elt.height=A.videoHeight),E.loadedmetadata=!0,l&&l(A.srcObject)}),E},r.default.prototype.createElement=function(o,l){r.default._validateParameters("createElement",arguments);var h=document.createElement(o);return l!==void 0&&(h.innerHTML=l),c(h,this)},r.default.Element.prototype.addClass=function(o){return this.elt.className?this.hasClass(o)||(this.elt.className=this.elt.className+" "+o):this.elt.className=o,this},r.default.Element.prototype.removeClass=function(o){return this.elt.classList.remove(o),this},r.default.Element.prototype.hasClass=function(o){return this.elt.classList.contains(o)},r.default.Element.prototype.toggleClass=function(o){return this.elt.classList.contains(o)?this.elt.classList.remove(o):this.elt.classList.add(o),this},r.default.Element.prototype.child=function(o){return o===void 0?this.elt.childNodes:(typeof o=="string"?(o[0]==="#"&&(o=o.substring(1)),o=document.getElementById(o)):o instanceof r.default.Element&&(o=o.elt),o instanceof HTMLElement&&this.elt.appendChild(o),this)},r.default.Element.prototype.center=function(o){var l=this.elt.style.display,h=this.elt.style.display==="none",f=this.parent().style.display==="none",m={x:this.elt.offsetLeft,y:this.elt.offsetTop};h&&this.show(),f&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var g=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),v=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return o==="both"||o===void 0?this.position(g/2+this.parent().offsetLeft,v/2+this.parent().offsetTop):o==="horizontal"?this.position(g/2+this.parent().offsetLeft,m.y):o==="vertical"&&this.position(m.x,v/2+this.parent().offsetTop),this.style("display",l),h&&this.hide(),f&&this.parent().hide(),this},r.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},r.default.Element.prototype.position=function(){if(arguments.length===0)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var o="absolute";return arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"||(o=arguments[2]),this.elt.style.position=o,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},r.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var o="";return this.elt.style.transform&&(o=(o=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=o,this},r.default.Element.prototype._rotate=function(){var o="";return this.elt.style.transform&&(o=(o=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=o,this},r.default.Element.prototype.style=function(o,l){if(l instanceof r.default.Color&&(l="rgba("+l.levels[0]+","+l.levels[1]+","+l.levels[2]+","+l.levels[3]/255+")"),l===void 0){if(o.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(o);for(var h=o.split(";"),f=0;f<h.length;f++){var m=h[f].split(":");m[0]&&m[1]&&(this.elt.style[m[0].trim()]=m[1].trim())}}else if(this.elt.style[o]=l,o==="width"||o==="height"||o==="left"||o==="top"){var g=window.getComputedStyle(this.elt).getPropertyValue(o).replace(/\D+/g,"");this[o]=parseInt(g,10)}return this},r.default.Element.prototype.attribute=function(o,l){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return l===void 0?this.elt.getAttribute(o):(this.elt.setAttribute(o,l),this);if(l===void 0)return this.elt.firstChild.getAttribute(o);for(var h=0;h<this.elt.childNodes.length;h++)this.elt.childNodes[h].setAttribute(o,l)},r.default.Element.prototype.removeAttribute=function(o){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var l=0;l<this.elt.childNodes.length;l++)this.elt.childNodes[l].removeAttribute(o);return this.elt.removeAttribute(o),this},r.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},r.default.Element.prototype.show=function(){return this.elt.style.display="block",this},r.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},r.default.Element.prototype.size=function(o,l){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var h=o,f=l,m=r.default.prototype.AUTO;if(h!==m||f!==m){if(h===m?h=l*this.width/this.height:f===m&&(f=o*this.height/this.width),this.elt instanceof HTMLCanvasElement){var g,v={},x=this.elt.getContext("2d");for(g in x)v[g]=x[g];for(g in this.elt.setAttribute("width",h*this._pInst._pixelDensity),this.elt.setAttribute("height",f*this._pInst._pixelDensity),this.elt.style.width=h+"px",this.elt.style.height=f+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),v)this.elt.getContext("2d")[g]=v[g]}else this.elt.style.width=h+"px",this.elt.style.height=f+"px",this.elt.width=h,this.elt.height=f;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},r.default.Element.prototype.remove=function(){if(this instanceof r.default.MediaElement){this.stop();var o=this.elt.srcObject;o!==null&&o.getTracks().forEach(function(f){f.stop()})}var l=this._pInst._elements.indexOf(this);for(var h in l!==-1&&this._pInst._elements.splice(l,1),this._events)this.elt.removeEventListener(h,this._events[h]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},r.default.Element.prototype.drop=function(o,l){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var h=function(f){f.preventDefault()};this.elt.addEventListener("dragover",h),this.elt.addEventListener("dragleave",h)}r.default.Element._attachListener("drop",function(f){f.preventDefault(),typeof l=="function"&&l.call(this,f);for(var m=f.dataTransfer.files,g=0;g<m.length;g++){var v=m[g];r.default.File._load(v,o)}},this)}else console.log("The File APIs are not fully supported in this browser.");return this},r.default.MediaElement=function(o,l){r.default.Element.call(this,o,l);var h=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(h,"src",{get:function(){var f=h.elt.children[0].src,m=h.elt.src===window.location.href?"":h.elt.src;return f===window.location.href?m:f},set:function(f){for(var m=0;m<h.elt.children.length;m++)h.elt.removeChild(h.elt.children[m]);var g=document.createElement("source");g.src=f,o.appendChild(g),h.elt.src=f,h.modified=!0}}),h._onended=function(){},h.elt.onended=function(){h._onended(h)}},r.default.MediaElement.prototype=Object.create(r.default.Element.prototype),r.default.MediaElement.prototype.play=function(){var o,l=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),(o=(1<this.elt.readyState||this.elt.load(),this.elt.play()))&&o.catch&&o.catch(function(h){h.name==="NotAllowedError"?r.default._friendlyAutoplayError(l.src):console.error("Media play method encountered an unexpected error",h)}),this},r.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},r.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},r.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},r.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},r.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var o=this,l=setTimeout(function(){return r.default._friendlyAutoplayError(o.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(l)},{passive:!0,once:!0})},r.default.MediaElement.prototype.autoplay=function(o){var l=this,h=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",o),o&&!h){var f=function(){return l._setupAutoplayFailDetection()};this.elt.readyState===4?f():this.elt.addEventListener("canplay",f,{passive:!0,once:!0})}return this},r.default.MediaElement.prototype.volume=function(o){if(o===void 0)return this.elt.volume;this.elt.volume=o},r.default.MediaElement.prototype.speed=function(o){if(o===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=o:this.presetPlaybackRate=o},r.default.MediaElement.prototype.time=function(o){return o===void 0?this.elt.currentTime:(this.elt.currentTime=o,this)},r.default.MediaElement.prototype.duration=function(){return this.elt.duration},r.default.MediaElement.prototype.pixels=[],r.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},r.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),r.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},r.default.MediaElement.prototype.updatePixels=function(o,l,h,f){return this.loadedmetadata&&(this._ensureCanvas(),r.default.Renderer2D.prototype.updatePixels.call(this,o,l,h,f)),this.setModified(!0),this},r.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),r.default.Renderer2D.prototype.get.apply(this,arguments)},r.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),r.default.Renderer2D.prototype._getPixel.apply(this,arguments)},r.default.MediaElement.prototype.set=function(o,l,h){this.loadedmetadata&&(this._ensureCanvas(),r.default.Renderer2D.prototype.set.call(this,o,l,h),this.setModified(!0))},r.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),r.default.prototype.copy.apply(this,arguments)},r.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),r.default.Image.prototype.mask.apply(this,arguments)},r.default.MediaElement.prototype.isModified=function(){return this._modified},r.default.MediaElement.prototype.setModified=function(o){this._modified=o},r.default.MediaElement.prototype.onended=function(o){return this._onended=o,this},r.default.MediaElement.prototype.connect=function(o){var l,h;if(typeof r.default.prototype.getAudioContext=="function")l=r.default.prototype.getAudioContext(),h=r.default.soundOut.input;else try{h=(l=o.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=l.createMediaElementSource(this.elt),this.audioSourceNode.connect(h)),o?o.input?this.audioSourceNode.connect(o.input):this.audioSourceNode.connect(o):this.audioSourceNode.connect(h)},r.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},r.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},r.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function p(o,l,h,f){this.callback=o,this.time=l,this.id=h,this.val=f}r.default.MediaElement.prototype.addCue=function(o,l,h){var f=this._cueIDCounter++,m=new p(l,o,f,h);return this._cues.push(m),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),f},r.default.MediaElement.prototype.removeCue=function(o){for(var l=0;l<this._cues.length;l++)this._cues[l].id===o&&(console.log(o),this._cues.splice(l,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},r.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},r.default.MediaElement.prototype._onTimeUpdate=function(){for(var o=this.time(),l=0;l<this._cues.length;l++){var h=this._cues[l].time,f=this._cues[l].val;this._prevTime<h&&h<=o&&this._cues[l].callback(f)}this._prevTime=o},r.default.File=function(o,l){this.file=o,this._pInst=l;var h=o.type.split("/");this.type=h[0],this.subtype=h[1],this.name=o.name,this.size=o.size,this.data=void 0},r.default.File._createLoader=function(o,l){var h=new FileReader;return h.onload=function(f){var m=new r.default.File(o);if(m.file.type==="application/json")m.data=JSON.parse(f.target.result);else if(m.file.type==="text/xml"){var g=new DOMParser().parseFromString(f.target.result,"text/xml");m.data=new r.default.XML(g.documentElement)}else m.data=f.target.result;l(m)},h},r.default.File._load=function(o,l){if(/^text\//.test(o.type)||o.type==="application/json")r.default.File._createLoader(o,l).readAsText(o);else if(/^(video|audio)\//.test(o.type)){var h=new r.default.File(o);h.data=URL.createObjectURL(o),l(h)}else r.default.File._createLoader(o,l).readAsDataURL(o)};var u=r.default;i.default=u},{"../core/main":260,"core-js/modules/es.array.every":149,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.from":153,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226,"core-js/modules/web.url":228}],277:[function(e,n,i){function s(x){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(x){if(x&&x.__esModule)return x;if(x===null||s(x)!=="object"&&typeof x!="function")return{default:x};var w=d();if(w&&w.has(x))return w.get(x);var M={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in x)if(Object.prototype.hasOwnProperty.call(x,E)){var I=A?Object.getOwnPropertyDescriptor(x,E):null;I&&(I.get||I.set)?Object.defineProperty(M,E,I):M[E]=x[E]}return M.default=x,w&&w.set(x,M),M}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return d=function(){return x},x}a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var p=a.default.prototype.pRotationZ=0,u=0,o=0,l="clockwise",h="clockwise",f="clockwise";a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0;var m=.5,g=30;a.default.prototype.setMoveThreshold=function(x){a.default._validateParameters("setMoveThreshold",arguments),m=x},a.default.prototype.setShakeThreshold=function(x){a.default._validateParameters("setShakeThreshold",arguments),g=x},a.default.prototype._ondeviceorientation=function(x){this._updatePRotations(),this._angleMode===c.radians&&(x.beta=x.beta*(_PI/180),x.gamma=x.gamma*(_PI/180),x.alpha=x.alpha*(_PI/180)),this._setProperty("rotationX",x.beta),this._setProperty("rotationY",x.gamma),this._setProperty("rotationZ",x.alpha),this._handleMotion()},a.default.prototype._ondevicemotion=function(x){this._updatePAccelerations(),this._setProperty("accelerationX",2*x.acceleration.x),this._setProperty("accelerationY",2*x.acceleration.y),this._setProperty("accelerationZ",2*x.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var x,w,M=this._isGlobal?window:this;if(typeof M.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>m||Math.abs(this.accelerationY-this.pAccelerationY)>m||Math.abs(this.accelerationZ-this.pAccelerationZ)>m)&&M.deviceMoved(),typeof M.deviceTurned=="function"){var A=this.rotationX+180,E=this.pRotationX+180,I=p+180;0<A-E&&A-E<270||A-E<-270?l="clockwise":(A-E<0||270<A-E)&&(l="counter-clockwise"),l!==this.pRotateDirectionX&&(I=A),90<Math.abs(A-I)&&Math.abs(A-I)<270&&(I=A,this._setProperty("turnAxis","X"),M.deviceTurned()),this.pRotateDirectionX=l,p=I-180;var R=this.rotationY+180,P=this.pRotationY+180,D=u+180;0<R-P&&R-P<270||R-P<-270?h="clockwise":(R-P<0||270<R-this.pRotationY)&&(h="counter-clockwise"),h!==this.pRotateDirectionY&&(D=R),90<Math.abs(R-D)&&Math.abs(R-D)<270&&(D=R,this._setProperty("turnAxis","Y"),M.deviceTurned()),this.pRotateDirectionY=h,u=D-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?f="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(f="counter-clockwise"),f!==this.pRotateDirectionZ&&(o=this.rotationZ),90<Math.abs(this.rotationZ-o)&&Math.abs(this.rotationZ-o)<270&&(o=this.rotationZ,this._setProperty("turnAxis","Z"),M.deviceTurned()),this.pRotateDirectionZ=f,this._setProperty("turnAxis",void 0)}typeof M.deviceShaken=="function"&&(this.pAccelerationX!==null&&(x=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),g<x+w&&M.deviceShaken())};var v=a.default;i.default=v},{"../core/constants":250,"../core/main":260}],278:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.isKeyPressed=!1,r.default.prototype.keyIsPressed=!1,r.default.prototype.key="",r.default.prototype.keyCode=0,r.default.prototype._onkeydown=function(c){if(!this._downKeys[c.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which);var d=this._isGlobal?window:this;typeof d.keyPressed=="function"&&!c.charCode&&d.keyPressed(c)===!1&&c.preventDefault()}},r.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var d=this._isGlobal?window:this;typeof d.keyReleased=="function"&&d.keyReleased(c)===!1&&c.preventDefault()},r.default.prototype._onkeypress=function(c){if(c.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which);var d=this._isGlobal?window:this;typeof d.keyTyped=="function"&&d.keyTyped(c)===!1&&c.preventDefault()}},r.default.prototype._onblur=function(c){this._downKeys={}},r.default.prototype.keyIsDown=function(c){return r.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},r.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1};var a=r.default;i.default=a},{"../core/main":260}],279:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}a.default.prototype.movedX=0,a.default.prototype.movedY=0,a.default.prototype._hasMouseInteracted=!1,a.default.prototype.mouseX=0,a.default.prototype.mouseY=0,a.default.prototype.pmouseX=0,a.default.prototype.pmouseY=0,a.default.prototype.winMouseX=0,a.default.prototype.winMouseY=0,a.default.prototype.pwinMouseX=0,a.default.prototype.pwinMouseY=0,a.default.prototype.mouseButton=0,a.default.prototype.mouseIsPressed=!1,a.default.prototype._updateNextMouseCoords=function(u){if(this._curElement!==null&&(!u.touches||0<u.touches.length)){var o=function(l,h,f,m){m&&!m.clientX&&(m.touches?m=m.touches[0]:m.changedTouches&&(m=m.changedTouches[0]));var g=l.getBoundingClientRect(),v=l.scrollWidth/h||1,x=l.scrollHeight/f||1;return{x:(m.clientX-g.left)/v,y:(m.clientY-g.top)/x,winX:m.clientX,winY:m.clientY,id:m.identifier}}(this._curElement.elt,this.width,this.height,u);this._setProperty("movedX",u.movementX),this._setProperty("movedY",u.movementY),this._setProperty("mouseX",o.x),this._setProperty("mouseY",o.y),this._setProperty("winMouseX",o.winX),this._setProperty("winMouseY",o.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},a.default.prototype._setMouseButton=function(u){u.button===1?this._setProperty("mouseButton",c.CENTER):u.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},a.default.prototype._onmousemove=function(u){var o=this._isGlobal?window:this;this._updateNextMouseCoords(u),this.mouseIsPressed?typeof o.mouseDragged=="function"?o.mouseDragged(u)===!1&&u.preventDefault():typeof o.touchMoved=="function"&&o.touchMoved(u)===!1&&u.preventDefault():typeof o.mouseMoved=="function"&&o.mouseMoved(u)===!1&&u.preventDefault()},a.default.prototype._onmousedown=function(u){var o=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(u),this._updateNextMouseCoords(u),typeof o.mousePressed=="function"?o.mousePressed(u)===!1&&u.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof o.touchStarted=="function"&&o.touchStarted(u)===!1&&u.preventDefault()},a.default.prototype._onmouseup=function(u){var o=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof o.mouseReleased=="function"?o.mouseReleased(u)===!1&&u.preventDefault():typeof o.touchEnded=="function"&&o.touchEnded(u)===!1&&u.preventDefault()},a.default.prototype._ondragend=a.default.prototype._onmouseup,a.default.prototype._ondragover=a.default.prototype._onmousemove,a.default.prototype._onclick=function(u){var o=this._isGlobal?window:this;typeof o.mouseClicked=="function"&&o.mouseClicked(u)===!1&&u.preventDefault()},a.default.prototype._ondblclick=function(u){var o=this._isGlobal?window:this;typeof o.doubleClicked=="function"&&o.doubleClicked(u)===!1&&u.preventDefault()},a.default.prototype._mouseWheelDeltaY=0,a.default.prototype._pmouseWheelDeltaY=0,a.default.prototype._onwheel=function(u){var o=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",u.deltaY),typeof o.mouseWheel=="function"&&(u.delta=u.deltaY,o.mouseWheel(u)===!1&&u.preventDefault())},a.default.prototype.requestPointerLock=function(){var u=this._curElement.elt;return u.requestPointerLock=u.requestPointerLock||u.mozRequestPointerLock,u.requestPointerLock?(u.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},a.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var p=a.default;i.default=p},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.string.includes":182}],280:[function(e,n,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(d,p,u,o,l){var h=4<arguments.length&&l!==void 0?l:0,f=d.getBoundingClientRect(),m=d.scrollWidth/p||1,g=d.scrollHeight/u||1,v=o.touches[h]||o.changedTouches[h];return{x:(v.clientX-f.left)/m,y:(v.clientY-f.top)/g,winX:v.clientX,winY:v.clientY,id:v.identifier}}r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(d){if(this._curElement!==null){for(var p=[],u=0;u<d.touches.length;u++)p[u]=a(this._curElement.elt,this.width,this.height,d,u);this._setProperty("touches",p)}},r.default.prototype._ontouchstart=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(d),this._updateNextMouseCoords(d),this._updateMouseCoords(),typeof p.touchStarted=="function"?p.touchStarted(d)===!1&&d.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof p.mousePressed=="function"&&p.mousePressed(d)===!1&&d.preventDefault()},r.default.prototype._ontouchmove=function(d){var p=this._isGlobal?window:this;this._updateTouchCoords(d),this._updateNextMouseCoords(d),typeof p.touchMoved=="function"?p.touchMoved(d)===!1&&d.preventDefault():typeof p.mouseDragged=="function"&&p.mouseDragged(d)===!1&&d.preventDefault()},r.default.prototype._ontouchend=function(d){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(d),this._updateNextMouseCoords(d);var p=this._isGlobal?window:this;typeof p.touchEnded=="function"?p.touchEnded(d)===!1&&d.preventDefault():typeof p.mouseReleased=="function"&&p.mouseReleased(d)===!1&&d.preventDefault()};var c=r.default;i.default=c},{"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.string.includes":182}],281:[function(e,n,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r,a,c,d={};function p(o,l){for(var h,f,m,g,v,x,w,M,A,E,I=d._toPixels(o),R=o.width,P=o.height,D=R*P,O=new Int32Array(D),j=0;j<D;j++)O[j]=d._getARGB(I,j);var N,q,X,V,$=new Int32Array(D),K=new Int32Array(D),_e=new Int32Array(D),me=new Int32Array(D),ye=0;for(function(de){var Ee=3.5*de|0;if(s!==(Ee=Ee<1?1:Ee<248?Ee:248)){r=1+(s=Ee)<<1,a=new Int32Array(r),c=new Array(r);for(var C=0;C<r;C++)c[C]=new Int32Array(256);for(var F,H,ne,re,oe=1,te=Ee-1;oe<Ee;oe++){a[Ee+oe]=a[te]=H=te*te,ne=c[Ee+oe],re=c[te--];for(var xe=0;xe<256;xe++)ne[xe]=re[xe]=H*xe}F=a[Ee]=Ee*Ee,ne=c[Ee];for(var Q=0;Q<256;Q++)ne[Q]=F*Q}}(l),q=0;q<P;q++){for(N=0;N<R;N++){if(g=m=f=v=h=0,(x=N-s)<0)E=-x,x=0;else{if(R<=x)break;E=0}for(X=E;X<r&&!(R<=x);X++){var fe=O[x+ye];v+=(V=c[X])[(-16777216&fe)>>>24],f+=V[(16711680&fe)>>16],m+=V[(65280&fe)>>8],g+=V[255&fe],h+=a[X],x++}$[w=ye+N]=v/h,K[w]=f/h,_e[w]=m/h,me[w]=g/h}ye+=R}for(A=(M=-s)*R,q=ye=0;q<P;q++){for(N=0;N<R;N++){if(g=m=f=v=h=0,M<0)E=w=-M,x=N;else{if(P<=M)break;E=0,w=M,x=N+A}for(X=E;X<r&&!(P<=w);X++)v+=(V=c[X])[$[x]],f+=V[K[x]],m+=V[_e[x]],g+=V[me[x]],h+=a[X],w++,x+=R;O[N+ye]=v/h<<24|f/h<<16|m/h<<8|g/h}ye+=R,A+=R,M++}d._setPixels(I,O)}d._toPixels=function(o){if(o instanceof ImageData)return o.data;if(o.getContext("2d"))return o.getContext("2d").getImageData(0,0,o.width,o.height).data;if(o.getContext("webgl")){var l=o.getContext("webgl"),h=l.drawingBufferWidth*l.drawingBufferHeight*4,f=new Uint8Array(h);return l.readPixels(0,0,o.width,o.height,l.RGBA,l.UNSIGNED_BYTE,f),f}},d._getARGB=function(o,l){var h=4*l;return o[3+h]<<24&4278190080|o[h]<<16&16711680|o[1+h]<<8&65280|255&o[2+h]},d._setPixels=function(o,l){for(var h=0,f=0,m=o.length;f<m;f++)o[(h=4*f)+0]=(16711680&l[f])>>>16,o[h+1]=(65280&l[f])>>>8,o[h+2]=255&l[f],o[h+3]=(4278190080&l[f])>>>24},d._toImageData=function(o){return o instanceof ImageData?o:o.getContext("2d").getImageData(0,0,o.width,o.height)},d._createImageData=function(o,l){return d._tmpCanvas=document.createElement("canvas"),d._tmpCtx=d._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(o,l)},d.apply=function(o,l,h){var f=o.getContext("2d"),m=f.getImageData(0,0,o.width,o.height),g=l(m,h);g instanceof ImageData?f.putImageData(g,0,0,0,0,o.width,o.height):f.putImageData(m,0,0,0,0,o.width,o.height)},d.threshold=function(o,l){var h=d._toPixels(o);l===void 0&&(l=.5);for(var f=Math.floor(255*l),m=0;m<h.length;m+=4){var g=void 0;g=f<=.2126*h[m]+.7152*h[m+1]+.0722*h[m+2]?255:0,h[m]=h[m+1]=h[m+2]=g}},d.gray=function(o){for(var l=d._toPixels(o),h=0;h<l.length;h+=4){var f=.2126*l[h]+.7152*l[h+1]+.0722*l[h+2];l[h]=l[h+1]=l[h+2]=f}},d.opaque=function(o){for(var l=d._toPixels(o),h=0;h<l.length;h+=4)l[h+3]=255;return l},d.invert=function(o){for(var l=d._toPixels(o),h=0;h<l.length;h+=4)l[h]=255-l[h],l[h+1]=255-l[h+1],l[h+2]=255-l[h+2]},d.posterize=function(o,l){var h=d._toPixels(o);if(l<2||255<l)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var f=l-1,m=0;m<h.length;m+=4){var g=h[m],v=h[m+1],x=h[m+2];h[m]=255*(g*l>>8)/f,h[m+1]=255*(v*l>>8)/f,h[m+2]=255*(x*l>>8)/f}},d.dilate=function(o){for(var l,h,f,m,g,v,x,w,M,A,E,I,R,P,D,O,j,N=d._toPixels(o),q=0,X=N.length?N.length/4:0,V=new Int32Array(X);q<X;)for(h=(l=q)+o.width;q<h;)f=m=d._getARGB(N,q),(x=q-1)<l&&(x=q),h<=(v=q+1)&&(v=q),(w=q-o.width)<0&&(w=0),X<=(M=q+o.width)&&(M=q),I=d._getARGB(N,w),E=d._getARGB(N,x),R=d._getARGB(N,M),(g=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<(D=77*(E>>16&255)+151*(E>>8&255)+28*(255&E))&&(m=E,g=D),g<(P=77*((A=d._getARGB(N,v))>>16&255)+151*(A>>8&255)+28*(255&A))&&(m=A,g=P),g<(O=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))&&(m=I,g=O),g<(j=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))&&(m=R,g=j),V[q++]=m;d._setPixels(N,V)},d.erode=function(o){for(var l,h,f,m,g,v,x,w,M,A,E,I,R,P,D,O,j,N=d._toPixels(o),q=0,X=N.length?N.length/4:0,V=new Int32Array(X);q<X;)for(h=(l=q)+o.width;q<h;)f=m=d._getARGB(N,q),(x=q-1)<l&&(x=q),h<=(v=q+1)&&(v=q),(w=q-o.width)<0&&(w=0),X<=(M=q+o.width)&&(M=q),I=d._getARGB(N,w),E=d._getARGB(N,x),R=d._getARGB(N,M),(D=77*(E>>16&255)+151*(E>>8&255)+28*(255&E))<(g=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))&&(m=E,g=D),(P=77*((A=d._getARGB(N,v))>>16&255)+151*(A>>8&255)+28*(255&A))<g&&(m=A,g=P),(O=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))<g&&(m=I,g=O),(j=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))<g&&(m=R,g=j),V[q++]=m;d._setPixels(N,V)},d.blur=function(o,l){p(o,l)};var u=d;i.default=u},{"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.int32-array":206,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223}],282:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("../core/main")),r=a(e("omggif"));function a(p){return p&&p.__esModule?p:{default:p}}function c(p){return function(u){if(Array.isArray(u)){for(var o=0,l=new Array(u.length);o<u.length;o++)l[o]=u[o];return l}}(p)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.createImage=function(p,u){return s.default._validateParameters("createImage",arguments),new s.default.Image(p,u)},s.default.prototype.saveCanvas=function(){s.default._validateParameters("saveCanvas",arguments);var p,u,o,l,h=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(p=arguments[0],h.shift()):arguments[0]instanceof s.default.Element?(p=arguments[0].elt,h.shift()):p=this._curElement&&this._curElement.elt,1<=h.length&&(u=h[0]),2<=h.length&&(o=h[1]),o=o||s.default.prototype._checkFileExtension(u,o)[1]||"png"){default:l="image/png";break;case"jpeg":case"jpg":l="image/jpeg"}p.toBlob(function(f){s.default.prototype.downloadFile(f,u,o)},l)},s.default.prototype.saveGif=function(p,u){var o=p.gifProperties,l=o.loopLimit;l===1?l=null:l===null&&(l=0);for(var h=new Uint8Array(p.width*p.height*o.numFrames),f=[],m={},g=0;g<o.numFrames;g++){for(var v=new Set,x=o.frames[g].image.data,w=x.length,M=new Uint32Array(p.width*p.height),A=0,E=0;A<w;A+=4,E++){var I=x[A+0]<<16|x[A+1]<<8|x[A+2]<<0;v.add(I),M[E]=I}var R=c(v).sort().toString();m[R]===void 0?m[R]={freq:1,frames:[g]}:(m[R].freq+=1,m[R].frames.push(g)),f.push(M)}var P=[],D=Object.keys(m).sort(function(C,F){return m[F].freq-m[C].freq}),O=D[0].split(",").map(function(C){return parseInt(C)});P=P.concat(m[O].frames);for(var j=new Set(O),N=1;N<D.length;N++){var q=D[N].split(",").map(function(C){return parseInt(C)}).filter(function(C){return!j.has(C)});if(O.length+q.length<=256){for(var X=0;X<q.length;X++)O.push(q[X]),j.add(q[X]);P=P.concat(m[D[N]].frames)}}P=new Set(P);for(var V={},$=0;$<O.length;$++)V[O[$]]||(V[O[$]]=$);for(var K=1;K<O.length;)K<<=1;O.length=K;for(var _e={loop:l,palette:new Uint32Array(O)},me=new r.default.GifWriter(h,p.width,p.height,_e),ye={},fe=function(C){for(var F=!P.has(C),H=F?[]:O,ne=new Uint8Array(p.width*p.height),re={},oe=new Set,te=0;te<f[C].length;te++){var xe=f[C][te];F?(re[xe]===void 0&&(re[xe]=H.length,H.push(xe)),ne[te]=re[xe]):ne[te]=V[xe],0<C&&f[C-1][te]!==xe&&oe.add(xe)}var Q={},ge=H.filter(function(we){return!oe.has(we)});if(0<ge.length){var he=ge[0],G=F?re[he]:V[he];if(0<C){for(var W=0;W<f[C].length;W++)f[C-1][W]===f[C][W]&&(ne[W]=G);Q.transparent=G,ye.frameOpts.disposal=1}}if(Q.delay=o.frames[C].delay/10,F){for(var ve=1;ve<H.length;)ve<<=1;H.length=ve,Q.palette=new Uint32Array(H)}0<C&&me.addFrame(0,0,p.width,p.height,ye.pixelPaletteIndex,ye.frameOpts),ye={pixelPaletteIndex:ne,frameOpts:Q}},de=0;de<o.numFrames;de++)fe(de);ye.frameOpts.disposal=1,me.addFrame(0,0,p.width,p.height,ye.pixelPaletteIndex,ye.frameOpts);var Ee=new Blob([h.slice(0,me.end())],{type:"image/gif"});s.default.prototype.downloadFile(Ee,u,"gif")},s.default.prototype.saveFrames=function(p,u,o,l,h){s.default._validateParameters("saveFrames",arguments);var f=o||3;f=s.default.prototype.constrain(f,0,15),f*=1e3;var m=l||15;m=s.default.prototype.constrain(m,0,22);var g=0,v=s.default.prototype._makeFrame,x=this._curElement.elt,w=[],M=setInterval(function(){w.push(v(p+g,u,x)),g++},1e3/m);setTimeout(function(){if(clearInterval(M),h)h(w);else{var A=!0,E=!1,I=void 0;try{for(var R,P=w[Symbol.iterator]();!(A=(R=P.next()).done);A=!0){var D=R.value;s.default.prototype.downloadFile(D.imageData,D.filename,D.ext)}}catch(O){E=!0,I=O}finally{try{A||P.return==null||P.return()}finally{if(E)throw I}}}w=[]},f+.01)},s.default.prototype._makeFrame=function(p,u,o){var l,h;if(l=this?this._curElement.elt:o,u)switch(u.toLowerCase()){case"png":h="image/png";break;case"jpeg":case"jpg":h="image/jpeg";break;default:h="image/png"}else u="png",h="image/png";var f=l.toDataURL(h);f=f.replace(h,"image/octet-stream");var m={};return m.imageData=f,m.filename=p,m.ext=u,m};var d=s.default;i.default=d},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.set":180,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,omggif:235}],283:[function(e,n,i){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=o(e("../core/main")),a=o(e("./filters")),c=o(e("../core/helpers")),d=function(f){if(f&&f.__esModule)return f;if(f===null||s(f)!=="object"&&typeof f!="function")return{default:f};var m=u();if(m&&m.has(f))return m.get(f);var g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var w=v?Object.getOwnPropertyDescriptor(f,x):null;w&&(w.get||w.set)?Object.defineProperty(g,x,w):g[x]=f[x]}return g.default=f,m&&m.set(f,g),g}(e("../core/constants")),p=o(e("omggif"));function u(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return u=function(){return f},f}function o(f){return f&&f.__esModule?f:{default:f}}function l(f,m){return 0<f&&f<m?f:m}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.loadImage=function(f,m,g){r.default._validateParameters("loadImage",arguments);var v=new r.default.Image(1,1,this),x=this,w=new Request(f,{method:"GET",mode:"cors"});return fetch(f,w).then(function(M){var A=M.headers.get("content-type");if(A===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),A&&A.includes("image/gif"))M.arrayBuffer().then(function(I){I&&function(R,P,D,O,j){var N=new p.default.GifReader(R);P.width=P.canvas.width=N.width,P.height=P.canvas.height=N.height;var q=[],X=N.numFrames(),V=new Uint8ClampedArray(P.width*P.height*4);if(1<X){for(var $=function(Ee,C){try{C.decodeAndBlitFrameRGBA(Ee,V)}catch(F){r.default._friendlyFileLoadError(8,P.src),typeof O=="function"?O(F):console.error(F)}},K=0;K<X;K++){var _e=N.frameInfo(K),me=P.drawingContext.getImageData(0,0,P.width,P.height);V=me.data.slice(),$(K,N);var ye=new ImageData(V,P.width,P.height);P.drawingContext.putImageData(ye,0,0);var fe=_e.delay;fe===0&&(fe=10),q.push({image:P.drawingContext.getImageData(0,0,P.width,P.height),delay:10*fe}),_e.disposal===2?P.drawingContext.clearRect(_e.x,_e.y,_e.width,_e.height):_e.disposal===3&&P.drawingContext.putImageData(me,0,0,_e.x,_e.y,_e.width,_e.height)}var de=N.loopCount();de===null?de=1:de===0&&(de=null),P.drawingContext.putImageData(q[0].image,0,0),P.gifProperties={displayIndex:0,loopLimit:de,loopCount:0,frames:q,numFrames:X,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof D=="function"&&D(P),j()}(new Uint8Array(I),v,m,g,function(R){x._decrementPreload()}.bind(x))},function(I){typeof g=="function"?g(I):console.error(I)});else{var E=new Image;E.onload=function(){v.width=v.canvas.width=E.width,v.height=v.canvas.height=E.height,v.drawingContext.drawImage(E,0,0),v.modified=!0,typeof m=="function"&&m(v),x._decrementPreload()},E.onerror=function(I){r.default._friendlyFileLoadError(0,E.src),typeof g=="function"?g(I):console.error(I)},f.indexOf("data:image/")!==0&&(E.crossOrigin="Anonymous"),E.src=f}v.modified=!0}).catch(function(M){r.default._friendlyFileLoadError(0,f),typeof g=="function"?g(M):console.error(M)}),v},r.default.prototype.image=function(f,m,g,v,x,w,M,A,E){r.default._validateParameters("image",arguments);var I=f.width,R=f.height;f.elt&&f.elt.videoWidth&&!f.canvas&&(I=f.elt.videoWidth,R=f.elt.videoHeight);var P=m,D=g,O=v||I,j=x||R,N=w||0,q=M||0,X=A||I,V=E||R;X=l(X,I),V=l(V,R);var $=1;f.elt&&!f.canvas&&f.elt.style.width&&($=f.elt.videoWidth&&!v?f.elt.videoWidth:f.elt.width,$/=parseInt(f.elt.style.width,10)),N*=$,q*=$,V*=$,X*=$;var K=c.default.modeAdjust(P,D,O,j,this._renderer._imageMode);this._renderer.image(f,N,q,X,V,K.x,K.y,K.w,K.h)},r.default.prototype.tint=function(){for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];r.default._validateParameters("tint",m);var v=this.color.apply(this,m);this._renderer._tint=v.levels},r.default.prototype.noTint=function(){this._renderer._tint=null},r.default.prototype._getTintedImageCanvas=function(f){if(!f.canvas)return f;var m=a.default._toPixels(f.canvas),g=document.createElement("canvas");g.width=f.canvas.width,g.height=f.canvas.height;for(var v=g.getContext("2d"),x=v.createImageData(f.canvas.width,f.canvas.height),w=x.data,M=0;M<m.length;M+=4){var A=m[M],E=m[M+1],I=m[M+2],R=m[M+3];w[M]=A*this._renderer._tint[0]/255,w[M+1]=E*this._renderer._tint[1]/255,w[M+2]=I*this._renderer._tint[2]/255,w[M+3]=R*this._renderer._tint[3]/255}return v.putImageData(x,0,0),g},r.default.prototype.imageMode=function(f){r.default._validateParameters("imageMode",arguments),f!==d.CORNER&&f!==d.CORNERS&&f!==d.CENTER||(this._renderer._imageMode=f)};var h=r.default;i.default=h},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/helpers":256,"../core/main":260,"./filters":281,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.includes":182,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/es.typed-array.uint8-clamped-array":224,omggif:235}],284:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("../core/main")),r=a(e("./filters"));function a(d){return d&&d.__esModule?d:{default:d}}s.default.Image=function(d,p){this.width=d,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},s.default.Image.prototype._animateGif=function(d){var p=this.gifProperties,u=d._lastFrameTime+d.deltaTime;if(p.lastChangeTime===0&&(p.lastChangeTime=u),p.playing){p.timeDisplayed=u-p.lastChangeTime;var o=p.frames[p.displayIndex].delay;if(p.timeDisplayed>=o){var l=Math.floor(p.timeDisplayed/o);if(p.timeDisplayed=0,p.lastChangeTime=u,p.displayIndex+=l,p.loopCount=Math.floor(p.displayIndex/p.numFrames),p.loopLimit!==null&&p.loopCount>=p.loopLimit)p.playing=!1;else{var h=p.displayIndex%p.numFrames;this.drawingContext.putImageData(p.frames[h].image,0,0),p.displayIndex=h,this.setModified(!0)}}}},s.default.Image.prototype._setProperty=function(d,p){this[d]=p,this.setModified(!0)},s.default.Image.prototype.loadPixels=function(){s.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},s.default.Image.prototype.updatePixels=function(d,p,u,o){s.default.Renderer2D.prototype.updatePixels.call(this,d,p,u,o),this.setModified(!0)},s.default.Image.prototype.get=function(d,p,u,o){return s.default._validateParameters("p5.Image.get",arguments),s.default.Renderer2D.prototype.get.apply(this,arguments)},s.default.Image.prototype._getPixel=s.default.Renderer2D.prototype._getPixel,s.default.Image.prototype.set=function(d,p,u){s.default.Renderer2D.prototype.set.call(this,d,p,u),this.setModified(!0)},s.default.Image.prototype.resize=function(d,p){d===0&&p===0?(d=this.canvas.width,p=this.canvas.height):d===0?d=this.canvas.width*p/this.canvas.height:p===0&&(p=this.canvas.height*d/this.canvas.width),d=Math.floor(d),p=Math.floor(p);var u=document.createElement("canvas");if(u.width=d,u.height=p,this.gifProperties)for(var o=this.gifProperties,l=function(m,g){for(var v=0,x=0;x<g.height;x++)for(var w=0;w<g.width;w++){var M=Math.floor(w*m.width/g.width),A=4*(Math.floor(x*m.height/g.height)*m.width+M);g.data[v++]=m.data[A++],g.data[v++]=m.data[A++],g.data[v++]=m.data[A++],g.data[v++]=m.data[A++]}},h=0;h<o.numFrames;h++){var f=this.drawingContext.createImageData(d,p);l(o.frames[h].image,f),o.frames[h].image=f}u.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,u.width,u.height),this.canvas.width=this.width=d,this.canvas.height=this.height=p,this.drawingContext.drawImage(u,0,0,d,p,0,0,d,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},s.default.Image.prototype.copy=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];s.default.prototype.copy.apply(this,p)},s.default.Image.prototype.mask=function(d){d===void 0&&(d=this);var p=this.drawingContext.globalCompositeOperation,u=1;d instanceof s.default.Renderer&&(u=d._pInst._pixelDensity);var o=[d,0,0,u*d.width,u*d.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",s.default.Image.prototype.copy.apply(this,o),this.drawingContext.globalCompositeOperation=p,this.setModified(!0)},s.default.Image.prototype.filter=function(d,p){r.default.apply(this.canvas,r.default[d],p),this.setModified(!0)},s.default.Image.prototype.blend=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];s.default._validateParameters("p5.Image.blend",arguments),s.default.prototype.blend.apply(this,p),this.setModified(!0)},s.default.Image.prototype.setModified=function(d){this._modified=d},s.default.Image.prototype.isModified=function(){return this._modified},s.default.Image.prototype.save=function(d,p){this.gifProperties?s.default.prototype.saveGif(this,d):s.default.prototype.saveCanvas(this.canvas,d,p)},s.default.Image.prototype.reset=function(){if(this.gifProperties){var d=this.gifProperties;d.playing=!0,d.timeSinceStart=0,d.timeDisplayed=0,d.lastChangeTime=0,d.loopCount=0,d.displayIndex=0,this.drawingContext.putImageData(d.frames[0].image,0,0)}},s.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var d=this.gifProperties;return d.displayIndex%d.numFrames}},s.default.Image.prototype.setFrame=function(d){if(this.gifProperties){var p=this.gifProperties;d<p.numFrames&&0<=d?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=d,this.drawingContext.putImageData(p.frames[d].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},s.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},s.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},s.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},s.default.Image.prototype.delay=function(d,p){if(this.gifProperties){var u=this.gifProperties;if(p<u.numFrames&&0<=p)u.frames[p].delay=d;else{var o=!0,l=!1,h=void 0;try{for(var f,m=u.frames[Symbol.iterator]();!(o=(f=m.next()).done);o=!0)f.value.delay=d}catch(g){l=!0,h=g}finally{try{o||m.return==null||m.return()}finally{if(l)throw h}}}}};var c=s.default.Image;i.default=c},{"../core/main":260,"./filters":281,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],285:[function(e,n,i){e("core-js/modules/es.array.filter"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("../core/main")),r=a(e("./filters"));function a(d){return d&&d.__esModule?d:{default:d}}e("../color/p5.Color"),s.default.prototype.pixels=[],s.default.prototype.blend=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];var o;s.default._validateParameters("blend",p),this._renderer?(o=this._renderer).blend.apply(o,p):s.default.Renderer2D.prototype.blend.apply(this,p)},s.default.prototype.copy=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];var o,l,h,f,m,g,v,x,w;if(s.default._validateParameters("copy",p),p.length===9)o=p[0],l=p[1],h=p[2],f=p[3],m=p[4],g=p[5],v=p[6],x=p[7],w=p[8];else{if(p.length!==8)throw new Error("Signature not supported");o=this,l=p[0],h=p[1],f=p[2],m=p[3],g=p[4],v=p[5],x=p[6],w=p[7]}s.default.prototype._copyHelper(this,o,l,h,f,m,g,v,x,w)},s.default.prototype._copyHelper=function(d,p,u,o,l,h,f,m,g,v){p.loadPixels();var x=p.canvas.width/p.width,w=0,M=0;p._renderer&&p._renderer.isP3D&&(w=p.width/2,M=p.height/2),d._renderer&&d._renderer.isP3D?s.default.RendererGL.prototype.image.call(d._renderer,p,u+w,o+M,l,h,f,m,g,v):d.drawingContext.drawImage(p.canvas,x*(u+w),x*(o+M),x*l,x*h,f,m,g,v)},s.default.prototype.filter=function(d,p){s.default._validateParameters("filter",arguments),this.canvas!==void 0?r.default.apply(this.canvas,r.default[d],p):r.default.apply(this.elt,r.default[d],p)},s.default.prototype.get=function(d,p,u,o){var l;return s.default._validateParameters("get",arguments),(l=this._renderer).get.apply(l,arguments)},s.default.prototype.loadPixels=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];s.default._validateParameters("loadPixels",p),this._renderer.loadPixels()},s.default.prototype.set=function(d,p,u){this._renderer.set(d,p,u)},s.default.prototype.updatePixels=function(d,p,u,o){s.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(d,p,u,o)};var c=s.default;i.default=c},{"../color/p5.Color":248,"../core/main":260,"./filters":281,"core-js/modules/es.array.filter":151}],286:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=c(e("../core/main"));e("whatwg-fetch"),e("es6-promise/auto");var r=c(e("fetch-jsonp")),a=c(e("file-saver"));function c(h){return h&&h.__esModule?h:{default:h}}function d(h){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function p(h,f){var m={};if((f=f||[])===void 0)for(var g=0;g<h.length;g++)f[g.toString()]=g;for(var v=0;v<f.length;v++){var x=f[v],w=h[v];m[x]=w}return m}function u(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function o(h,f){f&&f!==!0&&f!=="true"||(f="");var m="";return(h=h||"untitled")&&h.includes(".")&&(m=h.split(".").pop()),f&&m!==f&&(m=f,h="".concat(h,".").concat(m)),[h,m]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),s.default.prototype.loadJSON=function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];s.default._validateParameters("loadJSON",f);for(var g,v,x,w=f[0],M={},A="json",E=1;E<f.length;E++){var I=f[E];typeof I=="string"?I!=="jsonp"&&I!=="json"||(A=I):typeof I=="function"?g?v=I:g=I:d(I)==="object"&&(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))&&(A="jsonp",x=I)}var R=this;return this.httpDo(w,"GET",x,A,function(P){for(var D in P)M[D]=P[D];g!==void 0&&g(P),R._decrementPreload()},function(P){if(s.default._friendlyFileLoadError(5,w),!v)throw P;v(P)}),M},s.default.prototype.loadStrings=function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];s.default._validateParameters("loadStrings",f);for(var g,v,x=[],w=1;w<f.length;w++){var M=f[w];typeof M=="function"&&(g===void 0?g=M:v===void 0&&(v=M))}var A=this;return s.default.prototype.httpDo.call(this,f[0],"GET","text",function(E){for(var I=E.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,P=I.length;R<P;R+=32768)Array.prototype.push.apply(x,I.slice(R,Math.min(R+32768,P)));g!==void 0&&g(x),A._decrementPreload()},function(E){if(s.default._friendlyFileLoadError(3,E),!v)throw E;v(E)}),x},s.default.prototype.loadTable=function(h){var f,m,g,v=!1,x=h.substring(h.lastIndexOf(".")+1,h.length);x==="csv"?g=",":x==="ssv"?g=";":x==="tsv"&&(g="	");for(var w=1;w<arguments.length;w++)typeof arguments[w]=="function"?f===void 0?f=arguments[w]:m===void 0&&(m=arguments[w]):typeof arguments[w]=="string"&&(arguments[w]==="header"&&(v=!0),arguments[w]==="csv"?g=",":arguments[w]==="ssv"?g=";":arguments[w]==="tsv"&&(g="	"));var M=new s.default.Table,A=this;return this.httpDo(h,"GET","table",function(E){for(var I,R,P={},D=[],O=0,j=null,N=function(){P.currentState=0,P.token=""},q=function(){j.push(P.token),N()},X=function(){P.currentState=4,D.push(j),j=null};;){if((I=E[O++])==null){if(P.escaped)throw new Error("Unclosed quote in file.");if(j){q(),X();break}}if(j===null&&(P.escaped=!1,j=[],N()),P.currentState===0){if(I==='"'){P.escaped=!0,P.currentState=1;continue}P.currentState=1}if(P.currentState===1&&P.escaped)if(I==='"')E[O]==='"'?(P.token+='"',O++):(P.escaped=!1,P.currentState=2);else{if(I==="\r")continue;P.token+=I}else I==="\r"?(E[O]===`
`&&O++,q(),X()):I===`
`?(q(),X()):I===g?q():P.currentState===1&&(P.token+=I)}if(v)M.columns=D.shift();else for(var V=0;V<D[0].length;V++)M.columns[V]="null";for(var $=0;$<D.length;$++)(D[$].length!==1||D[$][0]!=="undefined"&&D[$][0]!=="")&&((R=new s.default.TableRow).arr=D[$],R.obj=p(D[$],M.columns),M.addRow(R));typeof f=="function"&&f(M),A._decrementPreload()},function(E){s.default._friendlyFileLoadError(2,h),m?m(E):console.error(E)}),M},s.default.prototype.loadXML=function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];for(var g,v,x=new s.default.XML,w=1;w<f.length;w++){var M=f[w];typeof M=="function"&&(g===void 0?g=M:v===void 0&&(v=M))}var A=this;return this.httpDo(f[0],"GET","xml",function(E){for(var I in E)x[I]=E[I];g!==void 0&&g(x),A._decrementPreload()},function(E){if(s.default._friendlyFileLoadError(1,E),!v)throw E;v(E)}),x},s.default.prototype.loadBytes=function(h,f,m){var g={},v=this;return this.httpDo(h,"GET","arrayBuffer",function(x){g.bytes=new Uint8Array(x),typeof f=="function"&&f(g),v._decrementPreload()},function(x){if(s.default._friendlyFileLoadError(6,h),!m)throw x;m(x)}),g},s.default.prototype.httpGet=function(){s.default._validateParameters("httpGet",arguments);var h=Array.prototype.slice.call(arguments);return h.splice(1,0,"GET"),s.default.prototype.httpDo.apply(this,h)},s.default.prototype.httpPost=function(){s.default._validateParameters("httpPost",arguments);var h=Array.prototype.slice.call(arguments);return h.splice(1,0,"POST"),s.default.prototype.httpDo.apply(this,h)},s.default.prototype.httpDo=function(){for(var h,f,m,g,v,x={},w=0,M="text/plain",A=arguments.length-1;0<A&&typeof(A<0||arguments.length<=A?void 0:arguments[A])=="function";A--)w++;var E=arguments.length<=0?void 0:arguments[0];if(arguments.length-w==2&&typeof E=="string"&&d(arguments.length<=1?void 0:arguments[1])==="object")g=new Request(E,arguments.length<=1?void 0:arguments[1]),f=arguments.length<=2?void 0:arguments[2],m=arguments.length<=3?void 0:arguments[3];else{for(var I,R="GET",P=1;P<arguments.length;P++){var D=P<0||arguments.length<=P?void 0:arguments[P];if(typeof D=="string")D==="GET"||D==="POST"||D==="PUT"||D==="DELETE"?R=D:D==="json"||D==="jsonp"||D==="binary"||D==="arrayBuffer"||D==="xml"||D==="text"||D==="table"?h=D:I=D;else if(typeof D=="number")I=D.toString();else if(d(D)==="object")if(D.hasOwnProperty("jsonpCallback")||D.hasOwnProperty("jsonpCallbackFunction"))for(var O in D)x[O]=D[O];else M=D instanceof s.default.XML?(I=D.serialize(),"application/xml"):(I=JSON.stringify(D),"application/json");else typeof D=="function"&&(f?m=D:f=D)}var j=R==="GET"?new Headers:new Headers({"Content-Type":M});g=new Request(E,{method:R,mode:"cors",body:I,headers:j})}return(v=(v=(h=h||(E.includes("json")?"json":E.includes("xml")?"xml":"text"))==="jsonp"?(0,r.default)(E,x):fetch(g)).then(function(N){if(!N.ok){var q=new Error(N.body);throw q.status=N.status,q.ok=!1,q}var X=0;switch(h!=="jsonp"&&(X=N.headers.get("content-length")),X&&64e6<X&&s.default._friendlyFileLoadError(7,E),h){case"json":case"jsonp":return N.json();case"binary":return N.blob();case"arrayBuffer":return N.arrayBuffer();case"xml":return N.text().then(function(V){var $=new DOMParser().parseFromString(V,"text/xml");return new s.default.XML($.documentElement)});default:return N.text()}})).then(f||function(){}),v.catch(m||console.error),v},window.URL=window.URL||window.webkitURL,s.default.prototype._pWriters=[],s.default.prototype.createWriter=function(h,f){var m;for(var g in s.default.prototype._pWriters)if(s.default.prototype._pWriters[g].name===h)return m=new s.default.PrintWriter(h+this.millis(),f),s.default.prototype._pWriters.push(m),m;return m=new s.default.PrintWriter(h,f),s.default.prototype._pWriters.push(m),m},s.default.PrintWriter=function(h,f){var m=this;this.name=h,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g=[];for(var v in g.push(this.content),s.default.prototype.writeFile(g,h,f),s.default.prototype._pWriters)s.default.prototype._pWriters[v].name===this.name&&s.default.prototype._pWriters.splice(v,1);m.clear(),m={}}},s.default.prototype.save=function(h,f,m){var g=arguments,v=this._curElement?this._curElement.elt:this.elt;if(g.length!==0)if(g[0]instanceof s.default.Renderer||g[0]instanceof s.default.Graphics)s.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")s.default.prototype.saveCanvas(v,g[0]);else switch(o(g[1],g[2])[1]){case"json":return void s.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void s.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?s.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof s.default.Table?s.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof s.default.Image?s.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof s.default.SoundFile&&s.default.prototype.saveSound(g[0],g[1],g[2],g[3])}else s.default.prototype.saveCanvas(v)},s.default.prototype.saveJSON=function(h,f,m){var g;s.default._validateParameters("saveJSON",arguments),g=m?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(g.split(`
`),f,"json")},s.default.prototype.saveJSONObject=s.default.prototype.saveJSON,s.default.prototype.saveJSONArray=s.default.prototype.saveJSON,s.default.prototype.saveStrings=function(h,f,m,g){s.default._validateParameters("saveStrings",arguments);for(var v=m||"txt",x=this.createWriter(f,v),w=0;w<h.length;w++)g?x.write(h[w]+`\r
`):x.write(h[w]+`
`);x.close(),x.clear()},s.default.prototype.saveTable=function(h,f,m){var g;s.default._validateParameters("saveTable",arguments),g=m===void 0?f.substring(f.lastIndexOf(".")+1,f.length):m;var v=this.createWriter(f,g),x=h.columns,w=",";if(g==="tsv"&&(w="	"),g!=="html"){if(x[0]!=="0"){for(var M=0;M<x.length;M++)M<x.length-1?v.write(x[M]+w):v.write(x[M]);v.write(`
`)}for(var A=0;A<h.rows.length;A++){var E=void 0;for(E=0;E<h.rows[A].arr.length;E++)E<h.rows[A].arr.length-1?g==="csv"&&String(h.rows[A].arr[E]).includes(",")?v.write('"'+h.rows[A].arr[E]+'"'+w):v.write(h.rows[A].arr[E]+w):g==="csv"&&String(h.rows[A].arr[E]).includes(",")?v.write('"'+h.rows[A].arr[E]+'"'):v.write(h.rows[A].arr[E]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),x[0]!=="0"){v.print("    <tr>");for(var I=0;I<x.length;I++){var R=u(x[I]);v.print("      <td>".concat(R)),v.print("      </td>")}v.print("    </tr>")}for(var P=0;P<h.rows.length;P++){v.print("    <tr>");for(var D=0;D<h.columns.length;D++){var O=u(h.rows[P].getString(D));v.print("      <td>".concat(O)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},s.default.prototype.writeFile=function(h,f,m){var g="application/octet-stream";s.default.prototype._isSafari()&&(g="text/plain");var v=new Blob(h,{type:g});s.default.prototype.downloadFile(v,f,m)},s.default.prototype.downloadFile=function(h,f,m){var g=o(f,m),v=g[0];if(h instanceof Blob)a.default.saveAs(h,v);else{var x=document.createElement("a");if(x.href=h,x.download=v,x.onclick=function(M){var A;A=M,document.body.removeChild(A.target),M.stopPropagation()},x.style.display="none",document.body.appendChild(x),s.default.prototype._isSafari()){var w=`Hello, Safari user! To download this file...
`;w+=`1. Go to File --> Save As.
`,w+=`2. Choose "Page Source" as the Format.
`,w+='3. Name it with this extension: ."'.concat(g[1],'"'),alert(w)}x.click()}},s.default.prototype._checkFileExtension=o,s.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var l=s.default;i.default=l},{"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,"core-js/modules/web.url":228,"es6-promise/auto":229,"fetch-jsonp":231,"file-saver":232,"whatwg-fetch":239}],287:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.Table=function(c){this.columns=[],this.rows=[]},r.default.Table.prototype.addRow=function(c){var d=c||new r.default.TableRow;if(d.arr===void 0||d.obj===void 0)throw new Error("invalid TableRow: ".concat(d));return(d.table=this).rows.push(d),d},r.default.Table.prototype.removeRow=function(c){this.rows[c].table=null;var d=this.rows.splice(c+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(d)},r.default.Table.prototype.getRow=function(c){return this.rows[c]},r.default.Table.prototype.getRows=function(){return this.rows},r.default.Table.prototype.findRow=function(c,d){if(typeof d=="string"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[d]===c)return this.rows[p]}else for(var u=0;u<this.rows.length;u++)if(this.rows[u].arr[d]===c)return this.rows[u];return null},r.default.Table.prototype.findRows=function(c,d){var p=[];if(typeof d=="string")for(var u=0;u<this.rows.length;u++)this.rows[u].obj[d]===c&&p.push(this.rows[u]);else for(var o=0;o<this.rows.length;o++)this.rows[o].arr[d]===c&&p.push(this.rows[o]);return p},r.default.Table.prototype.matchRow=function(c,d){if(typeof d=="number"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[d].match(c))return this.rows[p]}else for(var u=0;u<this.rows.length;u++)if(this.rows[u].obj[d].match(c))return this.rows[u];return null},r.default.Table.prototype.matchRows=function(c,d){var p=[];if(typeof d=="number")for(var u=0;u<this.rows.length;u++)this.rows[u].arr[d].match(c)&&p.push(this.rows[u]);else for(var o=0;o<this.rows.length;o++)this.rows[o].obj[d].match(c)&&p.push(this.rows[o]);return p},r.default.Table.prototype.getColumn=function(c){var d=[];if(typeof c=="string")for(var p=0;p<this.rows.length;p++)d.push(this.rows[p].obj[c]);else for(var u=0;u<this.rows.length;u++)d.push(this.rows[u].arr[c]);return d},r.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},r.default.Table.prototype.addColumn=function(c){var d=c||null;this.columns.push(d)},r.default.Table.prototype.getColumnCount=function(){return this.columns.length},r.default.Table.prototype.getRowCount=function(){return this.rows.length},r.default.Table.prototype.removeTokens=function(c,d){for(var p=[],u=0;u<c.length;u++)p.push(c.charAt(u).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var o=new RegExp(p.join("|"),"g");if(d===void 0)for(var l=0;l<this.columns.length;l++)for(var h=0;h<this.rows.length;h++){var f=this.rows[h].arr[l];f=f.replace(o,""),this.rows[h].arr[l]=f,this.rows[h].obj[this.columns[l]]=f}else if(typeof d=="string")for(var m=0;m<this.rows.length;m++){var g=this.rows[m].obj[d];g=g.replace(o,""),this.rows[m].obj[d]=g;var v=this.columns.indexOf(d);this.rows[m].arr[v]=g}else for(var x=0;x<this.rows.length;x++){var w=this.rows[x].arr[d];w=w.replace(o,""),this.rows[x].arr[d]=w,this.rows[x].obj[this.columns[d]]=w}},r.default.Table.prototype.trim=function(c){var d=new RegExp(" ","g");if(c===void 0)for(var p=0;p<this.columns.length;p++)for(var u=0;u<this.rows.length;u++){var o=this.rows[u].arr[p];o=o.replace(d,""),this.rows[u].arr[p]=o,this.rows[u].obj[this.columns[p]]=o}else if(typeof c=="string")for(var l=0;l<this.rows.length;l++){var h=this.rows[l].obj[c];h=h.replace(d,""),this.rows[l].obj[c]=h;var f=this.columns.indexOf(c);this.rows[l].arr[f]=h}else for(var m=0;m<this.rows.length;m++){var g=this.rows[m].arr[c];g=g.replace(d,""),this.rows[m].arr[c]=g,this.rows[m].obj[this.columns[c]]=g}},r.default.Table.prototype.removeColumn=function(c){var d,p;typeof c=="string"?(d=c,p=this.columns.indexOf(c)):(p=c,d=this.columns[c]);var u=this.columns.splice(p+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(u);for(var o=0;o<this.rows.length;o++){var l=this.rows[o].arr,h=l.splice(p+1,l.length);l.pop(),this.rows[o].arr=l.concat(h),delete this.rows[o].obj[d]}},r.default.Table.prototype.set=function(c,d,p){this.rows[c].set(d,p)},r.default.Table.prototype.setNum=function(c,d,p){this.rows[c].setNum(d,p)},r.default.Table.prototype.setString=function(c,d,p){this.rows[c].setString(d,p)},r.default.Table.prototype.get=function(c,d){return this.rows[c].get(d)},r.default.Table.prototype.getNum=function(c,d){return this.rows[c].getNum(d)},r.default.Table.prototype.getString=function(c,d){return this.rows[c].getString(d)},r.default.Table.prototype.getObject=function(c){for(var d,p={},u=0;u<this.rows.length;u++)if(d=this.rows[u].obj,typeof c=="string"){if(!(0<=this.columns.indexOf(c)))throw new Error('This table has no column named "'.concat(c,'"'));p[d[c]]=d}else p[u]=this.rows[u].obj;return p},r.default.Table.prototype.getArray=function(){for(var c=[],d=0;d<this.rows.length;d++)c.push(this.rows[d].arr);return c};var a=r.default;i.default=a},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.splice":162,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.trim":190}],288:[function(e,n,i){e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.TableRow=function(c,d){var p=[],u={};c&&(d=d||",",p=c.split(d));for(var o=0;o<p.length;o++){var l=o,h=p[o];u[l]=h}this.arr=p,this.obj=u,this.table=null},r.default.TableRow.prototype.set=function(c,d){if(typeof c=="string"){var p=this.table.columns.indexOf(c);if(!(0<=p))throw new Error('This table has no column named "'.concat(c,'"'));this.obj[c]=d,this.arr[p]=d}else{if(!(c<this.table.columns.length))throw new Error("Column #".concat(c," is out of the range of this table"));this.arr[c]=d;var u=this.table.columns[c];this.obj[u]=d}},r.default.TableRow.prototype.setNum=function(c,d){var p=parseFloat(d);this.set(c,p)},r.default.TableRow.prototype.setString=function(c,d){var p=d.toString();this.set(c,p)},r.default.TableRow.prototype.get=function(c){return typeof c=="string"?this.obj[c]:this.arr[c]},r.default.TableRow.prototype.getNum=function(c){var d;if((d=parseFloat(typeof c=="string"?this.obj[c]:this.arr[c])).toString()==="NaN")throw"Error: ".concat(this.obj[c]," is NaN (Not a Number)");return d},r.default.TableRow.prototype.getString=function(c){return typeof c=="string"?this.obj[c].toString():this.arr[c].toString()};var a=r.default;i.default=a},{"../core/main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.split":188}],289:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(d){for(var p=[],u=0;u<d.length;u++)p.push(new r.default.XML(d[u]));return p}r.default.XML=function(d){if(d)this.DOM=d;else{var p=document.implementation.createDocument(null,"doc");this.DOM=p.createElement("root")}},r.default.XML.prototype.getParent=function(){return new r.default.XML(this.DOM.parentElement)},r.default.XML.prototype.getName=function(){return this.DOM.tagName},r.default.XML.prototype.setName=function(d){var p=this.DOM.innerHTML,u=this.DOM.attributes,o=document.implementation.createDocument(null,"default").createElement(d);o.innerHTML=p;for(var l=0;l<u.length;l++)o.setAttribute(u[l].nodeName,u.nodeValue);this.DOM=o},r.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},r.default.XML.prototype.listChildren=function(){for(var d=[],p=0;p<this.DOM.childNodes.length;p++)d.push(this.DOM.childNodes[p].nodeName);return d},r.default.XML.prototype.getChildren=function(d){return a(d?this.DOM.getElementsByTagName(d):this.DOM.children)},r.default.XML.prototype.getChild=function(d){if(typeof d!="string")return new r.default.XML(this.DOM.children[d]);var p=!0,u=!1,o=void 0;try{for(var l,h=this.DOM.children[Symbol.iterator]();!(p=(l=h.next()).done);p=!0){var f=l.value;if(f.tagName===d)return new r.default.XML(f)}}catch(m){u=!0,o=m}finally{try{p||h.return==null||h.return()}finally{if(u)throw o}}},r.default.XML.prototype.addChild=function(d){d instanceof r.default.XML&&this.DOM.appendChild(d.DOM)},r.default.XML.prototype.removeChild=function(d){var p=-1;if(typeof d=="string"){for(var u=0;u<this.DOM.children.length;u++)if(this.DOM.children[u].tagName===d){p=u;break}}else p=d;p!==-1&&this.DOM.removeChild(this.DOM.children[p])},r.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},r.default.XML.prototype.listAttributes=function(){var d=[],p=!0,u=!1,o=void 0;try{for(var l,h=this.DOM.attributes[Symbol.iterator]();!(p=(l=h.next()).done);p=!0){var f=l.value;d.push(f.nodeName)}}catch(m){u=!0,o=m}finally{try{p||h.return==null||h.return()}finally{if(u)throw o}}return d},r.default.XML.prototype.hasAttribute=function(d){var p={},u=!0,o=!1,l=void 0;try{for(var h,f=this.DOM.attributes[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var m=h.value;p[m.nodeName]=m.nodeValue}}catch(g){o=!0,l=g}finally{try{u||f.return==null||f.return()}finally{if(o)throw l}}return!!p[d]},r.default.XML.prototype.getNum=function(d,p){var u={},o=!0,l=!1,h=void 0;try{for(var f,m=this.DOM.attributes[Symbol.iterator]();!(o=(f=m.next()).done);o=!0){var g=f.value;u[g.nodeName]=g.nodeValue}}catch(v){l=!0,h=v}finally{try{o||m.return==null||m.return()}finally{if(l)throw h}}return Number(u[d])||p||0},r.default.XML.prototype.getString=function(d,p){var u={},o=!0,l=!1,h=void 0;try{for(var f,m=this.DOM.attributes[Symbol.iterator]();!(o=(f=m.next()).done);o=!0){var g=f.value;u[g.nodeName]=g.nodeValue}}catch(v){l=!0,h=v}finally{try{o||m.return==null||m.return()}finally{if(l)throw h}}return u[d]?String(u[d]):p||null},r.default.XML.prototype.setAttribute=function(d,p){this.DOM.setAttribute(d,p)},r.default.XML.prototype.getContent=function(d){return this.DOM.textContent.replace(/\s\s+/g,",")||d||null},r.default.XML.prototype.setContent=function(d){this.DOM.children.length||(this.DOM.textContent=d)},r.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)};var c=r.default;i.default=c},{"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],290:[function(e,n,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var d=arguments.length,p=[],u=0,o=0;o<d;o++){var l=arguments[o];if((l=+l)==1/0||l===-1/0)return 1/0;u<(l=Math.abs(l))&&(u=l),p[o]=l}u===0&&(u=1);for(var h=0,f=0,m=0;m<d;m++){var g=p[m]/u,v=g*g-f,x=h+v;f=x-h-v,h=x}return Math.sqrt(h)*u}r.default.prototype.abs=Math.abs,r.default.prototype.ceil=Math.ceil,r.default.prototype.constrain=function(d,p,u){return r.default._validateParameters("constrain",arguments),Math.max(Math.min(d,u),p)},r.default.prototype.dist=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return r.default._validateParameters("dist",p),p.length===4?a(p[2]-p[0],p[3]-p[1]):p.length===6?a(p[3]-p[0],p[4]-p[1],p[5]-p[2]):void 0},r.default.prototype.exp=Math.exp,r.default.prototype.floor=Math.floor,r.default.prototype.lerp=function(d,p,u){return r.default._validateParameters("lerp",arguments),u*(p-d)+d},r.default.prototype.log=Math.log,r.default.prototype.mag=function(d,p){return r.default._validateParameters("mag",arguments),a(d,p)},r.default.prototype.map=function(d,p,u,o,l,h){r.default._validateParameters("map",arguments);var f=(d-p)/(u-p)*(l-o)+o;return h?o<l?this.constrain(f,o,l):this.constrain(f,l,o):f},r.default.prototype.max=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return p[0]instanceof Array?Math.max.apply(null,p[0]):Math.max.apply(null,p)},r.default.prototype.min=function(){for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return p[0]instanceof Array?Math.min.apply(null,p[0]):Math.min.apply(null,p)},r.default.prototype.norm=function(d,p,u){return r.default._validateParameters("norm",arguments),this.map(d,p,u,0,1)},r.default.prototype.pow=Math.pow,r.default.prototype.round=function(d,p){return p?Number(Math.round(d+"e"+p)+"e-"+p):Math.round(d)},r.default.prototype.sq=function(d){return d*d},r.default.prototype.sqrt=Math.sqrt,r.default.prototype.fract=function(d){r.default._validateParameters("fract",arguments);var p=0,u=Number(d);if(isNaN(u)||Math.abs(u)===1/0)return u;if(u<0&&(u=-u,p=1),!String(u).includes(".")||String(u).includes("e"))return u<1?Math.abs(p-u):0;var o=String(u);return o=Number("0"+o.slice(o.indexOf("."))),Math.abs(p-o)};var c=r.default;i.default=c},{"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.math.hypot":165,"core-js/modules/es.number.constructor":167,"core-js/modules/es.string.includes":182}],291:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.createVector=function(c,d,p){return this instanceof r.default?new r.default.Vector(this,arguments):new r.default.Vector(c,d,p)};var a=r.default;i.default=a},{"../core/main":260}],292:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(l){return .5*(1-Math.cos(l*Math.PI))}var c,d=4095,p=4,u=.5;r.default.prototype.noise=function(l){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var m=0;m<4096;m++)c[m]=Math.random()}l<0&&(l=-l),h<0&&(h=-h),f<0&&(f=-f);for(var g,v,x,w,M,A=Math.floor(l),E=Math.floor(h),I=Math.floor(f),R=l-A,P=h-E,D=f-I,O=0,j=.5,N=0;N<p;N++){var q=A+(E<<4)+(I<<8);g=a(R),v=a(P),x=c[q&d],x+=g*(c[q+1&d]-x),w=c[q+16&d],x+=v*((w+=g*(c[q+16+1&d]-w))-x),w=c[(q+=256)&d],w+=g*(c[q+1&d]-w),M=c[q+16&d],w+=v*((M+=g*(c[q+16+1&d]-M))-w),O+=(x+=a(D)*(w-x))*j,j*=u,A<<=1,E<<=1,I<<=1,1<=(R*=2)&&(A++,R--),1<=(P*=2)&&(E++,P--),1<=(D*=2)&&(I++,D--)}return O},r.default.prototype.noiseDetail=function(l,h){0<l&&(p=l),0<h&&(u=h)},r.default.prototype.noiseSeed=function(l){var h,f,m,g=(m=4294967296,{setSeed:function(x){f=h=(x==null?Math.random()*m:x)>>>0},getSeed:function(){return h},rand:function(){return(f=(1664525*f+1013904223)%m)/m}});g.setSeed(l),c=new Array(4096);for(var v=0;v<4096;v++)c[v]=g.rand()};var o=r.default;i.default=o},{"../core/main":260}],293:[function(e,n,i){function s(l){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(l)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(l){if(l&&l.__esModule)return l;if(l===null||s(l)!=="object"&&typeof l!="function")return{default:l};var h=d();if(h&&h.has(l))return h.get(l);var f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)){var v=m?Object.getOwnPropertyDescriptor(l,g):null;v&&(v.get||v.set)?Object.defineProperty(f,g,v):f[g]=l[g]}return f.default=l,h&&h.set(l,f),f}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return d=function(){return l},l}a.default.Vector=function(l,h,f){var m,g,v;v=l instanceof a.default?(this.p5=l,m=h[0]||0,g=h[1]||0,h[2]||0):(m=l||0,g=h||0,f||0),this.x=m,this.y=g,this.z=v},a.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},a.default.Vector.prototype.set=function(l,h,f){return l instanceof a.default.Vector?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):l instanceof Array?(this.x=l[0]||0,this.y=l[1]||0,this.z=l[2]||0):(this.x=l||0,this.y=h||0,this.z=f||0),this},a.default.Vector.prototype.copy=function(){return this.p5?new a.default.Vector(this.p5,[this.x,this.y,this.z]):new a.default.Vector(this.x,this.y,this.z)},a.default.Vector.prototype.add=function(l,h,f){return l instanceof a.default.Vector?(this.x+=l.x||0,this.y+=l.y||0,this.z+=l.z||0):l instanceof Array?(this.x+=l[0]||0,this.y+=l[1]||0,this.z+=l[2]||0):(this.x+=l||0,this.y+=h||0,this.z+=f||0),this};function p(l,h){return l!==0&&(this.x=this.x%l),h!==0&&(this.y=this.y%h),this}function u(l,h,f){return l!==0&&(this.x=this.x%l),h!==0&&(this.y=this.y%h),f!==0&&(this.z=this.z%f),this}a.default.Vector.prototype.rem=function(l,h,f){if(l instanceof a.default.Vector){if(Number.isFinite(l.x)&&Number.isFinite(l.y)&&Number.isFinite(l.z)){var m=parseFloat(l.x),g=parseFloat(l.y),v=parseFloat(l.z);u.call(this,m,g,v)}}else if(l instanceof Array)l.every(function(M){return Number.isFinite(M)})&&(l.length===2&&p.call(this,l[0],l[1]),l.length===3&&u.call(this,l[0],l[1],l[2]));else if(arguments.length===1){if(Number.isFinite(l)&&l!==0)return this.x=this.x%l,this.y=this.y%l,this.z=this.z%l,this}else if(arguments.length===2){var x=Array.prototype.slice.call(arguments);x.every(function(M){return Number.isFinite(M)})&&x.length===2&&p.call(this,x[0],x[1])}else if(arguments.length===3){var w=Array.prototype.slice.call(arguments);w.every(function(M){return Number.isFinite(M)})&&w.length===3&&u.call(this,w[0],w[1],w[2])}},a.default.Vector.prototype.sub=function(l,h,f){return l instanceof a.default.Vector?(this.x-=l.x||0,this.y-=l.y||0,this.z-=l.z||0):l instanceof Array?(this.x-=l[0]||0,this.y-=l[1]||0,this.z-=l[2]||0):(this.x-=l||0,this.y-=h||0,this.z-=f||0),this},a.default.Vector.prototype.mult=function(l,h,f){if(l instanceof a.default.Vector)return Number.isFinite(l.x)&&Number.isFinite(l.y)&&Number.isFinite(l.z)&&typeof l.x=="number"&&typeof l.y=="number"&&typeof l.z=="number"?(this.x*=l.x,this.y*=l.y,this.z*=l.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(l instanceof Array)return l.every(function(g){return Number.isFinite(g)})&&l.every(function(g){return typeof g=="number"})?l.length===1?(this.x*=l[0],this.y*=l[0],this.z*=l[0]):l.length===2?(this.x*=l[0],this.y*=l[1]):l.length===3&&(this.x*=l[0],this.y*=l[1],this.z*=l[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var m=Array.prototype.slice.call(arguments);return m.every(function(g){return Number.isFinite(g)})&&m.every(function(g){return typeof g=="number"})?(arguments.length===1&&(this.x*=l,this.y*=l,this.z*=l),arguments.length===2&&(this.x*=l,this.y*=h),arguments.length===3&&(this.x*=l,this.y*=h,this.z*=f)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},a.default.Vector.prototype.div=function(l,h,f){if(l instanceof a.default.Vector){if(Number.isFinite(l.x)&&Number.isFinite(l.y)&&Number.isFinite(l.z)&&typeof l.x=="number"&&typeof l.y=="number"&&typeof l.z=="number"){if(l.x===0||l.y===0||l.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=l.x,this.y/=l.y,this.z/=l.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(l instanceof Array){if(l.every(function(g){return Number.isFinite(g)})&&l.every(function(g){return typeof g=="number"})){if(l.some(function(g){return g===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;l.length===1?(this.x/=l[0],this.y/=l[0],this.z/=l[0]):l.length===2?(this.x/=l[0],this.y/=l[1]):l.length===3&&(this.x/=l[0],this.y/=l[1],this.z/=l[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var m=Array.prototype.slice.call(arguments);if(m.every(function(g){return Number.isFinite(g)})&&m.every(function(g){return typeof g=="number"})){if(m.some(function(g){return g===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=l,this.y/=l,this.z/=l),arguments.length===2&&(this.x/=l,this.y/=h),arguments.length===3&&(this.x/=l,this.y/=h,this.z/=f)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},a.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},a.default.Vector.prototype.magSq=function(){var l=this.x,h=this.y,f=this.z;return l*l+h*h+f*f},a.default.Vector.prototype.dot=function(l,h,f){return l instanceof a.default.Vector?this.dot(l.x,l.y,l.z):this.x*(l||0)+this.y*(h||0)+this.z*(f||0)},a.default.Vector.prototype.cross=function(l){var h=this.y*l.z-this.z*l.y,f=this.z*l.x-this.x*l.z,m=this.x*l.y-this.y*l.x;return this.p5?new a.default.Vector(this.p5,[h,f,m]):new a.default.Vector(h,f,m)},a.default.Vector.prototype.dist=function(l){return l.copy().sub(this).mag()},a.default.Vector.prototype.normalize=function(){var l=this.mag();return l!==0&&this.mult(1/l),this},a.default.Vector.prototype.limit=function(l){var h=this.magSq();return l*l<h&&this.div(Math.sqrt(h)).mult(l),this},a.default.Vector.prototype.setMag=function(l){return this.normalize().mult(l)},a.default.Vector.prototype.heading=function(){var l=Math.atan2(this.y,this.x);return this.p5?this.p5._fromRadians(l):l},a.default.Vector.prototype.setHeading=function(l){var h=this.mag();return this.x=h*Math.cos(l),this.y=h*Math.sin(l),this},a.default.Vector.prototype.rotate=function(l){var h=this.heading()+l;this.p5&&(h=this.p5._toRadians(h));var f=this.mag();return this.x=Math.cos(h)*f,this.y=Math.sin(h)*f,this},a.default.Vector.prototype.angleBetween=function(l){var h,f=this.dot(l)/(this.mag()*l.mag());return h=Math.acos(Math.min(1,Math.max(-1,f))),h*=Math.sign(this.cross(l).z||1),this.p5&&(h=this.p5._fromRadians(h)),h},a.default.Vector.prototype.lerp=function(l,h,f,m){return l instanceof a.default.Vector?this.lerp(l.x,l.y,l.z,h):(this.x+=(l-this.x)*m||0,this.y+=(h-this.y)*m||0,this.z+=(f-this.z)*m||0,this)},a.default.Vector.prototype.reflect=function(l){return l.normalize(),this.sub(l.mult(2*this.dot(l)))},a.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},a.default.Vector.prototype.equals=function(l,h,f){var m,g,v;return v=l instanceof a.default.Vector?(m=l.x||0,g=l.y||0,l.z||0):l instanceof Array?(m=l[0]||0,g=l[1]||0,l[2]||0):(m=l||0,g=h||0,f||0),this.x===m&&this.y===g&&this.z===v},a.default.Vector.fromAngle=function(l,h){return h===void 0&&(h=1),new a.default.Vector(h*Math.cos(l),h*Math.sin(l),0)},a.default.Vector.fromAngles=function(l,h,f){f===void 0&&(f=1);var m=Math.cos(h),g=Math.sin(h),v=Math.cos(l),x=Math.sin(l);return new a.default.Vector(f*x*g,-f*v,f*x*m)},a.default.Vector.random2D=function(){return this.fromAngle(Math.random()*c.TWO_PI)},a.default.Vector.random3D=function(){var l=Math.random()*c.TWO_PI,h=2*Math.random()-1,f=Math.sqrt(1-h*h),m=f*Math.cos(l),g=f*Math.sin(l);return new a.default.Vector(m,g,h)},a.default.Vector.add=function(l,h,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),f.add(h),f},a.default.Vector.rem=function(l,h){if(l instanceof a.default.Vector&&h instanceof a.default.Vector){var f=l.copy();return f.rem(h),f}},a.default.Vector.sub=function(l,h,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),f.sub(h),f},a.default.Vector.mult=function(l,h,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),f.mult(h),f},a.default.Vector.rotate=function(l,h,f){return arguments.length===2?f=l.copy():(f instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),f.set(l)),f.rotate(h),f},a.default.Vector.div=function(l,h,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),f.div(h),f},a.default.Vector.dot=function(l,h){return l.dot(h)},a.default.Vector.cross=function(l,h){return l.cross(h)},a.default.Vector.dist=function(l,h){return l.dist(h)},a.default.Vector.lerp=function(l,h,f,m){return m?m.set(l):(m=l.copy(),arguments.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),m.lerp(h,f),m},a.default.Vector.mag=function(l){var h=l.x,f=l.y,m=l.z,g=h*h+f*f+m*m;return Math.sqrt(g)},a.default.Vector.normalize=function(l,h){return arguments.length<2?h=l.copy():(h instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),h.set(l)),h.normalize()};var o=a.default.Vector;i.default=o},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.every":149,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.some":161,"core-js/modules/es.math.sign":166,"core-js/modules/es.number.constructor":167,"core-js/modules/es.number.is-finite":168,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.sub":189}],294:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},a="_lcg_random_state",c=4294967296,d=0;r.default.prototype._lcg=function(u){return this[u]=(1664525*this[u]+1013904223)%c,this[u]/c},r.default.prototype._lcgSetSeed=function(u,o){this[u]=(o==null?Math.random()*c:o)>>>0},r.default.prototype.randomSeed=function(u){this._lcgSetSeed(a,u),this._gaussian_previous=!1},r.default.prototype.random=function(u,o){var l;if(r.default._validateParameters("random",arguments),l=this[a]!=null?this._lcg(a):Math.random(),u===void 0)return l;if(o===void 0)return u instanceof Array?u[Math.floor(l*u.length)]:l*u;if(o<u){var h=u;u=o,o=h}return l*(o-u)+u},r.default.prototype.randomGaussian=function(u){var o,l,h,f,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)o=d,this._gaussian_previous=!1;else{for(;1<=(f=(l=this.random(2)-1)*l+(h=this.random(2)-1)*h););o=l*(f=Math.sqrt(-2*Math.log(f)/f)),d=h*f,this._gaussian_previous=!0}return o*m+(u||0)};var p=r.default;i.default=p},{"../core/main":260}],295:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}a.default.prototype._angleMode=c.RADIANS,a.default.prototype.acos=function(u){return this._fromRadians(Math.acos(u))},a.default.prototype.asin=function(u){return this._fromRadians(Math.asin(u))},a.default.prototype.atan=function(u){return this._fromRadians(Math.atan(u))},a.default.prototype.atan2=function(u,o){return this._fromRadians(Math.atan2(u,o))},a.default.prototype.cos=function(u){return Math.cos(this._toRadians(u))},a.default.prototype.sin=function(u){return Math.sin(this._toRadians(u))},a.default.prototype.tan=function(u){return Math.tan(this._toRadians(u))},a.default.prototype.degrees=function(u){return u*c.RAD_TO_DEG},a.default.prototype.radians=function(u){return u*c.DEG_TO_RAD},a.default.prototype.angleMode=function(u){u!==c.DEGREES&&u!==c.RADIANS||(this._angleMode=u)},a.default.prototype._toRadians=function(u){return this._angleMode===c.DEGREES?u*c.DEG_TO_RAD:u},a.default.prototype._toDegrees=function(u){return this._angleMode===c.RADIANS?u*c.RAD_TO_DEG:u},a.default.prototype._fromRadians=function(u){return this._angleMode===c.DEGREES?u*c.RAD_TO_DEG:u};var p=a.default;i.default=p},{"../core/constants":250,"../core/main":260}],296:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.textAlign=function(c,d){var p;return r.default._validateParameters("textAlign",arguments),(p=this._renderer).textAlign.apply(p,arguments)},r.default.prototype.textLeading=function(c){var d;return r.default._validateParameters("textLeading",arguments),(d=this._renderer).textLeading.apply(d,arguments)},r.default.prototype.textSize=function(c){var d;return r.default._validateParameters("textSize",arguments),(d=this._renderer).textSize.apply(d,arguments)},r.default.prototype.textStyle=function(c){var d;return r.default._validateParameters("textStyle",arguments),(d=this._renderer).textStyle.apply(d,arguments)},r.default.prototype.textWidth=function(){for(var c,d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return p[0]+="",r.default._validateParameters("textWidth",p),p[0].length===0?0:(c=this._renderer).textWidth.apply(c,p)},r.default.prototype.textAscent=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return r.default._validateParameters("textAscent",d),this._renderer.textAscent()},r.default.prototype.textDescent=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return r.default._validateParameters("textDescent",d),this._renderer.textDescent()},r.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},r.default.prototype.textWrap=function(c){if(c!=="WORD"&&c!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(c)};var a=r.default;i.default=a},{"../core/main":260}],297:[function(e,n,i){function s(l){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(l)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=u(e("../core/constants")),d=u(e("opentype.js"));function p(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return p=function(){return l},l}function u(l){if(l&&l.__esModule)return l;if(l===null||s(l)!=="object"&&typeof l!="function")return{default:l};var h=p();if(h&&h.has(l))return h.get(l);var f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)){var v=m?Object.getOwnPropertyDescriptor(l,g):null;v&&(v.get||v.set)?Object.defineProperty(f,g,v):f[g]=l[g]}return f.default=l,h&&h.set(l,f),f}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.loadFont=function(l,h,f){a.default._validateParameters("loadFont",arguments);var m=new a.default.Font(this),g=this;return d.load(l,function(v,x){if(v)return a.default._friendlyFileLoadError(4,l),f!==void 0?f(v):void console.error(v,l);m.font=x,h!==void 0&&h(m),g._decrementPreload();var w,M,A=l.split("\\").pop().split("/").pop(),E=A.lastIndexOf("."),I=E<1?null:A.substr(E+1);["ttf","otf","woff","woff2"].includes(I)&&(w=A.substr(0,E),(M=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(w,`;
src: url(`).concat(l,`);
}
`))),document.head.appendChild(M))}),m},a.default.prototype.text=function(l,h,f,m,g){var v;return a.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(v=this._renderer).text.apply(v,arguments):this},a.default.prototype.textFont=function(l,h){if(a.default._validateParameters("textFont",arguments),arguments.length){if(!l)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",l),h&&(this._renderer._setProperty("_textSize",h),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",h*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var o=a.default;i.default=o},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.split":188,"opentype.js":236}],298:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},a=function(R){if(R&&R.__esModule)return R;if(R===null||d(R)!=="object"&&typeof R!="function")return{default:R};var P=c();if(P&&P.has(R))return P.get(R);var D={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in R)if(Object.prototype.hasOwnProperty.call(R,j)){var N=O?Object.getOwnPropertyDescriptor(R,j):null;N&&(N.get||N.set)?Object.defineProperty(D,j,N):D[j]=R[j]}return D.default=R,P&&P.set(R,D),D}(e("../core/constants"));function c(){if(typeof WeakMap!="function")return null;var R=new WeakMap;return c=function(){return R},R}function d(R){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(R)}function p(R,P){for(var D=function(X,V){if(d(X)!=="object")X=V;else for(var $ in V)X[$]===void 0&&(X[$]=V[$]);return X}(P,{sampleFactor:.1,simplifyThreshold:0}),O=g(R,0,1),j=O/(O*D.sampleFactor),N=[],q=0;q<O;q+=j)N.push(g(R,q));return D.simplifyThreshold&&function(X){for(var V=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,$=0,K=X.length-1;3<X.length&&0<=K;--K)h(l(X,K-1),l(X,K),l(X,K+1),V)&&(X.splice(K%X.length,1),$++)}(N,D.simplifyThreshold),N}function u(R){for(var P,D=[],O=0;O<R.length;O++)R[O].type==="M"&&(P&&D.push(P),P=[]),P.push(o(R[O]));return D.push(P),D}function o(R){var P=[R.type];return R.type==="M"||R.type==="L"?P.push(R.x,R.y):R.type==="C"?P.push(R.x1,R.y1,R.x2,R.y2,R.x,R.y):R.type==="Q"&&P.push(R.x1,R.y1,R.x,R.y),P}function l(R,P){var D=R.length;return R[P<0?P%D+D:P%D]}function h(R,P,D,O){if(!O)return j=R,q=D,((N=P)[0]-j[0])*(q[1]-j[1])-(q[0]-j[0])*(N[1]-j[1])==0;var j,N,q;h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]);var X=h.tmpPoint1,V=h.tmpPoint2;X.x=P.x-R.x,X.y=P.y-R.y,V.x=D.x-P.x,V.y=D.y-P.y;var $=X.x*V.x+X.y*V.y,K=Math.sqrt(X.x*X.x+X.y*X.y),_e=Math.sqrt(V.x*V.x+V.y*V.y);return Math.acos($/(K*_e))<O}function f(R,P,D,O,j,N,q,X,V){var $=1-V,K=Math.pow($,3),_e=Math.pow($,2),me=V*V,ye=me*V,fe=K*R+3*_e*V*D+3*$*V*V*j+ye*q,de=K*P+3*_e*V*O+3*$*V*V*N+ye*X,Ee=R+2*V*(D-R)+me*(j-2*D+R),C=P+2*V*(O-P)+me*(N-2*O+P),F=D+2*V*(j-D)+me*(q-2*j+D),H=O+2*V*(N-O)+me*(X-2*N+O),ne=$*R+V*D,re=$*P+V*O,oe=$*j+V*q,te=$*N+V*X,xe=90-180*Math.atan2(Ee-F,C-H)/Math.PI;return(F<Ee||C<H)&&(xe+=180),{x:fe,y:de,m:{x:Ee,y:C},n:{x:F,y:H},start:{x:ne,y:re},end:{x:oe,y:te},alpha:xe}}function m(R,P,D,O,j,N,q,X,V){return V==null?A(R,P,D,O,j,N,q,X):f(R,P,D,O,j,N,q,X,function($,K,_e,me,ye,fe,de,Ee,C){if(!(C<0||A($,K,_e,me,ye,fe,de,Ee)<C)){var F,H=.5,ne=1-H;for(F=A($,K,_e,me,ye,fe,de,Ee,ne);.01<Math.abs(F-C);)F=A($,K,_e,me,ye,fe,de,Ee,ne+=(F<C?1:-1)*(H/=2));return ne}}(R,P,D,O,j,N,q,X,V))}function g(R,P,D){for(var O,j,N,q,X,V=0,$=0,K=(R=function(_e,me){function ye(ve,we,Re){var Ge,Pe;if(!ve)return["C",we.x,we.y,we.x,we.y,we.x,we.y];switch(ve[0]in{T:1,Q:1}||(we.qx=we.qy=null),ve[0]){case"M":we.X=ve[1],we.Y=ve[2];break;case"A":ve=["C"].concat(function Ze(Je,Ce,le,De,se,Ne,ie,U,Y,z){var J=Math.PI,ce=120*J/180,Ae,Ie,Ve,Me,Qe=J/180*(+se||0),rt=[],xt,bt=function(mt,_t,tt){var Rt=mt*Math.cos(tt)-_t*Math.sin(tt),ut=mt*Math.sin(tt)+_t*Math.cos(tt);return{x:Rt,y:ut}};if(z)Ae=z[0],Ie=z[1],Ve=z[2],Me=z[3];else{xt=bt(Je,Ce,-Qe),Je=xt.x,Ce=xt.y,xt=bt(U,Y,-Qe),U=xt.x,Y=xt.y;var ct=(Je-U)/2,yt=(Ce-Y)/2,Mt=ct*ct/(le*le)+yt*yt/(De*De);1<Mt&&(Mt=Math.sqrt(Mt),le*=Mt,De*=Mt);var sr=le*le,Dr=De*De,Br=(Ne===ie?-1:1)*Math.sqrt(Math.abs((sr*Dr-sr*yt*yt-Dr*ct*ct)/(sr*yt*yt+Dr*ct*ct)));Ve=Br*le*yt/De+(Je+U)/2,Me=Br*-De*ct/le+(Ce+Y)/2,Ae=Math.asin(((Ce-Me)/De).toFixed(9)),Ie=Math.asin(((Y-Me)/De).toFixed(9)),(Ae=Je<Ve?J-Ae:Ae)<0&&(Ae=2*J+Ae),(Ie=U<Ve?J-Ie:Ie)<0&&(Ie=2*J+Ie),ie&&Ie<Ae&&(Ae-=2*J),!ie&&Ae<Ie&&(Ie-=2*J)}var Sr=Ie-Ae;if(Math.abs(Sr)>ce){var Jr=Ie,be=U,ke=Y;Ie=Ae+ce*(ie&&Ae<Ie?1:-1),U=Ve+le*Math.cos(Ie),Y=Me+De*Math.sin(Ie),rt=Ze(U,Y,le,De,se,0,ie,be,ke,[Ie,Jr,Ve,Me])}Sr=Ie-Ae;var We=Math.cos(Ae),Ue=Math.sin(Ae),Xe=Math.cos(Ie),vt=Math.sin(Ie),pt=Math.tan(Sr/4),ht=4/3*le*pt,ue=4/3*De*pt,je=[Je,Ce],qe=[Je+ht*Ue,Ce-ue*We],Fe=[U+ht*vt,Y-ue*Xe],$e=[U,Y];qe[0]=2*je[0]-qe[0],qe[1]=2*je[1]-qe[1];{if(z)return[qe,Fe,$e].concat(rt);rt=[qe,Fe,$e].concat(rt).join().split(",");for(var ze=[],st=0,wt=rt.length;st<wt;st++)ze[st]=st%2?bt(rt[st-1],rt[st],Qe).y:bt(rt[st],rt[st+1],Qe).x;return ze}}.apply(0,[we.x,we.y].concat(ve.slice(1))));break;case"S":Pe=Re==="C"||Re==="S"?(Ge=2*we.x-we.bx,2*we.y-we.by):(Ge=we.x,we.y),ve=["C",Ge,Pe].concat(ve.slice(1));break;case"T":Re==="Q"||Re==="T"?(we.qx=2*we.x-we.qx,we.qy=2*we.y-we.qy):(we.qx=we.x,we.qy=we.y),ve=["C"].concat(M(we.x,we.y,we.qx,we.qy,ve[1],ve[2]));break;case"Q":we.qx=ve[1],we.qy=ve[2],ve=["C"].concat(M(we.x,we.y,ve[1],ve[2],ve[3],ve[4]));break;case"L":ve=["C"].concat(w(we.x,we.y,ve[1],ve[2]));break;case"H":ve=["C"].concat(w(we.x,we.y,ve[1],we.y));break;case"V":ve=["C"].concat(w(we.x,we.y,we.x,ve[1]));break;case"Z":ve=["C"].concat(w(we.x,we.y,we.X,we.Y))}return ve}function fe(ve,we){if(7<ve[we].length){ve[we].shift();for(var Re=ve[we];Re.length;)re[we]="A",F&&(oe[we]="A"),ve.splice(we++,0,["C"].concat(Re.splice(0,6)));ve.splice(we,1),Ee=Math.max(C.length,F&&F.length||0)}}function de(ve,we,Re,Ge,Pe){ve&&we&&ve[Pe][0]==="M"&&we[Pe][0]!=="M"&&(we.splice(Pe,0,["M",Ge.x,Ge.y]),Re.bx=0,Re.by=0,Re.x=ve[Pe][1],Re.y=ve[Pe][2],Ee=Math.max(C.length,F&&F.length||0))}var Ee,C=v(_e),F=me&&v(me),H={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},re=[],oe=[],te="",xe="";Ee=Math.max(C.length,F&&F.length||0);for(var Q=0;Q<Ee;Q++){C[Q]&&(te=C[Q][0]),te!=="C"&&(re[Q]=te,Q&&(xe=re[Q-1])),C[Q]=ye(C[Q],H,xe),re[Q]!=="A"&&te==="C"&&(re[Q]="C"),fe(C,Q),F&&(F[Q]&&(te=F[Q][0]),te!=="C"&&(oe[Q]=te,Q&&(xe=oe[Q-1])),F[Q]=ye(F[Q],ne,xe),oe[Q]!=="A"&&te==="C"&&(oe[Q]="C"),fe(F,Q)),de(C,F,H,ne,Q),de(F,C,ne,H,Q);var ge=C[Q],he=F&&F[Q],G=ge.length,W=F&&he.length;H.x=ge[G-2],H.y=ge[G-1],H.bx=parseFloat(ge[G-4])||H.x,H.by=parseFloat(ge[G-3])||H.y,ne.bx=F&&(parseFloat(he[W-4])||ne.x),ne.by=F&&(parseFloat(he[W-3])||ne.y),ne.x=F&&he[W-2],ne.y=F&&he[W-1]}return F?[C,F]:C}(R)).length;$<K;$++){if((N=R[$])[0]==="M")O=+N[1],j=+N[2];else{if(P<V+(q=m(O,j,N[1],N[2],N[3],N[4],N[5],N[6]))&&!D)return{x:(X=m(O,j,N[1],N[2],N[3],N[4],N[5],N[6],P-V)).x,y:X.y,alpha:X.alpha};V+=q,O=+N[5],j=+N[6]}N.shift()+N}return(X=D?V:f(O,j,N[0],N[1],N[2],N[3],N[4],N[5],1)).alpha&&(X={x:X.x,y:X.y,alpha:X.alpha}),X}function v(R){var P,D=[],O=0,j=0,N=0,q=0,X=0;if(!R)return D;R[0][0]==="M"&&(N=O=+R[0][1],q=j=+R[0][2],X++,D[0]=["M",O,j]);for(var V,$,K=R.length===3&&R[0][0]==="M"&&R[1][0].toUpperCase()==="R"&&R[2][0].toUpperCase()==="Z",_e=X,me=R.length;_e<me;_e++){if(D.push(V=[]),($=R[_e])[0]!==String.prototype.toUpperCase.call($[0]))switch(V[0]=String.prototype.toUpperCase.call($[0]),V[0]){case"A":V[1]=$[1],V[2]=$[2],V[3]=$[3],V[4]=$[4],V[5]=$[5],V[6]=+($[6]+O),V[7]=+($[7]+j);break;case"V":V[1]=+$[1]+j;break;case"H":V[1]=+$[1]+O;break;case"R":for(var ye=2,fe=(P=[O,j].concat($.slice(1))).length;ye<fe;ye++)P[ye]=+P[ye]+O,P[++ye]=+P[ye]+j;D.pop(),D=D.concat(x(P,K));break;case"M":N=+$[1]+O,q=+$[2]+j;break;default:for(var de=1,Ee=$.length;de<Ee;de++)V[de]=+$[de]+(de%2?O:j)}else if($[0]==="R")P=[O,j].concat($.slice(1)),D.pop(),D=D.concat(x(P,K)),V=["R"].concat($.slice(-2));else for(var C=0,F=$.length;C<F;C++)V[C]=$[C];switch(V[0]){case"Z":O=N,j=q;break;case"H":O=V[1];break;case"V":j=V[1];break;case"M":N=V[V.length-2],q=V[V.length-1];break;default:O=V[V.length-2],j=V[V.length-1]}}return D}function x(R,P){for(var D=[],O=0,j=R.length;O<j-2*!P;O+=2){var N=[{x:+R[O-2],y:+R[O-1]},{x:+R[O],y:+R[O+1]},{x:+R[O+2],y:+R[O+3]},{x:+R[O+4],y:+R[O+5]}];P?O?j-4===O?N[3]={x:+R[0],y:+R[1]}:j-2===O&&(N[2]={x:+R[0],y:+R[1]},N[3]={x:+R[2],y:+R[3]}):N[0]={x:+R[j-2],y:+R[j-1]}:j-4===O?N[3]=N[2]:O||(N[0]={x:+R[O],y:+R[O+1]}),D.push(["C",(-N[0].x+6*N[1].x+N[2].x)/6,(-N[0].y+6*N[1].y+N[2].y)/6,(N[1].x+6*N[2].x-N[3].x)/6,(N[1].y+6*N[2].y-N[3].y)/6,N[2].x,N[2].y])}return D}function w(R,P,D,O){return[R,P,D,O,D,O]}function M(R,P,D,O,j,N){return[1/3*R+2/3*D,1/3*P+2/3*O,1/3*j+2/3*D,1/3*N+2/3*O,j,N]}function A(R,P,D,O,j,N,q,X,V){V==null&&(V=1);for(var $=(V=1<V?1:V<0?0:V)/2,K=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_e=0,me=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ye=0;ye<12;ye++){var fe=$*K[ye]+$,de=E(fe,R,D,j,q),Ee=E(fe,P,O,N,X),C=de*de+Ee*Ee;_e+=me[ye]*Math.sqrt(C)}return $*_e}function E(R,P,D,O,j){return R*(R*(-3*P+9*D-9*O+3*j)+6*P-12*D+6*O)-3*P+3*D}r.default.Font=function(R){this.parent=R,this.cache={},this.font=void 0},r.default.Font.prototype.textBounds=function(R){var P,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,j=3<arguments.length?arguments[3]:void 0,N=4<arguments.length?arguments[4]:void 0,q=N&&N.renderer&&N.renderer._pInst||this.parent,X=q._renderer.drawingContext;if(X.textAlign||a.LEFT,X.textBaseline||a.BASELINE,j=j||q._renderer._textSize,!P){var V,$,K=[],_e=[],me=[];me[0]=[];var ye=[],fe=this._scale(j),de=q._renderer.textLeading(),Ee=0;this.font.forEachGlyph(R,D,O,j,N,function(re,oe,te,xe){var Q=re.getMetrics();re.index===0||re.index===10?me[Ee+=1]=[]:(me[Ee].push(oe+Q.xMin*fe),me[Ee].push(oe+Q.xMax*fe),ye.push(te+Ee*de+-Q.yMin*fe),ye.push(te+Ee*de+-Q.yMax*fe))}),0<me[Ee].length&&(K[Ee]=Math.min.apply(null,me[Ee]),_e[Ee]=Math.max.apply(null,me[Ee]));for(var C=0,F=0;F<=Ee;F++){K[F]=Math.min.apply(null,me[F]),_e[F]=Math.max.apply(null,me[F]);var H=_e[F]-K[F];C<H&&(C=H)}var ne=Math.min.apply(null,K);P={x:ne,y:V=Math.min.apply(null,ye),h:Math.max.apply(null,ye)-V,w:C,advance:ne-D},$=this._handleAlignment(q._renderer,R,P.x,P.y,P.w+P.advance),P.x=$.x,P.y=$.y}return P},r.default.Font.prototype.textToPoints=function(R,P,D,O,j){var N,q=0,X=[],V=this._getGlyphs(R);O=O||this.parent._renderer._textSize;for(var $=0;$<V.length;$++){if(!(V[N=$].name&&V[N].name==="space"||R.length===V.length&&R[N]===" "||V[N].index&&V[N].index===3))for(var K=u(V[$].getPath(P,D,O).commands),_e=0;_e<K.length;_e++)for(var me=p(K[_e],j),ye=0;ye<me.length;ye++)me[ye].x+=q,X.push(me[ye]);q+=V[$].advanceWidth*this._scale(O)}return X},r.default.Font.prototype._getGlyphs=function(R){return this.font.stringToGlyphs(R)},r.default.Font.prototype._getPath=function(R,P,D,O){var j=(O&&O.renderer&&O.renderer._pInst||this.parent)._renderer,N=this._handleAlignment(j,R,P,D);return this.font.getPath(R,N.x,N.y,j._textSize,O)},r.default.Font.prototype._getPathData=function(R,P,D,O){var j=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,P,D,O):d(P)==="object"&&(O=P),O&&typeof O.decimals=="number"&&(j=O.decimals),R.toPathData(j)},r.default.Font.prototype._getSVG=function(R,P,D,O){var j=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,P,D,O):d(P)==="object"&&(O=P),O&&(typeof O.decimals=="number"&&(j=O.decimals),typeof O.strokeWidth=="number"&&(R.strokeWidth=O.strokeWidth),O.fill!==void 0&&(R.fill=O.fill),O.stroke!==void 0&&(R.stroke=O.stroke)),R.toSVG(j)},r.default.Font.prototype._renderPath=function(R,P,D,O){var j,N=O&&O.renderer||this.parent._renderer,q=N.drawingContext;j=d(R)==="object"&&R.commands?R.commands:this._getPath(R,P,D,O).commands,q.beginPath();var X=!0,V=!1,$=void 0;try{for(var K,_e=j[Symbol.iterator]();!(X=(K=_e.next()).done);X=!0){var me=K.value;me.type==="M"?q.moveTo(me.x,me.y):me.type==="L"?q.lineTo(me.x,me.y):me.type==="C"?q.bezierCurveTo(me.x1,me.y1,me.x2,me.y2,me.x,me.y):me.type==="Q"?q.quadraticCurveTo(me.x1,me.y1,me.x,me.y):me.type==="Z"&&q.closePath()}}catch(ye){V=!0,$=ye}finally{try{X||_e.return==null||_e.return()}finally{if(V)throw $}}return N._doStroke&&N._strokeSet&&q.stroke(),N._doFill&&(N._fillSet||N._setFill(a._DEFAULT_TEXT_FILL),q.fill()),this},r.default.Font.prototype._textWidth=function(R,P){return this.font.getAdvanceWidth(R,P)},r.default.Font.prototype._textAscent=function(R){return this.font.ascender*this._scale(R)},r.default.Font.prototype._textDescent=function(R){return-this.font.descender*this._scale(R)},r.default.Font.prototype._scale=function(R){return 1/this.font.unitsPerEm*(R||this.parent._renderer._textSize)},r.default.Font.prototype._handleAlignment=function(R,P,D,O,j){var N=R._textSize;switch(j===void 0&&(j=this._textWidth(P,N)),R._textAlign){case a.CENTER:D-=j/2;break;case a.RIGHT:D-=j}switch(R._textBaseline){case a.TOP:O+=this._textAscent(N);break;case a.CENTER:O+=this._textAscent(N)/2;break;case a.BOTTOM:O-=this._textDescent(N)}return{x:D,y:O}};var I=r.default;i.default=I},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.number.to-fixed":169,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],299:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.append=function(c,d){return c.push(d),c},r.default.prototype.arrayCopy=function(c,d,p,u,o){var l,h;c=o!==void 0?(h=Math.min(o,c.length),l=u,c.slice(d,h+d)):(h=p!==void 0?(h=p,Math.min(h,c.length)):c.length,l=0,p=d,c.slice(0,h)),Array.prototype.splice.apply(p,[l,h].concat(c))},r.default.prototype.concat=function(c,d){return c.concat(d)},r.default.prototype.reverse=function(c){return c.reverse()},r.default.prototype.shorten=function(c){return c.pop(),c},r.default.prototype.shuffle=function(c,d){for(var p,u,o=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(c),l=(c=d||o?c:c.slice()).length;1<l;)p=this.random(0,1)*l|0,u=c[--l],c[l]=c[p],c[p]=u;return c},r.default.prototype.sort=function(c,d){var p=d?c.slice(0,Math.min(d,c.length)):c,u=d?c.slice(Math.min(d,c.length)):[];return(p=typeof p[0]=="string"?p.sort():p.sort(function(o,l){return o-l})).concat(u)},r.default.prototype.splice=function(c,d,p){return Array.prototype.splice.apply(c,[p,0].concat(d)),c},r.default.prototype.subset=function(c,d,p){return p!==void 0?c.slice(d,d+p):c.slice(d,c.length)};var a=r.default;i.default=a},{"../core/main":260,"core-js/modules/es.array-buffer.constructor":147,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174}],300:[function(e,n,i){e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},r.default.prototype.int=function(c){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,d):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(p){return r.default.prototype.int(p,d)}):void 0},r.default.prototype.str=function(c){return c instanceof Array?c.map(r.default.prototype.str):String(c)},r.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(r.default.prototype.boolean):void 0},r.default.prototype.byte=function(c){var d=r.default.prototype.int(c,10);return typeof d=="number"?(d+128)%256-128:d instanceof Array?d.map(r.default.prototype.byte):void 0},r.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(r.default.prototype.char):typeof c=="string"?r.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},r.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(r.default.prototype.unchar):void 0},r.default.prototype.hex=function(c,d){if(d=d==null?d=8:d,c instanceof Array)return c.map(function(u){return r.default.prototype.hex(u,d)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(d);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var p=Number(c).toString(16).toUpperCase();p.length<d;)p="0".concat(p);return p.length>=d&&(p=p.substring(p.length-d,p.length)),p}},r.default.prototype.unhex=function(c){return c instanceof Array?c.map(r.default.prototype.unhex):parseInt("0x".concat(c),16)};var a=r.default;i.default=a},{"../core/main":260,"core-js/modules/es.array.map":159,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.repeat":185}],301:[function(e,n,i){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(o,l,h){var f=o<0,m=f?o.toString().substring(1):o.toString(),g=m.indexOf("."),v=g!==-1?m.substring(0,g):m,x=g!==-1?m.substring(g+1):"",w=f?"-":"";if(h!==void 0){var M="";(g!==-1||0<h-x.length)&&(M="."),x.length>h&&(x=x.substring(0,h));for(var A=0;A<l-v.length;A++)w+="0";w+=v,w+=M,w+=x;for(var E=0;E<h-x.length;E++)w+="0";return w}for(var I=0;I<Math.max(l-v.length,0);I++)w+="0";return w+=m}function c(o,l){var h=(o=o.toString()).indexOf("."),f=h!==-1?o.substring(h):"",m=h!==-1?o.substring(0,h):o;if(m=m.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),l===0)f="";else if(l!==void 0)if(l>f.length)for(var g=l-(f+=h===-1?".":"").length+1,v=0;v<g;v++)f+="0";else f=f.substring(0,l+1);return m+f}function d(o){return 0<parseFloat(o)?"+".concat(o.toString()):o.toString()}function p(o){return 0<=parseFloat(o)?" ".concat(o.toString()):o.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.join=function(o,l){return r.default._validateParameters("join",arguments),o.join(l)},r.default.prototype.match=function(o,l){return r.default._validateParameters("match",arguments),o.match(l)},r.default.prototype.matchAll=function(o,l){r.default._validateParameters("matchAll",arguments);for(var h=new RegExp(l,"g"),f=h.exec(o),m=[];f!==null;)m.push(f),f=h.exec(o);return m},r.default.prototype.nf=function(o,l,h){return r.default._validateParameters("nf",arguments),o instanceof Array?o.map(function(f){return a(f,l,h)}):Object.prototype.toString.call(o)==="[object Arguments]"?o.length===3?this.nf(o[0],o[1],o[2]):o.length===2?this.nf(o[0],o[1]):this.nf(o[0]):a(o,l,h)},r.default.prototype.nfc=function(o,l){return r.default._validateParameters("nfc",arguments),o instanceof Array?o.map(function(h){return c(h,l)}):c(o,l)},r.default.prototype.nfp=function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];r.default._validateParameters("nfp",l);var f=r.default.prototype.nf.apply(this,l);return f instanceof Array?f.map(d):d(f)},r.default.prototype.nfs=function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];r.default._validateParameters("nfs",l);var f=r.default.prototype.nf.apply(this,l);return f instanceof Array?f.map(p):p(f)},r.default.prototype.split=function(o,l){return r.default._validateParameters("split",arguments),o.split(l)},r.default.prototype.splitTokens=function(o,l){var h;if(r.default._validateParameters("splitTokens",arguments),l!==void 0){var f=l,m=/\]/g.exec(f),g=/\[/g.exec(f);h=g&&m?(f=f.slice(0,m.index)+f.slice(m.index+1),g=/\[/g.exec(f),f=f.slice(0,g.index)+f.slice(g.index+1),new RegExp("[\\[".concat(f,"\\]]"),"g")):m?(f=f.slice(0,m.index)+f.slice(m.index+1),new RegExp("[".concat(f,"\\]]"),"g")):g?(f=f.slice(0,g.index)+f.slice(g.index+1),new RegExp("[".concat(f,"\\[]"),"g")):new RegExp("[".concat(f,"]"),"g")}else h=/\s/g;return o.split(h).filter(function(v){return v})},r.default.prototype.trim=function(o){return r.default._validateParameters("trim",arguments),o instanceof Array?o.map(this.trim):o.trim()};var u=r.default;i.default=u},{"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190}],302:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()};var a=r.default;i.default=a},{"../core/main":260}],303:[function(e,n,i){function s(o){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./p5.Geometry");var c=function(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var l=d();if(l&&l.has(o))return l.get(o);var h={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in o)if(Object.prototype.hasOwnProperty.call(o,m)){var g=f?Object.getOwnPropertyDescriptor(o,m):null;g&&(g.get||g.set)?Object.defineProperty(h,m,g):h[m]=o[m]}return h.default=o,l&&l.set(o,h),h}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return d=function(){return o},o}a.default.prototype.plane=function(o,l,h,f){this._assert3d("plane"),a.default._validateParameters("plane",arguments),o===void 0&&(o=50),l===void 0&&(l=o),h===void 0&&(h=1),f===void 0&&(f=1);var m="plane|".concat(h,"|").concat(f);if(!this._renderer.geometryInHash(m)){var g=new a.default.Geometry(h,f,function(){for(var v,x,w,M=0;M<=this.detailY;M++){x=M/this.detailY;for(var A=0;A<=this.detailX;A++)v=A/this.detailX,w=new a.default.Vector(v-.5,x-.5,0),this.vertices.push(w),this.uvs.push(v,x)}});g.computeFaces().computeNormals(),h<=1&&f<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(m,g)}return this._renderer.drawBuffersScaled(m,o,l,1),this},a.default.prototype.box=function(o,l,h,f,m){this._assert3d("box"),a.default._validateParameters("box",arguments),o===void 0&&(o=50),l===void 0&&(l=o),h===void 0&&(h=l);var g=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;f===void 0&&(f=g?1:4),m===void 0&&(m=g?1:4);var v="box|".concat(f,"|").concat(m);if(!this._renderer.geometryInHash(v)){var x=new a.default.Geometry(f,m,function(){var w=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var M=0;M<w.length;M++){for(var A=w[M],E=4*M,I=0;I<4;I++){var R=A[I],P=new a.default.Vector((2*(1&R)-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);this.vertices.push(P),this.uvs.push(1&I,(2&I)/2)}this.faces.push([E,1+E,2+E]),this.faces.push([2+E,1+E,3+E])}});x.computeNormals(),f<=4&&m<=4?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(v,x)}return this._renderer.drawBuffersScaled(v,o,l,h),this},a.default.prototype.sphere=function(o,l,h){return this._assert3d("sphere"),a.default._validateParameters("sphere",arguments),o===void 0&&(o=50),l===void 0&&(l=24),h===void 0&&(h=16),this.ellipsoid(o,o,o,l,h),this};function p(o,l,h,f,m,g,v){o=o<=0?1:o,l=l<0?0:l,h=h<=0?o:h,f=f<3?3:f;var x,w,M,A=(g=g===void 0||g)?-2:0,E=(m=m<1?1:m)+((v=v===void 0?l!==0:v)?2:0),I=Math.atan2(o-l,h),R=Math.sin(I),P=Math.cos(I);for(x=A;x<=E;++x){var D=x/m,O=h*D,j=void 0;for(j=x<0?(D=O=0,o):m<x?(O=h,D=1,l):o+(l-o)*D,x!==-2&&x!==m+2||(j=0),O-=h/2,w=0;w<f;++w){var N=w/(f-1),q=2*Math.PI*N,X=Math.sin(q),V=Math.cos(q);this.vertices.push(new a.default.Vector(X*j,O,V*j));var $=void 0;$=x<0?new a.default.Vector(0,-1,0):m<x&&l?new a.default.Vector(0,1,0):new a.default.Vector(X*P,R,V*P),this.vertexNormals.push($),this.uvs.push(N,D)}}var K=0;if(g){for(M=0;M<f;++M){var _e=(M+1)%f;this.faces.push([K+M,K+f+_e,K+f+M])}K+=2*f}for(x=0;x<m;++x){for(w=0;w<f;++w){var me=(w+1)%f;this.faces.push([K+w,K+me,K+f+me]),this.faces.push([K+w,K+f+me,K+f+w])}K+=f}if(v)for(K+=f,w=0;w<f;++w)this.faces.push([K+w,K+(w+1)%f,K+f])}a.default.prototype.cylinder=function(o,l,h,f,m,g){this._assert3d("cylinder"),a.default._validateParameters("cylinder",arguments),o===void 0&&(o=50),l===void 0&&(l=o),h===void 0&&(h=24),f===void 0&&(f=1),g===void 0&&(g=!0),m===void 0&&(m=!0);var v="cylinder|".concat(h,"|").concat(f,"|").concat(m,"|").concat(g);if(!this._renderer.geometryInHash(v)){var x=new a.default.Geometry(h,f);p.call(x,1,1,1,h,f,m,g),h<=24&&f<=16?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,x)}return this._renderer.drawBuffersScaled(v,o,l,o),this},a.default.prototype.cone=function(o,l,h,f,m){this._assert3d("cone"),a.default._validateParameters("cone",arguments),o===void 0&&(o=50),l===void 0&&(l=o),h===void 0&&(h=24),f===void 0&&(f=1),m===void 0&&(m=!0);var g="cone|".concat(h,"|").concat(f,"|").concat(m);if(!this._renderer.geometryInHash(g)){var v=new a.default.Geometry(h,f);p.call(v,1,0,1,h,f,m,!1),h<=24&&f<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,v)}return this._renderer.drawBuffersScaled(g,o,l,o),this},a.default.prototype.ellipsoid=function(o,l,h,f,m){this._assert3d("ellipsoid"),a.default._validateParameters("ellipsoid",arguments),o===void 0&&(o=50),l===void 0&&(l=o),h===void 0&&(h=o),f===void 0&&(f=24),m===void 0&&(m=16);var g="ellipsoid|".concat(f,"|").concat(m);if(!this._renderer.geometryInHash(g)){var v=new a.default.Geometry(f,m,function(){for(var x=0;x<=this.detailY;x++)for(var w=x/this.detailY,M=Math.PI*w-Math.PI/2,A=Math.cos(M),E=Math.sin(M),I=0;I<=this.detailX;I++){var R=I/this.detailX,P=2*Math.PI*R,D=Math.cos(P),O=Math.sin(P),j=new a.default.Vector(A*O,E,A*D);this.vertices.push(j),this.vertexNormals.push(j),this.uvs.push(R,w)}});v.computeFaces(),f<=24&&m<=24?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(g,v)}return this._renderer.drawBuffersScaled(g,o,l,h),this},a.default.prototype.torus=function(o,l,h,f){if(this._assert3d("torus"),a.default._validateParameters("torus",arguments),o===void 0)o=50;else if(!o)return;if(l===void 0)l=10;else if(!l)return;h===void 0&&(h=24),f===void 0&&(f=16);var m=(l/o).toPrecision(4),g="torus|".concat(m,"|").concat(h,"|").concat(f);if(!this._renderer.geometryInHash(g)){var v=new a.default.Geometry(h,f,function(){for(var x=0;x<=this.detailY;x++)for(var w=x/this.detailY,M=2*Math.PI*w,A=Math.cos(M),E=Math.sin(M),I=1+m*A,R=0;R<=this.detailX;R++){var P=R/this.detailX,D=2*Math.PI*P,O=Math.cos(D),j=Math.sin(D),N=new a.default.Vector(I*O,I*j,m*E),q=new a.default.Vector(A*O,A*j,E);this.vertices.push(N),this.vertexNormals.push(q),this.uvs.push(P,w)}});v.computeFaces(),h<=24&&f<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,v)}return this._renderer.drawBuffersScaled(g,o,o,o),this},a.default.RendererGL.prototype.point=function(o,l,h){h===void 0&&(h=0);var f=[];return f.push(new a.default.Vector(o,l,h)),this._drawPoints(f,this.immediateMode.buffers.point),this},a.default.RendererGL.prototype.triangle=function(o){var l=o[0],h=o[1],f=o[2],m=o[3],g=o[4],v=o[5];if(!this.geometryInHash("tri")){var x=new a.default.Geometry(1,1,function(){var A=[];A.push(new a.default.Vector(0,0,0)),A.push(new a.default.Vector(0,1,0)),A.push(new a.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=A,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]});x._makeTriangleEdges()._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)}var w=this.uMVMatrix.copy();try{var M=new a.default.Matrix([f-l,m-h,0,0,g-l,v-h,0,0,0,0,1,0,l,h,0,1]).mult(this.uMVMatrix);this.uMVMatrix=M,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},a.default.RendererGL.prototype.ellipse=function(o){this.arc(o[0],o[1],o[2],o[3],0,c.TWO_PI,c.OPEN,o[4])},a.default.RendererGL.prototype.arc=function(o){var l,h,f=o,m=arguments[1],g=arguments[2],v=arguments[3],x=arguments[4],w=arguments[5],M=arguments[6],A=arguments[7]||25;if(h=Math.abs(w-x)>=c.TWO_PI?"".concat(l="ellipse","|").concat(A,"|"):"".concat(l="arc","|").concat(x,"|").concat(w,"|").concat(M,"|").concat(A,"|"),!this.geometryInHash(h)){var E=new a.default.Geometry(A,1,function(){if(this.strokeIndices=[],x.toFixed(10)!==w.toFixed(10)){M!==c.PIE&&M!==void 0||(this.vertices.push(new a.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var R=0;R<=A;R++){var P=(w-x)*(R/A)+x,D=.5+Math.cos(P)/2,O=.5+Math.sin(P)/2;this.vertices.push(new a.default.Vector(D,O,0)),this.uvs.push([D,O]),R<A-1&&(this.faces.push([0,R+1,R+2]),this.strokeIndices.push([R+1,R+2]))}switch(M){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}});E.computeNormals(),A<=50?E._makeTriangleEdges()._edgesToVertices(E):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(l," with more than 50 detail")),this.createBuffers(h,E)}var I=this.uMVMatrix.copy();try{this.uMVMatrix.translate([f,m,0]),this.uMVMatrix.scale(g,v,1),this.drawBuffers(h)}finally{this.uMVMatrix=I}return this},a.default.RendererGL.prototype.rect=function(o){var l=this._pInst._glAttributes.perPixelLighting,h=o[0],f=o[1],m=o[2],g=o[3],v=o[4]||(l?1:24),x=o[5]||(l?1:16),w="rect|".concat(v,"|").concat(x);if(!this.geometryInHash(w)){var M=new a.default.Geometry(v,x,function(){for(var E=0;E<=this.detailY;E++)for(var I=E/this.detailY,R=0;R<=this.detailX;R++){var P=R/this.detailX,D=new a.default.Vector(P,I,0);this.vertices.push(D),this.uvs.push(P,I)}0<v&&0<x&&(this.strokeIndices=[[0,v],[v,(v+1)*(x+1)-1],[(v+1)*(x+1)-1,(v+1)*x],[(v+1)*x,0]])});M.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(w,M)}var A=this.uMVMatrix.copy();try{this.uMVMatrix.translate([h,f,0]),this.uMVMatrix.scale(m,g,1),this.drawBuffers(w)}finally{this.uMVMatrix=A}return this},a.default.RendererGL.prototype.quad=function(o,l,h,f,m,g,v,x,w,M,A,E,I,R){I===void 0&&(I=2),R===void 0&&(R=2);var P="quad|".concat(o,"|").concat(l,"|").concat(h,"|").concat(f,"|").concat(m,"|").concat(g,"|").concat(v,"|").concat(x,"|").concat(w,"|").concat(M,"|").concat(A,"|").concat(E,"|").concat(I,"|").concat(R);if(!this.geometryInHash(P)){var D=new a.default.Geometry(I,R,function(){for(var $=1/(this.detailX-1),K=1/(this.detailY-1),_e=0;_e<this.detailY;_e++)for(var me=0;me<this.detailX;me++){var ye=me*$,fe=_e*K,de=(1-ye)*((1-fe)*o+fe*M)+ye*((1-fe)*f+fe*v),Ee=(1-ye)*((1-fe)*l+fe*A)+ye*((1-fe)*m+fe*x),C=(1-ye)*((1-fe)*h+fe*E)+ye*((1-fe)*g+fe*w);this.vertices.push(new a.default.Vector(de,Ee,C)),this.uvs.push([ye,fe])}});D.faces=[];for(var O=0;O<R-1;O++)for(var j=0;j<I-1;j++){var N=j+O*I,q=j+1+O*I,X=j+1+(O+1)*I,V=j+(O+1)*I;D.faces.push([N,q,X]),D.faces.push([N,X,V])}D.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(P,D)}return this.drawBuffers(P),this},a.default.RendererGL.prototype.bezier=function(o,l,h,f,m,g,v,x,w,M,A,E){arguments.length===8&&(A=x,M=v,x=g,v=m,m=f,f=h,h=g=w=E=0);var I=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=I;R++){var P=Math.pow(1-R/I,3),D=R/I*3*Math.pow(1-R/I,2),O=3*Math.pow(R/I,2)*(1-R/I),j=Math.pow(R/I,3);this.vertex(o*P+f*D+v*O+M*j,l*P+m*D+x*O+A*j,h*P+g*D+w*O+E*j)}return this.endShape(),this},a.default.RendererGL.prototype.curve=function(o,l,h,f,m,g,v,x,w,M,A,E){arguments.length===8&&(M=v,A=x,v=m,x=f,m=f=h,h=g=w=E=0);var I=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=I;R++){var P=.5*Math.pow(R/I,3),D=.5*Math.pow(R/I,2),O=R/I*.5,j=P*(3*f-o-3*v+M)+D*(2*o-5*f+4*v-M)+O*(-o+v)+2*f*.5,N=P*(3*m-l-3*x+A)+D*(2*l-5*m+4*x-A)+O*(-l+x)+2*m*.5,q=P*(3*g-h-3*w+E)+D*(2*h-5*g+4*w-E)+O*(-h+w)+2*g*.5;this.vertex(j,N,q)}return this.endShape(),this},a.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},a.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var o,l,h,f,m,g=[],v=[],x=[],w=arguments.length;if((o=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,A=0,E=1,I=0;A<1;){if(o=parseFloat(A.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(o),E.toFixed(6)===M.toFixed(6)){o=parseFloat(E.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(o);break}A+=M,E-=M,++I}}var R=this._lookUpTableBezier.length;if(w===6){for(this.isBezier=!0,g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],h=v[0]*this._lookUpTableBezier[m][0]+v[1]*this._lookUpTableBezier[m][1]+v[2]*this._lookUpTableBezier[m][2]+v[3]*this._lookUpTableBezier[m][3],this.vertex(l,h);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(w===9){for(this.isBezier=!0,g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],x=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],h=v[0]*this._lookUpTableBezier[m][0]+v[1]*this._lookUpTableBezier[m][1]+v[2]*this._lookUpTableBezier[m][2]+v[3]*this._lookUpTableBezier[m][3],f=x[0]*this._lookUpTableBezier[m][0]+x[1]*this._lookUpTableBezier[m][1]+x[2]*this._lookUpTableBezier[m][2]+x[3]*this._lookUpTableBezier[m][3],this.vertex(l,h,f);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},a.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var o,l,h,f,m,g=[],v=[],x=[],w=arguments.length;if((o=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var M=1/this._lutQuadraticDetail,A=0,E=1,I=0;A<1;){if(o=parseFloat(A.toFixed(6)),this._lookUpTableQuadratic[I]=this._quadraticCoefficients(o),E.toFixed(6)===M.toFixed(6)){o=parseFloat(E.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableQuadratic[I]=this._quadraticCoefficients(o);break}A+=M,E-=M,++I}}var R=this._lookUpTableQuadratic.length;if(w===4){for(this.isQuadratic=!0,g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],m=0;m<R;m++)l=g[0]*this._lookUpTableQuadratic[m][0]+g[1]*this._lookUpTableQuadratic[m][1]+g[2]*this._lookUpTableQuadratic[m][2],h=v[0]*this._lookUpTableQuadratic[m][0]+v[1]*this._lookUpTableQuadratic[m][1]+v[2]*this._lookUpTableQuadratic[m][2],this.vertex(l,h);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(w===6){for(this.isQuadratic=!0,g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],m=0;m<R;m++)l=g[0]*this._lookUpTableQuadratic[m][0]+g[1]*this._lookUpTableQuadratic[m][1]+g[2]*this._lookUpTableQuadratic[m][2],h=v[0]*this._lookUpTableQuadratic[m][0]+v[1]*this._lookUpTableQuadratic[m][1]+v[2]*this._lookUpTableQuadratic[m][2],f=x[0]*this._lookUpTableQuadratic[m][0]+x[1]*this._lookUpTableQuadratic[m][1]+x[2]*this._lookUpTableQuadratic[m][2],this.vertex(l,h,f);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},a.default.RendererGL.prototype.curveVertex=function(){var o,l,h,f,m,g=[],v=[],x=[],w=arguments.length;if((o=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,A=0,E=1,I=0;A<1;){if(o=parseFloat(A.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(o),E.toFixed(6)===M.toFixed(6)){o=parseFloat(E.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(o);break}A+=M,E-=M,++I}}var R=this._lookUpTableBezier.length;if(w===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],h=v[0]*this._lookUpTableBezier[m][0]+v[1]*this._lookUpTableBezier[m][1]+v[2]*this._lookUpTableBezier[m][2]+v[3]*this._lookUpTableBezier[m][3],this.vertex(l,h);for(m=0;m<w;m++)this.immediateMode._curveVertex.shift()}}else if(w===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],h=v[0]*this._lookUpTableBezier[m][0]+v[1]*this._lookUpTableBezier[m][1]+v[2]*this._lookUpTableBezier[m][2]+v[3]*this._lookUpTableBezier[m][3],f=x[0]*this._lookUpTableBezier[m][0]+x[1]*this._lookUpTableBezier[m][1]+x[2]*this._lookUpTableBezier[m][2]+x[3]*this._lookUpTableBezier[m][3],this.vertex(l,h,f);for(m=0;m<w;m++)this.immediateMode._curveVertex.shift()}},a.default.RendererGL.prototype.image=function(o,l,h,f,m,g,v,x,w){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(o),this._pInst.textureMode(c.NORMAL);var M=0;l<=o.width&&(M=l/o.width);var A=1;l+f<=o.width&&(A=(l+f)/o.width);var E=0;h<=o.height&&(E=h/o.height);var I=1;h+m<=o.height&&(I=(h+m)/o.height),this.beginShape(),this.vertex(g,v,0,M,E),this.vertex(g+x,v,0,A,E),this.vertex(g+x,v+w,0,A,I),this.vertex(g,v+w,0,M,I),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var u=a.default;i.default=u},{"../core/constants":250,"../core/main":260,"./p5.Geometry":309,"core-js/modules/es.array.concat":148,"core-js/modules/es.number.to-fixed":169}],304:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}a.default.prototype.orbitControl=function(u,o,l){if(this._assert3d("orbitControl"),a.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var h=this._renderer._curCamera;u===void 0&&(u=1),o===void 0&&(o=u),l===void 0&&(l=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var f=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,l*f):this._renderer._curCamera._orbit(0,0,-l*f)),this.mouseIsPressed){if(this.mouseButton===this.LEFT){var m=-u*(this.mouseX-this.pmouseX)/f,g=o*(this.mouseY-this.pmouseY)/f;this._renderer._curCamera._orbit(m,g,0)}else if(this.mouseButton===this.RIGHT){var v=h._getLocalAxes(),x=Math.sqrt(v.x[0]*v.x[0]+v.x[2]*v.x[2]);x!==0&&(v.x[0]/=x,v.x[2]/=x);var w=Math.sqrt(v.y[0]*v.y[0]+v.y[2]*v.y[2]);w!==0&&(v.y[0]/=w,v.y[2]/=w);var M=-1*u*(this.mouseX-this.pmouseX),A=-1*o*(this.mouseY-this.pmouseY);h.setPosition(h.eyeX+M*v.x[0]+A*v.z[0],h.eyeY,h.eyeZ+M*v.x[2]+A*v.z[2])}}return this}},a.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var u=arguments.length,o=new Array(u),l=0;l<u;l++)o[l]=arguments[l];a.default._validateParameters("debugMode",o);for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1);o[0]===c.GRID?this.registerMethod("post",this._grid.call(this,o[1],o[2],o[3],o[4],o[5])):o[0]===c.AXES?this.registerMethod("post",this._axesIcon.call(this,o[1],o[2],o[3],o[4])):(this.registerMethod("post",this._grid.call(this,o[0],o[1],o[2],o[3],o[4])),this.registerMethod("post",this._axesIcon.call(this,o[5],o[6],o[7],o[8])))},a.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1)},a.default.prototype._grid=function(u,o,l,h,f){u===void 0&&(u=this.width/2),o===void 0&&(o=Math.round(u/30)<4?4:Math.round(u/30)),l===void 0&&(l=0),h===void 0&&(h=0),f===void 0&&(f=0);var m=u/o,g=u/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var v=0;v<=o;v++)this.beginShape(this.LINES),this.vertex(-g+l,h,v*m-g+f),this.vertex(+g+l,h,v*m-g+f),this.endShape();for(var x=0;x<=o;x++)this.beginShape(this.LINES),this.vertex(x*m-g+l,h,-g+f),this.vertex(x*m-g+l,h,+g+f),this.endShape();this.pop()}},a.default.prototype._axesIcon=function(u,o,l,h){return u===void 0&&(u=40<this.width/20?this.width/20:40),o===void 0&&(o=-this.width/4),l===void 0&&(l=o),h===void 0&&(h=o),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(o,l,h),this.vertex(o+u,l,h),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(o,l,h),this.vertex(o,l+u,h),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(o,l,h),this.vertex(o,l,h+u),this.endShape(),this.pop()}};var p=a.default;i.default=p},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179}],305:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}a.default.prototype.ambientLight=function(u,o,l,h){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var f=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(f._array[0],f._array[1],f._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(u,o,l){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var h=this.color.apply(this,arguments);return this._renderer.specularColors=[h._array[0],h._array[1],h._array[2]],this},a.default.prototype.directionalLight=function(u,o,l,h,f,m){var g,v,x,w;this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),g=u instanceof a.default.Color?u:this.color(u,o,l);var M=arguments[arguments.length-1];w=typeof M=="number"?(v=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(v=M.x,x=M.y,M.z);var A=Math.sqrt(v*v+x*x+w*w);return this._renderer.directionalLightDirections.push(v/A,x/A,w/A),this._renderer.directionalLightDiffuseColors.push(g._array[0],g._array[1],g._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(u,o,l,h,f,m){var g,v,x,w;this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),g=u instanceof a.default.Color?u:this.color(u,o,l);var M=arguments[arguments.length-1];return w=typeof M=="number"?(v=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(v=M.x,x=M.y,M.z),this._renderer.pointLightPositions.push(v,x,w),this._renderer.pointLightDiffuseColors.push(g._array[0],g._array[1],g._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===c.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var u=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,u),this.directionalLight(0,0,u,0,0,-1)}return this},a.default.prototype.lightFalloff=function(u,o,l){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),u<0&&(u=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),o<0&&(o=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),u===0&&o===0&&l===0&&(u=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=u,this._renderer.linearAttenuation=o,this._renderer.quadraticAttenuation=l,this},a.default.prototype.spotLight=function(u,o,l,h,f,m,g,v,x,w,M){var A,E,I;this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var R=arguments.length;switch(R){case 11:case 10:A=this.color(u,o,l),E=new a.default.Vector(h,f,m),I=new a.default.Vector(g,v,x);break;case 9:u instanceof a.default.Color?(A=u,E=new a.default.Vector(o,l,h),I=new a.default.Vector(f,m,g),w=v,M=x):h instanceof a.default.Vector?(A=this.color(u,o,l),E=h,I=new a.default.Vector(f,m,g),w=v,M=x):g instanceof a.default.Vector?(A=this.color(u,o,l),E=new a.default.Vector(h,f,m),I=g,w=v,M=x):(A=this.color(u,o,l),E=new a.default.Vector(h,f,m),I=new a.default.Vector(g,v,x));break;case 8:w=(I=u instanceof a.default.Color?(A=u,E=new a.default.Vector(o,l,h),new a.default.Vector(f,m,g)):h instanceof a.default.Vector?(A=this.color(u,o,l),E=h,new a.default.Vector(f,m,g)):(A=this.color(u,o,l),E=new a.default.Vector(h,f,m),g),v);break;case 7:u instanceof a.default.Color&&o instanceof a.default.Vector?(A=u,E=o,I=new a.default.Vector(l,h,f),w=m,M=g):u instanceof a.default.Color&&f instanceof a.default.Vector?(A=u,E=new a.default.Vector(o,l,h),I=f,w=m,M=g):h instanceof a.default.Vector&&f instanceof a.default.Vector?(A=this.color(u,o,l),E=h,I=f,w=m,M=g):I=u instanceof a.default.Color?(A=u,E=new a.default.Vector(o,l,h),new a.default.Vector(f,m,g)):h instanceof a.default.Vector?(A=this.color(u,o,l),E=h,new a.default.Vector(f,m,g)):(A=this.color(u,o,l),E=new a.default.Vector(h,f,m),g);break;case 6:h instanceof a.default.Vector&&f instanceof a.default.Vector?(A=this.color(u,o,l),E=h,I=f,w=m):u instanceof a.default.Color&&f instanceof a.default.Vector?(A=u,E=new a.default.Vector(o,l,h),I=f,w=m):u instanceof a.default.Color&&o instanceof a.default.Vector&&(A=u,E=o,I=new a.default.Vector(l,h,f),w=m);break;case 5:u instanceof a.default.Color&&o instanceof a.default.Vector&&l instanceof a.default.Vector?(A=u,E=o,I=l,w=h,M=f):h instanceof a.default.Vector&&f instanceof a.default.Vector?(A=this.color(u,o,l),E=h,I=f):u instanceof a.default.Color&&f instanceof a.default.Vector?(A=u,E=new a.default.Vector(o,l,h),I=f):u instanceof a.default.Color&&o instanceof a.default.Vector&&(A=u,E=o,I=new a.default.Vector(l,h,f));break;case 4:A=u,E=o,I=l,w=h;break;case 3:A=u,E=o,I=l;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(R<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(A._array[0],A._array[1],A._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(E.x,E.y,E.z),I.normalize(),this._renderer.spotLightDirections.push(I.x,I.y,I.z),w===void 0&&(w=Math.PI/3),M!==void 0&&M<1?(M=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):M===void 0&&(M=100),w=this._renderer._pInst._toRadians(w),this._renderer.spotLightAngle.push(Math.cos(w)),this._renderer.spotLightConc.push(M),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){return this._assert3d("noLights"),a.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var p=a.default;i.default=p},{"../core/constants":250,"../core/main":260}],306:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function a(d,p,u){for(var o=0,l=d.length;o<l;o++)if(d[o]!==p.getUint8(u+o,!1))return!1;return!0}e("./p5.Geometry"),r.default.prototype.loadModel=function(d){var p,u,o;r.default._validateParameters("loadModel",arguments);var l=d.slice(-4);typeof arguments[1]=="boolean"?(p=arguments[1],u=arguments[2],o=arguments[3],arguments[4]!==void 0&&(l=arguments[4])):(p=!1,u=arguments[1],o=arguments[2],arguments[3]!==void 0&&(l=arguments[3]));var h=new r.default.Geometry;h.gid="".concat(d,"|").concat(p);var f=this;return l.match(/\.stl$/i)?this.httpDo(d,"GET","arrayBuffer",function(m){(function(g,v){if(function(M){for(var A=new DataView(M),E=[115,111,108,105,100],I=0;I<5;I++)if(a(E,A,I))return!1;return!0}(v))(function(M,A){for(var E,I,R,P,D,O,j,N=new DataView(A),q=N.getUint32(80,!0),X=!1,V=0;V<70;V++)N.getUint32(V,!1)===1129270351&&N.getUint8(V+4)===82&&N.getUint8(V+5)===61&&(X=!0,P=[],D=N.getUint8(V+6)/255,O=N.getUint8(V+7)/255,j=N.getUint8(V+8)/255);for(var $=0;$<q;$++){var K=84+50*$,_e=N.getFloat32(K,!0),me=N.getFloat32(4+K,!0),ye=N.getFloat32(8+K,!0);if(X){var fe=N.getUint16(48+K,!0);R=(32768&fe)==0?(E=(31&fe)/31,I=(fe>>5&31)/31,(fe>>10&31)/31):(E=D,I=O,j)}for(var de=new r.default.Vector(_e,me,ye),Ee=1;Ee<=3;Ee++){var C=K+12*Ee,F=new r.default.Vector(N.getFloat32(C,!0),N.getFloat32(4+C,!0),N.getFloat32(8+C,!0));M.vertices.push(F),M.vertexNormals.push(de),X&&P.push(E,I,R)}M.faces.push([3*$,3*$+1,3*$+2]),M.uvs.push([0,0],[0,0],[0,0])}})(g,v);else{var x=new DataView(v);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");var w=new TextDecoder("utf-8").decode(x).split(`
`);(function(M,A){for(var E,I,R="",P=[],D=0;D<A.length;++D){for(var O=A[D].trim(),j=O.split(" "),N=0;N<j.length;++N)j[N]===""&&j.splice(N,1);if(j.length!==0)switch(R){case"":if(j[0]!=="solid")return console.error(O),console.error('Invalid state "'.concat(j[0],'", should be "solid"'));R="solid";break;case"solid":if(j[0]!=="facet"||j[1]!=="normal")return console.error(O),console.error('Invalid state "'.concat(j[0],'", should be "facet normal"'));E=new r.default.Vector(parseFloat(j[2]),parseFloat(j[3]),parseFloat(j[4])),M.vertexNormals.push(E,E,E),R="facet normal";break;case"facet normal":if(j[0]!=="outer"||j[1]!=="loop")return console.error(O),console.error('Invalid state "'.concat(j[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(j[0]==="vertex")I=new r.default.Vector(parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3])),M.vertices.push(I),M.uvs.push([0,0]),P.push(M.vertices.indexOf(I));else{if(j[0]!=="endloop")return console.error(O),console.error('Invalid state "'.concat(j[0],'", should be "vertex" or "endloop"'));M.faces.push(P),P=[],R="endloop"}break;case"endloop":if(j[0]!=="endfacet")return console.error(O),console.error('Invalid state "'.concat(j[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(j[0]!=="endsolid"){if(j[0]!=="facet"||j[1]!=="normal")return console.error(O),console.error('Invalid state "'.concat(j[0],'", should be "endsolid" or "facet normal"'));E=new r.default.Vector(parseFloat(j[2]),parseFloat(j[3]),parseFloat(j[4])),M.vertexNormals.push(E,E,E),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}})(g,w)}})(h,m),p&&h.normalize(),f._decrementPreload(),typeof u=="function"&&u(h)},o):l.match(/\.obj$/i)?this.loadStrings(d,function(m){(function(g,v){for(var x={v:[],vt:[],vn:[]},w={},M=0;M<v.length;++M){var A=v[M].trim().split(/\b\s+/);if(0<A.length){if(A[0]==="v"||A[0]==="vn"){var E=new r.default.Vector(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]));x[A[0]].push(E)}else if(A[0]==="vt"){var I=[parseFloat(A[1]),1-parseFloat(A[2])];x[A[0]].push(I)}else if(A[0]==="f")for(var R=3;R<A.length;++R){for(var P=[],D=[1,R-1,R],O=0;O<D.length;++O){var j=A[D[O]],N=0;if(w[j]!==void 0)N=w[j];else{for(var q=j.split("/"),X=0;X<q.length;X++)q[X]=parseInt(q[X])-1;N=w[j]=g.vertices.length,g.vertices.push(x.v[q[0]].copy()),x.vt[q[1]]?g.uvs.push(x.vt[q[1]].slice()):g.uvs.push([0,0]),x.vn[q[2]]&&g.vertexNormals.push(x.vn[q[2]].copy())}P.push(N)}P[0]!==P[1]&&P[0]!==P[2]&&P[1]!==P[2]&&g.faces.push(P)}}}g.vertexNormals.length===0&&g.computeNormals()})(h,m),p&&h.normalize(),f._decrementPreload(),typeof u=="function"&&u(h)},o):(r.default._friendlyFileLoadError(3,d),o?o():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),h},r.default.prototype.model=function(d){this._assert3d("model"),r.default._validateParameters("model",arguments),0<d.vertices.length&&(this._renderer.geometryInHash(d.gid)||(d._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(d.gid,d)),this._renderer.drawBuffers(d.gid))};var c=r.default;i.default=c},{"../core/main":260,"./p5.Geometry":309,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.match":184,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190}],307:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.array.join"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}e("./p5.Texture"),a.default.prototype.loadShader=function(u,o,l,h){a.default._validateParameters("loadShader",arguments),h=h||console.error;function f(){g._decrementPreload(),l&&l(m)}var m=new a.default.Shader,g=this,v=!1,x=!1;return this.loadStrings(u,function(w){m._vertSrc=w.join(`
`),x=!0,v&&f()},h),this.loadStrings(o,function(w){m._fragSrc=w.join(`
`),v=!0,x&&f()},h),m},a.default.prototype.createShader=function(u,o){return this._assert3d("createShader"),a.default._validateParameters("createShader",arguments),new a.default.Shader(this._renderer,u,o)},a.default.prototype.shader=function(u){return this._assert3d("shader"),a.default._validateParameters("shader",arguments),u._renderer===void 0&&(u._renderer=this._renderer),u.init(),u.isStrokeShader()?this._renderer.userStrokeShader=u:(this._renderer.userFillShader=u,this._renderer._useNormalMaterial=!1),this},a.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},a.default.prototype.texture=function(u){return this._assert3d("texture"),a.default._validateParameters("texture",arguments),u.gifProperties&&u._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=u,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.textureMode=function(u){u!==c.IMAGE&&u!==c.NORMAL?console.warn("You tried to set ".concat(u," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=u},a.default.prototype.textureWrap=function(u){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u;this._renderer.textureWrapX=u,this._renderer.textureWrapY=o;for(var l=this._renderer.textures,h=0;h<l.length;h++)l[h].setWrapMode(u,o)},a.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var u=arguments.length,o=new Array(u),l=0;l<u;l++)o[l]=arguments[l];return a.default._validateParameters("normalMaterial",o),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},a.default.prototype.ambientMaterial=function(u,o,l){this._assert3d("ambientMaterial"),a.default._validateParameters("ambientMaterial",arguments);var h=a.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=h._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},a.default.prototype.emissiveMaterial=function(u,o,l,h){this._assert3d("emissiveMaterial"),a.default._validateParameters("emissiveMaterial",arguments);var f=a.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=f._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},a.default.prototype.specularMaterial=function(u,o,l,h){this._assert3d("specularMaterial"),a.default._validateParameters("specularMaterial",arguments);var f=a.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=f._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},a.default.prototype.shininess=function(u){return this._assert3d("shininess"),a.default._validateParameters("shininess",arguments),u<1&&(u=1),this._renderer._useShininess=u,this},a.default.RendererGL.prototype._applyColorBlend=function(u){var o=this.GL,l=this.drawMode===c.TEXTURE||u[u.length-1]<1||this._isErasing;return l!==this._isBlending&&(l||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?o.enable(o.BLEND):o.disable(o.BLEND),o.depthMask(!0),this._isBlending=l),this._applyBlendMode(),u},a.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var u=this.GL;switch(this.curBlendMode){case c.BLEND:case c.ADD:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA);break;case c.REMOVE:u.blendEquation(u.FUNC_REVERSE_SUBTRACT),u.blendFunc(u.SRC_ALPHA,u.DST_ALPHA);break;case c.MULTIPLY:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ONE,u.ONE);break;case c.SCREEN:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE,u.ONE,u.ONE);break;case c.EXCLUSION:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE);break;case c.REPLACE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO);break;case c.SUBTRACT:u.blendEquationSeparate(u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD),u.blendFuncSeparate(u.SRC_ALPHA,u.ONE,u.ONE,u.ONE);break;case c.DARKEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MIN_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MAX_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=a.default;i.default=p},{"../core/constants":250,"../core/main":260,"./p5.Texture":316,"core-js/modules/es.array.join":157}],308:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.camera=function(){var c;this._assert3d("camera");for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return r.default._validateParameters("camera",p),(c=this._renderer._curCamera).camera.apply(c,p),this},r.default.prototype.perspective=function(){var c;this._assert3d("perspective");for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return r.default._validateParameters("perspective",p),(c=this._renderer._curCamera).perspective.apply(c,p),this},r.default.prototype.ortho=function(){var c;this._assert3d("ortho");for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return r.default._validateParameters("ortho",p),(c=this._renderer._curCamera).ortho.apply(c,p),this},r.default.prototype.frustum=function(){var c;this._assert3d("frustum");for(var d=arguments.length,p=new Array(d),u=0;u<d;u++)p[u]=arguments[u];return r.default._validateParameters("frustum",p),(c=this._renderer._curCamera).frustum.apply(c,p),this},r.default.prototype.createCamera=function(){this._assert3d("createCamera");var c=new r.default.Camera(this._renderer);return c._computeCameraDefaultSettings(),c._setDefaultCamera(),this._renderer._curCamera=c},r.default.Camera=function(c){this._renderer=c,this.cameraType="default",this.cameraMatrix=new r.default.Matrix,this.projMatrix=new r.default.Matrix},r.default.Camera.prototype.perspective=function(c,d,p,u){this.cameraType=0<arguments.length?"custom":"default",c===void 0?(c=this.defaultCameraFOV,this.cameraFOV=c):this.cameraFOV=this._renderer._pInst._toRadians(c),d===void 0&&(d=this.defaultAspectRatio),p===void 0&&(p=this.defaultCameraNear),u===void 0&&(u=this.defaultCameraFar),p<=1e-4&&(p=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),u<p&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=d,this.cameraNear=p,this.cameraFar=u,this.projMatrix=r.default.Matrix.identity();var o=1/Math.tan(this.cameraFOV/2),l=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(o/d,0,0,0,0,-o,0,0,0,0,(u+p)*l,-1,0,0,2*u*p*l,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},r.default.Camera.prototype.ortho=function(c,d,p,u,o,l){c===void 0&&(c=-this._renderer.width/2),d===void 0&&(d=this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),u===void 0&&(u=this._renderer.height/2),o===void 0&&(o=0),l===void 0&&(l=Math.max(this._renderer.width,this._renderer.height));var h=d-c,f=u-p,m=l-o,g=2/h,v=2/f,x=-2/m,w=-(d+c)/h,M=-(u+p)/f,A=-(l+o)/m;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,-v,0,0,0,0,x,0,w,M,A,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype.frustum=function(c,d,p,u,o,l){c===void 0&&(c=-this._renderer.width/2),d===void 0&&(d=this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),u===void 0&&(u=this._renderer.height/2),o===void 0&&(o=0),l===void 0&&(l=Math.max(this._renderer.width,this._renderer.height));var h=d-c,f=u-p,m=l-o,g=2*o/h,v=2*o/f,x=-2*l*o/m,w=(d+c)/h,M=(u+p)/f,A=-(l+o)/m;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,v,0,0,w,M,A,-1,0,0,x,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype._rotateView=function(c,d,p,u){var o=this.centerX,l=this.centerY,h=this.centerZ;o-=this.eyeX,l-=this.eyeY,h-=this.eyeZ;var f=r.default.Matrix.identity(this._renderer._pInst);f.rotate(this._renderer._pInst._toRadians(c),d,p,u);var m=[o*f.mat4[0]+l*f.mat4[4]+h*f.mat4[8],o*f.mat4[1]+l*f.mat4[5]+h*f.mat4[9],o*f.mat4[2]+l*f.mat4[6]+h*f.mat4[10]];m[0]+=this.eyeX,m[1]+=this.eyeY,m[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,m[0],m[1],m[2],this.upX,this.upY,this.upZ)},r.default.Camera.prototype.pan=function(c){var d=this._getLocalAxes();this._rotateView(c,d.y[0],d.y[1],d.y[2])},r.default.Camera.prototype.tilt=function(c){var d=this._getLocalAxes();this._rotateView(c,d.x[0],d.x[1],d.x[2])},r.default.Camera.prototype.lookAt=function(c,d,p){this.camera(this.eyeX,this.eyeY,this.eyeZ,c,d,p,this.upX,this.upY,this.upZ)},r.default.Camera.prototype.camera=function(c,d,p,u,o,l,h,f,m){c===void 0&&(c=this.defaultEyeX,d=this.defaultEyeY,p=this.defaultEyeZ,u=c,o=d,f=1,m=h=l=0),this.eyeX=c,this.eyeY=d,this.eyeZ=p,u!==void 0&&(this.centerX=u,this.centerY=o,this.centerZ=l),h!==void 0&&(this.upX=h,this.upY=f,this.upZ=m);var g=this._getLocalAxes();this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1);var v=-c,x=-d,w=-p;return this.cameraMatrix.translate([v,x,w]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},r.default.Camera.prototype.move=function(c,d,p){var u=this._getLocalAxes(),o=[u.x[0]*c,u.x[1]*c,u.x[2]*c],l=[u.y[0]*d,u.y[1]*d,u.y[2]*d],h=[u.z[0]*p,u.z[1]*p,u.z[2]*p];this.camera(this.eyeX+o[0]+l[0]+h[0],this.eyeY+o[1]+l[1]+h[1],this.eyeZ+o[2]+l[2]+h[2],this.centerX+o[0]+l[0]+h[0],this.centerY+o[1]+l[1]+h[1],this.centerZ+o[2]+l[2]+h[2],0,1,0)},r.default.Camera.prototype.setPosition=function(c,d,p){var u=c-this.eyeX,o=d-this.eyeY,l=p-this.eyeZ;this.camera(c,d,p,this.centerX+u,this.centerY+o,this.centerZ+l,0,1,0)},r.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},r.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},r.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},r.default.Camera.prototype.copy=function(){var c=new r.default.Camera(this._renderer);return c.cameraFOV=this.cameraFOV,c.aspectRatio=this.aspectRatio,c.eyeX=this.eyeX,c.eyeY=this.eyeY,c.eyeZ=this.eyeZ,c.centerX=this.centerX,c.centerY=this.centerY,c.centerZ=this.centerZ,c.cameraNear=this.cameraNear,c.cameraFar=this.cameraFar,c.cameraType=this.cameraType,c.cameraMatrix=this.cameraMatrix.copy(),c.projMatrix=this.projMatrix.copy(),c},r.default.Camera.prototype._getLocalAxes=function(){var c=this.eyeX-this.centerX,d=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,u=Math.sqrt(c*c+d*d+p*p);u!==0&&(c/=u,d/=u,p/=u);var o=this.upX,l=this.upY,h=this.upZ,f=l*p-h*d,m=-o*p+h*c,g=o*d-l*c;o=d*g-p*m,l=-c*g+p*f,h=c*m-d*f;var v=Math.sqrt(f*f+m*m+g*g);v!==0&&(f/=v,m/=v,g/=v);var x=Math.sqrt(o*o+l*l+h*h);return x!==0&&(o/=x,l/=x,h/=x),{x:[f,m,g],y:[o,l,h],z:[c,d,p]}},r.default.Camera.prototype._orbit=function(c,d,p){var u=this.eyeX-this.centerX,o=this.eyeY-this.centerY,l=this.eyeZ-this.centerZ,h=Math.sqrt(u*u+o*o+l*l),f=Math.atan2(u,l),m=Math.acos(Math.max(-1,Math.min(1,o/h)));f+=c,(h+=p)<0&&(h=.1),(m+=d)>Math.PI?m=Math.PI:m<=0&&(m=.001);var g=Math.sin(m)*h*Math.sin(f),v=Math.cos(m)*h,x=Math.sin(m)*h*Math.cos(f);this.camera(g+this.centerX,v+this.centerY,x+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},r.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},r.default.prototype.setCamera=function(c){this._renderer._curCamera=c,this._renderer.uPMatrix.set(c.projMatrix.mat4[0],c.projMatrix.mat4[1],c.projMatrix.mat4[2],c.projMatrix.mat4[3],c.projMatrix.mat4[4],c.projMatrix.mat4[5],c.projMatrix.mat4[6],c.projMatrix.mat4[7],c.projMatrix.mat4[8],c.projMatrix.mat4[9],c.projMatrix.mat4[10],c.projMatrix.mat4[11],c.projMatrix.mat4[12],c.projMatrix.mat4[13],c.projMatrix.mat4[14],c.projMatrix.mat4[15])};var a=r.default.Camera;i.default=a},{"../core/main":260}],309:[function(e,n,i){e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.Geometry=function(c,d,p){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=c!==void 0?c:1,this.detailY=d!==void 0?d:1,this.dirtyFlags={},p instanceof Function&&p.call(this),this},r.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},r.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var c,d,p,u,o=this.detailX+1,l=0;l<this.detailY;l++)for(var h=0;h<this.detailX;h++)d=(c=l*o+h)+1,p=(l+1)*o+h+1,u=(l+1)*o+h,this.faces.push([c,d,u]),this.faces.push([u,d,p]);return this},r.default.Geometry.prototype._getFaceNormal=function(c){var d=this.faces[c],p=this.vertices[d[0]],u=this.vertices[d[1]],o=this.vertices[d[2]],l=r.default.Vector.sub(u,p),h=r.default.Vector.sub(o,p),f=r.default.Vector.cross(l,h),m=r.default.Vector.mag(f),g=m/(r.default.Vector.mag(l)*r.default.Vector.mag(h));return g===0||isNaN(g)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),f):(1<g&&(g=1),f.mult(Math.asin(g)/m))},r.default.Geometry.prototype.computeNormals=function(){var c,d=this.vertexNormals,p=this.vertices,u=this.faces;for(c=d.length=0;c<p.length;++c)d.push(new r.default.Vector);for(var o=0;o<u.length;++o)for(var l=u[o],h=this._getFaceNormal(o),f=0;f<3;++f)d[l[f]].add(h);for(c=0;c<p.length;++c)d[c].normalize();return this},r.default.Geometry.prototype.averageNormals=function(){for(var c=0;c<=this.detailY;c++){var d=this.detailX+1,p=r.default.Vector.add(this.vertexNormals[c*d],this.vertexNormals[c*d+this.detailX]);p=r.default.Vector.div(p,2),this.vertexNormals[c*d]=p,this.vertexNormals[c*d+this.detailX]=p}return this},r.default.Geometry.prototype.averagePoleNormals=function(){for(var c=new r.default.Vector(0,0,0),d=0;d<this.detailX;d++)c.add(this.vertexNormals[d]);c=r.default.Vector.div(c,this.detailX);for(var p=0;p<this.detailX;p++)this.vertexNormals[p]=c;c=new r.default.Vector(0,0,0);for(var u=this.vertices.length-1;u>this.vertices.length-1-this.detailX;u--)c.add(this.vertexNormals[u]);c=r.default.Vector.div(c,this.detailX);for(var o=this.vertices.length-1;o>this.vertices.length-1-this.detailX;o--)this.vertexNormals[o]=c;return this},r.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var c=0,d=this.strokeIndices.length;c<d;c++)this.edges.push(this.strokeIndices[c]);else for(var p=0;p<this.faces.length;p++)this.edges.push([this.faces[p][0],this.faces[p][1]]),this.edges.push([this.faces[p][1],this.faces[p][2]]),this.edges.push([this.faces[p][2],this.faces[p][0]]);return this},r.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var c=this.lineNormals.length=0;c<this.edges.length;c++){var d=this.vertices[this.edges[c][0]],p=this.vertices[this.edges[c][1]],u=p.copy().sub(d).normalize(),o=d.array(),l=d.array(),h=p.array(),f=p.array(),m=u.array(),g=u.array();m.push(1),g.push(-1),this.lineNormals.push(m,g,m,m,g,g),this.lineVertices.push(o,l,h,h,l,f)}return this},r.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var c=this.vertices[0].copy(),d=this.vertices[0].copy(),p=0;p<this.vertices.length;p++)c.x=Math.max(c.x,this.vertices[p].x),d.x=Math.min(d.x,this.vertices[p].x),c.y=Math.max(c.y,this.vertices[p].y),d.y=Math.min(d.y,this.vertices[p].y),c.z=Math.max(c.z,this.vertices[p].z),d.z=Math.min(d.z,this.vertices[p].z);for(var u=r.default.Vector.lerp(c,d,.5),o=r.default.Vector.sub(c,d),l=200/Math.max(Math.max(o.x,o.y),o.z),h=0;h<this.vertices.length;h++)this.vertices[h].sub(u),this.vertices[h].mult(l)}return this};var a=r.default.Geometry;i.default=a},{"../core/main":260,"core-js/modules/es.string.sub":189}],310:[function(e,n,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},a=Array,c=function(p){return p instanceof Array};typeof Float32Array!="undefined"&&(a=Float32Array,c=function(p){return p instanceof Array||p instanceof Float32Array}),r.default.Matrix=function(){for(var p=new Array(arguments.length),u=0;u<p.length;++u)p[u]=arguments[u];return p.length&&p[p.length-1]instanceof r.default&&(this.p5=p[p.length-1]),p[0]==="mat3"?this.mat3=Array.isArray(p[1])?p[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(p[0])?p[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},r.default.Matrix.prototype.set=function(p){return p instanceof r.default.Matrix?this.mat4=p.mat4:c(p)?this.mat4=p:arguments.length===16&&(this.mat4[0]=p,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},r.default.Matrix.prototype.get=function(){return new r.default.Matrix(this.mat4,this.p5)},r.default.Matrix.prototype.copy=function(){var p=new r.default.Matrix(this.p5);return p.mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15],p},r.default.Matrix.identity=function(p){return new r.default.Matrix(p)},r.default.Matrix.prototype.transpose=function(p){var u,o,l,h,f,m;return p instanceof r.default.Matrix?(u=p.mat4[1],o=p.mat4[2],l=p.mat4[3],h=p.mat4[6],f=p.mat4[7],m=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=u,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=o,this.mat4[9]=h,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=l,this.mat4[13]=f,this.mat4[14]=m,this.mat4[15]=p.mat4[15]):c(p)&&(u=p[1],o=p[2],l=p[3],h=p[6],f=p[7],m=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=u,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=o,this.mat4[9]=h,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=l,this.mat4[13]=f,this.mat4[14]=m,this.mat4[15]=p[15]),this},r.default.Matrix.prototype.invert=function(p){var u,o,l,h,f,m,g,v,x,w,M,A,E,I,R,P;p instanceof r.default.Matrix?(u=p.mat4[0],o=p.mat4[1],l=p.mat4[2],h=p.mat4[3],f=p.mat4[4],m=p.mat4[5],g=p.mat4[6],v=p.mat4[7],x=p.mat4[8],w=p.mat4[9],M=p.mat4[10],A=p.mat4[11],E=p.mat4[12],I=p.mat4[13],R=p.mat4[14],P=p.mat4[15]):c(p)&&(u=p[0],o=p[1],l=p[2],h=p[3],f=p[4],m=p[5],g=p[6],v=p[7],x=p[8],w=p[9],M=p[10],A=p[11],E=p[12],I=p[13],R=p[14],P=p[15]);var D=u*m-o*f,O=u*g-l*f,j=u*v-h*f,N=o*g-l*m,q=o*v-h*m,X=l*v-h*g,V=x*I-w*E,$=x*R-M*E,K=x*P-A*E,_e=w*R-M*I,me=w*P-A*I,ye=M*P-A*R,fe=D*ye-O*me+j*_e+N*K-q*$+X*V;return fe?(fe=1/fe,this.mat4[0]=(m*ye-g*me+v*_e)*fe,this.mat4[1]=(l*me-o*ye-h*_e)*fe,this.mat4[2]=(I*X-R*q+P*N)*fe,this.mat4[3]=(M*q-w*X-A*N)*fe,this.mat4[4]=(g*K-f*ye-v*$)*fe,this.mat4[5]=(u*ye-l*K+h*$)*fe,this.mat4[6]=(R*j-E*X-P*O)*fe,this.mat4[7]=(x*X-M*j+A*O)*fe,this.mat4[8]=(f*me-m*K+v*V)*fe,this.mat4[9]=(o*K-u*me-h*V)*fe,this.mat4[10]=(E*q-I*j+P*D)*fe,this.mat4[11]=(w*j-x*q-A*D)*fe,this.mat4[12]=(m*$-f*_e-g*V)*fe,this.mat4[13]=(u*_e-o*$+l*V)*fe,this.mat4[14]=(I*O-E*N-R*D)*fe,this.mat4[15]=(x*N-w*O+M*D)*fe,this):null},r.default.Matrix.prototype.invert3x3=function(){var p=this.mat3[0],u=this.mat3[1],o=this.mat3[2],l=this.mat3[3],h=this.mat3[4],f=this.mat3[5],m=this.mat3[6],g=this.mat3[7],v=this.mat3[8],x=v*h-f*g,w=-v*l+f*m,M=g*l-h*m,A=p*x+u*w+o*M;return A?(A=1/A,this.mat3[0]=x*A,this.mat3[1]=(-v*u+o*g)*A,this.mat3[2]=(f*u-o*h)*A,this.mat3[3]=w*A,this.mat3[4]=(v*p-o*m)*A,this.mat3[5]=(-f*p+o*l)*A,this.mat3[6]=M*A,this.mat3[7]=(-g*p+u*m)*A,this.mat3[8]=(h*p-u*l)*A,this):null},r.default.Matrix.prototype.transpose3x3=function(p){var u=p[1],o=p[2],l=p[5];return this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=u,this.mat3[5]=p[7],this.mat3[6]=o,this.mat3[7]=l,this},r.default.Matrix.prototype.inverseTranspose=function(p){this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=p.mat4[0],this.mat3[1]=p.mat4[1],this.mat3[2]=p.mat4[2],this.mat3[3]=p.mat4[4],this.mat3[4]=p.mat4[5],this.mat3[5]=p.mat4[6],this.mat3[6]=p.mat4[8],this.mat3[7]=p.mat4[9],this.mat3[8]=p.mat4[10]);var u=this.invert3x3();if(u)u.transpose3x3(this.mat3);else for(var o=0;o<9;o++)this.mat3[o]=0;return this},r.default.Matrix.prototype.determinant=function(){var p=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],u=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],o=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],l=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],h=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],f=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],m=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],g=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],v=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],x=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],w=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return p*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-u*w+o*x+l*v-h*g+f*m},r.default.Matrix.prototype.mult=function(p){var u;if(p===this||p===this.mat4)u=this.copy().mat4;else if(p instanceof r.default.Matrix)u=p.mat4;else if(c(p))u=p;else{if(arguments.length!==16)return;u=arguments}var o=this.mat4[0],l=this.mat4[1],h=this.mat4[2],f=this.mat4[3];return this.mat4[0]=o*u[0]+l*u[4]+h*u[8]+f*u[12],this.mat4[1]=o*u[1]+l*u[5]+h*u[9]+f*u[13],this.mat4[2]=o*u[2]+l*u[6]+h*u[10]+f*u[14],this.mat4[3]=o*u[3]+l*u[7]+h*u[11]+f*u[15],o=this.mat4[4],l=this.mat4[5],h=this.mat4[6],f=this.mat4[7],this.mat4[4]=o*u[0]+l*u[4]+h*u[8]+f*u[12],this.mat4[5]=o*u[1]+l*u[5]+h*u[9]+f*u[13],this.mat4[6]=o*u[2]+l*u[6]+h*u[10]+f*u[14],this.mat4[7]=o*u[3]+l*u[7]+h*u[11]+f*u[15],o=this.mat4[8],l=this.mat4[9],h=this.mat4[10],f=this.mat4[11],this.mat4[8]=o*u[0]+l*u[4]+h*u[8]+f*u[12],this.mat4[9]=o*u[1]+l*u[5]+h*u[9]+f*u[13],this.mat4[10]=o*u[2]+l*u[6]+h*u[10]+f*u[14],this.mat4[11]=o*u[3]+l*u[7]+h*u[11]+f*u[15],o=this.mat4[12],l=this.mat4[13],h=this.mat4[14],f=this.mat4[15],this.mat4[12]=o*u[0]+l*u[4]+h*u[8]+f*u[12],this.mat4[13]=o*u[1]+l*u[5]+h*u[9]+f*u[13],this.mat4[14]=o*u[2]+l*u[6]+h*u[10]+f*u[14],this.mat4[15]=o*u[3]+l*u[7]+h*u[11]+f*u[15],this},r.default.Matrix.prototype.apply=function(p){var u;if(p===this||p===this.mat4)u=this.copy().mat4;else if(p instanceof r.default.Matrix)u=p.mat4;else if(c(p))u=p;else{if(arguments.length!==16)return;u=arguments}var o=this.mat4,l=o[0],h=o[4],f=o[8],m=o[12];o[0]=u[0]*l+u[1]*h+u[2]*f+u[3]*m,o[4]=u[4]*l+u[5]*h+u[6]*f+u[7]*m,o[8]=u[8]*l+u[9]*h+u[10]*f+u[11]*m,o[12]=u[12]*l+u[13]*h+u[14]*f+u[15]*m;var g=o[1],v=o[5],x=o[9],w=o[13];o[1]=u[0]*g+u[1]*v+u[2]*x+u[3]*w,o[5]=u[4]*g+u[5]*v+u[6]*x+u[7]*w,o[9]=u[8]*g+u[9]*v+u[10]*x+u[11]*w,o[13]=u[12]*g+u[13]*v+u[14]*x+u[15]*w;var M=o[2],A=o[6],E=o[10],I=o[14];o[2]=u[0]*M+u[1]*A+u[2]*E+u[3]*I,o[6]=u[4]*M+u[5]*A+u[6]*E+u[7]*I,o[10]=u[8]*M+u[9]*A+u[10]*E+u[11]*I,o[14]=u[12]*M+u[13]*A+u[14]*E+u[15]*I;var R=o[3],P=o[7],D=o[11],O=o[15];return o[3]=u[0]*R+u[1]*P+u[2]*D+u[3]*O,o[7]=u[4]*R+u[5]*P+u[6]*D+u[7]*O,o[11]=u[8]*R+u[9]*P+u[10]*D+u[11]*O,o[15]=u[12]*R+u[13]*P+u[14]*D+u[15]*O,this},r.default.Matrix.prototype.scale=function(p,u,o){return p instanceof r.default.Vector?(u=p.y,o=p.z,p=p.x):p instanceof Array&&(u=p[1],o=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=u,this.mat4[5]*=u,this.mat4[6]*=u,this.mat4[7]*=u,this.mat4[8]*=o,this.mat4[9]*=o,this.mat4[10]*=o,this.mat4[11]*=o,this},r.default.Matrix.prototype.rotate=function(p,u,o,l){u instanceof r.default.Vector?(o=u.y,l=u.z,u=u.x):u instanceof Array&&(o=u[1],l=u[2],u=u[0]);var h=Math.sqrt(u*u+o*o+l*l);u*=1/h,o*=1/h,l*=1/h;var f=this.mat4[0],m=this.mat4[1],g=this.mat4[2],v=this.mat4[3],x=this.mat4[4],w=this.mat4[5],M=this.mat4[6],A=this.mat4[7],E=this.mat4[8],I=this.mat4[9],R=this.mat4[10],P=this.mat4[11],D=Math.sin(p),O=Math.cos(p),j=1-O,N=u*u*j+O,q=o*u*j+l*D,X=l*u*j-o*D,V=u*o*j-l*D,$=o*o*j+O,K=l*o*j+u*D,_e=u*l*j+o*D,me=o*l*j-u*D,ye=l*l*j+O;return this.mat4[0]=f*N+x*q+E*X,this.mat4[1]=m*N+w*q+I*X,this.mat4[2]=g*N+M*q+R*X,this.mat4[3]=v*N+A*q+P*X,this.mat4[4]=f*V+x*$+E*K,this.mat4[5]=m*V+w*$+I*K,this.mat4[6]=g*V+M*$+R*K,this.mat4[7]=v*V+A*$+P*K,this.mat4[8]=f*_e+x*me+E*ye,this.mat4[9]=m*_e+w*me+I*ye,this.mat4[10]=g*_e+M*me+R*ye,this.mat4[11]=v*_e+A*me+P*ye,this},r.default.Matrix.prototype.translate=function(p){var u=p[0],o=p[1],l=p[2]||0;this.mat4[12]+=this.mat4[0]*u+this.mat4[4]*o+this.mat4[8]*l,this.mat4[13]+=this.mat4[1]*u+this.mat4[5]*o+this.mat4[9]*l,this.mat4[14]+=this.mat4[2]*u+this.mat4[6]*o+this.mat4[10]*l,this.mat4[15]+=this.mat4[3]*u+this.mat4[7]*o+this.mat4[11]*l},r.default.Matrix.prototype.rotateX=function(p){this.rotate(p,1,0,0)},r.default.Matrix.prototype.rotateY=function(p){this.rotate(p,0,1,0)},r.default.Matrix.prototype.rotateZ=function(p){this.rotate(p,0,0,1)},r.default.Matrix.prototype.perspective=function(p,u,o,l){var h=1/Math.tan(p/2),f=1/(o-l);return this.mat4[0]=h/u,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=h,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(l+o)*f,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*l*o*f,this.mat4[15]=0,this},r.default.Matrix.prototype.ortho=function(p,u,o,l,h,f){var m=1/(p-u),g=1/(o-l),v=1/(h-f);return this.mat4[0]=-2*m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*v,this.mat4[11]=0,this.mat4[12]=(p+u)*m,this.mat4[13]=(l+o)*g,this.mat4[14]=(f+h)*v,this.mat4[15]=1,this};var d=r.default.Matrix;i.default=d},{"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220}],311:[function(e,n,i){e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.RenderBuffer=function(c,d,p,u,o,l){this.size=c,this.src=d,this.dst=p,this.attr=u,this._renderer=o,this.map=l},r.default.RenderBuffer.prototype._prepareBuffer=function(c,d){var p,u=d.attributes,o=this._renderer.GL;p=c.model?c.model:c;var l=u[this.attr];if(l){var h=c[this.dst],f=p[this.src];if(0<f.length){var m=!h;if(m&&(c[this.dst]=h=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,h),m||p.dirtyFlags[this.src]!==!1){var g=this.map,v=g?g(f):f;this._renderer._bindBuffer(h,o.ARRAY_BUFFER,v),p.dirtyFlags[this.src]=!1}d.enableAttrib(l,this.size)}}};var a=r.default.RenderBuffer;i.default=a},{"../core/main":260,"core-js/modules/es.array.map":159}],312:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}e("./p5.RenderBuffer"),a.default.RendererGL.prototype.beginShape=function(u){return this.immediateMode.shapeMode=u!==void 0?u:c.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},a.default.RendererGL.prototype.vertex=function(u,o){var l,h,f;l=h=f=0,arguments.length===3?l=arguments[2]:arguments.length===4?(h=arguments[2],f=arguments[3]):arguments.length===5&&(l=arguments[2],h=arguments[3],f=arguments[4]);var m=new a.default.Vector(u,o,l);this.immediateMode.geometry.vertices.push(m),this.immediateMode.geometry.vertexNormals.push(this._currentNormal);var g=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(g[0],g[1],g[2],g[3]),this.textureMode===c.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(h/=this._tex.width,f/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(h,f),this.immediateMode._bezierVertex[0]=u,this.immediateMode._bezierVertex[1]=o,this.immediateMode._bezierVertex[2]=l,this.immediateMode._quadraticVertex[0]=u,this.immediateMode._quadraticVertex[1]=o,this.immediateMode._quadraticVertex[2]=l,this},a.default.RendererGL.prototype.normal=function(u,o,l){return u instanceof a.default.Vector?this._currentNormal=u:this._currentNormal=new a.default.Vector(u,o,l),this},a.default.RendererGL.prototype.endShape=function(u,o,l,h,f,m){return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},a.default.RendererGL.prototype._processVertices=function(u){if(this.immediateMode.geometry.vertices.length!==0){var o=this._doStroke&&this.drawMode!==c.TEXTURE,l=u===c.CLOSE;o&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,l),this.immediateMode.geometry._edgesToVertices());var h=this.immediateMode.shapeMode===c.TESS;(this.isBezier||this.isQuadratic||this.isCurve||h)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape()}},a.default.RendererGL.prototype._calculateEdges=function(u,o,l){var h=[],f=0;switch(u){case c.TRIANGLE_STRIP:for(f=0;f<o.length-2;f++)h.push([f,f+1]),h.push([f,f+2]);h.push([f,f+1]);break;case c.TRIANGLES:for(f=0;f<o.length-2;f+=3)h.push([f,f+1]),h.push([f+1,f+2]),h.push([f+2,f]);break;case c.LINES:for(f=0;f<o.length-1;f+=2)h.push([f,f+1]);break;default:for(f=0;f<o.length-1;f++)h.push([f,f+1])}return l&&h.push([o.length-1,0]),h},a.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=c.TRIANGLES;var u=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],o=this._triangulate(u);this.immediateMode.geometry.vertices=[];for(var l=0,h=o.length;l<h;l+=3)this.vertex(o[l],o[l+1],o[l+2])},a.default.RendererGL.prototype._drawImmediateFill=function(){var u=this.GL,o=this._getImmediateFillShader();this._setFillUniforms(o);var l=!0,h=!1,f=void 0;try{for(var m,g=this.immediateMode.buffers.fill[Symbol.iterator]();!(l=(m=g.next()).done);l=!0)m.value._prepareBuffer(this.immediateMode.geometry,o)}catch(v){h=!0,f=v}finally{try{l||g.return==null||g.return()}finally{if(h)throw f}}this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),u.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),o.unbindShader()},a.default.RendererGL.prototype._drawImmediateStroke=function(){var u=this.GL,o=this._getImmediateStrokeShader();this._setStrokeUniforms(o);var l=!0,h=!1,f=void 0;try{for(var m,g=this.immediateMode.buffers.stroke[Symbol.iterator]();!(l=(m=g.next()).done);l=!0)m.value._prepareBuffer(this.immediateMode.geometry,o)}catch(v){h=!0,f=v}finally{try{l||g.return==null||g.return()}finally{if(h)throw f}}this._applyColorBlend(this.curStrokeColor),u.drawArrays(u.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),o.unbindShader()};var p=a.default.RendererGL;i.default=p},{"../core/constants":250,"../core/main":260,"./p5.RenderBuffer":311,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/web.dom-collections.iterator":226}],313:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};e("./p5.RendererGL"),e("./p5.RenderBuffer");var a=0;r.default.RendererGL.prototype._initBufferDefaults=function(d){if(this._freeBuffers(d),1e3<++a){var p=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[p],a--}return this.retainedMode.geometry[d]={}},r.default.RendererGL.prototype._freeBuffers=function(d){var p=this.retainedMode.geometry[d];if(p){delete this.retainedMode.geometry[d],a--;var u=this.GL;p.indexBuffer&&u.deleteBuffer(p.indexBuffer),o(this.retainedMode.buffers.stroke),o(this.retainedMode.buffers.fill)}function o(l){var h=!0,f=!1,m=void 0;try{for(var g,v=l[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var x=g.value;p[x.dst]&&(u.deleteBuffer(p[x.dst]),p[x.dst]=null)}}catch(w){f=!0,m=w}finally{try{h||v.return==null||v.return()}finally{if(f)throw m}}}},r.default.RendererGL.prototype.createBuffers=function(d,p){var u=this.GL,o=this._initBufferDefaults(d);o.model=p;var l=o.indexBuffer;if(p.faces.length){l=l||(o.indexBuffer=u.createBuffer());var h=r.default.RendererGL.prototype._flatten(p.faces),f=h.some(function(g){return 65535<g}),m=f?Uint32Array:Uint16Array;this._bindBuffer(l,u.ELEMENT_ARRAY_BUFFER,h,m),o.indexBufferType=f?u.UNSIGNED_INT:u.UNSIGNED_SHORT,o.vertexCount=3*p.faces.length}else l&&(u.deleteBuffer(l),o.indexBuffer=null),o.vertexCount=p.vertices?p.vertices.length:0;return o.lineVertexCount=p.lineVertices?p.lineVertices.length:0,o},r.default.RendererGL.prototype.drawBuffers=function(d){var p=this.GL,u=this.retainedMode.geometry[d];if(this._doStroke&&0<u.lineVertexCount){var o=this._getRetainedStrokeShader();this._setStrokeUniforms(o);var l=!0,h=!1,f=void 0;try{for(var m,g=this.retainedMode.buffers.stroke[Symbol.iterator]();!(l=(m=g.next()).done);l=!0)m.value._prepareBuffer(u,o)}catch(I){h=!0,f=I}finally{try{l||g.return==null||g.return()}finally{if(h)throw f}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(p.TRIANGLES,d),o.unbindShader()}if(this._doFill){var v=this._getRetainedFillShader();this._setFillUniforms(v);var x=!0,w=!1,M=void 0;try{for(var A,E=this.retainedMode.buffers.fill[Symbol.iterator]();!(x=(A=E.next()).done);x=!0)A.value._prepareBuffer(u,v)}catch(I){w=!0,M=I}finally{try{x||E.return==null||E.return()}finally{if(w)throw M}}u.indexBuffer&&this._bindBuffer(u.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(p.TRIANGLES,d),v.unbindShader()}return this},r.default.RendererGL.prototype.drawBuffersScaled=function(d,p,u,o){var l=this.uMVMatrix.copy();try{this.uMVMatrix.scale(p,u,o),this.drawBuffers(d)}finally{this.uMVMatrix=l}},r.default.RendererGL.prototype._drawArrays=function(d,p){return this.GL.drawArrays(d,0,this.retainedMode.geometry[p].lineVertexCount),this},r.default.RendererGL.prototype._drawElements=function(d,p){var u=this.retainedMode.geometry[p],o=this.GL;if(u.indexBuffer){if(u.indexBufferType===o.UNSIGNED_INT&&!o.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");o.drawElements(o.TRIANGLES,u.vertexCount,u.indexBufferType,0)}else o.drawArrays(d||o.TRIANGLES,0,u.vertexCount)},r.default.RendererGL.prototype._drawPoints=function(d,p){var u=this.GL,o=this._getImmediatePointShader();this._setPointUniforms(o),this._bindBuffer(p,u.ARRAY_BUFFER,this._vToNArray(d),Float32Array,u.STATIC_DRAW),o.enableAttrib(o.attributes.aPosition,3),u.drawArrays(u.Points,0,d.length),o.unbindShader()};var c=r.default.RendererGL;i.default=c},{"../core/main":260,"./p5.RenderBuffer":311,"./p5.RendererGL":314,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.some":161,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint16-array":221,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/web.dom-collections.iterator":226}],314:[function(e,n,i){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("../core/main")),a=function(f){if(f&&f.__esModule)return f;if(f===null||s(f)!=="object"&&typeof f!="function")return{default:f};var m=d();if(m&&m.has(f))return m.get(f);var g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var w=v?Object.getOwnPropertyDescriptor(f,x):null;w&&(w.get||w.set)?Object.defineProperty(g,x,w):g[x]=f[x]}return g.default=f,m&&m.set(f,g),g}(e("../core/constants")),c=p(e("libtess"));e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");function d(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return d=function(){return f},f}function p(f){return f&&f.__esModule?f:{default:f}}function u(f){return function(m){if(Array.isArray(m)){for(var g=0,v=new Array(m.length);g<m.length;g++)v[g]=m[g];return v}}(f)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,l={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:o+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:o+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;
  }
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`};r.default.RendererGL=function(f,m,g,v){return r.default.Renderer.call(this,f,m,g),this._setAttributeDefaults(m),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=a.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=a.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new r.default.Matrix,this.uPMatrix=new r.default.Matrix,this.uNMatrix=new r.default.Matrix("mat3"),this._currentNormal=new r.default.Vector(0,0,1),this._curCamera=new r.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new r.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new r.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new r.default.RenderBuffer(4,"vertexColors","colorBuffer","aMaterialColor",this),new r.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new r.default.Geometry,shapeMode:a.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new r.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new r.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new r.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new r.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=a.IMAGE,this.textureWrapX=a.CLAMP,this.textureWrapY=a.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},r.default.RendererGL.prototype=Object.create(r.default.Renderer.prototype),r.default.RendererGL.prototype._setAttributeDefaults=function(f){var m={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};f._glAttributes===null?f._glAttributes=m:f._glAttributes=Object.assign(m,f._glAttributes)},r.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var f=this.drawingContext;f.enable(f.DEPTH_TEST),f.depthFunc(f.LEQUAL),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(m){throw m}},r.default.RendererGL.prototype._resetContext=function(f,m){var g=this.width,v=this.height,x=this.canvas.id,w=this._pInst instanceof r.default.Graphics;if(w){var M=this._pInst;M.canvas.parentNode.removeChild(M.canvas),M.canvas=document.createElement("canvas"),(M._pInst._userNode||document.body).appendChild(M.canvas),r.default.Element.call(M,M.canvas,M._pInst),M.width=g,M.height=v}else{var A=this.canvas;A&&A.parentNode.removeChild(A),(A=document.createElement("canvas")).id=x,this._pInst._userNode?this._pInst._userNode.appendChild(A):document.body.appendChild(A),this._pInst.canvas=A}var E=new r.default.RendererGL(this._pInst.canvas,this._pInst,!w);this._pInst._setProperty("_renderer",E),E.resize(g,v),E._applyDefaults(),w||this._pInst._elements.push(E),typeof m=="function"&&setTimeout(function(){m.apply(window._renderer,f)},0)},r.default.prototype.setAttributes=function(f,m){if(this._glAttributes!==void 0){var g=!0;if(m!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[f]!==m&&(this._glAttributes[f]=m,g=!1)):f instanceof Object&&this._glAttributes!==f&&(this._glAttributes=f,g=!1),this._renderer.isP3D&&!g){if(!this._setupDone){for(var v in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(v))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},r.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},r.default.RendererGL.prototype.background=function(){var f,m=(f=this._pInst).color.apply(f,arguments),g=m.levels[0]/255,v=m.levels[1]/255,x=m.levels[2]/255,w=m.levels[3]/255;this.GL.clearColor(g,v,x,w),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},r.default.RendererGL.prototype.fill=function(f,m,g,v){var x=r.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=x._array,this.drawMode=a.FILL,this._useNormalMaterial=!1,this._tex=null},r.default.RendererGL.prototype.stroke=function(f,m,g,v){arguments[3]=255;var x=r.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=x._array},r.default.RendererGL.prototype.strokeCap=function(f){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},r.default.RendererGL.prototype.strokeJoin=function(f){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},r.default.RendererGL.prototype.filter=function(f){console.error("filter() does not work in WEBGL mode")},r.default.RendererGL.prototype.blendMode=function(f){f===a.DARKEST||f===a.LIGHTEST||f===a.ADD||f===a.BLEND||f===a.SUBTRACT||f===a.SCREEN||f===a.EXCLUSION||f===a.REPLACE||f===a.MULTIPLY||f===a.REMOVE?this.curBlendMode=f:f!==a.BURN&&f!==a.OVERLAY&&f!==a.HARD_LIGHT&&f!==a.SOFT_LIGHT&&f!==a.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},r.default.RendererGL.prototype.erase=function(f,m){this._isErasing||(this._applyBlendMode(a.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,f/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,m/255])},r.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},r.default.RendererGL.prototype.strokeWeight=function(f){this.curStrokeWeight!==f&&(this.pointSize=f,this.curStrokeWeight=f)},r.default.RendererGL.prototype._getPixel=function(f,m){var g;return g=new Uint8Array(4),this.drawingContext.readPixels(f,m,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,g),[g[0],g[1],g[2],g[3]]},r.default.RendererGL.prototype.loadPixels=function(){var f=this._pixelsState;if(this._pInst._glAttributes.preserveDrawingBuffer===!0){var m=f.pixels,g=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;m instanceof Uint8Array&&m.length===g||(m=new Uint8Array(g),this._pixelsState._setProperty("pixels",m));var v=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*v,this.height*v,this.GL.RGBA,this.GL.UNSIGNED_BYTE,m)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},r.default.RendererGL.prototype.geometryInHash=function(f){return this.retainedMode.geometry[f]!==void 0},r.default.RendererGL.prototype.resize=function(f,m){r.default.Renderer.prototype.resize.call(this,f,m),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var g=this._pixelsState;g.pixels!==void 0&&g._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},r.default.RendererGL.prototype.clear=function(){var f=(arguments.length<=0?void 0:arguments[0])||0,m=(arguments.length<=1?void 0:arguments[1])||0,g=(arguments.length<=2?void 0:arguments[2])||0,v=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(f,m,g,v),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},r.default.RendererGL.prototype.applyMatrix=function(f,m,g,v,x,w){arguments.length===16?r.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([f,m,0,0,g,v,0,0,0,0,1,0,x,w,0,1])},r.default.RendererGL.prototype.translate=function(f,m,g){return f instanceof r.default.Vector&&(g=f.z,m=f.y,f=f.x),this.uMVMatrix.translate([f,m,g]),this},r.default.RendererGL.prototype.scale=function(f,m,g){return this.uMVMatrix.scale(f,m,g),this},r.default.RendererGL.prototype.rotate=function(f,m){return m===void 0?this.rotateZ(f):(r.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},r.default.RendererGL.prototype.rotateX=function(f){return this.rotate(f,1,0,0),this},r.default.RendererGL.prototype.rotateY=function(f){return this.rotate(f,0,1,0),this},r.default.RendererGL.prototype.rotateZ=function(f){return this.rotate(f,0,0,1),this},r.default.RendererGL.prototype.push=function(){var f=r.default.Renderer.prototype.push.apply(this),m=f.properties;return m.uMVMatrix=this.uMVMatrix.copy(),m.uPMatrix=this.uPMatrix.copy(),m._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),m.ambientLightColors=this.ambientLightColors.slice(),m.specularColors=this.specularColors.slice(),m.directionalLightDirections=this.directionalLightDirections.slice(),m.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),m.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),m.pointLightPositions=this.pointLightPositions.slice(),m.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),m.pointLightSpecularColors=this.pointLightSpecularColors.slice(),m.spotLightPositions=this.spotLightPositions.slice(),m.spotLightDirections=this.spotLightDirections.slice(),m.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),m.spotLightSpecularColors=this.spotLightSpecularColors.slice(),m.spotLightAngle=this.spotLightAngle.slice(),m.spotLightConc=this.spotLightConc.slice(),m.userFillShader=this.userFillShader,m.userStrokeShader=this.userStrokeShader,m.userPointShader=this.userPointShader,m.pointSize=this.pointSize,m.curStrokeWeight=this.curStrokeWeight,m.curStrokeColor=this.curStrokeColor,m.curFillColor=this.curFillColor,m._useSpecularMaterial=this._useSpecularMaterial,m._useEmissiveMaterial=this._useEmissiveMaterial,m._useShininess=this._useShininess,m.constantAttenuation=this.constantAttenuation,m.linearAttenuation=this.linearAttenuation,m.quadraticAttenuation=this.quadraticAttenuation,m._enableLighting=this._enableLighting,m._useNormalMaterial=this._useNormalMaterial,m._tex=this._tex,m.drawMode=this.drawMode,m._currentNormal=this._currentNormal,f},r.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=r.default.Matrix.identity(this._pInst),this},r.default.RendererGL.prototype._getImmediateStrokeShader=function(){var f=this.userStrokeShader;return f&&f.isStrokeShader()?f:this._getLineShader()},r.default.RendererGL.prototype._getRetainedStrokeShader=r.default.RendererGL.prototype._getImmediateStrokeShader,r.default.RendererGL.prototype._getImmediateFillShader=function(){var f=this.userFillShader;if(this._useNormalMaterial&&(!f||!f.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!f||!f.isLightShader())return this._getLightShader()}else if(this._tex){if(!f||!f.isTextureShader())return this._getLightShader()}else if(!f)return this._getImmediateModeShader();return f},r.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var f=this.userFillShader;if(this._enableLighting){if(!f||!f.isLightShader())return this._getLightShader()}else if(this._tex){if(!f||!f.isTextureShader())return this._getLightShader()}else if(!f)return this._getColorShader();return f},r.default.RendererGL.prototype._getImmediatePointShader=function(){var f=this.userPointShader;return f&&f.isPointShader()?f:this._getPointShader()},r.default.RendererGL.prototype._getRetainedLineShader=r.default.RendererGL.prototype._getImmediateLineShader,r.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new r.default.Shader(this,l.phongVert,l.phongFrag):this._defaultLightShader=new r.default.Shader(this,l.lightVert,l.lightTextureFrag)),this._defaultLightShader},r.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new r.default.Shader(this,l.immediateVert,l.vertexColorFrag)),this._defaultImmediateModeShader},r.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new r.default.Shader(this,l.normalVert,l.normalFrag)),this._defaultNormalShader},r.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new r.default.Shader(this,l.normalVert,l.basicFrag)),this._defaultColorShader},r.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new r.default.Shader(this,l.pointVert,l.pointFrag)),this._defaultPointShader},r.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new r.default.Shader(this,l.lineVert,l.lineFrag)),this._defaultLineShader},r.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new r.default.Shader(this,l.fontVert,l.fontFrag)),this._defaultFontShader},r.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var f=new r.default.Image(1,1);f.set(0,0,255),this._emptyTexture=new r.default.Texture(this,f)}return this._emptyTexture},r.default.RendererGL.prototype.getTexture=function(f){var m=this.textures,g=!0,v=!1,x=void 0;try{for(var w,M=m[Symbol.iterator]();!(g=(w=M.next()).done);g=!0){var A=w.value;if(A.src===f)return A}}catch(I){v=!0,x=I}finally{try{g||M.return==null||M.return()}finally{if(v)throw x}}var E=new r.default.Texture(this,f);return m.push(E),E},r.default.RendererGL.prototype._setStrokeUniforms=function(f){f.bindShader(),f.setUniform("uMaterialColor",this.curStrokeColor),f.setUniform("uStrokeWeight",this.curStrokeWeight)},r.default.RendererGL.prototype._setFillUniforms=function(f){f.bindShader(),f.setUniform("uMaterialColor",this.curFillColor),f.setUniform("isTexture",!!this._tex),this._tex&&f.setUniform("uSampler",this._tex),f.setUniform("uTint",this._tint),f.setUniform("uSpecular",this._useSpecularMaterial),f.setUniform("uEmissive",this._useEmissiveMaterial),f.setUniform("uShininess",this._useShininess),f.setUniform("uUseLighting",this._enableLighting);var m=this.pointLightDiffuseColors.length/3;f.setUniform("uPointLightCount",m),f.setUniform("uPointLightLocation",this.pointLightPositions),f.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),f.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var g=this.directionalLightDiffuseColors.length/3;f.setUniform("uDirectionalLightCount",g),f.setUniform("uLightingDirection",this.directionalLightDirections),f.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),f.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var v=this.ambientLightColors.length/3;f.setUniform("uAmbientLightCount",v),f.setUniform("uAmbientColor",this.ambientLightColors);var x=this.spotLightDiffuseColors.length/3;f.setUniform("uSpotLightCount",x),f.setUniform("uSpotLightAngle",this.spotLightAngle),f.setUniform("uSpotLightConc",this.spotLightConc),f.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),f.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),f.setUniform("uSpotLightLocation",this.spotLightPositions),f.setUniform("uSpotLightDirection",this.spotLightDirections),f.setUniform("uConstantAttenuation",this.constantAttenuation),f.setUniform("uLinearAttenuation",this.linearAttenuation),f.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),f.bindTextures()},r.default.RendererGL.prototype._setPointUniforms=function(f){f.bindShader(),f.setUniform("uMaterialColor",this.curStrokeColor),f.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},r.default.RendererGL.prototype._bindBuffer=function(f,m,g,v,x){if(m=m||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(m,f),g!==void 0){var w=new(v||Float32Array)(g);this.GL.bufferData(m,w,x||this.GL.STATIC_DRAW)}},r.default.RendererGL.prototype._arraysEqual=function(f,m){var g=f.length;if(g!==m.length)return!1;for(var v=0;v<g;v++)if(f[v]!==m[v])return!1;return!0},r.default.RendererGL.prototype._isTypedArray=function(f){return f instanceof Uint32Array},r.default.RendererGL.prototype._flatten=function(f){if(f.length===0)return[];if(2e4<f.length){var m,g=Object.prototype.toString,v=[],x=f.slice();for(m=x.pop();g.call(m)==="[object Array]"?x.push.apply(x,u(m)):v.push(m),x.length&&(m=x.pop())!==void 0;);return v.reverse(),v}var w;return(w=[]).concat.apply(w,u(f))},r.default.RendererGL.prototype._vToNArray=function(f){var m=[],g=!0,v=!1,x=void 0;try{for(var w,M=f[Symbol.iterator]();!(g=(w=M.next()).done);g=!0){var A=w.value;m.push(A.x,A.y,A.z)}}catch(E){v=!0,x=E}finally{try{g||M.return==null||M.return()}finally{if(v)throw x}}return m},r.default.prototype._assert3d=function(f){if(!this._renderer.isP3D)throw new Error("".concat(f,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},r.default.RendererGL.prototype._initTessy=function(){var f=new c.default.GluTesselator;return f.gluTessCallback(c.default.gluEnum.GLU_TESS_VERTEX_DATA,function(m,g){g[g.length]=m[0],g[g.length]=m[1],g[g.length]=m[2]}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_BEGIN,function(m){m!==c.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(m))}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_ERROR,function(m){console.log("error callback"),console.log("error number: ".concat(m))}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_COMBINE,function(m,g,v){return[m[0],m[1],m[2]]}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_EDGE_FLAG,function(m){}),f},r.default.RendererGL.prototype._triangulate=function(f){this._tessy.gluTessNormal(0,0,1);var m=[];this._tessy.gluTessBeginPolygon(m);for(var g=0;g<f.length;g++){this._tessy.gluTessBeginContour();for(var v=f[g],x=0;x<v.length;x+=3){var w=[v[x],v[x+1],v[x+2]];this._tessy.gluTessVertex(w,w)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),m},r.default.RendererGL.prototype._bezierCoefficients=function(f){var m=f*f,g=1-f,v=g*g;return[v*g,3*v*f,3*g*m,m*f]},r.default.RendererGL.prototype._quadraticCoefficients=function(f){var m=1-f;return[m*m,2*m*f,f*f]},r.default.RendererGL.prototype._bezierToCatmull=function(f){return[f[1],f[1]+(f[2]-f[0])/this._curveTightness,f[2]-(f[3]-f[1])/this._curveTightness,f[2]]};var h=r.default.RendererGL;i.default=h},{"../core/constants":250,"../core/main":260,"../core/p5.Renderer":263,"./p5.Camera":308,"./p5.Matrix":310,"./p5.Shader":315,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.from":153,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.float64-array":201,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.int16-array":205,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint16-array":221,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,libtess:234,path:237}],315:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.Shader=function(c,d,p){this._renderer=c,this._vertSrc=d,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},r.default.Shader.prototype.init=function(){if(this._glProgram===0){var c=this._renderer.GL;if(this._vertShader=c.createShader(c.VERTEX_SHADER),c.shaderSource(this._vertShader,this._vertSrc),c.compileShader(this._vertShader),!c.getShaderParameter(this._vertShader,c.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(c.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=c.createShader(c.FRAGMENT_SHADER),c.shaderSource(this._fragShader,this._fragSrc),c.compileShader(this._fragShader),!c.getShaderParameter(this._fragShader,c.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(c.getShaderInfoLog(this._fragShader))),null;this._glProgram=c.createProgram(),c.attachShader(this._glProgram,this._vertShader),c.attachShader(this._glProgram,this._fragShader),c.linkProgram(this._glProgram),c.getProgramParameter(this._glProgram,c.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(c.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},r.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var c=this._renderer.GL,d=c.getProgramParameter(this._glProgram,c.ACTIVE_ATTRIBUTES),p=0;p<d;++p){var u=c.getActiveAttrib(this._glProgram,p),o=u.name,l=c.getAttribLocation(this._glProgram,o),h={};h.name=o,h.location=l,h.index=p,h.type=u.type,h.size=u.size,this.attributes[o]=h}this._loadedAttributes=!0}},r.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var c=this._renderer.GL,d=c.getProgramParameter(this._glProgram,c.ACTIVE_UNIFORMS),p=0,u=0;u<d;++u){var o=c.getActiveUniform(this._glProgram,u),l={};l.location=c.getUniformLocation(this._glProgram,o.name),l.size=o.size;var h=o.name;1<o.size&&(h=h.substring(0,h.indexOf("[0]"))),l.name=h,l.type=o.type,l._cachedData=void 0,l.type===c.SAMPLER_2D&&(l.samplerIndex=p,p++,this.samplers.push(l)),l.isArray=l.type===c.FLOAT_MAT3||l.type===c.FLOAT_MAT4||l.type===c.FLOAT_VEC2||l.type===c.FLOAT_VEC3||l.type===c.FLOAT_VEC4||l.type===c.INT_VEC2||l.type===c.INT_VEC3||l.type===c.INT_VEC4,this.uniforms[h]=l}this._loadedUniforms=!0}},r.default.Shader.prototype.compile=function(){},r.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},r.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},r.default.Shader.prototype.bindTextures=function(){var c=this._renderer.GL,d=!0,p=!1,u=void 0;try{for(var o,l=this.samplers[Symbol.iterator]();!(d=(o=l.next()).done);d=!0){var h=o.value,f=h.texture;f===void 0&&(f=this._renderer._getEmptyTexture()),c.activeTexture(c.TEXTURE0+h.samplerIndex),f.bindTexture(),f.update(),c.uniform1i(h.location,h.samplerIndex)}}catch(m){p=!0,u=m}finally{try{d||l.return==null||l.return()}finally{if(p)throw u}}},r.default.Shader.prototype.updateTextures=function(){var c=!0,d=!1,p=void 0;try{for(var u,o=this.samplers[Symbol.iterator]();!(c=(u=o.next()).done);c=!0){var l=u.value.texture;l&&l.update()}}catch(h){d=!0,p=h}finally{try{c||o.return==null||o.return()}finally{if(d)throw p}}},r.default.Shader.prototype.unbindTextures=function(){},r.default.Shader.prototype._setMatrixUniforms=function(){this.setUniform("uProjectionMatrix",this._renderer.uPMatrix.mat4),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uModelViewMatrix",this._renderer.uMVMatrix.mat4),this.setUniform("uViewMatrix",this._renderer._curCamera.cameraMatrix.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},r.default.Shader.prototype.useProgram=function(){var c=this._renderer.GL;return this._renderer._curShader!==this&&(c.useProgram(this._glProgram),this._renderer._curShader=this),this},r.default.Shader.prototype.setUniform=function(c,d){var p=this.uniforms[c];if(p){var u=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,d))return;p._cachedData=d.slice(0)}else{if(p._cachedData&&p._cachedData===d)return;p._cachedData=d}var o=p.location;switch(this.useProgram(),p.type){case u.BOOL:d===!0?u.uniform1i(o,1):u.uniform1i(o,0);break;case u.INT:1<p.size?d.length&&u.uniform1iv(o,d):u.uniform1i(o,d);break;case u.FLOAT:1<p.size?d.length&&u.uniform1fv(o,d):u.uniform1f(o,d);break;case u.FLOAT_MAT3:u.uniformMatrix3fv(o,!1,d);break;case u.FLOAT_MAT4:u.uniformMatrix4fv(o,!1,d);break;case u.FLOAT_VEC2:1<p.size?d.length&&u.uniform2fv(o,d):u.uniform2f(o,d[0],d[1]);break;case u.FLOAT_VEC3:1<p.size?d.length&&u.uniform3fv(o,d):u.uniform3f(o,d[0],d[1],d[2]);break;case u.FLOAT_VEC4:1<p.size?d.length&&u.uniform4fv(o,d):u.uniform4f(o,d[0],d[1],d[2],d[3]);break;case u.INT_VEC2:1<p.size?d.length&&u.uniform2iv(o,d):u.uniform2i(o,d[0],d[1]);break;case u.INT_VEC3:1<p.size?d.length&&u.uniform3iv(o,d):u.uniform3i(o,d[0],d[1],d[2]);break;case u.INT_VEC4:1<p.size?d.length&&u.uniform4iv(o,d):u.uniform4i(o,d[0],d[1],d[2],d[3]);break;case u.SAMPLER_2D:u.activeTexture(u.TEXTURE0+p.samplerIndex),p.texture=this._renderer.getTexture(d),u.uniform1i(p.location,p.samplerIndex)}return this}},r.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},r.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},r.default.Shader.prototype.isTextureShader=function(){return 0<this.samplerIndex},r.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},r.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},r.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},r.default.Shader.prototype.enableAttrib=function(c,d,p,u,o,l){if(c){var h=c.location;if(h!==-1){var f=this._renderer.GL;c.enabled||(f.enableVertexAttribArray(h),c.enabled=!0),this._renderer.GL.vertexAttribPointer(h,d,p||f.FLOAT,u||!1,o||0,l||0)}}return this};var a=r.default.Shader;i.default=a},{"../core/main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],316:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var o=d();if(o&&o.has(u))return o.get(u);var l={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=h?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,o&&o.set(u,l),l}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return d=function(){return u},u}a.default.Texture=function(u,o){this._renderer=u;var l=this._renderer.GL;this.src=o,this.glTex=void 0,this.glTarget=l.TEXTURE_2D,this.glFormat=l.RGBA,this.mipmaps=!1,this.glMinFilter=l.LINEAR,this.glMagFilter=l.LINEAR,this.glWrapS=l.CLAMP_TO_EDGE,this.glWrapT=l.CLAMP_TO_EDGE,this.isSrcMediaElement=a.default.MediaElement!==void 0&&o instanceof a.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=a.default.Element!==void 0&&o instanceof a.default.Element&&!(o instanceof a.default.Graphics),this.isSrcP5Image=o instanceof a.default.Image,this.isSrcP5Graphics=o instanceof a.default.Graphics,this.isImageData=typeof ImageData!="undefined"&&o instanceof ImageData;var h=this._getTextureDataFromSource();return this.width=h.width,this.height=h.height,this.init(h),this},a.default.Texture.prototype._getTextureDataFromSource=function(){var u;return this.isSrcP5Image?u=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?u=this.src.elt:this.isImageData&&(u=this.src),u},a.default.Texture.prototype.init=function(u){var o=this._renderer.GL;if(this.glTex=o.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.glMagFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata){var l=new Uint8Array([1,1,1,1]);o.texImage2D(this.glTarget,0,o.RGBA,1,1,0,this.glFormat,o.UNSIGNED_BYTE,l)}else o.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,o.UNSIGNED_BYTE,u)},a.default.Texture.prototype.update=function(){var u=this.src;if(u.width===0||u.height===0)return!1;var o=this._getTextureDataFromSource(),l=!1,h=this._renderer.GL;return o.width!==this.width||o.height!==this.height?(l=!0,this.width=o.width,this.height=o.height,this.isSrcP5Image?u.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&u.setModified(!0)):this.isSrcP5Image?u.isModified()&&(l=!0,u.setModified(!1)):this.isSrcMediaElement?u.isModified()?(l=!0,u.setModified(!1)):u.loadedmetadata&&this._videoPrevUpdateTime!==u.time()&&(this._videoPrevUpdateTime=u.time(),l=!0):this.isImageData?u._dirty&&(l=!(u._dirty=!1)):l=!0,l&&(this.bindTexture(),h.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,h.UNSIGNED_BYTE,o)),l},a.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},a.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},a.default.Texture.prototype.setInterpolation=function(u,o){var l=this._renderer.GL;u===c.NEAREST?this.glMinFilter=l.NEAREST:this.glMinFilter=l.LINEAR,o===c.NEAREST?this.glMagFilter=l.NEAREST:this.glMagFilter=l.LINEAR,this.bindTexture(),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.glMinFilter),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},a.default.Texture.prototype.setWrapMode=function(u,o){function l(g){return(g&g-1)==0}var h=this._renderer.GL,f=l(this.width),m=l(this.height);u===c.REPEAT?f&&m?this.glWrapS=h.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=h.CLAMP_TO_EDGE):u===c.MIRROR?f&&m?this.glWrapS=h.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=h.CLAMP_TO_EDGE):this.glWrapS=h.CLAMP_TO_EDGE,o===c.REPEAT?f&&m?this.glWrapT=h.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=h.CLAMP_TO_EDGE):o===c.MIRROR?f&&m?this.glWrapT=h.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=h.CLAMP_TO_EDGE):this.glWrapT=h.CLAMP_TO_EDGE,this.bindTexture(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,this.glWrapS),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var p=a.default.Texture;i.default=p},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223}],317:[function(e,n,i){function s(h){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(h){if(h&&h.__esModule)return h;if(h===null||s(h)!=="object"&&typeof h!="function")return{default:h};var f=d();if(f&&f.has(h))return f.get(h);var m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in h)if(Object.prototype.hasOwnProperty.call(h,v)){var x=g?Object.getOwnPropertyDescriptor(h,v):null;x&&(x.get||x.set)?Object.defineProperty(m,v,x):m[v]=h[v]}return m.default=h,f&&f.set(h,m),m}(e("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var h=new WeakMap;return d=function(){return h},h}e("./p5.Shader"),e("./p5.RendererGL.Retained"),a.default.RendererGL.prototype._applyTextProperties=function(){},a.default.RendererGL.prototype.textWidth=function(h){return this._isOpenType()?this._textFont._textWidth(h,this._textSize):0};function p(h,f){this.width=h,this.height=f,this.infos=[],this.findImage=function(m){var g,v,x=this.width*this.height;if(x<m)throw new Error("font is too complex to render in 3D");for(var w=this.infos.length-1;0<=w;--w){var M=this.infos[w];if(M.index+m<x){v=(g=M).imageData;break}}if(!g){try{v=new ImageData(this.width,this.height)}catch{var A=document.getElementsByTagName("canvas")[0],E=!A;A||((A=document.createElement("canvas")).style.display="none",document.body.appendChild(A));var I=A.getContext("2d");I&&(v=I.createImageData(this.width,this.height)),E&&document.body.removeChild(A)}g={index:0,imageData:v},this.infos.push(g)}var R=g.index;return g.index+=m,v._dirty=!0,{imageData:v,index:R}}}function u(h,f,m,g,v){var x=h.imageData.data,w=4*h.index++;x[w++]=f,x[w++]=m,x[w++]=g,x[w++]=v}function o(h){this.font=h,this.strokeImageInfos=new p(64,64),this.colDimImageInfos=new p(64,64),this.rowDimImageInfos=new p(64,64),this.colCellImageInfos=new p(64,64),this.rowCellImageInfos=new p(64,64),this.glyphInfos={},this.getGlyphInfo=function(f){var m=this.glyphInfos[f.index];if(m)return m;var g,v=f.getBoundingBox(),x=v.x1,w=v.y1,M=v.x2-x,A=v.y2-w,E=f.path.commands;if(M==0||A==0||!E.length)return this.glyphInfos[f.index]={};var I,R,P,D,O=[],j=[],N=[];for(g=8;0<=g;--g)N.push([]);for(g=8;0<=g;--g)j.push([]);function q(we,Re,Ge){var Pe=O.length;function Ze(Y,z,J){for(var ce=Y.length;0<ce--;){var Ae=Y[ce];Ae<z&&(z=Ae),J<Ae&&(J=Ae)}return{min:z,max:J}}O.push(Ge);for(var Je=Ze(we,1,0),Ce=Math.max(Math.floor(9*Je.min),0),le=Math.min(Math.ceil(9*Je.max),9),De=Ce;De<le;++De)N[De].push(Pe);for(var se=Ze(Re,1,0),Ne=Math.max(Math.floor(9*se.min),0),ie=Math.min(Math.ceil(9*se.max),9),U=Ne;U<ie;++U)j[U].push(Pe)}function X(we){return(Re=(Pe=255)*we)<(Ge=0)?Ge:Pe<Re?Pe:Re;var Re,Ge,Pe}function V(we,Re,Ge,Pe){this.p0=we,this.c0=Re,this.c1=Ge,this.p1=Pe,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return a.default.Vector.sub(a.default.Vector.sub(this.p1,this.p0),a.default.Vector.mult(a.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Ze){var Je=a.default.Vector.lerp(this.p0,this.c0,Ze),Ce=a.default.Vector.lerp(this.c0,this.c1,Ze),le=a.default.Vector.lerp(Je,Ce,Ze);this.c1=a.default.Vector.lerp(this.c1,this.p1,Ze),this.c0=a.default.Vector.lerp(Ce,this.c1,Ze);var De=a.default.Vector.lerp(le,this.c0,Ze),se=new V(this.p0,Je,le,De);return this.p0=De,se},this.splitInflections=function(){var Ze=a.default.Vector.sub(this.c0,this.p0),Je=a.default.Vector.sub(a.default.Vector.sub(this.c1,this.c0),Ze),Ce=a.default.Vector.sub(a.default.Vector.sub(a.default.Vector.sub(this.p1,this.c1),Ze),a.default.Vector.mult(Je,2)),le=[],De=Je.x*Ce.y-Je.y*Ce.x;if(De!==0){var se=Ze.x*Ce.y-Ze.y*Ce.x,Ne=Ze.x*Je.y-Ze.y*Je.x,ie=se*se-4*De*Ne;if(0<=ie){De<0&&(De=-De,se=-se,Ne=-Ne);var U=Math.sqrt(ie),Y=(-se-U)/(2*De),z=(-se+U)/(2*De);0<Y&&Y<1&&(le.push(this.split(Y)),z=1-(1-z)/(1-Y)),0<z&&z<1&&le.push(this.split(z))}}return le.push(this),le}}function $(we,Re,Ge,Pe,Ze,Je,Ce,le){var De=new V(new a.default.Vector(we,Re),new a.default.Vector(Ge,Pe),new a.default.Vector(Ze,Je),new a.default.Vector(Ce,le)).splitInflections(),se=[],Ne=30/l,ie=!0,U=!1,Y=void 0;try{for(var z,J=De[Symbol.iterator]();!(ie=(z=J.next()).done);ie=!0){for(var ce=z.value,Ae=[],Ie=void 0;!(.125<=(Ie=Ne/ce.quadError()));){var Ve=Math.pow(Ie,1/3),Me=ce.split(Ve),Qe=ce.split(1-Ve/(1-Ve));se.push(Me),Ae.push(ce),ce=Qe}Ie<1&&se.push(ce.split(.5)),se.push(ce),Array.prototype.push.apply(se,Ae.reverse())}}catch(rt){U=!0,Y=rt}finally{try{ie||J.return==null||J.return()}finally{if(U)throw Y}}return se}function K(we,Re,Ge,Pe){q([we,Ge],[Re,Pe],{x:we,y:Re,cx:(we+Ge)/2,cy:(Re+Pe)/2})}function _e(we,Re,Ge,Pe){return Math.abs(Ge-we)<1e-5&&Math.abs(Pe-Re)<1e-5}var me=!0,ye=!1,fe=void 0;try{for(var de,Ee=E[Symbol.iterator]();!(me=(de=Ee.next()).done);me=!0){var C=de.value,F=(C.x-x)/M,H=(C.y-w)/A;if(!_e(I,R,F,H)){switch(C.type){case"M":P=F,D=H;break;case"L":K(I,R,F,H);break;case"Q":var ne=(C.x1-x)/M,re=(C.y1-w)/A;q([I,F,ne],[R,H,re],{x:I,y:R,cx:ne,cy:re});break;case"Z":_e(I,R,P,D)?O.push({x:I,y:R}):(K(I,R,P,D),O.push({x:P,y:D}));break;case"C":for(var oe=$(I,R,(C.x1-x)/M,(C.y1-w)/A,(C.x2-x)/M,(C.y2-w)/A,F,H),te=0;te<oe.length;te++){var xe=oe[te].toQuadratic();q([xe.x,xe.x1,xe.cx],[xe.y,xe.y1,xe.cy],xe)}break;default:throw new Error("unknown command type: ".concat(C.type))}I=F,R=H}}}catch(we){ye=!0,fe=we}finally{try{me||Ee.return==null||Ee.return()}finally{if(ye)throw fe}}for(var Q=O.length,ge=this.strokeImageInfos.findImage(Q),he=ge.index,G=0;G<Q;++G){var W=O[G];u(ge,X(W.x),X(W.y),X(W.cx),X(W.cy))}function ve(we,Re,Ge){for(var Pe=we.length,Ze=Re.findImage(Pe),Je=Ze.index,Ce=0,le=0;le<Pe;++le)Ce+=we[le].length;for(var De=Ge.findImage(Ce),se=0;se<Pe;++se){var Ne=we[se],ie=Ne.length,U=De.index;u(Ze,U>>7,127&U,ie>>7,127&ie);for(var Y=0;Y<ie;++Y){var z=Ne[Y]+he;u(De,z>>7,127&z,0,0)}}return{cellImageInfo:De,dimOffset:Je,dimImageInfo:Ze}}return(m=this.glyphInfos[f.index]={glyph:f,uGlyphRect:[v.x1,-v.y1,v.x2,-v.y2],strokeImageInfo:ge,strokes:O,colInfo:ve(N,this.colDimImageInfos,this.colCellImageInfos),rowInfo:ve(j,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[m.colInfo.dimOffset,m.rowInfo.dimOffset],m}}var l=Math.sqrt(3);a.default.RendererGL.prototype._renderText=function(h,f,m,g,v){if(this._textFont&&typeof this._textFont!="string"){if(!(v<=g)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),h;h.push();var x=this._doStroke,w=this.drawMode;this._doStroke=!1,this.drawMode=c.TEXTURE;var M=this._textFont.font,A=this._textFont._fontInfo;A=A||(this._textFont._fontInfo=new o(M));var E=this._textFont._handleAlignment(this,f,m,g),I=this._textSize/M.unitsPerEm;this.translate(E.x,E.y,0),this.scale(I,I,1);var R=this.GL,P=!this._defaultFontShader,D=this._getFontShader();D.init(),D.bindShader(),P&&(D.setUniform("uGridImageSize",[64,64]),D.setUniform("uCellsImageSize",[64,64]),D.setUniform("uStrokeImageSize",[64,64]),D.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var O=this.retainedMode.geometry.glyph;if(!O){var j=this._textGeom=new a.default.Geometry(1,1,function(){for(var oe=0;oe<=1;oe++)for(var te=0;te<=1;te++)this.vertices.push(new a.default.Vector(te,oe,0)),this.uvs.push(te,oe)});j.computeFaces().computeNormals(),O=this.createBuffers("glyph",j)}var N=!0,q=!1,X=void 0;try{for(var V,$=this.retainedMode.buffers.text[Symbol.iterator]();!(N=(V=$.next()).done);N=!0)V.value._prepareBuffer(O,D)}catch(oe){q=!0,X=oe}finally{try{N||$.return==null||$.return()}finally{if(q)throw X}}this._bindBuffer(O.indexBuffer,R.ELEMENT_ARRAY_BUFFER),D.setUniform("uMaterialColor",this.curFillColor);try{var K=0,_e=null,me=M.stringToGlyphs(f),ye=!0,fe=!1,de=void 0;try{for(var Ee,C=me[Symbol.iterator]();!(ye=(Ee=C.next()).done);ye=!0){var F=Ee.value;_e&&(K+=M.getKerningValue(_e,F));var H=A.getGlyphInfo(F);if(H.uGlyphRect){var ne=H.rowInfo,re=H.colInfo;D.setUniform("uSamplerStrokes",H.strokeImageInfo.imageData),D.setUniform("uSamplerRowStrokes",ne.cellImageInfo.imageData),D.setUniform("uSamplerRows",ne.dimImageInfo.imageData),D.setUniform("uSamplerColStrokes",re.cellImageInfo.imageData),D.setUniform("uSamplerCols",re.dimImageInfo.imageData),D.setUniform("uGridOffset",H.uGridOffset),D.setUniform("uGlyphRect",H.uGlyphRect),D.setUniform("uGlyphOffset",K),D.bindTextures(),R.drawElements(R.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}K+=F.advanceWidth,_e=F}}catch(oe){fe=!0,de=oe}finally{try{ye||C.return==null||C.return()}finally{if(fe)throw de}}}finally{D.unbindShader(),this._doStroke=x,this.drawMode=w,h.pop()}return h}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":250,"../core/main":260,"./p5.RendererGL.Retained":313,"./p5.Shader":315,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.string.sub":189,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}]},{},[245])(245)})})(Uh);var qb=yb(Uh.exports);const Bh={type:"change"},fl={type:"start"},pl={type:"end"};class Xb extends gn{constructor(t,e){super();e===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Se,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:si.ROTATE,MIDDLE:si.DOLLY,RIGHT:si.PAN},this.touches={ONE:oi.ROTATE,TWO:oi.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ie){ie.addEventListener("keydown",Ge),this._domElementKeyEvents=ie},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Bh),n.update(),s=i.NONE},this.update=function(){const ie=new Se,U=new pr().setFromUnitVectors(t.up,new Se(0,1,0)),Y=U.clone().invert(),z=new Se,J=new pr,ce=2*Math.PI;return function(){const Ie=n.object.position;ie.copy(Ie).sub(n.target),ie.applyQuaternion(U),a.setFromVector3(ie),n.autoRotate&&s===i.NONE&&R(E()),n.enableDamping?(a.theta+=c.theta*n.dampingFactor,a.phi+=c.phi*n.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let Ve=n.minAzimuthAngle,Me=n.maxAzimuthAngle;return isFinite(Ve)&&isFinite(Me)&&(Ve<-Math.PI?Ve+=ce:Ve>Math.PI&&(Ve-=ce),Me<-Math.PI?Me+=ce:Me>Math.PI&&(Me-=ce),Ve<=Me?a.theta=Math.max(Ve,Math.min(Me,a.theta)):a.theta=a.theta>(Ve+Me)/2?Math.max(Ve,a.theta):Math.min(Me,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=d,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),ie.setFromSpherical(a),ie.applyQuaternion(Y),Ie.copy(n.target).add(ie),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),p.set(0,0,0)),d=1,u||z.distanceToSquared(n.object.position)>r||8*(1-J.dot(n.object.quaternion))>r?(n.dispatchEvent(Bh),z.copy(n.object.position),J.copy(n.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Ce),n.domElement.removeEventListener("pointerdown",Q),n.domElement.removeEventListener("pointercancel",G),n.domElement.removeEventListener("wheel",Re),n.domElement.removeEventListener("pointermove",ge),n.domElement.removeEventListener("pointerup",he),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ge)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const r=1e-6,a=new kh,c=new kh;let d=1;const p=new Se;let u=!1;const o=new Ke,l=new Ke,h=new Ke,f=new Ke,m=new Ke,g=new Ke,v=new Ke,x=new Ke,w=new Ke,M=[],A={};function E(){return 2*Math.PI/60/60*n.autoRotateSpeed}function I(){return Math.pow(.95,n.zoomSpeed)}function R(ie){c.theta-=ie}function P(ie){c.phi-=ie}const D=function(){const ie=new Se;return function(Y,z){ie.setFromMatrixColumn(z,0),ie.multiplyScalar(-Y),p.add(ie)}}(),O=function(){const ie=new Se;return function(Y,z){n.screenSpacePanning===!0?ie.setFromMatrixColumn(z,1):(ie.setFromMatrixColumn(z,0),ie.crossVectors(n.object.up,ie)),ie.multiplyScalar(Y),p.add(ie)}}(),j=function(){const ie=new Se;return function(Y,z){const J=n.domElement;if(n.object.isPerspectiveCamera){const ce=n.object.position;ie.copy(ce).sub(n.target);let Ae=ie.length();Ae*=Math.tan(n.object.fov/2*Math.PI/180),D(2*Y*Ae/J.clientHeight,n.object.matrix),O(2*z*Ae/J.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(D(Y*(n.object.right-n.object.left)/n.object.zoom/J.clientWidth,n.object.matrix),O(z*(n.object.top-n.object.bottom)/n.object.zoom/J.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function N(ie){n.object.isPerspectiveCamera?d/=ie:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*ie)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function q(ie){n.object.isPerspectiveCamera?d*=ie:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/ie)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(ie){o.set(ie.clientX,ie.clientY)}function V(ie){v.set(ie.clientX,ie.clientY)}function $(ie){f.set(ie.clientX,ie.clientY)}function K(ie){l.set(ie.clientX,ie.clientY),h.subVectors(l,o).multiplyScalar(n.rotateSpeed);const U=n.domElement;R(2*Math.PI*h.x/U.clientHeight),P(2*Math.PI*h.y/U.clientHeight),o.copy(l),n.update()}function _e(ie){x.set(ie.clientX,ie.clientY),w.subVectors(x,v),w.y>0?N(I()):w.y<0&&q(I()),v.copy(x),n.update()}function me(ie){m.set(ie.clientX,ie.clientY),g.subVectors(m,f).multiplyScalar(n.panSpeed),j(g.x,g.y),f.copy(m),n.update()}function ye(ie){ie.deltaY<0?q(I()):ie.deltaY>0&&N(I()),n.update()}function fe(ie){let U=!1;switch(ie.code){case n.keys.UP:j(0,n.keyPanSpeed),U=!0;break;case n.keys.BOTTOM:j(0,-n.keyPanSpeed),U=!0;break;case n.keys.LEFT:j(n.keyPanSpeed,0),U=!0;break;case n.keys.RIGHT:j(-n.keyPanSpeed,0),U=!0;break}U&&(ie.preventDefault(),n.update())}function de(){if(M.length===1)o.set(M[0].pageX,M[0].pageY);else{const ie=.5*(M[0].pageX+M[1].pageX),U=.5*(M[0].pageY+M[1].pageY);o.set(ie,U)}}function Ee(){if(M.length===1)f.set(M[0].pageX,M[0].pageY);else{const ie=.5*(M[0].pageX+M[1].pageX),U=.5*(M[0].pageY+M[1].pageY);f.set(ie,U)}}function C(){const ie=M[0].pageX-M[1].pageX,U=M[0].pageY-M[1].pageY,Y=Math.sqrt(ie*ie+U*U);v.set(0,Y)}function F(){n.enableZoom&&C(),n.enablePan&&Ee()}function H(){n.enableZoom&&C(),n.enableRotate&&de()}function ne(ie){if(M.length==1)l.set(ie.pageX,ie.pageY);else{const Y=Ne(ie),z=.5*(ie.pageX+Y.x),J=.5*(ie.pageY+Y.y);l.set(z,J)}h.subVectors(l,o).multiplyScalar(n.rotateSpeed);const U=n.domElement;R(2*Math.PI*h.x/U.clientHeight),P(2*Math.PI*h.y/U.clientHeight),o.copy(l)}function re(ie){if(M.length===1)m.set(ie.pageX,ie.pageY);else{const U=Ne(ie),Y=.5*(ie.pageX+U.x),z=.5*(ie.pageY+U.y);m.set(Y,z)}g.subVectors(m,f).multiplyScalar(n.panSpeed),j(g.x,g.y),f.copy(m)}function oe(ie){const U=Ne(ie),Y=ie.pageX-U.x,z=ie.pageY-U.y,J=Math.sqrt(Y*Y+z*z);x.set(0,J),w.set(0,Math.pow(x.y/v.y,n.zoomSpeed)),N(w.y),v.copy(x)}function te(ie){n.enableZoom&&oe(ie),n.enablePan&&re(ie)}function xe(ie){n.enableZoom&&oe(ie),n.enableRotate&&ne(ie)}function Q(ie){n.enabled!==!1&&(M.length===0&&(n.domElement.setPointerCapture(ie.pointerId),n.domElement.addEventListener("pointermove",ge),n.domElement.addEventListener("pointerup",he)),le(ie),ie.pointerType==="touch"?Pe(ie):W(ie))}function ge(ie){n.enabled!==!1&&(ie.pointerType==="touch"?Ze(ie):ve(ie))}function he(ie){n.enabled!==!1&&(ie.pointerType==="touch"?Je():we(),De(ie),M.length===0&&(n.domElement.releasePointerCapture(ie.pointerId),n.domElement.removeEventListener("pointermove",ge),n.domElement.removeEventListener("pointerup",he)))}function G(ie){De(ie)}function W(ie){let U;switch(ie.button){case 0:U=n.mouseButtons.LEFT;break;case 1:U=n.mouseButtons.MIDDLE;break;case 2:U=n.mouseButtons.RIGHT;break;default:U=-1}switch(U){case si.DOLLY:if(n.enableZoom===!1)return;V(ie),s=i.DOLLY;break;case si.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enablePan===!1)return;$(ie),s=i.PAN}else{if(n.enableRotate===!1)return;X(ie),s=i.ROTATE}break;case si.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enableRotate===!1)return;X(ie),s=i.ROTATE}else{if(n.enablePan===!1)return;$(ie),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(fl)}function ve(ie){if(n.enabled!==!1)switch(s){case i.ROTATE:if(n.enableRotate===!1)return;K(ie);break;case i.DOLLY:if(n.enableZoom===!1)return;_e(ie);break;case i.PAN:if(n.enablePan===!1)return;me(ie);break}}function we(ie){n.dispatchEvent(pl),s=i.NONE}function Re(ie){n.enabled===!1||n.enableZoom===!1||s!==i.NONE||(ie.preventDefault(),n.dispatchEvent(fl),ye(ie),n.dispatchEvent(pl))}function Ge(ie){n.enabled===!1||n.enablePan===!1||fe(ie)}function Pe(ie){switch(se(ie),M.length){case 1:switch(n.touches.ONE){case oi.ROTATE:if(n.enableRotate===!1)return;de(),s=i.TOUCH_ROTATE;break;case oi.PAN:if(n.enablePan===!1)return;Ee(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(n.touches.TWO){case oi.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;F(),s=i.TOUCH_DOLLY_PAN;break;case oi.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;H(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(fl)}function Ze(ie){switch(se(ie),s){case i.TOUCH_ROTATE:if(n.enableRotate===!1)return;ne(ie),n.update();break;case i.TOUCH_PAN:if(n.enablePan===!1)return;re(ie),n.update();break;case i.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;te(ie),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;xe(ie),n.update();break;default:s=i.NONE}}function Je(ie){n.dispatchEvent(pl),s=i.NONE}function Ce(ie){n.enabled!==!1&&ie.preventDefault()}function le(ie){M.push(ie)}function De(ie){delete A[ie.pointerId];for(let U=0;U<M.length;U++)if(M[U].pointerId==ie.pointerId){M.splice(U,1);return}}function se(ie){let U=A[ie.pointerId];U===void 0&&(U=new Ke,A[ie.pointerId]=U),U.set(ie.pageX,ie.pageY)}function Ne(ie){const U=ie.pointerId===M[0].pointerId?M[1]:M[0];return A[U.pointerId]}n.domElement.addEventListener("contextmenu",Ce),n.domElement.addEventListener("pointerdown",Q),n.domElement.addEventListener("pointercancel",G),n.domElement.addEventListener("wheel",Re,{passive:!1}),this.update()}}class Yb extends ln{constructor(t){super(t);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new xb(e)}),this.register(function(e){return new Ab(e)}),this.register(function(e){return new Lb(e)}),this.register(function(e){return new wb(e)}),this.register(function(e){return new Sb(e)}),this.register(function(e){return new Mb(e)}),this.register(function(e){return new Tb(e)}),this.register(function(e){return new Eb(e)}),this.register(function(e){return new bb(e)}),this.register(function(e){return new Cb(e)})}load(t,e,n,i){const s=this;let r;this.resourcePath!==""?r=this.resourcePath:this.path!==""?r=this.path:r=Pn.extractUrlBase(t),this.manager.itemStart(t);const a=function(d){i?i(d):console.error(d),s.manager.itemError(t),s.manager.itemEnd(t)},c=new ol(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(d){try{s.parse(d,r,function(p){e(p),s.manager.itemEnd(t)},a)}catch(p){a(p)}},n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let s;const r={},a={};if(typeof t=="string")s=t;else if(Pn.decodeText(new Uint8Array(t,0,4))===Gh){try{r[Ct.KHR_BINARY_GLTF]=new Rb(t)}catch(u){i&&i(u);return}s=r[Ct.KHR_BINARY_GLTF].content}else s=Pn.decodeText(new Uint8Array(t));const c=JSON.parse(s);if(c.asset===void 0||c.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new zb(c,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const u=this.pluginCallbacks[p](d);a[u.name]=u,r[u.name]=!0}if(c.extensionsUsed)for(let p=0;p<c.extensionsUsed.length;++p){const u=c.extensionsUsed[p],o=c.extensionsRequired||[];switch(u){case Ct.KHR_MATERIALS_UNLIT:r[u]=new _b;break;case Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:r[u]=new Db;break;case Ct.KHR_DRACO_MESH_COMPRESSION:r[u]=new Pb(c,this.dracoLoader);break;case Ct.KHR_TEXTURE_TRANSFORM:r[u]=new Ib;break;case Ct.KHR_MESH_QUANTIZATION:r[u]=new Ob;break;default:o.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}d.setExtensions(r),d.setPlugins(a),d.parse(n,i)}}function vb(){let b={};return{get:function(t){return b[t]},add:function(t,e){b[t]=e},remove:function(t){delete b[t]},removeAll:function(){b={}}}}const Ct={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class bb{constructor(t){this.parser=t,this.name=Ct.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const s=e.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let d;const p=new at(16777215);c.color!==void 0&&p.fromArray(c.color);const u=c.range!==void 0?c.range:0;switch(c.type){case"directional":d=new Dh(p),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new Ph(p),d.distance=u;break;case"spot":d=new Lh(p),d.distance=u,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,d.angle=c.spot.outerConeAngle,d.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return d.position.set(0,0,0),d.decay=2,c.intensity!==void 0&&(d.intensity=c.intensity),d.name=e.createUniqueName(c.name||"light_"+t),i=Promise.resolve(d),e.cache.add(n,i),i}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return n._getNodeRef(e.cache,a,c)})}}class _b{constructor(){this.name=Ct.KHR_MATERIALS_UNLIT}getMaterialType(){return xn}extendParams(t,e,n){const i=[];t.color=new at(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const r=s.baseColorFactor;t.color.fromArray(r),t.opacity=r[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(t,"map",s.baseColorTexture))}return Promise.all(i)}}class xb{constructor(t){this.parser=t,this.name=Ct.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Yn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];if(r.clearcoatFactor!==void 0&&(e.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&s.push(n.assignTexture(e,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(e,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const a=r.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Ke(a,a)}return Promise.all(s)}}class wb{constructor(t){this.parser=t,this.name=Ct.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Yn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new at(0,0,0),e.sheenRoughness=0,e.sheen=1;const r=i.extensions[this.name];return r.sheenColorFactor!==void 0&&e.sheenColor.fromArray(r.sheenColorFactor),r.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&s.push(n.assignTexture(e,"sheenColorMap",r.sheenColorTexture)),r.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(e,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(s)}}class Sb{constructor(t){this.parser=t,this.name=Ct.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Yn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return r.transmissionFactor!==void 0&&(e.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&s.push(n.assignTexture(e,"transmissionMap",r.transmissionTexture)),Promise.all(s)}}class Mb{constructor(t){this.parser=t,this.name=Ct.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Yn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];e.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&s.push(n.assignTexture(e,"thicknessMap",r.thicknessTexture)),e.attenuationDistance=r.attenuationDistance||0;const a=r.attenuationColor||[1,1,1];return e.attenuationColor=new at(a[0],a[1],a[2]),Promise.all(s)}}class Tb{constructor(t){this.parser=t,this.name=Ct.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Yn}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return e.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Eb{constructor(t){this.parser=t,this.name=Ct.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Yn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];e.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&s.push(n.assignTexture(e,"specularIntensityMap",r.specularTexture));const a=r.specularColorFactor||[1,1,1];return e.specularColor=new at(a[0],a[1],a[2]),r.specularColorTexture!==void 0&&s.push(n.assignTexture(e,"specularColorMap",r.specularColorTexture).then(function(c){c.encoding=Hr})),Promise.all(s)}}class Ab{constructor(t){this.parser=t,this.name=Ct.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],r=n.images[s.source],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r,a)}}class Lb{constructor(t){this.parser=t,this.name=Ct.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,s=i.textures[t];if(!s.extensions||!s.extensions[e])return null;const r=s.extensions[e],a=i.images[r.source];let c=n.textureLoader;if(a.uri){const d=n.options.manager.getHandler(a.uri);d!==null&&(c=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(t,a,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class Cb{constructor(t){this.name=Ct.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,r.ready]).then(function(a){const c=i.byteOffset||0,d=i.byteLength||0,p=i.count,u=i.byteStride,o=new ArrayBuffer(p*u),l=new Uint8Array(a[0],c,d);return r.decodeGltfBuffer(new Uint8Array(o),p,u,l,i.mode,i.filter),o})}else return null}}const Gh="glTF",Ps=12,zh={JSON:1313821514,BIN:5130562};class Rb{constructor(t){this.name=Ct.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,Ps);if(this.header={magic:Pn.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Gh)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Ps,i=new DataView(t,Ps);let s=0;for(;s<n;){const r=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===zh.JSON){const c=new Uint8Array(t,Ps+s,r);this.content=Pn.decodeText(c)}else if(a===zh.BIN){const c=Ps+s;this.body=t.slice(c,c+r)}s+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Pb{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ct.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,s=t.extensions[this.name].bufferView,r=t.extensions[this.name].attributes,a={},c={},d={};for(const p in r){const u=gl[p]||p.toLowerCase();a[u]=r[p]}for(const p in t.attributes){const u=gl[p]||p.toLowerCase();if(r[p]!==void 0){const o=n.accessors[t.attributes[p]],l=Is[o.componentType];d[u]=l,c[u]=o.normalized===!0}}return e.getDependency("bufferView",s).then(function(p){return new Promise(function(u){i.decodeDracoFile(p,function(o){for(const l in o.attributes){const h=o.attributes[l],f=c[l];f!==void 0&&(h.normalized=f)}u(o)},a,d)})})}}class Ib{constructor(){this.name=Ct.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return e.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class ml extends As{constructor(t){super();this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),n=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),r=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new at().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(c){for(const d in a)c.uniforms[d]=a[d];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",r)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(c){a.specular.value=c}},specularMap:{get:function(){return a.specularMap.value},set:function(c){a.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(c){a.glossiness.value=c}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(c){a.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Db{constructor(){this.name=Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return ml}extendParams(t,e,n){const i=e.extensions[this.name];t.color=new at(1,1,1),t.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const r=i.diffuseFactor;t.color.fromArray(r),t.opacity=r[3]}if(i.diffuseTexture!==void 0&&s.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new at(0,0,0),t.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,t.specular=new at(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const r=i.specularGlossinessTexture;s.push(n.assignTexture(t,"glossinessMap",r)),s.push(n.assignTexture(t,"specularMap",r))}return Promise.all(s)}createMaterial(t){const e=new ml(t);return e.fog=!0,e.color=t.color,e.map=t.map===void 0?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=t.aoMap===void 0?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=t.emissiveMap===void 0?null:t.emissiveMap,e.bumpMap=t.bumpMap===void 0?null:t.bumpMap,e.bumpScale=1,e.normalMap=t.normalMap===void 0?null:t.normalMap,e.normalMapType=Bn,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=t.specularMap===void 0?null:t.specularMap,e.specular=t.specular,e.glossinessMap=t.glossinessMap===void 0?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=t.envMap===void 0?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}class Ob{constructor(){this.name=Ct.KHR_MESH_QUANTIZATION}}class Jn extends an{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=t*i*3+i;for(let r=0;r!==i;r++)e[r]=n[s+r];return e}}Jn.prototype.beforeStart_=Jn.prototype.copySampleValue_;Jn.prototype.afterEnd_=Jn.prototype.copySampleValue_;Jn.prototype.interpolate_=function(b,t,e,n){const i=this.resultBuffer,s=this.sampleValues,r=this.valueSize,a=r*2,c=r*3,d=n-t,p=(e-t)/d,u=p*p,o=u*p,l=b*c,h=l-c,f=-2*o+3*u,m=o-u,g=1-f,v=m-u+p;for(let x=0;x!==r;x++){const w=s[h+x+r],M=s[h+x+a]*d,A=s[l+x+r],E=s[l+x]*d;i[x]=g*w+v*M+f*A+m*E}return i};const jb=new pr;class kb extends Jn{interpolate_(t,e,n,i){const s=super.interpolate_(t,e,n,i);return jb.fromArray(s).normalize().toArray(s),s}}const cn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Is={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Vh={9728:ar,9729:Tr,9984:Ko,9985:bu,9986:Qo,9987:ci},Hh={33071:Mr,33648:Gs,10497:ui},Wh={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gl={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Dn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Nb={CUBICSPLINE:void 0,LINEAR:fi,STEP:is},yl={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Fb(b){return b.DefaultMaterial===void 0&&(b.DefaultMaterial=new As({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ai})),b.DefaultMaterial}function Ds(b,t,e){for(const n in e.extensions)b[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function Kn(b,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(b.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Ub(b,t,e){let n=!1,i=!1;for(let a=0,c=t.length;a<c;a++){const d=t[a];if(d.POSITION!==void 0&&(n=!0),d.NORMAL!==void 0&&(i=!0),n&&i)break}if(!n&&!i)return Promise.resolve(b);const s=[],r=[];for(let a=0,c=t.length;a<c;a++){const d=t[a];if(n){const p=d.POSITION!==void 0?e.getDependency("accessor",d.POSITION):b.attributes.position;s.push(p)}if(i){const p=d.NORMAL!==void 0?e.getDependency("accessor",d.NORMAL):b.attributes.normal;r.push(p)}}return Promise.all([Promise.all(s),Promise.all(r)]).then(function(a){const c=a[0],d=a[1];return n&&(b.morphAttributes.position=c),i&&(b.morphAttributes.normal=d),b.morphTargetsRelative=!0,b})}function Bb(b,t){if(b.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)b.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(b.morphTargetInfluences.length===e.length){b.morphTargetDictionary={};for(let n=0,i=e.length;n<i;n++)b.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Gb(b){const t=b.extensions&&b.extensions[Ct.KHR_DRACO_MESH_COMPRESSION];let e;return t?e="draco:"+t.bufferView+":"+t.indices+":"+qh(t.attributes):e=b.indices+":"+qh(b.attributes)+":"+b.mode,e}function qh(b){let t="";const e=Object.keys(b).sort();for(let n=0,i=e.length;n<i;n++)t+=e[n]+":"+b[e[n]]+";";return t}function vl(b){switch(b){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class zb{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new vb,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new jh(this.options.manager):this.textureLoader=new Sh(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ol(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(r){const a={scene:r[0][i.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:i.asset,parser:n,userData:{}};Ds(s,a,i),Kn(a,i),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=e.length;i<s;i++){const r=e[i].joints;for(let a=0,c=r.length;a<c;a++)t[r[a]].isBone=!0}for(let i=0,s=t.length;i<s;i++){const r=t[i];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(n[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),s=(r,a)=>{const c=this.associations.get(r);c!=null&&this.associations.set(a,c);for(const[d,p]of r.children.entries())s(p,a.children[d])};return s(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const s=t(e[i]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(i.map(function(s,r){return n.getDependency(t,r)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Ct.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,r){n.load(Pn.resolveURL(e.uri,i.path),s,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const i=e.byteLength||0,s=e.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(r){const a=r[0],c=Wh[i.type],d=Is[i.componentType],p=d.BYTES_PER_ELEMENT,u=p*c,o=i.byteOffset||0,l=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,h=i.normalized===!0;let f,m;if(l&&l!==u){const g=Math.floor(o/l),v="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let x=e.cache.get(v);x||(f=new d(a,g*l,i.count*l/p),x=new Ni(f,l/p),e.cache.add(v,x)),m=new Fi(x,c,o%l/p,h)}else a===null?f=new d(i.count*c):f=new d(a,o,i.count*c),m=new tr(f,c,h);if(i.sparse!==void 0){const g=Wh.SCALAR,v=Is[i.sparse.indices.componentType],x=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,M=new v(r[1],x,i.sparse.count*g),A=new d(r[2],w,i.sparse.count*c);a!==null&&(m=new tr(m.array.slice(),m.itemSize,m.normalized));for(let E=0,I=M.length;E<I;E++){const R=M[E];if(m.setX(R,A[E*c]),c>=2&&m.setY(R,A[E*c+1]),c>=3&&m.setZ(R,A[E*c+2]),c>=4&&m.setW(R,A[E*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t],s=e.images[i.source];let r=this.textureLoader;if(s.uri){const a=n.manager.getHandler(s.uri);a!==null&&(r=a)}return this.loadTextureImage(t,s,r)}loadTextureImage(t,e,n){const i=this,s=this.json,r=this.options,a=s.textures[t],c=(e.uri||e.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const d=self.URL||self.webkitURL;let p=e.uri||"",u=!1;if(e.bufferView!==void 0)p=i.getDependency("bufferView",e.bufferView).then(function(l){u=!0;const h=new Blob([l],{type:e.mimeType});return p=d.createObjectURL(h),p});else if(e.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const o=Promise.resolve(p).then(function(l){return new Promise(function(h,f){let m=h;n.isImageBitmapLoader===!0&&(m=function(g){const v=new lr(g);v.needsUpdate=!0,h(v)}),n.load(Pn.resolveURL(l,r.path),m,void 0,f)})}).then(function(l){u===!0&&d.revokeObjectURL(p),l.flipY=!1,a.name&&(l.name=a.name);const f=(s.samplers||{})[a.sampler]||{};return l.magFilter=Vh[f.magFilter]||Tr,l.minFilter=Vh[f.minFilter]||ci,l.wrapS=Hh[f.wrapS]||ui,l.wrapT=Hh[f.wrapT]||ui,i.associations.set(l,{textures:t}),l}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",p),null});return this.textureCache[c]=o,o}assignTexture(t,e,n){const i=this;return this.getDependency("texture",n.index).then(function(s){if(n.texCoord!==void 0&&n.texCoord!=0&&!(e==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[Ct.KHR_TEXTURE_TRANSFORM]){const r=n.extensions!==void 0?n.extensions[Ct.KHR_TEXTURE_TRANSFORM]:void 0;if(r){const a=i.associations.get(s);s=i.extensions[Ct.KHR_TEXTURE_TRANSFORM].extendTexture(s,r),i.associations.set(s,a)}}return t[e]=s,s})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=e.attributes.tangent===void 0,s=e.attributes.color!==void 0,r=e.attributes.normal===void 0;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new qa,ur.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(a,c)),n=c}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new Xn,ur.prototype.copy.call(c,n),c.color.copy(n.color),this.cache.add(a,c)),n=c}if(i||s||r){let a="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),r&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=n.clone(),s&&(c.vertexColors=!0),r&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(n))),n=c}n.aoMap&&e.attributes.uv2===void 0&&e.attributes.uv!==void 0&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return As}loadMaterial(t){const e=this,n=this.json,i=this.extensions,s=n.materials[t];let r;const a={},c=s.extensions||{},d=[];if(c[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=i[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];r=u.getMaterialType(),d.push(u.extendParams(a,s,e))}else if(c[Ct.KHR_MATERIALS_UNLIT]){const u=i[Ct.KHR_MATERIALS_UNLIT];r=u.getMaterialType(),d.push(u.extendParams(a,s,e))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new at(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const o=u.baseColorFactor;a.color.fromArray(o),a.opacity=o[3]}u.baseColorTexture!==void 0&&d.push(e.assignTexture(a,"map",u.baseColorTexture)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(d.push(e.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),d.push(e.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),r=this._invokeOne(function(o){return o.getMaterialType&&o.getMaterialType(t)}),d.push(Promise.all(this._invokeAll(function(o){return o.extendMaterialParams&&o.extendMaterialParams(t,a)})))}s.doubleSided===!0&&(a.side=Nn);const p=s.alphaMode||yl.OPAQUE;if(p===yl.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.format=Un,a.transparent=!1,p===yl.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&r!==xn&&(d.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ke(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&r!==xn&&(d.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&r!==xn&&(a.emissive=new at().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&r!==xn&&d.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(d).then(function(){let u;return r===ml?u=i[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new r(a),s.name&&(u.name=s.name),u.map&&(u.map.encoding=Hr),u.emissiveMap&&(u.emissiveMap.encoding=Hr),Kn(u,s),e.associations.set(u,{materials:t}),s.extensions&&Ds(i,u,s),u})}createUniqueName(t){const e=Ft.sanitizeNodeName(t||"");let n=e;for(let i=1;this.nodeNamesUsed[n];++i)n=e+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function s(a){return n[Ct.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(c){return Yh(c,a,e)})}const r=[];for(let a=0,c=t.length;a<c;a++){const d=t[a],p=Gb(d),u=i[p];if(u)r.push(u.promise);else{let o;d.extensions&&d.extensions[Ct.KHR_DRACO_MESH_COMPRESSION]?o=s(d):o=Yh(new Ht,d,e),i[p]={primitive:d,promise:o},r.push(o)}}return Promise.all(r)}loadMesh(t){const e=this,n=this.json,i=this.extensions,s=n.meshes[t],r=s.primitives,a=[];for(let c=0,d=r.length;c<d;c++){const p=r[c].material===void 0?Fb(this.cache):this.getDependency("material",r[c].material);a.push(p)}return a.push(e.loadGeometries(r)),Promise.all(a).then(function(c){const d=c.slice(0,c.length-1),p=c[c.length-1],u=[];for(let l=0,h=p.length;l<h;l++){const f=p[l],m=r[l];let g;const v=d[l];if(m.mode===cn.TRIANGLES||m.mode===cn.TRIANGLE_STRIP||m.mode===cn.TRIANGLE_FAN||m.mode===void 0)g=s.isSkinnedMesh===!0?new Ga(f,v):new _r(f,v),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===cn.TRIANGLE_STRIP?g.geometry=Zh(g.geometry,Wf):m.mode===cn.TRIANGLE_FAN&&(g.geometry=Zh(g.geometry,Pu));else if(m.mode===cn.LINES)g=new _s(f,v);else if(m.mode===cn.LINE_STRIP)g=new So(f,v);else if(m.mode===cn.LINE_LOOP)g=new nh(f,v);else if(m.mode===cn.POINTS)g=new sh(f,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&Bb(g,s),g.name=e.createUniqueName(s.name||"mesh_"+t),Kn(g,s),m.extensions&&Ds(i,g,m),e.assignFinalMaterial(g),u.push(g)}for(let l=0,h=u.length;l<h;l++)e.associations.set(u[l],{meshes:t,primitives:l});if(u.length===1)return u[0];const o=new Ln;e.associations.set(o,{meshes:t});for(let l=0,h=u.length;l<h;l++)o.add(u[l]);return o})}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new xr(hp.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(e=new po(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Kn(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return e.inverseBindMatrices===void 0?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then(function(i){return n.inverseBindMatrices=i,n})}loadAnimation(t){const n=this.json.animations[t],i=[],s=[],r=[],a=[],c=[];for(let d=0,p=n.channels.length;d<p;d++){const u=n.channels[d],o=n.samplers[u.sampler],l=u.target,h=l.node!==void 0?l.node:l.id,f=n.parameters!==void 0?n.parameters[o.input]:o.input,m=n.parameters!==void 0?n.parameters[o.output]:o.output;i.push(this.getDependency("node",h)),s.push(this.getDependency("accessor",f)),r.push(this.getDependency("accessor",m)),a.push(o),c.push(l)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(r),Promise.all(a),Promise.all(c)]).then(function(d){const p=d[0],u=d[1],o=d[2],l=d[3],h=d[4],f=[];for(let g=0,v=p.length;g<v;g++){const x=p[g],w=u[g],M=o[g],A=l[g],E=h[g];if(x===void 0)continue;x.updateMatrix(),x.matrixAutoUpdate=!0;let I;switch(Dn[E.path]){case Dn.weights:I=Ls;break;case Dn.rotation:I=Zn;break;case Dn.position:case Dn.scale:default:I=Cs;break}const R=x.name?x.name:x.uuid,P=A.interpolation!==void 0?Nb[A.interpolation]:fi,D=[];Dn[E.path]===Dn.weights?x.traverse(function(j){j.isMesh===!0&&j.morphTargetInfluences&&D.push(j.name?j.name:j.uuid)}):D.push(R);let O=M.array;if(M.normalized){const j=vl(O.constructor),N=new Float32Array(O.length);for(let q=0,X=O.length;q<X;q++)N[q]=O[q]*j;O=N}for(let j=0,N=D.length;j<N;j++){const q=new I(D[j]+"."+Dn[E.path],w.array,O,P);A.interpolation==="CUBICSPLINE"&&(q.createInterpolant=function(V){const $=this instanceof Zn?kb:Jn;return new $(this.times,this.values,this.getValueSize()/3,V)},q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),f.push(q)}}const m=n.name?n.name:"animation_"+t;return new sl(m,void 0,f)})}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const r=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&r.traverse(function(a){if(!!a.isMesh)for(let c=0,d=i.weights.length;c<d;c++)a.morphTargetInfluences[c]=i.weights[c]}),r})}loadNode(t){const e=this.json,n=this.extensions,i=this,s=e.nodes[t],r=s.name?i.createUniqueName(s.name):"";return function(){const a=[],c=i._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(t)});return c&&a.push(c),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(d){return i._getNodeRef(i.cameraCache,s.camera,d)})),i._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(t)}).forEach(function(d){a.push(d)}),Promise.all(a)}().then(function(a){let c;if(s.isBone===!0?c=new za:a.length>1?c=new Ln:a.length===1?c=a[0]:c=new Ot,c!==a[0])for(let d=0,p=a.length;d<p;d++)c.add(a[d]);if(s.name&&(c.userData.name=s.name,c.name=r),Kn(c,s),s.extensions&&Ds(n,c,s),s.matrix!==void 0){const d=new ft;d.fromArray(s.matrix),c.applyMatrix4(d)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=t,c})}loadScene(t){const e=this.json,n=this.extensions,i=this.json.scenes[t],s=this,r=new Ln;i.name&&(r.name=s.createUniqueName(i.name)),Kn(r,i),i.extensions&&Ds(n,r,i);const a=i.nodes||[],c=[];for(let d=0,p=a.length;d<p;d++)c.push(Xh(a[d],r,e,s));return Promise.all(c).then(function(){const d=p=>{const u=new Map;for(const[o,l]of s.associations)(o instanceof ur||o instanceof lr)&&u.set(o,l);return p.traverse(o=>{const l=s.associations.get(o);l!=null&&u.set(o,l)}),u};return s.associations=d(r),r})}}function Xh(b,t,e,n){const i=e.nodes[b];return n.getDependency("node",b).then(function(s){if(i.skin===void 0)return s;let r;return n.getDependency("skin",i.skin).then(function(a){r=a;const c=[];for(let d=0,p=r.joints.length;d<p;d++)c.push(n.getDependency("node",r.joints[d]));return Promise.all(c)}).then(function(a){return s.traverse(function(c){if(!c.isMesh)return;const d=[],p=[];for(let u=0,o=a.length;u<o;u++){const l=a[u];if(l){d.push(l);const h=new ft;r.inverseBindMatrices!==void 0&&h.fromArray(r.inverseBindMatrices.array,u*16),p.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[u])}c.bind(new Va(d,p),c.matrixWorld)}),s})}).then(function(s){t.add(s);const r=[];if(i.children){const a=i.children;for(let c=0,d=a.length;c<d;c++){const p=a[c];r.push(Xh(p,s,e,n))}}return Promise.all(r)})}function Vb(b,t,e){const n=t.attributes,i=new Rr;if(n.POSITION!==void 0){const a=e.json.accessors[n.POSITION],c=a.min,d=a.max;if(c!==void 0&&d!==void 0){if(i.set(new Se(c[0],c[1],c[2]),new Se(d[0],d[1],d[2])),a.normalized){const p=vl(Is[a.componentType]);i.min.multiplyScalar(p),i.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=t.targets;if(s!==void 0){const a=new Se,c=new Se;for(let d=0,p=s.length;d<p;d++){const u=s[d];if(u.POSITION!==void 0){const o=e.json.accessors[u.POSITION],l=o.min,h=o.max;if(l!==void 0&&h!==void 0){if(c.setX(Math.max(Math.abs(l[0]),Math.abs(h[0]))),c.setY(Math.max(Math.abs(l[1]),Math.abs(h[1]))),c.setZ(Math.max(Math.abs(l[2]),Math.abs(h[2]))),o.normalized){const f=vl(Is[o.componentType]);c.multiplyScalar(f)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}b.boundingBox=i;const r=new Vn;i.getCenter(r.center),r.radius=i.min.distanceTo(i.max)/2,b.boundingSphere=r}function Yh(b,t,e){const n=t.attributes,i=[];function s(r,a){return e.getDependency("accessor",r).then(function(c){b.setAttribute(a,c)})}for(const r in n){const a=gl[r]||r.toLowerCase();a in b.attributes||i.push(s(n[r],a))}if(t.indices!==void 0&&!b.index){const r=e.getDependency("accessor",t.indices).then(function(a){b.setIndex(a)});i.push(r)}return Kn(b,t),Vb(b,t,e),Promise.all(i).then(function(){return t.targets!==void 0?Ub(b,t.targets,e):b})}function Zh(b,t){let e=b.getIndex();if(e===null){const r=[],a=b.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)r.push(c);b.setIndex(r),e=b.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),b}const n=e.count-2,i=[];if(t===Pu)for(let r=1;r<=n;r++)i.push(e.getX(0)),i.push(e.getX(r)),i.push(e.getX(r+1));else for(let r=0;r<n;r++)r%2==0?(i.push(e.getX(r)),i.push(e.getX(r+1)),i.push(e.getX(r+2))):(i.push(e.getX(r+2)),i.push(e.getX(r+1)),i.push(e.getX(r)));i.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=b.clone();return s.setIndex(i),s}export{X0 as A,Ht as B,ch as C,Yb as G,Xn as L,ft as M,Xb as O,xr as P,pr as Q,bh as S,Se as V,Bt as W,As as a,_r as b,So as c,Lh as d,Uc as e,Ph as f,Wb as g,mb as h,hp as i,qb as p};
