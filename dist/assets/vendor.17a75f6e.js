var af=Object.defineProperty;var ju=Object.getOwnPropertySymbols;var lf=Object.prototype.hasOwnProperty,uf=Object.prototype.propertyIsEnumerable;var ku=(y,t,e)=>t in y?af(y,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):y[t]=e,Nu=(y,t)=>{for(var e in t||(t={}))lf.call(t,e)&&ku(y,e,t[e]);if(ju)for(var e of ju(t))uf.call(t,e)&&ku(y,e,t[e]);return y};/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Fu="134",cf=0,Uu=1,df=2,Bu=1,hf=2,cs=3,mi=0,ur=1,qn=2,Gu=1,wn=0,ds=1,zu=2,Vu=3,Hu=4,ff=5,gi=100,pf=101,mf=102,Wu=103,qu=104,gf=200,yf=201,vf=202,_f=203,Xu=204,Yu=205,bf=206,xf=207,wf=208,Sf=209,Mf=210,Ef=0,Tf=1,Af=2,ma=3,Lf=4,Cf=5,Rf=6,Pf=7,ro=0,If=1,Of=2,Xn=0,Df=1,jf=2,kf=3,Nf=4,Ff=5,Zu=300,hs=301,fs=302,ga=303,ya=304,no=306,va=307,yi=1e3,Ar=1001,io=1002,cr=1003,_a=1004,ba=1005,Lr=1006,Ju=1007,vi=1008,Sn=1009,Uf=1010,Bf=1011,so=1012,Gf=1013,oo=1014,an=1015,_i=1016,zf=1017,Vf=1018,Hf=1019,ps=1020,Wf=1021,Yn=1022,vr=1023,qf=1024,Xf=1025,Yf=vr,bi=1026,ms=1027,Zf=1028,Jf=1029,Kf=1030,$f=1031,Qf=1032,ep=1033,Ku=33776,$u=33777,Qu=33778,ec=33779,tc=35840,rc=35841,nc=35842,ic=35843,tp=36196,sc=37492,oc=37496,rp=37808,np=37809,ip=37810,sp=37811,op=37812,ap=37813,lp=37814,up=37815,cp=37816,dp=37817,hp=37818,fp=37819,pp=37820,mp=37821,gp=36492,yp=37840,vp=37841,_p=37842,bp=37843,xp=37844,wp=37845,Sp=37846,Mp=37847,Ep=37848,Tp=37849,Ap=37850,Lp=37851,Cp=37852,Rp=37853,Pp=2200,Ip=2201,Op=2202,gs=2300,xi=2301,xa=2302,wi=2400,Si=2401,ao=2402,wa=2500,ac=2501,Dp=0,jp=1,lc=2,_r=3e3,Jr=3001,Sa=3007,Ma=3002,kp=3003,uc=3004,cc=3005,dc=3006,Np=3200,Fp=3201,Zn=0,Up=1,Ea=7680,Bp=519,ys=35044,lo=35048,hc="300 es";class Jn{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let s=0,r=i.length;s<r;s++)i[s].call(this,t);t.target=null}}}let uo=1234567;const vs=Math.PI/180,_s=180/Math.PI,gr=[];for(let y=0;y<256;y++)gr[y]=(y<16?"0":"")+y.toString(16);const Gp=typeof crypto!="undefined"&&"randomUUID"in crypto;function Or(){if(Gp)return crypto.randomUUID().toUpperCase();const y=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(gr[y&255]+gr[y>>8&255]+gr[y>>16&255]+gr[y>>24&255]+"-"+gr[t&255]+gr[t>>8&255]+"-"+gr[t>>16&15|64]+gr[t>>24&255]+"-"+gr[e&63|128]+gr[e>>8&255]+"-"+gr[e>>16&255]+gr[e>>24&255]+gr[n&255]+gr[n>>8&255]+gr[n>>16&255]+gr[n>>24&255]).toUpperCase()}function Cr(y,t,e){return Math.max(t,Math.min(e,y))}function Ta(y,t){return(y%t+t)%t}function zp(y,t,e,n,i){return n+(y-t)*(i-n)/(e-t)}function Vp(y,t,e){return y!==t?(e-y)/(t-y):0}function bs(y,t,e){return(1-e)*y+e*t}function Hp(y,t,e,n){return bs(y,t,1-Math.exp(-e*n))}function Wp(y,t=1){return t-Math.abs(Ta(y,t*2)-t)}function qp(y,t,e){return y<=t?0:y>=e?1:(y=(y-t)/(e-t),y*y*(3-2*y))}function Xp(y,t,e){return y<=t?0:y>=e?1:(y=(y-t)/(e-t),y*y*y*(y*(y*6-15)+10))}function Yp(y,t){return y+Math.floor(Math.random()*(t-y+1))}function Zp(y,t){return y+Math.random()*(t-y)}function Jp(y){return y*(.5-Math.random())}function Kp(y){return y!==void 0&&(uo=y%2147483647),uo=uo*16807%2147483647,(uo-1)/2147483646}function $p(y){return y*vs}function Qp(y){return y*_s}function Aa(y){return(y&y-1)==0&&y!==0}function fc(y){return Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))}function pc(y){return Math.pow(2,Math.floor(Math.log(y)/Math.LN2))}function em(y,t,e,n,i){const s=Math.cos,r=Math.sin,o=s(e/2),c=r(e/2),h=s((t+n)/2),p=r((t+n)/2),u=s((t-n)/2),a=r((t-n)/2),l=s((n-t)/2),d=r((n-t)/2);switch(i){case"XYX":y.set(o*p,c*u,c*a,o*h);break;case"YZY":y.set(c*a,o*p,c*u,o*h);break;case"ZXZ":y.set(c*u,c*a,o*p,o*h);break;case"XZX":y.set(o*p,c*d,c*l,o*h);break;case"YXY":y.set(c*l,o*p,c*d,o*h);break;case"ZYZ":y.set(c*d,c*l,o*p,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var tm=Object.freeze({__proto__:null,DEG2RAD:vs,RAD2DEG:_s,generateUUID:Or,clamp:Cr,euclideanModulo:Ta,mapLinear:zp,inverseLerp:Vp,lerp:bs,damp:Hp,pingpong:Wp,smoothstep:qp,smootherstep:Xp,randInt:Yp,randFloat:Zp,randFloatSpread:Jp,seededRandom:Kp,degToRad:$p,radToDeg:Qp,isPowerOfTwo:Aa,ceilPowerOfTwo:fc,floorPowerOfTwo:pc,setQuaternionFromProperEuler:em});class rt{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),s=this.x-t.x,r=this.y-t.y;return this.x=s*n-r*i+t.x,this.y=s*i+r*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}rt.prototype.isVector2=!0;class yr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,s,r,o,c,h){const p=this.elements;return p[0]=t,p[1]=i,p[2]=o,p[3]=e,p[4]=s,p[5]=c,p[6]=n,p[7]=r,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,s=this.elements,r=n[0],o=n[3],c=n[6],h=n[1],p=n[4],u=n[7],a=n[2],l=n[5],d=n[8],f=i[0],m=i[3],g=i[6],_=i[1],x=i[4],w=i[7],M=i[2],A=i[5],T=i[8];return s[0]=r*f+o*_+c*M,s[3]=r*m+o*x+c*A,s[6]=r*g+o*w+c*T,s[1]=h*f+p*_+u*M,s[4]=h*m+p*x+u*A,s[7]=h*g+p*w+u*T,s[2]=a*f+l*_+d*M,s[5]=a*m+l*x+d*A,s[8]=a*g+l*w+d*T,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],o=t[5],c=t[6],h=t[7],p=t[8];return e*r*p-e*o*h-n*s*p+n*o*c+i*s*h-i*r*c}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],o=t[5],c=t[6],h=t[7],p=t[8],u=p*r-o*h,a=o*c-p*s,l=h*s-r*c,d=e*u+n*a+i*l;if(d===0)return this.set(0,0,0,0,0,0,0,0,0);const f=1/d;return t[0]=u*f,t[1]=(i*h-p*n)*f,t[2]=(o*n-i*r)*f,t[3]=a*f,t[4]=(p*e-i*c)*f,t[5]=(i*s-o*e)*f,t[6]=l*f,t[7]=(n*c-h*e)*f,t[8]=(r*e-n*s)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,s,r,o){const c=Math.cos(s),h=Math.sin(s);return this.set(n*c,n*h,-n*(c*r+h*o)+r+t,-i*h,i*c,-i*(-h*r+c*o)+o+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,s=i[0],r=i[3],o=i[6],c=i[1],h=i[4],p=i[7];return i[0]=e*s+n*c,i[3]=e*r+n*h,i[6]=e*o+n*p,i[1]=-n*s+e*c,i[4]=-n*r+e*h,i[7]=-n*o+e*p,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}yr.prototype.isMatrix3=!0;function mc(y){if(y.length===0)return-1/0;let t=y[0];for(let e=1,n=y.length;e<n;++e)y[e]>t&&(t=y[e]);return t}function co(y){return document.createElementNS("http://www.w3.org/1999/xhtml",y)}function gc(y,t=0){let e=3735928559^t,n=1103547991^t;for(let i=0,s;i<y.length;i++)s=y.charCodeAt(i),e=Math.imul(e^s,2654435761),n=Math.imul(n^s,1597334677);return e=Math.imul(e^e>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(e^e>>>13,3266489909),4294967296*(2097151&n)+(e>>>0)}let Mi;class Ei{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Mi===void 0&&(Mi=co("canvas")),Mi.width=t.width,Mi.height=t.height;const n=Mi.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Mi}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let rm=0;class dr extends Jn{constructor(t=dr.DEFAULT_IMAGE,e=dr.DEFAULT_MAPPING,n=Ar,i=Ar,s=Lr,r=vi,o=vr,c=Sn,h=1,p=_r){super();Object.defineProperty(this,"id",{value:rm++}),this.uuid=Or(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=r,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=c,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Or()),!e&&t.images[i.uuid]===void 0){let s;if(Array.isArray(i)){s=[];for(let r=0,o=i.length;r<o;r++)i[r].isDataTexture?s.push(La(i[r].image)):s.push(La(i[r]))}else s=La(i);t.images[i.uuid]={uuid:i.uuid,url:s}}n.image=i.uuid}return JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Zu)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case yi:t.x=t.x-Math.floor(t.x);break;case Ar:t.x=t.x<0?0:1;break;case io:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case yi:t.y=t.y-Math.floor(t.y);break;case Ar:t.y=t.y<0?0:1;break;case io:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&this.version++}}dr.DEFAULT_IMAGE=void 0;dr.DEFAULT_MAPPING=Zu;dr.prototype.isTexture=!0;function La(y){return typeof HTMLImageElement!="undefined"&&y instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&y instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&y instanceof ImageBitmap?Ei.getDataURL(y):y.data?{data:Array.prototype.slice.call(y.data),width:y.width,height:y.height,type:y.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Wt{constructor(t=0,e=0,n=0,i=1){this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,s=this.w,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i+r[12]*s,this.y=r[1]*e+r[5]*n+r[9]*i+r[13]*s,this.z=r[2]*e+r[6]*n+r[10]*i+r[14]*s,this.w=r[3]*e+r[7]*n+r[11]*i+r[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,s;const r=.01,o=.1,c=t.elements,h=c[0],p=c[4],u=c[8],a=c[1],l=c[5],d=c[9],f=c[2],m=c[6],g=c[10];if(Math.abs(p-a)<r&&Math.abs(u-f)<r&&Math.abs(d-m)<r){if(Math.abs(p+a)<o&&Math.abs(u+f)<o&&Math.abs(d+m)<o&&Math.abs(h+l+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const x=(h+1)/2,w=(l+1)/2,M=(g+1)/2,A=(p+a)/4,T=(u+f)/4,I=(d+m)/4;return x>w&&x>M?x<r?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(x),i=A/n,s=T/n):w>M?w<r?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),n=A/i,s=I/i):M<r?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),n=T/s,i=I/s),this.set(n,i,s,e),this}let _=Math.sqrt((m-d)*(m-d)+(u-f)*(u-f)+(a-p)*(a-p));return Math.abs(_)<.001&&(_=1),this.x=(m-d)/_,this.y=(u-f)/_,this.z=(a-p)/_,this.w=Math.acos((h+l+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Wt.prototype.isVector4=!0;class Kr extends Jn{constructor(t,e,n={}){super();this.width=t,this.height=e,this.depth=1,this.scissor=new Wt(0,0,t,e),this.scissorTest=!1,this.viewport=new Wt(0,0,t,e),this.texture=new dr(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Lr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=Nu({},this.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Kr.prototype.isWebGLRenderTarget=!0;class nm extends Kr{constructor(t,e,n){super(t,e);const i=this.texture;this.texture=[];for(let s=0;s<n;s++)this.texture[s]=i.clone()}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}nm.prototype.isWebGLMultipleRenderTargets=!0;class yc extends Kr{constructor(t,e,n){super(t,e,n);this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}yc.prototype.isWebGLMultisampleRenderTarget=!0;class Sr{constructor(t=0,e=0,n=0,i=1){this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,s,r,o){let c=n[i+0],h=n[i+1],p=n[i+2],u=n[i+3];const a=s[r+0],l=s[r+1],d=s[r+2],f=s[r+3];if(o===0){t[e+0]=c,t[e+1]=h,t[e+2]=p,t[e+3]=u;return}if(o===1){t[e+0]=a,t[e+1]=l,t[e+2]=d,t[e+3]=f;return}if(u!==f||c!==a||h!==l||p!==d){let m=1-o;const g=c*a+h*l+p*d+u*f,_=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const M=Math.sqrt(x),A=Math.atan2(M,g*_);m=Math.sin(m*A)/M,o=Math.sin(o*A)/M}const w=o*_;if(c=c*m+a*w,h=h*m+l*w,p=p*m+d*w,u=u*m+f*w,m===1-o){const M=1/Math.sqrt(c*c+h*h+p*p+u*u);c*=M,h*=M,p*=M,u*=M}}t[e]=c,t[e+1]=h,t[e+2]=p,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,s,r){const o=n[i],c=n[i+1],h=n[i+2],p=n[i+3],u=s[r],a=s[r+1],l=s[r+2],d=s[r+3];return t[e]=o*d+p*u+c*l-h*a,t[e+1]=c*d+p*a+h*u-o*l,t[e+2]=h*d+p*l+o*a-c*u,t[e+3]=p*d-o*u-c*a-h*l,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,s=t._z,r=t._order,o=Math.cos,c=Math.sin,h=o(n/2),p=o(i/2),u=o(s/2),a=c(n/2),l=c(i/2),d=c(s/2);switch(r){case"XYZ":this._x=a*p*u+h*l*d,this._y=h*l*u-a*p*d,this._z=h*p*d+a*l*u,this._w=h*p*u-a*l*d;break;case"YXZ":this._x=a*p*u+h*l*d,this._y=h*l*u-a*p*d,this._z=h*p*d-a*l*u,this._w=h*p*u+a*l*d;break;case"ZXY":this._x=a*p*u-h*l*d,this._y=h*l*u+a*p*d,this._z=h*p*d+a*l*u,this._w=h*p*u-a*l*d;break;case"ZYX":this._x=a*p*u-h*l*d,this._y=h*l*u+a*p*d,this._z=h*p*d-a*l*u,this._w=h*p*u+a*l*d;break;case"YZX":this._x=a*p*u+h*l*d,this._y=h*l*u+a*p*d,this._z=h*p*d-a*l*u,this._w=h*p*u-a*l*d;break;case"XZY":this._x=a*p*u-h*l*d,this._y=h*l*u-a*p*d,this._z=h*p*d+a*l*u,this._w=h*p*u+a*l*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],s=e[8],r=e[1],o=e[5],c=e[9],h=e[2],p=e[6],u=e[10],a=n+o+u;if(a>0){const l=.5/Math.sqrt(a+1);this._w=.25/l,this._x=(p-c)*l,this._y=(s-h)*l,this._z=(r-i)*l}else if(n>o&&n>u){const l=2*Math.sqrt(1+n-o-u);this._w=(p-c)/l,this._x=.25*l,this._y=(i+r)/l,this._z=(s+h)/l}else if(o>u){const l=2*Math.sqrt(1+o-n-u);this._w=(s-h)/l,this._x=(i+r)/l,this._y=.25*l,this._z=(c+p)/l}else{const l=2*Math.sqrt(1+u-n-o);this._w=(r-i)/l,this._x=(s+h)/l,this._y=(c+p)/l,this._z=.25*l}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Cr(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return e!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,s=t._z,r=t._w,o=e._x,c=e._y,h=e._z,p=e._w;return this._x=n*p+r*o+i*h-s*c,this._y=i*p+r*c+s*o-n*h,this._z=s*p+r*h+n*c-i*o,this._w=r*p-n*o-i*c-s*h,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,i=this._y,s=this._z,r=this._w;let o=r*t._w+n*t._x+i*t._y+s*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=r,this._x=n,this._y=i,this._z=s,this;const c=1-o*o;if(c<=Number.EPSILON){const l=1-e;return this._w=l*r+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(c),p=Math.atan2(h,o),u=Math.sin((1-e)*p)/h,a=Math.sin(e*p)/h;return this._w=r*u+this._w*a,this._x=n*u+this._x*a,this._y=i*u+this._y*a,this._z=s*u+this._z*a,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(s),n*Math.cos(s),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Sr.prototype.isQuaternion=!0;class we{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(vc.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(vc.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*i,this.y=s[1]*e+s[4]*n+s[7]*i,this.z=s[2]*e+s[5]*n+s[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,s=t.elements,r=1/(s[3]*e+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*i+s[12])*r,this.y=(s[1]*e+s[5]*n+s[9]*i+s[13])*r,this.z=(s[2]*e+s[6]*n+s[10]*i+s[14])*r,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,s=t.x,r=t.y,o=t.z,c=t.w,h=c*e+r*i-o*n,p=c*n+o*e-s*i,u=c*i+s*n-r*e,a=-s*e-r*n-o*i;return this.x=h*c+a*-s+p*-o-u*-r,this.y=p*c+a*-r+u*-s-h*-o,this.z=u*c+a*-o+h*-r-p*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i,this.y=s[1]*e+s[5]*n+s[9]*i,this.z=s[2]*e+s[6]*n+s[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return e!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,s=t.z,r=e.x,o=e.y,c=e.z;return this.x=i*c-s*o,this.y=s*r-n*c,this.z=n*o-i*r,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Ca.copy(this).projectOnVector(t),this.sub(Ca)}reflect(t){return this.sub(Ca.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Cr(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}we.prototype.isVector3=!0;const Ca=new we,vc=new Sr;class Dr{constructor(t=new we(1/0,1/0,1/0),e=new we(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,s=-1/0,r=-1/0,o=-1/0;for(let c=0,h=t.length;c<h;c+=3){const p=t[c],u=t[c+1],a=t[c+2];p<e&&(e=p),u<n&&(n=u),a<i&&(i=a),p>s&&(s=p),u>r&&(r=u),a>o&&(o=a)}return this.min.set(e,n,i),this.max.set(s,r,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,s=-1/0,r=-1/0,o=-1/0;for(let c=0,h=t.count;c<h;c++){const p=t.getX(c),u=t.getY(c),a=t.getZ(c);p<e&&(e=p),u<n&&(n=u),a<i&&(i=a),p>s&&(s=p),u>r&&(r=u),a>o&&(o=a)}return this.min.set(e,n,i),this.max.set(s,r,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=xs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;e!==void 0&&(e.boundingBox===null&&e.computeBoundingBox(),Ra.copy(e.boundingBox),Ra.applyMatrix4(t.matrixWorld),this.union(Ra));const n=t.children;for(let i=0,s=n.length;i<s;i++)this.expandByObject(n[i]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,xs),xs.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ws),ho.subVectors(this.max,ws),Ti.subVectors(t.a,ws),Ai.subVectors(t.b,ws),Li.subVectors(t.c,ws),Mn.subVectors(Ai,Ti),En.subVectors(Li,Ai),Kn.subVectors(Ti,Li);let e=[0,-Mn.z,Mn.y,0,-En.z,En.y,0,-Kn.z,Kn.y,Mn.z,0,-Mn.x,En.z,0,-En.x,Kn.z,0,-Kn.x,-Mn.y,Mn.x,0,-En.y,En.x,0,-Kn.y,Kn.x,0];return!Pa(e,Ti,Ai,Li,ho)||(e=[1,0,0,0,1,0,0,0,1],!Pa(e,Ti,Ai,Li,ho))?!1:(fo.crossVectors(Mn,En),e=[fo.x,fo.y,fo.z],Pa(e,Ti,Ai,Li,ho))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return xs.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(xs).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ln[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ln[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ln[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ln[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ln[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ln[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ln[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ln[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ln),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Dr.prototype.isBox3=!0;const ln=[new we,new we,new we,new we,new we,new we,new we,new we],xs=new we,Ra=new Dr,Ti=new we,Ai=new we,Li=new we,Mn=new we,En=new we,Kn=new we,ws=new we,ho=new we,fo=new we,$n=new we;function Pa(y,t,e,n,i){for(let s=0,r=y.length-3;s<=r;s+=3){$n.fromArray(y,s);const o=i.x*Math.abs($n.x)+i.y*Math.abs($n.y)+i.z*Math.abs($n.z),c=t.dot($n),h=e.dot($n),p=n.dot($n);if(Math.max(-Math.max(c,h,p),Math.min(c,h,p))>o)return!1}return!0}const im=new Dr,_c=new we,Ia=new we,Oa=new we;class Qn{constructor(t=new we,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):im.setFromPoints(t).getCenter(n);let i=0;for(let s=0,r=t.length;s<r;s++)i=Math.max(i,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Oa.subVectors(t,this.center);const e=Oa.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),i=(n-this.radius)*.5;this.center.add(Oa.multiplyScalar(i/n)),this.radius+=i}return this}union(t){return Ia.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(_c.copy(t.center).add(Ia)),this.expandByPoint(_c.copy(t.center).sub(Ia)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const un=new we,Da=new we,po=new we,Tn=new we,ja=new we,mo=new we,ka=new we;class Ci{constructor(t=new we,e=new we(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,un)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=un.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(un.copy(this.direction).multiplyScalar(e).add(this.origin),un.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){Da.copy(t).add(e).multiplyScalar(.5),po.copy(e).sub(t).normalize(),Tn.copy(this.origin).sub(Da);const s=t.distanceTo(e)*.5,r=-this.direction.dot(po),o=Tn.dot(this.direction),c=-Tn.dot(po),h=Tn.lengthSq(),p=Math.abs(1-r*r);let u,a,l,d;if(p>0)if(u=r*c-o,a=r*o-c,d=s*p,u>=0)if(a>=-d)if(a<=d){const f=1/p;u*=f,a*=f,l=u*(u+r*a+2*o)+a*(r*u+a+2*c)+h}else a=s,u=Math.max(0,-(r*a+o)),l=-u*u+a*(a+2*c)+h;else a=-s,u=Math.max(0,-(r*a+o)),l=-u*u+a*(a+2*c)+h;else a<=-d?(u=Math.max(0,-(-r*s+o)),a=u>0?-s:Math.min(Math.max(-s,-c),s),l=-u*u+a*(a+2*c)+h):a<=d?(u=0,a=Math.min(Math.max(-s,-c),s),l=a*(a+2*c)+h):(u=Math.max(0,-(r*s+o)),a=u>0?s:Math.min(Math.max(-s,-c),s),l=-u*u+a*(a+2*c)+h);else a=r>0?-s:s,u=Math.max(0,-(r*a+o)),l=-u*u+a*(a+2*c)+h;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(po).multiplyScalar(a).add(Da),l}intersectSphere(t,e){un.subVectors(t.center,this.origin);const n=un.dot(this.direction),i=un.dot(un)-n*n,s=t.radius*t.radius;if(i>s)return null;const r=Math.sqrt(s-i),o=n-r,c=n+r;return o<0&&c<0?null:o<0?this.at(c,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,s,r,o,c;const h=1/this.direction.x,p=1/this.direction.y,u=1/this.direction.z,a=this.origin;return h>=0?(n=(t.min.x-a.x)*h,i=(t.max.x-a.x)*h):(n=(t.max.x-a.x)*h,i=(t.min.x-a.x)*h),p>=0?(s=(t.min.y-a.y)*p,r=(t.max.y-a.y)*p):(s=(t.max.y-a.y)*p,r=(t.min.y-a.y)*p),n>r||s>i||((s>n||n!==n)&&(n=s),(r<i||i!==i)&&(i=r),u>=0?(o=(t.min.z-a.z)*u,c=(t.max.z-a.z)*u):(o=(t.max.z-a.z)*u,c=(t.min.z-a.z)*u),n>c||o>i)||((o>n||n!==n)&&(n=o),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,e)}intersectsBox(t){return this.intersectBox(t,un)!==null}intersectTriangle(t,e,n,i,s){ja.subVectors(e,t),mo.subVectors(n,t),ka.crossVectors(ja,mo);let r=this.direction.dot(ka),o;if(r>0){if(i)return null;o=1}else if(r<0)o=-1,r=-r;else return null;Tn.subVectors(this.origin,t);const c=o*this.direction.dot(mo.crossVectors(Tn,mo));if(c<0)return null;const h=o*this.direction.dot(ja.cross(Tn));if(h<0||c+h>r)return null;const p=-o*Tn.dot(ka);return p<0?null:this.at(p/r,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class mt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,s,r,o,c,h,p,u,a,l,d,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=s,g[5]=r,g[9]=o,g[13]=c,g[2]=h,g[6]=p,g[10]=u,g[14]=a,g[3]=l,g[7]=d,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mt().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/Ri.setFromMatrixColumn(t,0).length(),s=1/Ri.setFromMatrixColumn(t,1).length(),r=1/Ri.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*r,e[9]=n[9]*r,e[10]=n[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,s=t.z,r=Math.cos(n),o=Math.sin(n),c=Math.cos(i),h=Math.sin(i),p=Math.cos(s),u=Math.sin(s);if(t.order==="XYZ"){const a=r*p,l=r*u,d=o*p,f=o*u;e[0]=c*p,e[4]=-c*u,e[8]=h,e[1]=l+d*h,e[5]=a-f*h,e[9]=-o*c,e[2]=f-a*h,e[6]=d+l*h,e[10]=r*c}else if(t.order==="YXZ"){const a=c*p,l=c*u,d=h*p,f=h*u;e[0]=a+f*o,e[4]=d*o-l,e[8]=r*h,e[1]=r*u,e[5]=r*p,e[9]=-o,e[2]=l*o-d,e[6]=f+a*o,e[10]=r*c}else if(t.order==="ZXY"){const a=c*p,l=c*u,d=h*p,f=h*u;e[0]=a-f*o,e[4]=-r*u,e[8]=d+l*o,e[1]=l+d*o,e[5]=r*p,e[9]=f-a*o,e[2]=-r*h,e[6]=o,e[10]=r*c}else if(t.order==="ZYX"){const a=r*p,l=r*u,d=o*p,f=o*u;e[0]=c*p,e[4]=d*h-l,e[8]=a*h+f,e[1]=c*u,e[5]=f*h+a,e[9]=l*h-d,e[2]=-h,e[6]=o*c,e[10]=r*c}else if(t.order==="YZX"){const a=r*c,l=r*h,d=o*c,f=o*h;e[0]=c*p,e[4]=f-a*u,e[8]=d*u+l,e[1]=u,e[5]=r*p,e[9]=-o*p,e[2]=-h*p,e[6]=l*u+d,e[10]=a-f*u}else if(t.order==="XZY"){const a=r*c,l=r*h,d=o*c,f=o*h;e[0]=c*p,e[4]=-u,e[8]=h*p,e[1]=a*u+f,e[5]=r*p,e[9]=l*u-d,e[2]=d*u-l,e[6]=o*p,e[10]=f*u+a}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(sm,t,om)}lookAt(t,e,n){const i=this.elements;return Rr.subVectors(t,e),Rr.lengthSq()===0&&(Rr.z=1),Rr.normalize(),An.crossVectors(n,Rr),An.lengthSq()===0&&(Math.abs(n.z)===1?Rr.x+=1e-4:Rr.z+=1e-4,Rr.normalize(),An.crossVectors(n,Rr)),An.normalize(),go.crossVectors(Rr,An),i[0]=An.x,i[4]=go.x,i[8]=Rr.x,i[1]=An.y,i[5]=go.y,i[9]=Rr.y,i[2]=An.z,i[6]=go.z,i[10]=Rr.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,s=this.elements,r=n[0],o=n[4],c=n[8],h=n[12],p=n[1],u=n[5],a=n[9],l=n[13],d=n[2],f=n[6],m=n[10],g=n[14],_=n[3],x=n[7],w=n[11],M=n[15],A=i[0],T=i[4],I=i[8],R=i[12],P=i[1],O=i[5],D=i[9],k=i[13],N=i[2],q=i[6],X=i[10],G=i[14],Q=i[3],K=i[7],_e=i[11],pe=i[15];return s[0]=r*A+o*P+c*N+h*Q,s[4]=r*T+o*O+c*q+h*K,s[8]=r*I+o*D+c*X+h*_e,s[12]=r*R+o*k+c*G+h*pe,s[1]=p*A+u*P+a*N+l*Q,s[5]=p*T+u*O+a*q+l*K,s[9]=p*I+u*D+a*X+l*_e,s[13]=p*R+u*k+a*G+l*pe,s[2]=d*A+f*P+m*N+g*Q,s[6]=d*T+f*O+m*q+g*K,s[10]=d*I+f*D+m*X+g*_e,s[14]=d*R+f*k+m*G+g*pe,s[3]=_*A+x*P+w*N+M*Q,s[7]=_*T+x*O+w*q+M*K,s[11]=_*I+x*D+w*X+M*_e,s[15]=_*R+x*k+w*G+M*pe,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],s=t[12],r=t[1],o=t[5],c=t[9],h=t[13],p=t[2],u=t[6],a=t[10],l=t[14],d=t[3],f=t[7],m=t[11],g=t[15];return d*(+s*c*u-i*h*u-s*o*a+n*h*a+i*o*l-n*c*l)+f*(+e*c*l-e*h*a+s*r*a-i*r*l+i*h*p-s*c*p)+m*(+e*h*u-e*o*l-s*r*u+n*r*l+s*o*p-n*h*p)+g*(-i*o*p-e*c*u+e*o*a+i*r*u-n*r*a+n*c*p)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],o=t[5],c=t[6],h=t[7],p=t[8],u=t[9],a=t[10],l=t[11],d=t[12],f=t[13],m=t[14],g=t[15],_=u*m*h-f*a*h+f*c*l-o*m*l-u*c*g+o*a*g,x=d*a*h-p*m*h-d*c*l+r*m*l+p*c*g-r*a*g,w=p*f*h-d*u*h+d*o*l-r*f*l-p*o*g+r*u*g,M=d*u*c-p*f*c-d*o*a+r*f*a+p*o*m-r*u*m,A=e*_+n*x+i*w+s*M;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/A;return t[0]=_*T,t[1]=(f*a*s-u*m*s-f*i*l+n*m*l+u*i*g-n*a*g)*T,t[2]=(o*m*s-f*c*s+f*i*h-n*m*h-o*i*g+n*c*g)*T,t[3]=(u*c*s-o*a*s-u*i*h+n*a*h+o*i*l-n*c*l)*T,t[4]=x*T,t[5]=(p*m*s-d*a*s+d*i*l-e*m*l-p*i*g+e*a*g)*T,t[6]=(d*c*s-r*m*s-d*i*h+e*m*h+r*i*g-e*c*g)*T,t[7]=(r*a*s-p*c*s+p*i*h-e*a*h-r*i*l+e*c*l)*T,t[8]=w*T,t[9]=(d*u*s-p*f*s-d*n*l+e*f*l+p*n*g-e*u*g)*T,t[10]=(r*f*s-d*o*s+d*n*h-e*f*h-r*n*g+e*o*g)*T,t[11]=(p*o*s-r*u*s-p*n*h+e*u*h+r*n*l-e*o*l)*T,t[12]=M*T,t[13]=(p*f*i-d*u*i+d*n*a-e*f*a-p*n*m+e*u*m)*T,t[14]=(d*o*i-r*f*i-d*n*c+e*f*c+r*n*m-e*o*m)*T,t[15]=(r*u*i-p*o*i+p*n*c-e*u*c-r*n*a+e*o*a)*T,this}scale(t){const e=this.elements,n=t.x,i=t.y,s=t.z;return e[0]*=n,e[4]*=i,e[8]*=s,e[1]*=n,e[5]*=i,e[9]*=s,e[2]*=n,e[6]*=i,e[10]*=s,e[3]*=n,e[7]*=i,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),s=1-n,r=t.x,o=t.y,c=t.z,h=s*r,p=s*o;return this.set(h*r+n,h*o-i*c,h*c+i*o,0,h*o+i*c,p*o+n,p*c-i*r,0,h*c-i*o,p*c+i*r,s*c*c+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,s,r){return this.set(1,n,s,0,t,1,r,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,s=e._x,r=e._y,o=e._z,c=e._w,h=s+s,p=r+r,u=o+o,a=s*h,l=s*p,d=s*u,f=r*p,m=r*u,g=o*u,_=c*h,x=c*p,w=c*u,M=n.x,A=n.y,T=n.z;return i[0]=(1-(f+g))*M,i[1]=(l+w)*M,i[2]=(d-x)*M,i[3]=0,i[4]=(l-w)*A,i[5]=(1-(a+g))*A,i[6]=(m+_)*A,i[7]=0,i[8]=(d+x)*T,i[9]=(m-_)*T,i[10]=(1-(a+f))*T,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let s=Ri.set(i[0],i[1],i[2]).length();const r=Ri.set(i[4],i[5],i[6]).length(),o=Ri.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),t.x=i[12],t.y=i[13],t.z=i[14],Gr.copy(this);const h=1/s,p=1/r,u=1/o;return Gr.elements[0]*=h,Gr.elements[1]*=h,Gr.elements[2]*=h,Gr.elements[4]*=p,Gr.elements[5]*=p,Gr.elements[6]*=p,Gr.elements[8]*=u,Gr.elements[9]*=u,Gr.elements[10]*=u,e.setFromRotationMatrix(Gr),n.x=s,n.y=r,n.z=o,this}makePerspective(t,e,n,i,s,r){r===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,c=2*s/(e-t),h=2*s/(n-i),p=(e+t)/(e-t),u=(n+i)/(n-i),a=-(r+s)/(r-s),l=-2*r*s/(r-s);return o[0]=c,o[4]=0,o[8]=p,o[12]=0,o[1]=0,o[5]=h,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=a,o[14]=l,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,s,r){const o=this.elements,c=1/(e-t),h=1/(n-i),p=1/(r-s),u=(e+t)*c,a=(n+i)*h,l=(r+s)*p;return o[0]=2*c,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-a,o[2]=0,o[6]=0,o[10]=-2*p,o[14]=-l,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}mt.prototype.isMatrix4=!0;const Ri=new we,Gr=new mt,sm=new we(0,0,0),om=new we(1,1,1),An=new we,go=new we,Rr=new we,bc=new mt,xc=new Sr;class Pi{constructor(t=0,e=0,n=0,i=Pi.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,s=i[0],r=i[4],o=i[8],c=i[1],h=i[5],p=i[9],u=i[2],a=i[6],l=i[10];switch(e){case"XYZ":this._y=Math.asin(Cr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-p,l),this._z=Math.atan2(-r,s)):(this._x=Math.atan2(a,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Cr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(o,l),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Cr(a,-1,1)),Math.abs(a)<.9999999?(this._y=Math.atan2(-u,l),this._z=Math.atan2(-r,h)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Cr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(a,l),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-r,h));break;case"YZX":this._z=Math.asin(Cr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,h),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(o,l));break;case"XZY":this._z=Math.asin(-Cr(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(a,h),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-p,l),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return bc.makeRotationFromQuaternion(t),this.setFromRotationMatrix(bc,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return xc.setFromEuler(this),this.setFromQuaternion(xc,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new we(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Pi.prototype.isEuler=!0;Pi.DefaultOrder="XYZ";Pi.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class am{constructor(){this.mask=1|0}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=4294967295|0}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!=0}}let lm=0;const wc=new we,Ii=new Sr,cn=new mt,yo=new we,Ss=new we,um=new we,cm=new Sr,Sc=new we(1,0,0),Mc=new we(0,1,0),Ec=new we(0,0,1),dm={type:"added"},Tc={type:"removed"};class Ut extends Jn{constructor(){super();Object.defineProperty(this,"id",{value:lm++}),this.uuid=Or(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ut.DefaultUp.clone();const t=new we,e=new Pi,n=new Sr,i=new we(1,1,1);function s(){n.setFromEuler(e,!1)}function r(){e.setFromQuaternion(n,void 0,!1)}e._onChange(s),n._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new mt},normalMatrix:{value:new yr}}),this.matrix=new mt,this.matrixWorld=new mt,this.matrixAutoUpdate=Ut.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new am,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ii.setFromAxisAngle(t,e),this.quaternion.multiply(Ii),this}rotateOnWorldAxis(t,e){return Ii.setFromAxisAngle(t,e),this.quaternion.premultiply(Ii),this}rotateX(t){return this.rotateOnAxis(Sc,t)}rotateY(t){return this.rotateOnAxis(Mc,t)}rotateZ(t){return this.rotateOnAxis(Ec,t)}translateOnAxis(t,e){return wc.copy(t).applyQuaternion(this.quaternion),this.position.add(wc.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Sc,t)}translateY(t){return this.translateOnAxis(Mc,t)}translateZ(t){return this.translateOnAxis(Ec,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(cn.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?yo.copy(t):yo.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ss.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cn.lookAt(Ss,yo,this.up):cn.lookAt(yo,Ss,this.up),this.quaternion.setFromRotationMatrix(cn),i&&(cn.extractRotation(i.matrixWorld),Ii.setFromRotationMatrix(cn),this.quaternion.premultiply(Ii.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(dm)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Tc)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Tc)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),cn.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),cn.multiply(t.parent.matrixWorld)),t.applyMatrix4(cn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const r=this.children[n].getObjectByProperty(t,e);if(r!==void 0)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ss,t,um),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ss,cm,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(t.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let h=0,p=c.length;h<p;h++){const u=c[h];s(t.shapes,u)}else s(t.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,h=this.material.length;c<h;c++)o.push(s(t.materials,this.material[c]));i.material=o}else i.material=s(t.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];i.animations.push(s(t.animations,c))}}if(e){const o=r(t.geometries),c=r(t.materials),h=r(t.textures),p=r(t.images),u=r(t.shapes),a=r(t.skeletons),l=r(t.animations);o.length>0&&(n.geometries=o),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),p.length>0&&(n.images=p),u.length>0&&(n.shapes=u),a.length>0&&(n.skeletons=a),l.length>0&&(n.animations=l)}return n.object=i,n;function r(o){const c=[];for(const h in o){const p=o[h];delete p.metadata,c.push(p)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}}Ut.DefaultUp=new we(0,1,0);Ut.DefaultMatrixAutoUpdate=!0;Ut.prototype.isObject3D=!0;const zr=new we,dn=new we,Na=new we,hn=new we,Oi=new we,Di=new we,Ac=new we,Fa=new we,Ua=new we,Ba=new we;class ar{constructor(t=new we,e=new we,n=new we){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),zr.subVectors(t,e),i.cross(zr);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(t,e,n,i,s){zr.subVectors(i,e),dn.subVectors(n,e),Na.subVectors(t,e);const r=zr.dot(zr),o=zr.dot(dn),c=zr.dot(Na),h=dn.dot(dn),p=dn.dot(Na),u=r*h-o*o;if(u===0)return s.set(-2,-1,-1);const a=1/u,l=(h*c-o*p)*a,d=(r*p-o*c)*a;return s.set(1-l-d,d,l)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,hn),hn.x>=0&&hn.y>=0&&hn.x+hn.y<=1}static getUV(t,e,n,i,s,r,o,c){return this.getBarycoord(t,e,n,i,hn),c.set(0,0),c.addScaledVector(s,hn.x),c.addScaledVector(r,hn.y),c.addScaledVector(o,hn.z),c}static isFrontFacing(t,e,n,i){return zr.subVectors(n,e),dn.subVectors(t,e),zr.cross(dn).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return zr.subVectors(this.c,this.b),dn.subVectors(this.a,this.b),zr.cross(dn).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ar.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ar.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,s){return ar.getUV(t,this.a,this.b,this.c,e,n,i,s)}containsPoint(t){return ar.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ar.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,s=this.c;let r,o;Oi.subVectors(i,n),Di.subVectors(s,n),Fa.subVectors(t,n);const c=Oi.dot(Fa),h=Di.dot(Fa);if(c<=0&&h<=0)return e.copy(n);Ua.subVectors(t,i);const p=Oi.dot(Ua),u=Di.dot(Ua);if(p>=0&&u<=p)return e.copy(i);const a=c*u-p*h;if(a<=0&&c>=0&&p<=0)return r=c/(c-p),e.copy(n).addScaledVector(Oi,r);Ba.subVectors(t,s);const l=Oi.dot(Ba),d=Di.dot(Ba);if(d>=0&&l<=d)return e.copy(s);const f=l*h-c*d;if(f<=0&&h>=0&&d<=0)return o=h/(h-d),e.copy(n).addScaledVector(Di,o);const m=p*d-l*u;if(m<=0&&u-p>=0&&l-d>=0)return Ac.subVectors(s,i),o=(u-p)/(u-p+(l-d)),e.copy(i).addScaledVector(Ac,o);const g=1/(m+f+a);return r=f*g,o=a*g,e.copy(n).addScaledVector(Oi,r).addScaledVector(Di,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let hm=0;class hr extends Jn{constructor(){super();Object.defineProperty(this,"id",{value:hm++}),this.uuid=Or(),this.name="",this.type="Material",this.fog=!0,this.blending=ds,this.side=mi,this.vertexColors=!1,this.opacity=1,this.format=vr,this.transparent=!1,this.blendSrc=Xu,this.blendDst=Yu,this.blendEquation=gi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ma,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Bp,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ea,this.stencilZFail=Ea,this.stencilZPass=Ea,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Gu;continue}const i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ds&&(n.blending=this.blending),this.side!==mi&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==vr&&(n.format=this.format),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(s){const r=[];for(const o in s){const c=s[o];delete c.metadata,r.push(c)}return r}if(e){const s=i(t.textures),r=i(t.images);s.length>0&&(n.textures=s),r.length>0&&(n.images=r)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const i=e.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}hr.prototype.isMaterial=!0;const Lc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vr={h:0,s:0,l:0},vo={h:0,s:0,l:0};function Ga(y,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?y+(t-y)*6*e:e<1/2?t:e<2/3?y+(t-y)*6*(2/3-e):y}function za(y){return y<.04045?y*.0773993808:Math.pow(y*.9478672986+.0521327014,2.4)}function Va(y){return y<.0031308?y*12.92:1.055*Math.pow(y,.41666)-.055}class ut{constructor(t,e,n){return e===void 0&&n===void 0?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Ta(t,1),e=Cr(e,0,1),n=Cr(n,0,1),e===0)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,s=2*n-i;this.r=Ga(s,i,t+1/3),this.g=Ga(s,i,t),this.b=Ga(s,i,t-1/3)}return this}setStyle(t){function e(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let i;const s=n[1],r=n[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const o=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return e(i[4]),this.setHSL(o,c,h)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=n[1],s=i.length;if(s===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=Lc[t.toLowerCase()];return e!==void 0?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=za(t.r),this.g=za(t.g),this.b=za(t.b),this}copyLinearToSRGB(t){return this.r=Va(t.r),this.g=Va(t.g),this.b=Va(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,s=Math.max(e,n,i),r=Math.min(e,n,i);let o,c;const h=(r+s)/2;if(r===s)o=0,c=0;else{const p=s-r;switch(c=h<=.5?p/(s+r):p/(2-s-r),s){case e:o=(n-i)/p+(n<i?6:0);break;case n:o=(i-e)/p+2;break;case i:o=(e-n)/p+4;break}o/=6}return t.h=o,t.s=c,t.l=h,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,e,n){return this.getHSL(Vr),Vr.h+=t,Vr.s+=e,Vr.l+=n,this.setHSL(Vr.h,Vr.s,Vr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Vr),t.getHSL(vo);const n=bs(Vr.h,vo.h,e),i=bs(Vr.s,vo.s,e),s=bs(Vr.l,vo.l,e);return this.setHSL(n,i,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ut.NAMES=Lc;ut.prototype.isColor=!0;ut.prototype.r=1;ut.prototype.g=1;ut.prototype.b=1;class fn extends hr{constructor(t){super();this.type="MeshBasicMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}fn.prototype.isMeshBasicMaterial=!0;const Xt=new we,_o=new rt;class nr{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n===!0,this.usage=ys,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new ut),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new rt),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new we),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Wt),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)_o.fromBufferAttribute(this,e),_o.applyMatrix3(t),this.setXY(e,_o.x,_o.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Xt.fromBufferAttribute(this,e),Xt.applyMatrix3(t),this.setXYZ(e,Xt.x,Xt.y,Xt.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Xt.x=this.getX(e),Xt.y=this.getY(e),Xt.z=this.getZ(e),Xt.applyMatrix4(t),this.setXYZ(e,Xt.x,Xt.y,Xt.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Xt.x=this.getX(e),Xt.y=this.getY(e),Xt.z=this.getZ(e),Xt.applyNormalMatrix(t),this.setXYZ(e,Xt.x,Xt.y,Xt.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Xt.x=this.getX(e),Xt.y=this.getY(e),Xt.z=this.getZ(e),Xt.transformDirection(t),this.setXYZ(e,Xt.x,Xt.y,Xt.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==ys&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}nr.prototype.isBufferAttribute=!0;class Cc extends nr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Rc extends nr{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class fm extends nr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}fm.prototype.isFloat16BufferAttribute=!0;class ir extends nr{constructor(t,e,n){super(new Float32Array(t),e,n)}}let pm=0;const jr=new mt,Ha=new Ut,ji=new we,Pr=new Dr,Ms=new Dr,fr=new we;class Yt extends Jn{constructor(){super();Object.defineProperty(this,"id",{value:pm++}),this.uuid=Or(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(mc(t)>65535?Rc:Cc)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new yr().getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return jr.makeRotationFromQuaternion(t),this.applyMatrix4(jr),this}rotateX(t){return jr.makeRotationX(t),this.applyMatrix4(jr),this}rotateY(t){return jr.makeRotationY(t),this.applyMatrix4(jr),this}rotateZ(t){return jr.makeRotationZ(t),this.applyMatrix4(jr),this}translate(t,e,n){return jr.makeTranslation(t,e,n),this.applyMatrix4(jr),this}scale(t,e,n){return jr.makeScale(t,e,n),this.applyMatrix4(jr),this}lookAt(t){return Ha.lookAt(t),Ha.updateMatrix(),this.applyMatrix4(Ha.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ji).negate(),this.translate(ji.x,ji.y,ji.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ir(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Dr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new we(-1/0,-1/0,-1/0),new we(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const s=e[n];Pr.setFromBufferAttribute(s),this.morphTargetsRelative?(fr.addVectors(this.boundingBox.min,Pr.min),this.boundingBox.expandByPoint(fr),fr.addVectors(this.boundingBox.max,Pr.max),this.boundingBox.expandByPoint(fr)):(this.boundingBox.expandByPoint(Pr.min),this.boundingBox.expandByPoint(Pr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new we,1/0);return}if(t){const n=this.boundingSphere.center;if(Pr.setFromBufferAttribute(t),e)for(let s=0,r=e.length;s<r;s++){const o=e[s];Ms.setFromBufferAttribute(o),this.morphTargetsRelative?(fr.addVectors(Pr.min,Ms.min),Pr.expandByPoint(fr),fr.addVectors(Pr.max,Ms.max),Pr.expandByPoint(fr)):(Pr.expandByPoint(Ms.min),Pr.expandByPoint(Ms.max))}Pr.getCenter(n);let i=0;for(let s=0,r=t.count;s<r;s++)fr.fromBufferAttribute(t,s),i=Math.max(i,n.distanceToSquared(fr));if(e)for(let s=0,r=e.length;s<r;s++){const o=e[s],c=this.morphTargetsRelative;for(let h=0,p=o.count;h<p;h++)fr.fromBufferAttribute(o,h),c&&(ji.fromBufferAttribute(t,h),fr.add(ji)),i=Math.max(i,n.distanceToSquared(fr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.array,i=e.position.array,s=e.normal.array,r=e.uv.array,o=i.length/3;e.tangent===void 0&&this.setAttribute("tangent",new nr(new Float32Array(4*o),4));const c=e.tangent.array,h=[],p=[];for(let P=0;P<o;P++)h[P]=new we,p[P]=new we;const u=new we,a=new we,l=new we,d=new rt,f=new rt,m=new rt,g=new we,_=new we;function x(P,O,D){u.fromArray(i,P*3),a.fromArray(i,O*3),l.fromArray(i,D*3),d.fromArray(r,P*2),f.fromArray(r,O*2),m.fromArray(r,D*2),a.sub(u),l.sub(u),f.sub(d),m.sub(d);const k=1/(f.x*m.y-m.x*f.y);!isFinite(k)||(g.copy(a).multiplyScalar(m.y).addScaledVector(l,-f.y).multiplyScalar(k),_.copy(l).multiplyScalar(f.x).addScaledVector(a,-m.x).multiplyScalar(k),h[P].add(g),h[O].add(g),h[D].add(g),p[P].add(_),p[O].add(_),p[D].add(_))}let w=this.groups;w.length===0&&(w=[{start:0,count:n.length}]);for(let P=0,O=w.length;P<O;++P){const D=w[P],k=D.start,N=D.count;for(let q=k,X=k+N;q<X;q+=3)x(n[q+0],n[q+1],n[q+2])}const M=new we,A=new we,T=new we,I=new we;function R(P){T.fromArray(s,P*3),I.copy(T);const O=h[P];M.copy(O),M.sub(T.multiplyScalar(T.dot(O))).normalize(),A.crossVectors(I,O);const k=A.dot(p[P])<0?-1:1;c[P*4]=M.x,c[P*4+1]=M.y,c[P*4+2]=M.z,c[P*4+3]=k}for(let P=0,O=w.length;P<O;++P){const D=w[P],k=D.start,N=D.count;for(let q=k,X=k+N;q<X;q+=3)R(n[q+0]),R(n[q+1]),R(n[q+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new nr(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let a=0,l=n.count;a<l;a++)n.setXYZ(a,0,0,0);const i=new we,s=new we,r=new we,o=new we,c=new we,h=new we,p=new we,u=new we;if(t)for(let a=0,l=t.count;a<l;a+=3){const d=t.getX(a+0),f=t.getX(a+1),m=t.getX(a+2);i.fromBufferAttribute(e,d),s.fromBufferAttribute(e,f),r.fromBufferAttribute(e,m),p.subVectors(r,s),u.subVectors(i,s),p.cross(u),o.fromBufferAttribute(n,d),c.fromBufferAttribute(n,f),h.fromBufferAttribute(n,m),o.add(p),c.add(p),h.add(p),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(f,c.x,c.y,c.z),n.setXYZ(m,h.x,h.y,h.z)}else for(let a=0,l=e.count;a<l;a+=3)i.fromBufferAttribute(e,a+0),s.fromBufferAttribute(e,a+1),r.fromBufferAttribute(e,a+2),p.subVectors(r,s),u.subVectors(i,s),p.cross(u),n.setXYZ(a+0,p.x,p.y,p.z),n.setXYZ(a+1,p.x,p.y,p.z),n.setXYZ(a+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(t.attributes[i]===void 0)continue;const r=n[i].array,o=t.attributes[i],c=o.array,h=o.itemSize*e,p=Math.min(c.length,r.length-h);for(let u=0,a=h;u<p;u++,a++)r[a]=c[u]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)fr.fromBufferAttribute(t,e),fr.normalize(),t.setXYZ(e,fr.x,fr.y,fr.z)}toNonIndexed(){function t(o,c){const h=o.array,p=o.itemSize,u=o.normalized,a=new h.constructor(c.length*p);let l=0,d=0;for(let f=0,m=c.length;f<m;f++){o.isInterleavedBufferAttribute?l=c[f]*o.data.stride+o.offset:l=c[f]*p;for(let g=0;g<p;g++)a[d++]=h[l++]}return new nr(a,p,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Yt,n=this.index.array,i=this.attributes;for(const o in i){const c=i[o],h=t(c,n);e.setAttribute(o,h)}const s=this.morphAttributes;for(const o in s){const c=[],h=s[o];for(let p=0,u=h.length;p<u;p++){const a=h[p],l=t(a,n);c.push(l)}e.morphAttributes[o]=c}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let o=0,c=r.length;o<c;o++){const h=r[o];e.addGroup(h.start,h.count,h.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(t[h]=c[h]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const c in n){const h=n[c];t.data.attributes[c]=h.toJSON(t.data)}const i={};let s=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],p=[];for(let u=0,a=h.length;u<a;u++){const l=h[u];p.push(l.toJSON(t.data))}p.length>0&&(i[c]=p,s=!0)}s&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const o=this.boundingSphere;return o!==null&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(e));const i=t.attributes;for(const h in i){const p=i[h];this.setAttribute(h,p.clone(e))}const s=t.morphAttributes;for(const h in s){const p=[],u=s[h];for(let a=0,l=u.length;a<l;a++)p.push(u[a].clone(e));this.morphAttributes[h]=p}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let h=0,p=r.length;h<p;h++){const u=r[h];this.addGroup(u.start,u.count,u.materialIndex)}const o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Yt.prototype.isBufferGeometry=!0;const Pc=new mt,ki=new Ci,Wa=new Qn,Ln=new we,Cn=new we,Rn=new we,qa=new we,Xa=new we,Ya=new we,bo=new we,xo=new we,wo=new we,So=new rt,Mo=new rt,Eo=new rt,Za=new we,To=new we;class br extends Ut{constructor(t=new Yt,e=new fn){super();this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Wa.copy(n.boundingSphere),Wa.applyMatrix4(s),t.ray.intersectsSphere(Wa)===!1)||(Pc.copy(s).invert(),ki.copy(t.ray).applyMatrix4(Pc),n.boundingBox!==null&&ki.intersectsBox(n.boundingBox)===!1))return;let r;if(n.isBufferGeometry){const o=n.index,c=n.attributes.position,h=n.morphAttributes.position,p=n.morphTargetsRelative,u=n.attributes.uv,a=n.attributes.uv2,l=n.groups,d=n.drawRange;if(o!==null)if(Array.isArray(i))for(let f=0,m=l.length;f<m;f++){const g=l[f],_=i[g.materialIndex],x=Math.max(g.start,d.start),w=Math.min(o.count,Math.min(g.start+g.count,d.start+d.count));for(let M=x,A=w;M<A;M+=3){const T=o.getX(M),I=o.getX(M+1),R=o.getX(M+2);r=Ao(this,_,t,ki,c,h,p,u,a,T,I,R),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=g.materialIndex,e.push(r))}}else{const f=Math.max(0,d.start),m=Math.min(o.count,d.start+d.count);for(let g=f,_=m;g<_;g+=3){const x=o.getX(g),w=o.getX(g+1),M=o.getX(g+2);r=Ao(this,i,t,ki,c,h,p,u,a,x,w,M),r&&(r.faceIndex=Math.floor(g/3),e.push(r))}}else if(c!==void 0)if(Array.isArray(i))for(let f=0,m=l.length;f<m;f++){const g=l[f],_=i[g.materialIndex],x=Math.max(g.start,d.start),w=Math.min(c.count,Math.min(g.start+g.count,d.start+d.count));for(let M=x,A=w;M<A;M+=3){const T=M,I=M+1,R=M+2;r=Ao(this,_,t,ki,c,h,p,u,a,T,I,R),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=g.materialIndex,e.push(r))}}else{const f=Math.max(0,d.start),m=Math.min(c.count,d.start+d.count);for(let g=f,_=m;g<_;g+=3){const x=g,w=g+1,M=g+2;r=Ao(this,i,t,ki,c,h,p,u,a,x,w,M),r&&(r.faceIndex=Math.floor(g/3),e.push(r))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}br.prototype.isMesh=!0;function mm(y,t,e,n,i,s,r,o){let c;if(t.side===ur?c=n.intersectTriangle(r,s,i,!0,o):c=n.intersectTriangle(i,s,r,t.side!==qn,o),c===null)return null;To.copy(o),To.applyMatrix4(y.matrixWorld);const h=e.ray.origin.distanceTo(To);return h<e.near||h>e.far?null:{distance:h,point:To.clone(),object:y}}function Ao(y,t,e,n,i,s,r,o,c,h,p,u){Ln.fromBufferAttribute(i,h),Cn.fromBufferAttribute(i,p),Rn.fromBufferAttribute(i,u);const a=y.morphTargetInfluences;if(s&&a){bo.set(0,0,0),xo.set(0,0,0),wo.set(0,0,0);for(let d=0,f=s.length;d<f;d++){const m=a[d],g=s[d];m!==0&&(qa.fromBufferAttribute(g,h),Xa.fromBufferAttribute(g,p),Ya.fromBufferAttribute(g,u),r?(bo.addScaledVector(qa,m),xo.addScaledVector(Xa,m),wo.addScaledVector(Ya,m)):(bo.addScaledVector(qa.sub(Ln),m),xo.addScaledVector(Xa.sub(Cn),m),wo.addScaledVector(Ya.sub(Rn),m)))}Ln.add(bo),Cn.add(xo),Rn.add(wo)}y.isSkinnedMesh&&(y.boneTransform(h,Ln),y.boneTransform(p,Cn),y.boneTransform(u,Rn));const l=mm(y,t,e,n,Ln,Cn,Rn,Za);if(l){o&&(So.fromBufferAttribute(o,h),Mo.fromBufferAttribute(o,p),Eo.fromBufferAttribute(o,u),l.uv=ar.getUV(Za,Ln,Cn,Rn,So,Mo,Eo,new rt)),c&&(So.fromBufferAttribute(c,h),Mo.fromBufferAttribute(c,p),Eo.fromBufferAttribute(c,u),l.uv2=ar.getUV(Za,Ln,Cn,Rn,So,Mo,Eo,new rt));const d={a:h,b:p,c:u,normal:new we,materialIndex:0};ar.getNormal(Ln,Cn,Rn,d.normal),l.face=d}return l}class Es extends Yt{constructor(t=1,e=1,n=1,i=1,s=1,r=1){super();this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:s,depthSegments:r};const o=this;i=Math.floor(i),s=Math.floor(s),r=Math.floor(r);const c=[],h=[],p=[],u=[];let a=0,l=0;d("z","y","x",-1,-1,n,e,t,r,s,0),d("z","y","x",1,-1,n,e,-t,r,s,1),d("x","z","y",1,1,t,n,e,i,r,2),d("x","z","y",1,-1,t,n,-e,i,r,3),d("x","y","z",1,-1,t,e,n,i,s,4),d("x","y","z",-1,-1,t,e,-n,i,s,5),this.setIndex(c),this.setAttribute("position",new ir(h,3)),this.setAttribute("normal",new ir(p,3)),this.setAttribute("uv",new ir(u,2));function d(f,m,g,_,x,w,M,A,T,I,R){const P=w/T,O=M/I,D=w/2,k=M/2,N=A/2,q=T+1,X=I+1;let G=0,Q=0;const K=new we;for(let _e=0;_e<X;_e++){const pe=_e*O-k;for(let ge=0;ge<q;ge++){const ce=ge*P-D;K[f]=ce*_,K[m]=pe*x,K[g]=N,h.push(K.x,K.y,K.z),K[f]=0,K[m]=0,K[g]=A>0?1:-1,p.push(K.x,K.y,K.z),u.push(ge/T),u.push(1-_e/I),G+=1}}for(let _e=0;_e<I;_e++)for(let pe=0;pe<T;pe++){const ge=a+pe+q*_e,ce=a+pe+q*(_e+1),de=a+(pe+1)+q*(_e+1),Ee=a+(pe+1)+q*_e;c.push(ge,ce,Ee),c.push(ce,de,Ee),Q+=6}o.addGroup(l,Q,R),l+=Q,a+=G}}static fromJSON(t){return new Es(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ni(y){const t={};for(const e in y){t[e]={};for(const n in y[e]){const i=y[e][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[e][n]=i.clone():Array.isArray(i)?t[e][n]=i.slice():t[e][n]=i}}return t}function xr(y){const t={};for(let e=0;e<y.length;e++){const n=Ni(y[e]);for(const i in n)t[i]=n[i]}return t}const gm={clone:Ni,merge:xr};var ym=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vm=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ei extends hr{constructor(t){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=ym,this.fragmentShader=vm,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ni(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}ei.prototype.isShaderMaterial=!0;class Ja extends Ut{constructor(){super();this.type="Camera",this.matrixWorldInverse=new mt,this.projectionMatrix=new mt,this.projectionMatrixInverse=new mt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Ja.prototype.isCamera=!0;class Mr extends Ja{constructor(t=50,e=1,n=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=_s*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(vs*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return _s*2*Math.atan(Math.tan(vs*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,s,r){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(vs*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,s=-.5*i;const r=this.view;if(this.view!==null&&this.view.enabled){const c=r.fullWidth,h=r.fullHeight;s+=r.offsetX*i/c,e-=r.offsetY*n/h,i*=r.width/c,n*=r.height/h}const o=this.filmOffset;o!==0&&(s+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Mr.prototype.isPerspectiveCamera=!0;const Fi=90,Ui=1;class Ka extends Ut{constructor(t,e,n){super();if(this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Mr(Fi,Ui,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new we(1,0,0)),this.add(i);const s=new Mr(Fi,Ui,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new we(-1,0,0)),this.add(s);const r=new Mr(Fi,Ui,t,e);r.layers=this.layers,r.up.set(0,0,1),r.lookAt(new we(0,1,0)),this.add(r);const o=new Mr(Fi,Ui,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new we(0,-1,0)),this.add(o);const c=new Mr(Fi,Ui,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new we(0,0,1)),this.add(c);const h=new Mr(Fi,Ui,t,e);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new we(0,0,-1)),this.add(h)}update(t,e){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,s,r,o,c,h]=this.children,p=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const a=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,r),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,c),n.texture.generateMipmaps=a,t.setRenderTarget(n,5),t.render(e,h),t.setRenderTarget(u),t.xr.enabled=p}}class Lo extends dr{constructor(t,e,n,i,s,r,o,c,h,p){t=t!==void 0?t:[],e=e!==void 0?e:hs;super(t,e,n,i,s,r,o,c,h,p);this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Lo.prototype.isCubeTexture=!0;class Ic extends Kr{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n);super(t,t,e);e=e||{},this.texture=new Lo(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Lr,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=vr,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Es(5,5,5),s=new ei({name:"CubemapFromEquirect",uniforms:Ni(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ur,blending:wn});s.uniforms.tEquirect.value=e;const r=new br(i,s),o=e.minFilter;return e.minFilter===vi&&(e.minFilter=Lr),new Ka(1,10,this).update(t,r),e.minFilter=o,r.geometry.dispose(),r.material.dispose(),this}clear(t,e,n,i){const s=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(s)}}Ic.prototype.isWebGLCubeRenderTarget=!0;const $a=new we,_m=new we,bm=new yr;class pn{constructor(t=new we(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=$a.subVectors(n,e).cross(_m.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta($a),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||bm.getNormalMatrix(t),i=this.coplanarPoint($a).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}pn.prototype.isPlane=!0;const Bi=new Qn,Co=new we;class Ro{constructor(t=new pn,e=new pn,n=new pn,i=new pn,s=new pn,r=new pn){this.planes=[t,e,n,i,s,r]}set(t,e,n,i,s,r){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(s),o[5].copy(r),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],s=n[1],r=n[2],o=n[3],c=n[4],h=n[5],p=n[6],u=n[7],a=n[8],l=n[9],d=n[10],f=n[11],m=n[12],g=n[13],_=n[14],x=n[15];return e[0].setComponents(o-i,u-c,f-a,x-m).normalize(),e[1].setComponents(o+i,u+c,f+a,x+m).normalize(),e[2].setComponents(o+s,u+h,f+l,x+g).normalize(),e[3].setComponents(o-s,u-h,f-l,x-g).normalize(),e[4].setComponents(o-r,u-p,f-d,x-_).normalize(),e[5].setComponents(o+r,u+p,f+d,x+_).normalize(),this}intersectsObject(t){const e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),Bi.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Bi)}intersectsSprite(t){return Bi.center.set(0,0,0),Bi.radius=.7071067811865476,Bi.applyMatrix4(t.matrixWorld),this.intersectsSphere(Bi)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Co.x=i.normal.x>0?t.max.x:t.min.x,Co.y=i.normal.y>0?t.max.y:t.min.y,Co.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Co)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Oc(){let y=null,t=!1,e=null,n=null;function i(s,r){e(s,r),n=y.requestAnimationFrame(i)}return{start:function(){t!==!0&&e!==null&&(n=y.requestAnimationFrame(i),t=!0)},stop:function(){y.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){y=s}}}function xm(y,t){const e=t.isWebGL2,n=new WeakMap;function i(h,p){const u=h.array,a=h.usage,l=y.createBuffer();y.bindBuffer(p,l),y.bufferData(p,u,a),h.onUploadCallback();let d=5126;return u instanceof Float32Array?d=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?h.isFloat16BufferAttribute?e?d=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):d=5123:u instanceof Int16Array?d=5122:u instanceof Uint32Array?d=5125:u instanceof Int32Array?d=5124:u instanceof Int8Array?d=5120:(u instanceof Uint8Array||u instanceof Uint8ClampedArray)&&(d=5121),{buffer:l,type:d,bytesPerElement:u.BYTES_PER_ELEMENT,version:h.version}}function s(h,p,u){const a=p.array,l=p.updateRange;y.bindBuffer(u,h),l.count===-1?y.bufferSubData(u,0,a):(e?y.bufferSubData(u,l.offset*a.BYTES_PER_ELEMENT,a,l.offset,l.count):y.bufferSubData(u,l.offset*a.BYTES_PER_ELEMENT,a.subarray(l.offset,l.offset+l.count)),l.count=-1)}function r(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);const p=n.get(h);p&&(y.deleteBuffer(p.buffer),n.delete(h))}function c(h,p){if(h.isGLBufferAttribute){const a=n.get(h);(!a||a.version<h.version)&&n.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const u=n.get(h);u===void 0?n.set(h,i(h,p)):u.version<h.version&&(s(u.buffer,h,p),u.version=h.version)}return{get:r,remove:o,update:c}}class Qa extends Yt{constructor(t=1,e=1,n=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const s=t/2,r=e/2,o=Math.floor(n),c=Math.floor(i),h=o+1,p=c+1,u=t/o,a=e/c,l=[],d=[],f=[],m=[];for(let g=0;g<p;g++){const _=g*a-r;for(let x=0;x<h;x++){const w=x*u-s;d.push(w,-_,0),f.push(0,0,1),m.push(x/o),m.push(1-g/c)}}for(let g=0;g<c;g++)for(let _=0;_<o;_++){const x=_+h*g,w=_+h*(g+1),M=_+1+h*(g+1),A=_+1+h*g;l.push(x,w,A),l.push(w,M,A)}this.setIndex(l),this.setAttribute("position",new ir(d,3)),this.setAttribute("normal",new ir(f,3)),this.setAttribute("uv",new ir(m,2))}static fromJSON(t){return new Qa(t.width,t.height,t.widthSegments,t.heightSegments)}}var wm=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Sm=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mm=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Em=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Tm=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Am=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Lm="vec3 transformed = vec3( position );",Cm=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Rm=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Pm=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Im=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Om=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Dm=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jm=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,km=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Nm=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Fm=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Um=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Bm=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Gm=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,zm=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Vm=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Hm=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Wm=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,qm=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Xm="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ym=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,Zm=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Jm=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Km=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$m=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qm=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,eg=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tg=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rg=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ng=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ig=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,sg=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,og=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ag=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lg=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ug=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,cg=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dg=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,hg=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fg=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,pg=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,mg=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gg=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yg=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,vg=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,_g=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bg=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xg=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,wg=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Sg=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,Mg=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Eg=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tg=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ag=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Lg=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Cg=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Rg=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Pg=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Ig=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Og=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Dg=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jg=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kg=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ng=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Fg=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Ug=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Bg=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Gg=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,zg=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Vg=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Hg=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Wg=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qg=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Xg=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yg=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zg=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Jg=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Kg=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,$g=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Qg=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ey=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,ty=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ry=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ny=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,iy=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sy=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,oy=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ay=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,ly=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uy=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,cy=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,dy=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,hy=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,fy=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,py=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,my=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const gy=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yy=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vy=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_y=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,by=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xy=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,wy=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Sy=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,My=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ey=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ty=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ay=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ly=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Cy=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ry=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Py=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Iy=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Oy=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dy=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,jy=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,ky=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ny=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fy=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Uy=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,By=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gy=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zy=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Vy=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hy=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wy=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,qy=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Xy=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Lt={alphamap_fragment:wm,alphamap_pars_fragment:Sm,alphatest_fragment:Mm,alphatest_pars_fragment:Em,aomap_fragment:Tm,aomap_pars_fragment:Am,begin_vertex:Lm,beginnormal_vertex:Cm,bsdfs:Rm,bumpmap_pars_fragment:Pm,clipping_planes_fragment:Im,clipping_planes_pars_fragment:Om,clipping_planes_pars_vertex:Dm,clipping_planes_vertex:jm,color_fragment:km,color_pars_fragment:Nm,color_pars_vertex:Fm,color_vertex:Um,common:Bm,cube_uv_reflection_fragment:Gm,defaultnormal_vertex:zm,displacementmap_pars_vertex:Vm,displacementmap_vertex:Hm,emissivemap_fragment:Wm,emissivemap_pars_fragment:qm,encodings_fragment:Xm,encodings_pars_fragment:Ym,envmap_fragment:Zm,envmap_common_pars_fragment:Jm,envmap_pars_fragment:Km,envmap_pars_vertex:$m,envmap_physical_pars_fragment:ug,envmap_vertex:Qm,fog_vertex:eg,fog_pars_vertex:tg,fog_fragment:rg,fog_pars_fragment:ng,gradientmap_pars_fragment:ig,lightmap_fragment:sg,lightmap_pars_fragment:og,lights_lambert_vertex:ag,lights_pars_begin:lg,lights_toon_fragment:cg,lights_toon_pars_fragment:dg,lights_phong_fragment:hg,lights_phong_pars_fragment:fg,lights_physical_fragment:pg,lights_physical_pars_fragment:mg,lights_fragment_begin:gg,lights_fragment_maps:yg,lights_fragment_end:vg,logdepthbuf_fragment:_g,logdepthbuf_pars_fragment:bg,logdepthbuf_pars_vertex:xg,logdepthbuf_vertex:wg,map_fragment:Sg,map_pars_fragment:Mg,map_particle_fragment:Eg,map_particle_pars_fragment:Tg,metalnessmap_fragment:Ag,metalnessmap_pars_fragment:Lg,morphnormal_vertex:Cg,morphtarget_pars_vertex:Rg,morphtarget_vertex:Pg,normal_fragment_begin:Ig,normal_fragment_maps:Og,normal_pars_fragment:Dg,normal_pars_vertex:jg,normal_vertex:kg,normalmap_pars_fragment:Ng,clearcoat_normal_fragment_begin:Fg,clearcoat_normal_fragment_maps:Ug,clearcoat_pars_fragment:Bg,output_fragment:Gg,packing:zg,premultiplied_alpha_fragment:Vg,project_vertex:Hg,dithering_fragment:Wg,dithering_pars_fragment:qg,roughnessmap_fragment:Xg,roughnessmap_pars_fragment:Yg,shadowmap_pars_fragment:Zg,shadowmap_pars_vertex:Jg,shadowmap_vertex:Kg,shadowmask_pars_fragment:$g,skinbase_vertex:Qg,skinning_pars_vertex:ey,skinning_vertex:ty,skinnormal_vertex:ry,specularmap_fragment:ny,specularmap_pars_fragment:iy,tonemapping_fragment:sy,tonemapping_pars_fragment:oy,transmission_fragment:ay,transmission_pars_fragment:ly,uv_pars_fragment:uy,uv_pars_vertex:cy,uv_vertex:dy,uv2_pars_fragment:hy,uv2_pars_vertex:fy,uv2_vertex:py,worldpos_vertex:my,background_vert:gy,background_frag:yy,cube_vert:vy,cube_frag:_y,depth_vert:by,depth_frag:xy,distanceRGBA_vert:wy,distanceRGBA_frag:Sy,equirect_vert:My,equirect_frag:Ey,linedashed_vert:Ty,linedashed_frag:Ay,meshbasic_vert:Ly,meshbasic_frag:Cy,meshlambert_vert:Ry,meshlambert_frag:Py,meshmatcap_vert:Iy,meshmatcap_frag:Oy,meshnormal_vert:Dy,meshnormal_frag:jy,meshphong_vert:ky,meshphong_frag:Ny,meshphysical_vert:Fy,meshphysical_frag:Uy,meshtoon_vert:By,meshtoon_frag:Gy,points_vert:zy,points_frag:Vy,shadow_vert:Hy,shadow_frag:Wy,sprite_vert:qy,sprite_frag:Xy},st={common:{diffuse:{value:new ut(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new yr},uv2Transform:{value:new yr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yr}},sprite:{diffuse:{value:new ut(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yr}}},$r={basic:{uniforms:xr([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.fog]),vertexShader:Lt.meshbasic_vert,fragmentShader:Lt.meshbasic_frag},lambert:{uniforms:xr([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.fog,st.lights,{emissive:{value:new ut(0)}}]),vertexShader:Lt.meshlambert_vert,fragmentShader:Lt.meshlambert_frag},phong:{uniforms:xr([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.fog,st.lights,{emissive:{value:new ut(0)},specular:{value:new ut(1118481)},shininess:{value:30}}]),vertexShader:Lt.meshphong_vert,fragmentShader:Lt.meshphong_frag},standard:{uniforms:xr([st.common,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.roughnessmap,st.metalnessmap,st.fog,st.lights,{emissive:{value:new ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag},toon:{uniforms:xr([st.common,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.gradientmap,st.fog,st.lights,{emissive:{value:new ut(0)}}]),vertexShader:Lt.meshtoon_vert,fragmentShader:Lt.meshtoon_frag},matcap:{uniforms:xr([st.common,st.bumpmap,st.normalmap,st.displacementmap,st.fog,{matcap:{value:null}}]),vertexShader:Lt.meshmatcap_vert,fragmentShader:Lt.meshmatcap_frag},points:{uniforms:xr([st.points,st.fog]),vertexShader:Lt.points_vert,fragmentShader:Lt.points_frag},dashed:{uniforms:xr([st.common,st.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lt.linedashed_vert,fragmentShader:Lt.linedashed_frag},depth:{uniforms:xr([st.common,st.displacementmap]),vertexShader:Lt.depth_vert,fragmentShader:Lt.depth_frag},normal:{uniforms:xr([st.common,st.bumpmap,st.normalmap,st.displacementmap,{opacity:{value:1}}]),vertexShader:Lt.meshnormal_vert,fragmentShader:Lt.meshnormal_frag},sprite:{uniforms:xr([st.sprite,st.fog]),vertexShader:Lt.sprite_vert,fragmentShader:Lt.sprite_frag},background:{uniforms:{uvTransform:{value:new yr},t2D:{value:null}},vertexShader:Lt.background_vert,fragmentShader:Lt.background_frag},cube:{uniforms:xr([st.envmap,{opacity:{value:1}}]),vertexShader:Lt.cube_vert,fragmentShader:Lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lt.equirect_vert,fragmentShader:Lt.equirect_frag},distanceRGBA:{uniforms:xr([st.common,st.displacementmap,{referencePosition:{value:new we},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lt.distanceRGBA_vert,fragmentShader:Lt.distanceRGBA_frag},shadow:{uniforms:xr([st.lights,st.fog,{color:{value:new ut(0)},opacity:{value:1}}]),vertexShader:Lt.shadow_vert,fragmentShader:Lt.shadow_frag}};$r.physical={uniforms:xr([$r.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new rt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ut(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ut(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ut(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag};function Yy(y,t,e,n,i){const s=new ut(0);let r=0,o,c,h=null,p=0,u=null;function a(d,f){let m=!1,g=f.isScene===!0?f.background:null;g&&g.isTexture&&(g=t.get(g));const _=y.xr,x=_.getSession&&_.getSession();x&&x.environmentBlendMode==="additive"&&(g=null),g===null?l(s,r):g&&g.isColor&&(l(g,1),m=!0),(y.autoClear||m)&&y.clear(y.autoClearColor,y.autoClearDepth,y.autoClearStencil),g&&(g.isCubeTexture||g.mapping===no)?(c===void 0&&(c=new br(new Es(1,1,1),new ei({name:"BackgroundCubeMaterial",uniforms:Ni($r.cube.uniforms),vertexShader:$r.cube.vertexShader,fragmentShader:$r.cube.fragmentShader,side:ur,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,M,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=g,c.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,(h!==g||p!==g.version||u!==y.toneMapping)&&(c.material.needsUpdate=!0,h=g,p=g.version,u=y.toneMapping),d.unshift(c,c.geometry,c.material,0,0,null)):g&&g.isTexture&&(o===void 0&&(o=new br(new Qa(2,2),new ei({name:"BackgroundMaterial",uniforms:Ni($r.background.uniforms),vertexShader:$r.background.vertexShader,fragmentShader:$r.background.fragmentShader,side:mi,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),o.material.uniforms.uvTransform.value.copy(g.matrix),(h!==g||p!==g.version||u!==y.toneMapping)&&(o.material.needsUpdate=!0,h=g,p=g.version,u=y.toneMapping),d.unshift(o,o.geometry,o.material,0,0,null))}function l(d,f){e.buffers.color.setClear(d.r,d.g,d.b,f,i)}return{getClearColor:function(){return s},setClearColor:function(d,f=1){s.set(d),r=f,l(s,r)},getClearAlpha:function(){return r},setClearAlpha:function(d){r=d,l(s,r)},render:a}}function Zy(y,t,e,n){const i=y.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),r=n.isWebGL2||s!==null,o={},c=f(null);let h=c;function p(k,N,q,X,G){let Q=!1;if(r){const K=d(X,q,N);h!==K&&(h=K,a(h.object)),Q=m(X,G),Q&&g(X,G)}else{const K=N.wireframe===!0;(h.geometry!==X.id||h.program!==q.id||h.wireframe!==K)&&(h.geometry=X.id,h.program=q.id,h.wireframe=K,Q=!0)}k.isInstancedMesh===!0&&(Q=!0),G!==null&&e.update(G,34963),Q&&(T(k,N,q,X),G!==null&&y.bindBuffer(34963,e.get(G).buffer))}function u(){return n.isWebGL2?y.createVertexArray():s.createVertexArrayOES()}function a(k){return n.isWebGL2?y.bindVertexArray(k):s.bindVertexArrayOES(k)}function l(k){return n.isWebGL2?y.deleteVertexArray(k):s.deleteVertexArrayOES(k)}function d(k,N,q){const X=q.wireframe===!0;let G=o[k.id];G===void 0&&(G={},o[k.id]=G);let Q=G[N.id];Q===void 0&&(Q={},G[N.id]=Q);let K=Q[X];return K===void 0&&(K=f(u()),Q[X]=K),K}function f(k){const N=[],q=[],X=[];for(let G=0;G<i;G++)N[G]=0,q[G]=0,X[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:q,attributeDivisors:X,object:k,attributes:{},index:null}}function m(k,N){const q=h.attributes,X=k.attributes;let G=0;for(const Q in X){const K=q[Q],_e=X[Q];if(K===void 0||K.attribute!==_e||K.data!==_e.data)return!0;G++}return h.attributesNum!==G||h.index!==N}function g(k,N){const q={},X=k.attributes;let G=0;for(const Q in X){const K=X[Q],_e={};_e.attribute=K,K.data&&(_e.data=K.data),q[Q]=_e,G++}h.attributes=q,h.attributesNum=G,h.index=N}function _(){const k=h.newAttributes;for(let N=0,q=k.length;N<q;N++)k[N]=0}function x(k){w(k,0)}function w(k,N){const q=h.newAttributes,X=h.enabledAttributes,G=h.attributeDivisors;q[k]=1,X[k]===0&&(y.enableVertexAttribArray(k),X[k]=1),G[k]!==N&&((n.isWebGL2?y:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,N),G[k]=N)}function M(){const k=h.newAttributes,N=h.enabledAttributes;for(let q=0,X=N.length;q<X;q++)N[q]!==k[q]&&(y.disableVertexAttribArray(q),N[q]=0)}function A(k,N,q,X,G,Q){n.isWebGL2===!0&&(q===5124||q===5125)?y.vertexAttribIPointer(k,N,q,G,Q):y.vertexAttribPointer(k,N,q,X,G,Q)}function T(k,N,q,X){if(n.isWebGL2===!1&&(k.isInstancedMesh||X.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;_();const G=X.attributes,Q=q.getAttributes(),K=N.defaultAttributeValues;for(const _e in Q){const pe=Q[_e];if(pe.location>=0){let ge=G[_e];if(ge===void 0&&(_e==="instanceMatrix"&&k.instanceMatrix&&(ge=k.instanceMatrix),_e==="instanceColor"&&k.instanceColor&&(ge=k.instanceColor)),ge!==void 0){const ce=ge.normalized,de=ge.itemSize,Ee=e.get(ge);if(Ee===void 0)continue;const C=Ee.buffer,F=Ee.type,V=Ee.bytesPerElement;if(ge.isInterleavedBufferAttribute){const ne=ge.data,re=ne.stride,se=ge.offset;if(ne&&ne.isInstancedInterleavedBuffer){for(let te=0;te<pe.locationSize;te++)w(pe.location+te,ne.meshPerAttribute);k.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let te=0;te<pe.locationSize;te++)x(pe.location+te);y.bindBuffer(34962,C);for(let te=0;te<pe.locationSize;te++)A(pe.location+te,de/pe.locationSize,F,ce,re*V,(se+de/pe.locationSize*te)*V)}else{if(ge.isInstancedBufferAttribute){for(let ne=0;ne<pe.locationSize;ne++)w(pe.location+ne,ge.meshPerAttribute);k.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let ne=0;ne<pe.locationSize;ne++)x(pe.location+ne);y.bindBuffer(34962,C);for(let ne=0;ne<pe.locationSize;ne++)A(pe.location+ne,de/pe.locationSize,F,ce,de*V,de/pe.locationSize*ne*V)}}else if(K!==void 0){const ce=K[_e];if(ce!==void 0)switch(ce.length){case 2:y.vertexAttrib2fv(pe.location,ce);break;case 3:y.vertexAttrib3fv(pe.location,ce);break;case 4:y.vertexAttrib4fv(pe.location,ce);break;default:y.vertexAttrib1fv(pe.location,ce)}}}}M()}function I(){O();for(const k in o){const N=o[k];for(const q in N){const X=N[q];for(const G in X)l(X[G].object),delete X[G];delete N[q]}delete o[k]}}function R(k){if(o[k.id]===void 0)return;const N=o[k.id];for(const q in N){const X=N[q];for(const G in X)l(X[G].object),delete X[G];delete N[q]}delete o[k.id]}function P(k){for(const N in o){const q=o[N];if(q[k.id]===void 0)continue;const X=q[k.id];for(const G in X)l(X[G].object),delete X[G];delete q[k.id]}}function O(){D(),h!==c&&(h=c,a(h.object))}function D(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:p,reset:O,resetDefaultState:D,dispose:I,releaseStatesOfGeometry:R,releaseStatesOfProgram:P,initAttributes:_,enableAttribute:x,disableUnusedAttributes:M}}function Jy(y,t,e,n){const i=n.isWebGL2;let s;function r(h){s=h}function o(h,p){y.drawArrays(s,h,p),e.update(p,s,1)}function c(h,p,u){if(u===0)return;let a,l;if(i)a=y,l="drawArraysInstanced";else if(a=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",a===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}a[l](s,h,p,u),e.update(p,s,u)}this.setMode=r,this.render=o,this.renderInstances=c}function Ky(y,t,e){let n;function i(){if(n!==void 0)return n;if(t.has("EXT_texture_filter_anisotropic")===!0){const T=t.get("EXT_texture_filter_anisotropic");n=y.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(T){if(T==="highp"){if(y.getShaderPrecisionFormat(35633,36338).precision>0&&y.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&y.getShaderPrecisionFormat(35633,36337).precision>0&&y.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const r=typeof WebGL2RenderingContext!="undefined"&&y instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&y instanceof WebGL2ComputeRenderingContext;let o=e.precision!==void 0?e.precision:"highp";const c=s(o);c!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",c,"instead."),o=c);const h=r||t.has("WEBGL_draw_buffers"),p=e.logarithmicDepthBuffer===!0,u=y.getParameter(34930),a=y.getParameter(35660),l=y.getParameter(3379),d=y.getParameter(34076),f=y.getParameter(34921),m=y.getParameter(36347),g=y.getParameter(36348),_=y.getParameter(36349),x=a>0,w=r||t.has("OES_texture_float"),M=x&&w,A=r?y.getParameter(36183):0;return{isWebGL2:r,drawBuffers:h,getMaxAnisotropy:i,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:p,maxTextures:u,maxVertexTextures:a,maxTextureSize:l,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:x,floatFragmentTextures:w,floatVertexTextures:M,maxSamples:A}}function $y(y){const t=this;let e=null,n=0,i=!1,s=!1;const r=new pn,o=new yr,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(u,a,l){const d=u.length!==0||a||n!==0||i;return i=a,e=p(u,l,0),n=u.length,d},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1,h()},this.setState=function(u,a,l){const d=u.clippingPlanes,f=u.clipIntersection,m=u.clipShadows,g=y.get(u);if(!i||d===null||d.length===0||s&&!m)s?p(null):h();else{const _=s?0:n,x=_*4;let w=g.clippingState||null;c.value=w,w=p(d,a,x,l);for(let M=0;M!==x;++M)w[M]=e[M];g.clippingState=w,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=_}};function h(){c.value!==e&&(c.value=e,c.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function p(u,a,l,d){const f=u!==null?u.length:0;let m=null;if(f!==0){if(m=c.value,d!==!0||m===null){const g=l+f*4,_=a.matrixWorldInverse;o.getNormalMatrix(_),(m===null||m.length<g)&&(m=new Float32Array(g));for(let x=0,w=l;x!==f;++x,w+=4)r.copy(u[x]).applyMatrix4(_,o),r.normal.toArray(m,w),m[w+3]=r.constant}c.value=m,c.needsUpdate=!0}return t.numPlanes=f,t.numIntersection=0,m}}function Qy(y){let t=new WeakMap;function e(r,o){return o===ga?r.mapping=hs:o===ya&&(r.mapping=fs),r}function n(r){if(r&&r.isTexture&&r.isRenderTargetTexture===!1){const o=r.mapping;if(o===ga||o===ya)if(t.has(r)){const c=t.get(r).texture;return e(c,r.mapping)}else{const c=r.image;if(c&&c.height>0){const h=y.getRenderTarget(),p=new Ic(c.height/2);return p.fromEquirectangularTexture(y,r),t.set(r,p),y.setRenderTarget(h),r.addEventListener("dispose",i),e(p.texture,r.mapping)}else return null}}return r}function i(r){const o=r.target;o.removeEventListener("dispose",i);const c=t.get(o);c!==void 0&&(t.delete(o),c.dispose())}function s(){t=new WeakMap}return{get:n,dispose:s}}class Po extends Ja{constructor(t=-1,e=1,n=1,i=-1,s=.1,r=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=s,this.far=r,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-t,r=n+t,o=i+e,c=i-e;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,r=s+h*this.view.width,o-=p*this.view.offsetY,c=o-p*this.view.height}this.projectionMatrix.makeOrthographic(s,r,o,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}Po.prototype.isOrthographicCamera=!0;class Io extends ei{constructor(t){super(t);this.type="RawShaderMaterial"}}Io.prototype.isRawShaderMaterial=!0;const Gi=4,Pn=8,Qr=Math.pow(2,Pn),Dc=[.125,.215,.35,.446,.526,.582],jc=Pn-Gi+1+Dc.length,zi=20,In={[_r]:0,[Jr]:1,[Ma]:2,[uc]:3,[cc]:4,[dc]:5,[Sa]:6},el=new Po,{_lodPlanes:Ts,_sizeLods:kc,_sigmas:Oo}=rv(),Nc=new ut;let tl=null;const ti=(1+Math.sqrt(5))/2,Vi=1/ti,Fc=[new we(1,1,1),new we(-1,1,1),new we(1,1,-1),new we(-1,1,-1),new we(0,ti,Vi),new we(0,ti,-Vi),new we(Vi,0,ti),new we(-Vi,0,ti),new we(ti,Vi,0),new we(-ti,Vi,0)];class ev{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=nv(zi),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){tl=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(t,n,i,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=Gc(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=Bc(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let t=0;t<Ts.length;t++)Ts[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(tl),t.scissorTest=!1,Do(t,0,0,t.width,t.height)}_fromTexture(t){tl=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:cr,minFilter:cr,generateMipmaps:!1,type:Sn,format:Yf,encoding:tv(t)?t.encoding:Ma,depthBuffer:!1},n=Uc(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Uc(e),n}_compileMaterial(t){const e=new br(Ts[0],t);this._renderer.compile(e,el)}_sceneToCubeUV(t,e,n,i){const s=90,r=1,o=new Mr(s,r,e,n),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,u=p.autoClear,a=p.outputEncoding,l=p.toneMapping;p.getClearColor(Nc),p.toneMapping=Xn,p.outputEncoding=_r,p.autoClear=!1;const d=new fn({name:"PMREM.Background",side:ur,depthWrite:!1,depthTest:!1}),f=new br(new Es,d);let m=!1;const g=t.background;g?g.isColor&&(d.color.copy(g),t.background=null,m=!0):(d.color.copy(Nc),m=!0);for(let _=0;_<6;_++){const x=_%3;x==0?(o.up.set(0,c[_],0),o.lookAt(h[_],0,0)):x==1?(o.up.set(0,0,c[_]),o.lookAt(0,h[_],0)):(o.up.set(0,c[_],0),o.lookAt(0,0,h[_])),Do(i,x*Qr,_>2?Qr:0,Qr,Qr),p.setRenderTarget(i),m&&p.render(f,o),p.render(t,o)}f.geometry.dispose(),f.material.dispose(),p.toneMapping=l,p.outputEncoding=a,p.autoClear=u,t.background=g}_setEncoding(t,e){this._renderer.capabilities.isWebGL2===!0&&e.format===vr&&e.type===Sn&&e.encoding===Jr?t.value=In[_r]:t.value=In[e.encoding]}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===hs||t.mapping===fs;i?this._cubemapShader==null&&(this._cubemapShader=Gc()):this._equirectShader==null&&(this._equirectShader=Bc());const s=i?this._cubemapShader:this._equirectShader,r=new br(Ts[0],s),o=s.uniforms;o.envMap.value=t,i||o.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(o.inputEncoding,t),this._setEncoding(o.outputEncoding,e.texture),Do(e,0,0,3*Qr,2*Qr),n.setRenderTarget(e),n.render(r,el)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<jc;i++){const s=Math.sqrt(Oo[i]*Oo[i]-Oo[i-1]*Oo[i-1]),r=Fc[(i-1)%Fc.length];this._blur(t,i-1,i,s,r)}e.autoClear=n}_blur(t,e,n,i,s){const r=this._pingPongRenderTarget;this._halfBlur(t,r,e,n,i,"latitudinal",s),this._halfBlur(r,t,n,n,i,"longitudinal",s)}_halfBlur(t,e,n,i,s,r,o){const c=this._renderer,h=this._blurMaterial;r!=="latitudinal"&&r!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,u=new br(Ts[i],h),a=h.uniforms,l=kc[n]-1,d=isFinite(s)?Math.PI/(2*l):2*Math.PI/(2*zi-1),f=s/d,m=isFinite(s)?1+Math.floor(p*f):zi;m>zi&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${zi}`);const g=[];let _=0;for(let A=0;A<zi;++A){const T=A/f,I=Math.exp(-T*T/2);g.push(I),A==0?_+=I:A<m&&(_+=2*I)}for(let A=0;A<g.length;A++)g[A]=g[A]/_;a.envMap.value=t.texture,a.samples.value=m,a.weights.value=g,a.latitudinal.value=r==="latitudinal",o&&(a.poleAxis.value=o),a.dTheta.value=d,a.mipInt.value=Pn-n,this._setEncoding(a.inputEncoding,t.texture),this._setEncoding(a.outputEncoding,t.texture);const x=kc[i],w=3*Math.max(0,Qr-2*x),M=(i===0?0:2*Qr)+2*x*(i>Pn-Gi?i-Pn+Gi:0);Do(e,w,M,3*x,2*x),c.setRenderTarget(e),c.render(u,el)}}function tv(y){return y===void 0||y.type!==Sn?!1:y.encoding===_r||y.encoding===Jr||y.encoding===Sa}function rv(){const y=[],t=[],e=[];let n=Pn;for(let i=0;i<jc;i++){const s=Math.pow(2,n);t.push(s);let r=1/s;i>Pn-Gi?r=Dc[i-Pn+Gi-1]:i==0&&(r=0),e.push(r);const o=1/(s-1),c=-o/2,h=1+o/2,p=[c,c,h,c,h,h,c,c,h,h,c,h],u=6,a=6,l=3,d=2,f=1,m=new Float32Array(l*a*u),g=new Float32Array(d*a*u),_=new Float32Array(f*a*u);for(let w=0;w<u;w++){const M=w%3*2/3-1,A=w>2?0:-1,T=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];m.set(T,l*a*w),g.set(p,d*a*w);const I=[w,w,w,w,w,w];_.set(I,f*a*w)}const x=new Yt;x.setAttribute("position",new nr(m,l)),x.setAttribute("uv",new nr(g,d)),x.setAttribute("faceIndex",new nr(_,f)),y.push(x),n>Gi&&n--}return{_lodPlanes:y,_sizeLods:t,_sigmas:e}}function Uc(y){const t=new Kr(3*Qr,3*Qr,y);return t.texture.mapping=no,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Do(y,t,e,n,i){y.viewport.set(t,e,n,i),y.scissor.set(t,e,n,i)}function nv(y){const t=new Float32Array(y),e=new we(0,1,0);return new Io({name:"SphericalGaussianBlur",defines:{n:y},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e},inputEncoding:{value:In[_r]},outputEncoding:{value:In[_r]}},vertexShader:rl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${nl()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:wn,depthTest:!1,depthWrite:!1})}function Bc(){const y=new rt(1,1);return new Io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:y},inputEncoding:{value:In[_r]},outputEncoding:{value:In[_r]}},vertexShader:rl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${nl()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:wn,depthTest:!1,depthWrite:!1})}function Gc(){return new Io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:In[_r]},outputEncoding:{value:In[_r]}},vertexShader:rl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${nl()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:wn,depthTest:!1,depthWrite:!1})}function rl(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function nl(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function iv(y){let t=new WeakMap,e=null;function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const c=o.mapping,h=c===ga||c===ya,p=c===hs||c===fs;if(h||p){if(t.has(o))return t.get(o).texture;{const u=o.image;if(h&&u&&u.height>0||p&&u&&i(u)){const a=y.getRenderTarget();e===null&&(e=new ev(y));const l=h?e.fromEquirectangular(o):e.fromCubemap(o);return t.set(o,l),y.setRenderTarget(a),o.addEventListener("dispose",s),l.texture}else return null}}}return o}function i(o){let c=0;const h=6;for(let p=0;p<h;p++)o[p]!==void 0&&c++;return c===h}function s(o){const c=o.target;c.removeEventListener("dispose",s);const h=t.get(c);h!==void 0&&(t.delete(c),h.dispose())}function r(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:r}}function sv(y){const t={};function e(n){if(t[n]!==void 0)return t[n];let i;switch(n){case"WEBGL_depth_texture":i=y.getExtension("WEBGL_depth_texture")||y.getExtension("MOZ_WEBGL_depth_texture")||y.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=y.getExtension("EXT_texture_filter_anisotropic")||y.getExtension("MOZ_EXT_texture_filter_anisotropic")||y.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=y.getExtension("WEBGL_compressed_texture_s3tc")||y.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||y.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=y.getExtension("WEBGL_compressed_texture_pvrtc")||y.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=y.getExtension(n)}return t[n]=i,i}return{has:function(n){return e(n)!==null},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float")},get:function(n){const i=e(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function ov(y,t,e,n){const i={},s=new WeakMap;function r(u){const a=u.target;a.index!==null&&t.remove(a.index);for(const d in a.attributes)t.remove(a.attributes[d]);a.removeEventListener("dispose",r),delete i[a.id];const l=s.get(a);l&&(t.remove(l),s.delete(a)),n.releaseStatesOfGeometry(a),a.isInstancedBufferGeometry===!0&&delete a._maxInstanceCount,e.memory.geometries--}function o(u,a){return i[a.id]===!0||(a.addEventListener("dispose",r),i[a.id]=!0,e.memory.geometries++),a}function c(u){const a=u.attributes;for(const d in a)t.update(a[d],34962);const l=u.morphAttributes;for(const d in l){const f=l[d];for(let m=0,g=f.length;m<g;m++)t.update(f[m],34962)}}function h(u){const a=[],l=u.index,d=u.attributes.position;let f=0;if(l!==null){const _=l.array;f=l.version;for(let x=0,w=_.length;x<w;x+=3){const M=_[x+0],A=_[x+1],T=_[x+2];a.push(M,A,A,T,T,M)}}else{const _=d.array;f=d.version;for(let x=0,w=_.length/3-1;x<w;x+=3){const M=x+0,A=x+1,T=x+2;a.push(M,A,A,T,T,M)}}const m=new(mc(a)>65535?Rc:Cc)(a,1);m.version=f;const g=s.get(u);g&&t.remove(g),s.set(u,m)}function p(u){const a=s.get(u);if(a){const l=u.index;l!==null&&a.version<l.version&&h(u)}else h(u);return s.get(u)}return{get:o,update:c,getWireframeAttribute:p}}function av(y,t,e,n){const i=n.isWebGL2;let s;function r(a){s=a}let o,c;function h(a){o=a.type,c=a.bytesPerElement}function p(a,l){y.drawElements(s,l,o,a*c),e.update(l,s,1)}function u(a,l,d){if(d===0)return;let f,m;if(i)f=y,m="drawElementsInstanced";else if(f=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",f===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](s,l,o,a*c,d),e.update(l,s,d)}this.setMode=r,this.setIndex=h,this.render=p,this.renderInstances=u}function lv(y){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,r,o){switch(e.calls++,r){case 4:e.triangles+=o*(s/3);break;case 1:e.lines+=o*(s/2);break;case 3:e.lines+=o*(s-1);break;case 2:e.lines+=o*s;break;case 0:e.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:i,update:n}}class il extends dr{constructor(t=null,e=1,n=1,i=1){super(null);this.image={data:t,width:e,height:n,depth:i},this.magFilter=cr,this.minFilter=cr,this.wrapR=Ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}il.prototype.isDataTexture2DArray=!0;function uv(y,t){return y[0]-t[0]}function cv(y,t){return Math.abs(t[1])-Math.abs(y[1])}function zc(y,t){let e=1;const n=t.isInterleavedBufferAttribute?t.data.array:t.array;n instanceof Int8Array?e=127:n instanceof Int16Array?e=32767:n instanceof Int32Array?e=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),y.divideScalar(e)}function dv(y,t,e){const n={},i=new Float32Array(8),s=new WeakMap,r=new we,o=[];for(let h=0;h<8;h++)o[h]=[h,0];function c(h,p,u,a){const l=h.morphTargetInfluences;if(t.isWebGL2===!0){const d=p.morphAttributes.position.length;let f=s.get(p);if(f===void 0||f.count!==d){f!==void 0&&f.texture.dispose();const _=p.morphAttributes.normal!==void 0,x=p.morphAttributes.position,w=p.morphAttributes.normal||[],M=p.attributes.position.count,A=_===!0?2:1;let T=M*A,I=1;T>t.maxTextureSize&&(I=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);const R=new Float32Array(T*I*4*d),P=new il(R,T,I,d);P.format=vr,P.type=an;const O=A*4;for(let D=0;D<d;D++){const k=x[D],N=w[D],q=T*I*4*D;for(let X=0;X<k.count;X++){r.fromBufferAttribute(k,X),k.normalized===!0&&zc(r,k);const G=X*O;R[q+G+0]=r.x,R[q+G+1]=r.y,R[q+G+2]=r.z,R[q+G+3]=0,_===!0&&(r.fromBufferAttribute(N,X),N.normalized===!0&&zc(r,N),R[q+G+4]=r.x,R[q+G+5]=r.y,R[q+G+6]=r.z,R[q+G+7]=0)}}f={count:d,texture:P,size:new rt(T,I)},s.set(p,f)}let m=0;for(let _=0;_<l.length;_++)m+=l[_];const g=p.morphTargetsRelative?1:1-m;a.getUniforms().setValue(y,"morphTargetBaseInfluence",g),a.getUniforms().setValue(y,"morphTargetInfluences",l),a.getUniforms().setValue(y,"morphTargetsTexture",f.texture,e),a.getUniforms().setValue(y,"morphTargetsTextureSize",f.size)}else{const d=l===void 0?0:l.length;let f=n[p.id];if(f===void 0||f.length!==d){f=[];for(let w=0;w<d;w++)f[w]=[w,0];n[p.id]=f}for(let w=0;w<d;w++){const M=f[w];M[0]=w,M[1]=l[w]}f.sort(cv);for(let w=0;w<8;w++)w<d&&f[w][1]?(o[w][0]=f[w][0],o[w][1]=f[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(uv);const m=p.morphAttributes.position,g=p.morphAttributes.normal;let _=0;for(let w=0;w<8;w++){const M=o[w],A=M[0],T=M[1];A!==Number.MAX_SAFE_INTEGER&&T?(m&&p.getAttribute("morphTarget"+w)!==m[A]&&p.setAttribute("morphTarget"+w,m[A]),g&&p.getAttribute("morphNormal"+w)!==g[A]&&p.setAttribute("morphNormal"+w,g[A]),i[w]=T,_+=T):(m&&p.hasAttribute("morphTarget"+w)===!0&&p.deleteAttribute("morphTarget"+w),g&&p.hasAttribute("morphNormal"+w)===!0&&p.deleteAttribute("morphNormal"+w),i[w]=0)}const x=p.morphTargetsRelative?1:1-_;a.getUniforms().setValue(y,"morphTargetBaseInfluence",x),a.getUniforms().setValue(y,"morphTargetInfluences",i)}}return{update:c}}function hv(y,t,e,n){let i=new WeakMap;function s(c){const h=n.render.frame,p=c.geometry,u=t.get(c,p);return i.get(u)!==h&&(t.update(u),i.set(u,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),e.update(c.instanceMatrix,34962),c.instanceColor!==null&&e.update(c.instanceColor,34962)),u}function r(){i=new WeakMap}function o(c){const h=c.target;h.removeEventListener("dispose",o),e.remove(h.instanceMatrix),h.instanceColor!==null&&e.remove(h.instanceColor)}return{update:s,dispose:r}}class Vc extends dr{constructor(t=null,e=1,n=1,i=1){super(null);this.image={data:t,width:e,height:n,depth:i},this.magFilter=cr,this.minFilter=cr,this.wrapR=Ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Vc.prototype.isDataTexture3D=!0;const Hc=new dr,fv=new il,pv=new Vc,Wc=new Lo,qc=[],Xc=[],Yc=new Float32Array(16),Zc=new Float32Array(9),Jc=new Float32Array(4);function Hi(y,t,e){const n=y[0];if(n<=0||n>0)return y;const i=t*e;let s=qc[i];if(s===void 0&&(s=new Float32Array(i),qc[i]=s),t!==0){n.toArray(s,0);for(let r=1,o=0;r!==t;++r)o+=e,y[r].toArray(s,o)}return s}function Er(y,t){if(y.length!==t.length)return!1;for(let e=0,n=y.length;e<n;e++)if(y[e]!==t[e])return!1;return!0}function wr(y,t){for(let e=0,n=t.length;e<n;e++)y[e]=t[e]}function Kc(y,t){let e=Xc[t];e===void 0&&(e=new Int32Array(t),Xc[t]=e);for(let n=0;n!==t;++n)e[n]=y.allocateTextureUnit();return e}function mv(y,t){const e=this.cache;e[0]!==t&&(y.uniform1f(this.addr,t),e[0]=t)}function gv(y,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(y.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Er(e,t))return;y.uniform2fv(this.addr,t),wr(e,t)}}function yv(y,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(y.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(y.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Er(e,t))return;y.uniform3fv(this.addr,t),wr(e,t)}}function vv(y,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(y.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Er(e,t))return;y.uniform4fv(this.addr,t),wr(e,t)}}function _v(y,t){const e=this.cache,n=t.elements;if(n===void 0){if(Er(e,t))return;y.uniformMatrix2fv(this.addr,!1,t),wr(e,t)}else{if(Er(e,n))return;Jc.set(n),y.uniformMatrix2fv(this.addr,!1,Jc),wr(e,n)}}function bv(y,t){const e=this.cache,n=t.elements;if(n===void 0){if(Er(e,t))return;y.uniformMatrix3fv(this.addr,!1,t),wr(e,t)}else{if(Er(e,n))return;Zc.set(n),y.uniformMatrix3fv(this.addr,!1,Zc),wr(e,n)}}function xv(y,t){const e=this.cache,n=t.elements;if(n===void 0){if(Er(e,t))return;y.uniformMatrix4fv(this.addr,!1,t),wr(e,t)}else{if(Er(e,n))return;Yc.set(n),y.uniformMatrix4fv(this.addr,!1,Yc),wr(e,n)}}function wv(y,t){const e=this.cache;e[0]!==t&&(y.uniform1i(this.addr,t),e[0]=t)}function Sv(y,t){const e=this.cache;Er(e,t)||(y.uniform2iv(this.addr,t),wr(e,t))}function Mv(y,t){const e=this.cache;Er(e,t)||(y.uniform3iv(this.addr,t),wr(e,t))}function Ev(y,t){const e=this.cache;Er(e,t)||(y.uniform4iv(this.addr,t),wr(e,t))}function Tv(y,t){const e=this.cache;e[0]!==t&&(y.uniform1ui(this.addr,t),e[0]=t)}function Av(y,t){const e=this.cache;Er(e,t)||(y.uniform2uiv(this.addr,t),wr(e,t))}function Lv(y,t){const e=this.cache;Er(e,t)||(y.uniform3uiv(this.addr,t),wr(e,t))}function Cv(y,t){const e=this.cache;Er(e,t)||(y.uniform4uiv(this.addr,t),wr(e,t))}function Rv(y,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(y.uniform1i(this.addr,i),n[0]=i),e.safeSetTexture2D(t||Hc,i)}function Pv(y,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(y.uniform1i(this.addr,i),n[0]=i),e.setTexture3D(t||pv,i)}function Iv(y,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(y.uniform1i(this.addr,i),n[0]=i),e.safeSetTextureCube(t||Wc,i)}function Ov(y,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(y.uniform1i(this.addr,i),n[0]=i),e.setTexture2DArray(t||fv,i)}function Dv(y){switch(y){case 5126:return mv;case 35664:return gv;case 35665:return yv;case 35666:return vv;case 35674:return _v;case 35675:return bv;case 35676:return xv;case 5124:case 35670:return wv;case 35667:case 35671:return Sv;case 35668:case 35672:return Mv;case 35669:case 35673:return Ev;case 5125:return Tv;case 36294:return Av;case 36295:return Lv;case 36296:return Cv;case 35678:case 36198:case 36298:case 36306:case 35682:return Rv;case 35679:case 36299:case 36307:return Pv;case 35680:case 36300:case 36308:case 36293:return Iv;case 36289:case 36303:case 36311:case 36292:return Ov}}function jv(y,t){y.uniform1fv(this.addr,t)}function kv(y,t){const e=Hi(t,this.size,2);y.uniform2fv(this.addr,e)}function Nv(y,t){const e=Hi(t,this.size,3);y.uniform3fv(this.addr,e)}function Fv(y,t){const e=Hi(t,this.size,4);y.uniform4fv(this.addr,e)}function Uv(y,t){const e=Hi(t,this.size,4);y.uniformMatrix2fv(this.addr,!1,e)}function Bv(y,t){const e=Hi(t,this.size,9);y.uniformMatrix3fv(this.addr,!1,e)}function Gv(y,t){const e=Hi(t,this.size,16);y.uniformMatrix4fv(this.addr,!1,e)}function zv(y,t){y.uniform1iv(this.addr,t)}function Vv(y,t){y.uniform2iv(this.addr,t)}function Hv(y,t){y.uniform3iv(this.addr,t)}function Wv(y,t){y.uniform4iv(this.addr,t)}function qv(y,t){y.uniform1uiv(this.addr,t)}function Xv(y,t){y.uniform2uiv(this.addr,t)}function Yv(y,t){y.uniform3uiv(this.addr,t)}function Zv(y,t){y.uniform4uiv(this.addr,t)}function Jv(y,t,e){const n=t.length,i=Kc(e,n);y.uniform1iv(this.addr,i);for(let s=0;s!==n;++s)e.safeSetTexture2D(t[s]||Hc,i[s])}function Kv(y,t,e){const n=t.length,i=Kc(e,n);y.uniform1iv(this.addr,i);for(let s=0;s!==n;++s)e.safeSetTextureCube(t[s]||Wc,i[s])}function $v(y){switch(y){case 5126:return jv;case 35664:return kv;case 35665:return Nv;case 35666:return Fv;case 35674:return Uv;case 35675:return Bv;case 35676:return Gv;case 5124:case 35670:return zv;case 35667:case 35671:return Vv;case 35668:case 35672:return Hv;case 35669:case 35673:return Wv;case 5125:return qv;case 36294:return Xv;case 36295:return Yv;case 36296:return Zv;case 35678:case 36198:case 36298:case 36306:case 35682:return Jv;case 35680:case 36300:case 36308:case 36293:return Kv}}function Qv(y,t,e){this.id=y,this.addr=e,this.cache=[],this.setValue=Dv(t.type)}function $c(y,t,e){this.id=y,this.addr=e,this.cache=[],this.size=t.size,this.setValue=$v(t.type)}$c.prototype.updateCache=function(y){const t=this.cache;y instanceof Float32Array&&t.length!==y.length&&(this.cache=new Float32Array(y.length)),wr(t,y)};function Qc(y){this.id=y,this.seq=[],this.map={}}Qc.prototype.setValue=function(y,t,e){const n=this.seq;for(let i=0,s=n.length;i!==s;++i){const r=n[i];r.setValue(y,t[r.id],e)}};const sl=/(\w+)(\])?(\[|\.)?/g;function ed(y,t){y.seq.push(t),y.map[t.id]=t}function e0(y,t,e){const n=y.name,i=n.length;for(sl.lastIndex=0;;){const s=sl.exec(n),r=sl.lastIndex;let o=s[1];const c=s[2]==="]",h=s[3];if(c&&(o=o|0),h===void 0||h==="["&&r+2===i){ed(e,h===void 0?new Qv(o,y,t):new $c(o,y,t));break}else{let u=e.map[o];u===void 0&&(u=new Qc(o),ed(e,u)),e=u}}}function On(y,t){this.seq=[],this.map={};const e=y.getProgramParameter(t,35718);for(let n=0;n<e;++n){const i=y.getActiveUniform(t,n),s=y.getUniformLocation(t,i.name);e0(i,s,this)}}On.prototype.setValue=function(y,t,e,n){const i=this.map[t];i!==void 0&&i.setValue(y,e,n)};On.prototype.setOptional=function(y,t,e){const n=t[e];n!==void 0&&this.setValue(y,e,n)};On.upload=function(y,t,e,n){for(let i=0,s=t.length;i!==s;++i){const r=t[i],o=e[r.id];o.needsUpdate!==!1&&r.setValue(y,o.value,n)}};On.seqWithValue=function(y,t){const e=[];for(let n=0,i=y.length;n!==i;++n){const s=y[n];s.id in t&&e.push(s)}return e};function td(y,t,e){const n=y.createShader(t);return y.shaderSource(n,e),y.compileShader(n),n}let t0=0;function r0(y){const t=y.split(`
`);for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function rd(y){switch(y){case _r:return["Linear","( value )"];case Jr:return["sRGB","( value )"];case Ma:return["RGBE","( value )"];case uc:return["RGBM","( value, 7.0 )"];case cc:return["RGBM","( value, 16.0 )"];case dc:return["RGBD","( value, 256.0 )"];case Sa:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case kp:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",y),["Linear","( value )"]}}function nd(y,t,e){const n=y.getShaderParameter(t,35713),i=y.getShaderInfoLog(t).trim();return n&&i===""?"":e.toUpperCase()+`

`+i+`

`+r0(y.getShaderSource(t))}function ri(y,t){const e=rd(t);return"vec4 "+y+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function n0(y,t){const e=rd(t);return"vec4 "+y+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function i0(y,t){let e;switch(t){case Df:e="Linear";break;case jf:e="Reinhard";break;case kf:e="OptimizedCineon";break;case Nf:e="ACESFilmic";break;case Ff:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+y+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function s0(y){return[y.extensionDerivatives||y.envMapCubeUV||y.bumpMap||y.tangentSpaceNormalMap||y.clearcoatNormalMap||y.flatShading||y.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(y.extensionFragDepth||y.logarithmicDepthBuffer)&&y.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",y.extensionDrawBuffers&&y.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(y.extensionShaderTextureLOD||y.envMap||y.transmission)&&y.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(As).join(`
`)}function o0(y){const t=[];for(const e in y){const n=y[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function a0(y,t){const e={},n=y.getProgramParameter(t,35721);for(let i=0;i<n;i++){const s=y.getActiveAttrib(t,i),r=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),e[r]={type:s.type,location:y.getAttribLocation(t,r),locationSize:o}}return e}function As(y){return y!==""}function id(y,t){return y.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function sd(y,t){return y.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const l0=/^[ \t]*#include +<([\w\d./]+)>/gm;function ol(y){return y.replace(l0,u0)}function u0(y,t){const e=Lt[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return ol(e)}const c0=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,d0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function od(y){return y.replace(d0,ad).replace(c0,h0)}function h0(y,t,e,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ad(y,t,e,n)}function ad(y,t,e,n){let i="";for(let s=parseInt(t);s<parseInt(e);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function ld(y){let t="precision "+y.precision+` float;
precision `+y.precision+" int;";return y.precision==="highp"?t+=`
#define HIGH_PRECISION`:y.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:y.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function f0(y){let t="SHADOWMAP_TYPE_BASIC";return y.shadowMapType===Bu?t="SHADOWMAP_TYPE_PCF":y.shadowMapType===hf?t="SHADOWMAP_TYPE_PCF_SOFT":y.shadowMapType===cs&&(t="SHADOWMAP_TYPE_VSM"),t}function p0(y){let t="ENVMAP_TYPE_CUBE";if(y.envMap)switch(y.envMapMode){case hs:case fs:t="ENVMAP_TYPE_CUBE";break;case no:case va:t="ENVMAP_TYPE_CUBE_UV";break}return t}function m0(y){let t="ENVMAP_MODE_REFLECTION";if(y.envMap)switch(y.envMapMode){case fs:case va:t="ENVMAP_MODE_REFRACTION";break}return t}function g0(y){let t="ENVMAP_BLENDING_NONE";if(y.envMap)switch(y.combine){case ro:t="ENVMAP_BLENDING_MULTIPLY";break;case If:t="ENVMAP_BLENDING_MIX";break;case Of:t="ENVMAP_BLENDING_ADD";break}return t}function y0(y,t,e,n){const i=y.getContext(),s=e.defines;let r=e.vertexShader,o=e.fragmentShader;const c=f0(e),h=p0(e),p=m0(e),u=g0(e),a=y.gammaFactor>0?y.gammaFactor:1,l=e.isWebGL2?"":s0(e),d=o0(s),f=i.createProgram();let m,g,_=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(m=[d].filter(As).join(`
`),m.length>0&&(m+=`
`),g=[l,d].filter(As).join(`
`),g.length>0&&(g+=`
`)):(m=[ld(e),"#define SHADER_NAME "+e.shaderName,d,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+a,"#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphTargets&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargets&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(As).join(`
`),g=[l,ld(e),"#define SHADER_NAME "+e.shaderName,d,"#define GAMMA_FACTOR "+a,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+h:"",e.envMap?"#define "+p:"",e.envMap?"#define "+u:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Xn?"#define TONE_MAPPING":"",e.toneMapping!==Xn?Lt.tonemapping_pars_fragment:"",e.toneMapping!==Xn?i0("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.format===Yn?"#define OPAQUE":"",Lt.encodings_pars_fragment,e.map?ri("mapTexelToLinear",e.mapEncoding):"",e.matcap?ri("matcapTexelToLinear",e.matcapEncoding):"",e.envMap?ri("envMapTexelToLinear",e.envMapEncoding):"",e.emissiveMap?ri("emissiveMapTexelToLinear",e.emissiveMapEncoding):"",e.specularColorMap?ri("specularColorMapTexelToLinear",e.specularColorMapEncoding):"",e.sheenColorMap?ri("sheenColorMapTexelToLinear",e.sheenColorMapEncoding):"",e.lightMap?ri("lightMapTexelToLinear",e.lightMapEncoding):"",n0("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(As).join(`
`)),r=ol(r),r=id(r,e),r=sd(r,e),o=ol(o),o=id(o,e),o=sd(o,e),r=od(r),o=od(o),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",e.glslVersion===hc?"":"out highp vec4 pc_fragColor;",e.glslVersion===hc?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=_+m+r,w=_+g+o,M=td(i,35633,x),A=td(i,35632,w);if(i.attachShader(f,M),i.attachShader(f,A),e.index0AttributeName!==void 0?i.bindAttribLocation(f,0,e.index0AttributeName):e.morphTargets===!0&&i.bindAttribLocation(f,0,"position"),i.linkProgram(f),y.debug.checkShaderErrors){const R=i.getProgramInfoLog(f).trim(),P=i.getShaderInfoLog(M).trim(),O=i.getShaderInfoLog(A).trim();let D=!0,k=!0;if(i.getProgramParameter(f,35714)===!1){D=!1;const N=nd(i,M,"vertex"),q=nd(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(f,35715)+`

Program Info Log: `+R+`
`+N+`
`+q)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(P===""||O==="")&&(k=!1);k&&(this.diagnostics={runnable:D,programLog:R,vertexShader:{log:P,prefix:m},fragmentShader:{log:O,prefix:g}})}i.deleteShader(M),i.deleteShader(A);let T;this.getUniforms=function(){return T===void 0&&(T=new On(i,f)),T};let I;return this.getAttributes=function(){return I===void 0&&(I=a0(i,f)),I},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(f),this.program=void 0},this.name=e.shaderName,this.id=t0++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=M,this.fragmentShader=A,this}function v0(y,t,e,n,i,s,r){const o=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,p=i.floatVertexTextures,u=i.maxVertexUniforms,a=i.vertexTextures;let l=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function m(T){const R=T.skeleton.bones;if(p)return 1024;{const O=Math.floor((u-20)/4),D=Math.min(O,R.length);return D<R.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+R.length+" bones. This GPU supports "+D+"."),0):D}}function g(T){let I;return T&&T.isTexture?I=T.encoding:T&&T.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),I=T.texture.encoding):I=_r,c&&T&&T.isTexture&&T.format===vr&&T.type===Sn&&T.encoding===Jr&&(I=_r),I}function _(T,I,R,P,O){const D=P.fog,k=T.isMeshStandardMaterial?P.environment:null,N=(T.isMeshStandardMaterial?e:t).get(T.envMap||k),q=d[T.type],X=O.isSkinnedMesh?m(O):0;T.precision!==null&&(l=i.getMaxPrecision(T.precision),l!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",l,"instead."));let G,Q;if(q){const ce=$r[q];G=ce.vertexShader,Q=ce.fragmentShader}else G=T.vertexShader,Q=T.fragmentShader;const K=y.getRenderTarget(),_e=T.alphaTest>0,pe=T.clearcoat>0;return{isWebGL2:c,shaderID:q,shaderName:T.type,vertexShader:G,fragmentShader:Q,defines:T.defines,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:l,instancing:O.isInstancedMesh===!0,instancingColor:O.isInstancedMesh===!0&&O.instanceColor!==null,supportsVertexTextures:a,outputEncoding:K!==null?g(K.texture):y.outputEncoding,map:!!T.map,mapEncoding:g(T.map),matcap:!!T.matcap,matcapEncoding:g(T.matcap),envMap:!!N,envMapMode:N&&N.mapping,envMapEncoding:g(N),envMapCubeUV:!!N&&(N.mapping===no||N.mapping===va),lightMap:!!T.lightMap,lightMapEncoding:g(T.lightMap),aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,emissiveMapEncoding:g(T.emissiveMap),bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===Up,tangentSpaceNormalMap:T.normalMapType===Zn,clearcoat:pe,clearcoatMap:pe&&!!T.clearcoatMap,clearcoatRoughnessMap:pe&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:pe&&!!T.clearcoatNormalMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,specularColorMapEncoding:g(T.specularColorMap),alphaMap:!!T.alphaMap,alphaTest:_e,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenColorMapEncoding:g(T.sheenColorMap),sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!O.geometry&&!!O.geometry.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!O.geometry&&!!O.geometry.attributes.color&&O.geometry.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||T.sheenRoughnessMap,uvsVertexOnly:!(!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatNormalMap||T.transmission>0||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheen>0||!!T.sheenColorMap||!!T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!D,useFog:T.fog,fogExp2:D&&D.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:h,skinning:O.isSkinnedMesh===!0&&X>0,maxBones:X,useVertexTexture:p,morphTargets:!!O.geometry&&!!O.geometry.morphAttributes.position,morphNormals:!!O.geometry&&!!O.geometry.morphAttributes.normal,morphTargetsCount:!!O.geometry&&!!O.geometry.morphAttributes.position?O.geometry.morphAttributes.position.length:0,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,format:T.format,dithering:T.dithering,shadowMapEnabled:y.shadowMap.enabled&&R.length>0,shadowMapType:y.shadowMap.type,toneMapping:T.toneMapped?y.toneMapping:Xn,physicallyCorrectLights:y.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===qn,flipSided:T.side===ur,depthPacking:T.depthPacking!==void 0?T.depthPacking:!1,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function x(T){const I=[];if(T.shaderID?I.push(T.shaderID):(I.push(gc(T.fragmentShader)),I.push(gc(T.vertexShader))),T.defines!==void 0)for(const R in T.defines)I.push(R),I.push(T.defines[R]);if(T.isRawShaderMaterial===!1){for(let R=0;R<f.length;R++)I.push(T[f[R]]);I.push(y.outputEncoding),I.push(y.gammaFactor)}return I.push(T.customProgramCacheKey),I.join()}function w(T){const I=d[T.type];let R;if(I){const P=$r[I];R=gm.clone(P.uniforms)}else R=T.uniforms;return R}function M(T,I){let R;for(let P=0,O=o.length;P<O;P++){const D=o[P];if(D.cacheKey===I){R=D,++R.usedTimes;break}}return R===void 0&&(R=new y0(y,I,T,s),o.push(R)),R}function A(T){if(--T.usedTimes==0){const I=o.indexOf(T);o[I]=o[o.length-1],o.pop(),T.destroy()}}return{getParameters:_,getProgramCacheKey:x,getUniforms:w,acquireProgram:M,releaseProgram:A,programs:o}}function _0(){let y=new WeakMap;function t(s){let r=y.get(s);return r===void 0&&(r={},y.set(s,r)),r}function e(s){y.delete(s)}function n(s,r,o){y.get(s)[r]=o}function i(){y=new WeakMap}return{get:t,remove:e,update:n,dispose:i}}function b0(y,t){return y.groupOrder!==t.groupOrder?y.groupOrder-t.groupOrder:y.renderOrder!==t.renderOrder?y.renderOrder-t.renderOrder:y.program!==t.program?y.program.id-t.program.id:y.material.id!==t.material.id?y.material.id-t.material.id:y.z!==t.z?y.z-t.z:y.id-t.id}function ud(y,t){return y.groupOrder!==t.groupOrder?y.groupOrder-t.groupOrder:y.renderOrder!==t.renderOrder?y.renderOrder-t.renderOrder:y.z!==t.z?t.z-y.z:y.id-t.id}function cd(y){const t=[];let e=0;const n=[],i=[],s=[],r={id:-1};function o(){e=0,n.length=0,i.length=0,s.length=0}function c(l,d,f,m,g,_){let x=t[e];const w=y.get(f);return x===void 0?(x={id:l.id,object:l,geometry:d,material:f,program:w.program||r,groupOrder:m,renderOrder:l.renderOrder,z:g,group:_},t[e]=x):(x.id=l.id,x.object=l,x.geometry=d,x.material=f,x.program=w.program||r,x.groupOrder=m,x.renderOrder=l.renderOrder,x.z=g,x.group=_),e++,x}function h(l,d,f,m,g,_){const x=c(l,d,f,m,g,_);f.transmission>0?i.push(x):f.transparent===!0?s.push(x):n.push(x)}function p(l,d,f,m,g,_){const x=c(l,d,f,m,g,_);f.transmission>0?i.unshift(x):f.transparent===!0?s.unshift(x):n.unshift(x)}function u(l,d){n.length>1&&n.sort(l||b0),i.length>1&&i.sort(d||ud),s.length>1&&s.sort(d||ud)}function a(){for(let l=e,d=t.length;l<d;l++){const f=t[l];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.program=null,f.group=null}}return{opaque:n,transmissive:i,transparent:s,init:o,push:h,unshift:p,finish:a,sort:u}}function x0(y){let t=new WeakMap;function e(i,s){let r;return t.has(i)===!1?(r=new cd(y),t.set(i,[r])):s>=t.get(i).length?(r=new cd(y),t.get(i).push(r)):r=t.get(i)[s],r}function n(){t=new WeakMap}return{get:e,dispose:n}}function w0(){const y={};return{get:function(t){if(y[t.id]!==void 0)return y[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new we,color:new ut};break;case"SpotLight":e={position:new we,direction:new we,color:new ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new we,color:new ut,distance:0,decay:0};break;case"HemisphereLight":e={direction:new we,skyColor:new ut,groundColor:new ut};break;case"RectAreaLight":e={color:new ut,position:new we,halfWidth:new we,halfHeight:new we};break}return y[t.id]=e,e}}}function S0(){const y={};return{get:function(t){if(y[t.id]!==void 0)return y[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return y[t.id]=e,e}}}let M0=0;function E0(y,t){return(t.castShadow?1:0)-(y.castShadow?1:0)}function T0(y,t){const e=new w0,n=S0(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let p=0;p<9;p++)i.probe.push(new we);const s=new we,r=new mt,o=new mt;function c(p,u){let a=0,l=0,d=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let f=0,m=0,g=0,_=0,x=0,w=0,M=0,A=0;p.sort(E0);const T=u!==!0?Math.PI:1;for(let R=0,P=p.length;R<P;R++){const O=p[R],D=O.color,k=O.intensity,N=O.distance,q=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)a+=D.r*k*T,l+=D.g*k*T,d+=D.b*k*T;else if(O.isLightProbe)for(let X=0;X<9;X++)i.probe[X].addScaledVector(O.sh.coefficients[X],k);else if(O.isDirectionalLight){const X=e.get(O);if(X.color.copy(O.color).multiplyScalar(O.intensity*T),O.castShadow){const G=O.shadow,Q=n.get(O);Q.shadowBias=G.bias,Q.shadowNormalBias=G.normalBias,Q.shadowRadius=G.radius,Q.shadowMapSize=G.mapSize,i.directionalShadow[f]=Q,i.directionalShadowMap[f]=q,i.directionalShadowMatrix[f]=O.shadow.matrix,w++}i.directional[f]=X,f++}else if(O.isSpotLight){const X=e.get(O);if(X.position.setFromMatrixPosition(O.matrixWorld),X.color.copy(D).multiplyScalar(k*T),X.distance=N,X.coneCos=Math.cos(O.angle),X.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),X.decay=O.decay,O.castShadow){const G=O.shadow,Q=n.get(O);Q.shadowBias=G.bias,Q.shadowNormalBias=G.normalBias,Q.shadowRadius=G.radius,Q.shadowMapSize=G.mapSize,i.spotShadow[g]=Q,i.spotShadowMap[g]=q,i.spotShadowMatrix[g]=O.shadow.matrix,A++}i.spot[g]=X,g++}else if(O.isRectAreaLight){const X=e.get(O);X.color.copy(D).multiplyScalar(k),X.halfWidth.set(O.width*.5,0,0),X.halfHeight.set(0,O.height*.5,0),i.rectArea[_]=X,_++}else if(O.isPointLight){const X=e.get(O);if(X.color.copy(O.color).multiplyScalar(O.intensity*T),X.distance=O.distance,X.decay=O.decay,O.castShadow){const G=O.shadow,Q=n.get(O);Q.shadowBias=G.bias,Q.shadowNormalBias=G.normalBias,Q.shadowRadius=G.radius,Q.shadowMapSize=G.mapSize,Q.shadowCameraNear=G.camera.near,Q.shadowCameraFar=G.camera.far,i.pointShadow[m]=Q,i.pointShadowMap[m]=q,i.pointShadowMatrix[m]=O.shadow.matrix,M++}i.point[m]=X,m++}else if(O.isHemisphereLight){const X=e.get(O);X.skyColor.copy(O.color).multiplyScalar(k*T),X.groundColor.copy(O.groundColor).multiplyScalar(k*T),i.hemi[x]=X,x++}}_>0&&(t.isWebGL2||y.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=st.LTC_FLOAT_1,i.rectAreaLTC2=st.LTC_FLOAT_2):y.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=st.LTC_HALF_1,i.rectAreaLTC2=st.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=d;const I=i.hash;(I.directionalLength!==f||I.pointLength!==m||I.spotLength!==g||I.rectAreaLength!==_||I.hemiLength!==x||I.numDirectionalShadows!==w||I.numPointShadows!==M||I.numSpotShadows!==A)&&(i.directional.length=f,i.spot.length=g,i.rectArea.length=_,i.point.length=m,i.hemi.length=x,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=M,i.spotShadowMatrix.length=A,I.directionalLength=f,I.pointLength=m,I.spotLength=g,I.rectAreaLength=_,I.hemiLength=x,I.numDirectionalShadows=w,I.numPointShadows=M,I.numSpotShadows=A,i.version=M0++)}function h(p,u){let a=0,l=0,d=0,f=0,m=0;const g=u.matrixWorldInverse;for(let _=0,x=p.length;_<x;_++){const w=p[_];if(w.isDirectionalLight){const M=i.directional[a];M.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),a++}else if(w.isSpotLight){const M=i.spot[d];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(g),M.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),d++}else if(w.isRectAreaLight){const M=i.rectArea[f];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(g),o.identity(),r.copy(w.matrixWorld),r.premultiply(g),o.extractRotation(r),M.halfWidth.set(w.width*.5,0,0),M.halfHeight.set(0,w.height*.5,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),f++}else if(w.isPointLight){const M=i.point[l];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(g),l++}else if(w.isHemisphereLight){const M=i.hemi[m];M.direction.setFromMatrixPosition(w.matrixWorld),M.direction.transformDirection(g),M.direction.normalize(),m++}}}return{setup:c,setupView:h,state:i}}function dd(y,t){const e=new T0(y,t),n=[],i=[];function s(){n.length=0,i.length=0}function r(u){n.push(u)}function o(u){i.push(u)}function c(u){e.setup(n,u)}function h(u){e.setupView(n,u)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:e},setupLights:c,setupLightsView:h,pushLight:r,pushShadow:o}}function A0(y,t){let e=new WeakMap;function n(s,r=0){let o;return e.has(s)===!1?(o=new dd(y,t),e.set(s,[o])):r>=e.get(s).length?(o=new dd(y,t),e.get(s).push(o)):o=e.get(s)[r],o}function i(){e=new WeakMap}return{get:n,dispose:i}}class hd extends hr{constructor(t){super();this.type="MeshDepthMaterial",this.depthPacking=Np,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}hd.prototype.isMeshDepthMaterial=!0;class fd extends hr{constructor(t){super();this.type="MeshDistanceMaterial",this.referencePosition=new we,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}fd.prototype.isMeshDistanceMaterial=!0;const L0=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,C0=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function pd(y,t,e){let n=new Ro;const i=new rt,s=new rt,r=new Wt,o=new hd({depthPacking:Fp}),c=new fd,h={},p=e.maxTextureSize,u={0:ur,1:mi,2:qn},a=new ei({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:L0,fragmentShader:C0}),l=a.clone();l.defines.HORIZONTAL_PASS=1;const d=new Yt;d.setAttribute("position",new nr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new br(d,a),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bu,this.render=function(w,M,A){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||w.length===0)return;const T=y.getRenderTarget(),I=y.getActiveCubeFace(),R=y.getActiveMipmapLevel(),P=y.state;P.setBlending(wn),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let O=0,D=w.length;O<D;O++){const k=w[O],N=k.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",k,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;i.copy(N.mapSize);const q=N.getFrameExtents();if(i.multiply(q),s.copy(N.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(s.x=Math.floor(p/q.x),i.x=s.x*q.x,N.mapSize.x=s.x),i.y>p&&(s.y=Math.floor(p/q.y),i.y=s.y*q.y,N.mapSize.y=s.y)),N.map===null&&!N.isPointLightShadow&&this.type===cs){const G={minFilter:Lr,magFilter:Lr,format:vr};N.map=new Kr(i.x,i.y,G),N.map.texture.name=k.name+".shadowMap",N.mapPass=new Kr(i.x,i.y,G),N.camera.updateProjectionMatrix()}if(N.map===null){const G={minFilter:cr,magFilter:cr,format:vr};N.map=new Kr(i.x,i.y,G),N.map.texture.name=k.name+".shadowMap",N.camera.updateProjectionMatrix()}y.setRenderTarget(N.map),y.clear();const X=N.getViewportCount();for(let G=0;G<X;G++){const Q=N.getViewport(G);r.set(s.x*Q.x,s.y*Q.y,s.x*Q.z,s.y*Q.w),P.viewport(r),N.updateMatrices(k,G),n=N.getFrustum(),x(M,A,N.camera,k,this.type)}!N.isPointLightShadow&&this.type===cs&&g(N,A),N.needsUpdate=!1}m.needsUpdate=!1,y.setRenderTarget(T,I,R)};function g(w,M){const A=t.update(f);a.defines.VSM_SAMPLES!==w.blurSamples&&(a.defines.VSM_SAMPLES=w.blurSamples,l.defines.VSM_SAMPLES=w.blurSamples,a.needsUpdate=!0,l.needsUpdate=!0),a.uniforms.shadow_pass.value=w.map.texture,a.uniforms.resolution.value=w.mapSize,a.uniforms.radius.value=w.radius,y.setRenderTarget(w.mapPass),y.clear(),y.renderBufferDirect(M,null,A,a,f,null),l.uniforms.shadow_pass.value=w.mapPass.texture,l.uniforms.resolution.value=w.mapSize,l.uniforms.radius.value=w.radius,y.setRenderTarget(w.map),y.clear(),y.renderBufferDirect(M,null,A,l,f,null)}function _(w,M,A,T,I,R,P){let O=null;const D=T.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(D!==void 0?O=D:O=T.isPointLight===!0?c:o,y.localClippingEnabled&&A.clipShadows===!0&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){const k=O.uuid,N=A.uuid;let q=h[k];q===void 0&&(q={},h[k]=q);let X=q[N];X===void 0&&(X=O.clone(),q[N]=X),O=X}return O.visible=A.visible,O.wireframe=A.wireframe,P===cs?O.side=A.shadowSide!==null?A.shadowSide:A.side:O.side=A.shadowSide!==null?A.shadowSide:u[A.side],O.alphaMap=A.alphaMap,O.alphaTest=A.alphaTest,O.clipShadows=A.clipShadows,O.clippingPlanes=A.clippingPlanes,O.clipIntersection=A.clipIntersection,O.displacementMap=A.displacementMap,O.displacementScale=A.displacementScale,O.displacementBias=A.displacementBias,O.wireframeLinewidth=A.wireframeLinewidth,O.linewidth=A.linewidth,T.isPointLight===!0&&O.isMeshDistanceMaterial===!0&&(O.referencePosition.setFromMatrixPosition(T.matrixWorld),O.nearDistance=I,O.farDistance=R),O}function x(w,M,A,T,I){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&I===cs)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,w.matrixWorld);const O=t.update(w),D=w.material;if(Array.isArray(D)){const k=O.groups;for(let N=0,q=k.length;N<q;N++){const X=k[N],G=D[X.materialIndex];if(G&&G.visible){const Q=_(w,O,G,T,A.near,A.far,I);y.renderBufferDirect(A,null,O,Q,w,X)}}}else if(D.visible){const k=_(w,O,D,T,A.near,A.far,I);y.renderBufferDirect(A,null,O,k,w,null)}}const P=w.children;for(let O=0,D=P.length;O<D;O++)x(P[O],M,A,T,I)}}function R0(y,t,e){const n=e.isWebGL2;function i(){let ae=!1;const De=new Wt;let ie=null;const Fe=new Wt(0,0,0,0);return{setMask:function(Ce){ie!==Ce&&!ae&&(y.colorMask(Ce,Ce,Ce,Ce),ie=Ce)},setLocked:function(Ce){ae=Ce},setClear:function(Ce,z,Z,H,J){J===!0&&(Ce*=H,z*=H,Z*=H),De.set(Ce,z,Z,H),Fe.equals(De)===!1&&(y.clearColor(Ce,z,Z,H),Fe.copy(De))},reset:function(){ae=!1,ie=null,Fe.set(-1,0,0,0)}}}function s(){let ae=!1,De=null,ie=null,Fe=null;return{setTest:function(Ce){Ce?de(2929):Ee(2929)},setMask:function(Ce){De!==Ce&&!ae&&(y.depthMask(Ce),De=Ce)},setFunc:function(Ce){if(ie!==Ce){if(Ce)switch(Ce){case Ef:y.depthFunc(512);break;case Tf:y.depthFunc(519);break;case Af:y.depthFunc(513);break;case ma:y.depthFunc(515);break;case Lf:y.depthFunc(514);break;case Cf:y.depthFunc(518);break;case Rf:y.depthFunc(516);break;case Pf:y.depthFunc(517);break;default:y.depthFunc(515)}else y.depthFunc(515);ie=Ce}},setLocked:function(Ce){ae=Ce},setClear:function(Ce){Fe!==Ce&&(y.clearDepth(Ce),Fe=Ce)},reset:function(){ae=!1,De=null,ie=null,Fe=null}}}function r(){let ae=!1,De=null,ie=null,Fe=null,Ce=null,z=null,Z=null,H=null,J=null;return{setTest:function(he){ae||(he?de(2960):Ee(2960))},setMask:function(he){De!==he&&!ae&&(y.stencilMask(he),De=he)},setFunc:function(he,Te,Ie){(ie!==he||Fe!==Te||Ce!==Ie)&&(y.stencilFunc(he,Te,Ie),ie=he,Fe=Te,Ce=Ie)},setOp:function(he,Te,Ie){(z!==he||Z!==Te||H!==Ie)&&(y.stencilOp(he,Te,Ie),z=he,Z=Te,H=Ie)},setLocked:function(he){ae=he},setClear:function(he){J!==he&&(y.clearStencil(he),J=he)},reset:function(){ae=!1,De=null,ie=null,Fe=null,Ce=null,z=null,Z=null,H=null,J=null}}}const o=new i,c=new s,h=new r;let p={},u=null,a={},l=null,d=!1,f=null,m=null,g=null,_=null,x=null,w=null,M=null,A=!1,T=null,I=null,R=null,P=null,O=null;const D=y.getParameter(35661);let k=!1,N=0;const q=y.getParameter(7938);q.indexOf("WebGL")!==-1?(N=parseFloat(/^WebGL (\d)/.exec(q)[1]),k=N>=1):q.indexOf("OpenGL ES")!==-1&&(N=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),k=N>=2);let X=null,G={};const Q=y.getParameter(3088),K=y.getParameter(2978),_e=new Wt().fromArray(Q),pe=new Wt().fromArray(K);function ge(ae,De,ie){const Fe=new Uint8Array(4),Ce=y.createTexture();y.bindTexture(ae,Ce),y.texParameteri(ae,10241,9728),y.texParameteri(ae,10240,9728);for(let z=0;z<ie;z++)y.texImage2D(De+z,0,6408,1,1,0,6408,5121,Fe);return Ce}const ce={};ce[3553]=ge(3553,3553,1),ce[34067]=ge(34067,34069,6),o.setClear(0,0,0,1),c.setClear(1),h.setClear(0),de(2929),c.setFunc(ma),be(!1),$(Uu),de(2884),se(wn);function de(ae){p[ae]!==!0&&(y.enable(ae),p[ae]=!0)}function Ee(ae){p[ae]!==!1&&(y.disable(ae),p[ae]=!1)}function C(ae){ae!==u&&(y.bindFramebuffer(36160,ae),u=ae)}function F(ae,De){return De===null&&u!==null&&(De=u),a[ae]!==De?(y.bindFramebuffer(ae,De),a[ae]=De,n&&(ae===36009&&(a[36160]=De),ae===36160&&(a[36009]=De)),!0):!1}function V(ae){return l!==ae?(y.useProgram(ae),l=ae,!0):!1}const ne={[gi]:32774,[pf]:32778,[mf]:32779};if(n)ne[Wu]=32775,ne[qu]=32776;else{const ae=t.get("EXT_blend_minmax");ae!==null&&(ne[Wu]=ae.MIN_EXT,ne[qu]=ae.MAX_EXT)}const re={[gf]:0,[yf]:1,[vf]:768,[Xu]:770,[Mf]:776,[wf]:774,[bf]:772,[_f]:769,[Yu]:771,[Sf]:775,[xf]:773};function se(ae,De,ie,Fe,Ce,z,Z,H){if(ae===wn){d===!0&&(Ee(3042),d=!1);return}if(d===!1&&(de(3042),d=!0),ae!==ff){if(ae!==f||H!==A){if((m!==gi||x!==gi)&&(y.blendEquation(32774),m=gi,x=gi),H)switch(ae){case ds:y.blendFuncSeparate(1,771,1,771);break;case zu:y.blendFunc(1,1);break;case Vu:y.blendFuncSeparate(0,0,769,771);break;case Hu:y.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case ds:y.blendFuncSeparate(770,771,1,771);break;case zu:y.blendFunc(770,1);break;case Vu:y.blendFunc(0,769);break;case Hu:y.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}g=null,_=null,w=null,M=null,f=ae,A=H}return}Ce=Ce||De,z=z||ie,Z=Z||Fe,(De!==m||Ce!==x)&&(y.blendEquationSeparate(ne[De],ne[Ce]),m=De,x=Ce),(ie!==g||Fe!==_||z!==w||Z!==M)&&(y.blendFuncSeparate(re[ie],re[Fe],re[z],re[Z]),g=ie,_=Fe,w=z,M=Z),f=ae,A=null}function te(ae,De){ae.side===qn?Ee(2884):de(2884);let ie=ae.side===ur;De&&(ie=!ie),be(ie),ae.blending===ds&&ae.transparent===!1?se(wn):se(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.premultipliedAlpha),c.setFunc(ae.depthFunc),c.setTest(ae.depthTest),c.setMask(ae.depthWrite),o.setMask(ae.colorWrite);const Fe=ae.stencilWrite;h.setTest(Fe),Fe&&(h.setMask(ae.stencilWriteMask),h.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),h.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),ue(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?de(32926):Ee(32926)}function be(ae){T!==ae&&(ae?y.frontFace(2304):y.frontFace(2305),T=ae)}function $(ae){ae!==cf?(de(2884),ae!==I&&(ae===Uu?y.cullFace(1029):ae===df?y.cullFace(1028):y.cullFace(1032))):Ee(2884),I=ae}function me(ae){ae!==R&&(k&&y.lineWidth(ae),R=ae)}function ue(ae,De,ie){ae?(de(32823),(P!==De||O!==ie)&&(y.polygonOffset(De,ie),P=De,O=ie)):Ee(32823)}function B(ae){ae?de(3089):Ee(3089)}function W(ae){ae===void 0&&(ae=33984+D-1),X!==ae&&(y.activeTexture(ae),X=ae)}function ye(ae,De){X===null&&W();let ie=G[X];ie===void 0&&(ie={type:void 0,texture:void 0},G[X]=ie),(ie.type!==ae||ie.texture!==De)&&(y.bindTexture(ae,De||ce[ae]),ie.type=ae,ie.texture=De)}function xe(){const ae=G[X];ae!==void 0&&ae.type!==void 0&&(y.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function Re(){try{y.compressedTexImage2D.apply(y,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ve(){try{y.texImage2D.apply(y,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Pe(){try{y.texImage3D.apply(y,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ke(ae){_e.equals(ae)===!1&&(y.scissor(ae.x,ae.y,ae.z,ae.w),_e.copy(ae))}function $e(ae){pe.equals(ae)===!1&&(y.viewport(ae.x,ae.y,ae.z,ae.w),pe.copy(ae))}function Le(){y.disable(3042),y.disable(2884),y.disable(2929),y.disable(32823),y.disable(3089),y.disable(2960),y.disable(32926),y.blendEquation(32774),y.blendFunc(1,0),y.blendFuncSeparate(1,0,1,0),y.colorMask(!0,!0,!0,!0),y.clearColor(0,0,0,0),y.depthMask(!0),y.depthFunc(513),y.clearDepth(1),y.stencilMask(4294967295),y.stencilFunc(519,0,4294967295),y.stencilOp(7680,7680,7680),y.clearStencil(0),y.cullFace(1029),y.frontFace(2305),y.polygonOffset(0,0),y.activeTexture(33984),y.bindFramebuffer(36160,null),n===!0&&(y.bindFramebuffer(36009,null),y.bindFramebuffer(36008,null)),y.useProgram(null),y.lineWidth(1),y.scissor(0,0,y.canvas.width,y.canvas.height),y.viewport(0,0,y.canvas.width,y.canvas.height),p={},X=null,G={},u=null,a={},l=null,d=!1,f=null,m=null,g=null,_=null,x=null,w=null,M=null,A=!1,T=null,I=null,R=null,P=null,O=null,_e.set(0,0,y.canvas.width,y.canvas.height),pe.set(0,0,y.canvas.width,y.canvas.height),o.reset(),c.reset(),h.reset()}return{buffers:{color:o,depth:c,stencil:h},enable:de,disable:Ee,bindFramebuffer:F,bindXRFramebuffer:C,useProgram:V,setBlending:se,setMaterial:te,setFlipSided:be,setCullFace:$,setLineWidth:me,setPolygonOffset:ue,setScissorTest:B,activeTexture:W,bindTexture:ye,unbindTexture:xe,compressedTexImage2D:Re,texImage2D:Ve,texImage3D:Pe,scissor:Ke,viewport:$e,reset:Le}}function P0(y,t,e,n,i,s,r){const o=i.isWebGL2,c=i.maxTextures,h=i.maxCubemapSize,p=i.maxTextureSize,u=i.maxSamples,a=new WeakMap;let l,d=!1;try{d=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function f(B,W){return d?new OffscreenCanvas(B,W):co("canvas")}function m(B,W,ye,xe){let Re=1;if((B.width>xe||B.height>xe)&&(Re=xe/Math.max(B.width,B.height)),Re<1||W===!0)if(typeof HTMLImageElement!="undefined"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&B instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&B instanceof ImageBitmap){const Ve=W?pc:Math.floor,Pe=Ve(Re*B.width),Ke=Ve(Re*B.height);l===void 0&&(l=f(Pe,Ke));const $e=ye?f(Pe,Ke):l;return $e.width=Pe,$e.height=Ke,$e.getContext("2d").drawImage(B,0,0,Pe,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+B.width+"x"+B.height+") to ("+Pe+"x"+Ke+")."),$e}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+B.width+"x"+B.height+")."),B;return B}function g(B){return Aa(B.width)&&Aa(B.height)}function _(B){return o?!1:B.wrapS!==Ar||B.wrapT!==Ar||B.minFilter!==cr&&B.minFilter!==Lr}function x(B,W){return B.generateMipmaps&&W&&B.minFilter!==cr&&B.minFilter!==Lr}function w(B,W,ye,xe,Re=1){y.generateMipmap(B);const Ve=n.get(W);Ve.__maxMipLevel=Math.log2(Math.max(ye,xe,Re))}function M(B,W,ye,xe){if(o===!1)return W;if(B!==null){if(y[B]!==void 0)return y[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let Re=W;return W===6403&&(ye===5126&&(Re=33326),ye===5131&&(Re=33325),ye===5121&&(Re=33321)),W===6407&&(ye===5126&&(Re=34837),ye===5131&&(Re=34843),ye===5121&&(Re=32849)),W===6408&&(ye===5126&&(Re=34836),ye===5131&&(Re=34842),ye===5121&&(Re=xe===Jr?35907:32856)),(Re===33325||Re===33326||Re===34842||Re===34836)&&t.get("EXT_color_buffer_float"),Re}function A(B){return B===cr||B===_a||B===ba?9728:9729}function T(B){const W=B.target;W.removeEventListener("dispose",T),R(W),W.isVideoTexture&&a.delete(W),r.memory.textures--}function I(B){const W=B.target;W.removeEventListener("dispose",I),P(W)}function R(B){const W=n.get(B);W.__webglInit!==void 0&&(y.deleteTexture(W.__webglTexture),n.remove(B))}function P(B){const W=B.texture,ye=n.get(B),xe=n.get(W);if(!!B){if(xe.__webglTexture!==void 0&&(y.deleteTexture(xe.__webglTexture),r.memory.textures--),B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++)y.deleteFramebuffer(ye.__webglFramebuffer[Re]),ye.__webglDepthbuffer&&y.deleteRenderbuffer(ye.__webglDepthbuffer[Re]);else y.deleteFramebuffer(ye.__webglFramebuffer),ye.__webglDepthbuffer&&y.deleteRenderbuffer(ye.__webglDepthbuffer),ye.__webglMultisampledFramebuffer&&y.deleteFramebuffer(ye.__webglMultisampledFramebuffer),ye.__webglColorRenderbuffer&&y.deleteRenderbuffer(ye.__webglColorRenderbuffer),ye.__webglDepthRenderbuffer&&y.deleteRenderbuffer(ye.__webglDepthRenderbuffer);if(B.isWebGLMultipleRenderTargets)for(let Re=0,Ve=W.length;Re<Ve;Re++){const Pe=n.get(W[Re]);Pe.__webglTexture&&(y.deleteTexture(Pe.__webglTexture),r.memory.textures--),n.remove(W[Re])}n.remove(W),n.remove(B)}}let O=0;function D(){O=0}function k(){const B=O;return B>=c&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+c),O+=1,B}function N(B,W){const ye=n.get(B);if(B.isVideoTexture&&te(B),B.version>0&&ye.__version!==B.version){const xe=B.image;if(xe===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(ye,B,W);return}}e.activeTexture(33984+W),e.bindTexture(3553,ye.__webglTexture)}function q(B,W){const ye=n.get(B);if(B.version>0&&ye.__version!==B.version){ge(ye,B,W);return}e.activeTexture(33984+W),e.bindTexture(35866,ye.__webglTexture)}function X(B,W){const ye=n.get(B);if(B.version>0&&ye.__version!==B.version){ge(ye,B,W);return}e.activeTexture(33984+W),e.bindTexture(32879,ye.__webglTexture)}function G(B,W){const ye=n.get(B);if(B.version>0&&ye.__version!==B.version){ce(ye,B,W);return}e.activeTexture(33984+W),e.bindTexture(34067,ye.__webglTexture)}const Q={[yi]:10497,[Ar]:33071,[io]:33648},K={[cr]:9728,[_a]:9984,[ba]:9986,[Lr]:9729,[Ju]:9985,[vi]:9987};function _e(B,W,ye){if(ye?(y.texParameteri(B,10242,Q[W.wrapS]),y.texParameteri(B,10243,Q[W.wrapT]),(B===32879||B===35866)&&y.texParameteri(B,32882,Q[W.wrapR]),y.texParameteri(B,10240,K[W.magFilter]),y.texParameteri(B,10241,K[W.minFilter])):(y.texParameteri(B,10242,33071),y.texParameteri(B,10243,33071),(B===32879||B===35866)&&y.texParameteri(B,32882,33071),(W.wrapS!==Ar||W.wrapT!==Ar)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),y.texParameteri(B,10240,A(W.magFilter)),y.texParameteri(B,10241,A(W.minFilter)),W.minFilter!==cr&&W.minFilter!==Lr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const xe=t.get("EXT_texture_filter_anisotropic");if(W.type===an&&t.has("OES_texture_float_linear")===!1||o===!1&&W.type===_i&&t.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||n.get(W).__currentAnisotropy)&&(y.texParameterf(B,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy)}}function pe(B,W){B.__webglInit===void 0&&(B.__webglInit=!0,W.addEventListener("dispose",T),B.__webglTexture=y.createTexture(),r.memory.textures++)}function ge(B,W,ye){let xe=3553;W.isDataTexture2DArray&&(xe=35866),W.isDataTexture3D&&(xe=32879),pe(B,W),e.activeTexture(33984+ye),e.bindTexture(xe,B.__webglTexture),y.pixelStorei(37440,W.flipY),y.pixelStorei(37441,W.premultiplyAlpha),y.pixelStorei(3317,W.unpackAlignment),y.pixelStorei(37443,0);const Re=_(W)&&g(W.image)===!1,Ve=m(W.image,Re,!1,p),Pe=g(Ve)||o,Ke=s.convert(W.format);let $e=s.convert(W.type),Le=M(W.internalFormat,Ke,$e,W.encoding);_e(xe,W,Pe);let ae;const De=W.mipmaps;if(W.isDepthTexture)Le=6402,o?W.type===an?Le=36012:W.type===oo?Le=33190:W.type===ps?Le=35056:Le=33189:W.type===an&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===bi&&Le===6402&&W.type!==so&&W.type!==oo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=so,$e=s.convert(W.type)),W.format===ms&&Le===6402&&(Le=34041,W.type!==ps&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=ps,$e=s.convert(W.type))),e.texImage2D(3553,0,Le,Ve.width,Ve.height,0,Ke,$e,null);else if(W.isDataTexture)if(De.length>0&&Pe){for(let ie=0,Fe=De.length;ie<Fe;ie++)ae=De[ie],e.texImage2D(3553,ie,Le,ae.width,ae.height,0,Ke,$e,ae.data);W.generateMipmaps=!1,B.__maxMipLevel=De.length-1}else e.texImage2D(3553,0,Le,Ve.width,Ve.height,0,Ke,$e,Ve.data),B.__maxMipLevel=0;else if(W.isCompressedTexture){for(let ie=0,Fe=De.length;ie<Fe;ie++)ae=De[ie],W.format!==vr&&W.format!==Yn?Ke!==null?e.compressedTexImage2D(3553,ie,Le,ae.width,ae.height,0,ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e.texImage2D(3553,ie,Le,ae.width,ae.height,0,Ke,$e,ae.data);B.__maxMipLevel=De.length-1}else if(W.isDataTexture2DArray)e.texImage3D(35866,0,Le,Ve.width,Ve.height,Ve.depth,0,Ke,$e,Ve.data),B.__maxMipLevel=0;else if(W.isDataTexture3D)e.texImage3D(32879,0,Le,Ve.width,Ve.height,Ve.depth,0,Ke,$e,Ve.data),B.__maxMipLevel=0;else if(De.length>0&&Pe){for(let ie=0,Fe=De.length;ie<Fe;ie++)ae=De[ie],e.texImage2D(3553,ie,Le,Ke,$e,ae);W.generateMipmaps=!1,B.__maxMipLevel=De.length-1}else e.texImage2D(3553,0,Le,Ke,$e,Ve),B.__maxMipLevel=0;x(W,Pe)&&w(xe,W,Ve.width,Ve.height),B.__version=W.version,W.onUpdate&&W.onUpdate(W)}function ce(B,W,ye){if(W.image.length!==6)return;pe(B,W),e.activeTexture(33984+ye),e.bindTexture(34067,B.__webglTexture),y.pixelStorei(37440,W.flipY),y.pixelStorei(37441,W.premultiplyAlpha),y.pixelStorei(3317,W.unpackAlignment),y.pixelStorei(37443,0);const xe=W&&(W.isCompressedTexture||W.image[0].isCompressedTexture),Re=W.image[0]&&W.image[0].isDataTexture,Ve=[];for(let ie=0;ie<6;ie++)!xe&&!Re?Ve[ie]=m(W.image[ie],!1,!0,h):Ve[ie]=Re?W.image[ie].image:W.image[ie];const Pe=Ve[0],Ke=g(Pe)||o,$e=s.convert(W.format),Le=s.convert(W.type),ae=M(W.internalFormat,$e,Le,W.encoding);_e(34067,W,Ke);let De;if(xe){for(let ie=0;ie<6;ie++){De=Ve[ie].mipmaps;for(let Fe=0;Fe<De.length;Fe++){const Ce=De[Fe];W.format!==vr&&W.format!==Yn?$e!==null?e.compressedTexImage2D(34069+ie,Fe,ae,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):e.texImage2D(34069+ie,Fe,ae,Ce.width,Ce.height,0,$e,Le,Ce.data)}}B.__maxMipLevel=De.length-1}else{De=W.mipmaps;for(let ie=0;ie<6;ie++)if(Re){e.texImage2D(34069+ie,0,ae,Ve[ie].width,Ve[ie].height,0,$e,Le,Ve[ie].data);for(let Fe=0;Fe<De.length;Fe++){const z=De[Fe].image[ie].image;e.texImage2D(34069+ie,Fe+1,ae,z.width,z.height,0,$e,Le,z.data)}}else{e.texImage2D(34069+ie,0,ae,$e,Le,Ve[ie]);for(let Fe=0;Fe<De.length;Fe++){const Ce=De[Fe];e.texImage2D(34069+ie,Fe+1,ae,$e,Le,Ce.image[ie])}}B.__maxMipLevel=De.length}x(W,Ke)&&w(34067,W,Pe.width,Pe.height),B.__version=W.version,W.onUpdate&&W.onUpdate(W)}function de(B,W,ye,xe,Re){const Ve=s.convert(ye.format),Pe=s.convert(ye.type),Ke=M(ye.internalFormat,Ve,Pe,ye.encoding);Re===32879||Re===35866?e.texImage3D(Re,0,Ke,W.width,W.height,W.depth,0,Ve,Pe,null):e.texImage2D(Re,0,Ke,W.width,W.height,0,Ve,Pe,null),e.bindFramebuffer(36160,B),y.framebufferTexture2D(36160,xe,Re,n.get(ye).__webglTexture,0),e.bindFramebuffer(36160,null)}function Ee(B,W,ye){if(y.bindRenderbuffer(36161,B),W.depthBuffer&&!W.stencilBuffer){let xe=33189;if(ye){const Re=W.depthTexture;Re&&Re.isDepthTexture&&(Re.type===an?xe=36012:Re.type===oo&&(xe=33190));const Ve=se(W);y.renderbufferStorageMultisample(36161,Ve,xe,W.width,W.height)}else y.renderbufferStorage(36161,xe,W.width,W.height);y.framebufferRenderbuffer(36160,36096,36161,B)}else if(W.depthBuffer&&W.stencilBuffer){if(ye){const xe=se(W);y.renderbufferStorageMultisample(36161,xe,35056,W.width,W.height)}else y.renderbufferStorage(36161,34041,W.width,W.height);y.framebufferRenderbuffer(36160,33306,36161,B)}else{const xe=W.isWebGLMultipleRenderTargets===!0?W.texture[0]:W.texture,Re=s.convert(xe.format),Ve=s.convert(xe.type),Pe=M(xe.internalFormat,Re,Ve,xe.encoding);if(ye){const Ke=se(W);y.renderbufferStorageMultisample(36161,Ke,Pe,W.width,W.height)}else y.renderbufferStorage(36161,Pe,W.width,W.height)}y.bindRenderbuffer(36161,null)}function C(B,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,B),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),N(W.depthTexture,0);const xe=n.get(W.depthTexture).__webglTexture;if(W.depthTexture.format===bi)y.framebufferTexture2D(36160,36096,3553,xe,0);else if(W.depthTexture.format===ms)y.framebufferTexture2D(36160,33306,3553,xe,0);else throw new Error("Unknown depthTexture format")}function F(B){const W=n.get(B),ye=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");C(W.__webglFramebuffer,B)}else if(ye){W.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)e.bindFramebuffer(36160,W.__webglFramebuffer[xe]),W.__webglDepthbuffer[xe]=y.createRenderbuffer(),Ee(W.__webglDepthbuffer[xe],B,!1)}else e.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=y.createRenderbuffer(),Ee(W.__webglDepthbuffer,B,!1);e.bindFramebuffer(36160,null)}function V(B){const W=B.texture,ye=n.get(B),xe=n.get(W);B.addEventListener("dispose",I),B.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture=y.createTexture(),xe.__version=W.version,r.memory.textures++);const Re=B.isWebGLCubeRenderTarget===!0,Ve=B.isWebGLMultipleRenderTargets===!0,Pe=B.isWebGLMultisampleRenderTarget===!0,Ke=W.isDataTexture3D||W.isDataTexture2DArray,$e=g(B)||o;if(o&&W.format===Yn&&(W.type===an||W.type===_i)&&(W.format=vr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Re){ye.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)ye.__webglFramebuffer[Le]=y.createFramebuffer()}else if(ye.__webglFramebuffer=y.createFramebuffer(),Ve)if(i.drawBuffers){const Le=B.texture;for(let ae=0,De=Le.length;ae<De;ae++){const ie=n.get(Le[ae]);ie.__webglTexture===void 0&&(ie.__webglTexture=y.createTexture(),r.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Pe)if(o){ye.__webglMultisampledFramebuffer=y.createFramebuffer(),ye.__webglColorRenderbuffer=y.createRenderbuffer(),y.bindRenderbuffer(36161,ye.__webglColorRenderbuffer);const Le=s.convert(W.format),ae=s.convert(W.type),De=M(W.internalFormat,Le,ae,W.encoding),ie=se(B);y.renderbufferStorageMultisample(36161,ie,De,B.width,B.height),e.bindFramebuffer(36160,ye.__webglMultisampledFramebuffer),y.framebufferRenderbuffer(36160,36064,36161,ye.__webglColorRenderbuffer),y.bindRenderbuffer(36161,null),B.depthBuffer&&(ye.__webglDepthRenderbuffer=y.createRenderbuffer(),Ee(ye.__webglDepthRenderbuffer,B,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Re){e.bindTexture(34067,xe.__webglTexture),_e(34067,W,$e);for(let Le=0;Le<6;Le++)de(ye.__webglFramebuffer[Le],B,W,36064,34069+Le);x(W,$e)&&w(34067,W,B.width,B.height),e.unbindTexture()}else if(Ve){const Le=B.texture;for(let ae=0,De=Le.length;ae<De;ae++){const ie=Le[ae],Fe=n.get(ie);e.bindTexture(3553,Fe.__webglTexture),_e(3553,ie,$e),de(ye.__webglFramebuffer,B,ie,36064+ae,3553),x(ie,$e)&&w(3553,ie,B.width,B.height)}e.unbindTexture()}else{let Le=3553;Ke&&(o?Le=W.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),e.bindTexture(Le,xe.__webglTexture),_e(Le,W,$e),de(ye.__webglFramebuffer,B,W,36064,Le),x(W,$e)&&w(Le,W,B.width,B.height,B.depth),e.unbindTexture()}B.depthBuffer&&F(B)}function ne(B){const W=g(B)||o,ye=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let xe=0,Re=ye.length;xe<Re;xe++){const Ve=ye[xe];if(x(Ve,W)){const Pe=B.isWebGLCubeRenderTarget?34067:3553,Ke=n.get(Ve).__webglTexture;e.bindTexture(Pe,Ke),w(Pe,Ve,B.width,B.height),e.unbindTexture()}}}function re(B){if(B.isWebGLMultisampleRenderTarget)if(o){const W=B.width,ye=B.height;let xe=16384;B.depthBuffer&&(xe|=256),B.stencilBuffer&&(xe|=1024);const Re=n.get(B);e.bindFramebuffer(36008,Re.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Re.__webglFramebuffer),y.blitFramebuffer(0,0,W,ye,0,0,W,ye,xe,9728),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,Re.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function se(B){return o&&B.isWebGLMultisampleRenderTarget?Math.min(u,B.samples):0}function te(B){const W=r.render.frame;a.get(B)!==W&&(a.set(B,W),B.update())}let be=!1,$=!1;function me(B,W){B&&B.isWebGLRenderTarget&&(be===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),be=!0),B=B.texture),N(B,W)}function ue(B,W){B&&B.isWebGLCubeRenderTarget&&($===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),$=!0),B=B.texture),G(B,W)}this.allocateTextureUnit=k,this.resetTextureUnits=D,this.setTexture2D=N,this.setTexture2DArray=q,this.setTexture3D=X,this.setTextureCube=G,this.setupRenderTarget=V,this.updateRenderTargetMipmap=ne,this.updateMultisampleRenderTarget=re,this.safeSetTexture2D=me,this.safeSetTextureCube=ue}function I0(y,t,e){const n=e.isWebGL2;function i(s){let r;if(s===Sn)return 5121;if(s===zf)return 32819;if(s===Vf)return 32820;if(s===Hf)return 33635;if(s===Uf)return 5120;if(s===Bf)return 5122;if(s===so)return 5123;if(s===Gf)return 5124;if(s===oo)return 5125;if(s===an)return 5126;if(s===_i)return n?5131:(r=t.get("OES_texture_half_float"),r!==null?r.HALF_FLOAT_OES:null);if(s===Wf)return 6406;if(s===Yn)return 6407;if(s===vr)return 6408;if(s===qf)return 6409;if(s===Xf)return 6410;if(s===bi)return 6402;if(s===ms)return 34041;if(s===Zf)return 6403;if(s===Jf)return 36244;if(s===Kf)return 33319;if(s===$f)return 33320;if(s===Qf)return 36248;if(s===ep)return 36249;if(s===Ku||s===$u||s===Qu||s===ec)if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(s===Ku)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===$u)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Qu)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ec)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===tc||s===rc||s===nc||s===ic)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(s===tc)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===rc)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===nc)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ic)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===tp)return r=t.get("WEBGL_compressed_texture_etc1"),r!==null?r.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===sc||s===oc)&&(r=t.get("WEBGL_compressed_texture_etc"),r!==null)){if(s===sc)return r.COMPRESSED_RGB8_ETC2;if(s===oc)return r.COMPRESSED_RGBA8_ETC2_EAC}if(s===rp||s===np||s===ip||s===sp||s===op||s===ap||s===lp||s===up||s===cp||s===dp||s===hp||s===fp||s===pp||s===mp||s===yp||s===vp||s===_p||s===bp||s===xp||s===wp||s===Sp||s===Mp||s===Ep||s===Tp||s===Ap||s===Lp||s===Cp||s===Rp)return r=t.get("WEBGL_compressed_texture_astc"),r!==null?s:null;if(s===gp)return r=t.get("EXT_texture_compression_bptc"),r!==null?s:null;if(s===ps)return n?34042:(r=t.get("WEBGL_depth_texture"),r!==null?r.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class md extends Mr{constructor(t=[]){super();this.cameras=t}}md.prototype.isArrayCamera=!0;class Dn extends Ut{constructor(){super();this.type="Group"}}Dn.prototype.isGroup=!0;const O0={type:"move"};class al{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Dn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Dn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new we,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new we),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Dn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new we,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new we),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let i=null,s=null,r=null;const o=this._targetRay,c=this._grip,h=this._hand;if(t&&e.session.visibilityState!=="visible-blurred")if(o!==null&&(i=e.getPose(t.targetRaySpace,n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(O0))),h&&t.hand){r=!0;for(const f of t.hand.values()){const m=e.getJointPose(f,n);if(h.joints[f.jointName]===void 0){const _=new Dn;_.matrixAutoUpdate=!1,_.visible=!1,h.joints[f.jointName]=_,h.add(_)}const g=h.joints[f.jointName];m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const p=h.joints["index-finger-tip"],u=h.joints["thumb-tip"],a=p.position.distanceTo(u.position),l=.02,d=.005;h.inputState.pinching&&a>l+d?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&a<=l-d&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));return o!==null&&(o.visible=i!==null),c!==null&&(c.visible=s!==null),h!==null&&(h.visible=r!==null),this}}class D0 extends Jn{constructor(t,e){super();const n=this,i=t.state;let s=null,r=1,o=null,c="local-floor",h=null,p=null,u=null,a=null,l=null,d=!1,f=null,m=null,g=null,_=null,x=null,w=null;const M=[],A=new Map,T=new Mr;T.layers.enable(1),T.viewport=new Wt;const I=new Mr;I.layers.enable(2),I.viewport=new Wt;const R=[T,I],P=new md;P.layers.enable(1),P.layers.enable(2);let O=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let de=M[ce];return de===void 0&&(de=new al,M[ce]=de),de.getTargetRaySpace()},this.getControllerGrip=function(ce){let de=M[ce];return de===void 0&&(de=new al,M[ce]=de),de.getGripSpace()},this.getHand=function(ce){let de=M[ce];return de===void 0&&(de=new al,M[ce]=de),de.getHandSpace()};function k(ce){const de=A.get(ce.inputSource);de&&de.dispatchEvent({type:ce.type,data:ce.inputSource})}function N(){A.forEach(function(ce,de){ce.disconnect(de)}),A.clear(),O=null,D=null,i.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),u&&e.deleteFramebuffer(u),f&&e.deleteFramebuffer(f),m&&e.deleteRenderbuffer(m),g&&e.deleteRenderbuffer(g),u=null,f=null,m=null,g=null,l=null,a=null,p=null,s=null,ge.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){r=ce,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){c=ce,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return a!==null?a:l},this.getBinding=function(){return p},this.getFrame=function(){return _},this.getSession=function(){return s},this.setSession=async function(ce){if(s=ce,s!==null){s.addEventListener("select",k),s.addEventListener("selectstart",k),s.addEventListener("selectend",k),s.addEventListener("squeeze",k),s.addEventListener("squeezestart",k),s.addEventListener("squeezeend",k),s.addEventListener("end",N),s.addEventListener("inputsourceschange",q);const de=e.getContextAttributes();if(de.xrCompatible!==!0&&await e.makeXRCompatible(),s.renderState.layers===void 0){const Ee={antialias:de.antialias,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:r};l=new XRWebGLLayer(s,e,Ee),s.updateRenderState({baseLayer:l})}else if(e instanceof WebGLRenderingContext){const Ee={antialias:!0,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:r};l=new XRWebGLLayer(s,e,Ee),s.updateRenderState({layers:[l]})}else{d=de.antialias;let Ee=null;de.depth&&(w=256,de.stencil&&(w|=1024),x=de.stencil?33306:36096,Ee=de.stencil?35056:33190);const C={colorFormat:de.alpha?32856:32849,depthFormat:Ee,scaleFactor:r};p=new XRWebGLBinding(s,e),a=p.createProjectionLayer(C),u=e.createFramebuffer(),s.updateRenderState({layers:[a]}),d&&(f=e.createFramebuffer(),m=e.createRenderbuffer(),e.bindRenderbuffer(36161,m),e.renderbufferStorageMultisample(36161,4,32856,a.textureWidth,a.textureHeight),i.bindFramebuffer(36160,f),e.framebufferRenderbuffer(36160,36064,36161,m),e.bindRenderbuffer(36161,null),Ee!==null&&(g=e.createRenderbuffer(),e.bindRenderbuffer(36161,g),e.renderbufferStorageMultisample(36161,4,Ee,a.textureWidth,a.textureHeight),e.framebufferRenderbuffer(36160,x,36161,g),e.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}o=await s.requestReferenceSpace(c),ge.setContext(s),ge.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function q(ce){const de=s.inputSources;for(let Ee=0;Ee<M.length;Ee++)A.set(de[Ee],M[Ee]);for(let Ee=0;Ee<ce.removed.length;Ee++){const C=ce.removed[Ee],F=A.get(C);F&&(F.dispatchEvent({type:"disconnected",data:C}),A.delete(C))}for(let Ee=0;Ee<ce.added.length;Ee++){const C=ce.added[Ee],F=A.get(C);F&&F.dispatchEvent({type:"connected",data:C})}}const X=new we,G=new we;function Q(ce,de,Ee){X.setFromMatrixPosition(de.matrixWorld),G.setFromMatrixPosition(Ee.matrixWorld);const C=X.distanceTo(G),F=de.projectionMatrix.elements,V=Ee.projectionMatrix.elements,ne=F[14]/(F[10]-1),re=F[14]/(F[10]+1),se=(F[9]+1)/F[5],te=(F[9]-1)/F[5],be=(F[8]-1)/F[0],$=(V[8]+1)/V[0],me=ne*be,ue=ne*$,B=C/(-be+$),W=B*-be;de.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(W),ce.translateZ(B),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert();const ye=ne+B,xe=re+B,Re=me-W,Ve=ue+(C-W),Pe=se*re/xe*ye,Ke=te*re/xe*ye;ce.projectionMatrix.makePerspective(Re,Ve,Pe,Ke,ye,xe)}function K(ce,de){de===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(de.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(s===null)return;P.near=I.near=T.near=ce.near,P.far=I.far=T.far=ce.far,(O!==P.near||D!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),O=P.near,D=P.far);const de=ce.parent,Ee=P.cameras;K(P,de);for(let F=0;F<Ee.length;F++)K(Ee[F],de);P.matrixWorld.decompose(P.position,P.quaternion,P.scale),ce.position.copy(P.position),ce.quaternion.copy(P.quaternion),ce.scale.copy(P.scale),ce.matrix.copy(P.matrix),ce.matrixWorld.copy(P.matrixWorld);const C=ce.children;for(let F=0,V=C.length;F<V;F++)C[F].updateMatrixWorld(!0);Ee.length===2?Q(P,T,I):P.projectionMatrix.copy(T.projectionMatrix)},this.getCamera=function(){return P},this.getFoveation=function(){if(a!==null)return a.fixedFoveation;if(l!==null)return l.fixedFoveation},this.setFoveation=function(ce){a!==null&&(a.fixedFoveation=ce),l!==null&&l.fixedFoveation!==void 0&&(l.fixedFoveation=ce)};let _e=null;function pe(ce,de){if(h=de.getViewerPose(o),_=de,h!==null){const C=h.views;l!==null&&i.bindXRFramebuffer(l.framebuffer);let F=!1;C.length!==P.cameras.length&&(P.cameras.length=0,F=!0);for(let V=0;V<C.length;V++){const ne=C[V];let re=null;if(l!==null)re=l.getViewport(ne);else{const te=p.getViewSubImage(a,ne);i.bindXRFramebuffer(u),te.depthStencilTexture!==void 0&&e.framebufferTexture2D(36160,x,3553,te.depthStencilTexture,0),e.framebufferTexture2D(36160,36064,3553,te.colorTexture,0),re=te.viewport}const se=R[V];se.matrix.fromArray(ne.transform.matrix),se.projectionMatrix.fromArray(ne.projectionMatrix),se.viewport.set(re.x,re.y,re.width,re.height),V===0&&P.matrix.copy(se.matrix),F===!0&&P.cameras.push(se)}d&&(i.bindXRFramebuffer(f),w!==null&&e.clear(w))}const Ee=s.inputSources;for(let C=0;C<M.length;C++){const F=M[C],V=Ee[C];F.update(V,de,o)}if(_e&&_e(ce,de),d){const C=a.textureWidth,F=a.textureHeight;i.bindFramebuffer(36008,f),i.bindFramebuffer(36009,u),e.invalidateFramebuffer(36008,[x]),e.invalidateFramebuffer(36009,[x]),e.blitFramebuffer(0,0,C,F,0,0,C,F,16384,9728),e.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,f)}_=null}const ge=new Oc;ge.setAnimationLoop(pe),this.setAnimationLoop=function(ce){_e=ce},this.dispose=function(){}}}function j0(y){function t(g,_){g.fogColor.value.copy(_.color),_.isFog?(g.fogNear.value=_.near,g.fogFar.value=_.far):_.isFogExp2&&(g.fogDensity.value=_.density)}function e(g,_,x,w,M){_.isMeshBasicMaterial?n(g,_):_.isMeshLambertMaterial?(n(g,_),c(g,_)):_.isMeshToonMaterial?(n(g,_),p(g,_)):_.isMeshPhongMaterial?(n(g,_),h(g,_)):_.isMeshStandardMaterial?(n(g,_),_.isMeshPhysicalMaterial?a(g,_,M):u(g,_)):_.isMeshMatcapMaterial?(n(g,_),l(g,_)):_.isMeshDepthMaterial?(n(g,_),d(g,_)):_.isMeshDistanceMaterial?(n(g,_),f(g,_)):_.isMeshNormalMaterial?(n(g,_),m(g,_)):_.isLineBasicMaterial?(i(g,_),_.isLineDashedMaterial&&s(g,_)):_.isPointsMaterial?r(g,_,x,w):_.isSpriteMaterial?o(g,_):_.isShadowMaterial?(g.color.value.copy(_.color),g.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function n(g,_){g.opacity.value=_.opacity,_.color&&g.diffuse.value.copy(_.color),_.emissive&&g.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.specularMap&&(g.specularMap.value=_.specularMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest);const x=y.get(_).envMap;if(x){g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=_.reflectivity,g.ior.value=_.ior,g.refractionRatio.value=_.refractionRatio;const A=y.get(x).__maxMipLevel;A!==void 0&&(g.maxMipLevel.value=A)}_.lightMap&&(g.lightMap.value=_.lightMap,g.lightMapIntensity.value=_.lightMapIntensity),_.aoMap&&(g.aoMap.value=_.aoMap,g.aoMapIntensity.value=_.aoMapIntensity);let w;_.map?w=_.map:_.specularMap?w=_.specularMap:_.displacementMap?w=_.displacementMap:_.normalMap?w=_.normalMap:_.bumpMap?w=_.bumpMap:_.roughnessMap?w=_.roughnessMap:_.metalnessMap?w=_.metalnessMap:_.alphaMap?w=_.alphaMap:_.emissiveMap?w=_.emissiveMap:_.clearcoatMap?w=_.clearcoatMap:_.clearcoatNormalMap?w=_.clearcoatNormalMap:_.clearcoatRoughnessMap?w=_.clearcoatRoughnessMap:_.specularIntensityMap?w=_.specularIntensityMap:_.specularColorMap?w=_.specularColorMap:_.transmissionMap?w=_.transmissionMap:_.thicknessMap?w=_.thicknessMap:_.sheenColorMap?w=_.sheenColorMap:_.sheenRoughnessMap&&(w=_.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix));let M;_.aoMap?M=_.aoMap:_.lightMap&&(M=_.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uv2Transform.value.copy(M.matrix))}function i(g,_){g.diffuse.value.copy(_.color),g.opacity.value=_.opacity}function s(g,_){g.dashSize.value=_.dashSize,g.totalSize.value=_.dashSize+_.gapSize,g.scale.value=_.scale}function r(g,_,x,w){g.diffuse.value.copy(_.color),g.opacity.value=_.opacity,g.size.value=_.size*x,g.scale.value=w*.5,_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest);let M;_.map?M=_.map:_.alphaMap&&(M=_.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uvTransform.value.copy(M.matrix))}function o(g,_){g.diffuse.value.copy(_.color),g.opacity.value=_.opacity,g.rotation.value=_.rotation,_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest);let x;_.map?x=_.map:_.alphaMap&&(x=_.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}function c(g,_){_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap)}function h(g,_){g.specular.value.copy(_.specular),g.shininess.value=Math.max(_.shininess,1e-4),_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,_.side===ur&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),_.side===ur&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}function p(g,_){_.gradientMap&&(g.gradientMap.value=_.gradientMap),_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,_.side===ur&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),_.side===ur&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}function u(g,_){g.roughness.value=_.roughness,g.metalness.value=_.metalness,_.roughnessMap&&(g.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(g.metalnessMap.value=_.metalnessMap),_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,_.side===ur&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),_.side===ur&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias),y.get(_).envMap&&(g.envMapIntensity.value=_.envMapIntensity)}function a(g,_,x){u(g,_),g.ior.value=_.ior,_.sheen>0&&(g.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),g.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(g.sheenColorMap.value=_.sheenColorMap),_.sheenRoughnessMap&&(g.sheenRoughnessMap.value=_.sheenRoughnessMap)),_.clearcoat>0&&(g.clearcoat.value=_.clearcoat,g.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(g.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),g.clearcoatNormalMap.value=_.clearcoatNormalMap,_.side===ur&&g.clearcoatNormalScale.value.negate())),_.transmission>0&&(g.transmission.value=_.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),_.transmissionMap&&(g.transmissionMap.value=_.transmissionMap),g.thickness.value=_.thickness,_.thicknessMap&&(g.thicknessMap.value=_.thicknessMap),g.attenuationDistance.value=_.attenuationDistance,g.attenuationColor.value.copy(_.attenuationColor)),g.specularIntensity.value=_.specularIntensity,g.specularColor.value.copy(_.specularColor),_.specularIntensityMap&&(g.specularIntensityMap.value=_.specularIntensityMap),_.specularColorMap&&(g.specularColorMap.value=_.specularColorMap)}function l(g,_){_.matcap&&(g.matcap.value=_.matcap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,_.side===ur&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),_.side===ur&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}function d(g,_){_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}function f(g,_){_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias),g.referencePosition.value.copy(_.referencePosition),g.nearDistance.value=_.nearDistance,g.farDistance.value=_.farDistance}function m(g,_){_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,_.side===ur&&(g.bumpScale.value*=-1)),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),_.side===ur&&g.normalScale.value.negate()),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:e}}function k0(){const y=co("canvas");return y.style.display="block",y}function zt(y={}){const t=y.canvas!==void 0?y.canvas:k0(),e=y.context!==void 0?y.context:null,n=y.alpha!==void 0?y.alpha:!1,i=y.depth!==void 0?y.depth:!0,s=y.stencil!==void 0?y.stencil:!0,r=y.antialias!==void 0?y.antialias:!1,o=y.premultipliedAlpha!==void 0?y.premultipliedAlpha:!0,c=y.preserveDrawingBuffer!==void 0?y.preserveDrawingBuffer:!1,h=y.powerPreference!==void 0?y.powerPreference:"default",p=y.failIfMajorPerformanceCaveat!==void 0?y.failIfMajorPerformanceCaveat:!1;let u=null,a=null;const l=[],d=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=_r,this.physicallyCorrectLights=!1,this.toneMapping=Xn,this.toneMappingExposure=1;const f=this;let m=!1,g=0,_=0,x=null,w=-1,M=null;const A=new Wt,T=new Wt;let I=null,R=t.width,P=t.height,O=1,D=null,k=null;const N=new Wt(0,0,R,P),q=new Wt(0,0,R,P);let X=!1;const G=[],Q=new Ro;let K=!1,_e=!1,pe=null;const ge=new mt,ce=new we,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return x===null?O:1}let C=e;function F(ve,ke){for(let We=0;We<ve.length;We++){const Be=ve[We],Ye=t.getContext(Be,ke);if(Ye!==null)return Ye}return null}try{const ve={alpha:n,depth:i,stencil:s,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:p};if(t.addEventListener("webglcontextlost",Z,!1),t.addEventListener("webglcontextrestored",H,!1),C===null){const ke=["webgl2","webgl","experimental-webgl"];if(f.isWebGL1Renderer===!0&&ke.shift(),C=F(ke,ve),C===null)throw F(ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}C.getShaderPrecisionFormat===void 0&&(C.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ve){throw console.error("THREE.WebGLRenderer: "+ve.message),ve}let V,ne,re,se,te,be,$,me,ue,B,W,ye,xe,Re,Ve,Pe,Ke,$e,Le,ae,De,ie,Fe;function Ce(){V=new sv(C),ne=new Ky(C,V,y),V.init(ne),ie=new I0(C,V,ne),re=new R0(C,V,ne),G[0]=1029,se=new lv(C),te=new _0,be=new P0(C,V,re,te,ne,ie,se),$=new Qy(f),me=new iv(f),ue=new xm(C,ne),Fe=new Zy(C,V,ue,ne),B=new ov(C,ue,se,Fe),W=new hv(C,B,ue,se),Le=new dv(C,ne,be),Pe=new $y(te),ye=new v0(f,$,me,V,ne,Fe,Pe),xe=new j0(te),Re=new x0(te),Ve=new A0(V,ne),$e=new Yy(f,$,re,W,o),Ke=new pd(f,W,ne),ae=new Jy(C,V,se,ne),De=new av(C,V,se,ne),se.programs=ye.programs,f.capabilities=ne,f.extensions=V,f.properties=te,f.renderLists=Re,f.shadowMap=Ke,f.state=re,f.info=se}Ce();const z=new D0(f,C);this.xr=z,this.getContext=function(){return C},this.getContextAttributes=function(){return C.getContextAttributes()},this.forceContextLoss=function(){const ve=V.get("WEBGL_lose_context");ve&&ve.loseContext()},this.forceContextRestore=function(){const ve=V.get("WEBGL_lose_context");ve&&ve.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(ve){ve!==void 0&&(O=ve,this.setSize(R,P,!1))},this.getSize=function(ve){return ve.set(R,P)},this.setSize=function(ve,ke,We){if(z.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=ve,P=ke,t.width=Math.floor(ve*O),t.height=Math.floor(ke*O),We!==!1&&(t.style.width=ve+"px",t.style.height=ke+"px"),this.setViewport(0,0,ve,ke)},this.getDrawingBufferSize=function(ve){return ve.set(R*O,P*O).floor()},this.setDrawingBufferSize=function(ve,ke,We){R=ve,P=ke,O=We,t.width=Math.floor(ve*We),t.height=Math.floor(ke*We),this.setViewport(0,0,ve,ke)},this.getCurrentViewport=function(ve){return ve.copy(A)},this.getViewport=function(ve){return ve.copy(N)},this.setViewport=function(ve,ke,We,Be){ve.isVector4?N.set(ve.x,ve.y,ve.z,ve.w):N.set(ve,ke,We,Be),re.viewport(A.copy(N).multiplyScalar(O).floor())},this.getScissor=function(ve){return ve.copy(q)},this.setScissor=function(ve,ke,We,Be){ve.isVector4?q.set(ve.x,ve.y,ve.z,ve.w):q.set(ve,ke,We,Be),re.scissor(T.copy(q).multiplyScalar(O).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(ve){re.setScissorTest(X=ve)},this.setOpaqueSort=function(ve){D=ve},this.setTransparentSort=function(ve){k=ve},this.getClearColor=function(ve){return ve.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor.apply($e,arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha.apply($e,arguments)},this.clear=function(ve,ke,We){let Be=0;(ve===void 0||ve)&&(Be|=16384),(ke===void 0||ke)&&(Be|=256),(We===void 0||We)&&(Be|=1024),C.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Z,!1),t.removeEventListener("webglcontextrestored",H,!1),Re.dispose(),Ve.dispose(),te.dispose(),$.dispose(),me.dispose(),W.dispose(),Fe.dispose(),z.dispose(),z.removeEventListener("sessionstart",Se),z.removeEventListener("sessionend",Qe),pe&&(pe.dispose(),pe=null),it.stop()};function Z(ve){ve.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function H(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const ve=se.autoReset,ke=Ke.enabled,We=Ke.autoUpdate,Be=Ke.needsUpdate,Ye=Ke.type;Ce(),se.autoReset=ve,Ke.enabled=ke,Ke.autoUpdate=We,Ke.needsUpdate=Be,Ke.type=Ye}function J(ve){const ke=ve.target;ke.removeEventListener("dispose",J),he(ke)}function he(ve){Te(ve),te.remove(ve)}function Te(ve){const ke=te.get(ve).programs;ke!==void 0&&ke.forEach(function(We){ye.releaseProgram(We)})}this.renderBufferDirect=function(ve,ke,We,Be,Ye,bt){ke===null&&(ke=de);const gt=Ye.isMesh&&Ye.matrixWorld.determinant()<0,ft=qr(ve,ke,We,Be,Ye);re.setMaterial(Be,gt);let le=We.index;const je=We.attributes.position;if(le===null){if(je===void 0||je.count===0)return}else if(le.count===0)return;let qe=1;Be.wireframe===!0&&(le=B.getWireframeAttribute(We),qe=2),Fe.setup(Ye,Be,ft,We,le);let Ue,et=ae;le!==null&&(Ue=ue.get(le),et=De,et.setIndex(Ue));const ze=le!==null?le.count:je.count,at=We.drawRange.start*qe,Mt=We.drawRange.count*qe,yt=bt!==null?bt.start*qe:0,wt=bt!==null?bt.count*qe:1/0,nt=Math.max(at,yt),It=Math.min(ze,at+Mt,yt+wt)-1,dt=Math.max(0,It-nt+1);if(dt!==0){if(Ye.isMesh)Be.wireframe===!0?(re.setLineWidth(Be.wireframeLinewidth*Ee()),et.setMode(1)):et.setMode(4);else if(Ye.isLine){let kt=Be.linewidth;kt===void 0&&(kt=1),re.setLineWidth(kt*Ee()),Ye.isLineSegments?et.setMode(1):Ye.isLineLoop?et.setMode(2):et.setMode(3)}else Ye.isPoints?et.setMode(0):Ye.isSprite&&et.setMode(4);if(Ye.isInstancedMesh)et.renderInstances(nt,dt,Ye.count);else if(We.isInstancedBufferGeometry){const kt=Math.min(We.instanceCount,We._maxInstanceCount);et.renderInstances(nt,dt,kt)}else et.render(nt,dt)}},this.compile=function(ve,ke){a=Ve.get(ve),a.init(),d.push(a),ve.traverseVisible(function(We){We.isLight&&We.layers.test(ke.layers)&&(a.pushLight(We),We.castShadow&&a.pushShadow(We))}),a.setupLights(f.physicallyCorrectLights),ve.traverse(function(We){const Be=We.material;if(Be)if(Array.isArray(Be))for(let Ye=0;Ye<Be.length;Ye++){const bt=Be[Ye];lr(bt,ve,We)}else lr(Be,ve,We)}),d.pop(),a=null};let Ie=null;function Xe(ve){Ie&&Ie(ve)}function Se(){it.stop()}function Qe(){it.start()}const it=new Oc;it.setAnimationLoop(Xe),typeof window!="undefined"&&it.setContext(window),this.setAnimationLoop=function(ve){Ie=ve,z.setAnimationLoop(ve),ve===null?it.stop():it.start()},z.addEventListener("sessionstart",Se),z.addEventListener("sessionend",Qe),this.render=function(ve,ke){if(ke!==void 0&&ke.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;ve.autoUpdate===!0&&ve.updateMatrixWorld(),ke.parent===null&&ke.updateMatrixWorld(),z.enabled===!0&&z.isPresenting===!0&&(z.cameraAutoUpdate===!0&&z.updateCamera(ke),ke=z.getCamera()),ve.isScene===!0&&ve.onBeforeRender(f,ve,ke,x),a=Ve.get(ve,d.length),a.init(),d.push(a),ge.multiplyMatrices(ke.projectionMatrix,ke.matrixWorldInverse),Q.setFromProjectionMatrix(ge),_e=this.localClippingEnabled,K=Pe.init(this.clippingPlanes,_e,ke),u=Re.get(ve,l.length),u.init(),l.push(u),St(ve,ke,0,f.sortObjects),u.finish(),f.sortObjects===!0&&u.sort(D,k),K===!0&&Pe.beginShadows();const We=a.state.shadowsArray;if(Ke.render(We,ve,ke),K===!0&&Pe.endShadows(),this.info.autoReset===!0&&this.info.reset(),$e.render(u,ve),a.setupLights(f.physicallyCorrectLights),ke.isArrayCamera){const Be=ke.cameras;for(let Ye=0,bt=Be.length;Ye<bt;Ye++){const gt=Be[Ye];xt(u,ve,gt,gt.viewport)}}else xt(u,ve,ke);x!==null&&(be.updateMultisampleRenderTarget(x),be.updateRenderTargetMipmap(x)),ve.isScene===!0&&ve.onAfterRender(f,ve,ke),re.buffers.depth.setTest(!0),re.buffers.depth.setMask(!0),re.buffers.color.setMask(!0),re.setPolygonOffset(!1),Fe.resetDefaultState(),w=-1,M=null,d.pop(),d.length>0?a=d[d.length-1]:a=null,l.pop(),l.length>0?u=l[l.length-1]:u=null};function St(ve,ke,We,Be){if(ve.visible===!1)return;if(ve.layers.test(ke.layers)){if(ve.isGroup)We=ve.renderOrder;else if(ve.isLOD)ve.autoUpdate===!0&&ve.update(ke);else if(ve.isLight)a.pushLight(ve),ve.castShadow&&a.pushShadow(ve);else if(ve.isSprite){if(!ve.frustumCulled||Q.intersectsSprite(ve)){Be&&ce.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(ge);const gt=W.update(ve),ft=ve.material;ft.visible&&u.push(ve,gt,ft,We,ce.z,null)}}else if((ve.isMesh||ve.isLine||ve.isPoints)&&(ve.isSkinnedMesh&&ve.skeleton.frame!==se.render.frame&&(ve.skeleton.update(),ve.skeleton.frame=se.render.frame),!ve.frustumCulled||Q.intersectsObject(ve))){Be&&ce.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(ge);const gt=W.update(ve),ft=ve.material;if(Array.isArray(ft)){const le=gt.groups;for(let je=0,qe=le.length;je<qe;je++){const Ue=le[je],et=ft[Ue.materialIndex];et&&et.visible&&u.push(ve,gt,et,We,ce.z,Ue)}}else ft.visible&&u.push(ve,gt,ft,We,ce.z,null)}}const bt=ve.children;for(let gt=0,ft=bt.length;gt<ft;gt++)St(bt[gt],ke,We,Be)}function xt(ve,ke,We,Be){const Ye=ve.opaque,bt=ve.transmissive,gt=ve.transparent;a.setupLightsView(We),bt.length>0&&ht(Ye,ke,We),Be&&re.viewport(A.copy(Be)),Ye.length>0&&_t(Ye,ke,We),bt.length>0&&_t(bt,ke,We),gt.length>0&&_t(gt,ke,We)}function ht(ve,ke,We){if(pe===null){const gt=r===!0&&ne.isWebGL2===!0?yc:Kr;pe=new gt(1024,1024,{generateMipmaps:!0,type:ie.convert(_i)!==null?_i:Sn,minFilter:vi,magFilter:cr,wrapS:Ar,wrapT:Ar})}const Be=f.getRenderTarget();f.setRenderTarget(pe),f.clear();const Ye=f.toneMapping;f.toneMapping=Xn,_t(ve,ke,We),f.toneMapping=Ye,be.updateMultisampleRenderTarget(pe),be.updateRenderTargetMipmap(pe),f.setRenderTarget(Be)}function _t(ve,ke,We){const Be=ke.isScene===!0?ke.overrideMaterial:null;for(let Ye=0,bt=ve.length;Ye<bt;Ye++){const gt=ve[Ye],ft=gt.object,le=gt.geometry,je=Be===null?gt.material:Be,qe=gt.group;ft.layers.test(We.layers)&&Tt(ft,ke,We,le,je,qe)}}function Tt(ve,ke,We,Be,Ye,bt){ve.onBeforeRender(f,ke,We,Be,Ye,bt),ve.modelViewMatrix.multiplyMatrices(We.matrixWorldInverse,ve.matrixWorld),ve.normalMatrix.getNormalMatrix(ve.modelViewMatrix),Ye.onBeforeRender(f,ke,We,Be,ve,bt),Ye.transparent===!0&&Ye.side===qn?(Ye.side=ur,Ye.needsUpdate=!0,f.renderBufferDirect(We,ke,Be,Ye,ve,bt),Ye.side=mi,Ye.needsUpdate=!0,f.renderBufferDirect(We,ke,Be,Ye,ve,bt),Ye.side=qn):f.renderBufferDirect(We,ke,Be,Ye,ve,bt),ve.onAfterRender(f,ke,We,Be,Ye,bt)}function lr(ve,ke,We){ke.isScene!==!0&&(ke=de);const Be=te.get(ve),Ye=a.state.lights,bt=a.state.shadowsArray,gt=Ye.state.version,ft=ye.getParameters(ve,Ye.state,bt,ke,We),le=ye.getProgramCacheKey(ft);let je=Be.programs;Be.environment=ve.isMeshStandardMaterial?ke.environment:null,Be.fog=ke.fog,Be.envMap=(ve.isMeshStandardMaterial?me:$).get(ve.envMap||Be.environment),je===void 0&&(ve.addEventListener("dispose",J),je=new Map,Be.programs=je);let qe=je.get(le);if(qe!==void 0){if(Be.currentProgram===qe&&Be.lightsStateVersion===gt)return Nr(ve,ft),qe}else ft.uniforms=ye.getUniforms(ve),ve.onBuild(We,ft,f),ve.onBeforeCompile(ft,f),qe=ye.acquireProgram(ft,le),je.set(le,qe),Be.uniforms=ft.uniforms;const Ue=Be.uniforms;(!ve.isShaderMaterial&&!ve.isRawShaderMaterial||ve.clipping===!0)&&(Ue.clippingPlanes=Pe.uniform),Nr(ve,ft),Be.needsLights=nn(ve),Be.lightsStateVersion=gt,Be.needsLights&&(Ue.ambientLightColor.value=Ye.state.ambient,Ue.lightProbe.value=Ye.state.probe,Ue.directionalLights.value=Ye.state.directional,Ue.directionalLightShadows.value=Ye.state.directionalShadow,Ue.spotLights.value=Ye.state.spot,Ue.spotLightShadows.value=Ye.state.spotShadow,Ue.rectAreaLights.value=Ye.state.rectArea,Ue.ltc_1.value=Ye.state.rectAreaLTC1,Ue.ltc_2.value=Ye.state.rectAreaLTC2,Ue.pointLights.value=Ye.state.point,Ue.pointLightShadows.value=Ye.state.pointShadow,Ue.hemisphereLights.value=Ye.state.hemi,Ue.directionalShadowMap.value=Ye.state.directionalShadowMap,Ue.directionalShadowMatrix.value=Ye.state.directionalShadowMatrix,Ue.spotShadowMap.value=Ye.state.spotShadowMap,Ue.spotShadowMatrix.value=Ye.state.spotShadowMatrix,Ue.pointShadowMap.value=Ye.state.pointShadowMap,Ue.pointShadowMatrix.value=Ye.state.pointShadowMatrix);const et=qe.getUniforms(),ze=On.seqWithValue(et.seq,Ue);return Be.currentProgram=qe,Be.uniformsList=ze,qe}function Nr(ve,ke){const We=te.get(ve);We.outputEncoding=ke.outputEncoding,We.instancing=ke.instancing,We.skinning=ke.skinning,We.morphTargets=ke.morphTargets,We.morphNormals=ke.morphNormals,We.morphTargetsCount=ke.morphTargetsCount,We.numClippingPlanes=ke.numClippingPlanes,We.numIntersection=ke.numClipIntersection,We.vertexAlphas=ke.vertexAlphas,We.vertexTangents=ke.vertexTangents}function qr(ve,ke,We,Be,Ye){ke.isScene!==!0&&(ke=de),be.resetTextureUnits();const bt=ke.fog,gt=Be.isMeshStandardMaterial?ke.environment:null,ft=x===null?f.outputEncoding:x.texture.encoding,le=(Be.isMeshStandardMaterial?me:$).get(Be.envMap||gt),je=Be.vertexColors===!0&&!!We.attributes.color&&We.attributes.color.itemSize===4,qe=!!Be.normalMap&&!!We.attributes.tangent,Ue=!!We.morphAttributes.position,et=!!We.morphAttributes.normal,ze=We.morphAttributes.position?We.morphAttributes.position.length:0,at=te.get(Be),Mt=a.state.lights;if(K===!0&&(_e===!0||ve!==M)){const mr=ve===M&&Be.id===w;Pe.setState(Be,ve,mr)}let yt=!1;Be.version===at.__version?(at.needsLights&&at.lightsStateVersion!==Mt.state.version||at.outputEncoding!==ft||Ye.isInstancedMesh&&at.instancing===!1||!Ye.isInstancedMesh&&at.instancing===!0||Ye.isSkinnedMesh&&at.skinning===!1||!Ye.isSkinnedMesh&&at.skinning===!0||at.envMap!==le||Be.fog&&at.fog!==bt||at.numClippingPlanes!==void 0&&(at.numClippingPlanes!==Pe.numPlanes||at.numIntersection!==Pe.numIntersection)||at.vertexAlphas!==je||at.vertexTangents!==qe||at.morphTargets!==Ue||at.morphNormals!==et||ne.isWebGL2===!0&&at.morphTargetsCount!==ze)&&(yt=!0):(yt=!0,at.__version=Be.version);let wt=at.currentProgram;yt===!0&&(wt=lr(Be,ke,Ye));let nt=!1,It=!1,dt=!1;const kt=wt.getUniforms(),Fr=at.uniforms;if(re.useProgram(wt.program)&&(nt=!0,It=!0,dt=!0),Be.id!==w&&(w=Be.id,It=!0),nt||M!==ve){if(kt.setValue(C,"projectionMatrix",ve.projectionMatrix),ne.logarithmicDepthBuffer&&kt.setValue(C,"logDepthBufFC",2/(Math.log(ve.far+1)/Math.LN2)),M!==ve&&(M=ve,It=!0,dt=!0),Be.isShaderMaterial||Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshStandardMaterial||Be.envMap){const mr=kt.map.cameraPosition;mr!==void 0&&mr.setValue(C,ce.setFromMatrixPosition(ve.matrixWorld))}(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&kt.setValue(C,"isOrthographic",ve.isOrthographicCamera===!0),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial||Be.isShadowMaterial||Ye.isSkinnedMesh)&&kt.setValue(C,"viewMatrix",ve.matrixWorldInverse)}if(Ye.isSkinnedMesh){kt.setOptional(C,Ye,"bindMatrix"),kt.setOptional(C,Ye,"bindMatrixInverse");const mr=Ye.skeleton;mr&&(ne.floatVertexTextures?(mr.boneTexture===null&&mr.computeBoneTexture(),kt.setValue(C,"boneTexture",mr.boneTexture,be),kt.setValue(C,"boneTextureSize",mr.boneTextureSize)):kt.setOptional(C,mr,"boneMatrices"))}return!!We&&(We.morphAttributes.position!==void 0||We.morphAttributes.normal!==void 0)&&Le.update(Ye,We,Be,wt),(It||at.receiveShadow!==Ye.receiveShadow)&&(at.receiveShadow=Ye.receiveShadow,kt.setValue(C,"receiveShadow",Ye.receiveShadow)),It&&(kt.setValue(C,"toneMappingExposure",f.toneMappingExposure),at.needsLights&&Tr(Fr,dt),bt&&Be.fog&&xe.refreshFogUniforms(Fr,bt),xe.refreshMaterialUniforms(Fr,Be,O,P,pe),On.upload(C,at.uniformsList,Fr,be)),Be.isShaderMaterial&&Be.uniformsNeedUpdate===!0&&(On.upload(C,at.uniformsList,Fr,be),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&kt.setValue(C,"center",Ye.center),kt.setValue(C,"modelViewMatrix",Ye.modelViewMatrix),kt.setValue(C,"normalMatrix",Ye.normalMatrix),kt.setValue(C,"modelMatrix",Ye.matrixWorld),wt}function Tr(ve,ke){ve.ambientLightColor.needsUpdate=ke,ve.lightProbe.needsUpdate=ke,ve.directionalLights.needsUpdate=ke,ve.directionalLightShadows.needsUpdate=ke,ve.pointLights.needsUpdate=ke,ve.pointLightShadows.needsUpdate=ke,ve.spotLights.needsUpdate=ke,ve.spotLightShadows.needsUpdate=ke,ve.rectAreaLights.needsUpdate=ke,ve.hemisphereLights.needsUpdate=ke}function nn(ve){return ve.isMeshLambertMaterial||ve.isMeshToonMaterial||ve.isMeshPhongMaterial||ve.isMeshStandardMaterial||ve.isShadowMaterial||ve.isShaderMaterial&&ve.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return x},this.setRenderTarget=function(ve,ke=0,We=0){x=ve,g=ke,_=We,ve&&te.get(ve).__webglFramebuffer===void 0&&be.setupRenderTarget(ve);let Be=null,Ye=!1,bt=!1;if(ve){const ft=ve.texture;(ft.isDataTexture3D||ft.isDataTexture2DArray)&&(bt=!0);const le=te.get(ve).__webglFramebuffer;ve.isWebGLCubeRenderTarget?(Be=le[ke],Ye=!0):ve.isWebGLMultisampleRenderTarget?Be=te.get(ve).__webglMultisampledFramebuffer:Be=le,A.copy(ve.viewport),T.copy(ve.scissor),I=ve.scissorTest}else A.copy(N).multiplyScalar(O).floor(),T.copy(q).multiplyScalar(O).floor(),I=X;if(re.bindFramebuffer(36160,Be)&&ne.drawBuffers){let ft=!1;if(ve)if(ve.isWebGLMultipleRenderTargets){const le=ve.texture;if(G.length!==le.length||G[0]!==36064){for(let je=0,qe=le.length;je<qe;je++)G[je]=36064+je;G.length=le.length,ft=!0}}else(G.length!==1||G[0]!==36064)&&(G[0]=36064,G.length=1,ft=!0);else(G.length!==1||G[0]!==1029)&&(G[0]=1029,G.length=1,ft=!0);ft&&(ne.isWebGL2?C.drawBuffers(G):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(G))}if(re.viewport(A),re.scissor(T),re.setScissorTest(I),Ye){const ft=te.get(ve.texture);C.framebufferTexture2D(36160,36064,34069+ke,ft.__webglTexture,We)}else if(bt){const ft=te.get(ve.texture),le=ke||0;C.framebufferTextureLayer(36160,36064,ft.__webglTexture,We||0,le)}w=-1},this.readRenderTargetPixels=function(ve,ke,We,Be,Ye,bt,gt){if(!(ve&&ve.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ft=te.get(ve).__webglFramebuffer;if(ve.isWebGLCubeRenderTarget&&gt!==void 0&&(ft=ft[gt]),ft){re.bindFramebuffer(36160,ft);try{const le=ve.texture,je=le.format,qe=le.type;if(je!==vr&&ie.convert(je)!==C.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ue=qe===_i&&(V.has("EXT_color_buffer_half_float")||ne.isWebGL2&&V.has("EXT_color_buffer_float"));if(qe!==Sn&&ie.convert(qe)!==C.getParameter(35738)&&!(qe===an&&(ne.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!Ue){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}C.checkFramebufferStatus(36160)===36053?ke>=0&&ke<=ve.width-Be&&We>=0&&We<=ve.height-Ye&&C.readPixels(ke,We,Be,Ye,ie.convert(je),ie.convert(qe),bt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const le=x!==null?te.get(x).__webglFramebuffer:null;re.bindFramebuffer(36160,le)}}},this.copyFramebufferToTexture=function(ve,ke,We=0){const Be=Math.pow(2,-We),Ye=Math.floor(ke.image.width*Be),bt=Math.floor(ke.image.height*Be);let gt=ie.convert(ke.format);ne.isWebGL2&&(gt===6407&&(gt=32849),gt===6408&&(gt=32856)),be.setTexture2D(ke,0),C.copyTexImage2D(3553,We,gt,ve.x,ve.y,Ye,bt,0),re.unbindTexture()},this.copyTextureToTexture=function(ve,ke,We,Be=0){const Ye=ke.image.width,bt=ke.image.height,gt=ie.convert(We.format),ft=ie.convert(We.type);be.setTexture2D(We,0),C.pixelStorei(37440,We.flipY),C.pixelStorei(37441,We.premultiplyAlpha),C.pixelStorei(3317,We.unpackAlignment),ke.isDataTexture?C.texSubImage2D(3553,Be,ve.x,ve.y,Ye,bt,gt,ft,ke.image.data):ke.isCompressedTexture?C.compressedTexSubImage2D(3553,Be,ve.x,ve.y,ke.mipmaps[0].width,ke.mipmaps[0].height,gt,ke.mipmaps[0].data):C.texSubImage2D(3553,Be,ve.x,ve.y,gt,ft,ke.image),Be===0&&We.generateMipmaps&&C.generateMipmap(3553),re.unbindTexture()},this.copyTextureToTexture3D=function(ve,ke,We,Be,Ye=0){if(f.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const bt=ve.max.x-ve.min.x+1,gt=ve.max.y-ve.min.y+1,ft=ve.max.z-ve.min.z+1,le=ie.convert(Be.format),je=ie.convert(Be.type);let qe;if(Be.isDataTexture3D)be.setTexture3D(Be,0),qe=32879;else if(Be.isDataTexture2DArray)be.setTexture2DArray(Be,0),qe=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}C.pixelStorei(37440,Be.flipY),C.pixelStorei(37441,Be.premultiplyAlpha),C.pixelStorei(3317,Be.unpackAlignment);const Ue=C.getParameter(3314),et=C.getParameter(32878),ze=C.getParameter(3316),at=C.getParameter(3315),Mt=C.getParameter(32877),yt=We.isCompressedTexture?We.mipmaps[0]:We.image;C.pixelStorei(3314,yt.width),C.pixelStorei(32878,yt.height),C.pixelStorei(3316,ve.min.x),C.pixelStorei(3315,ve.min.y),C.pixelStorei(32877,ve.min.z),We.isDataTexture||We.isDataTexture3D?C.texSubImage3D(qe,Ye,ke.x,ke.y,ke.z,bt,gt,ft,le,je,yt.data):We.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),C.compressedTexSubImage3D(qe,Ye,ke.x,ke.y,ke.z,bt,gt,ft,le,yt.data)):C.texSubImage3D(qe,Ye,ke.x,ke.y,ke.z,bt,gt,ft,le,je,yt),C.pixelStorei(3314,Ue),C.pixelStorei(32878,et),C.pixelStorei(3316,ze),C.pixelStorei(3315,at),C.pixelStorei(32877,Mt),Ye===0&&Be.generateMipmaps&&C.generateMipmap(qe),re.unbindTexture()},this.initTexture=function(ve){be.setTexture2D(ve,0),re.unbindTexture()},this.resetState=function(){g=0,_=0,x=null,re.reset(),Fe.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}zt.prototype.isWebGLRenderer=!0;class N0 extends zt{}N0.prototype.isWebGL1Renderer=!0;class gd extends Ut{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),e}}gd.prototype.isScene=!0;class Wi{constructor(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=ys,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Or()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,s=this.stride;i<s;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Or()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Or()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Wi.prototype.isInterleavedBuffer=!0;const sr=new we;class qi{constructor(t,e,n,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)sr.x=this.getX(e),sr.y=this.getY(e),sr.z=this.getZ(e),sr.applyMatrix4(t),this.setXYZ(e,sr.x,sr.y,sr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)sr.x=this.getX(e),sr.y=this.getY(e),sr.z=this.getZ(e),sr.applyNormalMatrix(t),this.setXYZ(e,sr.x,sr.y,sr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)sr.x=this.getX(e),sr.y=this.getY(e),sr.z=this.getZ(e),sr.transformDirection(t),this.setXYZ(e,sr.x,sr.y,sr.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return new nr(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new qi(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}qi.prototype.isInterleavedBufferAttribute=!0;class yd extends hr{constructor(t){super();this.type="SpriteMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}yd.prototype.isSpriteMaterial=!0;let Xi;const Ls=new we,Yi=new we,Zi=new we,Ji=new rt,Cs=new rt,vd=new mt,jo=new we,Rs=new we,ko=new we,_d=new rt,ll=new rt,bd=new rt;class F0 extends Ut{constructor(t){super();if(this.type="Sprite",Xi===void 0){Xi=new Yt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Wi(e,5);Xi.setIndex([0,1,2,0,2,3]),Xi.setAttribute("position",new qi(n,3,0,!1)),Xi.setAttribute("uv",new qi(n,2,3,!1))}this.geometry=Xi,this.material=t!==void 0?t:new yd,this.center=new rt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Yi.setFromMatrixScale(this.matrixWorld),vd.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Zi.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Yi.multiplyScalar(-Zi.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const r=this.center;No(jo.set(-.5,-.5,0),Zi,r,Yi,i,s),No(Rs.set(.5,-.5,0),Zi,r,Yi,i,s),No(ko.set(.5,.5,0),Zi,r,Yi,i,s),_d.set(0,0),ll.set(1,0),bd.set(1,1);let o=t.ray.intersectTriangle(jo,Rs,ko,!1,Ls);if(o===null&&(No(Rs.set(-.5,.5,0),Zi,r,Yi,i,s),ll.set(0,1),o=t.ray.intersectTriangle(jo,ko,Rs,!1,Ls),o===null))return;const c=t.ray.origin.distanceTo(Ls);c<t.near||c>t.far||e.push({distance:c,point:Ls.clone(),uv:ar.getUV(Ls,jo,Rs,ko,_d,ll,bd,new rt),face:null,object:this})}copy(t){return super.copy(t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}F0.prototype.isSprite=!0;function No(y,t,e,n,i,s){Ji.subVectors(y,e).addScalar(.5).multiply(n),i!==void 0?(Cs.x=s*Ji.x-i*Ji.y,Cs.y=i*Ji.x+s*Ji.y):Cs.copy(Ji),y.copy(t),y.x+=Cs.x,y.y+=Cs.y,y.applyMatrix4(vd)}const xd=new we,wd=new Wt,Sd=new Wt,U0=new we,Md=new mt;class ul extends br{constructor(t,e){super(t,e);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new mt,this.bindMatrixInverse=new mt}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Wt,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;wd.fromBufferAttribute(i.attributes.skinIndex,t),Sd.fromBufferAttribute(i.attributes.skinWeight,t),xd.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const r=Sd.getComponent(s);if(r!==0){const o=wd.getComponent(s);Md.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),e.addScaledVector(U0.copy(xd).applyMatrix4(Md),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}ul.prototype.isSkinnedMesh=!0;class cl extends Ut{constructor(){super();this.type="Bone"}}cl.prototype.isBone=!0;class Ed extends dr{constructor(t=null,e=1,n=1,i,s,r,o,c,h=cr,p=cr,u,a){super(null,r,o,c,h,p,i,s,u,a);this.image={data:t,width:e,height:n},this.magFilter=h,this.minFilter=p,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Ed.prototype.isDataTexture=!0;const Td=new mt,B0=new mt;class dl{constructor(t=[],e=[]){this.uuid=Or(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new mt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new mt;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,r=t.length;s<r;s++){const o=t[s]?t[s].matrixWorld:B0;Td.multiplyMatrices(o,e[s]),Td.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new dl(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=fc(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ed(e,t,t,vr,an);return this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];if(i.name===t)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const s=t.bones[n];let r=e[s];r===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),r=new cl),this.bones.push(r),this.boneInverses.push(new mt().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,s=e.length;i<s;i++){const r=e[i];t.bones.push(r.uuid);const o=n[i];t.boneInverses.push(o.toArray())}return t}}class hl extends nr{constructor(t,e,n,i=1){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(t,e,n);this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}hl.prototype.isInstancedBufferAttribute=!0;const Ad=new mt,Ld=new mt,Fo=[],Ps=new br;class G0 extends br{constructor(t,e,n){super(t,e);this.instanceMatrix=new hl(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Ps.geometry=this.geometry,Ps.material=this.material,Ps.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,Ad),Ld.multiplyMatrices(n,Ad),Ps.matrixWorld=Ld,Ps.raycast(t,Fo);for(let r=0,o=Fo.length;r<o;r++){const c=Fo[r];c.instanceId=s,c.object=this,e.push(c)}Fo.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new hl(new Float32Array(this.instanceMatrix.count*3),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}G0.prototype.isInstancedMesh=!0;class Ki extends hr{constructor(t){super();this.type="LineBasicMaterial",this.color=new ut(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Ki.prototype.isLineBasicMaterial=!0;const Cd=new we,Rd=new we,Pd=new mt,fl=new Ci,Uo=new Qn;class Bo extends Ut{constructor(t=new Yt,e=new Ki){super();this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[0];for(let i=1,s=e.count;i<s;i++)Cd.fromBufferAttribute(e,i-1),Rd.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Cd.distanceTo(Rd);t.setAttribute("lineDistance",new ir(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Line.threshold,r=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Uo.copy(n.boundingSphere),Uo.applyMatrix4(i),Uo.radius+=s,t.ray.intersectsSphere(Uo)===!1)return;Pd.copy(i).invert(),fl.copy(t.ray).applyMatrix4(Pd);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,h=new we,p=new we,u=new we,a=new we,l=this.isLineSegments?2:1;if(n.isBufferGeometry){const d=n.index,m=n.attributes.position;if(d!==null){const g=Math.max(0,r.start),_=Math.min(d.count,r.start+r.count);for(let x=g,w=_-1;x<w;x+=l){const M=d.getX(x),A=d.getX(x+1);if(h.fromBufferAttribute(m,M),p.fromBufferAttribute(m,A),fl.distanceSqToSegment(h,p,a,u)>c)continue;a.applyMatrix4(this.matrixWorld);const I=t.ray.origin.distanceTo(a);I<t.near||I>t.far||e.push({distance:I,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,r.start),_=Math.min(m.count,r.start+r.count);for(let x=g,w=_-1;x<w;x+=l){if(h.fromBufferAttribute(m,x),p.fromBufferAttribute(m,x+1),fl.distanceSqToSegment(h,p,a,u)>c)continue;a.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(a);A<t.near||A>t.far||e.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Bo.prototype.isLine=!0;const Id=new we,Od=new we;class Go extends Bo{constructor(t,e){super(t,e);this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[];for(let i=0,s=e.count;i<s;i+=2)Id.fromBufferAttribute(e,i),Od.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Id.distanceTo(Od);t.setAttribute("lineDistance",new ir(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Go.prototype.isLineSegments=!0;class Dd extends Bo{constructor(t,e){super(t,e);this.type="LineLoop"}}Dd.prototype.isLineLoop=!0;class pl extends hr{constructor(t){super();this.type="PointsMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}pl.prototype.isPointsMaterial=!0;const jd=new mt,ml=new Ci,zo=new Qn,Vo=new we;class kd extends Ut{constructor(t=new Yt,e=new pl){super();this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Points.threshold,r=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),zo.copy(n.boundingSphere),zo.applyMatrix4(i),zo.radius+=s,t.ray.intersectsSphere(zo)===!1)return;jd.copy(i).invert(),ml.copy(t.ray).applyMatrix4(jd);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o;if(n.isBufferGeometry){const h=n.index,u=n.attributes.position;if(h!==null){const a=Math.max(0,r.start),l=Math.min(h.count,r.start+r.count);for(let d=a,f=l;d<f;d++){const m=h.getX(d);Vo.fromBufferAttribute(u,m),Nd(Vo,m,c,i,t,e,this)}}else{const a=Math.max(0,r.start),l=Math.min(u.count,r.start+r.count);for(let d=a,f=l;d<f;d++)Vo.fromBufferAttribute(u,d),Nd(Vo,d,c,i,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}kd.prototype.isPoints=!0;function Nd(y,t,e,n,i,s,r){const o=ml.distanceSqToPoint(y);if(o<e){const c=new we;ml.closestPointToPoint(y,c),c.applyMatrix4(n);const h=i.ray.origin.distanceTo(c);if(h<i.near||h>i.far)return;s.push({distance:h,distanceToRay:Math.sqrt(o),point:c,index:t,face:null,object:r})}}class z0 extends dr{constructor(t,e,n,i,s,r,o,c,h){super(t,e,n,i,s,r,o,c,h);this.format=o!==void 0?o:Yn,this.minFilter=r!==void 0?r:Lr,this.magFilter=s!==void 0?s:Lr,this.generateMipmaps=!1;const p=this;function u(){p.needsUpdate=!0,t.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}z0.prototype.isVideoTexture=!0;class V0 extends dr{constructor(t,e,n,i,s,r,o,c,h,p,u,a){super(null,r,o,c,h,p,i,s,u,a);this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}V0.prototype.isCompressedTexture=!0;class H0 extends dr{constructor(t,e,n,i,s,r,o,c,h){super(t,e,n,i,s,r,o,c,h);this.needsUpdate=!0}}H0.prototype.isCanvasTexture=!0;class W0 extends dr{constructor(t,e,n,i,s,r,o,c,h,p){if(p=p!==void 0?p:bi,p!==bi&&p!==ms)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===bi&&(n=so),n===void 0&&p===ms&&(n=ps);super(null,i,s,r,o,c,p,n,h);this.image={width:t,height:e},this.magFilter=o!==void 0?o:cr,this.minFilter=c!==void 0?c:cr,this.flipY=!1,this.generateMipmaps=!1}}W0.prototype.isDepthTexture=!0;new we;new we;new we;new ar;class kr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),s=0;e.push(0);for(let r=1;r<=t;r++)n=this.getPoint(r/t),s+=n.distanceTo(i),e.push(s),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const s=n.length;let r;e?r=e:r=t*n[s-1];let o=0,c=s-1,h;for(;o<=c;)if(i=Math.floor(o+(c-o)/2),h=n[i]-r,h<0)o=i+1;else if(h>0)c=i-1;else{c=i;break}if(i=c,n[i]===r)return i/(s-1);const p=n[i],a=n[i+1]-p,l=(r-p)/a;return(i+l)/(s-1)}getTangent(t,e){const n=1e-4;let i=t-n,s=t+n;i<0&&(i=0),s>1&&(s=1);const r=this.getPoint(i),o=this.getPoint(s),c=e||(r.isVector2?new rt:new we);return c.copy(o).sub(r).normalize(),c}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new we,i=[],s=[],r=[],o=new we,c=new mt;for(let l=0;l<=t;l++){const d=l/t;i[l]=this.getTangentAt(d,new we)}s[0]=new we,r[0]=new we;let h=Number.MAX_VALUE;const p=Math.abs(i[0].x),u=Math.abs(i[0].y),a=Math.abs(i[0].z);p<=h&&(h=p,n.set(1,0,0)),u<=h&&(h=u,n.set(0,1,0)),a<=h&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),r[0].crossVectors(i[0],s[0]);for(let l=1;l<=t;l++){if(s[l]=s[l-1].clone(),r[l]=r[l-1].clone(),o.crossVectors(i[l-1],i[l]),o.length()>Number.EPSILON){o.normalize();const d=Math.acos(Cr(i[l-1].dot(i[l]),-1,1));s[l].applyMatrix4(c.makeRotationAxis(o,d))}r[l].crossVectors(i[l],s[l])}if(e===!0){let l=Math.acos(Cr(s[0].dot(s[t]),-1,1));l/=t,i[0].dot(o.crossVectors(s[0],s[t]))>0&&(l=-l);for(let d=1;d<=t;d++)s[d].applyMatrix4(c.makeRotationAxis(i[d],l*d)),r[d].crossVectors(i[d],s[d])}return{tangents:i,normals:s,binormals:r}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Ho extends kr{constructor(t=0,e=0,n=1,i=1,s=0,r=Math.PI*2,o=!1,c=0){super();this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=r,this.aClockwise=o,this.aRotation=c}getPoint(t,e){const n=e||new rt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(r?s=0:s=i),this.aClockwise===!0&&!r&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+t*s;let c=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const p=Math.cos(this.aRotation),u=Math.sin(this.aRotation),a=c-this.aX,l=h-this.aY;c=a*p-l*u+this.aX,h=a*u+l*p+this.aY}return n.set(c,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Ho.prototype.isEllipseCurve=!0;class Fd extends Ho{constructor(t,e,n,i,s,r){super(t,e,n,n,i,s,r);this.type="ArcCurve"}}Fd.prototype.isArcCurve=!0;function gl(){let y=0,t=0,e=0,n=0;function i(s,r,o,c){y=s,t=o,e=-3*s+3*r-2*o-c,n=2*s-2*r+o+c}return{initCatmullRom:function(s,r,o,c,h){i(r,o,h*(o-s),h*(c-r))},initNonuniformCatmullRom:function(s,r,o,c,h,p,u){let a=(r-s)/h-(o-s)/(h+p)+(o-r)/p,l=(o-r)/p-(c-r)/(p+u)+(c-o)/u;a*=p,l*=p,i(r,o,a,l)},calc:function(s){const r=s*s,o=r*s;return y+t*s+e*r+n*o}}}const Wo=new we,yl=new gl,vl=new gl,_l=new gl;class Ud extends kr{constructor(t=[],e=!1,n="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new we){const n=e,i=this.points,s=i.length,r=(s-(this.closed?0:1))*t;let o=Math.floor(r),c=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:c===0&&o===s-1&&(o=s-2,c=1);let h,p;this.closed||o>0?h=i[(o-1)%s]:(Wo.subVectors(i[0],i[1]).add(i[0]),h=Wo);const u=i[o%s],a=i[(o+1)%s];if(this.closed||o+2<s?p=i[(o+2)%s]:(Wo.subVectors(i[s-1],i[s-2]).add(i[s-1]),p=Wo),this.curveType==="centripetal"||this.curveType==="chordal"){const l=this.curveType==="chordal"?.5:.25;let d=Math.pow(h.distanceToSquared(u),l),f=Math.pow(u.distanceToSquared(a),l),m=Math.pow(a.distanceToSquared(p),l);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),yl.initNonuniformCatmullRom(h.x,u.x,a.x,p.x,d,f,m),vl.initNonuniformCatmullRom(h.y,u.y,a.y,p.y,d,f,m),_l.initNonuniformCatmullRom(h.z,u.z,a.z,p.z,d,f,m)}else this.curveType==="catmullrom"&&(yl.initCatmullRom(h.x,u.x,a.x,p.x,this.tension),vl.initCatmullRom(h.y,u.y,a.y,p.y,this.tension),_l.initCatmullRom(h.z,u.z,a.z,p.z,this.tension));return n.set(yl.calc(c),vl.calc(c),_l.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new we().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}Ud.prototype.isCatmullRomCurve3=!0;function Bd(y,t,e,n,i){const s=(n-t)*.5,r=(i-e)*.5,o=y*y,c=y*o;return(2*e-2*n+s+r)*c+(-3*e+3*n-2*s-r)*o+s*y+e}function q0(y,t){const e=1-y;return e*e*t}function X0(y,t){return 2*(1-y)*y*t}function Y0(y,t){return y*y*t}function Is(y,t,e,n){return q0(y,t)+X0(y,e)+Y0(y,n)}function Z0(y,t){const e=1-y;return e*e*e*t}function J0(y,t){const e=1-y;return 3*e*e*y*t}function K0(y,t){return 3*(1-y)*y*y*t}function $0(y,t){return y*y*y*t}function Os(y,t,e,n,i){return Z0(y,t)+J0(y,e)+K0(y,n)+$0(y,i)}class bl extends kr{constructor(t=new rt,e=new rt,n=new rt,i=new rt){super();this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new rt){const n=e,i=this.v0,s=this.v1,r=this.v2,o=this.v3;return n.set(Os(t,i.x,s.x,r.x,o.x),Os(t,i.y,s.y,r.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}bl.prototype.isCubicBezierCurve=!0;class Gd extends kr{constructor(t=new we,e=new we,n=new we,i=new we){super();this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new we){const n=e,i=this.v0,s=this.v1,r=this.v2,o=this.v3;return n.set(Os(t,i.x,s.x,r.x,o.x),Os(t,i.y,s.y,r.y,o.y),Os(t,i.z,s.z,r.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Gd.prototype.isCubicBezierCurve3=!0;class qo extends kr{constructor(t=new rt,e=new rt){super();this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new rt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new rt;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}qo.prototype.isLineCurve=!0;class Q0 extends kr{constructor(t=new we,e=new we){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new we){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class xl extends kr{constructor(t=new rt,e=new rt,n=new rt){super();this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new rt){const n=e,i=this.v0,s=this.v1,r=this.v2;return n.set(Is(t,i.x,s.x,r.x),Is(t,i.y,s.y,r.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}xl.prototype.isQuadraticBezierCurve=!0;class zd extends kr{constructor(t=new we,e=new we,n=new we){super();this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new we){const n=e,i=this.v0,s=this.v1,r=this.v2;return n.set(Is(t,i.x,s.x,r.x),Is(t,i.y,s.y,r.y),Is(t,i.z,s.z,r.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}zd.prototype.isQuadraticBezierCurve3=!0;class wl extends kr{constructor(t=[]){super();this.type="SplineCurve",this.points=t}getPoint(t,e=new rt){const n=e,i=this.points,s=(i.length-1)*t,r=Math.floor(s),o=s-r,c=i[r===0?r:r-1],h=i[r],p=i[r>i.length-2?i.length-1:r+1],u=i[r>i.length-3?i.length-1:r+2];return n.set(Bd(o,c.x,h.x,p.x,u.x),Bd(o,c.y,h.y,p.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new rt().fromArray(i))}return this}}wl.prototype.isSplineCurve=!0;var Vd=Object.freeze({__proto__:null,ArcCurve:Fd,CatmullRomCurve3:Ud,CubicBezierCurve:bl,CubicBezierCurve3:Gd,EllipseCurve:Ho,LineCurve:qo,LineCurve3:Q0,QuadraticBezierCurve:xl,QuadraticBezierCurve3:zd,SplineCurve:wl});class e_ extends kr{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new qo(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const r=i[s]-n,o=this.curves[s],c=o.getLength(),h=c===0?0:1-r/c;return o.getPointAt(h,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const r=s[i],o=r&&r.isEllipseCurve?t*2:r&&(r.isLineCurve||r.isLineCurve3)?1:r&&r.isSplineCurve?t*r.points.length:t,c=r.getPoints(o);for(let h=0;h<c.length;h++){const p=c[h];n&&n.equals(p)||(e.push(p),n=p)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(new Vd[i.type]().fromJSON(i))}return this}}class Sl extends e_{constructor(t){super();this.type="Path",this.currentPoint=new rt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new qo(this.currentPoint.clone(),new rt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const s=new xl(this.currentPoint.clone(),new rt(t,e),new rt(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,s,r){const o=new bl(this.currentPoint.clone(),new rt(t,e),new rt(n,i),new rt(s,r));return this.curves.push(o),this.currentPoint.set(s,r),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new wl(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,s,r){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+o,e+c,n,i,s,r),this}absarc(t,e,n,i,s,r){return this.absellipse(t,e,n,n,i,s,r),this}ellipse(t,e,n,i,s,r,o,c){const h=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(t+h,e+p,n,i,s,r,o,c),this}absellipse(t,e,n,i,s,r,o,c){const h=new Ho(t,e,n,i,s,r,o,c);if(this.curves.length>0){const u=h.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(h);const p=h.getPoint(1);return this.currentPoint.copy(p),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Ds extends Sl{constructor(t){super(t);this.uuid=Or(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(new Sl().fromJSON(i))}return this}}const t_={triangulate:function(y,t,e=2){const n=t&&t.length,i=n?t[0]*e:y.length;let s=Hd(y,0,i,e,!0);const r=[];if(!s||s.next===s.prev)return r;let o,c,h,p,u,a,l;if(n&&(s=o_(y,t,s,e)),y.length>80*e){o=h=y[0],c=p=y[1];for(let d=e;d<i;d+=e)u=y[d],a=y[d+1],u<o&&(o=u),a<c&&(c=a),u>h&&(h=u),a>p&&(p=a);l=Math.max(h-o,p-c),l=l!==0?1/l:0}return js(s,r,e,o,c,l),r}};function Hd(y,t,e,n,i){let s,r;if(i===y_(y,t,e,n)>0)for(s=t;s<e;s+=n)r=Xd(s,y[s],y[s+1],r);else for(s=e-n;s>=t;s-=n)r=Xd(s,y[s],y[s+1],r);return r&&Xo(r,r.next)&&(Ns(r),r=r.next),r}function jn(y,t){if(!y)return y;t||(t=y);let e=y,n;do if(n=!1,!e.steiner&&(Xo(e,e.next)||er(e.prev,e,e.next)===0)){if(Ns(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function js(y,t,e,n,i,s,r){if(!y)return;!r&&s&&d_(y,n,i,s);let o=y,c,h;for(;y.prev!==y.next;){if(c=y.prev,h=y.next,s?n_(y,n,i,s):r_(y)){t.push(c.i/e),t.push(y.i/e),t.push(h.i/e),Ns(y),y=h.next,o=h.next;continue}if(y=h,y===o){r?r===1?(y=i_(jn(y),t,e),js(y,t,e,n,i,s,2)):r===2&&s_(y,t,e,n,i,s):js(jn(y),t,e,n,i,s,1);break}}}function r_(y){const t=y.prev,e=y,n=y.next;if(er(t,e,n)>=0)return!1;let i=y.next.next;for(;i!==y.prev;){if($i(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)&&er(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function n_(y,t,e,n){const i=y.prev,s=y,r=y.next;if(er(i,s,r)>=0)return!1;const o=i.x<s.x?i.x<r.x?i.x:r.x:s.x<r.x?s.x:r.x,c=i.y<s.y?i.y<r.y?i.y:r.y:s.y<r.y?s.y:r.y,h=i.x>s.x?i.x>r.x?i.x:r.x:s.x>r.x?s.x:r.x,p=i.y>s.y?i.y>r.y?i.y:r.y:s.y>r.y?s.y:r.y,u=Ml(o,c,t,e,n),a=Ml(h,p,t,e,n);let l=y.prevZ,d=y.nextZ;for(;l&&l.z>=u&&d&&d.z<=a;){if(l!==y.prev&&l!==y.next&&$i(i.x,i.y,s.x,s.y,r.x,r.y,l.x,l.y)&&er(l.prev,l,l.next)>=0||(l=l.prevZ,d!==y.prev&&d!==y.next&&$i(i.x,i.y,s.x,s.y,r.x,r.y,d.x,d.y)&&er(d.prev,d,d.next)>=0))return!1;d=d.nextZ}for(;l&&l.z>=u;){if(l!==y.prev&&l!==y.next&&$i(i.x,i.y,s.x,s.y,r.x,r.y,l.x,l.y)&&er(l.prev,l,l.next)>=0)return!1;l=l.prevZ}for(;d&&d.z<=a;){if(d!==y.prev&&d!==y.next&&$i(i.x,i.y,s.x,s.y,r.x,r.y,d.x,d.y)&&er(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function i_(y,t,e){let n=y;do{const i=n.prev,s=n.next.next;!Xo(i,s)&&Wd(i,n,n.next,s)&&ks(i,s)&&ks(s,i)&&(t.push(i.i/e),t.push(n.i/e),t.push(s.i/e),Ns(n),Ns(n.next),n=y=s),n=n.next}while(n!==y);return jn(n)}function s_(y,t,e,n,i,s){let r=y;do{let o=r.next.next;for(;o!==r.prev;){if(r.i!==o.i&&p_(r,o)){let c=qd(r,o);r=jn(r,r.next),c=jn(c,c.next),js(r,t,e,n,i,s),js(c,t,e,n,i,s);return}o=o.next}r=r.next}while(r!==y)}function o_(y,t,e,n){const i=[];let s,r,o,c,h;for(s=0,r=t.length;s<r;s++)o=t[s]*n,c=s<r-1?t[s+1]*n:y.length,h=Hd(y,o,c,n,!1),h===h.next&&(h.steiner=!0),i.push(f_(h));for(i.sort(a_),s=0;s<i.length;s++)l_(i[s],e),e=jn(e,e.next);return e}function a_(y,t){return y.x-t.x}function l_(y,t){if(t=u_(y,t),t){const e=qd(t,y);jn(t,t.next),jn(e,e.next)}}function u_(y,t){let e=t;const n=y.x,i=y.y;let s=-1/0,r;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){const a=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=n&&a>s){if(s=a,a===n){if(i===e.y)return e;if(i===e.next.y)return e.next}r=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!r)return null;if(n===s)return r;const o=r,c=r.x,h=r.y;let p=1/0,u;e=r;do n>=e.x&&e.x>=c&&n!==e.x&&$i(i<h?n:s,i,c,h,i<h?s:n,i,e.x,e.y)&&(u=Math.abs(i-e.y)/(n-e.x),ks(e,y)&&(u<p||u===p&&(e.x>r.x||e.x===r.x&&c_(r,e)))&&(r=e,p=u)),e=e.next;while(e!==o);return r}function c_(y,t){return er(y.prev,y,t.prev)<0&&er(t.next,y,y.next)<0}function d_(y,t,e,n){let i=y;do i.z===null&&(i.z=Ml(i.x,i.y,t,e,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==y);i.prevZ.nextZ=null,i.prevZ=null,h_(i)}function h_(y){let t,e,n,i,s,r,o,c,h=1;do{for(e=y,y=null,s=null,r=0;e;){for(r++,n=e,o=0,t=0;t<h&&(o++,n=n.nextZ,!!n);t++);for(c=h;o>0||c>0&&n;)o!==0&&(c===0||!n||e.z<=n.z)?(i=e,e=e.nextZ,o--):(i=n,n=n.nextZ,c--),s?s.nextZ=i:y=i,i.prevZ=s,s=i;e=n}s.nextZ=null,h*=2}while(r>1);return y}function Ml(y,t,e,n,i){return y=32767*(y-e)*i,t=32767*(t-n)*i,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,y|t<<1}function f_(y){let t=y,e=y;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==y);return e}function $i(y,t,e,n,i,s,r,o){return(i-r)*(t-o)-(y-r)*(s-o)>=0&&(y-r)*(n-o)-(e-r)*(t-o)>=0&&(e-r)*(s-o)-(i-r)*(n-o)>=0}function p_(y,t){return y.next.i!==t.i&&y.prev.i!==t.i&&!m_(y,t)&&(ks(y,t)&&ks(t,y)&&g_(y,t)&&(er(y.prev,y,t.prev)||er(y,t.prev,t))||Xo(y,t)&&er(y.prev,y,y.next)>0&&er(t.prev,t,t.next)>0)}function er(y,t,e){return(t.y-y.y)*(e.x-t.x)-(t.x-y.x)*(e.y-t.y)}function Xo(y,t){return y.x===t.x&&y.y===t.y}function Wd(y,t,e,n){const i=Zo(er(y,t,e)),s=Zo(er(y,t,n)),r=Zo(er(e,n,y)),o=Zo(er(e,n,t));return!!(i!==s&&r!==o||i===0&&Yo(y,e,t)||s===0&&Yo(y,n,t)||r===0&&Yo(e,y,n)||o===0&&Yo(e,t,n))}function Yo(y,t,e){return t.x<=Math.max(y.x,e.x)&&t.x>=Math.min(y.x,e.x)&&t.y<=Math.max(y.y,e.y)&&t.y>=Math.min(y.y,e.y)}function Zo(y){return y>0?1:y<0?-1:0}function m_(y,t){let e=y;do{if(e.i!==y.i&&e.next.i!==y.i&&e.i!==t.i&&e.next.i!==t.i&&Wd(e,e.next,y,t))return!0;e=e.next}while(e!==y);return!1}function ks(y,t){return er(y.prev,y,y.next)<0?er(y,t,y.next)>=0&&er(y,y.prev,t)>=0:er(y,t,y.prev)<0||er(y,y.next,t)<0}function g_(y,t){let e=y,n=!1;const i=(y.x+t.x)/2,s=(y.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&i<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==y);return n}function qd(y,t){const e=new El(y.i,y.x,y.y),n=new El(t.i,t.x,t.y),i=y.next,s=t.prev;return y.next=t,t.prev=y,e.next=i,i.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function Xd(y,t,e,n){const i=new El(y,t,e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ns(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function El(y,t,e){this.i=y,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y_(y,t,e,n){let i=0;for(let s=t,r=e-n;s<e;s+=n)i+=(y[r]-y[s])*(y[s+1]+y[r+1]),r=s;return i}class kn{static area(t){const e=t.length;let n=0;for(let i=e-1,s=0;s<e;i=s++)n+=t[i].x*t[s].y-t[s].x*t[i].y;return n*.5}static isClockWise(t){return kn.area(t)<0}static triangulateShape(t,e){const n=[],i=[],s=[];Yd(t),Zd(n,t);let r=t.length;e.forEach(Yd);for(let c=0;c<e.length;c++)i.push(r),r+=e[c].length,Zd(n,e[c]);const o=t_.triangulate(n,i);for(let c=0;c<o.length;c+=3)s.push(o.slice(c,c+3));return s}}function Yd(y){const t=y.length;t>2&&y[t-1].equals(y[0])&&y.pop()}function Zd(y,t){for(let e=0;e<t.length;e++)y.push(t[e].x),y.push(t[e].y)}class Qi extends Yt{constructor(t=new Ds([new rt(.5,.5),new rt(-.5,.5),new rt(-.5,-.5),new rt(.5,-.5)]),e={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],s=[];for(let o=0,c=t.length;o<c;o++){const h=t[o];r(h)}this.setAttribute("position",new ir(i,3)),this.setAttribute("uv",new ir(s,2)),this.computeVertexNormals();function r(o){const c=[],h=e.curveSegments!==void 0?e.curveSegments:12,p=e.steps!==void 0?e.steps:1;let u=e.depth!==void 0?e.depth:1,a=e.bevelEnabled!==void 0?e.bevelEnabled:!0,l=e.bevelThickness!==void 0?e.bevelThickness:.2,d=e.bevelSize!==void 0?e.bevelSize:l-.1,f=e.bevelOffset!==void 0?e.bevelOffset:0,m=e.bevelSegments!==void 0?e.bevelSegments:3;const g=e.extrudePath,_=e.UVGenerator!==void 0?e.UVGenerator:v_;e.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);let x,w=!1,M,A,T,I;g&&(x=g.getSpacedPoints(p),w=!0,a=!1,M=g.computeFrenetFrames(p,!1),A=new we,T=new we,I=new we),a||(m=0,l=0,d=0,f=0);const R=o.extractPoints(h);let P=R.shape;const O=R.holes;if(!kn.isClockWise(P)){P=P.reverse();for(let te=0,be=O.length;te<be;te++){const $=O[te];kn.isClockWise($)&&(O[te]=$.reverse())}}const k=kn.triangulateShape(P,O),N=P;for(let te=0,be=O.length;te<be;te++){const $=O[te];P=P.concat($)}function q(te,be,$){return be||console.error("THREE.ExtrudeGeometry: vec does not exist"),be.clone().multiplyScalar($).add(te)}const X=P.length,G=k.length;function Q(te,be,$){let me,ue,B;const W=te.x-be.x,ye=te.y-be.y,xe=$.x-te.x,Re=$.y-te.y,Ve=W*W+ye*ye,Pe=W*Re-ye*xe;if(Math.abs(Pe)>Number.EPSILON){const Ke=Math.sqrt(Ve),$e=Math.sqrt(xe*xe+Re*Re),Le=be.x-ye/Ke,ae=be.y+W/Ke,De=$.x-Re/$e,ie=$.y+xe/$e,Fe=((De-Le)*Re-(ie-ae)*xe)/(W*Re-ye*xe);me=Le+W*Fe-te.x,ue=ae+ye*Fe-te.y;const Ce=me*me+ue*ue;if(Ce<=2)return new rt(me,ue);B=Math.sqrt(Ce/2)}else{let Ke=!1;W>Number.EPSILON?xe>Number.EPSILON&&(Ke=!0):W<-Number.EPSILON?xe<-Number.EPSILON&&(Ke=!0):Math.sign(ye)===Math.sign(Re)&&(Ke=!0),Ke?(me=-ye,ue=W,B=Math.sqrt(Ve)):(me=W,ue=ye,B=Math.sqrt(Ve/2))}return new rt(me/B,ue/B)}const K=[];for(let te=0,be=N.length,$=be-1,me=te+1;te<be;te++,$++,me++)$===be&&($=0),me===be&&(me=0),K[te]=Q(N[te],N[$],N[me]);const _e=[];let pe,ge=K.concat();for(let te=0,be=O.length;te<be;te++){const $=O[te];pe=[];for(let me=0,ue=$.length,B=ue-1,W=me+1;me<ue;me++,B++,W++)B===ue&&(B=0),W===ue&&(W=0),pe[me]=Q($[me],$[B],$[W]);_e.push(pe),ge=ge.concat(pe)}for(let te=0;te<m;te++){const be=te/m,$=l*Math.cos(be*Math.PI/2),me=d*Math.sin(be*Math.PI/2)+f;for(let ue=0,B=N.length;ue<B;ue++){const W=q(N[ue],K[ue],me);F(W.x,W.y,-$)}for(let ue=0,B=O.length;ue<B;ue++){const W=O[ue];pe=_e[ue];for(let ye=0,xe=W.length;ye<xe;ye++){const Re=q(W[ye],pe[ye],me);F(Re.x,Re.y,-$)}}}const ce=d+f;for(let te=0;te<X;te++){const be=a?q(P[te],ge[te],ce):P[te];w?(T.copy(M.normals[0]).multiplyScalar(be.x),A.copy(M.binormals[0]).multiplyScalar(be.y),I.copy(x[0]).add(T).add(A),F(I.x,I.y,I.z)):F(be.x,be.y,0)}for(let te=1;te<=p;te++)for(let be=0;be<X;be++){const $=a?q(P[be],ge[be],ce):P[be];w?(T.copy(M.normals[te]).multiplyScalar($.x),A.copy(M.binormals[te]).multiplyScalar($.y),I.copy(x[te]).add(T).add(A),F(I.x,I.y,I.z)):F($.x,$.y,u/p*te)}for(let te=m-1;te>=0;te--){const be=te/m,$=l*Math.cos(be*Math.PI/2),me=d*Math.sin(be*Math.PI/2)+f;for(let ue=0,B=N.length;ue<B;ue++){const W=q(N[ue],K[ue],me);F(W.x,W.y,u+$)}for(let ue=0,B=O.length;ue<B;ue++){const W=O[ue];pe=_e[ue];for(let ye=0,xe=W.length;ye<xe;ye++){const Re=q(W[ye],pe[ye],me);w?F(Re.x,Re.y+x[p-1].y,x[p-1].x+$):F(Re.x,Re.y,u+$)}}}de(),Ee();function de(){const te=i.length/3;if(a){let be=0,$=X*be;for(let me=0;me<G;me++){const ue=k[me];V(ue[2]+$,ue[1]+$,ue[0]+$)}be=p+m*2,$=X*be;for(let me=0;me<G;me++){const ue=k[me];V(ue[0]+$,ue[1]+$,ue[2]+$)}}else{for(let be=0;be<G;be++){const $=k[be];V($[2],$[1],$[0])}for(let be=0;be<G;be++){const $=k[be];V($[0]+X*p,$[1]+X*p,$[2]+X*p)}}n.addGroup(te,i.length/3-te,0)}function Ee(){const te=i.length/3;let be=0;C(N,be),be+=N.length;for(let $=0,me=O.length;$<me;$++){const ue=O[$];C(ue,be),be+=ue.length}n.addGroup(te,i.length/3-te,1)}function C(te,be){let $=te.length;for(;--$>=0;){const me=$;let ue=$-1;ue<0&&(ue=te.length-1);for(let B=0,W=p+m*2;B<W;B++){const ye=X*B,xe=X*(B+1),Re=be+me+ye,Ve=be+ue+ye,Pe=be+ue+xe,Ke=be+me+xe;ne(Re,Ve,Pe,Ke)}}}function F(te,be,$){c.push(te),c.push(be),c.push($)}function V(te,be,$){re(te),re(be),re($);const me=i.length/3,ue=_.generateTopUV(n,i,me-3,me-2,me-1);se(ue[0]),se(ue[1]),se(ue[2])}function ne(te,be,$,me){re(te),re(be),re(me),re(be),re($),re(me);const ue=i.length/3,B=_.generateSideWallUV(n,i,ue-6,ue-3,ue-2,ue-1);se(B[0]),se(B[1]),se(B[3]),se(B[1]),se(B[2]),se(B[3])}function re(te){i.push(c[te*3+0]),i.push(c[te*3+1]),i.push(c[te*3+2])}function se(te){s.push(te.x),s.push(te.y)}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return __(e,n,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const o=e[t.shapes[s]];n.push(o)}const i=t.options.extrudePath;return i!==void 0&&(t.options.extrudePath=new Vd[i.type]().fromJSON(i)),new Qi(n,t.options)}}const v_={generateTopUV:function(y,t,e,n,i){const s=t[e*3],r=t[e*3+1],o=t[n*3],c=t[n*3+1],h=t[i*3],p=t[i*3+1];return[new rt(s,r),new rt(o,c),new rt(h,p)]},generateSideWallUV:function(y,t,e,n,i,s){const r=t[e*3],o=t[e*3+1],c=t[e*3+2],h=t[n*3],p=t[n*3+1],u=t[n*3+2],a=t[i*3],l=t[i*3+1],d=t[i*3+2],f=t[s*3],m=t[s*3+1],g=t[s*3+2];return Math.abs(o-p)<Math.abs(r-h)?[new rt(r,1-c),new rt(h,1-u),new rt(a,1-d),new rt(f,1-g)]:[new rt(o,1-c),new rt(p,1-u),new rt(l,1-d),new rt(m,1-g)]}};function __(y,t,e){if(e.shapes=[],Array.isArray(y))for(let n=0,i=y.length;n<i;n++){const s=y[n];e.shapes.push(s.uuid)}else e.shapes.push(y.uuid);return t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class Tl extends Yt{constructor(t=new Ds([new rt(0,.5),new rt(-.5,-.5),new rt(.5,-.5)]),e=12){super();this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],s=[],r=[];let o=0,c=0;if(Array.isArray(t)===!1)h(t);else for(let p=0;p<t.length;p++)h(t[p]),this.addGroup(o,c,p),o+=c,c=0;this.setIndex(n),this.setAttribute("position",new ir(i,3)),this.setAttribute("normal",new ir(s,3)),this.setAttribute("uv",new ir(r,2));function h(p){const u=i.length/3,a=p.extractPoints(e);let l=a.shape;const d=a.holes;kn.isClockWise(l)===!1&&(l=l.reverse());for(let m=0,g=d.length;m<g;m++){const _=d[m];kn.isClockWise(_)===!0&&(d[m]=_.reverse())}const f=kn.triangulateShape(l,d);for(let m=0,g=d.length;m<g;m++){const _=d[m];l=l.concat(_)}for(let m=0,g=l.length;m<g;m++){const _=l[m];i.push(_.x,_.y,0),s.push(0,0,1),r.push(_.x,_.y)}for(let m=0,g=f.length;m<g;m++){const _=f[m],x=_[0]+u,w=_[1]+u,M=_[2]+u;n.push(x,w,M),c+=3}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return b_(e,t)}static fromJSON(t,e){const n=[];for(let i=0,s=t.shapes.length;i<s;i++){const r=e[t.shapes[i]];n.push(r)}return new Tl(n,t.curveSegments)}}function b_(y,t){if(t.shapes=[],Array.isArray(y))for(let e=0,n=y.length;e<n;e++){const i=y[e];t.shapes.push(i.uuid)}else t.shapes.push(y.uuid);return t}class Al extends Yt{constructor(t=1,e=32,n=16,i=0,s=Math.PI*2,r=0,o=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:s,thetaStart:r,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const c=Math.min(r+o,Math.PI);let h=0;const p=[],u=new we,a=new we,l=[],d=[],f=[],m=[];for(let g=0;g<=n;g++){const _=[],x=g/n;let w=0;g==0&&r==0?w=.5/e:g==n&&c==Math.PI&&(w=-.5/e);for(let M=0;M<=e;M++){const A=M/e;u.x=-t*Math.cos(i+A*s)*Math.sin(r+x*o),u.y=t*Math.cos(r+x*o),u.z=t*Math.sin(i+A*s)*Math.sin(r+x*o),d.push(u.x,u.y,u.z),a.copy(u).normalize(),f.push(a.x,a.y,a.z),m.push(A+w,1-x),_.push(h++)}p.push(_)}for(let g=0;g<n;g++)for(let _=0;_<e;_++){const x=p[g][_+1],w=p[g][_],M=p[g+1][_],A=p[g+1][_+1];(g!==0||r>0)&&l.push(x,w,A),(g!==n-1||c<Math.PI)&&l.push(w,M,A)}this.setIndex(l),this.setAttribute("position",new ir(d,3)),this.setAttribute("normal",new ir(f,3)),this.setAttribute("uv",new ir(m,2))}static fromJSON(t){return new Al(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class x_ extends hr{constructor(t){super();this.type="ShadowMaterial",this.color=new ut(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}x_.prototype.isShadowMaterial=!0;class Fs extends hr{constructor(t){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zn,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Fs.prototype.isMeshStandardMaterial=!0;class ni extends Fs{constructor(t){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ut(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}ni.prototype.isMeshPhysicalMaterial=!0;class w_ extends hr{constructor(t){super();this.type="MeshPhongMaterial",this.color=new ut(16777215),this.specular=new ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zn,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}w_.prototype.isMeshPhongMaterial=!0;class S_ extends hr{constructor(t){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zn,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}S_.prototype.isMeshToonMaterial=!0;class M_ extends hr{constructor(t){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zn,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}M_.prototype.isMeshNormalMaterial=!0;class E_ extends hr{constructor(t){super();this.type="MeshLambertMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}E_.prototype.isMeshLambertMaterial=!0;class T_ extends hr{constructor(t){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zn,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}T_.prototype.isMeshMatcapMaterial=!0;class A_ extends Ki{constructor(t){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}A_.prototype.isLineDashedMaterial=!0;const Qt={arraySlice:function(y,t,e){return Qt.isTypedArray(y)?new y.constructor(y.subarray(t,e!==void 0?e:y.length)):y.slice(t,e)},convertArray:function(y,t,e){return!y||!e&&y.constructor===t?y:typeof t.BYTES_PER_ELEMENT=="number"?new t(y):Array.prototype.slice.call(y)},isTypedArray:function(y){return ArrayBuffer.isView(y)&&!(y instanceof DataView)},getKeyframeOrder:function(y){function t(i,s){return y[i]-y[s]}const e=y.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort(t),n},sortedArray:function(y,t,e){const n=y.length,i=new y.constructor(n);for(let s=0,r=0;r!==n;++s){const o=e[s]*t;for(let c=0;c!==t;++c)i[r++]=y[o+c]}return i},flattenJSON:function(y,t,e,n){let i=1,s=y[0];for(;s!==void 0&&s[n]===void 0;)s=y[i++];if(s===void 0)return;let r=s[n];if(r!==void 0)if(Array.isArray(r))do r=s[n],r!==void 0&&(t.push(s.time),e.push.apply(e,r)),s=y[i++];while(s!==void 0);else if(r.toArray!==void 0)do r=s[n],r!==void 0&&(t.push(s.time),r.toArray(e,e.length)),s=y[i++];while(s!==void 0);else do r=s[n],r!==void 0&&(t.push(s.time),e.push(r)),s=y[i++];while(s!==void 0)},subclip:function(y,t,e,n,i=30){const s=y.clone();s.name=t;const r=[];for(let c=0;c<s.tracks.length;++c){const h=s.tracks[c],p=h.getValueSize(),u=[],a=[];for(let l=0;l<h.times.length;++l){const d=h.times[l]*i;if(!(d<e||d>=n)){u.push(h.times[l]);for(let f=0;f<p;++f)a.push(h.values[l*p+f])}}u.length!==0&&(h.times=Qt.convertArray(u,h.times.constructor),h.values=Qt.convertArray(a,h.values.constructor),r.push(h))}s.tracks=r;let o=1/0;for(let c=0;c<s.tracks.length;++c)o>s.tracks[c].times[0]&&(o=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(y,t=0,e=y,n=30){n<=0&&(n=30);const i=e.tracks.length,s=t/n;for(let r=0;r<i;++r){const o=e.tracks[r],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const h=y.tracks.find(function(g){return g.name===o.name&&g.ValueTypeName===c});if(h===void 0)continue;let p=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=u/3);let a=0;const l=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);const d=o.times.length-1;let f;if(s<=o.times[0]){const g=p,_=u-p;f=Qt.arraySlice(o.values,g,_)}else if(s>=o.times[d]){const g=d*u+p,_=g+u-p;f=Qt.arraySlice(o.values,g,_)}else{const g=o.createInterpolant(),_=p,x=u-p;g.evaluate(s),f=Qt.arraySlice(g.resultBuffer,_,x)}c==="quaternion"&&new Sr().fromArray(f).normalize().conjugate().toArray(f);const m=h.times.length;for(let g=0;g<m;++g){const _=g*l+a;if(c==="quaternion")Sr.multiplyQuaternionsFlat(h.values,_,f,0,h.values,_);else{const x=l-a*2;for(let w=0;w<x;++w)h.values[_+w]-=f[w]}}}return y.blendMode=ac,y}};class mn{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],s=e[n-1];e:{t:{let r;r:{n:if(!(t<i)){for(let o=n+2;;){if(i===void 0){if(t<s)break n;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,s)}if(n===o)break;if(s=i,i=e[++n],t<i)break t}r=e.length;break r}if(!(t>=s)){const o=e[1];t<o&&(n=2,s=o);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===c)break;if(i=s,s=e[--n-1],t>=s)break t}r=n,n=0;break r}break e}for(;n<r;){const o=n+r>>>1;t<e[o]?r=o:n=o+1}if(i=e[n],s=e[n-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(i===void 0)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,s,t)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=t*i;for(let r=0;r!==i;++r)e[r]=n[s+r];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}mn.prototype.beforeStart_=mn.prototype.copySampleValue_;mn.prototype.afterEnd_=mn.prototype.copySampleValue_;class L_ extends mn{constructor(t,e,n,i){super(t,e,n,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:wi,endingEnd:wi}}intervalChanged_(t,e,n){const i=this.parameterPositions;let s=t-2,r=t+1,o=i[s],c=i[r];if(o===void 0)switch(this.getSettings_().endingStart){case Si:s=t,o=2*e-n;break;case ao:s=i.length-2,o=e+i[s]-i[s+1];break;default:s=t,o=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Si:r=t,c=2*n-e;break;case ao:r=1,c=n+i[1]-i[0];break;default:r=t-1,c=e}const h=(n-e)*.5,p=this.valueSize;this._weightPrev=h/(e-o),this._weightNext=h/(c-n),this._offsetPrev=s*p,this._offsetNext=r*p}interpolate_(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,c=t*o,h=c-o,p=this._offsetPrev,u=this._offsetNext,a=this._weightPrev,l=this._weightNext,d=(n-e)/(i-e),f=d*d,m=f*d,g=-a*m+2*a*f-a*d,_=(1+a)*m+(-1.5-2*a)*f+(-.5+a)*d+1,x=(-1-l)*m+(1.5+l)*f+.5*d,w=l*m-l*f;for(let M=0;M!==o;++M)s[M]=g*r[p+M]+_*r[h+M]+x*r[c+M]+w*r[u+M];return s}}class Jd extends mn{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,c=t*o,h=c-o,p=(n-e)/(i-e),u=1-p;for(let a=0;a!==o;++a)s[a]=r[h+a]*u+r[c+a]*p;return s}}class C_ extends mn{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class en{constructor(t,e,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Qt.convertArray(e,this.TimeBufferType),this.values=Qt.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Qt.convertArray(t.times,Array),values:Qt.convertArray(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new C_(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Jd(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new L_(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case gs:e=this.InterpolantFactoryMethodDiscrete;break;case xi:e=this.InterpolantFactoryMethodLinear;break;case xa:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gs;case this.InterpolantFactoryMethodLinear:return xi;case this.InterpolantFactoryMethodSmooth:return xa}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let s=0,r=i-1;for(;s!==i&&n[s]<t;)++s;for(;r!==-1&&n[r]>e;)--r;if(++r,s!==0||r!==i){s>=r&&(r=Math.max(r,1),s=r-1);const o=this.getValueSize();this.times=Qt.arraySlice(n,s,r),this.values=Qt.arraySlice(this.values,s*o,r*o)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let o=0;o!==s;o++){const c=n[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),t=!1;break}if(r!==null&&r>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,r),t=!1;break}r=c}if(i!==void 0&&Qt.isTypedArray(i))for(let o=0,c=i.length;o!==c;++o){const h=i[o];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,h),t=!1;break}}return t}optimize(){const t=Qt.arraySlice(this.times),e=Qt.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===xa,s=t.length-1;let r=1;for(let o=1;o<s;++o){let c=!1;const h=t[o],p=t[o+1];if(h!==p&&(o!==1||h!==t[0]))if(i)c=!0;else{const u=o*n,a=u-n,l=u+n;for(let d=0;d!==n;++d){const f=e[u+d];if(f!==e[a+d]||f!==e[l+d]){c=!0;break}}}if(c){if(o!==r){t[r]=t[o];const u=o*n,a=r*n;for(let l=0;l!==n;++l)e[a+l]=e[u+l]}++r}}if(s>0){t[r]=t[s];for(let o=s*n,c=r*n,h=0;h!==n;++h)e[c+h]=e[o+h];++r}return r!==t.length?(this.times=Qt.arraySlice(t,0,r),this.values=Qt.arraySlice(e,0,r*n)):(this.times=t,this.values=e),this}clone(){const t=Qt.arraySlice(this.times,0),e=Qt.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}en.prototype.TimeBufferType=Float32Array;en.prototype.ValueBufferType=Float32Array;en.prototype.DefaultInterpolation=xi;class es extends en{}es.prototype.ValueTypeName="bool";es.prototype.ValueBufferType=Array;es.prototype.DefaultInterpolation=gs;es.prototype.InterpolantFactoryMethodLinear=void 0;es.prototype.InterpolantFactoryMethodSmooth=void 0;class Kd extends en{}Kd.prototype.ValueTypeName="color";class Us extends en{}Us.prototype.ValueTypeName="number";class R_ extends mn{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,c=(n-e)/(i-e);let h=t*o;for(let p=h+o;h!==p;h+=4)Sr.slerpFlat(s,0,r,h-o,r,h,c);return s}}class ii extends en{InterpolantFactoryMethodLinear(t){return new R_(this.times,this.values,this.getValueSize(),t)}}ii.prototype.ValueTypeName="quaternion";ii.prototype.DefaultInterpolation=xi;ii.prototype.InterpolantFactoryMethodSmooth=void 0;class ts extends en{}ts.prototype.ValueTypeName="string";ts.prototype.ValueBufferType=Array;ts.prototype.DefaultInterpolation=gs;ts.prototype.InterpolantFactoryMethodLinear=void 0;ts.prototype.InterpolantFactoryMethodSmooth=void 0;class Bs extends en{}Bs.prototype.ValueTypeName="vector";class Ll{constructor(t,e=-1,n,i=wa){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=Or(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let r=0,o=n.length;r!==o;++r)e.push(I_(n[r]).scale(i));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,r=n.length;s!==r;++s)e.push(en.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const s=e.length,r=[];for(let o=0;o<s;o++){let c=[],h=[];c.push((o+s-1)%s,o,(o+1)%s),h.push(0,1,0);const p=Qt.getKeyframeOrder(c);c=Qt.sortedArray(c,1,p),h=Qt.sortedArray(h,1,p),!i&&c[0]===0&&(c.push(s),h.push(h[0])),r.push(new Us(".morphTargetInfluences["+e[o].name+"]",c,h).scale(1/n))}return new this(t,-1,r)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,c=t.length;o<c;o++){const h=t[o],p=h.name.match(s);if(p&&p.length>1){const u=p[1];let a=i[u];a||(i[u]=a=[]),a.push(h)}}const r=[];for(const o in i)r.push(this.CreateFromMorphTargetSequence(o,i[o],e,n));return r}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,a,l,d,f){if(l.length!==0){const m=[],g=[];Qt.flattenJSON(l,m,g,d),m.length!==0&&f.push(new u(a,m,g))}},i=[],s=t.name||"default",r=t.fps||30,o=t.blendMode;let c=t.length||-1;const h=t.hierarchy||[];for(let u=0;u<h.length;u++){const a=h[u].keys;if(!(!a||a.length===0))if(a[0].morphTargets){const l={};let d;for(d=0;d<a.length;d++)if(a[d].morphTargets)for(let f=0;f<a[d].morphTargets.length;f++)l[a[d].morphTargets[f]]=-1;for(const f in l){const m=[],g=[];for(let _=0;_!==a[d].morphTargets.length;++_){const x=a[d];m.push(x.time),g.push(x.morphTarget===f?1:0)}i.push(new Us(".morphTargetInfluence["+f+"]",m,g))}c=l.length*(r||1)}else{const l=".bones["+e[u].name+"]";n(Bs,l+".position",a,"pos",i),n(ii,l+".quaternion",a,"rot",i),n(Bs,l+".scale",a,"scl",i)}}return i.length===0?null:new this(s,c,i,o)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function P_(y){switch(y.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Us;case"vector":case"vector2":case"vector3":case"vector4":return Bs;case"color":return Kd;case"quaternion":return ii;case"bool":case"boolean":return es;case"string":return ts}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+y)}function I_(y){if(y.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=P_(y.type);if(y.times===void 0){const e=[],n=[];Qt.flattenJSON(y.keys,e,n,"value"),y.times=e,y.values=n}return t.parse!==void 0?t.parse(y):new t(y.name,y.times,y.values,y.interpolation)}const rs={enabled:!1,files:{},add:function(y,t){this.enabled!==!1&&(this.files[y]=t)},get:function(y){if(this.enabled!==!1)return this.files[y]},remove:function(y){delete this.files[y]},clear:function(){this.files={}}};class O_{constructor(t,e,n){const i=this;let s=!1,r=0,o=0,c;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(p){o++,s===!1&&i.onStart!==void 0&&i.onStart(p,r,o),s=!0},this.itemEnd=function(p){r++,i.onProgress!==void 0&&i.onProgress(p,r,o),r===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,u){return h.push(p,u),this},this.removeHandler=function(p){const u=h.indexOf(p);return u!==-1&&h.splice(u,2),this},this.getHandler=function(p){for(let u=0,a=h.length;u<a;u+=2){const l=h[u],d=h[u+1];if(l.global&&(l.lastIndex=0),l.test(p))return d}return null}}}const D_=new O_;class gn{constructor(t){this.manager=t!==void 0?t:D_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(i,s){n.load(t,i,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const yn={};class Cl extends gn{constructor(t){super(t)}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=rs.get(t);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(yn[t]!==void 0){yn[t].push({onLoad:e,onProgress:n,onError:i});return}yn[t]=[],yn[t].push({onLoad:e,onProgress:n,onError:i});const r=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(r).then(o=>{if(o.status===200||o.status===0){o.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const c=yn[t],h=o.body.getReader(),p=o.headers.get("Content-Length"),u=p?parseInt(p):0,a=u!==0;let l=0;return new ReadableStream({start(d){f();function f(){h.read().then(({done:m,value:g})=>{if(m)d.close();else{l+=g.byteLength;const _=new ProgressEvent("progress",{lengthComputable:a,loaded:l,total:u});for(let x=0,w=c.length;x<w;x++){const M=c[x];M.onProgress&&M.onProgress(_)}d.enqueue(g),f()}})}}})}else throw Error(`fetch for "${o.url}" responded with ${o.status}: ${o.statusText}`)}).then(o=>{const c=new Response(o);switch(this.responseType){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,this.mimeType));case"json":return c.json();default:return c.text()}}).then(o=>{rs.add(t,o);const c=yn[t];delete yn[t];for(let h=0,p=c.length;h<p;h++){const u=c[h];u.onLoad&&u.onLoad(o)}this.manager.itemEnd(t)}).catch(o=>{const c=yn[t];delete yn[t];for(let h=0,p=c.length;h<p;h++){const u=c[h];u.onError&&u.onError(o)}this.manager.itemError(t),this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class $d extends gn{constructor(t){super(t)}load(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=rs.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const o=co("img");function c(){p(),rs.add(t,this),e&&e(this),s.manager.itemEnd(t)}function h(u){p(),i&&i(u),s.manager.itemError(t),s.manager.itemEnd(t)}function p(){o.removeEventListener("load",c,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",h,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(t),o.src=t,o}}class j_ extends gn{constructor(t){super(t)}load(t,e,n,i){const s=new Lo,r=new $d(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let o=0;function c(h){r.load(t[h],function(p){s.images[h]=p,o++,o===6&&(s.needsUpdate=!0,e&&e(s))},void 0,i)}for(let h=0;h<t.length;++h)c(h);return s}}class Qd extends gn{constructor(t){super(t)}load(t,e,n,i){const s=new dr,r=new $d(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(t,function(o){s.image=o,s.needsUpdate=!0,e!==void 0&&e(s)},n,i),s}}class tn extends Ut{constructor(t,e=1){super();this.type="Light",this.color=new ut(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}tn.prototype.isLight=!0;class k_ extends tn{constructor(t,e,n){super(t,n);this.type="HemisphereLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.groundColor=new ut(e)}copy(t){return tn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}k_.prototype.isHemisphereLight=!0;const eh=new mt,th=new we,rh=new we;class Rl{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.map=null,this.mapPass=null,this.matrix=new mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ro,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;th.setFromMatrixPosition(t.matrixWorld),e.position.copy(th),rh.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(rh),e.updateMatrixWorld(),eh.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class nh extends Rl{constructor(){super(new Mr(50,1,.5,500));this.focus=1}updateMatrices(t){const e=this.camera,n=_s*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||i!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=i,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}nh.prototype.isSpotLightShadow=!0;class ih extends tn{constructor(t,e,n=0,i=Math.PI/3,s=0,r=1){super(t,e);this.type="SpotLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.distance=n,this.angle=i,this.penumbra=s,this.decay=r,this.shadow=new nh}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}ih.prototype.isSpotLight=!0;const sh=new mt,Gs=new we,Pl=new we;class oh extends Rl{constructor(){super(new Mr(90,1,.5,500));this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new we(1,0,0),new we(-1,0,0),new we(0,0,1),new we(0,0,-1),new we(0,1,0),new we(0,-1,0)],this._cubeUps=[new we(0,1,0),new we(0,1,0),new we(0,1,0),new we(0,1,0),new we(0,0,1),new we(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Gs.setFromMatrixPosition(t.matrixWorld),n.position.copy(Gs),Pl.copy(n.position),Pl.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Pl),n.updateMatrixWorld(),i.makeTranslation(-Gs.x,-Gs.y,-Gs.z),sh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sh)}}oh.prototype.isPointLightShadow=!0;class ah extends tn{constructor(t,e,n=0,i=1){super(t,e);this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new oh}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}ah.prototype.isPointLight=!0;class lh extends Rl{constructor(){super(new Po(-5,5,5,-5,.5,500))}}lh.prototype.isDirectionalLightShadow=!0;class uh extends tn{constructor(t,e){super(t,e);this.type="DirectionalLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.shadow=new lh}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}uh.prototype.isDirectionalLight=!0;class N_ extends tn{constructor(t,e){super(t,e);this.type="AmbientLight"}}N_.prototype.isAmbientLight=!0;class F_ extends tn{constructor(t,e,n=10,i=10){super(t,e);this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}F_.prototype.isRectAreaLight=!0;class ch{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new we)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,s=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.282095),e.addScaledVector(r[1],.488603*i),e.addScaledVector(r[2],.488603*s),e.addScaledVector(r[3],.488603*n),e.addScaledVector(r[4],1.092548*(n*i)),e.addScaledVector(r[5],1.092548*(i*s)),e.addScaledVector(r[6],.315392*(3*s*s-1)),e.addScaledVector(r[7],1.092548*(n*s)),e.addScaledVector(r[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,s=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.886227),e.addScaledVector(r[1],2*.511664*i),e.addScaledVector(r[2],2*.511664*s),e.addScaledVector(r[3],2*.511664*n),e.addScaledVector(r[4],2*.429043*n*i),e.addScaledVector(r[5],2*.429043*i*s),e.addScaledVector(r[6],.743125*s*s-.247708),e.addScaledVector(r[7],2*.429043*n*s),e.addScaledVector(r[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+i*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+i*3);return t}static getBasisAt(t,e){const n=t.x,i=t.y,s=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*s,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*n*s,e[8]=.546274*(n*n-i*i)}}ch.prototype.isSphericalHarmonics3=!0;class Il extends tn{constructor(t=new ch,e=1){super(void 0,e);this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Il.prototype.isLightProbe=!0;class Nn{static decodeText(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class U_ extends Yt{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}U_.prototype.isInstancedBufferGeometry=!0;class dh extends gn{constructor(t){super(t);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=rs.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){rs.add(t,c),e&&e(c),s.manager.itemEnd(t)}).catch(function(c){i&&i(c),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}}dh.prototype.isImageBitmapLoader=!0;let Jo;const B_={getContext:function(){return Jo===void 0&&(Jo=new(window.AudioContext||window.webkitAudioContext)),Jo},setContext:function(y){Jo=y}};class G_ extends gn{constructor(t){super(t)}load(t,e,n,i){const s=this,r=new Cl(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(o){try{const c=o.slice(0);B_.getContext().decodeAudioData(c,function(p){e(p)})}catch(c){i?i(c):console.error(c),s.manager.itemError(t)}},n,i)}}class z_ extends Il{constructor(t,e,n=1){super(void 0,n);const i=new ut().set(t),s=new ut().set(e),r=new we(i.r,i.g,i.b),o=new we(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(o).multiplyScalar(c),this.sh.coefficients[1].copy(r).sub(o).multiplyScalar(h)}}z_.prototype.isHemisphereLightProbe=!0;class V_ extends Il{constructor(t,e=1){super(void 0,e);const n=new ut().set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}V_.prototype.isAmbientLightProbe=!0;class H_ extends Ut{constructor(t){super();this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class W_{constructor(t,e,n){this.binding=t,this.valueSize=n;let i,s,r;switch(e){case"quaternion":i=this._slerp,s=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,s=t*i+i;let r=this.cumulativeWeight;if(r===0){for(let o=0;o!==i;++o)n[s+o]=n[o];r=e}else{r+=e;const o=e/r;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=r}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,s=this.cumulativeWeight,r=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=e*this._origIndex;this._mixBufferRegion(n,i,c,1-s,e)}r>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let c=e,h=e+e;c!==h;++c)if(n[c]!==n[c+e]){o.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let s=n,r=i;s!==r;++s)e[s]=e[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,s){if(i>=.5)for(let r=0;r!==s;++r)t[e+r]=t[n+r]}_slerp(t,e,n,i){Sr.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,s){const r=this._workIndex*s;Sr.multiplyQuaternionsFlat(t,r,t,e,t,n),Sr.slerpFlat(t,e,t,e,t,r,i)}_lerp(t,e,n,i,s){const r=1-i;for(let o=0;o!==s;++o){const c=e+o;t[c]=t[c]*r+t[n+o]*i}}_lerpAdditive(t,e,n,i,s){for(let r=0;r!==s;++r){const o=e+r;t[o]=t[o]+t[n+r]*i}}}const Ol="\\[\\]\\.:\\/",q_=new RegExp("["+Ol+"]","g"),Dl="[^"+Ol+"]",X_="[^"+Ol.replace("\\.","")+"]",Y_=/((?:WC+[\/:])*)/.source.replace("WC",Dl),Z_=/(WCOD+)?/.source.replace("WCOD",X_),J_=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Dl),K_=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Dl),$_=new RegExp("^"+Y_+Z_+J_+K_+"$"),Q_=["material","materials","bones"];class eb{constructor(t,e,n){const i=n||Bt.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Bt{constructor(t,e,n){this.path=e,this.parsedPath=n||Bt.parseTrackName(e),this.node=Bt.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Bt.Composite(t,e,n):new Bt(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(q_,"")}static parseTrackName(t){const e=$_.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);Q_.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(s){for(let r=0;r<s.length;r++){const o=s[r];if(o.name===e||o.uuid===e)return o;const c=n(o.children);if(c)return c}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let s=e.propertyIndex;if(t||(t=Bt.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let h=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let p=0;p<t.length;p++)if(t[p].name===h){h=p;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(h!==void 0){if(t[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[h]}}const r=t[i];if(r===void 0){const h=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t);return}let o=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else r.fromArray!==void 0&&r.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(c=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Bt.Composite=eb;Bt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Bt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Bt.prototype.GetterByBindingType=[Bt.prototype._getValue_direct,Bt.prototype._getValue_array,Bt.prototype._getValue_arrayElement,Bt.prototype._getValue_toArray];Bt.prototype.SetterByBindingTypeAndVersioning=[[Bt.prototype._setValue_direct,Bt.prototype._setValue_direct_setNeedsUpdate,Bt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_array,Bt.prototype._setValue_array_setNeedsUpdate,Bt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_arrayElement,Bt.prototype._setValue_arrayElement_setNeedsUpdate,Bt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_fromArray,Bt.prototype._setValue_fromArray_setNeedsUpdate,Bt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tb{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const s=e.tracks,r=s.length,o=new Array(r),c={endingStart:wi,endingEnd:wi};for(let h=0;h!==r;++h){const p=s[h].createInterpolant(null);o[h]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ip,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const i=this._clip.duration,s=t._clip.duration,r=s/i,o=i/s;t.warp(1,r,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,s=i.time,r=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,h=o.sampleValues;return c[0]=s,c[1]=s+n,h[0]=t/r,h[1]=e/r,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const c=(t-s)*n;if(c<0||n===0)return;this._startTime=null,e=n*c}e*=this._updateTimeScale(t);const r=this._updateTime(e),o=this._updateWeight(t);if(o>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case ac:for(let p=0,u=c.length;p!==u;++p)c[p].evaluate(r),h[p].accumulateAdditive(o);break;case wa:default:for(let p=0,u=c.length;p!==u;++p)c[p].evaluate(r),h[p].accumulate(i,o)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;n!==null&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,s=this._loopCount;const r=n===Op;if(t===0)return s===-1?i:r&&(s&1)==1?e-i:i;if(n===Pp){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=e)i=e;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,r)):this._setEndings(this.repetitions===0,!0,r)),i>=e||i<0){const o=Math.floor(i/e);i-=e*o,s+=Math.abs(o);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){const h=t<0;this._setEndings(h,!h,r)}else this._setEndings(!1,!1,r);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(r&&(s&1)==1)return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Si,i.endingEnd=Si):(t?i.endingStart=this.zeroSlopeAtStart?Si:wi:i.endingStart=ao,e?i.endingEnd=this.zeroSlopeAtEnd?Si:wi:i.endingEnd=ao)}_scheduleFading(t,e,n){const i=this._mixer,s=i.time;let r=this._weightInterpolant;r===null&&(r=i._lendControlInterpolant(),this._weightInterpolant=r);const o=r.parameterPositions,c=r.sampleValues;return o[0]=s,c[0]=e,o[1]=s+t,c[1]=n,this}}class rb extends Jn{constructor(t){super();this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,s=i.length,r=t._propertyBindings,o=t._interpolants,c=n.uuid,h=this._bindingsByRootAndName;let p=h[c];p===void 0&&(p={},h[c]=p);for(let u=0;u!==s;++u){const a=i[u],l=a.name;let d=p[l];if(d!==void 0)r[u]=d;else{if(d=r[u],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,c,l));continue}const f=e&&e._propertyBindings[u].binding.parsedPath;d=new W_(Bt.create(n,l,f),a.ValueTypeName,a.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,c,l),r[u]=d}o[u].resultBuffer=d.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,i=t._clip.uuid,s=this._actionsByClip[i];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,i,n)}const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];s.useCount++==0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.useCount==0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,s=this._actionsByClip;let r=s[e];if(r===void 0)r={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=r;else{const o=r.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),r.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,r=this._actionsByClip,o=r[s],c=o.knownActions,h=c[c.length-1],p=t._byClipCacheIndex;h._byClipCacheIndex=p,c[p]=h,c.pop(),t._byClipCacheIndex=null;const u=o.actionByRoot,a=(t._localRoot||this._root).uuid;delete u[a],c.length===0&&delete r[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.referenceCount==0&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,s=this._bindings;let r=i[e];r===void 0&&(r={},i[e]=r),r[n]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,s=n.path,r=this._bindingsByRootAndName,o=r[i],c=e[e.length-1],h=t._cacheIndex;c._cacheIndex=h,e[h]=c,e.pop(),delete o[s],Object.keys(o).length===0&&delete r[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new Jd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,s=e[i];t.__cacheIndex=i,e[i]=t,s.__cacheIndex=n,e[n]=s}clipAction(t,e,n){const i=e||this._root,s=i.uuid;let r=typeof t=="string"?Ll.findByName(i,t):t;const o=r!==null?r.uuid:t,c=this._actionsByClip[o];let h=null;if(n===void 0&&(r!==null?n=r.blendMode:n=wa),c!==void 0){const u=c.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;h=c.knownActions[0],r===null&&(r=h._clip)}if(r===null)return null;const p=new tb(this,r,e,n);return this._bindAction(p,h),this._addInactiveAction(p,o,s),p}existingAction(t,e){const n=e||this._root,i=n.uuid,s=typeof t=="string"?Ll.findByName(n,t):t,r=s?s.uuid:t,o=this._actionsByClip[r];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,s=Math.sign(t),r=this._accuIndex^=1;for(let h=0;h!==n;++h)e[h]._update(i,t,s,r);const o=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)o[h].apply(r);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const r=s.knownActions;for(let o=0,c=r.length;o!==c;++o){const h=r[o];this._deactivateAction(h);const p=h._cacheIndex,u=e[e.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,u._cacheIndex=p,e[p]=u,e.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const o=n[r].actionByRoot,c=o[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[e];if(s!==void 0)for(const r in s){const o=s[r];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}rb.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class nb extends Wi{constructor(t,e,n=1){super(t,e);this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}nb.prototype.isInstancedInterleavedBuffer=!0;const Fn=new we,Ko=new mt,jl=new mt;class ib extends Go{constructor(t){const e=hh(t),n=new Yt,i=[],s=[],r=new ut(0,0,1),o=new ut(0,1,0);for(let h=0;h<e.length;h++){const p=e[h];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(r.r,r.g,r.b),s.push(o.r,o.g,o.b))}n.setAttribute("position",new ir(i,3)),n.setAttribute("color",new ir(s,3));const c=new Ki({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");jl.copy(this.root.matrixWorld).invert();for(let s=0,r=0;s<e.length;s++){const o=e[s];o.parent&&o.parent.isBone&&(Ko.multiplyMatrices(jl,o.matrixWorld),Fn.setFromMatrixPosition(Ko),i.setXYZ(r,Fn.x,Fn.y,Fn.z),Ko.multiplyMatrices(jl,o.parent.matrixWorld),Fn.setFromMatrixPosition(Ko),i.setXYZ(r+1,Fn.x,Fn.y,Fn.z),r+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function hh(y){const t=[];y&&y.isBone&&t.push(y);for(let e=0;e<y.children.length;e++)t.push.apply(t,hh(y.children[e]));return t}class r1 extends br{constructor(t,e,n){const i=new Al(e,4,2),s=new fn({wireframe:!0,fog:!1,toneMapped:!1});super(i,s);this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}class sb extends Go{constructor(t=10,e=10,n=4473924,i=8947848){n=new ut(n),i=new ut(i);const s=e/2,r=t/e,o=t/2,c=[],h=[];for(let a=0,l=0,d=-o;a<=e;a++,d+=r){c.push(-o,0,d,o,0,d),c.push(d,0,-o,d,0,o);const f=a===s?n:i;f.toArray(h,l),l+=3,f.toArray(h,l),l+=3,f.toArray(h,l),l+=3,f.toArray(h,l),l+=3}const p=new Yt;p.setAttribute("position",new ir(c,3)),p.setAttribute("color",new ir(h,3));const u=new Ki({vertexColors:!0,toneMapped:!1});super(p,u);this.type="GridHelper"}}const ob=new Float32Array(1);new Int32Array(ob.buffer);kr.create=function(y,t){return console.log("THREE.Curve.create() has been deprecated"),y.prototype=Object.create(kr.prototype),y.prototype.constructor=y,y.prototype.getPoint=t,y};Sl.prototype.fromPoints=function(y){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(y)};sb.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};ib.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};gn.prototype.extractUrlBase=function(y){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Nn.extractUrlBase(y)};gn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Dr.prototype.center=function(y){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(y)};Dr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Dr.prototype.isIntersectionBox=function(y){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(y)};Dr.prototype.isIntersectionSphere=function(y){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(y)};Dr.prototype.size=function(y){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(y)};Qn.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ro.prototype.setFromMatrix=function(y){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(y)};yr.prototype.flattenToArrayOffset=function(y,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(y,t)};yr.prototype.multiplyVector3=function(y){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),y.applyMatrix3(this)};yr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};yr.prototype.applyToBufferAttribute=function(y){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),y.applyMatrix3(this)};yr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};yr.prototype.getInverse=function(y){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(y).invert()};mt.prototype.extractPosition=function(y){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(y)};mt.prototype.flattenToArrayOffset=function(y,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(y,t)};mt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new we().setFromMatrixColumn(this,3)};mt.prototype.setRotationFromQuaternion=function(y){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(y)};mt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};mt.prototype.multiplyVector3=function(y){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),y.applyMatrix4(this)};mt.prototype.multiplyVector4=function(y){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),y.applyMatrix4(this)};mt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};mt.prototype.rotateAxis=function(y){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),y.transformDirection(this)};mt.prototype.crossVector=function(y){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),y.applyMatrix4(this)};mt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};mt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};mt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};mt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};mt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};mt.prototype.applyToBufferAttribute=function(y){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),y.applyMatrix4(this)};mt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};mt.prototype.makeFrustum=function(y,t,e,n,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(y,t,n,e,i,s)};mt.prototype.getInverse=function(y){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(y).invert()};pn.prototype.isIntersectionLine=function(y){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(y)};Sr.prototype.multiplyVector3=function(y){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),y.applyQuaternion(this)};Sr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Ci.prototype.isIntersectionBox=function(y){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(y)};Ci.prototype.isIntersectionPlane=function(y){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(y)};Ci.prototype.isIntersectionSphere=function(y){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(y)};ar.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};ar.prototype.barycoordFromPoint=function(y,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(y,t)};ar.prototype.midpoint=function(y){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(y)};ar.prototypenormal=function(y){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(y)};ar.prototype.plane=function(y){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(y)};ar.barycoordFromPoint=function(y,t,e,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ar.getBarycoord(y,t,e,n,i)};ar.normal=function(y,t,e,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ar.getNormal(y,t,e,n)};Ds.prototype.extractAllPoints=function(y){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(y)};Ds.prototype.extrude=function(y){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Qi(this,y)};Ds.prototype.makeGeometry=function(y){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Tl(this,y)};rt.prototype.fromAttribute=function(y,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(y,t,e)};rt.prototype.distanceToManhattan=function(y){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(y)};rt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};we.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};we.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};we.prototype.getPositionFromMatrix=function(y){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(y)};we.prototype.getScaleFromMatrix=function(y){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(y)};we.prototype.getColumnFromMatrix=function(y,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,y)};we.prototype.applyProjection=function(y){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(y)};we.prototype.fromAttribute=function(y,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(y,t,e)};we.prototype.distanceToManhattan=function(y){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(y)};we.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Wt.prototype.fromAttribute=function(y,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(y,t,e)};Wt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ut.prototype.getChildByName=function(y){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(y)};Ut.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Ut.prototype.translate=function(y,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,y)};Ut.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Ut.prototype.applyMatrix=function(y){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(y)};Object.defineProperties(Ut.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(y){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=y}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});br.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(br.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Dp},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});ul.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Mr.prototype.setLens=function(y,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(y)};Object.defineProperties(tn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(y){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=y}},shadowCameraLeft:{set:function(y){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=y}},shadowCameraRight:{set:function(y){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=y}},shadowCameraTop:{set:function(y){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=y}},shadowCameraBottom:{set:function(y){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=y}},shadowCameraNear:{set:function(y){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=y}},shadowCameraFar:{set:function(y){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=y}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(y){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=y}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(y){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=y}},shadowMapHeight:{set:function(y){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=y}}});Object.defineProperties(nr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===lo},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(lo)}}});nr.prototype.setDynamic=function(y){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(y===!0?lo:ys),this};nr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},nr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Yt.prototype.addIndex=function(y){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(y)};Yt.prototype.addAttribute=function(y,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(y,new nr(arguments[1],arguments[2]))):y==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(y,t)};Yt.prototype.addDrawCall=function(y,t,e){e!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(y,t)};Yt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Yt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Yt.prototype.removeAttribute=function(y){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(y)};Yt.prototype.applyMatrix=function(y){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(y)};Object.defineProperties(Yt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Wi.prototype.setDynamic=function(y){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(y===!0?lo:ys),this};Wi.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Qi.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Qi.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Qi.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};gd.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(hr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ut}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(y){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=y===Gu}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(y){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=y}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(ei.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(y){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=y}}});zt.prototype.clearTarget=function(y,t,e,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(y),this.clear(t,e,n)};zt.prototype.animate=function(y){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(y)};zt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};zt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};zt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};zt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};zt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};zt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};zt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};zt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};zt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};zt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};zt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};zt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};zt.prototype.enableScissorTest=function(y){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(y)};zt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};zt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};zt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};zt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};zt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};zt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};zt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};zt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};zt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};zt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(zt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(y){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=y}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(y){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=y}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(y){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=y===!0?Jr:_r}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(pd.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Kr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(y){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=y}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(y){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=y}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(y){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=y}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(y){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=y}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(y){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=y}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(y){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=y}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(y){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=y}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(y){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=y}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(y){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=y}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(y){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=y}}});H_.prototype.load=function(y){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new G_().load(y,function(n){t.setBuffer(n)}),this};Ka.prototype.updateCubeMap=function(y,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(y,t)};Ka.prototype.clear=function(y,t,e,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(y,t,e,n)};Ei.crossOrigin=void 0;Ei.loadTexture=function(y,t,e,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Qd;i.setCrossOrigin(this.crossOrigin);const s=i.load(y,e,void 0,n);return t&&(s.mapping=t),s};Ei.loadTextureCube=function(y,t,e,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new j_;i.setCrossOrigin(this.crossOrigin);const s=i.load(y,e,void 0,n);return t&&(s.mapping=t),s};Ei.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Ei.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Fu}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Fu);class n1 extends gn{constructor(t){super(t);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new cb(e)}),this.register(function(e){return new gb(e)}),this.register(function(e){return new yb(e)}),this.register(function(e){return new db(e)}),this.register(function(e){return new hb(e)}),this.register(function(e){return new fb(e)}),this.register(function(e){return new pb(e)}),this.register(function(e){return new mb(e)}),this.register(function(e){return new lb(e)}),this.register(function(e){return new vb(e)})}load(t,e,n,i){const s=this;let r;this.resourcePath!==""?r=this.resourcePath:this.path!==""?r=this.path:r=Nn.extractUrlBase(t),this.manager.itemStart(t);const o=function(h){i?i(h):console.error(h),s.manager.itemError(t),s.manager.itemEnd(t)},c=new Cl(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(h){try{s.parse(h,r,function(p){e(p),s.manager.itemEnd(t)},o)}catch(p){o(p)}},n,o)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let s;const r={},o={};if(typeof t=="string")s=t;else if(Nn.decodeText(new Uint8Array(t,0,4))===fh){try{r[Pt.KHR_BINARY_GLTF]=new _b(t)}catch(u){i&&i(u);return}s=r[Pt.KHR_BINARY_GLTF].content}else s=Nn.decodeText(new Uint8Array(t));const c=JSON.parse(s);if(c.asset===void 0||c.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new Pb(c,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const u=this.pluginCallbacks[p](h);o[u.name]=u,r[u.name]=!0}if(c.extensionsUsed)for(let p=0;p<c.extensionsUsed.length;++p){const u=c.extensionsUsed[p],a=c.extensionsRequired||[];switch(u){case Pt.KHR_MATERIALS_UNLIT:r[u]=new ub;break;case Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:r[u]=new wb;break;case Pt.KHR_DRACO_MESH_COMPRESSION:r[u]=new bb(c,this.dracoLoader);break;case Pt.KHR_TEXTURE_TRANSFORM:r[u]=new xb;break;case Pt.KHR_MESH_QUANTIZATION:r[u]=new Sb;break;default:a.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}h.setExtensions(r),h.setPlugins(o),h.parse(n,i)}}function ab(){let y={};return{get:function(t){return y[t]},add:function(t,e){y[t]=e},remove:function(t){delete y[t]},removeAll:function(){y={}}}}const Pt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class lb{constructor(t){this.parser=t,this.name=Pt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const s=e.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let h;const p=new ut(16777215);c.color!==void 0&&p.fromArray(c.color);const u=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new uh(p),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new ah(p),h.distance=u;break;case"spot":h=new ih(p),h.distance=u,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,c.intensity!==void 0&&(h.intensity=c.intensity),h.name=e.createUniqueName(c.name||"light_"+t),i=Promise.resolve(h),e.cache.add(n,i),i}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(c){return n._getNodeRef(e.cache,o,c)})}}class ub{constructor(){this.name=Pt.KHR_MATERIALS_UNLIT}getMaterialType(){return fn}extendParams(t,e,n){const i=[];t.color=new ut(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const r=s.baseColorFactor;t.color.fromArray(r),t.opacity=r[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(t,"map",s.baseColorTexture))}return Promise.all(i)}}class cb{constructor(t){this.parser=t,this.name=Pt.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:ni}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];if(r.clearcoatFactor!==void 0&&(e.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&s.push(n.assignTexture(e,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(e,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const o=r.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new rt(o,o)}return Promise.all(s)}}class db{constructor(t){this.parser=t,this.name=Pt.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:ni}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new ut(0,0,0),e.sheenRoughness=0,e.sheen=1;const r=i.extensions[this.name];return r.sheenColorFactor!==void 0&&e.sheenColor.fromArray(r.sheenColorFactor),r.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&s.push(n.assignTexture(e,"sheenColorMap",r.sheenColorTexture)),r.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(e,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(s)}}class hb{constructor(t){this.parser=t,this.name=Pt.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:ni}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return r.transmissionFactor!==void 0&&(e.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&s.push(n.assignTexture(e,"transmissionMap",r.transmissionTexture)),Promise.all(s)}}class fb{constructor(t){this.parser=t,this.name=Pt.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:ni}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];e.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&s.push(n.assignTexture(e,"thicknessMap",r.thicknessTexture)),e.attenuationDistance=r.attenuationDistance||0;const o=r.attenuationColor||[1,1,1];return e.attenuationColor=new ut(o[0],o[1],o[2]),Promise.all(s)}}class pb{constructor(t){this.parser=t,this.name=Pt.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:ni}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return e.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class mb{constructor(t){this.parser=t,this.name=Pt.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:ni}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];e.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&s.push(n.assignTexture(e,"specularIntensityMap",r.specularTexture));const o=r.specularColorFactor||[1,1,1];return e.specularColor=new ut(o[0],o[1],o[2]),r.specularColorTexture!==void 0&&s.push(n.assignTexture(e,"specularColorMap",r.specularColorTexture).then(function(c){c.encoding=Jr})),Promise.all(s)}}class gb{constructor(t){this.parser=t,this.name=Pt.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],r=n.images[s.source],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r,o)}}class yb{constructor(t){this.parser=t,this.name=Pt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,s=i.textures[t];if(!s.extensions||!s.extensions[e])return null;const r=s.extensions[e],o=i.images[r.source];let c=n.textureLoader;if(o.uri){const h=n.options.manager.getHandler(o.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(t,o,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class vb{constructor(t){this.name=Pt.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,r.ready]).then(function(o){const c=i.byteOffset||0,h=i.byteLength||0,p=i.count,u=i.byteStride,a=new ArrayBuffer(p*u),l=new Uint8Array(o[0],c,h);return r.decodeGltfBuffer(new Uint8Array(a),p,u,l,i.mode,i.filter),a})}else return null}}const fh="glTF",zs=12,ph={JSON:1313821514,BIN:5130562};class _b{constructor(t){this.name=Pt.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,zs);if(this.header={magic:Nn.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==fh)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-zs,i=new DataView(t,zs);let s=0;for(;s<n;){const r=i.getUint32(s,!0);s+=4;const o=i.getUint32(s,!0);if(s+=4,o===ph.JSON){const c=new Uint8Array(t,zs+s,r);this.content=Nn.decodeText(c)}else if(o===ph.BIN){const c=zs+s;this.body=t.slice(c,c+r)}s+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class bb{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pt.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,s=t.extensions[this.name].bufferView,r=t.extensions[this.name].attributes,o={},c={},h={};for(const p in r){const u=Nl[p]||p.toLowerCase();o[u]=r[p]}for(const p in t.attributes){const u=Nl[p]||p.toLowerCase();if(r[p]!==void 0){const a=n.accessors[t.attributes[p]],l=Vs[a.componentType];h[u]=l,c[u]=a.normalized===!0}}return e.getDependency("bufferView",s).then(function(p){return new Promise(function(u){i.decodeDracoFile(p,function(a){for(const l in a.attributes){const d=a.attributes[l],f=c[l];f!==void 0&&(d.normalized=f)}u(a)},o,h)})})}}class xb{constructor(){this.name=Pt.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return e.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class kl extends Fs{constructor(t){super();this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),n=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),r=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),o={specular:{value:new ut().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(c){for(const h in o)c.uniforms[h]=o[h];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",r)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(c){o.specular.value=c}},specularMap:{get:function(){return o.specularMap.value},set:function(c){o.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(c){o.glossiness.value=c}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(c){o.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class wb{constructor(){this.name=Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return kl}extendParams(t,e,n){const i=e.extensions[this.name];t.color=new ut(1,1,1),t.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const r=i.diffuseFactor;t.color.fromArray(r),t.opacity=r[3]}if(i.diffuseTexture!==void 0&&s.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new ut(0,0,0),t.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,t.specular=new ut(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const r=i.specularGlossinessTexture;s.push(n.assignTexture(t,"glossinessMap",r)),s.push(n.assignTexture(t,"specularMap",r))}return Promise.all(s)}createMaterial(t){const e=new kl(t);return e.fog=!0,e.color=t.color,e.map=t.map===void 0?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=t.aoMap===void 0?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=t.emissiveMap===void 0?null:t.emissiveMap,e.bumpMap=t.bumpMap===void 0?null:t.bumpMap,e.bumpScale=1,e.normalMap=t.normalMap===void 0?null:t.normalMap,e.normalMapType=Zn,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=t.specularMap===void 0?null:t.specularMap,e.specular=t.specular,e.glossinessMap=t.glossinessMap===void 0?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=t.envMap===void 0?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}class Sb{constructor(){this.name=Pt.KHR_MESH_QUANTIZATION}}class si extends mn{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=t*i*3+i;for(let r=0;r!==i;r++)e[r]=n[s+r];return e}}si.prototype.beforeStart_=si.prototype.copySampleValue_;si.prototype.afterEnd_=si.prototype.copySampleValue_;si.prototype.interpolate_=function(y,t,e,n){const i=this.resultBuffer,s=this.sampleValues,r=this.valueSize,o=r*2,c=r*3,h=n-t,p=(e-t)/h,u=p*p,a=u*p,l=y*c,d=l-c,f=-2*a+3*u,m=a-u,g=1-f,_=m-u+p;for(let x=0;x!==r;x++){const w=s[d+x+r],M=s[d+x+o]*h,A=s[l+x+r],T=s[l+x]*h;i[x]=g*w+_*M+f*A+m*T}return i};const Mb=new Sr;class Eb extends si{interpolate_(t,e,n,i){const s=super.interpolate_(t,e,n,i);return Mb.fromArray(s).normalize().toArray(s),s}}const vn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Vs={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},mh={9728:cr,9729:Lr,9984:_a,9985:Ju,9986:ba,9987:vi},gh={33071:Ar,33648:io,10497:yi},yh={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Nl={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Un={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Tb={CUBICSPLINE:void 0,LINEAR:xi,STEP:gs},Fl={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ab(y){return y.DefaultMaterial===void 0&&(y.DefaultMaterial=new Fs({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:mi})),y.DefaultMaterial}function Hs(y,t,e){for(const n in e.extensions)y[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function oi(y,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(y.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Lb(y,t,e){let n=!1,i=!1;for(let o=0,c=t.length;o<c;o++){const h=t[o];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(i=!0),n&&i)break}if(!n&&!i)return Promise.resolve(y);const s=[],r=[];for(let o=0,c=t.length;o<c;o++){const h=t[o];if(n){const p=h.POSITION!==void 0?e.getDependency("accessor",h.POSITION):y.attributes.position;s.push(p)}if(i){const p=h.NORMAL!==void 0?e.getDependency("accessor",h.NORMAL):y.attributes.normal;r.push(p)}}return Promise.all([Promise.all(s),Promise.all(r)]).then(function(o){const c=o[0],h=o[1];return n&&(y.morphAttributes.position=c),i&&(y.morphAttributes.normal=h),y.morphTargetsRelative=!0,y})}function Cb(y,t){if(y.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)y.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(y.morphTargetInfluences.length===e.length){y.morphTargetDictionary={};for(let n=0,i=e.length;n<i;n++)y.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Rb(y){const t=y.extensions&&y.extensions[Pt.KHR_DRACO_MESH_COMPRESSION];let e;return t?e="draco:"+t.bufferView+":"+t.indices+":"+vh(t.attributes):e=y.indices+":"+vh(y.attributes)+":"+y.mode,e}function vh(y){let t="";const e=Object.keys(y).sort();for(let n=0,i=e.length;n<i;n++)t+=e[n]+":"+y[e[n]]+";";return t}function Ul(y){switch(y){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Pb{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new ab,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new dh(this.options.manager):this.textureLoader=new Qd(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Cl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(r){const o={scene:r[0][i.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:i.asset,parser:n,userData:{}};Hs(s,o,i),oi(o,i),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(o)})).then(function(){t(o)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=e.length;i<s;i++){const r=e[i].joints;for(let o=0,c=r.length;o<c;o++)t[r[o]].isBone=!0}for(let i=0,s=t.length;i<s;i++){const r=t[i];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(n[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),s=(r,o)=>{const c=this.associations.get(r);c!=null&&this.associations.set(o,c);for(const[h,p]of r.children.entries())s(p,o.children[h])};return s(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const s=t(e[i]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(i.map(function(s,r){return n.getDependency(t,r)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Pt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,r){n.load(Nn.resolveURL(e.uri,i.path),s,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const i=e.byteLength||0,s=e.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(r){const o=r[0],c=yh[i.type],h=Vs[i.componentType],p=h.BYTES_PER_ELEMENT,u=p*c,a=i.byteOffset||0,l=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,d=i.normalized===!0;let f,m;if(l&&l!==u){const g=Math.floor(a/l),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let x=e.cache.get(_);x||(f=new h(o,g*l,i.count*l/p),x=new Wi(f,l/p),e.cache.add(_,x)),m=new qi(x,c,a%l/p,d)}else o===null?f=new h(i.count*c):f=new h(o,a,i.count*c),m=new nr(f,c,d);if(i.sparse!==void 0){const g=yh.SCALAR,_=Vs[i.sparse.indices.componentType],x=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,M=new _(r[1],x,i.sparse.count*g),A=new h(r[2],w,i.sparse.count*c);o!==null&&(m=new nr(m.array.slice(),m.itemSize,m.normalized));for(let T=0,I=M.length;T<I;T++){const R=M[T];if(m.setX(R,A[T*c]),c>=2&&m.setY(R,A[T*c+1]),c>=3&&m.setZ(R,A[T*c+2]),c>=4&&m.setW(R,A[T*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t],s=e.images[i.source];let r=this.textureLoader;if(s.uri){const o=n.manager.getHandler(s.uri);o!==null&&(r=o)}return this.loadTextureImage(t,s,r)}loadTextureImage(t,e,n){const i=this,s=this.json,r=this.options,o=s.textures[t],c=(e.uri||e.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const h=self.URL||self.webkitURL;let p=e.uri||"",u=!1;if(e.bufferView!==void 0)p=i.getDependency("bufferView",e.bufferView).then(function(l){u=!0;const d=new Blob([l],{type:e.mimeType});return p=h.createObjectURL(d),p});else if(e.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const a=Promise.resolve(p).then(function(l){return new Promise(function(d,f){let m=d;n.isImageBitmapLoader===!0&&(m=function(g){const _=new dr(g);_.needsUpdate=!0,d(_)}),n.load(Nn.resolveURL(l,r.path),m,void 0,f)})}).then(function(l){u===!0&&h.revokeObjectURL(p),l.flipY=!1,o.name&&(l.name=o.name);const f=(s.samplers||{})[o.sampler]||{};return l.magFilter=mh[f.magFilter]||Lr,l.minFilter=mh[f.minFilter]||vi,l.wrapS=gh[f.wrapS]||yi,l.wrapT=gh[f.wrapT]||yi,i.associations.set(l,{textures:t}),l}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",p),null});return this.textureCache[c]=a,a}assignTexture(t,e,n){const i=this;return this.getDependency("texture",n.index).then(function(s){if(n.texCoord!==void 0&&n.texCoord!=0&&!(e==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[Pt.KHR_TEXTURE_TRANSFORM]){const r=n.extensions!==void 0?n.extensions[Pt.KHR_TEXTURE_TRANSFORM]:void 0;if(r){const o=i.associations.get(s);s=i.extensions[Pt.KHR_TEXTURE_TRANSFORM].extendTexture(s,r),i.associations.set(s,o)}}return t[e]=s,s})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=e.attributes.tangent===void 0,s=e.attributes.color!==void 0,r=e.attributes.normal===void 0;if(t.isPoints){const o="PointsMaterial:"+n.uuid;let c=this.cache.get(o);c||(c=new pl,hr.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(o,c)),n=c}else if(t.isLine){const o="LineBasicMaterial:"+n.uuid;let c=this.cache.get(o);c||(c=new Ki,hr.prototype.copy.call(c,n),c.color.copy(n.color),this.cache.add(o,c)),n=c}if(i||s||r){let o="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(o+="specular-glossiness:"),i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),r&&(o+="flat-shading:");let c=this.cache.get(o);c||(c=n.clone(),s&&(c.vertexColors=!0),r&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(o,c),this.associations.set(c,this.associations.get(n))),n=c}n.aoMap&&e.attributes.uv2===void 0&&e.attributes.uv!==void 0&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return Fs}loadMaterial(t){const e=this,n=this.json,i=this.extensions,s=n.materials[t];let r;const o={},c=s.extensions||{},h=[];if(c[Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=i[Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];r=u.getMaterialType(),h.push(u.extendParams(o,s,e))}else if(c[Pt.KHR_MATERIALS_UNLIT]){const u=i[Pt.KHR_MATERIALS_UNLIT];r=u.getMaterialType(),h.push(u.extendParams(o,s,e))}else{const u=s.pbrMetallicRoughness||{};if(o.color=new ut(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){const a=u.baseColorFactor;o.color.fromArray(a),o.opacity=a[3]}u.baseColorTexture!==void 0&&h.push(e.assignTexture(o,"map",u.baseColorTexture)),o.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,o.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(h.push(e.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),h.push(e.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),r=this._invokeOne(function(a){return a.getMaterialType&&a.getMaterialType(t)}),h.push(Promise.all(this._invokeAll(function(a){return a.extendMaterialParams&&a.extendMaterialParams(t,o)})))}s.doubleSided===!0&&(o.side=qn);const p=s.alphaMode||Fl.OPAQUE;if(p===Fl.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.format=Yn,o.transparent=!1,p===Fl.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&r!==fn&&(h.push(e.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new rt(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;o.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&r!==fn&&(h.push(e.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&r!==fn&&(o.emissive=new ut().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&r!==fn&&h.push(e.assignTexture(o,"emissiveMap",s.emissiveTexture)),Promise.all(h).then(function(){let u;return r===kl?u=i[Pt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):u=new r(o),s.name&&(u.name=s.name),u.map&&(u.map.encoding=Jr),u.emissiveMap&&(u.emissiveMap.encoding=Jr),oi(u,s),e.associations.set(u,{materials:t}),s.extensions&&Hs(i,u,s),u})}createUniqueName(t){const e=Bt.sanitizeNodeName(t||"");let n=e;for(let i=1;this.nodeNamesUsed[n];++i)n=e+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function s(o){return n[Pt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,e).then(function(c){return bh(c,o,e)})}const r=[];for(let o=0,c=t.length;o<c;o++){const h=t[o],p=Rb(h),u=i[p];if(u)r.push(u.promise);else{let a;h.extensions&&h.extensions[Pt.KHR_DRACO_MESH_COMPRESSION]?a=s(h):a=bh(new Yt,h,e),i[p]={primitive:h,promise:a},r.push(a)}}return Promise.all(r)}loadMesh(t){const e=this,n=this.json,i=this.extensions,s=n.meshes[t],r=s.primitives,o=[];for(let c=0,h=r.length;c<h;c++){const p=r[c].material===void 0?Ab(this.cache):this.getDependency("material",r[c].material);o.push(p)}return o.push(e.loadGeometries(r)),Promise.all(o).then(function(c){const h=c.slice(0,c.length-1),p=c[c.length-1],u=[];for(let l=0,d=p.length;l<d;l++){const f=p[l],m=r[l];let g;const _=h[l];if(m.mode===vn.TRIANGLES||m.mode===vn.TRIANGLE_STRIP||m.mode===vn.TRIANGLE_FAN||m.mode===void 0)g=s.isSkinnedMesh===!0?new ul(f,_):new br(f,_),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===vn.TRIANGLE_STRIP?g.geometry=xh(g.geometry,jp):m.mode===vn.TRIANGLE_FAN&&(g.geometry=xh(g.geometry,lc));else if(m.mode===vn.LINES)g=new Go(f,_);else if(m.mode===vn.LINE_STRIP)g=new Bo(f,_);else if(m.mode===vn.LINE_LOOP)g=new Dd(f,_);else if(m.mode===vn.POINTS)g=new kd(f,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&Cb(g,s),g.name=e.createUniqueName(s.name||"mesh_"+t),oi(g,s),m.extensions&&Hs(i,g,m),e.assignFinalMaterial(g),u.push(g)}for(let l=0,d=u.length;l<d;l++)e.associations.set(u[l],{meshes:t,primitives:l});if(u.length===1)return u[0];const a=new Dn;e.associations.set(a,{meshes:t});for(let l=0,d=u.length;l<d;l++)a.add(u[l]);return a})}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new Mr(tm.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(e=new Po(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),oi(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return e.inverseBindMatrices===void 0?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then(function(i){return n.inverseBindMatrices=i,n})}loadAnimation(t){const n=this.json.animations[t],i=[],s=[],r=[],o=[],c=[];for(let h=0,p=n.channels.length;h<p;h++){const u=n.channels[h],a=n.samplers[u.sampler],l=u.target,d=l.node!==void 0?l.node:l.id,f=n.parameters!==void 0?n.parameters[a.input]:a.input,m=n.parameters!==void 0?n.parameters[a.output]:a.output;i.push(this.getDependency("node",d)),s.push(this.getDependency("accessor",f)),r.push(this.getDependency("accessor",m)),o.push(a),c.push(l)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(c)]).then(function(h){const p=h[0],u=h[1],a=h[2],l=h[3],d=h[4],f=[];for(let g=0,_=p.length;g<_;g++){const x=p[g],w=u[g],M=a[g],A=l[g],T=d[g];if(x===void 0)continue;x.updateMatrix(),x.matrixAutoUpdate=!0;let I;switch(Un[T.path]){case Un.weights:I=Us;break;case Un.rotation:I=ii;break;case Un.position:case Un.scale:default:I=Bs;break}const R=x.name?x.name:x.uuid,P=A.interpolation!==void 0?Tb[A.interpolation]:xi,O=[];Un[T.path]===Un.weights?x.traverse(function(k){k.isMesh===!0&&k.morphTargetInfluences&&O.push(k.name?k.name:k.uuid)}):O.push(R);let D=M.array;if(M.normalized){const k=Ul(D.constructor),N=new Float32Array(D.length);for(let q=0,X=D.length;q<X;q++)N[q]=D[q]*k;D=N}for(let k=0,N=O.length;k<N;k++){const q=new I(O[k]+"."+Un[T.path],w.array,D,P);A.interpolation==="CUBICSPLINE"&&(q.createInterpolant=function(G){const Q=this instanceof ii?Eb:si;return new Q(this.times,this.values,this.getValueSize()/3,G)},q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),f.push(q)}}const m=n.name?n.name:"animation_"+t;return new Ll(m,void 0,f)})}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const r=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&r.traverse(function(o){if(!!o.isMesh)for(let c=0,h=i.weights.length;c<h;c++)o.morphTargetInfluences[c]=i.weights[c]}),r})}loadNode(t){const e=this.json,n=this.extensions,i=this,s=e.nodes[t],r=s.name?i.createUniqueName(s.name):"";return function(){const o=[],c=i._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(t)});return c&&o.push(c),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(h){return i._getNodeRef(i.cameraCache,s.camera,h)})),i._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(t)}).forEach(function(h){o.push(h)}),Promise.all(o)}().then(function(o){let c;if(s.isBone===!0?c=new cl:o.length>1?c=new Dn:o.length===1?c=o[0]:c=new Ut,c!==o[0])for(let h=0,p=o.length;h<p;h++)c.add(o[h]);if(s.name&&(c.userData.name=s.name,c.name=r),oi(c,s),s.extensions&&Hs(n,c,s),s.matrix!==void 0){const h=new mt;h.fromArray(s.matrix),c.applyMatrix4(h)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=t,c})}loadScene(t){const e=this.json,n=this.extensions,i=this.json.scenes[t],s=this,r=new Dn;i.name&&(r.name=s.createUniqueName(i.name)),oi(r,i),i.extensions&&Hs(n,r,i);const o=i.nodes||[],c=[];for(let h=0,p=o.length;h<p;h++)c.push(_h(o[h],r,e,s));return Promise.all(c).then(function(){const h=p=>{const u=new Map;for(const[a,l]of s.associations)(a instanceof hr||a instanceof dr)&&u.set(a,l);return p.traverse(a=>{const l=s.associations.get(a);l!=null&&u.set(a,l)}),u};return s.associations=h(r),r})}}function _h(y,t,e,n){const i=e.nodes[y];return n.getDependency("node",y).then(function(s){if(i.skin===void 0)return s;let r;return n.getDependency("skin",i.skin).then(function(o){r=o;const c=[];for(let h=0,p=r.joints.length;h<p;h++)c.push(n.getDependency("node",r.joints[h]));return Promise.all(c)}).then(function(o){return s.traverse(function(c){if(!c.isMesh)return;const h=[],p=[];for(let u=0,a=o.length;u<a;u++){const l=o[u];if(l){h.push(l);const d=new mt;r.inverseBindMatrices!==void 0&&d.fromArray(r.inverseBindMatrices.array,u*16),p.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[u])}c.bind(new dl(h,p),c.matrixWorld)}),s})}).then(function(s){t.add(s);const r=[];if(i.children){const o=i.children;for(let c=0,h=o.length;c<h;c++){const p=o[c];r.push(_h(p,s,e,n))}}return Promise.all(r)})}function Ib(y,t,e){const n=t.attributes,i=new Dr;if(n.POSITION!==void 0){const o=e.json.accessors[n.POSITION],c=o.min,h=o.max;if(c!==void 0&&h!==void 0){if(i.set(new we(c[0],c[1],c[2]),new we(h[0],h[1],h[2])),o.normalized){const p=Ul(Vs[o.componentType]);i.min.multiplyScalar(p),i.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=t.targets;if(s!==void 0){const o=new we,c=new we;for(let h=0,p=s.length;h<p;h++){const u=s[h];if(u.POSITION!==void 0){const a=e.json.accessors[u.POSITION],l=a.min,d=a.max;if(l!==void 0&&d!==void 0){if(c.setX(Math.max(Math.abs(l[0]),Math.abs(d[0]))),c.setY(Math.max(Math.abs(l[1]),Math.abs(d[1]))),c.setZ(Math.max(Math.abs(l[2]),Math.abs(d[2]))),a.normalized){const f=Ul(Vs[a.componentType]);c.multiplyScalar(f)}o.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}y.boundingBox=i;const r=new Qn;i.getCenter(r.center),r.radius=i.min.distanceTo(i.max)/2,y.boundingSphere=r}function bh(y,t,e){const n=t.attributes,i=[];function s(r,o){return e.getDependency("accessor",r).then(function(c){y.setAttribute(o,c)})}for(const r in n){const o=Nl[r]||r.toLowerCase();o in y.attributes||i.push(s(n[r],o))}if(t.indices!==void 0&&!y.index){const r=e.getDependency("accessor",t.indices).then(function(o){y.setIndex(o)});i.push(r)}return oi(y,t),Ib(y,t,e),Promise.all(i).then(function(){return t.targets!==void 0?Lb(y,t.targets,e):y})}function xh(y,t){let e=y.getIndex();if(e===null){const r=[],o=y.getAttribute("position");if(o!==void 0){for(let c=0;c<o.count;c++)r.push(c);y.setIndex(r),e=y.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),y}const n=e.count-2,i=[];if(t===lc)for(let r=1;r<=n;r++)i.push(e.getX(0)),i.push(e.getX(r)),i.push(e.getX(r+1));else for(let r=0;r<n;r++)r%2==0?(i.push(e.getX(r)),i.push(e.getX(r+1)),i.push(e.getX(r+2))):(i.push(e.getX(r+2)),i.push(e.getX(r+1)),i.push(e.getX(r)));i.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=y.clone();return s.setIndex(i),s}function Ob(y){if(!!y&&typeof window!="undefined"){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=y,document.head.appendChild(t),y}}function ns(y,t){var e=y.__state.conversionName.toString(),n=Math.round(y.r),i=Math.round(y.g),s=Math.round(y.b),r=y.a,o=Math.round(y.h),c=y.s.toFixed(1),h=y.v.toFixed(1);if(t||e==="THREE_CHAR_HEX"||e==="SIX_CHAR_HEX"){for(var p=y.hex.toString(16);p.length<6;)p="0"+p;return"#"+p}else{if(e==="CSS_RGB")return"rgb("+n+","+i+","+s+")";if(e==="CSS_RGBA")return"rgba("+n+","+i+","+s+","+r+")";if(e==="HEX")return"0x"+y.hex.toString(16);if(e==="RGB_ARRAY")return"["+n+","+i+","+s+"]";if(e==="RGBA_ARRAY")return"["+n+","+i+","+s+","+r+"]";if(e==="RGB_OBJ")return"{r:"+n+",g:"+i+",b:"+s+"}";if(e==="RGBA_OBJ")return"{r:"+n+",g:"+i+",b:"+s+",a:"+r+"}";if(e==="HSV_OBJ")return"{h:"+o+",s:"+c+",v:"+h+"}";if(e==="HSVA_OBJ")return"{h:"+o+",s:"+c+",v:"+h+",a:"+r+"}"}return"unknown format"}var wh=Array.prototype.forEach,Ws=Array.prototype.slice,Ze={BREAK:{},extend:function(t){return this.each(Ws.call(arguments,1),function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach(function(i){this.isUndefined(e[i])||(t[i]=e[i])}.bind(this))},this),t},defaults:function(t){return this.each(Ws.call(arguments,1),function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach(function(i){this.isUndefined(t[i])&&(t[i]=e[i])}.bind(this))},this),t},compose:function(){var t=Ws.call(arguments);return function(){for(var e=Ws.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(!!t){if(wh&&t.forEach&&t.forEach===wh)t.forEach(e,n);else if(t.length===t.length+0){var i=void 0,s=void 0;for(i=0,s=t.length;i<s;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var r in t)if(e.call(n,t[r],r)===this.BREAK)return}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i=void 0;return function(){var s=this,r=arguments;function o(){i=null,n||t.apply(s,r)}var c=n||!i;clearTimeout(i),i=setTimeout(o,e),c&&t.apply(s,r)}},toArray:function(t){return t.toArray?t.toArray():Ws.call(t)},isUndefined:function(t){return t===void 0},isNull:function(t){return t===null},isNaN:function(y){function t(){return y.apply(this,arguments)}return t.toString=function(){return y.toString()},t}(function(y){return isNaN(y)}),isArray:Array.isArray||function(y){return y.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return t instanceof Function}},Db=[{litmus:Ze.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:ns},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:ns},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:ns},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:ns}}},{litmus:Ze.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:Ze.isArray,conversions:{RGB_ARRAY:{read:function(t){return t.length!==3?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return t.length!==4?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:Ze.isObject,conversions:{RGBA_OBJ:{read:function(t){return Ze.isNumber(t.r)&&Ze.isNumber(t.g)&&Ze.isNumber(t.b)&&Ze.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return Ze.isNumber(t.r)&&Ze.isNumber(t.g)&&Ze.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return Ze.isNumber(t.h)&&Ze.isNumber(t.s)&&Ze.isNumber(t.v)&&Ze.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return Ze.isNumber(t.h)&&Ze.isNumber(t.s)&&Ze.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],qs=void 0,$o=void 0,Bl=function(){$o=!1;var t=arguments.length>1?Ze.toArray(arguments):arguments[0];return Ze.each(Db,function(e){if(e.litmus(t))return Ze.each(e.conversions,function(n,i){if(qs=n.read(t),$o===!1&&qs!==!1)return $o=qs,qs.conversionName=i,qs.conversion=n,Ze.BREAK}),Ze.BREAK}),$o},Sh=void 0,Qo={hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,s=t/60-Math.floor(t/60),r=n*(1-e),o=n*(1-s*e),c=n*(1-(1-s)*e),h=[[n,c,r],[o,n,r],[r,n,c],[r,o,n],[c,r,n],[n,r,o]][i];return{r:h[0]*255,g:h[1]*255,b:h[2]*255}},rgb_to_hsv:function(t,e,n){var i=Math.min(t,e,n),s=Math.max(t,e,n),r=s-i,o=void 0,c=void 0;if(s!==0)c=r/s;else return{h:NaN,s:0,v:0};return t===s?o=(e-n)/r:e===s?o=2+(n-t)/r:o=4+(t-e)/r,o/=6,o<0&&(o+=1),{h:o*360,s:c,v:s/255}},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n),i},component_from_hex:function(t,e){return t>>e*8&255},hex_with_component:function(t,e,n){return n<<(Sh=e*8)|t&~(255<<Sh)}},jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},Hr=function(y,t){if(!(y instanceof t))throw new TypeError("Cannot call a class as a function")},Wr=function(){function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}}(),Bn=function y(t,e,n){t===null&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===void 0){var s=Object.getPrototypeOf(t);return s===null?void 0:y(s,e,n)}else{if("value"in i)return i.value;var r=i.get;return r===void 0?void 0:r.call(n)}},Gn=function(y,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);y.prototype=Object.create(t&&t.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(y,t):y.__proto__=t)},zn=function(y,t){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:y},pr=function(){function y(){if(Hr(this,y),this.__state=Bl.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Wr(y,[{key:"toString",value:function(){return ns(this)}},{key:"toHexString",value:function(){return ns(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),y}();function Gl(y,t,e){Object.defineProperty(y,t,{get:function(){return this.__state.space==="RGB"?this.__state[t]:(pr.recalculateRGB(this,t,e),this.__state[t])},set:function(i){this.__state.space!=="RGB"&&(pr.recalculateRGB(this,t,e),this.__state.space="RGB"),this.__state[t]=i}})}function zl(y,t){Object.defineProperty(y,t,{get:function(){return this.__state.space==="HSV"?this.__state[t]:(pr.recalculateHSV(this),this.__state[t])},set:function(n){this.__state.space!=="HSV"&&(pr.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=n}})}pr.recalculateRGB=function(y,t,e){if(y.__state.space==="HEX")y.__state[t]=Qo.component_from_hex(y.__state.hex,e);else if(y.__state.space==="HSV")Ze.extend(y.__state,Qo.hsv_to_rgb(y.__state.h,y.__state.s,y.__state.v));else throw new Error("Corrupted color state")};pr.recalculateHSV=function(y){var t=Qo.rgb_to_hsv(y.r,y.g,y.b);Ze.extend(y.__state,{s:t.s,v:t.v}),Ze.isNaN(t.h)?Ze.isUndefined(y.__state.h)&&(y.__state.h=0):y.__state.h=t.h};pr.COMPONENTS=["r","g","b","h","s","v","hex","a"];Gl(pr.prototype,"r",2);Gl(pr.prototype,"g",1);Gl(pr.prototype,"b",0);zl(pr.prototype,"h");zl(pr.prototype,"s");zl(pr.prototype,"v");Object.defineProperty(pr.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}});Object.defineProperty(pr.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=Qo.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var ai=function(){function y(t,e){Hr(this,y),this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0}return Wr(y,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),y}(),kb={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},Mh={};Ze.each(kb,function(y,t){Ze.each(y,function(e){Mh[e]=t})});var Nb=/(\d+(\.\d+)?)px/;function rn(y){if(y==="0"||Ze.isUndefined(y))return 0;var t=y.match(Nb);return Ze.isNull(t)?0:parseFloat(t[1])}var Ne={makeSelectable:function(t,e){t===void 0||t.style===void 0||(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var i=n,s=e;Ze.isUndefined(s)&&(s=!0),Ze.isUndefined(i)&&(i=!0),t.style.position="absolute",s&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,i){var s=n||{},r=Mh[e];if(!r)throw new Error("Event type "+e+" not supported.");var o=document.createEvent(r);switch(r){case"MouseEvents":{var c=s.x||s.clientX||0,h=s.y||s.clientY||0;o.initMouseEvent(e,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,c,h,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var p=o.initKeyboardEvent||o.initKeyEvent;Ze.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),p(e,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:{o.initEvent(e,s.bubbles||!1,s.cancelable||!0);break}}Ze.defaults(o,i),t.dispatchEvent(o)},bind:function(t,e,n,i){var s=i||!1;return t.addEventListener?t.addEventListener(e,n,s):t.attachEvent&&t.attachEvent("on"+e,n),Ne},unbind:function(t,e,n,i){var s=i||!1;return t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent&&t.detachEvent("on"+e,n),Ne},addClass:function(t,e){if(t.className===void 0)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);n.indexOf(e)===-1&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Ne},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);i!==-1&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return Ne},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return rn(e["border-left-width"])+rn(e["border-right-width"])+rn(e["padding-left"])+rn(e["padding-right"])+rn(e.width)},getHeight:function(t){var e=getComputedStyle(t);return rn(e["border-top-width"])+rn(e["border-bottom-width"])+rn(e["padding-top"])+rn(e["padding-bottom"])+rn(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},Eh=function(y){Gn(t,y);function t(e,n){Hr(this,t);var i=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=i;i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox");function r(){s.setValue(!s.__prev)}return Ne.bind(i.__checkbox,"change",r,!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return Wr(t,[{key:"setValue",value:function(n){var i=Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(ai),Fb=function(y){Gn(t,y);function t(e,n,i){Hr(this,t);var s=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i,o=s;if(s.__select=document.createElement("select"),Ze.isArray(r)){var c={};Ze.each(r,function(h){c[h]=h}),r=c}return Ze.each(r,function(h,p){var u=document.createElement("option");u.innerHTML=p,u.setAttribute("value",h),o.__select.appendChild(u)}),s.updateDisplay(),Ne.bind(s.__select,"change",function(){var h=this.options[this.selectedIndex].value;o.setValue(h)}),s.domElement.appendChild(s.__select),s}return Wr(t,[{key:"setValue",value:function(n){var i=Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return Ne.isActive(this.__select)?this:(this.__select.value=this.getValue(),Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(ai),Ub=function(y){Gn(t,y);function t(e,n){Hr(this,t);var i=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=i;function r(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),Ne.bind(i.__input,"keyup",r),Ne.bind(i.__input,"change",r),Ne.bind(i.__input,"blur",o),Ne.bind(i.__input,"keydown",function(c){c.keyCode===13&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return Wr(t,[{key:"updateDisplay",value:function(){return Ne.isActive(this.__input)||(this.__input.value=this.getValue()),Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(ai);function Th(y){var t=y.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var Ah=function(y){Gn(t,y);function t(e,n,i){Hr(this,t);var s=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i||{};return s.__min=r.min,s.__max=r.max,s.__step=r.step,Ze.isUndefined(s.__step)?s.initialValue===0?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=Th(s.__impliedStep),s}return Wr(t,[{key:"setValue",value:function(n){var i=n;return this.__min!==void 0&&i<this.__min?i=this.__min:this.__max!==void 0&&i>this.__max&&(i=this.__max),this.__step!==void 0&&i%this.__step!=0&&(i=Math.round(i/this.__step)*this.__step),Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(n){return this.__min=n,this}},{key:"max",value:function(n){return this.__max=n,this}},{key:"step",value:function(n){return this.__step=n,this.__impliedStep=n,this.__precision=Th(n),this}}]),t}(ai);function Bb(y,t){var e=Math.pow(10,t);return Math.round(y*e)/e}var ea=function(y){Gn(t,y);function t(e,n,i){Hr(this,t);var s=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));s.__truncationSuspended=!1;var r=s,o=void 0;function c(){var d=parseFloat(r.__input.value);Ze.isNaN(d)||r.setValue(d)}function h(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function p(){h()}function u(d){var f=o-d.clientY;r.setValue(r.getValue()+f*r.__impliedStep),o=d.clientY}function a(){Ne.unbind(window,"mousemove",u),Ne.unbind(window,"mouseup",a),h()}function l(d){Ne.bind(window,"mousemove",u),Ne.bind(window,"mouseup",a),o=d.clientY}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),Ne.bind(s.__input,"change",c),Ne.bind(s.__input,"blur",p),Ne.bind(s.__input,"mousedown",l),Ne.bind(s.__input,"keydown",function(d){d.keyCode===13&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,h())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return Wr(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Bb(this.getValue(),this.__precision),Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ah);function Lh(y,t,e,n,i){return n+(i-n)*((y-t)/(e-t))}var Vl=function(y){Gn(t,y);function t(e,n,i,s,r){Hr(this,t);var o=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:i,max:s,step:r})),c=o;o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),Ne.bind(o.__background,"mousedown",h),Ne.bind(o.__background,"touchstart",a),Ne.addClass(o.__background,"slider"),Ne.addClass(o.__foreground,"slider-fg");function h(f){document.activeElement.blur(),Ne.bind(window,"mousemove",p),Ne.bind(window,"mouseup",u),p(f)}function p(f){f.preventDefault();var m=c.__background.getBoundingClientRect();return c.setValue(Lh(f.clientX,m.left,m.right,c.__min,c.__max)),!1}function u(){Ne.unbind(window,"mousemove",p),Ne.unbind(window,"mouseup",u),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}function a(f){f.touches.length===1&&(Ne.bind(window,"touchmove",l),Ne.bind(window,"touchend",d),l(f))}function l(f){var m=f.touches[0].clientX,g=c.__background.getBoundingClientRect();c.setValue(Lh(m,g.left,g.right,c.__min,c.__max))}function d(){Ne.unbind(window,"touchmove",l),Ne.unbind(window,"touchend",d),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}return o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return Wr(t,[{key:"updateDisplay",value:function(){var n=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=n*100+"%",Bn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ah),Ch=function(y){Gn(t,y);function t(e,n,i){Hr(this,t);var s=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=s;return s.__button=document.createElement("div"),s.__button.innerHTML=i===void 0?"Fire":i,Ne.bind(s.__button,"click",function(o){return o.preventDefault(),r.fire(),!1}),Ne.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return Wr(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(ai),Hl=function(y){Gn(t,y);function t(e,n){Hr(this,t);var i=zn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.__color=new pr(i.getValue()),i.__temp=new pr(0);var s=i;i.domElement=document.createElement("div"),Ne.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",Ne.bind(i.__input,"keydown",function(f){f.keyCode===13&&u.call(this)}),Ne.bind(i.__input,"blur",u),Ne.bind(i.__selector,"mousedown",function(){Ne.addClass(this,"drag").bind(window,"mouseup",function(){Ne.removeClass(s.__selector,"drag")})}),Ne.bind(i.__selector,"touchstart",function(){Ne.addClass(this,"drag").bind(window,"touchend",function(){Ne.removeClass(s.__selector,"drag")})});var r=document.createElement("div");Ze.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Ze.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Ze.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Ze.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Ze.extend(r.style,{width:"100%",height:"100%",background:"none"}),Rh(r,"top","rgba(0,0,0,0)","#000"),Ze.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),zb(i.__hue_field),Ze.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),Ne.bind(i.__saturation_field,"mousedown",o),Ne.bind(i.__saturation_field,"touchstart",o),Ne.bind(i.__field_knob,"mousedown",o),Ne.bind(i.__field_knob,"touchstart",o),Ne.bind(i.__hue_field,"mousedown",c),Ne.bind(i.__hue_field,"touchstart",c);function o(f){l(f),Ne.bind(window,"mousemove",l),Ne.bind(window,"touchmove",l),Ne.bind(window,"mouseup",h),Ne.bind(window,"touchend",h)}function c(f){d(f),Ne.bind(window,"mousemove",d),Ne.bind(window,"touchmove",d),Ne.bind(window,"mouseup",p),Ne.bind(window,"touchend",p)}function h(){Ne.unbind(window,"mousemove",l),Ne.unbind(window,"touchmove",l),Ne.unbind(window,"mouseup",h),Ne.unbind(window,"touchend",h),a()}function p(){Ne.unbind(window,"mousemove",d),Ne.unbind(window,"touchmove",d),Ne.unbind(window,"mouseup",p),Ne.unbind(window,"touchend",p),a()}function u(){var f=Bl(this.value);f!==!1?(s.__color.__state=f,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function a(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}i.__saturation_field.appendChild(r),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay();function l(f){f.type.indexOf("touch")===-1&&f.preventDefault();var m=s.__saturation_field.getBoundingClientRect(),g=f.touches&&f.touches[0]||f,_=g.clientX,x=g.clientY,w=(_-m.left)/(m.right-m.left),M=1-(x-m.top)/(m.bottom-m.top);return M>1?M=1:M<0&&(M=0),w>1?w=1:w<0&&(w=0),s.__color.v=M,s.__color.s=w,s.setValue(s.__color.toOriginal()),!1}function d(f){f.type.indexOf("touch")===-1&&f.preventDefault();var m=s.__hue_field.getBoundingClientRect(),g=f.touches&&f.touches[0]||f,_=g.clientY,x=1-(_-m.top)/(m.bottom-m.top);return x>1?x=1:x<0&&(x=0),s.__color.h=x*360,s.setValue(s.__color.toOriginal()),!1}return i}return Wr(t,[{key:"updateDisplay",value:function(){var n=Bl(this.getValue());if(n!==!1){var i=!1;Ze.each(pr.COMPONENTS,function(o){if(!Ze.isUndefined(n[o])&&!Ze.isUndefined(this.__color.__state[o])&&n[o]!==this.__color.__state[o])return i=!0,{}},this),i&&Ze.extend(this.__color.__state,n)}Ze.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,r=255-s;Ze.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,Rh(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Ze.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(ai),Gb=["-moz-","-o-","-webkit-","-ms-",""];function Rh(y,t,e,n){y.style.background="",Ze.each(Gb,function(i){y.style.cssText+="background: "+i+"linear-gradient("+t+", "+e+" 0%, "+n+" 100%); "})}function zb(y){y.style.background="",y.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",y.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",y.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",y.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",y.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var Vb={load:function(t,e){var n=e||document,i=n.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,n.getElementsByTagName("head")[0].appendChild(i)},inject:function(t,e){var n=e||document,i=document.createElement("style");i.type="text/css",i.innerHTML=t;var s=n.getElementsByTagName("head")[0];try{s.appendChild(i)}catch{}}},Hb=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,Wb=function(t,e){var n=t[e];return Ze.isArray(arguments[2])||Ze.isObject(arguments[2])?new Fb(t,e,arguments[2]):Ze.isNumber(n)?Ze.isNumber(arguments[2])&&Ze.isNumber(arguments[3])?Ze.isNumber(arguments[4])?new Vl(t,e,arguments[2],arguments[3],arguments[4]):new Vl(t,e,arguments[2],arguments[3]):Ze.isNumber(arguments[4])?new ea(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new ea(t,e,{min:arguments[2],max:arguments[3]}):Ze.isString(n)?new Ub(t,e):Ze.isFunction(n)?new Ch(t,e,""):Ze.isBoolean(n)?new Eh(t,e):null};function qb(y){setTimeout(y,1e3/60)}var Xb=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||qb,Yb=function(){function y(){Hr(this,y),this.backgroundElement=document.createElement("div"),Ze.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Ne.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Ze.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Ne.bind(this.backgroundElement,"click",function(){t.hide()})}return Wr(y,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Ze.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,n=function i(){e.domElement.style.display="none",e.backgroundElement.style.display="none",Ne.unbind(e.domElement,"webkitTransitionEnd",i),Ne.unbind(e.domElement,"transitionend",i),Ne.unbind(e.domElement,"oTransitionEnd",i)};Ne.bind(this.domElement,"webkitTransitionEnd",n),Ne.bind(this.domElement,"transitionend",n),Ne.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Ne.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Ne.getHeight(this.domElement)/2+"px"}}]),y}(),Zb=Ob(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);Vb.inject(Zb);var Ph="dg",Ih=72,Oh=20,Xs="Default",Ys=function(){try{return!!window.localStorage}catch{return!1}}(),Zs=void 0,Dh=!0,is=void 0,Wl=!1,jh=[],Zt=function y(t){var e=this,n=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Ne.addClass(this.domElement,Ph),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=Ze.defaults(n,{closeOnTop:!1,autoPlace:!0,width:y.DEFAULT_WIDTH}),n=Ze.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),Ze.isUndefined(n.load)?n.load={preset:Xs}:n.preset&&(n.load.preset=n.preset),Ze.isUndefined(n.parent)&&n.hideable&&jh.push(this),n.resizable=Ze.isUndefined(n.parent)&&n.resizable,n.autoPlace&&Ze.isUndefined(n.scrollable)&&(n.scrollable=!0);var i=Ys&&localStorage.getItem(ss(this,"isLocal"))==="true",s=void 0,r=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return e.parent?e.getRoot().preset:n.load.preset},set:function(a){e.parent?e.getRoot().preset=a:n.load.preset=a,Qb(this),e.revert()}},width:{get:function(){return n.width},set:function(a){n.width=a,Zl(e,a)}},name:{get:function(){return n.name},set:function(a){n.name=a,r&&(r.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(a){n.closed=a,n.closed?Ne.addClass(e.__ul,y.CLASS_CLOSED):Ne.removeClass(e.__ul,y.CLASS_CLOSED),this.onResize(),e.__closeButton&&(e.__closeButton.innerHTML=a?y.TEXT_OPEN:y.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return i},set:function(a){Ys&&(i=a,a?Ne.bind(window,"unload",s):Ne.unbind(window,"unload",s),localStorage.setItem(ss(e,"isLocal"),a))}}}),Ze.isUndefined(n.parent)){if(this.closed=n.closed||!1,Ne.addClass(this.domElement,y.CLASS_MAIN),Ne.makeSelectable(this.domElement,!1),Ys&&i){e.useLocalStorage=!0;var o=localStorage.getItem(ss(this,"gui"));o&&(n.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=y.TEXT_CLOSED,Ne.addClass(this.__closeButton,y.CLASS_CLOSE_BUTTON),n.closeOnTop?(Ne.addClass(this.__closeButton,y.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Ne.addClass(this.__closeButton,y.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Ne.bind(this.__closeButton,"click",function(){e.closed=!e.closed})}else{n.closed===void 0&&(n.closed=!0);var c=document.createTextNode(n.name);Ne.addClass(c,"controller-name"),r=ql(e,c);var h=function(a){return a.preventDefault(),e.closed=!e.closed,!1};Ne.addClass(this.__ul,y.CLASS_CLOSED),Ne.addClass(r,"title"),Ne.bind(r,"click",h),n.closed||(this.closed=!1)}n.autoPlace&&(Ze.isUndefined(n.parent)&&(Dh&&(is=document.createElement("div"),Ne.addClass(is,Ph),Ne.addClass(is,y.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(is),Dh=!1),is.appendChild(this.domElement),Ne.addClass(this.domElement,y.CLASS_AUTO_PLACE)),this.parent||Zl(e,n.width)),this.__resizeHandler=function(){e.onResizeDebounced()},Ne.bind(window,"resize",this.__resizeHandler),Ne.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Ne.bind(this.__ul,"transitionend",this.__resizeHandler),Ne.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&$b(this),s=function(){Ys&&localStorage.getItem(ss(e,"isLocal"))==="true"&&localStorage.setItem(ss(e,"gui"),JSON.stringify(e.getSaveObject()))},this.saveToLocalStorageIfPossible=s;function p(){var u=e.getRoot();u.width+=1,Ze.defer(function(){u.width-=1})}n.parent||p()};Zt.toggleHide=function(){Wl=!Wl,Ze.each(jh,function(y){y.domElement.style.display=Wl?"none":""})};Zt.CLASS_AUTO_PLACE="a";Zt.CLASS_AUTO_PLACE_CONTAINER="ac";Zt.CLASS_MAIN="main";Zt.CLASS_CONTROLLER_ROW="cr";Zt.CLASS_TOO_TALL="taller-than-window";Zt.CLASS_CLOSED="closed";Zt.CLASS_CLOSE_BUTTON="close-button";Zt.CLASS_CLOSE_TOP="close-top";Zt.CLASS_CLOSE_BOTTOM="close-bottom";Zt.CLASS_DRAG="drag";Zt.DEFAULT_WIDTH=245;Zt.TEXT_CLOSED="Close Controls";Zt.TEXT_OPEN="Open Controls";Zt._keydownHandler=function(y){document.activeElement.type!=="text"&&(y.which===Ih||y.keyCode===Ih)&&Zt.toggleHide()};Ne.bind(window,"keydown",Zt._keydownHandler,!1);Ze.extend(Zt.prototype,{add:function(t,e){return Js(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return Js(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;Ze.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&is.removeChild(this.domElement);var t=this;Ze.each(this.__folders,function(e){t.removeFolder(e)}),Ne.unbind(window,"keydown",Zt._keydownHandler,!1),kh(this)},addFolder:function(t){if(this.__folders[t]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new Zt(e);this.__folders[t]=n;var i=ql(this,n.domElement);return Ne.addClass(i,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],kh(t);var e=this;Ze.each(t.__folders,function(n){t.removeFolder(n)}),Ze.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=Ne.getOffset(t.__ul).top,n=0;Ze.each(t.__ul.childNodes,function(i){t.autoPlace&&i===t.__save_row||(n+=Ne.getHeight(i))}),window.innerHeight-e-Oh<n?(Ne.addClass(t.domElement,Zt.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-Oh+"px"):(Ne.removeClass(t.domElement,Zt.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&Ze.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:Ze.debounce(function(){this.onResize()},50),remember:function(){if(Ze.isUndefined(Zs)&&(Zs=new Yb,Zs.domElement.innerHTML=Hb),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;Ze.each(Array.prototype.slice.call(arguments),function(e){t.__rememberedObjects.length===0&&Kb(t),t.__rememberedObjects.indexOf(e)===-1&&t.__rememberedObjects.push(e)}),this.autoPlace&&Zl(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=ta(this)),t.folders={},Ze.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ta(this),Xl(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[Xs]=ta(this,!0)),this.load.remembered[t]=ta(this),this.preset=t,Yl(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){Ze.each(this.__controllers,function(e){this.getRoot().load.remembered?Nh(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),Ze.each(this.__folders,function(e){e.revert(e)}),t||Xl(this.getRoot(),!1)},listen:function(t){var e=this.__listening.length===0;this.__listening.push(t),e&&Uh(this.__listening)},updateDisplay:function(){Ze.each(this.__controllers,function(t){t.updateDisplay()}),Ze.each(this.__folders,function(t){t.updateDisplay()})}});function ql(y,t,e){var n=document.createElement("li");return t&&n.appendChild(t),e?y.__ul.insertBefore(n,e):y.__ul.appendChild(n),y.onResize(),n}function kh(y){Ne.unbind(window,"resize",y.__resizeHandler),y.saveToLocalStorageIfPossible&&Ne.unbind(window,"unload",y.saveToLocalStorageIfPossible)}function Xl(y,t){var e=y.__preset_select[y.__preset_select.selectedIndex];t?e.innerHTML=e.value+"*":e.innerHTML=e.value}function Jb(y,t,e){if(e.__li=t,e.__gui=y,Ze.extend(e,{options:function(r){if(arguments.length>1){var o=e.__li.nextElementSibling;return e.remove(),Js(y,e.object,e.property,{before:o,factoryArgs:[Ze.toArray(arguments)]})}if(Ze.isArray(r)||Ze.isObject(r)){var c=e.__li.nextElementSibling;return e.remove(),Js(y,e.object,e.property,{before:c,factoryArgs:[r]})}},name:function(r){return e.__li.firstElementChild.firstElementChild.innerHTML=r,e},listen:function(){return e.__gui.listen(e),e},remove:function(){return e.__gui.remove(e),e}}),e instanceof Vl){var n=new ea(e.object,e.property,{min:e.__min,max:e.__max,step:e.__step});Ze.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var r=e[s],o=n[s];e[s]=n[s]=function(){var c=Array.prototype.slice.call(arguments);return o.apply(n,c),r.apply(e,c)}}),Ne.addClass(t,"has-slider"),e.domElement.insertBefore(n.domElement,e.domElement.firstElementChild)}else if(e instanceof ea){var i=function(r){if(Ze.isNumber(e.__min)&&Ze.isNumber(e.__max)){var o=e.__li.firstElementChild.firstElementChild.innerHTML,c=e.__gui.__listening.indexOf(e)>-1;e.remove();var h=Js(y,e.object,e.property,{before:e.__li.nextElementSibling,factoryArgs:[e.__min,e.__max,e.__step]});return h.name(o),c&&h.listen(),h}return r};e.min=Ze.compose(i,e.min),e.max=Ze.compose(i,e.max)}else e instanceof Eh?(Ne.bind(t,"click",function(){Ne.fakeEvent(e.__checkbox,"click")}),Ne.bind(e.__checkbox,"click",function(s){s.stopPropagation()})):e instanceof Ch?(Ne.bind(t,"click",function(){Ne.fakeEvent(e.__button,"click")}),Ne.bind(t,"mouseover",function(){Ne.addClass(e.__button,"hover")}),Ne.bind(t,"mouseout",function(){Ne.removeClass(e.__button,"hover")})):e instanceof Hl&&(Ne.addClass(t,"color"),e.updateDisplay=Ze.compose(function(s){return t.style.borderLeftColor=e.__color.toString(),s},e.updateDisplay),e.updateDisplay());e.setValue=Ze.compose(function(s){return y.getRoot().__preset_select&&e.isModified()&&Xl(y.getRoot(),!0),s},e.setValue)}function Nh(y,t){var e=y.getRoot(),n=e.__rememberedObjects.indexOf(t.object);if(n!==-1){var i=e.__rememberedObjectIndecesToControllers[n];if(i===void 0&&(i={},e.__rememberedObjectIndecesToControllers[n]=i),i[t.property]=t,e.load&&e.load.remembered){var s=e.load.remembered,r=void 0;if(s[y.preset])r=s[y.preset];else if(s[Xs])r=s[Xs];else return;if(r[n]&&r[n][t.property]!==void 0){var o=r[n][t.property];t.initialValue=o,t.setValue(o)}}}}function Js(y,t,e,n){if(t[e]===void 0)throw new Error('Object "'+t+'" has no property "'+e+'"');var i=void 0;if(n.color)i=new Hl(t,e);else{var s=[t,e].concat(n.factoryArgs);i=Wb.apply(y,s)}n.before instanceof ai&&(n.before=n.before.__li),Nh(y,i),Ne.addClass(i.domElement,"c");var r=document.createElement("span");Ne.addClass(r,"property-name"),r.innerHTML=i.property;var o=document.createElement("div");o.appendChild(r),o.appendChild(i.domElement);var c=ql(y,o,n.before);return Ne.addClass(c,Zt.CLASS_CONTROLLER_ROW),i instanceof Hl?Ne.addClass(c,"color"):Ne.addClass(c,jb(i.getValue())),Jb(y,c,i),y.__controllers.push(i),i}function ss(y,t){return document.location.href+"."+t}function Yl(y,t,e){var n=document.createElement("option");n.innerHTML=t,n.value=t,y.__preset_select.appendChild(n),e&&(y.__preset_select.selectedIndex=y.__preset_select.length-1)}function Fh(y,t){t.style.display=y.useLocalStorage?"block":"none"}function Kb(y){var t=y.__save_row=document.createElement("li");Ne.addClass(y.domElement,"has-save"),y.__ul.insertBefore(t,y.__ul.firstChild),Ne.addClass(t,"save-row");var e=document.createElement("span");e.innerHTML="&nbsp;",Ne.addClass(e,"button gears");var n=document.createElement("span");n.innerHTML="Save",Ne.addClass(n,"button"),Ne.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New",Ne.addClass(i,"button"),Ne.addClass(i,"save-as");var s=document.createElement("span");s.innerHTML="Revert",Ne.addClass(s,"button"),Ne.addClass(s,"revert");var r=y.__preset_select=document.createElement("select");if(y.load&&y.load.remembered?Ze.each(y.load.remembered,function(u,a){Yl(y,a,a===y.preset)}):Yl(y,Xs,!1),Ne.bind(r,"change",function(){for(var u=0;u<y.__preset_select.length;u++)y.__preset_select[u].innerHTML=y.__preset_select[u].value;y.preset=this.value}),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(s),Ys){var o=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage"),h=document.getElementById("dg-save-locally");h.style.display="block",localStorage.getItem(ss(y,"isLocal"))==="true"&&c.setAttribute("checked","checked"),Fh(y,o),Ne.bind(c,"change",function(){y.useLocalStorage=!y.useLocalStorage,Fh(y,o)})}var p=document.getElementById("dg-new-constructor");Ne.bind(p,"keydown",function(u){u.metaKey&&(u.which===67||u.keyCode===67)&&Zs.hide()}),Ne.bind(e,"click",function(){p.innerHTML=JSON.stringify(y.getSaveObject(),void 0,2),Zs.show(),p.focus(),p.select()}),Ne.bind(n,"click",function(){y.save()}),Ne.bind(i,"click",function(){var u=prompt("Enter a new preset name.");u&&y.saveAs(u)}),Ne.bind(s,"click",function(){y.revert()})}function $b(y){var t=void 0;y.__resize_handle=document.createElement("div"),Ze.extend(y.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function e(s){return s.preventDefault(),y.width+=t-s.clientX,y.onResize(),t=s.clientX,!1}function n(){Ne.removeClass(y.__closeButton,Zt.CLASS_DRAG),Ne.unbind(window,"mousemove",e),Ne.unbind(window,"mouseup",n)}function i(s){return s.preventDefault(),t=s.clientX,Ne.addClass(y.__closeButton,Zt.CLASS_DRAG),Ne.bind(window,"mousemove",e),Ne.bind(window,"mouseup",n),!1}Ne.bind(y.__resize_handle,"mousedown",i),Ne.bind(y.__closeButton,"mousedown",i),y.domElement.insertBefore(y.__resize_handle,y.domElement.firstElementChild)}function Zl(y,t){y.domElement.style.width=t+"px",y.__save_row&&y.autoPlace&&(y.__save_row.style.width=t+"px"),y.__closeButton&&(y.__closeButton.style.width=t+"px")}function ta(y,t){var e={};return Ze.each(y.__rememberedObjects,function(n,i){var s={},r=y.__rememberedObjectIndecesToControllers[i];Ze.each(r,function(o,c){s[c]=t?o.initialValue:o.getValue()}),e[i]=s}),e}function Qb(y){for(var t=0;t<y.__preset_select.length;t++)y.__preset_select[t].value===y.preset&&(y.__preset_select.selectedIndex=t)}function Uh(y){y.length!==0&&Xb.call(window,function(){Uh(y)}),Ze.each(y,function(t){t.updateDisplay()})}var i1=Zt,ra=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function na(y){throw new Error('Could not dynamically require "'+y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var e1={exports:{}};/*! p5.js v1.4.0 June 29, 2021 */(function(y,t){(function(e){y.exports=e()})(function(){return function e(n,i,s){function r(h,p){if(!i[h]){if(!n[h]){var u=typeof na=="function"&&na;if(!p&&u)return u(h,!0);if(o)return o(h,!0);var a=new Error("Cannot find module '"+h+"'");throw a.code="MODULE_NOT_FOUND",a}var l=i[h]={exports:{}};n[h][0].call(l.exports,function(d){return r(n[h][1][d]||d)},l,l.exports,e,n,i,s)}return i[h].exports}for(var o=typeof na=="function"&&na,c=0;c<s.length;c++)r(s[c]);return r}({1:[function(e,n,i){i.byteLength=function(l){var d=u(l),f=d[0],m=d[1];return 3*(f+m)/4-m},i.toByteArray=function(l){var d,f,m=u(l),g=m[0],_=m[1],x=new o(function(A,T){return 3*(A+T)/4-T}(g,_)),w=0,M=0<_?g-4:g;for(f=0;f<M;f+=4)d=r[l.charCodeAt(f)]<<18|r[l.charCodeAt(f+1)]<<12|r[l.charCodeAt(f+2)]<<6|r[l.charCodeAt(f+3)],x[w++]=d>>16&255,x[w++]=d>>8&255,x[w++]=255&d;return _===2&&(d=r[l.charCodeAt(f)]<<2|r[l.charCodeAt(f+1)]>>4,x[w++]=255&d),_===1&&(d=r[l.charCodeAt(f)]<<10|r[l.charCodeAt(f+1)]<<4|r[l.charCodeAt(f+2)]>>2,x[w++]=d>>8&255,x[w++]=255&d),x},i.fromByteArray=function(l){for(var d,f=l.length,m=f%3,g=[],_=0,x=f-m;_<x;_+=16383)g.push(a(l,_,x<_+16383?x:_+16383));return m==1?(d=l[f-1],g.push(s[d>>2]+s[d<<4&63]+"==")):m==2&&(d=(l[f-2]<<8)+l[f-1],g.push(s[d>>10]+s[d>>4&63]+s[d<<2&63]+"=")),g.join("")};for(var s=[],r=[],o=typeof Uint8Array!="undefined"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=c.length;h<p;++h)s[h]=c[h],r[c.charCodeAt(h)]=h;function u(l){var d=l.length;if(0<d%4)throw new Error("Invalid string. Length must be a multiple of 4");var f=l.indexOf("=");return f===-1&&(f=d),[f,f===d?0:4-f%4]}function a(l,d,f){for(var m,g,_=[],x=d;x<f;x+=3)m=(l[x]<<16&16711680)+(l[x+1]<<8&65280)+(255&l[x+2]),_.push(s[(g=m)>>18&63]+s[g>>12&63]+s[g>>6&63]+s[63&g]);return _.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(e,n,i){},{}],3:[function(e,n,i){arguments[4][2][0].apply(i,arguments)},{dup:2}],4:[function(e,n,i){(function(s){var r=e("base64-js"),o=e("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=s,i.SlowBuffer=function(C){return+C!=C&&(C=0),s.alloc(+C)},i.INSPECT_MAX_BYTES=50;var h=2147483647;function p(C){if(h<C)throw new RangeError('The value "'+C+'" is invalid for option "size"');var F=new Uint8Array(C);return Object.setPrototypeOf(F,s.prototype),F}function s(C,F,V){if(typeof C!="number")return u(C,F,V);if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(C)}function u(C,F,V){if(typeof C=="string")return function(se,te){if(typeof te=="string"&&te!==""||(te="utf8"),!s.isEncoding(te))throw new TypeError("Unknown encoding: "+te);var be=0|m(se,te),$=p(be),me=$.write(se,te);return me!==be&&($=$.slice(0,me)),$}(C,F);if(ArrayBuffer.isView(C))return d(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(ce(C,ArrayBuffer)||C&&ce(C.buffer,ArrayBuffer))return function(se,te,be){if(te<0||se.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<te+(be||0))throw new RangeError('"length" is outside of buffer bounds');var $;return $=te===void 0&&be===void 0?new Uint8Array(se):be===void 0?new Uint8Array(se,te):new Uint8Array(se,te,be),Object.setPrototypeOf($,s.prototype),$}(C,F,V);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ne=C.valueOf&&C.valueOf();if(ne!=null&&ne!==C)return s.from(ne,F,V);var re=function(se){if(s.isBuffer(se)){var te=0|f(se.length),be=p(te);return be.length===0||se.copy(be,0,0,te),be}if(se.length!==void 0)return typeof se.length!="number"||de(se.length)?p(0):d(se);if(se.type==="Buffer"&&Array.isArray(se.data))return d(se.data)}(C);if(re)return re;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return s.from(C[Symbol.toPrimitive]("string"),F,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}function a(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function l(C){return a(C),p(C<0?0:0|f(C))}function d(C){for(var F=C.length<0?0:0|f(C.length),V=p(F),ne=0;ne<F;ne+=1)V[ne]=255&C[ne];return V}function f(C){if(h<=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|C}function m(C,F){if(s.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||ce(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);var V=C.length,ne=2<arguments.length&&arguments[2]===!0;if(!ne&&V===0)return 0;for(var re=!1;;)switch(F){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return _e(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return pe(C).length;default:if(re)return ne?-1:_e(C).length;F=(""+F).toLowerCase(),re=!0}}function g(C,F,V){var ne=C[F];C[F]=C[V],C[V]=ne}function _(C,F,V,ne,re){if(C.length===0)return-1;if(typeof V=="string"?(ne=V,V=0):2147483647<V?V=2147483647:V<-2147483648&&(V=-2147483648),de(V=+V)&&(V=re?0:C.length-1),V<0&&(V=C.length+V),V>=C.length){if(re)return-1;V=C.length-1}else if(V<0){if(!re)return-1;V=0}if(typeof F=="string"&&(F=s.from(F,ne)),s.isBuffer(F))return F.length===0?-1:x(C,F,V,ne,re);if(typeof F=="number")return F&=255,typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(C,F,V):Uint8Array.prototype.lastIndexOf.call(C,F,V):x(C,[F],V,ne,re);throw new TypeError("val must be string, number or Buffer")}function x(C,F,V,ne,re){var se,te=1,be=C.length,$=F.length;if(ne!==void 0&&((ne=String(ne).toLowerCase())==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(C.length<2||F.length<2)return-1;be/=te=2,$/=2,V/=2}function me(ye,xe){return te===1?ye[xe]:ye.readUInt16BE(xe*te)}if(re){var ue=-1;for(se=V;se<be;se++)if(me(C,se)===me(F,ue===-1?0:se-ue)){if(ue===-1&&(ue=se),se-ue+1===$)return ue*te}else ue!==-1&&(se-=se-ue),ue=-1}else for(be<V+$&&(V=be-$),se=V;0<=se;se--){for(var B=!0,W=0;W<$;W++)if(me(C,se+W)!==me(F,W)){B=!1;break}if(B)return se}return-1}function w(C,F,V,ne){V=Number(V)||0;var re=C.length-V;ne?re<(ne=Number(ne))&&(ne=re):ne=re;var se=F.length;se/2<ne&&(ne=se/2);for(var te=0;te<ne;++te){var be=parseInt(F.substr(2*te,2),16);if(de(be))return te;C[V+te]=be}return te}function M(C,F,V,ne){return ge(function(re){for(var se=[],te=0;te<re.length;++te)se.push(255&re.charCodeAt(te));return se}(F),C,V,ne)}function A(C,F,V,ne){return ge(function(re,se){for(var te,be,$,me=[],ue=0;ue<re.length&&!((se-=2)<0);++ue)te=re.charCodeAt(ue),be=te>>8,$=te%256,me.push($),me.push(be);return me}(F,C.length-V),C,V,ne)}function T(C,F,V){return F===0&&V===C.length?r.fromByteArray(C):r.fromByteArray(C.slice(F,V))}function I(C,F,V){V=Math.min(C.length,V);for(var ne=[],re=F;re<V;){var se,te,be,$,me=C[re],ue=null,B=239<me?4:223<me?3:191<me?2:1;if(re+B<=V)switch(B){case 1:me<128&&(ue=me);break;case 2:(192&(se=C[re+1]))==128&&127<($=(31&me)<<6|63&se)&&(ue=$);break;case 3:se=C[re+1],te=C[re+2],(192&se)==128&&(192&te)==128&&2047<($=(15&me)<<12|(63&se)<<6|63&te)&&($<55296||57343<$)&&(ue=$);break;case 4:se=C[re+1],te=C[re+2],be=C[re+3],(192&se)==128&&(192&te)==128&&(192&be)==128&&65535<($=(15&me)<<18|(63&se)<<12|(63&te)<<6|63&be)&&$<1114112&&(ue=$)}ue===null?(ue=65533,B=1):65535<ue&&(ue-=65536,ne.push(ue>>>10&1023|55296),ue=56320|1023&ue),ne.push(ue),re+=B}return function(W){var ye=W.length;if(ye<=R)return String.fromCharCode.apply(String,W);for(var xe="",Re=0;Re<ye;)xe+=String.fromCharCode.apply(String,W.slice(Re,Re+=R));return xe}(ne)}i.kMaxLength=h,(s.TYPED_ARRAY_SUPPORT=function(){try{var C=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf(C,F),C.foo()===42}catch{return!1}}())||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),typeof Symbol!="undefined"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(C,F,V){return u(C,F,V)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(C,F,V){return re=F,se=V,a(ne=C),ne<=0?p(ne):re!==void 0?typeof se=="string"?p(ne).fill(re,se):p(ne).fill(re):p(ne);var ne,re,se},s.allocUnsafe=function(C){return l(C)},s.allocUnsafeSlow=function(C){return l(C)},s.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==s.prototype},s.compare=function(C,F){if(ce(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),ce(F,Uint8Array)&&(F=s.from(F,F.offset,F.byteLength)),!s.isBuffer(C)||!s.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===F)return 0;for(var V=C.length,ne=F.length,re=0,se=Math.min(V,ne);re<se;++re)if(C[re]!==F[re]){V=C[re],ne=F[re];break}return V<ne?-1:ne<V?1:0},s.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(C,F){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return s.alloc(0);var V;if(F===void 0)for(V=F=0;V<C.length;++V)F+=C[V].length;var ne=s.allocUnsafe(F),re=0;for(V=0;V<C.length;++V){var se=C[V];if(ce(se,Uint8Array)&&(se=s.from(se)),!s.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(ne,re),re+=se.length}return ne},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<C;F+=2)g(this,F,F+1);return this},s.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<C;F+=4)g(this,F,F+3),g(this,F+1,F+2);return this},s.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<C;F+=8)g(this,F,F+7),g(this,F+1,F+6),g(this,F+2,F+5),g(this,F+3,F+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var C=this.length;return C===0?"":arguments.length===0?I(this,0,C):function(F,V,ne){var re=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(V>>>=0))return"";for(F=F||"utf8";;)switch(F){case"hex":return D(this,V,ne);case"utf8":case"utf-8":return I(this,V,ne);case"ascii":return P(this,V,ne);case"latin1":case"binary":return O(this,V,ne);case"base64":return T(this,V,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,V,ne);default:if(re)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),re=!0}}.apply(this,arguments)},s.prototype.equals=function(C){if(!s.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||s.compare(this,C)===0},s.prototype.inspect=function(){var C="",F=i.INSPECT_MAX_BYTES;return C=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(C+=" ... "),"<Buffer "+C+">"},c&&(s.prototype[c]=s.prototype.inspect),s.prototype.compare=function(C,F,V,ne,re){if(ce(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),!s.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(F===void 0&&(F=0),V===void 0&&(V=C?C.length:0),ne===void 0&&(ne=0),re===void 0&&(re=this.length),F<0||V>C.length||ne<0||re>this.length)throw new RangeError("out of range index");if(re<=ne&&V<=F)return 0;if(re<=ne)return-1;if(V<=F)return 1;if(this===C)return 0;for(var se=(re>>>=0)-(ne>>>=0),te=(V>>>=0)-(F>>>=0),be=Math.min(se,te),$=this.slice(ne,re),me=C.slice(F,V),ue=0;ue<be;++ue)if($[ue]!==me[ue]){se=$[ue],te=me[ue];break}return se<te?-1:te<se?1:0},s.prototype.includes=function(C,F,V){return this.indexOf(C,F,V)!==-1},s.prototype.indexOf=function(C,F,V){return _(this,C,F,V,!0)},s.prototype.lastIndexOf=function(C,F,V){return _(this,C,F,V,!1)},s.prototype.write=function(C,F,V,ne){if(F===void 0)ne="utf8",V=this.length,F=0;else if(V===void 0&&typeof F=="string")ne=F,V=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(V)?(V>>>=0,ne===void 0&&(ne="utf8")):(ne=V,V=void 0)}var re=this.length-F;if((V===void 0||re<V)&&(V=re),0<C.length&&(V<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne=ne||"utf8";for(var se,te,be,$,me,ue,B=!1;;)switch(ne){case"hex":return w(this,C,F,V);case"utf8":case"utf-8":return me=F,ue=V,ge(_e(C,($=this).length-me),$,me,ue);case"ascii":return M(this,C,F,V);case"latin1":case"binary":return M(this,C,F,V);case"base64":return se=this,te=F,be=V,ge(pe(C),se,te,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,C,F,V);default:if(B)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),B=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function P(C,F,V){var ne="";V=Math.min(C.length,V);for(var re=F;re<V;++re)ne+=String.fromCharCode(127&C[re]);return ne}function O(C,F,V){var ne="";V=Math.min(C.length,V);for(var re=F;re<V;++re)ne+=String.fromCharCode(C[re]);return ne}function D(C,F,V){var ne=C.length;(!F||F<0)&&(F=0),(!V||V<0||ne<V)&&(V=ne);for(var re="",se=F;se<V;++se)re+=Ee[C[se]];return re}function k(C,F,V){for(var ne=C.slice(F,V),re="",se=0;se<ne.length;se+=2)re+=String.fromCharCode(ne[se]+256*ne[se+1]);return re}function N(C,F,V){if(C%1!=0||C<0)throw new RangeError("offset is not uint");if(V<C+F)throw new RangeError("Trying to access beyond buffer length")}function q(C,F,V,ne,re,se){if(!s.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(re<F||F<se)throw new RangeError('"value" argument is out of bounds');if(V+ne>C.length)throw new RangeError("Index out of range")}function X(C,F,V,ne){if(V+ne>C.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function G(C,F,V,ne,re){return F=+F,V>>>=0,re||X(C,0,V,4),o.write(C,F,V,ne,23,4),V+4}function Q(C,F,V,ne,re){return F=+F,V>>>=0,re||X(C,0,V,8),o.write(C,F,V,ne,52,8),V+8}s.prototype.slice=function(C,F){var V=this.length;(C=~~C)<0?(C+=V)<0&&(C=0):V<C&&(C=V),(F=F===void 0?V:~~F)<0?(F+=V)<0&&(F=0):V<F&&(F=V),F<C&&(F=C);var ne=this.subarray(C,F);return Object.setPrototypeOf(ne,s.prototype),ne},s.prototype.readUIntLE=function(C,F,V){C>>>=0,F>>>=0,V||N(C,F,this.length);for(var ne=this[C],re=1,se=0;++se<F&&(re*=256);)ne+=this[C+se]*re;return ne},s.prototype.readUIntBE=function(C,F,V){C>>>=0,F>>>=0,V||N(C,F,this.length);for(var ne=this[C+--F],re=1;0<F&&(re*=256);)ne+=this[C+--F]*re;return ne},s.prototype.readUInt8=function(C,F){return C>>>=0,F||N(C,1,this.length),this[C]},s.prototype.readUInt16LE=function(C,F){return C>>>=0,F||N(C,2,this.length),this[C]|this[C+1]<<8},s.prototype.readUInt16BE=function(C,F){return C>>>=0,F||N(C,2,this.length),this[C]<<8|this[C+1]},s.prototype.readUInt32LE=function(C,F){return C>>>=0,F||N(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},s.prototype.readUInt32BE=function(C,F){return C>>>=0,F||N(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},s.prototype.readIntLE=function(C,F,V){C>>>=0,F>>>=0,V||N(C,F,this.length);for(var ne=this[C],re=1,se=0;++se<F&&(re*=256);)ne+=this[C+se]*re;return(re*=128)<=ne&&(ne-=Math.pow(2,8*F)),ne},s.prototype.readIntBE=function(C,F,V){C>>>=0,F>>>=0,V||N(C,F,this.length);for(var ne=F,re=1,se=this[C+--ne];0<ne&&(re*=256);)se+=this[C+--ne]*re;return(re*=128)<=se&&(se-=Math.pow(2,8*F)),se},s.prototype.readInt8=function(C,F){return C>>>=0,F||N(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},s.prototype.readInt16LE=function(C,F){C>>>=0,F||N(C,2,this.length);var V=this[C]|this[C+1]<<8;return 32768&V?4294901760|V:V},s.prototype.readInt16BE=function(C,F){C>>>=0,F||N(C,2,this.length);var V=this[C+1]|this[C]<<8;return 32768&V?4294901760|V:V},s.prototype.readInt32LE=function(C,F){return C>>>=0,F||N(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},s.prototype.readInt32BE=function(C,F){return C>>>=0,F||N(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},s.prototype.readFloatLE=function(C,F){return C>>>=0,F||N(C,4,this.length),o.read(this,C,!0,23,4)},s.prototype.readFloatBE=function(C,F){return C>>>=0,F||N(C,4,this.length),o.read(this,C,!1,23,4)},s.prototype.readDoubleLE=function(C,F){return C>>>=0,F||N(C,8,this.length),o.read(this,C,!0,52,8)},s.prototype.readDoubleBE=function(C,F){return C>>>=0,F||N(C,8,this.length),o.read(this,C,!1,52,8)},s.prototype.writeUIntLE=function(C,F,V,ne){C=+C,F>>>=0,V>>>=0,ne||q(this,C,F,V,Math.pow(2,8*V)-1,0);var re=1,se=0;for(this[F]=255&C;++se<V&&(re*=256);)this[F+se]=C/re&255;return F+V},s.prototype.writeUIntBE=function(C,F,V,ne){C=+C,F>>>=0,V>>>=0,ne||q(this,C,F,V,Math.pow(2,8*V)-1,0);var re=V-1,se=1;for(this[F+re]=255&C;0<=--re&&(se*=256);)this[F+re]=C/se&255;return F+V},s.prototype.writeUInt8=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,1,255,0),this[F]=255&C,F+1},s.prototype.writeUInt16LE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,2,65535,0),this[F]=255&C,this[F+1]=C>>>8,F+2},s.prototype.writeUInt16BE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,2,65535,0),this[F]=C>>>8,this[F+1]=255&C,F+2},s.prototype.writeUInt32LE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,4,4294967295,0),this[F+3]=C>>>24,this[F+2]=C>>>16,this[F+1]=C>>>8,this[F]=255&C,F+4},s.prototype.writeUInt32BE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,4,4294967295,0),this[F]=C>>>24,this[F+1]=C>>>16,this[F+2]=C>>>8,this[F+3]=255&C,F+4},s.prototype.writeIntLE=function(C,F,V,ne){if(C=+C,F>>>=0,!ne){var re=Math.pow(2,8*V-1);q(this,C,F,V,re-1,-re)}var se=0,te=1,be=0;for(this[F]=255&C;++se<V&&(te*=256);)C<0&&be===0&&this[F+se-1]!==0&&(be=1),this[F+se]=(C/te>>0)-be&255;return F+V},s.prototype.writeIntBE=function(C,F,V,ne){if(C=+C,F>>>=0,!ne){var re=Math.pow(2,8*V-1);q(this,C,F,V,re-1,-re)}var se=V-1,te=1,be=0;for(this[F+se]=255&C;0<=--se&&(te*=256);)C<0&&be===0&&this[F+se+1]!==0&&(be=1),this[F+se]=(C/te>>0)-be&255;return F+V},s.prototype.writeInt8=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,1,127,-128),C<0&&(C=255+C+1),this[F]=255&C,F+1},s.prototype.writeInt16LE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,2,32767,-32768),this[F]=255&C,this[F+1]=C>>>8,F+2},s.prototype.writeInt16BE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,2,32767,-32768),this[F]=C>>>8,this[F+1]=255&C,F+2},s.prototype.writeInt32LE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,4,2147483647,-2147483648),this[F]=255&C,this[F+1]=C>>>8,this[F+2]=C>>>16,this[F+3]=C>>>24,F+4},s.prototype.writeInt32BE=function(C,F,V){return C=+C,F>>>=0,V||q(this,C,F,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[F]=C>>>24,this[F+1]=C>>>16,this[F+2]=C>>>8,this[F+3]=255&C,F+4},s.prototype.writeFloatLE=function(C,F,V){return G(this,C,F,!0,V)},s.prototype.writeFloatBE=function(C,F,V){return G(this,C,F,!1,V)},s.prototype.writeDoubleLE=function(C,F,V){return Q(this,C,F,!0,V)},s.prototype.writeDoubleBE=function(C,F,V){return Q(this,C,F,!1,V)},s.prototype.copy=function(C,F,V,ne){if(!s.isBuffer(C))throw new TypeError("argument should be a Buffer");if(V=V||0,ne||ne===0||(ne=this.length),F>=C.length&&(F=C.length),F=F||0,0<ne&&ne<V&&(ne=V),ne===V||C.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),C.length-F<ne-V&&(ne=C.length-F+V);var re=ne-V;if(this===C&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(F,V,ne);else if(this===C&&V<F&&F<ne)for(var se=re-1;0<=se;--se)C[se+F]=this[se+V];else Uint8Array.prototype.set.call(C,this.subarray(V,ne),F);return re},s.prototype.fill=function(C,F,V,ne){if(typeof C=="string"){if(typeof F=="string"?(ne=F,F=0,V=this.length):typeof V=="string"&&(ne=V,V=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!s.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(C.length===1){var re=C.charCodeAt(0);(ne==="utf8"&&re<128||ne==="latin1")&&(C=re)}}else typeof C=="number"?C&=255:typeof C=="boolean"&&(C=Number(C));if(F<0||this.length<F||this.length<V)throw new RangeError("Out of range index");if(V<=F)return this;var se;if(F>>>=0,V=V===void 0?this.length:V>>>0,typeof(C=C||0)=="number")for(se=F;se<V;++se)this[se]=C;else{var te=s.isBuffer(C)?C:s.from(C,ne),be=te.length;if(be===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(se=0;se<V-F;++se)this[se+F]=te[se%be]}return this};var K=/[^+/0-9A-Za-z-_]/g;function _e(C,F){var V;F=F||1/0;for(var ne=C.length,re=null,se=[],te=0;te<ne;++te){if(55295<(V=C.charCodeAt(te))&&V<57344){if(!re){if(56319<V){-1<(F-=3)&&se.push(239,191,189);continue}if(te+1===ne){-1<(F-=3)&&se.push(239,191,189);continue}re=V;continue}if(V<56320){-1<(F-=3)&&se.push(239,191,189),re=V;continue}V=65536+(re-55296<<10|V-56320)}else re&&-1<(F-=3)&&se.push(239,191,189);if(re=null,V<128){if(--F<0)break;se.push(V)}else if(V<2048){if((F-=2)<0)break;se.push(V>>6|192,63&V|128)}else if(V<65536){if((F-=3)<0)break;se.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((F-=4)<0)break;se.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return se}function pe(C){return r.toByteArray(function(F){if((F=(F=F.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}(C))}function ge(C,F,V,ne){for(var re=0;re<ne&&!(re+V>=F.length||re>=C.length);++re)F[re+V]=C[re];return re}function ce(C,F){return C instanceof F||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===F.name}function de(C){return C!=C}var Ee=function(){for(var C="0123456789abcdef",F=new Array(256),V=0;V<16;++V)for(var ne=16*V,re=0;re<16;++re)F[ne+re]=C[V]+C[re];return F}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:233}],5:[function(e,n,i){n.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},{}],6:[function(e,n,i){var s=e("../internals/is-object");n.exports=function(r){if(!s(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype");return r}},{"../internals/is-object":73}],7:[function(e,n,i){var s=e("../internals/well-known-symbol"),r=e("../internals/object-create"),o=e("../internals/object-define-property"),c=s("unscopables"),h=Array.prototype;h[c]==null&&o.f(h,c,{configurable:!0,value:r(null)}),n.exports=function(p){h[c][p]=!0}},{"../internals/object-create":89,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],8:[function(e,n,i){var s=e("../internals/string-multibyte").charAt;n.exports=function(r,o,c){return o+(c?s(r,o).length:1)}},{"../internals/string-multibyte":122}],9:[function(e,n,i){n.exports=function(s,r,o){if(!(s instanceof r))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return s}},{}],10:[function(e,n,i){var s=e("../internals/is-object");n.exports=function(r){if(!s(r))throw TypeError(String(r)+" is not an object");return r}},{"../internals/is-object":73}],11:[function(e,n,i){n.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},{}],12:[function(e,n,i){function s(G){return p(G)&&u(X,a(G))}var r,o=e("../internals/array-buffer-native"),c=e("../internals/descriptors"),h=e("../internals/global"),p=e("../internals/is-object"),u=e("../internals/has"),a=e("../internals/classof"),l=e("../internals/create-non-enumerable-property"),d=e("../internals/redefine"),f=e("../internals/object-define-property").f,m=e("../internals/object-get-prototype-of"),g=e("../internals/object-set-prototype-of"),_=e("../internals/well-known-symbol"),x=e("../internals/uid"),w=h.Int8Array,M=w&&w.prototype,A=h.Uint8ClampedArray,T=A&&A.prototype,I=w&&m(w),R=M&&m(M),P=Object.prototype,O=P.isPrototypeOf,D=_("toStringTag"),k=x("TYPED_ARRAY_TAG"),N=o&&!!g&&a(h.opera)!=="Opera",q=!1,X={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(r in X)h[r]||(N=!1);if((!N||typeof I!="function"||I===Function.prototype)&&(I=function(){throw TypeError("Incorrect invocation")},N))for(r in X)h[r]&&g(h[r],I);if((!N||!R||R===P)&&(R=I.prototype,N))for(r in X)h[r]&&g(h[r].prototype,R);if(N&&m(T)!==R&&g(T,R),c&&!u(R,D))for(r in q=!0,f(R,D,{get:function(){return p(this)?this[k]:void 0}}),X)h[r]&&l(h[r],k,r);n.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:q&&k,aTypedArray:function(G){if(s(G))return G;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(G){if(g){if(O.call(I,G))return G}else for(var Q in X)if(u(X,r)){var K=h[Q];if(K&&(G===K||O.call(K,G)))return G}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(G,Q,K){if(c){if(K)for(var _e in X){var pe=h[_e];pe&&u(pe.prototype,G)&&delete pe.prototype[G]}R[G]&&!K||d(R,G,K?Q:N&&M[G]||Q)}},exportTypedArrayStaticMethod:function(G,Q,K){var _e,pe;if(c){if(g){if(K)for(_e in X)(pe=h[_e])&&u(pe,G)&&delete pe[G];if(I[G]&&!K)return;try{return d(I,G,K?Q:N&&w[G]||Q)}catch{}}for(_e in X)!(pe=h[_e])||pe[G]&&!K||d(pe,G,Q)}},isView:function(G){var Q=a(G);return Q==="DataView"||u(X,Q)},isTypedArray:s,TypedArray:I,TypedArrayPrototype:R}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":58,"../internals/has":59,"../internals/is-object":73,"../internals/object-define-property":91,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine":107,"../internals/uid":142,"../internals/well-known-symbol":145}],13:[function(e,n,i){function s(ue){return[255&ue]}function r(ue){return[255&ue,ue>>8&255]}function o(ue){return[255&ue,ue>>8&255,ue>>16&255,ue>>24&255]}function c(ue){return ue[3]<<24|ue[2]<<16|ue[1]<<8|ue[0]}function h(ue){return V(ue,23,4)}function p(ue){return V(ue,52,8)}function u(ue,B){D(ue[_e],B,{get:function(){return X(this)[B]}})}function a(ue,B,W,ye){var xe=T(W),Re=X(ue);if(xe+B>Re.byteLength)throw F(pe);var Ve=X(Re.buffer).bytes,Pe=xe+Re.byteOffset,Ke=Ve.slice(Pe,Pe+B);return ye?Ke:Ke.reverse()}function l(ue,B,W,ye,xe,Re){var Ve=T(W),Pe=X(ue);if(Ve+B>Pe.byteLength)throw F(pe);for(var Ke=X(Pe.buffer).bytes,$e=Ve+Pe.byteOffset,Le=ye(+xe),ae=0;ae<B;ae++)Ke[$e+ae]=Le[Re?ae:B-ae-1]}var d=e("../internals/global"),f=e("../internals/descriptors"),m=e("../internals/array-buffer-native"),g=e("../internals/create-non-enumerable-property"),_=e("../internals/redefine-all"),x=e("../internals/fails"),w=e("../internals/an-instance"),M=e("../internals/to-integer"),A=e("../internals/to-length"),T=e("../internals/to-index"),I=e("../internals/ieee754"),R=e("../internals/object-get-prototype-of"),P=e("../internals/object-set-prototype-of"),O=e("../internals/object-get-own-property-names").f,D=e("../internals/object-define-property").f,k=e("../internals/array-fill"),N=e("../internals/set-to-string-tag"),q=e("../internals/internal-state"),X=q.get,G=q.set,Q="ArrayBuffer",K="DataView",_e="prototype",pe="Wrong index",ge=d[Q],ce=ge,de=d[K],Ee=de&&de[_e],C=Object.prototype,F=d.RangeError,V=I.pack,ne=I.unpack;if(m){if(!x(function(){ge(1)})||!x(function(){new ge(-1)})||x(function(){return new ge,new ge(1.5),new ge(NaN),ge.name!=Q})){for(var re,se=(ce=function(ue){return w(this,ce),new ge(T(ue))})[_e]=ge[_e],te=O(ge),be=0;te.length>be;)(re=te[be++])in ce||g(ce,re,ge[re]);se.constructor=ce}P&&R(Ee)!==C&&P(Ee,C);var $=new de(new ce(2)),me=Ee.setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||_(Ee,{setInt8:function(ue,B){me.call(this,ue,B<<24>>24)},setUint8:function(ue,B){me.call(this,ue,B<<24>>24)}},{unsafe:!0})}else ce=function(ue){w(this,ce,Q);var B=T(ue);G(this,{bytes:k.call(new Array(B),0),byteLength:B}),f||(this.byteLength=B)},de=function(ue,B,W){w(this,de,K),w(ue,ce,K);var ye=X(ue).byteLength,xe=M(B);if(xe<0||ye<xe)throw F("Wrong offset");if(ye<xe+(W=W===void 0?ye-xe:A(W)))throw F("Wrong length");G(this,{buffer:ue,byteLength:W,byteOffset:xe}),f||(this.buffer=ue,this.byteLength=W,this.byteOffset=xe)},f&&(u(ce,"byteLength"),u(de,"buffer"),u(de,"byteLength"),u(de,"byteOffset")),_(de[_e],{getInt8:function(ue){return a(this,1,ue)[0]<<24>>24},getUint8:function(ue){return a(this,1,ue)[0]},getInt16:function(ue,B){var W=a(this,2,ue,1<arguments.length?B:void 0);return(W[1]<<8|W[0])<<16>>16},getUint16:function(ue,B){var W=a(this,2,ue,1<arguments.length?B:void 0);return W[1]<<8|W[0]},getInt32:function(ue,B){return c(a(this,4,ue,1<arguments.length?B:void 0))},getUint32:function(ue,B){return c(a(this,4,ue,1<arguments.length?B:void 0))>>>0},getFloat32:function(ue,B){return ne(a(this,4,ue,1<arguments.length?B:void 0),23)},getFloat64:function(ue,B){return ne(a(this,8,ue,1<arguments.length?B:void 0),52)},setInt8:function(ue,B){l(this,1,ue,s,B)},setUint8:function(ue,B){l(this,1,ue,s,B)},setInt16:function(ue,B,W){l(this,2,ue,r,B,2<arguments.length?W:void 0)},setUint16:function(ue,B,W){l(this,2,ue,r,B,2<arguments.length?W:void 0)},setInt32:function(ue,B,W){l(this,4,ue,o,B,2<arguments.length?W:void 0)},setUint32:function(ue,B,W){l(this,4,ue,o,B,2<arguments.length?W:void 0)},setFloat32:function(ue,B,W){l(this,4,ue,h,B,2<arguments.length?W:void 0)},setFloat64:function(ue,B,W){l(this,8,ue,p,B,2<arguments.length?W:void 0)}});N(ce,Q),N(de,K),n.exports={ArrayBuffer:ce,DataView:de}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/ieee754":64,"../internals/internal-state":69,"../internals/object-define-property":91,"../internals/object-get-own-property-names":94,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine-all":106,"../internals/set-to-string-tag":116,"../internals/to-index":130,"../internals/to-integer":132,"../internals/to-length":133}],14:[function(e,n,i){var s=e("../internals/to-object"),r=e("../internals/to-absolute-index"),o=e("../internals/to-length"),c=Math.min;n.exports=[].copyWithin||function(h,p,u){var a=s(this),l=o(a.length),d=r(h,l),f=r(p,l),m=2<arguments.length?u:void 0,g=c((m===void 0?l:r(m,l))-f,l-d),_=1;for(f<d&&d<f+g&&(_=-1,f+=g-1,d+=g-1);0<g--;)f in a?a[d]=a[f]:delete a[d],d+=_,f+=_;return a}},{"../internals/to-absolute-index":129,"../internals/to-length":133,"../internals/to-object":134}],15:[function(e,n,i){var s=e("../internals/to-object"),r=e("../internals/to-absolute-index"),o=e("../internals/to-length");n.exports=function(c,h,p){for(var u=s(this),a=o(u.length),l=arguments.length,d=r(1<l?h:void 0,a),f=2<l?p:void 0,m=f===void 0?a:r(f,a);d<m;)u[d++]=c;return u}},{"../internals/to-absolute-index":129,"../internals/to-length":133,"../internals/to-object":134}],16:[function(e,n,i){var s=e("../internals/array-iteration").forEach,r=e("../internals/array-method-is-strict"),o=e("../internals/array-method-uses-to-length"),c=r("forEach"),h=o("forEach");n.exports=c&&h?[].forEach:function(p,u){return s(this,p,1<arguments.length?u:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,n,i){var s=e("../internals/function-bind-context"),r=e("../internals/to-object"),o=e("../internals/call-with-safe-iteration-closing"),c=e("../internals/is-array-iterator-method"),h=e("../internals/to-length"),p=e("../internals/create-property"),u=e("../internals/get-iterator-method");n.exports=function(a,l,d){var f,m,g,_,x,w,M=r(a),A=typeof this=="function"?this:Array,T=arguments.length,I=1<T?l:void 0,R=I!==void 0,P=u(M),O=0;if(R&&(I=s(I,2<T?d:void 0,2)),P==null||A==Array&&c(P))for(m=new A(f=h(M.length));O<f;O++)w=R?I(M[O],O):M[O],p(m,O,w);else for(x=(_=P.call(M)).next,m=new A;!(g=x.call(_)).done;O++)w=R?o(_,I,[g.value,O],!0):g.value,p(m,O,w);return m.length=O,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133,"../internals/to-object":134}],18:[function(e,n,i){function s(h){return function(p,u,a){var l,d=r(p),f=o(d.length),m=c(a,f);if(h&&u!=u){for(;m<f;)if((l=d[m++])!=l)return!0}else for(;m<f;m++)if((h||m in d)&&d[m]===u)return h||m||0;return!h&&-1}}var r=e("../internals/to-indexed-object"),o=e("../internals/to-length"),c=e("../internals/to-absolute-index");n.exports={includes:s(!0),indexOf:s(!1)}},{"../internals/to-absolute-index":129,"../internals/to-indexed-object":131,"../internals/to-length":133}],19:[function(e,n,i){function s(a){var l=a==1,d=a==2,f=a==3,m=a==4,g=a==6,_=a==5||g;return function(x,w,M,A){for(var T,I,R=c(x),P=o(R),O=r(w,M,3),D=h(P.length),k=0,N=A||p,q=l?N(x,D):d?N(x,0):void 0;k<D;k++)if((_||k in P)&&(I=O(T=P[k],k,R),a)){if(l)q[k]=I;else if(I)switch(a){case 3:return!0;case 5:return T;case 6:return k;case 2:u.call(q,T)}else if(m)return!1}return g?-1:f||m?m:q}}var r=e("../internals/function-bind-context"),o=e("../internals/indexed-object"),c=e("../internals/to-object"),h=e("../internals/to-length"),p=e("../internals/array-species-create"),u=[].push;n.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":53,"../internals/indexed-object":65,"../internals/to-length":133,"../internals/to-object":134}],20:[function(e,n,i){var s=e("../internals/to-indexed-object"),r=e("../internals/to-integer"),o=e("../internals/to-length"),c=e("../internals/array-method-is-strict"),h=e("../internals/array-method-uses-to-length"),p=Math.min,u=[].lastIndexOf,a=!!u&&1/[1].lastIndexOf(1,-0)<0,l=c("lastIndexOf"),d=h("indexOf",{ACCESSORS:!0,1:0}),f=a||!l||!d;n.exports=f?function(m,g){if(a)return u.apply(this,arguments)||0;var _=s(this),x=o(_.length),w=x-1;for(1<arguments.length&&(w=p(w,r(g))),w<0&&(w=x+w);0<=w;w--)if(w in _&&_[w]===m)return w||0;return-1}:u},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":131,"../internals/to-integer":132,"../internals/to-length":133}],21:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/well-known-symbol"),o=e("../internals/engine-v8-version"),c=r("species");n.exports=function(h){return 51<=o||!s(function(){var p=[];return(p.constructor={})[c]=function(){return{foo:1}},p[h](Boolean).foo!==1})}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":145}],22:[function(e,n,i){var s=e("../internals/fails");n.exports=function(r,o){var c=[][r];return!!c&&s(function(){c.call(null,o||function(){throw 1},1)})}},{"../internals/fails":50}],23:[function(e,n,i){function s(u){throw u}var r=e("../internals/descriptors"),o=e("../internals/fails"),c=e("../internals/has"),h=Object.defineProperty,p={};n.exports=function(u,a){if(c(p,u))return p[u];var l=[][u],d=!!c(a=a||{},"ACCESSORS")&&a.ACCESSORS,f=c(a,0)?a[0]:s,m=c(a,1)?a[1]:void 0;return p[u]=!!l&&!o(function(){if(d&&!r)return!0;var g={length:-1};d?h(g,1,{enumerable:!0,get:s}):g[1]=1,l.call(g,f,m)})}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":59}],24:[function(e,n,i){function s(p){return function(u,a,l,d){r(a);var f=o(u),m=c(f),g=h(f.length),_=p?g-1:0,x=p?-1:1;if(l<2)for(;;){if(_ in m){d=m[_],_+=x;break}if(_+=x,p?_<0:g<=_)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=_:_<g;_+=x)_ in m&&(d=a(d,m[_],_,f));return d}}var r=e("../internals/a-function"),o=e("../internals/to-object"),c=e("../internals/indexed-object"),h=e("../internals/to-length");n.exports={left:s(!1),right:s(!0)}},{"../internals/a-function":5,"../internals/indexed-object":65,"../internals/to-length":133,"../internals/to-object":134}],25:[function(e,n,i){var s=e("../internals/is-object"),r=e("../internals/is-array"),o=e("../internals/well-known-symbol")("species");n.exports=function(c,h){var p;return r(c)&&(typeof(p=c.constructor)!="function"||p!==Array&&!r(p.prototype)?s(p)&&(p=p[o])===null&&(p=void 0):p=void 0),new(p===void 0?Array:p)(h===0?0:h)}},{"../internals/is-array":71,"../internals/is-object":73,"../internals/well-known-symbol":145}],26:[function(e,n,i){var s=e("../internals/an-object");n.exports=function(r,o,c,h){try{return h?o(s(c)[0],c[1]):o(c)}catch(u){var p=r.return;throw p!==void 0&&s(p.call(r)),u}}},{"../internals/an-object":10}],27:[function(e,n,i){var s=e("../internals/well-known-symbol")("iterator"),r=!1;try{var o=0,c={next:function(){return{done:!!o++}},return:function(){r=!0}};c[s]=function(){return this},Array.from(c,function(){throw 2})}catch{}n.exports=function(h,p){if(!p&&!r)return!1;var u=!1;try{var a={};a[s]=function(){return{next:function(){return{done:u=!0}}}},h(a)}catch{}return u}},{"../internals/well-known-symbol":145}],28:[function(e,n,i){var s={}.toString;n.exports=function(r){return s.call(r).slice(8,-1)}},{}],29:[function(e,n,i){var s=e("../internals/to-string-tag-support"),r=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("toStringTag"),c=r(function(){return arguments}())=="Arguments";n.exports=s?r:function(h){var p,u,a;return h===void 0?"Undefined":h===null?"Null":typeof(u=function(l,d){try{return l[d]}catch{}}(p=Object(h),o))=="string"?u:c?r(p):(a=r(p))=="Object"&&typeof p.callee=="function"?"Arguments":a}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":138,"../internals/well-known-symbol":145}],30:[function(e,n,i){var s=e("../internals/object-define-property").f,r=e("../internals/object-create"),o=e("../internals/redefine-all"),c=e("../internals/function-bind-context"),h=e("../internals/an-instance"),p=e("../internals/iterate"),u=e("../internals/define-iterator"),a=e("../internals/set-species"),l=e("../internals/descriptors"),d=e("../internals/internal-metadata").fastKey,f=e("../internals/internal-state"),m=f.set,g=f.getterFor;n.exports={getConstructor:function(_,x,w,M){function A(P,O,D){var k,N,q=I(P),X=R(P,O);return X?X.value=D:(q.last=X={index:N=d(O,!0),key:O,value:D,previous:k=q.last,next:void 0,removed:!1},q.first||(q.first=X),k&&(k.next=X),l?q.size++:P.size++,N!=="F"&&(q.index[N]=X)),P}var T=_(function(P,O){h(P,T,x),m(P,{type:x,index:r(null),first:void 0,last:void 0,size:0}),l||(P.size=0),O!=null&&p(O,P[M],P,w)}),I=g(x),R=function(P,O){var D,k=I(P),N=d(O);if(N!=="F")return k.index[N];for(D=k.first;D;D=D.next)if(D.key==O)return D};return o(T.prototype,{clear:function(){for(var P=I(this),O=P.index,D=P.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete O[D.index],D=D.next;P.first=P.last=void 0,l?P.size=0:this.size=0},delete:function(P){var O=I(this),D=R(this,P);if(D){var k=D.next,N=D.previous;delete O.index[D.index],D.removed=!0,N&&(N.next=k),k&&(k.previous=N),O.first==D&&(O.first=k),O.last==D&&(O.last=N),l?O.size--:this.size--}return!!D},forEach:function(P,O){for(var D,k=I(this),N=c(P,1<arguments.length?O:void 0,3);D=D?D.next:k.first;)for(N(D.value,D.key,this);D&&D.removed;)D=D.previous},has:function(P){return!!R(this,P)}}),o(T.prototype,w?{get:function(P){var O=R(this,P);return O&&O.value},set:function(P,O){return A(this,P===0?0:P,O)}}:{add:function(P){return A(this,P=P===0?0:P,P)}}),l&&s(T.prototype,"size",{get:function(){return I(this).size}}),T},setStrong:function(_,x,w){var M=x+" Iterator",A=g(x),T=g(M);u(_,x,function(I,R){m(this,{type:M,target:I,state:A(I),kind:R,last:void 0})},function(){for(var I=T(this),R=I.kind,P=I.last;P&&P.removed;)P=P.previous;return I.target&&(I.last=P=P?P.next:I.state.first)?R=="keys"?{value:P.key,done:!1}:R=="values"?{value:P.value,done:!1}:{value:[P.key,P.value],done:!1}:{value:I.target=void 0,done:!0}},w?"entries":"values",!w,!0),a(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":53,"../internals/internal-metadata":68,"../internals/internal-state":69,"../internals/iterate":76,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/redefine-all":106,"../internals/set-species":115}],31:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/global"),o=e("../internals/is-forced"),c=e("../internals/redefine"),h=e("../internals/internal-metadata"),p=e("../internals/iterate"),u=e("../internals/an-instance"),a=e("../internals/is-object"),l=e("../internals/fails"),d=e("../internals/check-correctness-of-iteration"),f=e("../internals/set-to-string-tag"),m=e("../internals/inherit-if-required");n.exports=function(g,_,x){function w(G){var Q=R[G];c(R,G,G=="add"?function(K){return Q.call(this,K===0?0:K),this}:G=="delete"?function(K){return!(A&&!a(K))&&Q.call(this,K===0?0:K)}:G=="get"?function(K){return A&&!a(K)?void 0:Q.call(this,K===0?0:K)}:G=="has"?function(K){return!(A&&!a(K))&&Q.call(this,K===0?0:K)}:function(K,_e){return Q.call(this,K===0?0:K,_e),this})}var M=g.indexOf("Map")!==-1,A=g.indexOf("Weak")!==-1,T=M?"set":"add",I=r[g],R=I&&I.prototype,P=I,O={};if(o(g,typeof I!="function"||!(A||R.forEach&&!l(function(){new I().entries().next()}))))P=x.getConstructor(_,g,M,T),h.REQUIRED=!0;else if(o(g,!0)){var D=new P,k=D[T](A?{}:-0,1)!=D,N=l(function(){D.has(1)}),q=d(function(G){new I(G)}),X=!A&&l(function(){for(var G=new I,Q=5;Q--;)G[T](Q,Q);return!G.has(-0)});q||(((P=_(function(G,Q){u(G,P,g);var K=m(new I,G,P);return Q!=null&&p(Q,K[T],K,M),K})).prototype=R).constructor=P),(N||X)&&(w("delete"),w("has"),M&&w("get")),(X||k)&&w(T),A&&R.clear&&delete R.clear}return O[g]=P,s({global:!0,forced:P!=I},O),f(P,g),A||x.setStrong(P,g,M),P}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":58,"../internals/inherit-if-required":66,"../internals/internal-metadata":68,"../internals/is-forced":72,"../internals/is-object":73,"../internals/iterate":76,"../internals/redefine":107,"../internals/set-to-string-tag":116}],32:[function(e,n,i){var s=e("../internals/has"),r=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),c=e("../internals/object-define-property");n.exports=function(h,p){for(var u=r(p),a=c.f,l=o.f,d=0;d<u.length;d++){var f=u[d];s(h,f)||a(h,f,l(p,f))}}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/own-keys":102}],33:[function(e,n,i){var s=e("../internals/well-known-symbol")("match");n.exports=function(r){var o=/./;try{"/./"[r](o)}catch{try{return o[s]=!1,"/./"[r](o)}catch{}}return!1}},{"../internals/well-known-symbol":145}],34:[function(e,n,i){var s=e("../internals/fails");n.exports=!s(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},{"../internals/fails":50}],35:[function(e,n,i){var s=e("../internals/require-object-coercible"),r=/"/g;n.exports=function(o,c,h,p){var u=String(s(o)),a="<"+c;return h!==""&&(a+=" "+h+'="'+String(p).replace(r,"&quot;")+'"'),a+">"+u+"</"+c+">"}},{"../internals/require-object-coercible":112}],36:[function(e,n,i){function s(){return this}var r=e("../internals/iterators-core").IteratorPrototype,o=e("../internals/object-create"),c=e("../internals/create-property-descriptor"),h=e("../internals/set-to-string-tag"),p=e("../internals/iterators");n.exports=function(u,a,l){var d=a+" Iterator";return u.prototype=o(r,{next:c(1,l)}),h(u,d,!1,!0),p[d]=s,u}},{"../internals/create-property-descriptor":38,"../internals/iterators":78,"../internals/iterators-core":77,"../internals/object-create":89,"../internals/set-to-string-tag":116}],37:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");n.exports=s?function(c,h,p){return r.f(c,h,o(1,p))}:function(c,h,p){return c[h]=p,c}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":91}],38:[function(e,n,i){n.exports=function(s,r){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:r}}},{}],39:[function(e,n,i){var s=e("../internals/to-primitive"),r=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");n.exports=function(c,h,p){var u=s(h);u in c?r.f(c,u,o(0,p)):c[u]=p}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":91,"../internals/to-primitive":137}],40:[function(e,n,i){function s(){return this}var r=e("../internals/export"),o=e("../internals/create-iterator-constructor"),c=e("../internals/object-get-prototype-of"),h=e("../internals/object-set-prototype-of"),p=e("../internals/set-to-string-tag"),u=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine"),l=e("../internals/well-known-symbol"),d=e("../internals/is-pure"),f=e("../internals/iterators"),m=e("../internals/iterators-core"),g=m.IteratorPrototype,_=m.BUGGY_SAFARI_ITERATORS,x=l("iterator"),w="values",M="entries";n.exports=function(A,T,I,R,P,O,D){o(I,T,R);function k(ce){if(ce===P&&pe)return pe;if(!_&&ce in K)return K[ce];switch(ce){case"keys":case w:case M:return function(){return new I(this,ce)}}return function(){return new I(this)}}var N,q,X,G=T+" Iterator",Q=!1,K=A.prototype,_e=K[x]||K["@@iterator"]||P&&K[P],pe=!_&&_e||k(P),ge=T=="Array"&&K.entries||_e;if(ge&&(N=c(ge.call(new A)),g!==Object.prototype&&N.next&&(d||c(N)===g||(h?h(N,g):typeof N[x]!="function"&&u(N,x,s)),p(N,G,!0,!0),d&&(f[G]=s))),P==w&&_e&&_e.name!==w&&(Q=!0,pe=function(){return _e.call(this)}),d&&!D||K[x]===pe||u(K,x,pe),f[T]=pe,P)if(q={values:k(w),keys:O?pe:k("keys"),entries:k(M)},D)for(X in q)!_&&!Q&&X in K||a(K,X,q[X]);else r({target:T,proto:!0,forced:_||Q},q);return q}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":74,"../internals/iterators":78,"../internals/iterators-core":77,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/well-known-symbol":145}],41:[function(e,n,i){var s=e("../internals/path"),r=e("../internals/has"),o=e("../internals/well-known-symbol-wrapped"),c=e("../internals/object-define-property").f;n.exports=function(h){var p=s.Symbol||(s.Symbol={});r(p,h)||c(p,h,{value:o.f(h)})}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/path":103,"../internals/well-known-symbol-wrapped":144}],42:[function(e,n,i){var s=e("../internals/fails");n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":50}],43:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/is-object"),o=s.document,c=r(o)&&r(o.createElement);n.exports=function(h){return c?o.createElement(h):{}}},{"../internals/global":58,"../internals/is-object":73}],44:[function(e,n,i){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(e,n,i){var s=e("../internals/engine-user-agent");n.exports=/(iphone|ipod|ipad).*applewebkit/i.test(s)},{"../internals/engine-user-agent":46}],46:[function(e,n,i){var s=e("../internals/get-built-in");n.exports=s("navigator","userAgent")||""},{"../internals/get-built-in":55}],47:[function(e,n,i){var s,r,o=e("../internals/global"),c=e("../internals/engine-user-agent"),h=o.process,p=h&&h.versions,u=p&&p.v8;u?r=(s=u.split("."))[0]+s[1]:c&&(!(s=c.match(/Edge\/(\d+)/))||74<=s[1])&&(s=c.match(/Chrome\/(\d+)/))&&(r=s[1]),n.exports=r&&+r},{"../internals/engine-user-agent":46,"../internals/global":58}],48:[function(e,n,i){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),c=e("../internals/redefine"),h=e("../internals/set-global"),p=e("../internals/copy-constructor-properties"),u=e("../internals/is-forced");n.exports=function(a,l){var d,f,m,g,_,x=a.target,w=a.global,M=a.stat;if(d=w?s:M?s[x]||h(x,{}):(s[x]||{}).prototype)for(f in l){if(g=l[f],m=a.noTargetGet?(_=r(d,f))&&_.value:d[f],!u(w?f:x+(M?".":"#")+f,a.forced)&&m!==void 0){if(typeof g==typeof m)continue;p(g,m)}(a.sham||m&&m.sham)&&o(g,"sham",!0),c(d,f,g,a)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/is-forced":72,"../internals/object-get-own-property-descriptor":92,"../internals/redefine":107,"../internals/set-global":114}],50:[function(e,n,i){n.exports=function(s){try{return!!s()}catch{return!0}}},{}],51:[function(e,n,i){e("../modules/es.regexp.exec");var s=e("../internals/redefine"),r=e("../internals/fails"),o=e("../internals/well-known-symbol"),c=e("../internals/regexp-exec"),h=e("../internals/create-non-enumerable-property"),p=o("species"),u=!r(function(){var m=/./;return m.exec=function(){var g=[];return g.groups={a:"7"},g},"".replace(m,"$<a>")!=="7"}),a="a".replace(/./,"$0")==="$0",l=o("replace"),d=!!/./[l]&&/./[l]("a","$0")==="",f=!r(function(){var m=/(?:)/,g=m.exec;m.exec=function(){return g.apply(this,arguments)};var _="ab".split(m);return _.length!==2||_[0]!=="a"||_[1]!=="b"});n.exports=function(m,g,_,x){var w=o(m),M=!r(function(){var O={};return O[w]=function(){return 7},""[m](O)!=7}),A=M&&!r(function(){var O=!1,D=/a/;return m==="split"&&((D={constructor:{}}).constructor[p]=function(){return D},D.flags="",D[w]=/./[w]),D.exec=function(){return O=!0,null},D[w](""),!O});if(!M||!A||m==="replace"&&(!u||!a||d)||m==="split"&&!f){var T=/./[w],I=_(w,""[m],function(O,D,k,N,q){return D.exec===c?M&&!q?{done:!0,value:T.call(D,k,N)}:{done:!0,value:O.call(k,D,N)}:{done:!1}},{REPLACE_KEEPS_$0:a,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),R=I[0],P=I[1];s(String.prototype,m,R),s(RegExp.prototype,w,g==2?function(O,D){return P.call(O,this,D)}:function(O){return P.call(O,this)})}x&&h(RegExp.prototype[w],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":107,"../internals/regexp-exec":109,"../internals/well-known-symbol":145,"../modules/es.regexp.exec":178}],52:[function(e,n,i){var s=e("../internals/fails");n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":50}],53:[function(e,n,i){var s=e("../internals/a-function");n.exports=function(r,o,c){if(s(r),o===void 0)return r;switch(c){case 0:return function(){return r.call(o)};case 1:return function(h){return r.call(o,h)};case 2:return function(h,p){return r.call(o,h,p)};case 3:return function(h,p,u){return r.call(o,h,p,u)}}return function(){return r.apply(o,arguments)}}},{"../internals/a-function":5}],54:[function(e,n,i){var s=e("../internals/a-function"),r=e("../internals/is-object"),o=[].slice,c={};n.exports=Function.bind||function(h){var p=s(this),u=o.call(arguments,1),a=function(){var l=u.concat(o.call(arguments));return this instanceof a?function(d,f,m){if(!(f in c)){for(var g=[],_=0;_<f;_++)g[_]="a["+_+"]";c[f]=Function("C,a","return new C("+g.join(",")+")")}return c[f](d,m)}(p,l.length,l):p.apply(h,l)};return r(p.prototype)&&(a.prototype=p.prototype),a}},{"../internals/a-function":5,"../internals/is-object":73}],55:[function(e,n,i){function s(c){return typeof c=="function"?c:void 0}var r=e("../internals/path"),o=e("../internals/global");n.exports=function(c,h){return arguments.length<2?s(r[c])||s(o[c]):r[c]&&r[c][h]||o[c]&&o[c][h]}},{"../internals/global":58,"../internals/path":103}],56:[function(e,n,i){var s=e("../internals/classof"),r=e("../internals/iterators"),o=e("../internals/well-known-symbol")("iterator");n.exports=function(c){if(c!=null)return c[o]||c["@@iterator"]||r[s(c)]}},{"../internals/classof":29,"../internals/iterators":78,"../internals/well-known-symbol":145}],57:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/get-iterator-method");n.exports=function(o){var c=r(o);if(typeof c!="function")throw TypeError(String(o)+" is not iterable");return s(c.call(o))}},{"../internals/an-object":10,"../internals/get-iterator-method":56}],58:[function(e,n,i){(function(s){function r(o){return o&&o.Math==Math&&o}n.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof s=="object"&&s)||Function("return this")()}).call(this,typeof ra!="undefined"?ra:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],59:[function(e,n,i){var s={}.hasOwnProperty;n.exports=function(r,o){return s.call(r,o)}},{}],60:[function(e,n,i){n.exports={}},{}],61:[function(e,n,i){var s=e("../internals/global");n.exports=function(r,o){var c=s.console;c&&c.error&&(arguments.length===1?c.error(r):c.error(r,o))}},{"../internals/global":58}],62:[function(e,n,i){var s=e("../internals/get-built-in");n.exports=s("document","documentElement")},{"../internals/get-built-in":55}],63:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/fails"),o=e("../internals/document-create-element");n.exports=!s&&!r(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],64:[function(e,n,i){var s=Math.abs,r=Math.pow,o=Math.floor,c=Math.log,h=Math.LN2;n.exports={pack:function(p,u,a){var l,d,f,m=new Array(a),g=8*a-u-1,_=(1<<g)-1,x=_>>1,w=u===23?r(2,-24)-r(2,-77):0,M=p<0||p===0&&1/p<0?1:0,A=0;for((p=s(p))!=p||p===1/0?(d=p!=p?1:0,l=_):(l=o(c(p)/h),p*(f=r(2,-l))<1&&(l--,f*=2),2<=(p+=1<=l+x?w/f:w*r(2,1-x))*f&&(l++,f/=2),_<=l+x?(d=0,l=_):1<=l+x?(d=(p*f-1)*r(2,u),l+=x):(d=p*r(2,x-1)*r(2,u),l=0));8<=u;m[A++]=255&d,d/=256,u-=8);for(l=l<<u|d,g+=u;0<g;m[A++]=255&l,l/=256,g-=8);return m[--A]|=128*M,m},unpack:function(p,u){var a,l=p.length,d=8*l-u-1,f=(1<<d)-1,m=f>>1,g=d-7,_=l-1,x=p[_--],w=127&x;for(x>>=7;0<g;w=256*w+p[_],_--,g-=8);for(a=w&(1<<-g)-1,w>>=-g,g+=u;0<g;a=256*a+p[_],_--,g-=8);if(w===0)w=1-m;else{if(w===f)return a?NaN:x?-1/0:1/0;a+=r(2,u),w-=m}return(x?-1:1)*a*r(2,w-u)}}},{}],65:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/classof-raw"),o="".split;n.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return r(c)=="String"?o.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],66:[function(e,n,i){var s=e("../internals/is-object"),r=e("../internals/object-set-prototype-of");n.exports=function(o,c,h){var p,u;return r&&typeof(p=c.constructor)=="function"&&p!==h&&s(u=p.prototype)&&u!==h.prototype&&r(o,u),o}},{"../internals/is-object":73,"../internals/object-set-prototype-of":100}],67:[function(e,n,i){var s=e("../internals/shared-store"),r=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(o){return r.call(o)}),n.exports=s.inspectSource},{"../internals/shared-store":118}],68:[function(e,n,i){function s(m){h(m,a,{value:{objectID:"O"+ ++l,weakData:{}}})}var r=e("../internals/hidden-keys"),o=e("../internals/is-object"),c=e("../internals/has"),h=e("../internals/object-define-property").f,p=e("../internals/uid"),u=e("../internals/freezing"),a=p("meta"),l=0,d=Object.isExtensible||function(){return!0},f=n.exports={REQUIRED:!1,fastKey:function(m,g){if(!o(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!c(m,a)){if(!d(m))return"F";if(!g)return"E";s(m)}return m[a].objectID},getWeakData:function(m,g){if(!c(m,a)){if(!d(m))return!0;if(!g)return!1;s(m)}return m[a].weakData},onFreeze:function(m){return u&&f.REQUIRED&&d(m)&&!c(m,a)&&s(m),m}};r[a]=!0},{"../internals/freezing":52,"../internals/has":59,"../internals/hidden-keys":60,"../internals/is-object":73,"../internals/object-define-property":91,"../internals/uid":142}],69:[function(e,n,i){var s,r,o,c=e("../internals/native-weak-map"),h=e("../internals/global"),p=e("../internals/is-object"),u=e("../internals/create-non-enumerable-property"),a=e("../internals/has"),l=e("../internals/shared-key"),d=e("../internals/hidden-keys"),f=h.WeakMap;if(c){var m=new f,g=m.get,_=m.has,x=m.set;s=function(M,A){return x.call(m,M,A),A},r=function(M){return g.call(m,M)||{}},o=function(M){return _.call(m,M)}}else{var w=l("state");d[w]=!0,s=function(M,A){return u(M,w,A),A},r=function(M){return a(M,w)?M[w]:{}},o=function(M){return a(M,w)}}n.exports={set:s,get:r,has:o,enforce:function(M){return o(M)?r(M):s(M,{})},getterFor:function(M){return function(A){var T;if(!p(A)||(T=r(A)).type!==M)throw TypeError("Incompatible receiver, "+M+" required");return T}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/has":59,"../internals/hidden-keys":60,"../internals/is-object":73,"../internals/native-weak-map":84,"../internals/shared-key":117}],70:[function(e,n,i){var s=e("../internals/well-known-symbol"),r=e("../internals/iterators"),o=s("iterator"),c=Array.prototype;n.exports=function(h){return h!==void 0&&(r.Array===h||c[o]===h)}},{"../internals/iterators":78,"../internals/well-known-symbol":145}],71:[function(e,n,i){var s=e("../internals/classof-raw");n.exports=Array.isArray||function(r){return s(r)=="Array"}},{"../internals/classof-raw":28}],72:[function(e,n,i){function s(a,l){var d=h[c(a)];return d==u||d!=p&&(typeof l=="function"?r(l):!!l)}var r=e("../internals/fails"),o=/#|\.prototype\./,c=s.normalize=function(a){return String(a).replace(o,".").toLowerCase()},h=s.data={},p=s.NATIVE="N",u=s.POLYFILL="P";n.exports=s},{"../internals/fails":50}],73:[function(e,n,i){n.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},{}],74:[function(e,n,i){n.exports=!1},{}],75:[function(e,n,i){var s=e("../internals/is-object"),r=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");n.exports=function(c){var h;return s(c)&&((h=c[o])!==void 0?!!h:r(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":73,"../internals/well-known-symbol":145}],76:[function(e,n,i){function s(a,l){this.stopped=a,this.result=l}var r=e("../internals/an-object"),o=e("../internals/is-array-iterator-method"),c=e("../internals/to-length"),h=e("../internals/function-bind-context"),p=e("../internals/get-iterator-method"),u=e("../internals/call-with-safe-iteration-closing");(n.exports=function(a,l,d,f,m){var g,_,x,w,M,A,T,I=h(l,d,f?2:1);if(m)g=a;else{if(typeof(_=p(a))!="function")throw TypeError("Target is not iterable");if(o(_)){for(x=0,w=c(a.length);x<w;x++)if((M=f?I(r(T=a[x])[0],T[1]):I(a[x]))&&M instanceof s)return M;return new s(!1)}g=_.call(a)}for(A=g.next;!(T=A.call(g)).done;)if(typeof(M=u(g,I,T.value,f))=="object"&&M&&M instanceof s)return M;return new s(!1)}).stop=function(a){return new s(!0,a)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133}],77:[function(e,n,i){var s,r,o,c=e("../internals/object-get-prototype-of"),h=e("../internals/create-non-enumerable-property"),p=e("../internals/has"),u=e("../internals/well-known-symbol"),a=e("../internals/is-pure"),l=u("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(r=c(c(o)))!==Object.prototype&&(s=r):d=!0),s==null&&(s={}),a||p(s,l)||h(s,l,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":37,"../internals/has":59,"../internals/is-pure":74,"../internals/object-get-prototype-of":96,"../internals/well-known-symbol":145}],78:[function(e,n,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],79:[function(e,n,i){n.exports=Math.sign||function(s){return(s=+s)==0||s!=s?s:s<0?-1:1}},{}],80:[function(e,n,i){var s,r,o,c,h,p,u,a,l=e("../internals/global"),d=e("../internals/object-get-own-property-descriptor").f,f=e("../internals/classof-raw"),m=e("../internals/task").set,g=e("../internals/engine-is-ios"),_=l.MutationObserver||l.WebKitMutationObserver,x=l.process,w=l.Promise,M=f(x)=="process",A=d(l,"queueMicrotask"),T=A&&A.value;T||(s=function(){var I,R;for(M&&(I=x.domain)&&I.exit();r;){R=r.fn,r=r.next;try{R()}catch(P){throw r?c():o=void 0,P}}o=void 0,I&&I.enter()},c=M?function(){x.nextTick(s)}:_&&!g?(h=!0,p=document.createTextNode(""),new _(s).observe(p,{characterData:!0}),function(){p.data=h=!h}):w&&w.resolve?(u=w.resolve(void 0),a=u.then,function(){a.call(u,s)}):function(){m.call(l,s)}),n.exports=T||function(I){var R={fn:I,next:void 0};o&&(o.next=R),r||(r=R,c()),o=R}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":58,"../internals/object-get-own-property-descriptor":92,"../internals/task":127}],81:[function(e,n,i){var s=e("../internals/global");n.exports=s.Promise},{"../internals/global":58}],82:[function(e,n,i){var s=e("../internals/fails");n.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},{"../internals/fails":50}],83:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/well-known-symbol"),o=e("../internals/is-pure"),c=r("iterator");n.exports=!s(function(){var h=new URL("b?a=1&b=2&c=3","http://a"),p=h.searchParams,u="";return h.pathname="c%20d",p.forEach(function(a,l){p.delete("b"),u+=l+a}),o&&!h.toJSON||!p.sort||h.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":50,"../internals/is-pure":74,"../internals/well-known-symbol":145}],84:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/inspect-source"),o=s.WeakMap;n.exports=typeof o=="function"&&/native code/.test(r(o))},{"../internals/global":58,"../internals/inspect-source":67}],85:[function(e,n,i){function s(o){var c,h;this.promise=new o(function(p,u){if(c!==void 0||h!==void 0)throw TypeError("Bad Promise constructor");c=p,h=u}),this.resolve=r(c),this.reject=r(h)}var r=e("../internals/a-function");n.exports.f=function(o){return new s(o)}},{"../internals/a-function":5}],86:[function(e,n,i){var s=e("../internals/is-regexp");n.exports=function(r){if(s(r))throw TypeError("The method doesn't accept regular expressions");return r}},{"../internals/is-regexp":75}],87:[function(e,n,i){var s=e("../internals/global").isFinite;n.exports=Number.isFinite||function(r){return typeof r=="number"&&s(r)}},{"../internals/global":58}],88:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/fails"),o=e("../internals/object-keys"),c=e("../internals/object-get-own-property-symbols"),h=e("../internals/object-property-is-enumerable"),p=e("../internals/to-object"),u=e("../internals/indexed-object"),a=Object.assign,l=Object.defineProperty;n.exports=!a||r(function(){if(s&&a({b:1},a(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},f={},m=Symbol(),g="abcdefghijklmnopqrst";return d[m]=7,g.split("").forEach(function(_){f[_]=_}),a({},d)[m]!=7||o(a({},f)).join("")!=g})?function(d,f){for(var m=p(d),g=arguments.length,_=1,x=c.f,w=h.f;_<g;)for(var M,A=u(arguments[_++]),T=x?o(A).concat(x(A)):o(A),I=T.length,R=0;R<I;)M=T[R++],s&&!w.call(A,M)||(m[M]=A[M]);return m}:a},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":65,"../internals/object-get-own-property-symbols":95,"../internals/object-keys":98,"../internals/object-property-is-enumerable":99,"../internals/to-object":134}],89:[function(e,n,i){function s(){}function r(x){return"<script>"+x+"</"+m+">"}var o,c=e("../internals/an-object"),h=e("../internals/object-define-properties"),p=e("../internals/enum-bug-keys"),u=e("../internals/hidden-keys"),a=e("../internals/html"),l=e("../internals/document-create-element"),d=e("../internals/shared-key"),f="prototype",m="script",g=d("IE_PROTO"),_=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch{}var x,w;_=o?function(A){A.write(r("")),A.close();var T=A.parentWindow.Object;return A=null,T}(o):((w=l("iframe")).style.display="none",a.appendChild(w),w.src=String("javascript:"),(x=w.contentWindow.document).open(),x.write(r("document.F=Object")),x.close(),x.F);for(var M=p.length;M--;)delete _[f][p[M]];return _()};u[g]=!0,n.exports=Object.create||function(x,w){var M;return x!==null?(s[f]=c(x),M=new s,s[f]=null,M[g]=x):M=_(),w===void 0?M:h(M,w)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":60,"../internals/html":62,"../internals/object-define-properties":90,"../internals/shared-key":117}],90:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-define-property"),o=e("../internals/an-object"),c=e("../internals/object-keys");n.exports=s?Object.defineProperties:function(h,p){o(h);for(var u,a=c(p),l=a.length,d=0;d<l;)r.f(h,u=a[d++],p[u]);return h}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":91,"../internals/object-keys":98}],91:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/ie8-dom-define"),o=e("../internals/an-object"),c=e("../internals/to-primitive"),h=Object.defineProperty;i.f=s?h:function(p,u,a){if(o(p),u=c(u,!0),o(a),r)try{return h(p,u,a)}catch{}if("get"in a||"set"in a)throw TypeError("Accessors not supported");return"value"in a&&(p[u]=a.value),p}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":63,"../internals/to-primitive":137}],92:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-property-is-enumerable"),o=e("../internals/create-property-descriptor"),c=e("../internals/to-indexed-object"),h=e("../internals/to-primitive"),p=e("../internals/has"),u=e("../internals/ie8-dom-define"),a=Object.getOwnPropertyDescriptor;i.f=s?a:function(l,d){if(l=c(l),d=h(d,!0),u)try{return a(l,d)}catch{}if(p(l,d))return o(!r.f.call(l,d),l[d])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":59,"../internals/ie8-dom-define":63,"../internals/object-property-is-enumerable":99,"../internals/to-indexed-object":131,"../internals/to-primitive":137}],93:[function(e,n,i){var s=e("../internals/to-indexed-object"),r=e("../internals/object-get-own-property-names").f,o={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(h){return c&&o.call(h)=="[object Window]"?function(p){try{return r(p)}catch{return c.slice()}}(h):r(s(h))}},{"../internals/object-get-own-property-names":94,"../internals/to-indexed-object":131}],94:[function(e,n,i){var s=e("../internals/object-keys-internal"),r=e("../internals/enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(o){return s(o,r)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":97}],95:[function(e,n,i){i.f=Object.getOwnPropertySymbols},{}],96:[function(e,n,i){var s=e("../internals/has"),r=e("../internals/to-object"),o=e("../internals/shared-key"),c=e("../internals/correct-prototype-getter"),h=o("IE_PROTO"),p=Object.prototype;n.exports=c?Object.getPrototypeOf:function(u){return u=r(u),s(u,h)?u[h]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?p:null}},{"../internals/correct-prototype-getter":34,"../internals/has":59,"../internals/shared-key":117,"../internals/to-object":134}],97:[function(e,n,i){var s=e("../internals/has"),r=e("../internals/to-indexed-object"),o=e("../internals/array-includes").indexOf,c=e("../internals/hidden-keys");n.exports=function(h,p){var u,a=r(h),l=0,d=[];for(u in a)!s(c,u)&&s(a,u)&&d.push(u);for(;p.length>l;)s(a,u=p[l++])&&(~o(d,u)||d.push(u));return d}},{"../internals/array-includes":18,"../internals/has":59,"../internals/hidden-keys":60,"../internals/to-indexed-object":131}],98:[function(e,n,i){var s=e("../internals/object-keys-internal"),r=e("../internals/enum-bug-keys");n.exports=Object.keys||function(o){return s(o,r)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":97}],99:[function(e,n,i){var s={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!s.call({1:2},1);i.f=o?function(c){var h=r(this,c);return!!h&&h.enumerable}:s},{}],100:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/a-possible-prototype");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,c=!1,h={};try{(o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(h,[]),c=h instanceof Array}catch{}return function(p,u){return s(p),r(u),c?o.call(p,u):p.__proto__=u,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],101:[function(e,n,i){var s=e("../internals/to-string-tag-support"),r=e("../internals/classof");n.exports=s?{}.toString:function(){return"[object "+r(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":138}],102:[function(e,n,i){var s=e("../internals/get-built-in"),r=e("../internals/object-get-own-property-names"),o=e("../internals/object-get-own-property-symbols"),c=e("../internals/an-object");n.exports=s("Reflect","ownKeys")||function(h){var p=r.f(c(h)),u=o.f;return u?p.concat(u(h)):p}},{"../internals/an-object":10,"../internals/get-built-in":55,"../internals/object-get-own-property-names":94,"../internals/object-get-own-property-symbols":95}],103:[function(e,n,i){var s=e("../internals/global");n.exports=s},{"../internals/global":58}],104:[function(e,n,i){n.exports=function(s){try{return{error:!1,value:s()}}catch(r){return{error:!0,value:r}}}},{}],105:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/is-object"),o=e("../internals/new-promise-capability");n.exports=function(c,h){if(s(c),r(h)&&h.constructor===c)return h;var p=o.f(c);return(0,p.resolve)(h),p.promise}},{"../internals/an-object":10,"../internals/is-object":73,"../internals/new-promise-capability":85}],106:[function(e,n,i){var s=e("../internals/redefine");n.exports=function(r,o,c){for(var h in o)s(r,h,o[h],c);return r}},{"../internals/redefine":107}],107:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/create-non-enumerable-property"),o=e("../internals/has"),c=e("../internals/set-global"),h=e("../internals/inspect-source"),p=e("../internals/internal-state"),u=p.get,a=p.enforce,l=String(String).split("String");(n.exports=function(d,f,m,g){var _=!!g&&!!g.unsafe,x=!!g&&!!g.enumerable,w=!!g&&!!g.noTargetGet;typeof m=="function"&&(typeof f!="string"||o(m,"name")||r(m,"name",f),a(m).source=l.join(typeof f=="string"?f:"")),d!==s?(_?!w&&d[f]&&(x=!0):delete d[f],x?d[f]=m:r(d,f,m)):x?d[f]=m:c(f,m)})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||h(this)})},{"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/has":59,"../internals/inspect-source":67,"../internals/internal-state":69,"../internals/set-global":114}],108:[function(e,n,i){var s=e("./classof-raw"),r=e("./regexp-exec");n.exports=function(o,c){var h=o.exec;if(typeof h=="function"){var p=h.call(o,c);if(typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(s(o)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return r.call(o,c)}},{"./classof-raw":28,"./regexp-exec":109}],109:[function(e,n,i){var s,r,o=e("./regexp-flags"),c=e("./regexp-sticky-helpers"),h=RegExp.prototype.exec,p=String.prototype.replace,u=h,a=(s=/a/,r=/b*/g,h.call(s,"a"),h.call(r,"a"),s.lastIndex!==0||r.lastIndex!==0),l=c.UNSUPPORTED_Y||c.BROKEN_CARET,d=/()??/.exec("")[1]!==void 0;(a||d||l)&&(u=function(f){var m,g,_,x,w=this,M=l&&w.sticky,A=o.call(w),T=w.source,I=0,R=f;return M&&((A=A.replace("y","")).indexOf("g")===-1&&(A+="g"),R=String(f).slice(w.lastIndex),0<w.lastIndex&&(!w.multiline||w.multiline&&f[w.lastIndex-1]!==`
`)&&(T="(?: "+T+")",R=" "+R,I++),g=new RegExp("^(?:"+T+")",A)),d&&(g=new RegExp("^"+T+"$(?!\\s)",A)),a&&(m=w.lastIndex),_=h.call(M?g:w,R),M?_?(_.input=_.input.slice(I),_[0]=_[0].slice(I),_.index=w.lastIndex,w.lastIndex+=_[0].length):w.lastIndex=0:a&&_&&(w.lastIndex=w.global?_.index+_[0].length:m),d&&_&&1<_.length&&p.call(_[0],g,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(_[x]=void 0)}),_}),n.exports=u},{"./regexp-flags":110,"./regexp-sticky-helpers":111}],110:[function(e,n,i){var s=e("../internals/an-object");n.exports=function(){var r=s(this),o="";return r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.sticky&&(o+="y"),o}},{"../internals/an-object":10}],111:[function(e,n,i){var s=e("./fails");function r(o,c){return RegExp(o,c)}i.UNSUPPORTED_Y=s(function(){var o=r("a","y");return o.lastIndex=2,o.exec("abcd")!=null}),i.BROKEN_CARET=s(function(){var o=r("^r","gy");return o.lastIndex=2,o.exec("str")!=null})},{"./fails":50}],112:[function(e,n,i){n.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},{}],113:[function(e,n,i){n.exports=Object.is||function(s,r){return s===r?s!==0||1/s==1/r:s!=s&&r!=r}},{}],114:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/create-non-enumerable-property");n.exports=function(o,c){try{r(s,o,c)}catch{s[o]=c}return c}},{"../internals/create-non-enumerable-property":37,"../internals/global":58}],115:[function(e,n,i){var s=e("../internals/get-built-in"),r=e("../internals/object-define-property"),o=e("../internals/well-known-symbol"),c=e("../internals/descriptors"),h=o("species");n.exports=function(p){var u=s(p),a=r.f;c&&u&&!u[h]&&a(u,h,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":55,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],116:[function(e,n,i){var s=e("../internals/object-define-property").f,r=e("../internals/has"),o=e("../internals/well-known-symbol")("toStringTag");n.exports=function(c,h,p){c&&!r(c=p?c:c.prototype,o)&&s(c,o,{configurable:!0,value:h})}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],117:[function(e,n,i){var s=e("../internals/shared"),r=e("../internals/uid"),o=s("keys");n.exports=function(c){return o[c]||(o[c]=r(c))}},{"../internals/shared":119,"../internals/uid":142}],118:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/set-global"),o="__core-js_shared__",c=s[o]||r(o,{});n.exports=c},{"../internals/global":58,"../internals/set-global":114}],119:[function(e,n,i){var s=e("../internals/is-pure"),r=e("../internals/shared-store");(n.exports=function(o,c){return r[o]||(r[o]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":74,"../internals/shared-store":118}],120:[function(e,n,i){var s=e("../internals/an-object"),r=e("../internals/a-function"),o=e("../internals/well-known-symbol")("species");n.exports=function(c,h){var p,u=s(c).constructor;return u===void 0||(p=s(u)[o])==null?h:r(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":145}],121:[function(e,n,i){var s=e("../internals/fails");n.exports=function(r){return s(function(){var o=""[r]('"');return o!==o.toLowerCase()||3<o.split('"').length})}},{"../internals/fails":50}],122:[function(e,n,i){function s(c){return function(h,p){var u,a,l=String(o(h)),d=r(p),f=l.length;return d<0||f<=d?c?"":void 0:(u=l.charCodeAt(d))<55296||56319<u||d+1===f||(a=l.charCodeAt(d+1))<56320||57343<a?c?l.charAt(d):u:c?l.slice(d,d+2):a-56320+(u-55296<<10)+65536}}var r=e("../internals/to-integer"),o=e("../internals/require-object-coercible");n.exports={codeAt:s(!1),charAt:s(!0)}},{"../internals/require-object-coercible":112,"../internals/to-integer":132}],123:[function(e,n,i){function s(d){return d+22+75*(d<26)}function r(d,f,m){var g=0;for(d=m?a(d/700):d>>1,d+=a(d/f);455<d;g+=36)d=a(d/35);return a(g+36*d/(d+38))}function o(d){var f,m,g=[],_=(d=function(q){for(var X=[],G=0,Q=q.length;G<Q;){var K=q.charCodeAt(G++);if(55296<=K&&K<=56319&&G<Q){var _e=q.charCodeAt(G++);(64512&_e)==56320?X.push(((1023&K)<<10)+(1023&_e)+65536):(X.push(K),G--)}else X.push(K)}return X}(d)).length,x=128,w=0,M=72;for(f=0;f<d.length;f++)(m=d[f])<128&&g.push(l(m));var A=g.length,T=A;for(A&&g.push("-");T<_;){var I=c;for(f=0;f<d.length;f++)x<=(m=d[f])&&m<I&&(I=m);var R=T+1;if(I-x>a((c-w)/R))throw RangeError(u);for(w+=(I-x)*R,x=I,f=0;f<d.length;f++){if((m=d[f])<x&&++w>c)throw RangeError(u);if(m==x){for(var P=w,O=36;;O+=36){var D=O<=M?1:M+26<=O?26:O-M;if(P<D)break;var k=P-D,N=36-D;g.push(l(s(D+k%N))),P=a(k/N)}g.push(l(s(P))),M=r(w,R,T==A),w=0,++T}}++w,++x}return g.join("")}var c=2147483647,h=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",a=Math.floor,l=String.fromCharCode;n.exports=function(d){var f,m,g=[],_=d.toLowerCase().replace(p,".").split(".");for(f=0;f<_.length;f++)m=_[f],g.push(h.test(m)?"xn--"+o(m):m);return g.join(".")}},{}],124:[function(e,n,i){var s=e("../internals/to-integer"),r=e("../internals/require-object-coercible");n.exports="".repeat||function(o){var c=String(r(this)),h="",p=s(o);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(c+=c))1&p&&(h+=c);return h}},{"../internals/require-object-coercible":112,"../internals/to-integer":132}],125:[function(e,n,i){var s=e("../internals/fails"),r=e("../internals/whitespaces");n.exports=function(o){return s(function(){return!!r[o]()||"\u200B\x85\u180E"[o]()!="\u200B\x85\u180E"||r[o].name!==o})}},{"../internals/fails":50,"../internals/whitespaces":146}],126:[function(e,n,i){function s(p){return function(u){var a=String(r(u));return 1&p&&(a=a.replace(c,"")),2&p&&(a=a.replace(h,"")),a}}var r=e("../internals/require-object-coercible"),o="["+e("../internals/whitespaces")+"]",c=RegExp("^"+o+o+"*"),h=RegExp(o+o+"*$");n.exports={start:s(1),end:s(2),trim:s(3)}},{"../internals/require-object-coercible":112,"../internals/whitespaces":146}],127:[function(e,n,i){function s(D){if(P.hasOwnProperty(D)){var k=P[D];delete P[D],k()}}function r(D){return function(){s(D)}}function o(D){s(D.data)}function c(D){a.postMessage(D+"",x.protocol+"//"+x.host)}var h,p,u,a=e("../internals/global"),l=e("../internals/fails"),d=e("../internals/classof-raw"),f=e("../internals/function-bind-context"),m=e("../internals/html"),g=e("../internals/document-create-element"),_=e("../internals/engine-is-ios"),x=a.location,w=a.setImmediate,M=a.clearImmediate,A=a.process,T=a.MessageChannel,I=a.Dispatch,R=0,P={},O="onreadystatechange";w&&M||(w=function(D){for(var k=[],N=1;N<arguments.length;)k.push(arguments[N++]);return P[++R]=function(){(typeof D=="function"?D:Function(D)).apply(void 0,k)},h(R),R},M=function(D){delete P[D]},d(A)=="process"?h=function(D){A.nextTick(r(D))}:I&&I.now?h=function(D){I.now(r(D))}:T&&!_?(u=(p=new T).port2,p.port1.onmessage=o,h=f(u.postMessage,u,1)):!a.addEventListener||typeof postMessage!="function"||a.importScripts||l(c)||x.protocol==="file:"?h=O in g("script")?function(D){m.appendChild(g("script"))[O]=function(){m.removeChild(this),s(D)}}:function(D){setTimeout(r(D),0)}:(h=c,a.addEventListener("message",o,!1))),n.exports={set:w,clear:M}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":53,"../internals/global":58,"../internals/html":62}],128:[function(e,n,i){var s=e("../internals/classof-raw");n.exports=function(r){if(typeof r!="number"&&s(r)!="Number")throw TypeError("Incorrect invocation");return+r}},{"../internals/classof-raw":28}],129:[function(e,n,i){var s=e("../internals/to-integer"),r=Math.max,o=Math.min;n.exports=function(c,h){var p=s(c);return p<0?r(p+h,0):o(p,h)}},{"../internals/to-integer":132}],130:[function(e,n,i){var s=e("../internals/to-integer"),r=e("../internals/to-length");n.exports=function(o){if(o===void 0)return 0;var c=s(o),h=r(c);if(c!==h)throw RangeError("Wrong length or index");return h}},{"../internals/to-integer":132,"../internals/to-length":133}],131:[function(e,n,i){var s=e("../internals/indexed-object"),r=e("../internals/require-object-coercible");n.exports=function(o){return s(r(o))}},{"../internals/indexed-object":65,"../internals/require-object-coercible":112}],132:[function(e,n,i){var s=Math.ceil,r=Math.floor;n.exports=function(o){return isNaN(o=+o)?0:(0<o?r:s)(o)}},{}],133:[function(e,n,i){var s=e("../internals/to-integer"),r=Math.min;n.exports=function(o){return 0<o?r(s(o),9007199254740991):0}},{"../internals/to-integer":132}],134:[function(e,n,i){var s=e("../internals/require-object-coercible");n.exports=function(r){return Object(s(r))}},{"../internals/require-object-coercible":112}],135:[function(e,n,i){var s=e("../internals/to-positive-integer");n.exports=function(r,o){var c=s(r);if(c%o)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":136}],136:[function(e,n,i){var s=e("../internals/to-integer");n.exports=function(r){var o=s(r);if(o<0)throw RangeError("The argument can't be less than 0");return o}},{"../internals/to-integer":132}],137:[function(e,n,i){var s=e("../internals/is-object");n.exports=function(r,o){if(!s(r))return r;var c,h;if(o&&typeof(c=r.toString)=="function"&&!s(h=c.call(r))||typeof(c=r.valueOf)=="function"&&!s(h=c.call(r))||!o&&typeof(c=r.toString)=="function"&&!s(h=c.call(r)))return h;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":73}],138:[function(e,n,i){var s={};s[e("../internals/well-known-symbol")("toStringTag")]="z",n.exports=String(s)==="[object z]"},{"../internals/well-known-symbol":145}],139:[function(e,n,i){function s(B,W){for(var ye=0,xe=W.length,Re=new(be(B))(xe);ye<xe;)Re[ye]=W[ye++];return Re}function r(B,W){ce(B,W,{get:function(){return pe(this)[W]}})}function o(B){var W;return B instanceof F||(W=R(B))=="ArrayBuffer"||W=="SharedArrayBuffer"}function c(B,W){return $(B)&&typeof W!="symbol"&&W in B&&String(+W)==String(W)}function h(B,W){return c(B,W=T(W,!0))?_(2,B[W]):de(B,W)}function p(B,W,ye){return!(c(B,W=T(W,!0))&&P(ye)&&I(ye,"value"))||I(ye,"get")||I(ye,"set")||ye.configurable||I(ye,"writable")&&!ye.writable||I(ye,"enumerable")&&!ye.enumerable?ce(B,W,ye):(B[W]=ye.value,B)}var u=e("../internals/export"),a=e("../internals/global"),l=e("../internals/descriptors"),d=e("../internals/typed-array-constructors-require-wrappers"),f=e("../internals/array-buffer-view-core"),m=e("../internals/array-buffer"),g=e("../internals/an-instance"),_=e("../internals/create-property-descriptor"),x=e("../internals/create-non-enumerable-property"),w=e("../internals/to-length"),M=e("../internals/to-index"),A=e("../internals/to-offset"),T=e("../internals/to-primitive"),I=e("../internals/has"),R=e("../internals/classof"),P=e("../internals/is-object"),O=e("../internals/object-create"),D=e("../internals/object-set-prototype-of"),k=e("../internals/object-get-own-property-names").f,N=e("../internals/typed-array-from"),q=e("../internals/array-iteration").forEach,X=e("../internals/set-species"),G=e("../internals/object-define-property"),Q=e("../internals/object-get-own-property-descriptor"),K=e("../internals/internal-state"),_e=e("../internals/inherit-if-required"),pe=K.get,ge=K.set,ce=G.f,de=Q.f,Ee=Math.round,C=a.RangeError,F=m.ArrayBuffer,V=m.DataView,ne=f.NATIVE_ARRAY_BUFFER_VIEWS,re=f.TYPED_ARRAY_TAG,se=f.TypedArray,te=f.TypedArrayPrototype,be=f.aTypedArrayConstructor,$=f.isTypedArray,me="BYTES_PER_ELEMENT",ue="Wrong length";l?(ne||(Q.f=h,G.f=p,r(te,"buffer"),r(te,"byteOffset"),r(te,"byteLength"),r(te,"length")),u({target:"Object",stat:!0,forced:!ne},{getOwnPropertyDescriptor:h,defineProperty:p}),n.exports=function(B,W,ye){function xe(ie,Fe){ce(ie,Fe,{get:function(){return Ce=Fe,(z=pe(this)).view[Pe](Ce*Re+z.byteOffset,!0);var Ce,z},set:function(Ce){return z=Fe,Z=Ce,H=pe(this),ye&&(Z=(Z=Ee(Z))<0?0:255<Z?255:255&Z),void H.view[Ke](z*Re+H.byteOffset,Z,!0);var z,Z,H},enumerable:!0})}var Re=B.match(/\d+$/)[0]/8,Ve=B+(ye?"Clamped":"")+"Array",Pe="get"+B,Ke="set"+B,$e=a[Ve],Le=$e,ae=Le&&Le.prototype,De={};ne?d&&(Le=W(function(ie,Fe,Ce,z){return g(ie,Le,Ve),_e(P(Fe)?o(Fe)?z!==void 0?new $e(Fe,A(Ce,Re),z):Ce!==void 0?new $e(Fe,A(Ce,Re)):new $e(Fe):$(Fe)?s(Le,Fe):N.call(Le,Fe):new $e(M(Fe)),ie,Le)}),D&&D(Le,se),q(k($e),function(ie){ie in Le||x(Le,ie,$e[ie])}),Le.prototype=ae):(Le=W(function(ie,Fe,Ce,z){g(ie,Le,Ve);var Z,H,J,he=0,Te=0;if(P(Fe)){if(!o(Fe))return $(Fe)?s(Le,Fe):N.call(Le,Fe);Z=Fe,Te=A(Ce,Re);var Ie=Fe.byteLength;if(z===void 0){if(Ie%Re||(H=Ie-Te)<0)throw C(ue)}else if(Ie<(H=w(z)*Re)+Te)throw C(ue);J=H/Re}else J=M(Fe),Z=new F(H=J*Re);for(ge(ie,{buffer:Z,byteOffset:Te,byteLength:H,length:J,view:new V(Z)});he<J;)xe(ie,he++)}),D&&D(Le,se),ae=Le.prototype=O(te)),ae.constructor!==Le&&x(ae,"constructor",Le),re&&x(ae,re,Ve),De[Ve]=Le,u({global:!0,forced:Le!=$e,sham:!ne},De),me in Le||x(Le,me,Re),me in ae||x(ae,me,Re),X(Ve)}):n.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/inherit-if-required":66,"../internals/internal-state":69,"../internals/is-object":73,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/object-set-prototype-of":100,"../internals/set-species":115,"../internals/to-index":130,"../internals/to-length":133,"../internals/to-offset":135,"../internals/to-primitive":137,"../internals/typed-array-constructors-require-wrappers":140,"../internals/typed-array-from":141}],140:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/fails"),o=e("../internals/check-correctness-of-iteration"),c=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,h=s.ArrayBuffer,p=s.Int8Array;n.exports=!c||!r(function(){p(1)})||!r(function(){new p(-1)})||!o(function(u){new p,new p(null),new p(1.5),new p(u)},!0)||r(function(){return new p(new h(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":58}],141:[function(e,n,i){var s=e("../internals/to-object"),r=e("../internals/to-length"),o=e("../internals/get-iterator-method"),c=e("../internals/is-array-iterator-method"),h=e("../internals/function-bind-context"),p=e("../internals/array-buffer-view-core").aTypedArrayConstructor;n.exports=function(u,a,l){var d,f,m,g,_,x,w=s(u),M=arguments.length,A=1<M?a:void 0,T=A!==void 0,I=o(w);if(I!=null&&!c(I))for(x=(_=I.call(w)).next,w=[];!(g=x.call(_)).done;)w.push(g.value);for(T&&2<M&&(A=h(A,l,2)),f=r(w.length),m=new(p(this))(f),d=0;d<f;d++)m[d]=T?A(w[d],d):w[d];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133,"../internals/to-object":134}],142:[function(e,n,i){var s=0,r=Math.random();n.exports=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++s+r).toString(36)}},{}],143:[function(e,n,i){var s=e("../internals/native-symbol");n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":82}],144:[function(e,n,i){var s=e("../internals/well-known-symbol");i.f=s},{"../internals/well-known-symbol":145}],145:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/shared"),o=e("../internals/has"),c=e("../internals/uid"),h=e("../internals/native-symbol"),p=e("../internals/use-symbol-as-uid"),u=r("wks"),a=s.Symbol,l=p?a:a&&a.withoutSetter||c;n.exports=function(d){return o(u,d)||(h&&o(a,d)?u[d]=a[d]:u[d]=l("Symbol."+d)),u[d]}},{"../internals/global":58,"../internals/has":59,"../internals/native-symbol":82,"../internals/shared":119,"../internals/uid":142,"../internals/use-symbol-as-uid":143}],146:[function(e,n,i){n.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],147:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/global"),o=e("../internals/array-buffer"),c=e("../internals/set-species"),h="ArrayBuffer",p=o[h];s({global:!0,forced:r[h]!==p},{ArrayBuffer:p}),c(h)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":58,"../internals/set-species":115}],148:[function(e,n,i){function s(A){if(!h(A))return!1;var T=A[g];return T!==void 0?!!T:c(A)}var r=e("../internals/export"),o=e("../internals/fails"),c=e("../internals/is-array"),h=e("../internals/is-object"),p=e("../internals/to-object"),u=e("../internals/to-length"),a=e("../internals/create-property"),l=e("../internals/array-species-create"),d=e("../internals/array-method-has-species-support"),f=e("../internals/well-known-symbol"),m=e("../internals/engine-v8-version"),g=f("isConcatSpreadable"),_=9007199254740991,x="Maximum allowed index exceeded",w=51<=m||!o(function(){var A=[];return A[g]=!1,A.concat()[0]!==A}),M=d("concat");r({target:"Array",proto:!0,forced:!w||!M},{concat:function(A){var T,I,R,P,O,D=p(this),k=l(D,0),N=0;for(T=-1,R=arguments.length;T<R;T++)if(s(O=T===-1?D:arguments[T])){if(P=u(O.length),_<N+P)throw TypeError(x);for(I=0;I<P;I++,N++)I in O&&a(k,N,O[I])}else{if(_<=N)throw TypeError(x);a(k,N++,O)}return k.length=N,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":71,"../internals/is-object":73,"../internals/to-length":133,"../internals/to-object":134,"../internals/well-known-symbol":145}],149:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").every,o=e("../internals/array-method-is-strict"),c=e("../internals/array-method-uses-to-length"),h=o("every"),p=c("every");s({target:"Array",proto:!0,forced:!h||!p},{every:function(u,a){return r(this,u,1<arguments.length?a:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],150:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-fill"),o=e("../internals/add-to-unscopables");s({target:"Array",proto:!0},{fill:r}),o("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],151:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").filter,o=e("../internals/array-method-has-species-support"),c=e("../internals/array-method-uses-to-length"),h=o("filter"),p=c("filter");s({target:"Array",proto:!0,forced:!h||!p},{filter:function(u,a){return r(this,u,1<arguments.length?a:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],152:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-for-each");s({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},{"../internals/array-for-each":16,"../internals/export":49}],153:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-from");s({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(o){Array.from(o)})},{from:r})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],154:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-includes").includes,o=e("../internals/add-to-unscopables");s({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c,h){return r(this,c,1<arguments.length?h:void 0)}}),o("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],155:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-includes").indexOf,o=e("../internals/array-method-is-strict"),c=e("../internals/array-method-uses-to-length"),h=[].indexOf,p=!!h&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),a=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:p||!u||!a},{indexOf:function(l,d){return p?h.apply(this,arguments)||0:r(this,l,1<arguments.length?d:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],156:[function(e,n,i){var s=e("../internals/to-indexed-object"),r=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),c=e("../internals/internal-state"),h=e("../internals/define-iterator"),p="Array Iterator",u=c.set,a=c.getterFor(p);n.exports=h(Array,"Array",function(l,d){u(this,{type:p,target:s(l),index:0,kind:d})},function(){var l=a(this),d=l.target,f=l.kind,m=l.index++;return!d||m>=d.length?{value:l.target=void 0,done:!0}:f=="keys"?{value:m,done:!1}:f=="values"?{value:d[m],done:!1}:{value:[m,d[m]],done:!1}},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":69,"../internals/iterators":78,"../internals/to-indexed-object":131}],157:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/indexed-object"),o=e("../internals/to-indexed-object"),c=e("../internals/array-method-is-strict"),h=[].join,p=r!=Object,u=c("join",",");s({target:"Array",proto:!0,forced:p||!u},{join:function(a){return h.call(o(this),a===void 0?",":a)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":65,"../internals/to-indexed-object":131}],158:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-last-index-of");s({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},{"../internals/array-last-index-of":20,"../internals/export":49}],159:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").map,o=e("../internals/array-method-has-species-support"),c=e("../internals/array-method-uses-to-length"),h=o("map"),p=c("map");s({target:"Array",proto:!0,forced:!h||!p},{map:function(u,a){return r(this,u,1<arguments.length?a:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],160:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/is-object"),o=e("../internals/is-array"),c=e("../internals/to-absolute-index"),h=e("../internals/to-length"),p=e("../internals/to-indexed-object"),u=e("../internals/create-property"),a=e("../internals/well-known-symbol"),l=e("../internals/array-method-has-species-support"),d=e("../internals/array-method-uses-to-length"),f=l("slice"),m=d("slice",{ACCESSORS:!0,0:0,1:2}),g=a("species"),_=[].slice,x=Math.max;s({target:"Array",proto:!0,forced:!f||!m},{slice:function(w,M){var A,T,I,R=p(this),P=h(R.length),O=c(w,P),D=c(M===void 0?P:M,P);if(o(R)&&(typeof(A=R.constructor)!="function"||A!==Array&&!o(A.prototype)?r(A)&&(A=A[g])===null&&(A=void 0):A=void 0,A===Array||A===void 0))return _.call(R,O,D);for(T=new(A===void 0?Array:A)(x(D-O,0)),I=0;O<D;O++,I++)O in R&&u(T,I,R[O]);return T.length=I,T}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":71,"../internals/is-object":73,"../internals/to-absolute-index":129,"../internals/to-indexed-object":131,"../internals/to-length":133,"../internals/well-known-symbol":145}],161:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/array-iteration").some,o=e("../internals/array-method-is-strict"),c=e("../internals/array-method-uses-to-length"),h=o("some"),p=c("some");s({target:"Array",proto:!0,forced:!h||!p},{some:function(u,a){return r(this,u,1<arguments.length?a:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/to-absolute-index"),o=e("../internals/to-integer"),c=e("../internals/to-length"),h=e("../internals/to-object"),p=e("../internals/array-species-create"),u=e("../internals/create-property"),a=e("../internals/array-method-has-species-support"),l=e("../internals/array-method-uses-to-length"),d=a("splice"),f=l("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min;s({target:"Array",proto:!0,forced:!d||!f},{splice:function(_,x){var w,M,A,T,I,R,P=h(this),O=c(P.length),D=r(_,O),k=arguments.length;if(k===0?w=M=0:M=k===1?(w=0,O-D):(w=k-2,g(m(o(x),0),O-D)),9007199254740991<O+w-M)throw TypeError("Maximum allowed length exceeded");for(A=p(P,M),T=0;T<M;T++)(I=D+T)in P&&u(A,T,P[I]);if(w<(A.length=M)){for(T=D;T<O-M;T++)R=T+w,(I=T+M)in P?P[R]=P[I]:delete P[R];for(T=O;O-M+w<T;T--)delete P[T-1]}else if(M<w)for(T=O-M;D<T;T--)R=T+w-1,(I=T+M-1)in P?P[R]=P[I]:delete P[R];for(T=0;T<w;T++)P[T+D]=arguments[T+2];return P.length=O-M+w,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":129,"../internals/to-integer":132,"../internals/to-length":133,"../internals/to-object":134}],163:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/object-define-property").f,o=Function.prototype,c=o.toString,h=/^\s*function ([^ (]*)/;!s||"name"in o||r(o,"name",{configurable:!0,get:function(){try{return c.call(this).match(h)[1]}catch{return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":91}],164:[function(e,n,i){var s=e("../internals/collection"),r=e("../internals/collection-strong");n.exports=s("Map",function(o){return function(c){return o(this,arguments.length?c:void 0)}},r)},{"../internals/collection":31,"../internals/collection-strong":30}],165:[function(e,n,i){var s=e("../internals/export"),r=Math.hypot,o=Math.abs,c=Math.sqrt;s({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(h,p){for(var u,a,l=0,d=0,f=arguments.length,m=0;d<f;)m<(u=o(arguments[d++]))?(l=l*(a=m/u)*a+1,m=u):l+=0<u?(a=u/m)*a:u;return m===1/0?1/0:m*c(l)}})},{"../internals/export":49}],166:[function(e,n,i){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":79}],167:[function(e,n,i){function s(D){var k,N,q,X,G,Q,K,_e,pe=l(D,!1);if(typeof pe=="string"&&2<pe.length){if((k=(pe=x(pe)).charCodeAt(0))===43||k===45){if((N=pe.charCodeAt(2))===88||N===120)return NaN}else if(k===48){switch(pe.charCodeAt(1)){case 66:case 98:q=2,X=49;break;case 79:case 111:q=8,X=55;break;default:return+pe}for(Q=(G=pe.slice(2)).length,K=0;K<Q;K++)if((_e=G.charCodeAt(K))<48||X<_e)return NaN;return parseInt(G,q)}}return+pe}var r=e("../internals/descriptors"),o=e("../internals/global"),c=e("../internals/is-forced"),h=e("../internals/redefine"),p=e("../internals/has"),u=e("../internals/classof-raw"),a=e("../internals/inherit-if-required"),l=e("../internals/to-primitive"),d=e("../internals/fails"),f=e("../internals/object-create"),m=e("../internals/object-get-own-property-names").f,g=e("../internals/object-get-own-property-descriptor").f,_=e("../internals/object-define-property").f,x=e("../internals/string-trim").trim,w="Number",M=o[w],A=M.prototype,T=u(f(A))==w;if(c(w,!M(" 0o1")||!M("0b1")||M("+0x1"))){for(var I,R=function(D){var k=arguments.length<1?0:D,N=this;return N instanceof R&&(T?d(function(){A.valueOf.call(N)}):u(N)!=w)?a(new M(s(k)),N,R):s(k)},P=r?m(M):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;P.length>O;O++)p(M,I=P[O])&&!p(R,I)&&_(R,I,g(M,I));(R.prototype=A).constructor=R,h(o,w,R)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/has":59,"../internals/inherit-if-required":66,"../internals/is-forced":72,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/redefine":107,"../internals/string-trim":126,"../internals/to-primitive":137}],168:[function(e,n,i){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":87}],169:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/to-integer"),o=e("../internals/this-number-value"),c=e("../internals/string-repeat"),h=e("../internals/fails"),p=1 .toFixed,u=Math.floor,a=function(l,d,f){return d===0?f:d%2==1?a(l,d-1,f*l):a(l*l,d/2,f)};s({target:"Number",proto:!0,forced:p&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!h(function(){p.call({})})},{toFixed:function(l){function d(P,O){for(var D=-1,k=O;++D<6;)k+=P*T[D],T[D]=k%1e7,k=u(k/1e7)}function f(P){for(var O=6,D=0;0<=--O;)D+=T[O],T[O]=u(D/P),D=D%P*1e7}function m(){for(var P=6,O="";0<=--P;)if(O!==""||P===0||T[P]!==0){var D=String(T[P]);O=O===""?D:O+c.call("0",7-D.length)+D}return O}var g,_,x,w,M=o(this),A=r(l),T=[0,0,0,0,0,0],I="",R="0";if(A<0||20<A)throw RangeError("Incorrect fraction digits");if(M!=M)return"NaN";if(M<=-1e21||1e21<=M)return String(M);if(M<0&&(I="-",M=-M),1e-21<M)if(_=(g=function(P){for(var O=0,D=P;4096<=D;)O+=12,D/=4096;for(;2<=D;)O+=1,D/=2;return O}(M*a(2,69,1))-69)<0?M*a(2,-g,1):M/a(2,g,1),_*=4503599627370496,0<(g=52-g)){for(d(0,_),x=A;7<=x;)d(1e7,0),x-=7;for(d(a(10,x,1),0),x=g-1;23<=x;)f(1<<23),x-=23;f(1<<x),d(1,1),f(2),R=m()}else d(0,_),d(1<<-g,0),R=m()+c.call("0",A);return R=0<A?I+((w=R.length)<=A?"0."+c.call("0",A-w)+R:R.slice(0,w-A)+"."+R.slice(w-A)):I+R}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":124,"../internals/this-number-value":128,"../internals/to-integer":132}],170:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/object-assign");s({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},{"../internals/export":49,"../internals/object-assign":88}],171:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/fails"),o=e("../internals/object-get-own-property-names-external").f;s({target:"Object",stat:!0,forced:r(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:o})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":93}],172:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/fails"),o=e("../internals/to-object"),c=e("../internals/object-get-prototype-of"),h=e("../internals/correct-prototype-getter");s({target:"Object",stat:!0,forced:r(function(){c(1)}),sham:!h},{getPrototypeOf:function(p){return c(o(p))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":96,"../internals/to-object":134}],173:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/to-object"),o=e("../internals/object-keys");s({target:"Object",stat:!0,forced:e("../internals/fails")(function(){o(1)})},{keys:function(c){return o(r(c))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":98,"../internals/to-object":134}],174:[function(e,n,i){var s=e("../internals/to-string-tag-support"),r=e("../internals/redefine"),o=e("../internals/object-to-string");s||r(Object.prototype,"toString",o,{unsafe:!0})},{"../internals/object-to-string":101,"../internals/redefine":107,"../internals/to-string-tag-support":138}],175:[function(e,n,i){function s(Le){var ae;return!(!T(Le)||typeof(ae=Le.then)!="function")&&ae}function r(Le,ae,De){if(!ae.notified){ae.notified=!0;var ie=ae.reactions;X(function(){for(var Fe=ae.value,Ce=ae.state==1,z=0;ie.length>z;){var Z,H,J,he=ie[z++],Te=Ce?he.ok:he.fail,Ie=he.resolve,Xe=he.reject,Se=he.domain;try{Te?(Ce||(ae.rejection===2&&Ke(Le,ae),ae.rejection=1),Te===!0?Z=Fe:(Se&&Se.enter(),Z=Te(Fe),Se&&(Se.exit(),J=!0)),Z===he.promise?Xe(se("Promise-chain cycle")):(H=s(Z))?H.call(Z,Ie,Xe):Ie(Z)):Xe(Fe)}catch(Qe){Se&&!J&&Se.exit(),Xe(Qe)}}ae.reactions=[],ae.notified=!1,De&&!ae.rejection&&Ve(Le,ae)})}}function o(Le,ae,De){var ie,Fe;W?((ie=te.createEvent("Event")).promise=ae,ie.reason=De,ie.initEvent(Le,!1,!0),m.dispatchEvent(ie)):ie={promise:ae,reason:De},(Fe=m["on"+Le])?Fe(ie):Le===ye&&Q("Unhandled promise rejection",De)}function c(Le,ae,De,ie){return function(Fe){Le(ae,De,Fe,ie)}}function h(Le,ae,De,ie){ae.done||(ae.done=!0,ie&&(ae=ie),ae.value=De,ae.state=2,r(Le,ae,!0))}var p,u,a,l,d=e("../internals/export"),f=e("../internals/is-pure"),m=e("../internals/global"),g=e("../internals/get-built-in"),_=e("../internals/native-promise-constructor"),x=e("../internals/redefine"),w=e("../internals/redefine-all"),M=e("../internals/set-to-string-tag"),A=e("../internals/set-species"),T=e("../internals/is-object"),I=e("../internals/a-function"),R=e("../internals/an-instance"),P=e("../internals/classof-raw"),O=e("../internals/inspect-source"),D=e("../internals/iterate"),k=e("../internals/check-correctness-of-iteration"),N=e("../internals/species-constructor"),q=e("../internals/task").set,X=e("../internals/microtask"),G=e("../internals/promise-resolve"),Q=e("../internals/host-report-errors"),K=e("../internals/new-promise-capability"),_e=e("../internals/perform"),pe=e("../internals/internal-state"),ge=e("../internals/is-forced"),ce=e("../internals/well-known-symbol"),de=e("../internals/engine-v8-version"),Ee=ce("species"),C="Promise",F=pe.get,V=pe.set,ne=pe.getterFor(C),re=_,se=m.TypeError,te=m.document,be=m.process,$=g("fetch"),me=K.f,ue=me,B=P(be)=="process",W=!!(te&&te.createEvent&&m.dispatchEvent),ye="unhandledrejection",xe=ge(C,function(){if(O(re)===String(re)&&(de===66||!B&&typeof PromiseRejectionEvent!="function")||f&&!re.prototype.finally)return!0;if(51<=de&&/native code/.test(re))return!1;function Le(De){De(function(){},function(){})}var ae=re.resolve(1);return(ae.constructor={})[Ee]=Le,!(ae.then(function(){})instanceof Le)}),Re=xe||!k(function(Le){re.all(Le).catch(function(){})}),Ve=function(Le,ae){q.call(m,function(){var De,ie=ae.value;if(Pe(ae)&&(De=_e(function(){B?be.emit("unhandledRejection",ie,Le):o(ye,Le,ie)}),ae.rejection=B||Pe(ae)?2:1,De.error))throw De.value})},Pe=function(Le){return Le.rejection!==1&&!Le.parent},Ke=function(Le,ae){q.call(m,function(){B?be.emit("rejectionHandled",Le):o("rejectionhandled",Le,ae.value)})},$e=function(Le,ae,De,ie){if(!ae.done){ae.done=!0,ie&&(ae=ie);try{if(Le===De)throw se("Promise can't be resolved itself");var Fe=s(De);Fe?X(function(){var Ce={done:!1};try{Fe.call(De,c($e,Le,Ce,ae),c(h,Le,Ce,ae))}catch(z){h(Le,Ce,z,ae)}}):(ae.value=De,ae.state=1,r(Le,ae,!1))}catch(Ce){h(Le,{done:!1},Ce,ae)}}};xe&&(re=function(Le){R(this,re,C),I(Le),p.call(this);var ae=F(this);try{Le(c($e,this,ae),c(h,this,ae))}catch(De){h(this,ae,De)}},(p=function(){V(this,{type:C,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=w(re.prototype,{then:function(Le,ae){var De=ne(this),ie=me(N(this,re));return ie.ok=typeof Le!="function"||Le,ie.fail=typeof ae=="function"&&ae,ie.domain=B?be.domain:void 0,De.parent=!0,De.reactions.push(ie),De.state!=0&&r(this,De,!1),ie.promise},catch:function(Le){return this.then(void 0,Le)}}),u=function(){var Le=new p,ae=F(Le);this.promise=Le,this.resolve=c($e,Le,ae),this.reject=c(h,Le,ae)},K.f=me=function(Le){return Le===re||Le===a?new u(Le):ue(Le)},f||typeof _!="function"||(l=_.prototype.then,x(_.prototype,"then",function(Le,ae){var De=this;return new re(function(ie,Fe){l.call(De,ie,Fe)}).then(Le,ae)},{unsafe:!0}),typeof $=="function"&&d({global:!0,enumerable:!0,forced:!0},{fetch:function(Le){return G(re,$.apply(m,arguments))}}))),d({global:!0,wrap:!0,forced:xe},{Promise:re}),M(re,C,!1,!0),A(C),a=g(C),d({target:C,stat:!0,forced:xe},{reject:function(Le){var ae=me(this);return ae.reject.call(void 0,Le),ae.promise}}),d({target:C,stat:!0,forced:f||xe},{resolve:function(Le){return G(f&&this===a?re:this,Le)}}),d({target:C,stat:!0,forced:Re},{all:function(Le){var ae=this,De=me(ae),ie=De.resolve,Fe=De.reject,Ce=_e(function(){var z=I(ae.resolve),Z=[],H=0,J=1;D(Le,function(he){var Te=H++,Ie=!1;Z.push(void 0),J++,z.call(ae,he).then(function(Xe){Ie||(Ie=!0,Z[Te]=Xe,--J||ie(Z))},Fe)}),--J||ie(Z)});return Ce.error&&Fe(Ce.value),De.promise},race:function(Le){var ae=this,De=me(ae),ie=De.reject,Fe=_e(function(){var Ce=I(ae.resolve);D(Le,function(z){Ce.call(ae,z).then(De.resolve,ie)})});return Fe.error&&ie(Fe.value),De.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":55,"../internals/global":58,"../internals/host-report-errors":61,"../internals/inspect-source":67,"../internals/internal-state":69,"../internals/is-forced":72,"../internals/is-object":73,"../internals/is-pure":74,"../internals/iterate":76,"../internals/microtask":80,"../internals/native-promise-constructor":81,"../internals/new-promise-capability":85,"../internals/perform":104,"../internals/promise-resolve":105,"../internals/redefine":107,"../internals/redefine-all":106,"../internals/set-species":115,"../internals/set-to-string-tag":116,"../internals/species-constructor":120,"../internals/task":127,"../internals/well-known-symbol":145}],176:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/get-built-in"),o=e("../internals/a-function"),c=e("../internals/an-object"),h=e("../internals/is-object"),p=e("../internals/object-create"),u=e("../internals/function-bind"),a=e("../internals/fails"),l=r("Reflect","construct"),d=a(function(){function g(){}return!(l(function(){},[],g)instanceof g)}),f=!a(function(){l(function(){})}),m=d||f;s({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(g,_,x){o(g),c(_);var w=arguments.length<3?g:o(x);if(f&&!d)return l(g,_,w);if(g==w){switch(_.length){case 0:return new g;case 1:return new g(_[0]);case 2:return new g(_[0],_[1]);case 3:return new g(_[0],_[1],_[2]);case 4:return new g(_[0],_[1],_[2],_[3])}var M=[null];return M.push.apply(M,_),new(u.apply(g,M))}var A=w.prototype,T=p(h(A)?A:Object.prototype),I=Function.apply.call(g,T,_);return h(I)?I:T}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":54,"../internals/get-built-in":55,"../internals/is-object":73,"../internals/object-create":89}],177:[function(e,n,i){var s=e("../internals/descriptors"),r=e("../internals/global"),o=e("../internals/is-forced"),c=e("../internals/inherit-if-required"),h=e("../internals/object-define-property").f,p=e("../internals/object-get-own-property-names").f,u=e("../internals/is-regexp"),a=e("../internals/regexp-flags"),l=e("../internals/regexp-sticky-helpers"),d=e("../internals/redefine"),f=e("../internals/fails"),m=e("../internals/internal-state").set,g=e("../internals/set-species"),_=e("../internals/well-known-symbol")("match"),x=r.RegExp,w=x.prototype,M=/a/g,A=/a/g,T=new x(M)!==M,I=l.UNSUPPORTED_Y;if(s&&o("RegExp",!T||I||f(function(){return A[_]=!1,x(M)!=M||x(A)==A||x(M,"i")!="/a/i"}))){let D=function(k){k in R||h(R,k,{configurable:!0,get:function(){return x[k]},set:function(N){x[k]=N}})};for(var R=function(k,N){var q,X=this instanceof R,G=u(k),Q=N===void 0;if(!X&&G&&k.constructor===R&&Q)return k;T?G&&!Q&&(k=k.source):k instanceof R&&(Q&&(N=a.call(k)),k=k.source),I&&(q=!!N&&-1<N.indexOf("y"))&&(N=N.replace(/y/g,""));var K=c(T?new x(k,N):x(k,N),X?this:w,R);return I&&q&&m(K,{sticky:q}),K},P=p(x),O=0;P.length>O;)D(P[O++]);(w.constructor=R).prototype=w,d(r,"RegExp",R)}g("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/inherit-if-required":66,"../internals/internal-state":69,"../internals/is-forced":72,"../internals/is-regexp":75,"../internals/object-define-property":91,"../internals/object-get-own-property-names":94,"../internals/redefine":107,"../internals/regexp-flags":110,"../internals/regexp-sticky-helpers":111,"../internals/set-species":115,"../internals/well-known-symbol":145}],178:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/regexp-exec");s({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},{"../internals/export":49,"../internals/regexp-exec":109}],179:[function(e,n,i){var s=e("../internals/redefine"),r=e("../internals/an-object"),o=e("../internals/fails"),c=e("../internals/regexp-flags"),h="toString",p=RegExp.prototype,u=p[h],a=o(function(){return u.call({source:"a",flags:"b"})!="/a/b"}),l=u.name!=h;(a||l)&&s(RegExp.prototype,h,function(){var d=r(this),f=String(d.source),m=d.flags;return"/"+f+"/"+String(m===void 0&&d instanceof RegExp&&!("flags"in p)?c.call(d):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":107,"../internals/regexp-flags":110}],180:[function(e,n,i){var s=e("../internals/collection"),r=e("../internals/collection-strong");n.exports=s("Set",function(o){return function(c){return o(this,arguments.length?c:void 0)}},r)},{"../internals/collection":31,"../internals/collection-strong":30}],181:[function(e,n,i){var s,r=e("../internals/export"),o=e("../internals/object-get-own-property-descriptor").f,c=e("../internals/to-length"),h=e("../internals/not-a-regexp"),p=e("../internals/require-object-coercible"),u=e("../internals/correct-is-regexp-logic"),a=e("../internals/is-pure"),l="".endsWith,d=Math.min,f=u("endsWith");r({target:"String",proto:!0,forced:!!(a||f||!(s=o(String.prototype,"endsWith"))||s.writable)&&!f},{endsWith:function(m,g){var _=String(p(this));h(m);var x=1<arguments.length?g:void 0,w=c(_.length),M=x===void 0?w:d(c(x),w),A=String(m);return l?l.call(_,A,M):_.slice(M-A.length,M)===A}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":74,"../internals/not-a-regexp":86,"../internals/object-get-own-property-descriptor":92,"../internals/require-object-coercible":112,"../internals/to-length":133}],182:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/not-a-regexp"),o=e("../internals/require-object-coercible");s({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(c,h){return!!~String(o(this)).indexOf(r(c),1<arguments.length?h:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":86,"../internals/require-object-coercible":112}],183:[function(e,n,i){var s=e("../internals/string-multibyte").charAt,r=e("../internals/internal-state"),o=e("../internals/define-iterator"),c="String Iterator",h=r.set,p=r.getterFor(c);o(String,"String",function(u){h(this,{type:c,string:String(u),index:0})},function(){var u,a=p(this),l=a.string,d=a.index;return d>=l.length?{value:void 0,done:!0}:(u=s(l,d),a.index+=u.length,{value:u,done:!1})})},{"../internals/define-iterator":40,"../internals/internal-state":69,"../internals/string-multibyte":122}],184:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/an-object"),o=e("../internals/to-length"),c=e("../internals/require-object-coercible"),h=e("../internals/advance-string-index"),p=e("../internals/regexp-exec-abstract");s("match",1,function(u,a,l){return[function(d){var f=c(this),m=d==null?void 0:d[u];return m!==void 0?m.call(d,f):new RegExp(d)[u](String(f))},function(d){var f=l(a,d,this);if(f.done)return f.value;var m=r(d),g=String(this);if(!m.global)return p(m,g);for(var _,x=m.unicode,w=[],M=m.lastIndex=0;(_=p(m,g))!==null;){var A=String(_[0]);(w[M]=A)===""&&(m.lastIndex=h(g,o(m.lastIndex),x)),M++}return M===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/to-length":133}],185:[function(e,n,i){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":124}],186:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/an-object"),o=e("../internals/to-object"),c=e("../internals/to-length"),h=e("../internals/to-integer"),p=e("../internals/require-object-coercible"),u=e("../internals/advance-string-index"),a=e("../internals/regexp-exec-abstract"),l=Math.max,d=Math.min,f=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;s("replace",2,function(_,x,w,M){var A=M.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=M.REPLACE_KEEPS_$0,I=A?"$":"$0";return[function(P,O){var D=p(this),k=P==null?void 0:P[_];return k!==void 0?k.call(P,D,O):x.call(String(D),P,O)},function(P,O){if(!A&&T||typeof O=="string"&&O.indexOf(I)===-1){var D=w(x,P,this,O);if(D.done)return D.value}var k=r(P),N=String(this),q=typeof O=="function";q||(O=String(O));var X=k.global;if(X){var G=k.unicode;k.lastIndex=0}for(var Q=[];;){var K=a(k,N);if(K===null||(Q.push(K),!X))break;String(K[0])===""&&(k.lastIndex=u(N,c(k.lastIndex),G))}for(var _e,pe="",ge=0,ce=0;ce<Q.length;ce++){K=Q[ce];for(var de=String(K[0]),Ee=l(d(h(K.index),N.length),0),C=[],F=1;F<K.length;F++)C.push((_e=K[F])===void 0?_e:String(_e));var V=K.groups;if(q){var ne=[de].concat(C,Ee,N);V!==void 0&&ne.push(V);var re=String(O.apply(void 0,ne))}else re=R(de,N,Ee,C,V,O);ge<=Ee&&(pe+=N.slice(ge,Ee)+re,ge=Ee+de.length)}return pe+N.slice(ge)}];function R(P,O,D,k,N,q){var X=D+P.length,G=k.length,Q=g;return N!==void 0&&(N=o(N),Q=m),x.call(q,Q,function(K,_e){var pe;switch(_e.charAt(0)){case"$":return"$";case"&":return P;case"`":return O.slice(0,D);case"'":return O.slice(X);case"<":pe=N[_e.slice(1,-1)];break;default:var ge=+_e;if(ge==0)return K;if(G<ge){var ce=f(ge/10);return ce===0?K:ce<=G?k[ce-1]===void 0?_e.charAt(1):k[ce-1]+_e.charAt(1):K}pe=k[ge-1]}return pe===void 0?"":pe})}})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/to-integer":132,"../internals/to-length":133,"../internals/to-object":134}],187:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/an-object"),o=e("../internals/require-object-coercible"),c=e("../internals/same-value"),h=e("../internals/regexp-exec-abstract");s("search",1,function(p,u,a){return[function(l){var d=o(this),f=l==null?void 0:l[p];return f!==void 0?f.call(l,d):new RegExp(l)[p](String(d))},function(l){var d=a(u,l,this);if(d.done)return d.value;var f=r(l),m=String(this),g=f.lastIndex;c(g,0)||(f.lastIndex=0);var _=h(f,m);return c(f.lastIndex,g)||(f.lastIndex=g),_===null?-1:_.index}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/same-value":113}],188:[function(e,n,i){var s=e("../internals/fix-regexp-well-known-symbol-logic"),r=e("../internals/is-regexp"),o=e("../internals/an-object"),c=e("../internals/require-object-coercible"),h=e("../internals/species-constructor"),p=e("../internals/advance-string-index"),u=e("../internals/to-length"),a=e("../internals/regexp-exec-abstract"),l=e("../internals/regexp-exec"),d=e("../internals/fails"),f=[].push,m=Math.min,g=4294967295,_=!d(function(){return!RegExp(g,"y")});s("split",2,function(x,w,M){var A;return A="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,I){var R=String(c(this)),P=I===void 0?g:I>>>0;if(P==0)return[];if(T===void 0)return[R];if(!r(T))return w.call(R,T,P);for(var O,D,k,N=[],q=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),X=0,G=new RegExp(T.source,q+"g");(O=l.call(G,R))&&!(X<(D=G.lastIndex)&&(N.push(R.slice(X,O.index)),1<O.length&&O.index<R.length&&f.apply(N,O.slice(1)),k=O[0].length,X=D,N.length>=P));)G.lastIndex===O.index&&G.lastIndex++;return X===R.length?!k&&G.test("")||N.push(""):N.push(R.slice(X)),N.length>P?N.slice(0,P):N}:"0".split(void 0,0).length?function(T,I){return T===void 0&&I===0?[]:w.call(this,T,I)}:w,[function(T,I){var R=c(this),P=T==null?void 0:T[x];return P!==void 0?P.call(T,R,I):A.call(String(R),T,I)},function(T,I){var R=M(A,T,this,I,A!==w);if(R.done)return R.value;var P=o(T),O=String(this),D=h(P,RegExp),k=P.unicode,N=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(_?"y":"g"),q=new D(_?P:"^(?:"+P.source+")",N),X=I===void 0?g:I>>>0;if(X==0)return[];if(O.length===0)return a(q,O)===null?[O]:[];for(var G=0,Q=0,K=[];Q<O.length;){q.lastIndex=_?Q:0;var _e,pe=a(q,_?O:O.slice(Q));if(pe===null||(_e=m(u(q.lastIndex+(_?0:Q)),O.length))===G)Q=p(O,Q,k);else{if(K.push(O.slice(G,Q)),K.length===X)return K;for(var ge=1;ge<=pe.length-1;ge++)if(K.push(pe[ge]),K.length===X)return K;Q=G=_e}}return K.push(O.slice(G)),K}]},!_)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":75,"../internals/regexp-exec":109,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/species-constructor":120,"../internals/to-length":133}],189:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/create-html");s({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return r(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":121}],190:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/string-trim").trim;s({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return r(this)}})},{"../internals/export":49,"../internals/string-trim":126,"../internals/string-trim-forced":125}],191:[function(e,n,i){var s=e("../internals/export"),r=e("../internals/descriptors"),o=e("../internals/global"),c=e("../internals/has"),h=e("../internals/is-object"),p=e("../internals/object-define-property").f,u=e("../internals/copy-constructor-properties"),a=o.Symbol;if(r&&typeof a=="function"&&(!("description"in a.prototype)||a().description!==void 0)){var l={},d=function(x){var w=arguments.length<1||x===void 0?void 0:String(x),M=this instanceof d?new a(w):w===void 0?a():a(w);return w===""&&(l[M]=!0),M};u(d,a);var f=d.prototype=a.prototype;f.constructor=d;var m=f.toString,g=String(a("test"))=="Symbol(test)",_=/^Symbol\((.*)\)[^)]+$/;p(f,"description",{configurable:!0,get:function(){var x=h(this)?this.valueOf():this,w=m.call(x);if(c(l,x))return"";var M=g?w.slice(7,-1):w.replace(_,"$1");return M===""?void 0:M}}),s({global:!0,forced:!0},{Symbol:d})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/is-object":73,"../internals/object-define-property":91}],192:[function(e,n,i){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],193:[function(e,n,i){function s(H,J){var he=Ve[H]=R(ue[se]);return be(he,{type:re,tag:H,description:J}),l||(he.description=J),he}function r(H,J){w(H);var he=A(J),Te=P(he).concat(Z(he));return V(Te,function(Ie){l&&!z.call(he,Ie)||Ce(H,Ie,he[Ie])}),H}function o(H,J){var he=A(H),Te=T(J,!0);if(he!==me||!g(Ve,Te)||g(Pe,Te)){var Ie=W(he,Te);return!Ie||!g(Ve,Te)||g(he,ne)&&he[ne][Te]||(Ie.enumerable=!0),Ie}}function c(H){var J=xe(A(H)),he=[];return V(J,function(Te){g(Ve,Te)||g(pe,Te)||he.push(Te)}),he}var h=e("../internals/export"),p=e("../internals/global"),u=e("../internals/get-built-in"),a=e("../internals/is-pure"),l=e("../internals/descriptors"),d=e("../internals/native-symbol"),f=e("../internals/use-symbol-as-uid"),m=e("../internals/fails"),g=e("../internals/has"),_=e("../internals/is-array"),x=e("../internals/is-object"),w=e("../internals/an-object"),M=e("../internals/to-object"),A=e("../internals/to-indexed-object"),T=e("../internals/to-primitive"),I=e("../internals/create-property-descriptor"),R=e("../internals/object-create"),P=e("../internals/object-keys"),O=e("../internals/object-get-own-property-names"),D=e("../internals/object-get-own-property-names-external"),k=e("../internals/object-get-own-property-symbols"),N=e("../internals/object-get-own-property-descriptor"),q=e("../internals/object-define-property"),X=e("../internals/object-property-is-enumerable"),G=e("../internals/create-non-enumerable-property"),Q=e("../internals/redefine"),K=e("../internals/shared"),_e=e("../internals/shared-key"),pe=e("../internals/hidden-keys"),ge=e("../internals/uid"),ce=e("../internals/well-known-symbol"),de=e("../internals/well-known-symbol-wrapped"),Ee=e("../internals/define-well-known-symbol"),C=e("../internals/set-to-string-tag"),F=e("../internals/internal-state"),V=e("../internals/array-iteration").forEach,ne=_e("hidden"),re="Symbol",se="prototype",te=ce("toPrimitive"),be=F.set,$=F.getterFor(re),me=Object[se],ue=p.Symbol,B=u("JSON","stringify"),W=N.f,ye=q.f,xe=D.f,Re=X.f,Ve=K("symbols"),Pe=K("op-symbols"),Ke=K("string-to-symbol-registry"),$e=K("symbol-to-string-registry"),Le=K("wks"),ae=p.QObject,De=!ae||!ae[se]||!ae[se].findChild,ie=l&&m(function(){return R(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a!=7})?function(H,J,he){var Te=W(me,J);Te&&delete me[J],ye(H,J,he),Te&&H!==me&&ye(me,J,Te)}:ye,Fe=f?function(H){return typeof H=="symbol"}:function(H){return Object(H)instanceof ue},Ce=function(H,J,he){H===me&&Ce(Pe,J,he),w(H);var Te=T(J,!0);return w(he),g(Ve,Te)?(he.enumerable?(g(H,ne)&&H[ne][Te]&&(H[ne][Te]=!1),he=R(he,{enumerable:I(0,!1)})):(g(H,ne)||ye(H,ne,I(1,{})),H[ne][Te]=!0),ie(H,Te,he)):ye(H,Te,he)},z=function(H){var J=T(H,!0),he=Re.call(this,J);return!(this===me&&g(Ve,J)&&!g(Pe,J))&&(!(he||!g(this,J)||!g(Ve,J)||g(this,ne)&&this[ne][J])||he)},Z=function(H){var J=H===me,he=xe(J?Pe:A(H)),Te=[];return V(he,function(Ie){!g(Ve,Ie)||J&&!g(me,Ie)||Te.push(Ve[Ie])}),Te};d||(Q((ue=function(H){if(this instanceof ue)throw TypeError("Symbol is not a constructor");var J=arguments.length&&H!==void 0?String(H):void 0,he=ge(J),Te=function(Ie){this===me&&Te.call(Pe,Ie),g(this,ne)&&g(this[ne],he)&&(this[ne][he]=!1),ie(this,he,I(1,Ie))};return l&&De&&ie(me,he,{configurable:!0,set:Te}),s(he,J)})[se],"toString",function(){return $(this).tag}),Q(ue,"withoutSetter",function(H){return s(ge(H),H)}),X.f=z,q.f=Ce,N.f=o,O.f=D.f=c,k.f=Z,de.f=function(H){return s(ce(H),H)},l&&(ye(ue[se],"description",{configurable:!0,get:function(){return $(this).description}}),a||Q(me,"propertyIsEnumerable",z,{unsafe:!0}))),h({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:ue}),V(P(Le),function(H){Ee(H)}),h({target:re,stat:!0,forced:!d},{for:function(H){var J=String(H);if(g(Ke,J))return Ke[J];var he=ue(J);return Ke[J]=he,$e[he]=J,he},keyFor:function(H){if(!Fe(H))throw TypeError(H+" is not a symbol");if(g($e,H))return $e[H]},useSetter:function(){De=!0},useSimple:function(){De=!1}}),h({target:"Object",stat:!0,forced:!d,sham:!l},{create:function(H,J){return J===void 0?R(H):r(R(H),J)},defineProperty:Ce,defineProperties:r,getOwnPropertyDescriptor:o}),h({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:c,getOwnPropertySymbols:Z}),h({target:"Object",stat:!0,forced:m(function(){k.f(1)})},{getOwnPropertySymbols:function(H){return k.f(M(H))}}),B&&h({target:"JSON",stat:!0,forced:!d||m(function(){var H=ue();return B([H])!="[null]"||B({a:H})!="{}"||B(Object(H))!="{}"})},{stringify:function(H,J,he){for(var Te,Ie=[H],Xe=1;Xe<arguments.length;)Ie.push(arguments[Xe++]);if((x(Te=J)||H!==void 0)&&!Fe(H))return _(J)||(J=function(Se,Qe){if(typeof Te=="function"&&(Qe=Te.call(this,Se,Qe)),!Fe(Qe))return Qe}),Ie[1]=J,B.apply(null,Ie)}}),ue[se][te]||G(ue[se],te,ue[se].valueOf),C(ue,re),pe[ne]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":55,"../internals/global":58,"../internals/has":59,"../internals/hidden-keys":60,"../internals/internal-state":69,"../internals/is-array":71,"../internals/is-object":73,"../internals/is-pure":74,"../internals/native-symbol":82,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/object-get-own-property-names-external":93,"../internals/object-get-own-property-symbols":95,"../internals/object-keys":98,"../internals/object-property-is-enumerable":99,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/shared":119,"../internals/shared-key":117,"../internals/to-indexed-object":131,"../internals/to-object":134,"../internals/to-primitive":137,"../internals/uid":142,"../internals/use-symbol-as-uid":143,"../internals/well-known-symbol":145,"../internals/well-known-symbol-wrapped":144}],194:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-copy-within"),o=s.aTypedArray;(0,s.exportTypedArrayMethod)("copyWithin",function(c,h,p){return r.call(o(this),c,h,2<arguments.length?p:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],195:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").every,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("every",function(c,h){return r(o(this),c,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],196:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-fill"),o=s.aTypedArray;(0,s.exportTypedArrayMethod)("fill",function(c){return r.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],197:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").filter,o=e("../internals/species-constructor"),c=s.aTypedArray,h=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("filter",function(p,u){for(var a=r(c(this),p,1<arguments.length?u:void 0),l=o(this,this.constructor),d=0,f=a.length,m=new(h(l))(f);d<f;)m[d]=a[d++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":120}],198:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").findIndex,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("findIndex",function(c,h){return r(o(this),c,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").find,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("find",function(c,h){return r(o(this),c,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],200:[function(e,n,i){e("../internals/typed-array-constructor")("Float32",function(s){return function(r,o,c){return s(this,r,o,c)}})},{"../internals/typed-array-constructor":139}],201:[function(e,n,i){e("../internals/typed-array-constructor")("Float64",function(s){return function(r,o,c){return s(this,r,o,c)}})},{"../internals/typed-array-constructor":139}],202:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").forEach,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("forEach",function(c,h){r(o(this),c,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-includes").includes,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("includes",function(c,h){return r(o(this),c,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],204:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-includes").indexOf,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("indexOf",function(c,h){return r(o(this),c,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],205:[function(e,n,i){e("../internals/typed-array-constructor")("Int16",function(s){return function(r,o,c){return s(this,r,o,c)}})},{"../internals/typed-array-constructor":139}],206:[function(e,n,i){e("../internals/typed-array-constructor")("Int32",function(s){return function(r,o,c){return s(this,r,o,c)}})},{"../internals/typed-array-constructor":139}],207:[function(e,n,i){function s(){return u.call(d(this))}var r=e("../internals/global"),o=e("../internals/array-buffer-view-core"),c=e("../modules/es.array.iterator"),h=e("../internals/well-known-symbol")("iterator"),p=r.Uint8Array,u=c.values,a=c.keys,l=c.entries,d=o.aTypedArray,f=o.exportTypedArrayMethod,m=p&&p.prototype[h],g=!!m&&(m.name=="values"||m.name==null);f("entries",function(){return l.call(d(this))}),f("keys",function(){return a.call(d(this))}),f("values",s,!g),f(h,s,!g)},{"../internals/array-buffer-view-core":12,"../internals/global":58,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],208:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=s.aTypedArray,o=s.exportTypedArrayMethod,c=[].join;o("join",function(h){return c.apply(r(this),arguments)})},{"../internals/array-buffer-view-core":12}],209:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-last-index-of"),o=s.aTypedArray;(0,s.exportTypedArrayMethod)("lastIndexOf",function(c){return r.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],210:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").map,o=e("../internals/species-constructor"),c=s.aTypedArray,h=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("map",function(p,u){return r(c(this),p,1<arguments.length?u:void 0,function(a,l){return new(h(o(a,a.constructor)))(l)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":120}],211:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-reduce").right,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduceRight",function(c,h){return r(o(this),c,arguments.length,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],212:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-reduce").left,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduce",function(c,h){return r(o(this),c,arguments.length,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],213:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=s.aTypedArray,o=s.exportTypedArrayMethod,c=Math.floor;o("reverse",function(){for(var h,p=r(this).length,u=c(p/2),a=0;a<u;)h=this[a],this[a++]=this[--p],this[p]=h;return this})},{"../internals/array-buffer-view-core":12}],214:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/to-length"),o=e("../internals/to-offset"),c=e("../internals/to-object"),h=e("../internals/fails"),p=s.aTypedArray;(0,s.exportTypedArrayMethod)("set",function(u,a){p(this);var l=o(1<arguments.length?a:void 0,1),d=this.length,f=c(u),m=r(f.length),g=0;if(d<m+l)throw RangeError("Wrong length");for(;g<m;)this[l+g]=f[g++]},h(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":133,"../internals/to-object":134,"../internals/to-offset":135}],215:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/species-constructor"),o=e("../internals/fails"),c=s.aTypedArray,h=s.aTypedArrayConstructor,p=s.exportTypedArrayMethod,u=[].slice;p("slice",function(a,l){for(var d=u.call(c(this),a,l),f=r(this,this.constructor),m=0,g=d.length,_=new(h(f))(g);m<g;)_[m]=d[m++];return _},o(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":120}],216:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/array-iteration").some,o=s.aTypedArray;(0,s.exportTypedArrayMethod)("some",function(c,h){return r(o(this),c,1<arguments.length?h:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],217:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=s.aTypedArray,o=s.exportTypedArrayMethod,c=[].sort;o("sort",function(h){return c.call(r(this),h)})},{"../internals/array-buffer-view-core":12}],218:[function(e,n,i){var s=e("../internals/array-buffer-view-core"),r=e("../internals/to-length"),o=e("../internals/to-absolute-index"),c=e("../internals/species-constructor"),h=s.aTypedArray;(0,s.exportTypedArrayMethod)("subarray",function(p,u){var a=h(this),l=a.length,d=o(p,l);return new(c(a,a.constructor))(a.buffer,a.byteOffset+d*a.BYTES_PER_ELEMENT,r((u===void 0?l:o(u,l))-d))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":120,"../internals/to-absolute-index":129,"../internals/to-length":133}],219:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/array-buffer-view-core"),o=e("../internals/fails"),c=s.Int8Array,h=r.aTypedArray,p=r.exportTypedArrayMethod,u=[].toLocaleString,a=[].slice,l=!!c&&o(function(){u.call(new c(1))});p("toLocaleString",function(){return u.apply(l?a.call(h(this)):h(this),arguments)},o(function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()})||!o(function(){c.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":58}],220:[function(e,n,i){var s=e("../internals/array-buffer-view-core").exportTypedArrayMethod,r=e("../internals/fails"),o=e("../internals/global").Uint8Array,c=o&&o.prototype||{},h=[].toString,p=[].join;r(function(){h.call({})})&&(h=function(){return p.call(this)}),s("toString",h,c.toString!=h)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":58}],221:[function(e,n,i){e("../internals/typed-array-constructor")("Uint16",function(s){return function(r,o,c){return s(this,r,o,c)}})},{"../internals/typed-array-constructor":139}],222:[function(e,n,i){e("../internals/typed-array-constructor")("Uint32",function(s){return function(r,o,c){return s(this,r,o,c)}})},{"../internals/typed-array-constructor":139}],223:[function(e,n,i){e("../internals/typed-array-constructor")("Uint8",function(s){return function(r,o,c){return s(this,r,o,c)}})},{"../internals/typed-array-constructor":139}],224:[function(e,n,i){e("../internals/typed-array-constructor")("Uint8",function(s){return function(r,o,c){return s(this,r,o,c)}},!0)},{"../internals/typed-array-constructor":139}],225:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/dom-iterables"),o=e("../internals/array-for-each"),c=e("../internals/create-non-enumerable-property");for(var h in r){var p=s[h],u=p&&p.prototype;if(u&&u.forEach!==o)try{c(u,"forEach",o)}catch{u.forEach=o}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":58}],226:[function(e,n,i){var s=e("../internals/global"),r=e("../internals/dom-iterables"),o=e("../modules/es.array.iterator"),c=e("../internals/create-non-enumerable-property"),h=e("../internals/well-known-symbol"),p=h("iterator"),u=h("toStringTag"),a=o.values;for(var l in r){var d=s[l],f=d&&d.prototype;if(f){if(f[p]!==a)try{c(f,p,a)}catch{f[p]=a}if(f[u]||c(f,u,l),r[l]){for(var m in o)if(f[m]!==o[m])try{c(f,m,o[m])}catch{f[m]=o[m]}}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":58,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],227:[function(e,n,i){e("../modules/es.array.iterator");function s(re){try{return decodeURIComponent(re)}catch{return re}}function r(re){var se,te=re.replace(ce," "),be=4;try{return decodeURIComponent(te)}catch{for(;be;)te=te.replace((se=be--,de[se-1]||(de[se-1]=RegExp("((?:%[\\da-f]{2}){"+se+"})","gi"))),s);return te}}function o(re){return C[re]}function c(re){return encodeURIComponent(re).replace(Ee,o)}function h(re,se){if(se)for(var te,be,$=se.split("&"),me=0;me<$.length;)(te=$[me++]).length&&(be=te.split("="),re.push({key:r(be.shift()),value:r(be.join("="))}))}function p(re){this.entries.length=0,h(this.entries,re)}function u(re,se){if(re<se)throw TypeError("Not enough arguments")}var a=e("../internals/export"),l=e("../internals/get-built-in"),d=e("../internals/native-url"),f=e("../internals/redefine"),m=e("../internals/redefine-all"),g=e("../internals/set-to-string-tag"),_=e("../internals/create-iterator-constructor"),x=e("../internals/internal-state"),w=e("../internals/an-instance"),M=e("../internals/has"),A=e("../internals/function-bind-context"),T=e("../internals/classof"),I=e("../internals/an-object"),R=e("../internals/is-object"),P=e("../internals/object-create"),O=e("../internals/create-property-descriptor"),D=e("../internals/get-iterator"),k=e("../internals/get-iterator-method"),N=e("../internals/well-known-symbol"),q=l("fetch"),X=l("Headers"),G=N("iterator"),Q="URLSearchParams",K=Q+"Iterator",_e=x.set,pe=x.getterFor(Q),ge=x.getterFor(K),ce=/\+/g,de=Array(4),Ee=/[!'()~]|%20/g,C={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=_(function(re,se){_e(this,{type:K,iterator:D(pe(re).entries),kind:se})},"Iterator",function(){var re=ge(this),se=re.kind,te=re.iterator.next(),be=te.value;return te.done||(te.value=se==="keys"?be.key:se==="values"?be.value:[be.key,be.value]),te}),V=function(re){w(this,V,Q);var se,te,be,$,me,ue,B,W,ye,xe=0<arguments.length?re:void 0,Re=[];if(_e(this,{type:Q,entries:Re,updateURL:function(){},updateSearchParams:p}),xe!==void 0)if(R(xe))if(typeof(se=k(xe))=="function")for(be=(te=se.call(xe)).next;!($=be.call(te)).done;){if((B=(ue=(me=D(I($.value))).next).call(me)).done||(W=ue.call(me)).done||!ue.call(me).done)throw TypeError("Expected sequence with length 2");Re.push({key:B.value+"",value:W.value+""})}else for(ye in xe)M(xe,ye)&&Re.push({key:ye,value:xe[ye]+""});else h(Re,typeof xe=="string"?xe.charAt(0)==="?"?xe.slice(1):xe:xe+"")},ne=V.prototype;m(ne,{append:function(re,se){u(arguments.length,2);var te=pe(this);te.entries.push({key:re+"",value:se+""}),te.updateURL()},delete:function(re){u(arguments.length,1);for(var se=pe(this),te=se.entries,be=re+"",$=0;$<te.length;)te[$].key===be?te.splice($,1):$++;se.updateURL()},get:function(re){u(arguments.length,1);for(var se=pe(this).entries,te=re+"",be=0;be<se.length;be++)if(se[be].key===te)return se[be].value;return null},getAll:function(re){u(arguments.length,1);for(var se=pe(this).entries,te=re+"",be=[],$=0;$<se.length;$++)se[$].key===te&&be.push(se[$].value);return be},has:function(re){u(arguments.length,1);for(var se=pe(this).entries,te=re+"",be=0;be<se.length;)if(se[be++].key===te)return!0;return!1},set:function(re,se){u(arguments.length,1);for(var te,be=pe(this),$=be.entries,me=!1,ue=re+"",B=se+"",W=0;W<$.length;W++)(te=$[W]).key===ue&&(me?$.splice(W--,1):(me=!0,te.value=B));me||$.push({key:ue,value:B}),be.updateURL()},sort:function(){var re,se,te,be=pe(this),$=be.entries,me=$.slice();for(te=$.length=0;te<me.length;te++){for(re=me[te],se=0;se<te;se++)if($[se].key>re.key){$.splice(se,0,re);break}se===te&&$.push(re)}be.updateURL()},forEach:function(re,se){for(var te,be=pe(this).entries,$=A(re,1<arguments.length?se:void 0,3),me=0;me<be.length;)$((te=be[me++]).value,te.key,this)},keys:function(){return new F(this,"keys")},values:function(){return new F(this,"values")},entries:function(){return new F(this,"entries")}},{enumerable:!0}),f(ne,G,ne.entries),f(ne,"toString",function(){for(var re,se=pe(this).entries,te=[],be=0;be<se.length;)re=se[be++],te.push(c(re.key)+"="+c(re.value));return te.join("&")},{enumerable:!0}),g(V,Q),a({global:!0,forced:!d},{URLSearchParams:V}),d||typeof q!="function"||typeof X!="function"||a({global:!0,enumerable:!0,forced:!0},{fetch:function(re,se){var te,be,$,me=[re];return 1<arguments.length&&(R(te=se)&&(be=te.body,T(be)===Q&&(($=te.headers?new X(te.headers):new X).has("content-type")||$.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),te=P(te,{body:O(0,String(be)),headers:O(0,$)}))),me.push(te)),q.apply(this,me)}}),n.exports={URLSearchParams:V,getState:pe}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":53,"../internals/get-built-in":55,"../internals/get-iterator":57,"../internals/get-iterator-method":56,"../internals/has":59,"../internals/internal-state":69,"../internals/is-object":73,"../internals/native-url":83,"../internals/object-create":89,"../internals/redefine":107,"../internals/redefine-all":106,"../internals/set-to-string-tag":116,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],228:[function(e,n,i){e("../modules/es.string.iterator");function s(le,je){var qe,Ue,et;if(je.charAt(0)=="["){if(je.charAt(je.length-1)!="]"||!(qe=ue(je.slice(1,-1))))return ge;le.host=qe}else if(Pe(le)){if(je=P(je),se.test(je)||(qe=me(je))===null)return ge;le.host=qe}else{if(te.test(je))return ge;for(qe="",Ue=I(je),et=0;et<Ue.length;et++)qe+=Re(Ue[et],B);le.host=qe}}function r(le){var je,qe,Ue,et;if(typeof le=="number"){for(je=[],qe=0;qe<4;qe++)je.unshift(le%256),le=K(le/256);return je.join(".")}if(typeof le!="object")return le;for(je="",Ue=function(ze){for(var at=null,Mt=1,yt=null,wt=0,nt=0;nt<8;nt++)ze[nt]!==0?(Mt<wt&&(at=yt,Mt=wt),yt=null,wt=0):(yt===null&&(yt=nt),++wt);return Mt<wt&&(at=yt,Mt=wt),at}(le),qe=0;qe<8;qe++)et&&le[qe]===0||(et=et&&!1,Ue===qe?(je+=qe?":":"::",et=!0):(je+=le[qe].toString(16),qe<7&&(je+=":")));return"["+je+"]"}function o(le){return le.username!=""||le.password!=""}function c(le){return!le.host||le.cannotBeABaseURL||le.scheme=="file"}function h(le,je){var qe;return le.length==2&&de.test(le.charAt(0))&&((qe=le.charAt(1))==":"||!je&&qe=="|")}function p(le){var je;return 1<le.length&&h(le.slice(0,2))&&(le.length==2||(je=le.charAt(2))==="/"||je==="\\"||je==="?"||je==="#")}function u(le){var je=le.path,qe=je.length;!qe||le.scheme=="file"&&qe==1&&h(je[0],!0)||je.pop()}function a(le,je,qe,Ue){var et,ze,at,Mt,yt,wt,nt=qe||Ke,It=0,dt="",kt=!1,Fr=!1,mr=!1;for(qe||(le.scheme="",le.username="",le.password="",le.host=null,le.port=null,le.path=[],le.query=null,le.fragment=null,le.cannotBeABaseURL=!1,je=je.replace(be,"")),je=je.replace($,""),et=I(je);It<=et.length;){switch(ze=et[It],nt){case Ke:if(!ze||!de.test(ze)){if(qe)return pe;nt=Le;continue}dt+=ze.toLowerCase(),nt=$e;break;case $e:if(ze&&(Ee.test(ze)||ze=="+"||ze=="-"||ze=="."))dt+=ze.toLowerCase();else{if(ze!=":"){if(qe)return pe;dt="",nt=Le,It=0;continue}if(qe&&(Pe(le)!=A(Ve,dt)||dt=="file"&&(o(le)||le.port!==null)||le.scheme=="file"&&!le.host))return;if(le.scheme=dt,qe)return void(Pe(le)&&Ve[le.scheme]==le.port&&(le.port=null));dt="",le.scheme=="file"?nt=Te:Pe(le)&&Ue&&Ue.scheme==le.scheme?nt=ae:Pe(le)?nt=Ce:et[It+1]=="/"?(nt=De,It++):(le.cannotBeABaseURL=!0,le.path.push(""),nt=it)}break;case Le:if(!Ue||Ue.cannotBeABaseURL&&ze!="#")return pe;if(Ue.cannotBeABaseURL&&ze=="#"){le.scheme=Ue.scheme,le.path=Ue.path.slice(),le.query=Ue.query,le.fragment="",le.cannotBeABaseURL=!0,nt=xt;break}nt=Ue.scheme=="file"?Te:ie;continue;case ae:if(ze!="/"||et[It+1]!="/"){nt=ie;continue}nt=z,It++;break;case De:if(ze=="/"){nt=Z;break}nt=Qe;continue;case ie:if(le.scheme=Ue.scheme,ze==d)le.username=Ue.username,le.password=Ue.password,le.host=Ue.host,le.port=Ue.port,le.path=Ue.path.slice(),le.query=Ue.query;else if(ze=="/"||ze=="\\"&&Pe(le))nt=Fe;else if(ze=="?")le.username=Ue.username,le.password=Ue.password,le.host=Ue.host,le.port=Ue.port,le.path=Ue.path.slice(),le.query="",nt=St;else{if(ze!="#"){le.username=Ue.username,le.password=Ue.password,le.host=Ue.host,le.port=Ue.port,le.path=Ue.path.slice(),le.path.pop(),nt=Qe;continue}le.username=Ue.username,le.password=Ue.password,le.host=Ue.host,le.port=Ue.port,le.path=Ue.path.slice(),le.query=Ue.query,le.fragment="",nt=xt}break;case Fe:if(!Pe(le)||ze!="/"&&ze!="\\"){if(ze!="/"){le.username=Ue.username,le.password=Ue.password,le.host=Ue.host,le.port=Ue.port,nt=Qe;continue}nt=Z}else nt=z;break;case Ce:if(nt=z,ze!="/"||dt.charAt(It+1)!="/")continue;It++;break;case z:if(ze=="/"||ze=="\\")break;nt=Z;continue;case Z:if(ze=="@"){kt&&(dt="%40"+dt),kt=!0,at=I(dt);for(var li=0;li<at.length;li++){var ui=at[li];if(ui!=":"||mr){var os=Re(ui,xe);mr?le.password+=os:le.username+=os}else mr=!0}dt=""}else if(ze==d||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Pe(le)){if(kt&&dt=="")return"Invalid authority";It-=I(dt).length+1,dt="",nt=H}else dt+=ze;break;case H:case J:if(qe&&le.scheme=="file"){nt=Xe;continue}if(ze!=":"||Fr){if(ze==d||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Pe(le)){if(Pe(le)&&dt=="")return ge;if(qe&&dt==""&&(o(le)||le.port!==null))return;if(Mt=s(le,dt))return Mt;if(dt="",nt=Se,qe)return;continue}ze=="["?Fr=!0:ze=="]"&&(Fr=!1),dt+=ze}else{if(dt=="")return ge;if(Mt=s(le,dt))return Mt;if(dt="",nt=he,qe==J)return}break;case he:if(!C.test(ze)){if(ze==d||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Pe(le)||qe){if(dt!=""){var ci=parseInt(dt,10);if(65535<ci)return ce;le.port=Pe(le)&&ci===Ve[le.scheme]?null:ci,dt=""}if(qe)return;nt=Se;continue}return ce}dt+=ze;break;case Te:if(le.scheme="file",ze=="/"||ze=="\\")nt=Ie;else{if(!Ue||Ue.scheme!="file"){nt=Qe;continue}if(ze==d)le.host=Ue.host,le.path=Ue.path.slice(),le.query=Ue.query;else if(ze=="?")le.host=Ue.host,le.path=Ue.path.slice(),le.query="",nt=St;else{if(ze!="#"){p(et.slice(It).join(""))||(le.host=Ue.host,le.path=Ue.path.slice(),u(le)),nt=Qe;continue}le.host=Ue.host,le.path=Ue.path.slice(),le.query=Ue.query,le.fragment="",nt=xt}}break;case Ie:if(ze=="/"||ze=="\\"){nt=Xe;break}Ue&&Ue.scheme=="file"&&!p(et.slice(It).join(""))&&(h(Ue.path[0],!0)?le.path.push(Ue.path[0]):le.host=Ue.host),nt=Qe;continue;case Xe:if(ze==d||ze=="/"||ze=="\\"||ze=="?"||ze=="#"){if(!qe&&h(dt))nt=Qe;else if(dt==""){if(le.host="",qe)return;nt=Se}else{if(Mt=s(le,dt))return Mt;if(le.host=="localhost"&&(le.host=""),qe)return;dt="",nt=Se}continue}dt+=ze;break;case Se:if(Pe(le)){if(nt=Qe,ze!="/"&&ze!="\\")continue}else if(qe||ze!="?")if(qe||ze!="#"){if(ze!=d&&(nt=Qe,ze!="/"))continue}else le.fragment="",nt=xt;else le.query="",nt=St;break;case Qe:if(ze==d||ze=="/"||ze=="\\"&&Pe(le)||!qe&&(ze=="?"||ze=="#")){if((wt=(wt=dt).toLowerCase())===".."||wt==="%2e."||wt===".%2e"||wt==="%2e%2e"?(u(le),ze=="/"||ze=="\\"&&Pe(le)||le.path.push("")):(yt=dt)==="."||yt.toLowerCase()==="%2e"?ze=="/"||ze=="\\"&&Pe(le)||le.path.push(""):(le.scheme=="file"&&!le.path.length&&h(dt)&&(le.host&&(le.host=""),dt=dt.charAt(0)+":"),le.path.push(dt)),dt="",le.scheme=="file"&&(ze==d||ze=="?"||ze=="#"))for(;1<le.path.length&&le.path[0]==="";)le.path.shift();ze=="?"?(le.query="",nt=St):ze=="#"&&(le.fragment="",nt=xt)}else dt+=Re(ze,ye);break;case it:ze=="?"?(le.query="",nt=St):ze=="#"?(le.fragment="",nt=xt):ze!=d&&(le.path[0]+=Re(ze,B));break;case St:qe||ze!="#"?ze!=d&&(ze=="'"&&Pe(le)?le.query+="%27":le.query+=ze=="#"?"%23":Re(ze,B)):(le.fragment="",nt=xt);break;case xt:ze!=d&&(le.fragment+=Re(ze,W))}It++}}function l(le,je){return{get:le,set:je,configurable:!0,enumerable:!0}}var d,f=e("../internals/export"),m=e("../internals/descriptors"),g=e("../internals/native-url"),_=e("../internals/global"),x=e("../internals/object-define-properties"),w=e("../internals/redefine"),M=e("../internals/an-instance"),A=e("../internals/has"),T=e("../internals/object-assign"),I=e("../internals/array-from"),R=e("../internals/string-multibyte").codeAt,P=e("../internals/string-punycode-to-ascii"),O=e("../internals/set-to-string-tag"),D=e("../modules/web.url-search-params"),k=e("../internals/internal-state"),N=_.URL,q=D.URLSearchParams,X=D.getState,G=k.set,Q=k.getterFor("URL"),K=Math.floor,_e=Math.pow,pe="Invalid scheme",ge="Invalid host",ce="Invalid port",de=/[A-Za-z]/,Ee=/[\d+-.A-Za-z]/,C=/\d/,F=/^(0x|0X)/,V=/^[0-7]+$/,ne=/^\d+$/,re=/^[\dA-Fa-f]+$/,se=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,te=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,be=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,$=/[\u0009\u000A\u000D]/g,me=function(le){var je,qe,Ue,et,ze,at,Mt,yt=le.split(".");if(yt.length&&yt[yt.length-1]==""&&yt.pop(),4<(je=yt.length))return le;for(qe=[],Ue=0;Ue<je;Ue++){if((et=yt[Ue])=="")return le;if(ze=10,1<et.length&&et.charAt(0)=="0"&&(ze=F.test(et)?16:8,et=et.slice(ze==8?1:2)),et==="")at=0;else{if(!(ze==10?ne:ze==8?V:re).test(et))return le;at=parseInt(et,ze)}qe.push(at)}for(Ue=0;Ue<je;Ue++)if(at=qe[Ue],Ue==je-1){if(at>=_e(256,5-je))return null}else if(255<at)return null;for(Mt=qe.pop(),Ue=0;Ue<qe.length;Ue++)Mt+=qe[Ue]*_e(256,3-Ue);return Mt},ue=function(le){function je(){return le.charAt(dt)}var qe,Ue,et,ze,at,Mt,yt,wt=[0,0,0,0,0,0,0,0],nt=0,It=null,dt=0;if(je()==":"){if(le.charAt(1)!=":")return;dt+=2,It=++nt}for(;je();){if(nt==8)return;if(je()!=":"){for(qe=Ue=0;Ue<4&&re.test(je());)qe=16*qe+parseInt(je(),16),dt++,Ue++;if(je()=="."){if(Ue==0||(dt-=Ue,6<nt))return;for(et=0;je();){if(ze=null,0<et){if(!(je()=="."&&et<4))return;dt++}if(!C.test(je()))return;for(;C.test(je());){if(at=parseInt(je(),10),ze===null)ze=at;else{if(ze==0)return;ze=10*ze+at}if(255<ze)return;dt++}wt[nt]=256*wt[nt]+ze,++et!=2&&et!=4||nt++}if(et!=4)return;break}if(je()==":"){if(dt++,!je())return}else if(je())return;wt[nt++]=qe}else{if(It!==null)return;dt++,It=++nt}}if(It!==null)for(Mt=nt-It,nt=7;nt!=0&&0<Mt;)yt=wt[nt],wt[nt--]=wt[It+Mt-1],wt[It+--Mt]=yt;else if(nt!=8)return;return wt},B={},W=T({},B,{" ":1,'"':1,"<":1,">":1,"`":1}),ye=T({},W,{"#":1,"?":1,"{":1,"}":1}),xe=T({},ye,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Re=function(le,je){var qe=R(le,0);return 32<qe&&qe<127&&!A(je,le)?le:encodeURIComponent(le)},Ve={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Pe=function(le){return A(Ve,le.scheme)},Ke={},$e={},Le={},ae={},De={},ie={},Fe={},Ce={},z={},Z={},H={},J={},he={},Te={},Ie={},Xe={},Se={},Qe={},it={},St={},xt={},ht=function(le,je){var qe,Ue,et=M(this,ht,"URL"),ze=1<arguments.length?je:void 0,at=String(le),Mt=G(et,{type:"URL"});if(ze!==void 0){if(ze instanceof ht)qe=Q(ze);else if(Ue=a(qe={},String(ze)))throw TypeError(Ue)}if(Ue=a(Mt,at,null,qe))throw TypeError(Ue);var yt=Mt.searchParams=new q,wt=X(yt);wt.updateSearchParams(Mt.query),wt.updateURL=function(){Mt.query=String(yt)||null},m||(et.href=Tt.call(et),et.origin=lr.call(et),et.protocol=Nr.call(et),et.username=qr.call(et),et.password=Tr.call(et),et.host=nn.call(et),et.hostname=ve.call(et),et.port=ke.call(et),et.pathname=We.call(et),et.search=Be.call(et),et.searchParams=Ye.call(et),et.hash=bt.call(et))},_t=ht.prototype,Tt=function(){var le=Q(this),je=le.scheme,qe=le.username,Ue=le.password,et=le.host,ze=le.port,at=le.path,Mt=le.query,yt=le.fragment,wt=je+":";return et!==null?(wt+="//",o(le)&&(wt+=qe+(Ue?":"+Ue:"")+"@"),wt+=r(et),ze!==null&&(wt+=":"+ze)):je=="file"&&(wt+="//"),wt+=le.cannotBeABaseURL?at[0]:at.length?"/"+at.join("/"):"",Mt!==null&&(wt+="?"+Mt),yt!==null&&(wt+="#"+yt),wt},lr=function(){var le=Q(this),je=le.scheme,qe=le.port;if(je=="blob")try{return new URL(je.path[0]).origin}catch{return"null"}return je!="file"&&Pe(le)?je+"://"+r(le.host)+(qe!==null?":"+qe:""):"null"},Nr=function(){return Q(this).scheme+":"},qr=function(){return Q(this).username},Tr=function(){return Q(this).password},nn=function(){var le=Q(this),je=le.host,qe=le.port;return je===null?"":qe===null?r(je):r(je)+":"+qe},ve=function(){var le=Q(this).host;return le===null?"":r(le)},ke=function(){var le=Q(this).port;return le===null?"":String(le)},We=function(){var le=Q(this),je=le.path;return le.cannotBeABaseURL?je[0]:je.length?"/"+je.join("/"):""},Be=function(){var le=Q(this).query;return le?"?"+le:""},Ye=function(){return Q(this).searchParams},bt=function(){var le=Q(this).fragment;return le?"#"+le:""};if(m&&x(_t,{href:l(Tt,function(le){var je=Q(this),qe=String(le),Ue=a(je,qe);if(Ue)throw TypeError(Ue);X(je.searchParams).updateSearchParams(je.query)}),origin:l(lr),protocol:l(Nr,function(le){var je=Q(this);a(je,String(le)+":",Ke)}),username:l(qr,function(le){var je=Q(this),qe=I(String(le));if(!c(je)){je.username="";for(var Ue=0;Ue<qe.length;Ue++)je.username+=Re(qe[Ue],xe)}}),password:l(Tr,function(le){var je=Q(this),qe=I(String(le));if(!c(je)){je.password="";for(var Ue=0;Ue<qe.length;Ue++)je.password+=Re(qe[Ue],xe)}}),host:l(nn,function(le){var je=Q(this);je.cannotBeABaseURL||a(je,String(le),H)}),hostname:l(ve,function(le){var je=Q(this);je.cannotBeABaseURL||a(je,String(le),J)}),port:l(ke,function(le){var je=Q(this);c(je)||((le=String(le))==""?je.port=null:a(je,le,he))}),pathname:l(We,function(le){var je=Q(this);je.cannotBeABaseURL||(je.path=[],a(je,le+"",Se))}),search:l(Be,function(le){var je=Q(this);(le=String(le))==""?je.query=null:(le.charAt(0)=="?"&&(le=le.slice(1)),je.query="",a(je,le,St)),X(je.searchParams).updateSearchParams(je.query)}),searchParams:l(Ye),hash:l(bt,function(le){var je=Q(this);(le=String(le))!=""?(le.charAt(0)=="#"&&(le=le.slice(1)),je.fragment="",a(je,le,xt)):je.fragment=null})}),w(_t,"toJSON",function(){return Tt.call(this)},{enumerable:!0}),w(_t,"toString",function(){return Tt.call(this)},{enumerable:!0}),N){var gt=N.createObjectURL,ft=N.revokeObjectURL;gt&&w(ht,"createObjectURL",function(le){return gt.apply(N,arguments)}),ft&&w(ht,"revokeObjectURL",function(le){return ft.apply(N,arguments)})}O(ht,"URL"),f({global:!0,forced:!g,sham:!m},{URL:ht})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/internal-state":69,"../internals/native-url":83,"../internals/object-assign":88,"../internals/object-define-properties":90,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/string-multibyte":122,"../internals/string-punycode-to-ascii":123,"../modules/es.string.iterator":183,"../modules/web.url-search-params":227}],229:[function(e,n,i){n.exports=e("./").polyfill()},{"./":230}],230:[function(e,n,i){(function(s,r){var o,c;o=this,c=function(){function h($){return typeof $=="function"}var p=Array.isArray?Array.isArray:function($){return Object.prototype.toString.call($)==="[object Array]"},u=0,a=void 0,l=void 0,d=function($,me){M[u]=$,M[u+1]=me,(u+=2)===2&&(l?l(A):O())},f=typeof window!="undefined"?window:void 0,m=f||{},g=m.MutationObserver||m.WebKitMutationObserver,_=typeof self=="undefined"&&s!==void 0&&{}.toString.call(s)==="[object process]",x=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";function w(){var $=setTimeout;return function(){return $(A,1)}}var M=new Array(1e3);function A(){for(var $=0;$<u;$+=2)(0,M[$])(M[$+1]),M[$]=void 0,M[$+1]=void 0;u=0}var T,I,R,P,O=void 0;function D($,me){var ue=this,B=new this.constructor(q);B[N]===void 0&&ne(B);var W=ue._state;if(W){var ye=arguments[W-1];d(function(){return F(W,B,ye,ue._result)})}else Ee(ue,B,$,me);return B}function k($){if($&&typeof $=="object"&&$.constructor===this)return $;var me=new this(q);return pe(me,$),me}O=_?function(){return s.nextTick(A)}:g?(I=0,R=new g(A),P=document.createTextNode(""),R.observe(P,{characterData:!0}),function(){P.data=I=++I%2}):x?((T=new MessageChannel).port1.onmessage=A,function(){return T.port2.postMessage(0)}):f===void 0&&typeof e=="function"?function(){try{var $=Function("return this")().require("vertx");return(a=$.runOnLoop||$.runOnContext)!==void 0?function(){a(A)}:w()}catch{return w()}}():w();var N=Math.random().toString(36).substring(2);function q(){}var X=void 0,G=1,Q=2;function K($,me,ue){d(function(B){var W=!1,ye=function(xe,Re,Ve,Pe){try{xe.call(Re,Ve,Pe)}catch(Ke){return Ke}}(ue,me,function(xe){W||(W=!0,me!==xe?pe(B,xe):ce(B,xe))},function(xe){W||(W=!0,de(B,xe))},B._label);!W&&ye&&(W=!0,de(B,ye))},$)}function _e($,me,ue){var B,W;me.constructor===$.constructor&&ue===D&&me.constructor.resolve===k?(B=$,(W=me)._state===G?ce(B,W._result):W._state===Q?de(B,W._result):Ee(W,void 0,function(ye){return pe(B,ye)},function(ye){return de(B,ye)})):ue===void 0?ce($,me):h(ue)?K($,me,ue):ce($,me)}function pe($,me){if($===me)de($,new TypeError("You cannot resolve a promise with itself"));else if(W=typeof(B=me),B===null||W!="object"&&W!="function")ce($,me);else{var ue=void 0;try{ue=me.then}catch(ye){return void de($,ye)}_e($,me,ue)}var B,W}function ge($){$._onerror&&$._onerror($._result),C($)}function ce($,me){$._state===X&&($._result=me,$._state=G,$._subscribers.length!==0&&d(C,$))}function de($,me){$._state===X&&($._state=Q,$._result=me,d(ge,$))}function Ee($,me,ue,B){var W=$._subscribers,ye=W.length;$._onerror=null,W[ye]=me,W[ye+G]=ue,W[ye+Q]=B,ye===0&&$._state&&d(C,$)}function C($){var me=$._subscribers,ue=$._state;if(me.length!==0){for(var B=void 0,W=void 0,ye=$._result,xe=0;xe<me.length;xe+=3)B=me[xe],W=me[xe+ue],B?F(ue,B,W,ye):W(ye);$._subscribers.length=0}}function F($,me,ue,B){var W=h(ue),ye=void 0,xe=void 0,Re=!0;if(W){try{ye=ue(B)}catch(Ve){Re=!1,xe=Ve}if(me===ye)return void de(me,new TypeError("A promises callback cannot return that same promise."))}else ye=B;me._state!==X||(W&&Re?pe(me,ye):Re===!1?de(me,xe):$===G?ce(me,ye):$===Q&&de(me,ye))}var V=0;function ne($){$[N]=V++,$._state=void 0,$._result=void 0,$._subscribers=[]}var re=(se.prototype._enumerate=function($){for(var me=0;this._state===X&&me<$.length;me++)this._eachEntry($[me],me)},se.prototype._eachEntry=function($,me){var ue=this._instanceConstructor,B=ue.resolve;if(B===k){var W=void 0,ye=void 0,xe=!1;try{W=$.then}catch(Ve){xe=!0,ye=Ve}if(W===D&&$._state!==X)this._settledAt($._state,me,$._result);else if(typeof W!="function")this._remaining--,this._result[me]=$;else if(ue===te){var Re=new ue(q);xe?de(Re,ye):_e(Re,$,W),this._willSettleAt(Re,me)}else this._willSettleAt(new ue(function(Ve){return Ve($)}),me)}else this._willSettleAt(B($),me)},se.prototype._settledAt=function($,me,ue){var B=this.promise;B._state===X&&(this._remaining--,$===Q?de(B,ue):this._result[me]=ue),this._remaining===0&&ce(B,this._result)},se.prototype._willSettleAt=function($,me){var ue=this;Ee($,void 0,function(B){return ue._settledAt(G,me,B)},function(B){return ue._settledAt(Q,me,B)})},se);function se($,me){this._instanceConstructor=$,this.promise=new $(q),this.promise[N]||ne(this.promise),p(me)?(this.length=me.length,this._remaining=me.length,this._result=new Array(this.length),this.length===0?ce(this.promise,this._result):(this.length=this.length||0,this._enumerate(me),this._remaining===0&&ce(this.promise,this._result))):de(this.promise,new Error("Array Methods must be provided an Array"))}var te=(be.prototype.catch=function($){return this.then(null,$)},be.prototype.finally=function($){var me=this.constructor;return h($)?this.then(function(ue){return me.resolve($()).then(function(){return ue})},function(ue){return me.resolve($()).then(function(){throw ue})}):this.then($,$)},be);function be($){this[N]=V++,this._result=this._state=void 0,this._subscribers=[],q!==$&&(typeof $!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof be?function(me,ue){try{ue(function(B){pe(me,B)},function(B){de(me,B)})}catch(B){de(me,B)}}(this,$):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return te.prototype.then=D,te.all=function($){return new re(this,$).promise},te.race=function($){var me=this;return p($)?new me(function(ue,B){for(var W=$.length,ye=0;ye<W;ye++)me.resolve($[ye]).then(ue,B)}):new me(function(ue,B){return B(new TypeError("You must pass an array to race."))})},te.resolve=k,te.reject=function($){var me=new this(q);return de(me,$),me},te._setScheduler=function($){l=$},te._setAsap=function($){d=$},te._asap=d,te.polyfill=function(){var $=void 0;if(r!==void 0)$=r;else if(typeof self!="undefined")$=self;else try{$=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var me=$.Promise;if(me){var ue=null;try{ue=Object.prototype.toString.call(me.resolve())}catch{}if(ue==="[object Promise]"&&!me.cast)return}$.Promise=te},te.Promise=te},typeof i=="object"&&n!==void 0?n.exports=c():o.ES6Promise=c()}).call(this,e("_process"),typeof ra!="undefined"?ra:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:238}],231:[function(e,n,i){(function(s,r){if(i!==void 0&&n!==void 0)r(i,n);else{var o={exports:{}};r(o.exports,o),s.fetchJsonp=o.exports}})(this,function(s,r){var o=5e3,c="callback";function h(u){try{delete window[u]}catch{window[u]=void 0}}function p(u){var a=document.getElementById(u);a&&document.getElementsByTagName("head")[0].removeChild(a)}r.exports=function(u){var a=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],l=u,d=a.timeout||o,f=a.jsonpCallback||c,m=void 0;return new Promise(function(g,_){var x=a.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),w=f+"_"+x;window[x]=function(A){g({ok:!0,json:function(){return Promise.resolve(A)}}),m&&clearTimeout(m),p(w),h(x)},l+=l.indexOf("?")===-1?"?":"&";var M=document.createElement("script");M.setAttribute("src",""+l+f+"="+x),a.charset&&M.setAttribute("charset",a.charset),M.id=w,document.getElementsByTagName("head")[0].appendChild(M),m=setTimeout(function(){_(new Error("JSONP request to "+u+" timed out")),h(x),p(w),window[x]=function(){h(x)}},d),M.onerror=function(){_(new Error("JSONP request to "+u+" failed")),h(x),p(w),m&&clearTimeout(m)}})}})},{}],232:[function(e,n,i){var s=s||function(r){if(!(r===void 0||typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))){var o=r.document,c=function(){return r.URL||r.webkitURL||r},h=o.createElementNS("http://www.w3.org/1999/xhtml","a"),p="download"in h,u=/constructor/i.test(r.HTMLElement)||r.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(_){(r.setImmediate||r.setTimeout)(function(){throw _},0)},d=function(_){setTimeout(function(){typeof _=="string"?c().revokeObjectURL(_):_.remove()},4e4)},f=function(_){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob([String.fromCharCode(65279),_],{type:_.type}):_},m=function(_,x,w){w||(_=f(_));function M(){(function(R,P,O){for(var D=(P=[].concat(P)).length;D--;){var k=R["on"+P[D]];if(typeof k=="function")try{k.call(R,O||R)}catch(N){l(N)}}})(T,"writestart progress write writeend".split(" "))}var A,T=this,I=_.type==="application/octet-stream";if(T.readyState=T.INIT,p)return A=c().createObjectURL(_),void setTimeout(function(){var R,P;h.href=A,h.download=x,R=h,P=new MouseEvent("click"),R.dispatchEvent(P),M(),d(A),T.readyState=T.DONE});(function(){if((a||I&&u)&&r.FileReader){var R=new FileReader;return R.onloadend=function(){var P=a?R.result:R.result.replace(/^data:[^;]*;/,"data:attachment/file;");r.open(P,"_blank")||(r.location.href=P),P=void 0,T.readyState=T.DONE,M()},R.readAsDataURL(_),T.readyState=T.INIT}A=A||c().createObjectURL(_),I?r.location.href=A:r.open(A,"_blank")||(r.location.href=A),T.readyState=T.DONE,M(),d(A)})()},g=m.prototype;return typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob?function(_,x,w){return x=x||_.name||"download",w||(_=f(_)),navigator.msSaveOrOpenBlob(_,x)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,function(_,x,w){return new m(_,x||_.name||"download",w)})}}(typeof self!="undefined"&&self||typeof window!="undefined"&&window||this.content);n!==void 0&&n.exports&&(n.exports.saveAs=s)},{}],233:[function(e,n,i){i.read=function(s,r,o,c,h){var p,u,a=8*h-c-1,l=(1<<a)-1,d=l>>1,f=-7,m=o?h-1:0,g=o?-1:1,_=s[r+m];for(m+=g,p=_&(1<<-f)-1,_>>=-f,f+=a;0<f;p=256*p+s[r+m],m+=g,f-=8);for(u=p&(1<<-f)-1,p>>=-f,f+=c;0<f;u=256*u+s[r+m],m+=g,f-=8);if(p===0)p=1-d;else{if(p===l)return u?NaN:1/0*(_?-1:1);u+=Math.pow(2,c),p-=d}return(_?-1:1)*u*Math.pow(2,p-c)},i.write=function(s,r,o,c,h,p){var u,a,l,d=8*p-h-1,f=(1<<d)-1,m=f>>1,g=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=c?0:p-1,x=c?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(a=isNaN(r)?1:0,u=f):(u=Math.floor(Math.log(r)/Math.LN2),r*(l=Math.pow(2,-u))<1&&(u--,l*=2),2<=(r+=1<=u+m?g/l:g*Math.pow(2,1-m))*l&&(u++,l/=2),f<=u+m?(a=0,u=f):1<=u+m?(a=(r*l-1)*Math.pow(2,h),u+=m):(a=r*Math.pow(2,m-1)*Math.pow(2,h),u=0));8<=h;s[o+_]=255&a,_+=x,a/=256,h-=8);for(u=u<<h|a,d+=h;0<d;s[o+_]=255&u,_+=x,u/=256,d-=8);s[o+_-x]|=128*w}},{}],234:[function(e,n,i){var s;function r(z,Z){return z.b===Z.b&&z.a===Z.a}function o(z,Z){return z.b<Z.b||z.b===Z.b&&z.a<=Z.a}function c(z,Z,H){var J=Z.b-z.b,he=H.b-Z.b;return 0<J+he?J<he?Z.a-z.a+J/(J+he)*(z.a-H.a):Z.a-H.a+he/(J+he)*(H.a-z.a):0}function h(z,Z,H){var J=Z.b-z.b,he=H.b-Z.b;return 0<J+he?(Z.a-H.a)*J+(Z.a-z.a)*he:0}function p(z,Z){return z.a<Z.a||z.a===Z.a&&z.b<=Z.b}function u(z,Z,H){var J=Z.a-z.a,he=H.a-Z.a;return 0<J+he?J<he?Z.b-z.b+J/(J+he)*(z.b-H.b):Z.b-H.b+he/(J+he)*(H.b-z.b):0}function a(z,Z,H){var J=Z.a-z.a,he=H.a-Z.a;return 0<J+he?(Z.b-H.b)*J+(Z.b-z.b)*he:0}function l(z,Z,H,J){return(z=z<0?0:z)<=(H=H<0?0:H)?H===0?(Z+J)/2:Z+z/(z+H)*(J-Z):J+H/(z+H)*(Z-J)}function d(z){var Z=x(z.b);return M(Z,z.c),M(Z.b,z.c),A(Z,z.a),Z}function f(z,Z){var H=!1,J=!1;z!==Z&&(Z.a!==z.a&&(J=!0,I(Z.a,z.a)),Z.d!==z.d&&(H=!0,R(Z.d,z.d)),w(Z,z),J||(M(Z,z.a),z.a.c=z),H||(A(Z,z.d),z.d.a=z))}function m(z){var Z=z.b,H=!1;z.d!==z.b.d&&(H=!0,R(z.d,z.b.d)),z.c===z?I(z.a,null):(z.b.d.a=B(z),z.a.c=z.c,w(z,B(z)),H||A(z,z.d)),Z.c===Z?(I(Z.a,null),R(Z.d,null)):(z.d.a=B(Z),Z.a.c=Z.c,w(Z,B(Z))),T(z)}function g(z){var Z=x(z),H=Z.b;return w(Z,z.e),Z.a=z.b.a,M(H,Z.a),Z.d=H.d=z.d,Z=Z.b,w(z.b,B(z.b)),w(z.b,Z),z.b.a=Z.a,Z.b.a.c=Z.b,Z.b.d=z.b.d,Z.f=z.f,Z.b.f=z.b.f,Z}function _(z,Z){var H=!1,J=x(z),he=J.b;return Z.d!==z.d&&(H=!0,R(Z.d,z.d)),w(J,z.e),w(he,Z),J.a=z.b.a,he.a=Z.a,J.d=he.d=z.d,z.d.a=he,H||A(J,z.d),J}function x(z){var Z=new ue,H=new ue,J=z.b.h;return(((H.h=J).b.h=Z).h=z).b.h=H,Z.b=H,((Z.c=Z).e=H).b=Z,(H.c=H).e=Z}function w(z,Z){var H=z.c,J=Z.c;H.b.e=Z,(J.b.e=z).c=J,Z.c=H}function M(z,Z){var H=Z.f,J=new ye(Z,H);for(H.e=J,H=(Z.f=J).c=z;H.a=J,(H=H.c)!==z;);}function A(z,Z){var H=Z.d,J=new me(Z,H);for(H.b=J,(Z.d=J).a=z,J.c=Z.c,H=z;H.d=J,(H=H.e)!==z;);}function T(z){var Z=z.h;z=z.b.h,(Z.b.h=z).b.h=Z}function I(z,Z){for(var H=z.c,J=H;J.a=Z,(J=J.c)!==H;);H=z.f,((J=z.e).f=H).e=J}function R(z,Z){for(var H=z.a,J=H;J.d=Z,(J=J.e)!==H;);H=z.d,((J=z.b).d=H).b=J}function P(z){var Z=0;return Math.abs(z[1])>Math.abs(z[0])&&(Z=1),Math.abs(z[2])>Math.abs(z[Z])&&(Z=2),Z}function O(z,Z){z.f+=Z.f,z.b.f+=Z.b.f}function D(z,Z,H){return z=z.a,Z=Z.a,H=H.a,Z.b.a===z?H.b.a===z?o(Z.a,H.a)?h(H.b.a,Z.a,H.a)<=0:0<=h(Z.b.a,H.a,Z.a):h(H.b.a,z,H.a)<=0:H.b.a===z?0<=h(Z.b.a,z,Z.a):(Z=c(Z.b.a,z,Z.a),(z=c(H.b.a,z,H.a))<=Z)}function k(z){z.a.i=null;var Z=z.e;Z.a.c=Z.c,Z.c.a=Z.a,z.e=null}function N(z,Z){m(z.a),z.c=!1,(z.a=Z).i=z}function q(z){for(var Z=z.a.a;(z=Ce(z)).a.a===Z;);return z.c&&(N(z,Z=_(Fe(z).a.b,z.a.e)),z=Ce(z)),z}function X(z,Z,H){var J=new ie;return J.a=H,J.e=re(z.f,Z.e,J),H.i=J}function G(z,Z){switch(z.s){case 100130:return(1&Z)!=0;case 100131:return Z!==0;case 100132:return 0<Z;case 100133:return Z<0;case 100134:return 2<=Z||Z<=-2}return!1}function Q(z){var Z=z.a,H=Z.d;H.c=z.d,H.a=Z,k(z)}function K(z,Z,H){for(Z=(z=Z).a;z!==H;){z.c=!1;var J=Fe(z),he=J.a;if(he.a!==Z.a){if(!J.c){Q(z);break}N(J,he=_(Z.c.b,he.b))}Z.c!==he&&(f(B(he),he),f(Z,he)),Q(z),Z=J.a,z=J}return Z}function _e(z,Z,H,J,he,Te){for(var Ie=!0;X(z,Z,H.b),(H=H.c)!==J;);for(he===null&&(he=Fe(Z).a.b.c);(H=(J=Fe(Z)).a.b).a===he.a;)H.c!==he&&(f(B(H),H),f(B(he),H)),J.f=Z.f-H.f,J.d=G(z,J.f),Z.b=!0,!Ie&&de(z,Z)&&(O(H,he),k(Z),m(he)),Ie=!1,Z=J,he=H;Z.b=!0,Te&&C(z,Z)}function pe(z,Z,H,J,he){var Te=[Z.g[0],Z.g[1],Z.g[2]];Z.d=null,Z.d=z.o&&z.o(Te,H,J,z.c)||null,Z.d===null&&(he?z.n||($(z,100156),z.n=!0):Z.d=H[0])}function ge(z,Z,H){var J=[null,null,null,null];J[0]=Z.a.d,J[1]=H.a.d,pe(z,Z.a,J,[.5,.5,0,0],!1),f(Z,H)}function ce(z,Z,H,J,he){var Te=Math.abs(Z.b-z.b)+Math.abs(Z.a-z.a),Ie=Math.abs(H.b-z.b)+Math.abs(H.a-z.a),Xe=he+1;J[he]=.5*Ie/(Te+Ie),J[Xe]=.5*Te/(Te+Ie),z.g[0]+=J[he]*Z.g[0]+J[Xe]*H.g[0],z.g[1]+=J[he]*Z.g[1]+J[Xe]*H.g[1],z.g[2]+=J[he]*Z.g[2]+J[Xe]*H.g[2]}function de(z,Z){var H=Fe(Z),J=Z.a,he=H.a;if(o(J.a,he.a)){if(0<h(he.b.a,J.a,he.a))return!1;if(r(J.a,he.a)){if(J.a!==he.a){H=z.e;var Te=J.a.h;if(0<=Te){var Ie=(H=H.b).d,Xe=H.e,Se=H.c,Qe=Se[Te];Ie[Qe]=Ie[H.a],(Se[Ie[Qe]]=Qe)<=--H.a&&(Qe<=1||o(Xe[Ie[Qe>>1]],Xe[Ie[Qe]])?ae(H,Qe):De(H,Qe)),Xe[Te]=null,Se[Te]=H.b,H.b=Te}else for(H.c[-(Te+1)]=null;0<H.a&&H.c[H.d[H.a-1]]===null;)--H.a;ge(z,B(he),J)}}else g(he.b),f(J,B(he)),Z.b=H.b=!0}else{if(h(J.b.a,he.a,J.a)<0)return!1;Ce(Z).b=Z.b=!0,g(J.b),f(B(he),J)}return!0}function Ee(z,Z){var H=Fe(Z),J=Z.a,he=H.a,Te=J.a,Ie=he.a,Xe=J.b.a,Se=he.b.a,Qe=new ye;if(h(Xe,z.a,Te),h(Se,z.a,Ie),Te===Ie||Math.min(Te.a,Xe.a)>Math.max(Ie.a,Se.a))return!1;if(o(Te,Ie)){if(0<h(Se,Te,Ie))return!1}else if(h(Xe,Ie,Te)<0)return!1;var it,St,xt=Xe,ht=Te,_t=Se,Tt=Ie;if(o(xt,ht)||(it=xt,xt=ht,ht=it),o(_t,Tt)||(it=_t,_t=Tt,Tt=it),o(xt,_t)||(it=xt,xt=_t,_t=it,it=ht,ht=Tt,Tt=it),o(_t,ht)?o(ht,Tt)?((it=c(xt,_t,ht))+(St=c(_t,ht,Tt))<0&&(it=-it,St=-St),Qe.b=l(it,_t.b,St,ht.b)):((it=h(xt,_t,ht))+(St=-h(xt,Tt,ht))<0&&(it=-it,St=-St),Qe.b=l(it,_t.b,St,Tt.b)):Qe.b=(_t.b+ht.b)/2,p(xt,ht)||(it=xt,xt=ht,ht=it),p(_t,Tt)||(it=_t,_t=Tt,Tt=it),p(xt,_t)||(it=xt,xt=_t,_t=it,it=ht,ht=Tt,Tt=it),p(_t,ht)?p(ht,Tt)?((it=u(xt,_t,ht))+(St=u(_t,ht,Tt))<0&&(it=-it,St=-St),Qe.a=l(it,_t.a,St,ht.a)):((it=a(xt,_t,ht))+(St=-a(xt,Tt,ht))<0&&(it=-it,St=-St),Qe.a=l(it,_t.a,St,Tt.a)):Qe.a=(_t.a+ht.a)/2,o(Qe,z.a)&&(Qe.b=z.a.b,Qe.a=z.a.a),xt=o(Te,Ie)?Te:Ie,o(xt,Qe)&&(Qe.b=xt.b,Qe.a=xt.a),r(Qe,Te)||r(Qe,Ie))return de(z,Z),!1;if(!r(Xe,z.a)&&0<=h(Xe,z.a,Qe)||!r(Se,z.a)&&h(Se,z.a,Qe)<=0){if(Se===z.a)return g(J.b),f(he.b,J),J=Fe(Z=q(Z)).a,K(z,Fe(Z),H),_e(z,Z,B(J),J,J,!0),!0;if(Xe!==z.a)return 0<=h(Xe,z.a,Qe)&&(Ce(Z).b=Z.b=!0,g(J.b),J.a.b=z.a.b,J.a.a=z.a.a),h(Se,z.a,Qe)<=0&&(Z.b=H.b=!0,g(he.b),he.a.b=z.a.b,he.a.a=z.a.a),!1;for(g(he.b),f(J.e,B(he)),Ie=(Te=H=Z).a.b.a;(Te=Ce(Te)).a.b.a===Ie;);return Te=Fe(Z=Te).a.b.c,H.a=B(he),_e(z,Z,(he=K(z,H,null)).c,J.b.c,Te,!0),!0}return g(J.b),g(he.b),f(B(he),J),J.a.b=Qe.b,J.a.a=Qe.a,J.a.h=Re(z.e,J.a),J=J.a,he=[0,0,0,0],Qe=[Te.d,Xe.d,Ie.d,Se.d],J.g[0]=J.g[1]=J.g[2]=0,ce(J,Te,Xe,he,0),ce(J,Ie,Se,he,2),pe(z,J,Qe,he,!0),Ce(Z).b=Z.b=H.b=!0,!1}function C(z,Z){for(var H=Fe(Z);;){for(;H.b;)H=Fe(Z=H);if(!Z.b&&((Z=Ce(H=Z))===null||!Z.b))break;Z.b=!1;var J,he=Z.a,Te=H.a;if(J=he.b.a!==Te.b.a)e:{var Ie=Fe(J=Z),Xe=J.a,Se=Ie.a,Qe=void 0;if(o(Xe.b.a,Se.b.a)){if(h(Xe.b.a,Se.b.a,Xe.a)<0){J=!1;break e}Ce(J).b=J.b=!0,Qe=g(Xe),f(Se.b,Qe),Qe.d.c=J.d}else{if(0<h(Se.b.a,Xe.b.a,Se.a)){J=!1;break e}J.b=Ie.b=!0,Qe=g(Se),f(Xe.e,Se.b),Qe.b.d.c=J.d}J=!0}if(J&&(H.c?(k(H),m(Te),Te=(H=Fe(Z)).a):Z.c&&(k(Z),m(he),he=(Z=Ce(H)).a)),he.a!==Te.a){if(he.b.a===Te.b.a||Z.c||H.c||he.b.a!==z.a&&Te.b.a!==z.a)de(z,Z);else if(Ee(z,Z))break}he.a===Te.a&&he.b.a===Te.b.a&&(O(Te,he),k(Z),m(he),Z=Ce(H))}}function F(z,Z){for(var H=(z.a=Z).c;H.i===null;)if((H=H.c)===Z.c){H=z;var J=Z;(Ie=new ie).a=J.c.b;for(var he=(Se=H.f).a;(he=he.a).b!==null&&!Se.c(Se.b,Ie,he.b););var Te=Fe(Se=he.b),Ie=Se.a;if(he=Te.a,h(Ie.b.a,J,Ie.a)===0)r((Ie=Se.a).a,J)||r(Ie.b.a,J)||(g(Ie.b),Se.c&&(m(Ie.c),Se.c=!1),f(J.c,Ie),F(H,J));else{var Xe=o(he.b.a,Ie.b.a)?Se:Te;Te=void 0,Se.d||Xe.c?(Te=Xe===Se?_(J.c.b,Ie.e):_(he.b.c.b,J.c).b,Xe.c?N(Xe,Te):((Se=X(Ie=H,Se,Te)).f=Ce(Se).f+Se.a.f,Se.d=G(Ie,Se.f)),F(H,J)):_e(H,Se,J.c,J.c,null,!0)}return}if(Se=(Ie=Fe(H=q(H.i))).a,(Ie=K(z,Ie,null)).c===Se){Ie=(Se=Ie).c,he=Fe(H),Te=H.a,Xe=he.a;var Se,Qe=!1;Te.b.a!==Xe.b.a&&Ee(z,H),r(Te.a,z.a)&&(f(B(Ie),Te),Ie=Fe(H=q(H)).a,K(z,Fe(H),he),Qe=!0),r(Xe.a,z.a)&&(f(Se,B(Xe)),Se=K(z,he,null),Qe=!0),Qe?_e(z,H,Se.c,Ie,Ie,!0):(J=o(Xe.a,Te.a)?B(Xe):Te,_e(z,H,J=_(Se.c.b,J),J.c,J.c,!1),J.b.i.c=!0,C(z,H))}else _e(z,H,Ie.c,Se,Se,!0)}function V(z,Z){var H=new ie,J=d(z.b);J.a.b=4e150,J.a.a=Z,J.b.a.b=-4e150,J.b.a.a=Z,z.a=J.b.a,H.a=J,H.f=0,H.d=!1,H.c=!1,H.h=!0,H.b=!1,J=re(J=z.f,J.a,H),H.e=J}function ne(z){this.a=new se,this.b=z,this.c=D}function re(z,Z,H){for(;(Z=Z.c).b!==null&&!z.c(z.b,Z.b,H););return z=new se(H,Z.a,Z),Z.a.c=z,Z.a=z}function se(z,Z,H){this.b=z||null,this.a=Z||this,this.c=H||this}function te(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function be(z,Z){if(z.d!==Z)for(;z.d!==Z;)if(z.d<Z)switch(z.d){case 0:$(z,100151),z.u(null);break;case 1:$(z,100152),z.t()}else switch(z.d){case 2:$(z,100154),z.v();break;case 1:$(z,100153),z.w()}}function $(z,Z){z.p&&z.p(Z,z.c)}function me(z,Z){this.b=z||this,this.d=Z||this,this.a=null,this.c=!1}function ue(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function B(z){return z.b.e}function W(){this.c=new ye,this.a=new me,this.b=new ue,this.d=new ue,this.b.b=this.d,this.d.b=this.b}function ye(z,Z){this.e=z||this,this.f=Z||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function xe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Pe}function Re(z,Z){if(z.e){var H,J=z.b,he=++J.a;return 2*he>J.f&&(J.f*=2,J.c=Ke(J.c,J.f+1)),J.b===0?H=he:(H=J.b,J.b=J.c[J.b]),J.e[H]=Z,J.c[H]=he,J.d[he]=H,J.h&&De(J,he),H}return J=z.a++,z.c[J]=Z,-(J+1)}function Ve(z){if(z.a===0)return Le(z.b);var Z=z.c[z.d[z.a-1]];if(z.b.a!==0&&o($e(z.b),Z))return Le(z.b);for(;--z.a,0<z.a&&z.c[z.d[z.a-1]]===null;);return Z}function Pe(){this.d=Ke([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ke(z,Z){for(var H=Array(Z),J=0;J<z.length;J++)H[J]=z[J];for(;J<Z;J++)H[J]=0;return H}function $e(z){return z.e[z.d[1]]}function Le(z){var Z=z.d,H=z.e,J=z.c,he=Z[1],Te=H[he];return 0<z.a&&(Z[1]=Z[z.a],J[Z[1]]=1,H[he]=null,J[he]=z.b,z.b=he,0<--z.a&&ae(z,1)),Te}function ae(z,Z){for(var H=z.d,J=z.e,he=z.c,Te=Z,Ie=H[Te];;){var Xe=Te<<1;Xe<z.a&&o(J[H[Xe+1]],J[H[Xe]])&&(Xe+=1);var Se=H[Xe];if(Xe>z.a||o(J[Ie],J[Se])){he[H[Te]=Ie]=Te;break}he[H[Te]=Se]=Te,Te=Xe}}function De(z,Z){for(var H=z.d,J=z.e,he=z.c,Te=Z,Ie=H[Te];;){var Xe=Te>>1,Se=H[Xe];if(Xe==0||o(J[Se],J[Ie])){he[H[Te]=Ie]=Te;break}he[H[Te]=Se]=Te,Te=Xe}}function ie(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Fe(z){return z.e.c.b}function Ce(z){return z.e.a.b}(s=te.prototype).x=function(){be(this,0)},s.B=function(z,Z){switch(z){case 100142:return;case 100140:switch(Z){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=Z)}break;case 100141:return void(this.m=!!Z);default:return void $(this,100900)}$(this,100901)},s.y=function(z){switch(z){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:$(this,100900)}return!1},s.A=function(z,Z,H){this.j[0]=z,this.j[1]=Z,this.j[2]=H},s.z=function(z,Z){var H=Z||null;switch(z){case 100100:case 100106:this.h=H;break;case 100104:case 100110:this.l=H;break;case 100101:case 100107:this.k=H;break;case 100102:case 100108:this.i=H;break;case 100103:case 100109:this.p=H;break;case 100105:case 100111:this.o=H;break;case 100112:this.r=H;break;default:$(this,100900)}},s.C=function(z,Z){var H=!1,J=[0,0,0];be(this,2);for(var he=0;he<3;++he){var Te=z[he];Te<-1e150&&(Te=-1e150,H=!0),1e150<Te&&(Te=1e150,H=!0),J[he]=Te}H&&$(this,100155),(H=this.q)===null?f(H=d(this.b),H.b):(g(H),H=H.e),H.a.d=Z,H.a.g[0]=J[0],H.a.g[1]=J[1],H.a.g[2]=J[2],H.f=1,H.b.f=-1,this.q=H},s.u=function(z){be(this,0),this.d=1,this.b=new W,this.c=z},s.t=function(){be(this,1),this.d=2,this.q=null},s.v=function(){be(this,2),this.d=1},s.w=function(){be(this,1),this.d=0;var z,Z,H=!1,J=[Se=this.j[0],he=this.j[1],Ie=this.j[2]];if(Se===0&&he===0&&Ie===0){for(var he=[-2e150,-2e150,-2e150],Te=[2e150,2e150,2e150],Ie=[],Xe=[],Se=(H=this.b.c).e;Se!==H;Se=Se.e)for(var Qe=0;Qe<3;++Qe){var it=Se.g[Qe];it<Te[Qe]&&(Te[Qe]=it,Xe[Qe]=Se),it>he[Qe]&&(he[Qe]=it,Ie[Qe]=Se)}if(Se=0,he[1]-Te[1]>he[0]-Te[0]&&(Se=1),he[2]-Te[2]>he[Se]-Te[Se]&&(Se=2),Te[Se]>=he[Se])J[0]=0,J[1]=0,J[2]=1;else{for(he=0,Te=Xe[Se],Ie=Ie[Se],Xe=[0,0,0],Te=[Te.g[0]-Ie.g[0],Te.g[1]-Ie.g[1],Te.g[2]-Ie.g[2]],Qe=[0,0,0],Se=H.e;Se!==H;Se=Se.e)Qe[0]=Se.g[0]-Ie.g[0],Qe[1]=Se.g[1]-Ie.g[1],Qe[2]=Se.g[2]-Ie.g[2],Xe[0]=Te[1]*Qe[2]-Te[2]*Qe[1],Xe[1]=Te[2]*Qe[0]-Te[0]*Qe[2],Xe[2]=Te[0]*Qe[1]-Te[1]*Qe[0],he<(it=Xe[0]*Xe[0]+Xe[1]*Xe[1]+Xe[2]*Xe[2])&&(he=it,J[0]=Xe[0],J[1]=Xe[1],J[2]=Xe[2]);he<=0&&(J[0]=J[1]=J[2]=0,J[P(Te)]=1)}H=!0}for(Xe=P(J),Se=this.b.c,he=(Xe+1)%3,Ie=(Xe+2)%3,Xe=0<J[Xe]?1:-1,J=Se.e;J!==Se;J=J.e)J.b=J.g[he],J.a=Xe*J.g[Ie];if(H){for(J=0,Se=(H=this.b.a).b;Se!==H;Se=Se.b)if(!((he=Se.a).f<=0))for(;J+=(he.a.b-he.b.a.b)*(he.a.a+he.b.a.a),(he=he.e)!==Se.a;);if(J<0)for(H=(J=this.b.c).e;H!==J;H=H.e)H.a=-H.a}for(this.n=!1,Se=(J=this.b.b).h;Se!==J;Se=H)H=Se.h,he=Se.e,r(Se.a,Se.b.a)&&Se.e.e!==Se&&(ge(this,he,Se),m(Se),he=(Se=he).e),he.e===Se&&(he!==Se&&(he!==H&&he!==H.b||(H=H.h),m(he)),Se!==H&&Se!==H.b||(H=H.h),m(Se));for(this.e=J=new xe,Se=(H=this.b.c).e;Se!==H;Se=Se.e)Se.h=Re(J,Se);for(function(St){St.d=[];for(var xt=0;xt<St.a;xt++)St.d[xt]=xt;St.d.sort(function(ht){return function(_t,Tt){return o(ht[_t],ht[Tt])?1:-1}}(St.c)),St.e=!0,function(ht){for(var _t=ht.a;1<=_t;--_t)ae(ht,_t);ht.h=!0}(St.b)}(J),this.f=new ne(this),V(this,-4e150),V(this,4e150);(J=Ve(this.e))!==null;){for(;;){e:if(Se=this.e,Se.a===0)H=$e(Se.b);else if(H=Se.c[Se.d[Se.a-1]],Se.b.a!==0&&(Se=$e(Se.b),o(Se,H))){H=Se;break e}if(H===null||!r(H,J))break;H=Ve(this.e),ge(this,J.c,H.c)}F(this,J)}for(this.a=this.f.a.a.b.a.a,J=0;(H=this.f.a.a.b)!==null;)H.h||++J,k(H);for(this.f=null,(J=this.e).b=null,J.d=null,this.e=J.c=null,Se=(J=this.b).a.b;Se!==J.a;Se=H)H=Se.b,(Se=Se.a).e.e===Se&&(O(Se.c,Se),m(Se));if(!this.n){if(J=this.b,this.m)for(Se=J.b.h;Se!==J.b;Se=H)H=Se.h,Se.b.d.c!==Se.d.c?Se.f=Se.d.c?1:-1:m(Se);else for(Se=J.a.b;Se!==J.a;Se=H)if(H=Se.b,Se.c){for(Se=Se.a;o(Se.b.a,Se.a);Se=Se.c.b);for(;o(Se.a,Se.b.a);Se=Se.e);for(he=Se.c.b,Ie=void 0;Se.e!==he;)if(o(Se.b.a,he.a)){for(;he.e!==Se&&(o((Z=he.e).b.a,Z.a)||h(he.a,he.b.a,he.e.b.a)<=0);)he=(Ie=_(he.e,he)).b;he=he.c.b}else{for(;he.e!==Se&&(o((z=Se.c.b).a,z.b.a)||0<=h(Se.b.a,Se.a,Se.c.b.a));)Se=(Ie=_(Se,Se.c.b)).b;Se=Se.e}for(;he.e.e!==Se;)he=(Ie=_(he.e,he)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(H=(J=this.b).a.b;H!==J.a;H=H.b)if(H.c){for(this.h&&this.h(2,this.c),Se=H.a;this.k&&this.k(Se.a.d,this.c),(Se=Se.e)!==H.a;);this.i&&this.i(this.c)}}else{for(J=this.b,H=!!this.l,Se=!1,he=-1,Ie=J.a.d;Ie!==J.a;Ie=Ie.d)if(Ie.c)for(Se||(this.h&&this.h(4,this.c),Se=!0),Xe=Ie.a;H&&he!==(Te=Xe.b.d.c?0:1)&&(he=Te,this.l&&this.l(!!he,this.c)),this.k&&this.k(Xe.a.d,this.c),(Xe=Xe.e)!==Ie.a;);Se&&this.i&&this.i(this.c)}if(this.r){for(Se=(J=this.b).a.b;Se!==J.a;Se=H)if(H=Se.b,!Se.c){for(Ie=(he=Se.a).e,Xe=void 0;Ie=(Xe=Ie).e,(Xe.d=null)===Xe.b.d&&(Xe.c===Xe?I(Xe.a,null):(Xe.a.c=Xe.c,w(Xe,B(Xe))),(Te=Xe.b).c===Te?I(Te.a,null):(Te.a.c=Te.c,w(Te,B(Te))),T(Xe)),Xe!==he;);he=Se.d,((Se=Se.b).d=he).b=Se}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:te,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},te.prototype.gluDeleteTess=te.prototype.x,te.prototype.gluTessProperty=te.prototype.B,te.prototype.gluGetTessProperty=te.prototype.y,te.prototype.gluTessNormal=te.prototype.A,te.prototype.gluTessCallback=te.prototype.z,te.prototype.gluTessVertex=te.prototype.C,te.prototype.gluTessBeginPolygon=te.prototype.u,te.prototype.gluTessBeginContour=te.prototype.t,te.prototype.gluTessEndContour=te.prototype.v,te.prototype.gluTessEndPolygon=te.prototype.w,n!==void 0&&(n.exports=this.libtess)},{}],235:[function(e,n,i){function s(r,o,c,h){for(var p=r[o++],u=1<<p,a=1+u,l=1+a,d=p+1,f=(1<<d)-1,m=0,g=0,_=0,x=r[o++],w=new Int32Array(4096),M=null;;){for(;m<16&&x!==0;)g|=r[o++]<<m,m+=8,x===1?x=r[o++]:--x;if(m<d)break;var A=g&f;if(g>>=d,m-=d,A!=u){if(A==a)break;for(var T=A<l?A:M,I=0,R=T;u<R;)R=w[R]>>8,++I;var P=R;if(h<_+I+(T!==A?1:0))return void console.log("Warning, gif stream longer than expected.");c[_++]=P;var O=_+=I;for(T!==A&&(c[_++]=P),R=T;I--;)R=w[R],c[--O]=255&R,R>>=8;M!==null&&l<4096&&(w[l++]=M<<8|P,f+1<=l&&d<12&&(++d,f=f<<1|1)),M=A}else l=1+a,f=(1<<(d=p+1))-1,M=null}return _!==h&&console.log("Warning, gif stream shorter than expected."),c}try{i.GifWriter=function(r,o,c,h){var p=0,u=(h=h===void 0?{}:h).loop===void 0?null:h.loop,a=h.palette===void 0?null:h.palette;if(o<=0||c<=0||65535<o||65535<c)throw new Error("Width/Height invalid.");function l(M){var A=M.length;if(A<2||256<A||A&A-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return A}r[p++]=71,r[p++]=73,r[p++]=70,r[p++]=56,r[p++]=57,r[p++]=97;var d=0,f=0;if(a!==null){for(var m=l(a);m>>=1;)++d;if(m=1<<d,--d,h.background!==void 0){if(m<=(f=h.background))throw new Error("Background index out of range.");if(f===0)throw new Error("Background index explicitly passed as 0.")}}if(r[p++]=255&o,r[p++]=o>>8&255,r[p++]=255&c,r[p++]=c>>8&255,r[p++]=(a!==null?128:0)|d,r[p++]=f,r[p++]=0,a!==null)for(var g=0,_=a.length;g<_;++g){var x=a[g];r[p++]=x>>16&255,r[p++]=x>>8&255,r[p++]=255&x}if(u!==null){if(u<0||65535<u)throw new Error("Loop count invalid.");r[p++]=33,r[p++]=255,r[p++]=11,r[p++]=78,r[p++]=69,r[p++]=84,r[p++]=83,r[p++]=67,r[p++]=65,r[p++]=80,r[p++]=69,r[p++]=50,r[p++]=46,r[p++]=48,r[p++]=3,r[p++]=1,r[p++]=255&u,r[p++]=u>>8&255,r[p++]=0}var w=!1;this.addFrame=function(M,A,T,I,R,P){if(w===!0&&(--p,w=!1),P=P===void 0?{}:P,M<0||A<0||65535<M||65535<A)throw new Error("x/y invalid.");if(T<=0||I<=0||65535<T||65535<I)throw new Error("Width/Height invalid.");if(R.length<T*I)throw new Error("Not enough pixels for the frame size.");var O=!0,D=P.palette;if(D==null&&(O=!1,D=a),D==null)throw new Error("Must supply either a local or global palette.");for(var k=l(D),N=0;k>>=1;)++N;k=1<<N;var q=P.delay===void 0?0:P.delay,X=P.disposal===void 0?0:P.disposal;if(X<0||3<X)throw new Error("Disposal out of range.");var G=!1,Q=0;if(P.transparent!==void 0&&P.transparent!==null&&(G=!0,(Q=P.transparent)<0||k<=Q))throw new Error("Transparent color index.");if(X===0&&!G&&q===0||(r[p++]=33,r[p++]=249,r[p++]=4,r[p++]=X<<2|(G===!0?1:0),r[p++]=255&q,r[p++]=q>>8&255,r[p++]=Q,r[p++]=0),r[p++]=44,r[p++]=255&M,r[p++]=M>>8&255,r[p++]=255&A,r[p++]=A>>8&255,r[p++]=255&T,r[p++]=T>>8&255,r[p++]=255&I,r[p++]=I>>8&255,r[p++]=O===!0?128|N-1:0,O===!0)for(var K=0,_e=D.length;K<_e;++K){var pe=D[K];r[p++]=pe>>16&255,r[p++]=pe>>8&255,r[p++]=255&pe}return p=function(ge,ce,de,Ee){ge[ce++]=de;var C=ce++,F=1<<de,V=F-1,ne=1+F,re=1+ne,se=de+1,te=0,be=0;function $(Pe){for(;Pe<=te;)ge[ce++]=255&be,be>>=8,te-=8,ce===C+256&&(ge[C]=255,C=ce++)}function me(Pe){be|=Pe<<te,te+=se,$(8)}var ue=Ee[0]&V,B={};me(F);for(var W=1,ye=Ee.length;W<ye;++W){var xe=Ee[W]&V,Re=ue<<8|xe,Ve=B[Re];if(Ve===void 0){for(be|=ue<<te,te+=se;8<=te;)ge[ce++]=255&be,be>>=8,te-=8,ce===C+256&&(ge[C]=255,C=ce++);re===4096?(me(F),re=1+ne,se=de+1,B={}):(1<<se<=re&&++se,B[Re]=re++),ue=xe}else ue=Ve}return me(ue),me(ne),$(1),C+1===ce?ge[C]=0:(ge[C]=ce-C-1,ge[ce++]=0),ce}(r,p,N<2?2:N,R)},this.end=function(){return w===!1&&(r[p++]=59,w=!0),p},this.getOutputBuffer=function(){return r},this.setOutputBuffer=function(M){r=M},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(M){p=M}},i.GifReader=function(r){var o=0;if(r[o++]!==71||r[o++]!==73||r[o++]!==70||r[o++]!==56||(r[o++]+1&253)!=56||r[o++]!==97)throw new Error("Invalid GIF 87a/89a header.");var c=r[o++]|r[o++]<<8,h=r[o++]|r[o++]<<8,p=r[o++],u=p>>7,a=1<<1+(7&p);r[o++],r[o++];var l=null,d=null;u&&(l=o,o+=3*(d=a));var f=!0,m=[],g=0,_=null,x=0,w=null;for(this.width=c,this.height=h;f&&o<r.length;)switch(r[o++]){case 33:switch(r[o++]){case 255:if(r[o]!==11||r[o+1]==78&&r[o+2]==69&&r[o+3]==84&&r[o+4]==83&&r[o+5]==67&&r[o+6]==65&&r[o+7]==80&&r[o+8]==69&&r[o+9]==50&&r[o+10]==46&&r[o+11]==48&&r[o+12]==3&&r[o+13]==1&&r[o+16]==0)o+=14,w=r[o++]|r[o++]<<8,o++;else for(o+=12;;){if(!(0<=(G=r[o++])))throw Error("Invalid block size");if(G===0)break;o+=G}break;case 249:if(r[o++]!==4||r[o+4]!==0)throw new Error("Invalid graphics extension block.");var M=r[o++];g=r[o++]|r[o++]<<8,_=r[o++],(1&M)==0&&(_=null),x=M>>2&7,o++;break;case 254:for(;;){if(!(0<=(G=r[o++])))throw Error("Invalid block size");if(G===0)break;o+=G}break;default:throw new Error("Unknown graphic control label: 0x"+r[o-1].toString(16))}break;case 44:var A=r[o++]|r[o++]<<8,T=r[o++]|r[o++]<<8,I=r[o++]|r[o++]<<8,R=r[o++]|r[o++]<<8,P=r[o++],O=P>>6&1,D=1<<1+(7&P),k=l,N=d,q=!1;P>>7&&(q=!0,k=o,o+=3*(N=D));var X=o;for(o++;;){var G;if(!(0<=(G=r[o++])))throw Error("Invalid block size");if(G===0)break;o+=G}m.push({x:A,y:T,width:I,height:R,has_local_palette:q,palette_offset:k,palette_size:N,data_offset:X,data_length:o-X,transparent_index:_,interlaced:!!O,delay:g,disposal:x});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+r[o-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return w},this.frameInfo=function(Q){if(Q<0||Q>=m.length)throw new Error("Frame index out of range.");return m[Q]},this.decodeAndBlitFrameBGRA=function(Q,K){var _e=this.frameInfo(Q),pe=_e.width*_e.height,ge=new Uint8Array(pe);s(r,_e.data_offset,ge,pe);var ce=_e.palette_offset,de=_e.transparent_index;de===null&&(de=256);var Ee=_e.width,C=c-Ee,F=Ee,V=4*(_e.y*c+_e.x),ne=4*((_e.y+_e.height)*c+_e.x),re=V,se=4*C;_e.interlaced===!0&&(se+=4*c*7);for(var te=8,be=0,$=ge.length;be<$;++be){var me=ge[be];if(F===0&&(F=Ee,ne<=(re+=se)&&(se=4*C+4*c*(te-1),re=V+(Ee+C)*(te<<1),te>>=1)),me===de)re+=4;else{var ue=r[ce+3*me],B=r[ce+3*me+1],W=r[ce+3*me+2];K[re++]=W,K[re++]=B,K[re++]=ue,K[re++]=255}--F}},this.decodeAndBlitFrameRGBA=function(Q,K){var _e=this.frameInfo(Q),pe=_e.width*_e.height,ge=new Uint8Array(pe);s(r,_e.data_offset,ge,pe);var ce=_e.palette_offset,de=_e.transparent_index;de===null&&(de=256);var Ee=_e.width,C=c-Ee,F=Ee,V=4*(_e.y*c+_e.x),ne=4*((_e.y+_e.height)*c+_e.x),re=V,se=4*C;_e.interlaced===!0&&(se+=4*c*7);for(var te=8,be=0,$=ge.length;be<$;++be){var me=ge[be];if(F===0&&(F=Ee,ne<=(re+=se)&&(se=4*C+4*c*(te-1),re=V+(Ee+C)*(te<<1),te>>=1)),me===de)re+=4;else{var ue=r[ce+3*me],B=r[ce+3*me+1],W=r[ce+3*me+2];K[re++]=ue,K[re++]=B,K[re++]=W,K[re++]=255}--F}}}}catch{}},{}],236:[function(e,n,i){(function(s){var r;r=this,function(o){function c(v){if(this==null)throw TypeError();var b=String(this),S=b.length,E=v?Number(v):0;if(E!=E&&(E=0),!(E<0||S<=E)){var L,j=b.charCodeAt(E);return 55296<=j&&j<=56319&&E+1<S&&56320<=(L=b.charCodeAt(E+1))&&L<=57343?1024*(j-55296)+L-56320+65536:j}}var h;String.prototype.codePointAt||((h=function(){try{var v={},b=Object.defineProperty,S=b(v,v,v)&&b}catch{}return S}())?h(String.prototype,"codePointAt",{value:c,configurable:!0,writable:!0}):String.prototype.codePointAt=c);var p=0,u=-3;function a(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function l(v,b){this.source=v,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=b,this.destLen=0,this.ltree=new a,this.dtree=new a}var d=new a,f=new a,m=new Uint8Array(30),g=new Uint16Array(30),_=new Uint8Array(30),x=new Uint16Array(30),w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new a,A=new Uint8Array(320);function T(v,b,S,E){var L,j;for(L=0;L<S;++L)v[L]=0;for(L=0;L<30-S;++L)v[L+S]=L/S|0;for(j=E,L=0;L<30;++L)b[L]=j,j+=1<<v[L]}var I=new Uint16Array(16);function R(v,b,S,E){var L,j;for(L=0;L<16;++L)v.table[L]=0;for(L=0;L<E;++L)v.table[b[S+L]]++;for(L=j=v.table[0]=0;L<16;++L)I[L]=j,j+=v.table[L];for(L=0;L<E;++L)b[S+L]&&(v.trans[I[b[S+L]]++]=L)}function P(v){v.bitcount--||(v.tag=v.source[v.sourceIndex++],v.bitcount=7);var b=1&v.tag;return v.tag>>>=1,b}function O(v,b,S){if(!b)return S;for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;var E=v.tag&65535>>>16-b;return v.tag>>>=b,v.bitcount-=b,E+S}function D(v,b){for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;for(var S=0,E=0,L=0,j=v.tag;E=2*E+(1&j),j>>>=1,++L,S+=b.table[L],0<=(E-=b.table[L]););return v.tag=j,v.bitcount-=L,b.trans[S+E]}function k(v,b,S){var E,L,j,U,Y,ee;for(E=O(v,5,257),L=O(v,5,1),j=O(v,4,4),U=0;U<19;++U)A[U]=0;for(U=0;U<j;++U){var fe=O(v,3,0);A[w[U]]=fe}for(R(M,A,0,19),Y=0;Y<E+L;){var Me=D(v,M);switch(Me){case 16:var Ae=A[Y-1];for(ee=O(v,2,3);ee;--ee)A[Y++]=Ae;break;case 17:for(ee=O(v,3,3);ee;--ee)A[Y++]=0;break;case 18:for(ee=O(v,7,11);ee;--ee)A[Y++]=0;break;default:A[Y++]=Me}}R(b,A,0,E),R(S,A,E,L)}function N(v,b,S){for(;;){var E,L,j,U,Y=D(v,b);if(Y===256)return p;if(Y<256)v.dest[v.destLen++]=Y;else for(E=O(v,m[Y-=257],g[Y]),L=D(v,S),U=j=v.destLen-O(v,_[L],x[L]);U<j+E;++U)v.dest[v.destLen++]=v.dest[U]}}function q(v){for(var b,S;8<v.bitcount;)v.sourceIndex--,v.bitcount-=8;if((b=256*(b=v.source[v.sourceIndex+1])+v.source[v.sourceIndex])!==(65535&~(256*v.source[v.sourceIndex+3]+v.source[v.sourceIndex+2])))return u;for(v.sourceIndex+=4,S=b;S;--S)v.dest[v.destLen++]=v.source[v.sourceIndex++];return v.bitcount=0,p}(function(v,b){var S;for(S=0;S<7;++S)v.table[S]=0;for(v.table[7]=24,v.table[8]=152,v.table[9]=112,S=0;S<24;++S)v.trans[S]=256+S;for(S=0;S<144;++S)v.trans[24+S]=S;for(S=0;S<8;++S)v.trans[168+S]=280+S;for(S=0;S<112;++S)v.trans[176+S]=144+S;for(S=0;S<5;++S)b.table[S]=0;for(b.table[5]=32,S=0;S<32;++S)b.trans[S]=S})(d,f),T(m,g,4,3),T(_,x,2,1),m[28]=0,g[28]=258;var X=function(v,b){var S,E,L=new l(v,b);do{switch(S=P(L),O(L,2,0)){case 0:E=q(L);break;case 1:E=N(L,d,f);break;case 2:k(L,L.ltree,L.dtree),E=N(L,L.ltree,L.dtree);break;default:E=u}if(E!==p)throw new Error("Data error")}while(!S);return L.destLen<L.dest.length?typeof L.dest.slice=="function"?L.dest.slice(0,L.destLen):L.dest.subarray(0,L.destLen):L.dest};function G(v,b,S,E,L){return Math.pow(1-L,3)*v+3*Math.pow(1-L,2)*L*b+3*(1-L)*Math.pow(L,2)*S+Math.pow(L,3)*E}function Q(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function K(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function _e(v){throw new Error(v)}function pe(v,b){v||_e(b)}Q.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Q.prototype.addPoint=function(v,b){typeof v=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=v,this.x2=v),v<this.x1&&(this.x1=v),v>this.x2&&(this.x2=v)),typeof b=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},Q.prototype.addX=function(v){this.addPoint(v,null)},Q.prototype.addY=function(v){this.addPoint(null,v)},Q.prototype.addBezier=function(v,b,S,E,L,j,U,Y){var ee=[v,b],fe=[S,E],Me=[L,j],Ae=[U,Y];this.addPoint(v,b),this.addPoint(U,Y);for(var oe=0;oe<=1;oe++){var tt=6*ee[oe]-12*fe[oe]+6*Me[oe],Je=-3*ee[oe]+9*fe[oe]-9*Me[oe]+3*Ae[oe],He=3*fe[oe]-3*ee[oe];if(Je!=0){var Oe=Math.pow(tt,2)-4*He*Je;if(!(Oe<0)){var Ge=(-tt+Math.sqrt(Oe))/(2*Je);0<Ge&&Ge<1&&(oe===0&&this.addX(G(ee[oe],fe[oe],Me[oe],Ae[oe],Ge)),oe===1&&this.addY(G(ee[oe],fe[oe],Me[oe],Ae[oe],Ge)));var lt=(-tt-Math.sqrt(Oe))/(2*Je);0<lt&&lt<1&&(oe===0&&this.addX(G(ee[oe],fe[oe],Me[oe],Ae[oe],lt)),oe===1&&this.addY(G(ee[oe],fe[oe],Me[oe],Ae[oe],lt)))}}else{if(tt==0)continue;var ot=-He/tt;0<ot&&ot<1&&(oe===0&&this.addX(G(ee[oe],fe[oe],Me[oe],Ae[oe],ot)),oe===1&&this.addY(G(ee[oe],fe[oe],Me[oe],Ae[oe],ot)))}}},Q.prototype.addQuad=function(v,b,S,E,L,j){var U=v+2/3*(S-v),Y=b+2/3*(E-b),ee=U+1/3*(L-v),fe=Y+1/3*(j-b);this.addBezier(v,b,U,Y,ee,fe,L,j)},K.prototype.moveTo=function(v,b){this.commands.push({type:"M",x:v,y:b})},K.prototype.lineTo=function(v,b){this.commands.push({type:"L",x:v,y:b})},K.prototype.curveTo=K.prototype.bezierCurveTo=function(v,b,S,E,L,j){this.commands.push({type:"C",x1:v,y1:b,x2:S,y2:E,x:L,y:j})},K.prototype.quadTo=K.prototype.quadraticCurveTo=function(v,b,S,E){this.commands.push({type:"Q",x1:v,y1:b,x:S,y:E})},K.prototype.close=K.prototype.closePath=function(){this.commands.push({type:"Z"})},K.prototype.extend=function(v){if(v.commands)v=v.commands;else if(v instanceof Q){var b=v;return this.moveTo(b.x1,b.y1),this.lineTo(b.x2,b.y1),this.lineTo(b.x2,b.y2),this.lineTo(b.x1,b.y2),void this.close()}Array.prototype.push.apply(this.commands,v)},K.prototype.getBoundingBox=function(){for(var v=new Q,b=0,S=0,E=0,L=0,j=0;j<this.commands.length;j++){var U=this.commands[j];switch(U.type){case"M":v.addPoint(U.x,U.y),b=E=U.x,S=L=U.y;break;case"L":v.addPoint(U.x,U.y),E=U.x,L=U.y;break;case"Q":v.addQuad(E,L,U.x1,U.y1,U.x,U.y),E=U.x,L=U.y;break;case"C":v.addBezier(E,L,U.x1,U.y1,U.x2,U.y2,U.x,U.y),E=U.x,L=U.y;break;case"Z":E=b,L=S;break;default:throw new Error("Unexpected path command "+U.type)}}return v.isEmpty()&&v.addPoint(0,0),v},K.prototype.draw=function(v){v.beginPath();for(var b=0;b<this.commands.length;b+=1){var S=this.commands[b];S.type==="M"?v.moveTo(S.x,S.y):S.type==="L"?v.lineTo(S.x,S.y):S.type==="C"?v.bezierCurveTo(S.x1,S.y1,S.x2,S.y2,S.x,S.y):S.type==="Q"?v.quadraticCurveTo(S.x1,S.y1,S.x,S.y):S.type==="Z"&&v.closePath()}this.fill&&(v.fillStyle=this.fill,v.fill()),this.stroke&&(v.strokeStyle=this.stroke,v.lineWidth=this.strokeWidth,v.stroke())},K.prototype.toPathData=function(v){function b(){for(var j,U=arguments,Y="",ee=0;ee<arguments.length;ee+=1){var fe=U[ee];0<=fe&&0<ee&&(Y+=" "),Y+=(j=fe,Math.round(j)===j?""+Math.round(j):j.toFixed(v))}return Y}v=v!==void 0?v:2;for(var S="",E=0;E<this.commands.length;E+=1){var L=this.commands[E];L.type==="M"?S+="M"+b(L.x,L.y):L.type==="L"?S+="L"+b(L.x,L.y):L.type==="C"?S+="C"+b(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?S+="Q"+b(L.x1,L.y1,L.x,L.y):L.type==="Z"&&(S+="Z")}return S},K.prototype.toSVG=function(v){var b='<path d="';return b+=this.toPathData(v),b+='"',this.fill&&this.fill!=="black"&&(this.fill===null?b+=' fill="none"':b+=' fill="'+this.fill+'"'),this.stroke&&(b+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),b+="/>"},K.prototype.toDOMElement=function(v){var b=this.toPathData(v),S=document.createElementNS("http://www.w3.org/2000/svg","path");return S.setAttribute("d",b),S};var ge={fail:_e,argument:pe,assert:pe},ce={},de={},Ee={};function C(v){return function(){return v}}de.BYTE=function(v){return ge.argument(0<=v&&v<=255,"Byte value should be between 0 and 255."),[v]},Ee.BYTE=C(1),de.CHAR=function(v){return[v.charCodeAt(0)]},Ee.CHAR=C(1),de.CHARARRAY=function(v){for(var b=[],S=0;S<v.length;S+=1)b[S]=v.charCodeAt(S);return b},Ee.CHARARRAY=function(v){return v.length},de.USHORT=function(v){return[v>>8&255,255&v]},Ee.USHORT=C(2),de.SHORT=function(v){return 32768<=v&&(v=-(65536-v)),[v>>8&255,255&v]},Ee.SHORT=C(2),de.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},Ee.UINT24=C(3),de.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},Ee.ULONG=C(4),de.LONG=function(v){return 2147483648<=v&&(v=-(4294967296-v)),[v>>24&255,v>>16&255,v>>8&255,255&v]},Ee.LONG=C(4),de.FIXED=de.ULONG,Ee.FIXED=Ee.ULONG,de.FWORD=de.SHORT,Ee.FWORD=Ee.SHORT,de.UFWORD=de.USHORT,Ee.UFWORD=Ee.USHORT,de.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,255&v]},Ee.LONGDATETIME=C(8),de.TAG=function(v){return ge.argument(v.length===4,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},Ee.TAG=C(4),de.Card8=de.BYTE,Ee.Card8=Ee.BYTE,de.Card16=de.USHORT,Ee.Card16=Ee.USHORT,de.OffSize=de.BYTE,Ee.OffSize=Ee.BYTE,de.SID=de.USHORT,Ee.SID=Ee.USHORT,de.NUMBER=function(v){return-107<=v&&v<=107?[v+139]:108<=v&&v<=1131?[247+((v-=108)>>8),255&v]:-1131<=v&&v<=-108?[251+((v=-v-108)>>8),255&v]:-32768<=v&&v<=32767?de.NUMBER16(v):de.NUMBER32(v)},Ee.NUMBER=function(v){return de.NUMBER(v).length},de.NUMBER16=function(v){return[28,v>>8&255,255&v]},Ee.NUMBER16=C(3),de.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},Ee.NUMBER32=C(5),de.REAL=function(v){var b=v.toString(),S=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(b);if(S){var E=parseFloat("1e"+((S[2]?+S[2]:0)+S[1].length));b=(Math.round(v*E)/E).toString()}for(var L="",j=0,U=b.length;j<U;j+=1){var Y=b[j];L+=Y==="e"?b[++j]==="-"?"c":"b":Y==="."?"a":Y==="-"?"e":Y}for(var ee=[30],fe=0,Me=(L+=1&L.length?"f":"ff").length;fe<Me;fe+=2)ee.push(parseInt(L.substr(fe,2),16));return ee},Ee.REAL=function(v){return de.REAL(v).length},de.NAME=de.CHARARRAY,Ee.NAME=Ee.CHARARRAY,de.STRING=de.CHARARRAY,Ee.STRING=Ee.CHARARRAY,ce.UTF8=function(v,b,S){for(var E=[],L=S,j=0;j<L;j++,b+=1)E[j]=v.getUint8(b);return String.fromCharCode.apply(null,E)},ce.UTF16=function(v,b,S){for(var E=[],L=S/2,j=0;j<L;j++,b+=2)E[j]=v.getUint16(b);return String.fromCharCode.apply(null,E)},de.UTF16=function(v){for(var b=[],S=0;S<v.length;S+=1){var E=v.charCodeAt(S);b[b.length]=E>>8&255,b[b.length]=255&E}return b},Ee.UTF16=function(v){return 2*v.length};var F={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};ce.MACSTRING=function(v,b,S,E){var L=F[E];if(L!==void 0){for(var j="",U=0;U<S;U++){var Y=v.getUint8(b+U);j+=Y<=127?String.fromCharCode(Y):L[127&Y]}return j}};var V,ne=typeof WeakMap=="function"&&new WeakMap;function re(v){return-128<=v&&v<=127}function se(v,b,S){for(var E=0,L=v.length;b<L&&E<64&&v[b]===0;)++b,++E;return S.push(128|E-1),b}function te(v,b,S){for(var E=0,L=v.length,j=b;j<L&&E<64;){var U=v[j];if(!re(U)||U===0&&j+1<L&&v[j+1]===0)break;++j,++E}S.push(E-1);for(var Y=b;Y<j;++Y)S.push(v[Y]+256&255);return j}function be(v,b,S){for(var E=0,L=v.length,j=b;j<L&&E<64;){var U=v[j];if(U===0||re(U)&&j+1<L&&re(v[j+1]))break;++j,++E}S.push(64|E-1);for(var Y=b;Y<j;++Y){var ee=v[Y];S.push(ee+65536>>8&255,ee+256&255)}return j}de.MACSTRING=function(v,b){var S=function(U){if(!V)for(var Y in V={},F)V[Y]=new String(Y);var ee=V[U];if(ee!==void 0){if(ne){var fe=ne.get(ee);if(fe!==void 0)return fe}var Me=F[U];if(Me!==void 0){for(var Ae={},oe=0;oe<Me.length;oe++)Ae[Me.charCodeAt(oe)]=oe+128;return ne&&ne.set(ee,Ae),Ae}}}(b);if(S!==void 0){for(var E=[],L=0;L<v.length;L++){var j=v.charCodeAt(L);if(128<=j&&(j=S[j])===void 0)return;E[L]=j}return E}},Ee.MACSTRING=function(v,b){var S=de.MACSTRING(v,b);return S!==void 0?S.length:0},de.VARDELTAS=function(v){for(var b=0,S=[];b<v.length;){var E=v[b];b=E===0?se(v,b,S):-128<=E&&E<=127?te(v,b,S):be(v,b,S)}return S},de.INDEX=function(v){for(var b=1,S=[b],E=[],L=0;L<v.length;L+=1){var j=de.OBJECT(v[L]);Array.prototype.push.apply(E,j),b+=j.length,S.push(b)}if(E.length===0)return[0,0];for(var U=[],Y=1+Math.floor(Math.log(b)/Math.log(2))/8|0,ee=[void 0,de.BYTE,de.USHORT,de.UINT24,de.ULONG][Y],fe=0;fe<S.length;fe+=1){var Me=ee(S[fe]);Array.prototype.push.apply(U,Me)}return Array.prototype.concat(de.Card16(v.length),de.OffSize(Y),U,E)},Ee.INDEX=function(v){return de.INDEX(v).length},de.DICT=function(v){for(var b=[],S=Object.keys(v),E=S.length,L=0;L<E;L+=1){var j=parseInt(S[L],0),U=v[j];b=(b=b.concat(de.OPERAND(U.value,U.type))).concat(de.OPERATOR(j))}return b},Ee.DICT=function(v){return de.DICT(v).length},de.OPERATOR=function(v){return v<1200?[v]:[12,v-1200]},de.OPERAND=function(v,b){var S=[];if(Array.isArray(b))for(var E=0;E<b.length;E+=1)ge.argument(v.length===b.length,"Not enough arguments given for type"+b),S=S.concat(de.OPERAND(v[E],b[E]));else if(b==="SID")S=S.concat(de.NUMBER(v));else if(b==="offset")S=S.concat(de.NUMBER32(v));else if(b==="number")S=S.concat(de.NUMBER(v));else{if(b!=="real")throw new Error("Unknown operand type "+b);S=S.concat(de.REAL(v))}return S},de.OP=de.BYTE,Ee.OP=Ee.BYTE;var $=typeof WeakMap=="function"&&new WeakMap;function me(v,b,S){for(var E=0;E<b.length;E+=1){var L=b[E];this[L.name]=L.value}if(this.tableName=v,this.fields=b,S)for(var j=Object.keys(S),U=0;U<j.length;U+=1){var Y=j[U],ee=S[Y];this[Y]!==void 0&&(this[Y]=ee)}}function ue(v,b,S){S===void 0&&(S=b.length);var E=new Array(b.length+1);E[0]={name:v+"Count",type:"USHORT",value:S};for(var L=0;L<b.length;L++)E[L+1]={name:v+L,type:"USHORT",value:b[L]};return E}function B(v,b,S){var E=b.length,L=new Array(E+1);L[0]={name:v+"Count",type:"USHORT",value:E};for(var j=0;j<E;j++)L[j+1]={name:v+j,type:"TABLE",value:S(b[j],j)};return L}function W(v,b,S){var E=b.length,L=[];L[0]={name:v+"Count",type:"USHORT",value:E};for(var j=0;j<E;j++)L=L.concat(S(b[j],j));return L}function ye(v){v.format===1?me.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ue("glyph",v.glyphs))):ge.assert(!1,"Can't create coverage table format 2 yet.")}function xe(v){me.call(this,"scriptListTable",W("scriptRecord",v,function(b,S){var E=b.script,L=E.defaultLangSys;return ge.assert(!!L,"Unable to write GSUB: script "+b.tag+" has no default language system."),[{name:"scriptTag"+S,type:"TAG",value:b.tag},{name:"script"+S,type:"TABLE",value:new me("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new me("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:L.reqFeatureIndex}].concat(ue("featureIndex",L.featureIndexes)))}].concat(W("langSys",E.langSysRecords,function(j,U){var Y=j.langSys;return[{name:"langSysTag"+U,type:"TAG",value:j.tag},{name:"langSys"+U,type:"TABLE",value:new me("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Y.reqFeatureIndex}].concat(ue("featureIndex",Y.featureIndexes)))}]})))}]}))}function Re(v){me.call(this,"featureListTable",W("featureRecord",v,function(b,S){var E=b.feature;return[{name:"featureTag"+S,type:"TAG",value:b.tag},{name:"feature"+S,type:"TABLE",value:new me("featureTable",[{name:"featureParams",type:"USHORT",value:E.featureParams}].concat(ue("lookupListIndex",E.lookupListIndexes)))}]}))}function Ve(v,b){me.call(this,"lookupListTable",B("lookup",v,function(S){var E=b[S.lookupType];return ge.assert(!!E,"Unable to write GSUB lookup type "+S.lookupType+" tables."),new me("lookupTable",[{name:"lookupType",type:"USHORT",value:S.lookupType},{name:"lookupFlag",type:"USHORT",value:S.lookupFlag}].concat(B("subtable",S.subtables,E)))}))}de.CHARSTRING=function(v){if($){var b=$.get(v);if(b!==void 0)return b}for(var S=[],E=v.length,L=0;L<E;L+=1){var j=v[L];S=S.concat(de[j.type](j.value))}return $&&$.set(v,S),S},Ee.CHARSTRING=function(v){return de.CHARSTRING(v).length},de.OBJECT=function(v){var b=de[v.type];return ge.argument(b!==void 0,"No encoding function for type "+v.type),b(v.value)},Ee.OBJECT=function(v){var b=Ee[v.type];return ge.argument(b!==void 0,"No sizeOf function for type "+v.type),b(v.value)},de.TABLE=function(v){for(var b=[],S=v.fields.length,E=[],L=[],j=0;j<S;j+=1){var U=v.fields[j],Y=de[U.type];ge.argument(Y!==void 0,"No encoding function for field type "+U.type+" ("+U.name+")");var ee=v[U.name];ee===void 0&&(ee=U.value);var fe=Y(ee);U.type==="TABLE"?(L.push(b.length),b=b.concat([0,0]),E.push(fe)):b=b.concat(fe)}for(var Me=0;Me<E.length;Me+=1){var Ae=L[Me],oe=b.length;ge.argument(oe<65536,"Table "+v.tableName+" too big."),b[Ae]=oe>>8,b[Ae+1]=255&oe,b=b.concat(E[Me])}return b},Ee.TABLE=function(v){for(var b=0,S=v.fields.length,E=0;E<S;E+=1){var L=v.fields[E],j=Ee[L.type];ge.argument(j!==void 0,"No sizeOf function for field type "+L.type+" ("+L.name+")");var U=v[L.name];U===void 0&&(U=L.value),b+=j(U),L.type==="TABLE"&&(b+=2)}return b},de.RECORD=de.TABLE,Ee.RECORD=Ee.TABLE,de.LITERAL=function(v){return v},Ee.LITERAL=function(v){return v.length},me.prototype.encode=function(){return de.TABLE(this)},me.prototype.sizeOf=function(){return Ee.TABLE(this)};var Pe={Table:me,Record:me,Coverage:(ye.prototype=Object.create(me.prototype)).constructor=ye,ScriptList:(xe.prototype=Object.create(me.prototype)).constructor=xe,FeatureList:(Re.prototype=Object.create(me.prototype)).constructor=Re,LookupList:(Ve.prototype=Object.create(me.prototype)).constructor=Ve,ushortList:ue,tableList:B,recordList:W};function Ke(v,b){return v.getUint8(b)}function $e(v,b){return v.getUint16(b,!1)}function Le(v,b){return v.getUint32(b,!1)}function ae(v,b){return v.getInt16(b,!1)+v.getUint16(b+2,!1)/65535}var De={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ie(v,b){this.data=v,this.offset=b,this.relativeOffset=0}ie.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},ie.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},ie.prototype.parseCard8=ie.prototype.parseByte,ie.prototype.parseCard16=ie.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},ie.prototype.parseSID=ie.prototype.parseUShort,ie.prototype.parseOffset16=ie.prototype.parseUShort,ie.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},ie.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},ie.prototype.parseOffset32=ie.prototype.parseULong=function(){var v=Le(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},ie.prototype.parseFixed=function(){var v=ae(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},ie.prototype.parseString=function(v){var b=this.data,S=this.offset+this.relativeOffset,E="";this.relativeOffset+=v;for(var L=0;L<v;L++)E+=String.fromCharCode(b.getUint8(S+L));return E},ie.prototype.parseTag=function(){return this.parseString(4)},ie.prototype.parseLongDateTime=function(){var v=Le(this.data,this.offset+this.relativeOffset+4);return v-=2082844800,this.relativeOffset+=8,v},ie.prototype.parseVersion=function(v){var b=$e(this.data,this.offset+this.relativeOffset),S=$e(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,v===void 0&&(v=4096),b+S/v/10},ie.prototype.skip=function(v,b){b===void 0&&(b=1),this.relativeOffset+=De[v]*b},ie.prototype.parseULongList=function(v){v===void 0&&(v=this.parseULong());for(var b=new Array(v),S=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)b[L]=S.getUint32(E),E+=4;return this.relativeOffset+=4*v,b},ie.prototype.parseOffset16List=ie.prototype.parseUShortList=function(v){v===void 0&&(v=this.parseUShort());for(var b=new Array(v),S=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)b[L]=S.getUint16(E),E+=2;return this.relativeOffset+=2*v,b},ie.prototype.parseShortList=function(v){for(var b=new Array(v),S=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)b[L]=S.getInt16(E),E+=2;return this.relativeOffset+=2*v,b},ie.prototype.parseByteList=function(v){for(var b=new Array(v),S=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)b[L]=S.getUint8(E++);return this.relativeOffset+=v,b},ie.prototype.parseList=function(v,b){b||(b=v,v=this.parseUShort());for(var S=new Array(v),E=0;E<v;E++)S[E]=b.call(this);return S},ie.prototype.parseList32=function(v,b){b||(b=v,v=this.parseULong());for(var S=new Array(v),E=0;E<v;E++)S[E]=b.call(this);return S},ie.prototype.parseRecordList=function(v,b){b||(b=v,v=this.parseUShort());for(var S=new Array(v),E=Object.keys(b),L=0;L<v;L++){for(var j={},U=0;U<E.length;U++){var Y=E[U],ee=b[Y];j[Y]=ee.call(this)}S[L]=j}return S},ie.prototype.parseRecordList32=function(v,b){b||(b=v,v=this.parseULong());for(var S=new Array(v),E=Object.keys(b),L=0;L<v;L++){for(var j={},U=0;U<E.length;U++){var Y=E[U],ee=b[Y];j[Y]=ee.call(this)}S[L]=j}return S},ie.prototype.parseStruct=function(v){if(typeof v=="function")return v.call(this);for(var b=Object.keys(v),S={},E=0;E<b.length;E++){var L=b[E],j=v[L];S[L]=j.call(this)}return S},ie.prototype.parseValueRecord=function(v){if(v===void 0&&(v=this.parseUShort()),v!==0){var b={};return 1&v&&(b.xPlacement=this.parseShort()),2&v&&(b.yPlacement=this.parseShort()),4&v&&(b.xAdvance=this.parseShort()),8&v&&(b.yAdvance=this.parseShort()),16&v&&(b.xPlaDevice=void 0,this.parseShort()),32&v&&(b.yPlaDevice=void 0,this.parseShort()),64&v&&(b.xAdvDevice=void 0,this.parseShort()),128&v&&(b.yAdvDevice=void 0,this.parseShort()),b}},ie.prototype.parseValueRecordList=function(){for(var v=this.parseUShort(),b=this.parseUShort(),S=new Array(b),E=0;E<b;E++)S[E]=this.parseValueRecord(v);return S},ie.prototype.parsePointer=function(v){var b=this.parseOffset16();if(0<b)return new ie(this.data,this.offset+b).parseStruct(v)},ie.prototype.parsePointer32=function(v){var b=this.parseOffset32();if(0<b)return new ie(this.data,this.offset+b).parseStruct(v)},ie.prototype.parseListOfLists=function(v){for(var b=this.parseOffset16List(),S=b.length,E=this.relativeOffset,L=new Array(S),j=0;j<S;j++){var U=b[j];if(U!==0)if(this.relativeOffset=U,v){for(var Y=this.parseOffset16List(),ee=new Array(Y.length),fe=0;fe<Y.length;fe++)this.relativeOffset=U+Y[fe],ee[fe]=v.call(this);L[j]=ee}else L[j]=this.parseUShortList();else L[j]=void 0}return this.relativeOffset=E,L},ie.prototype.parseCoverage=function(){var v=this.offset+this.relativeOffset,b=this.parseUShort(),S=this.parseUShort();if(b===1)return{format:1,glyphs:this.parseUShortList(S)};if(b!==2)throw new Error("0x"+v.toString(16)+": Coverage format must be 1 or 2.");for(var E=new Array(S),L=0;L<S;L++)E[L]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:E}},ie.prototype.parseClassDef=function(){var v=this.offset+this.relativeOffset,b=this.parseUShort();if(b===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(b===2)return{format:2,ranges:this.parseRecordList({start:ie.uShort,end:ie.uShort,classId:ie.uShort})};throw new Error("0x"+v.toString(16)+": ClassDef format must be 1 or 2.")},ie.list=function(v,b){return function(){return this.parseList(v,b)}},ie.list32=function(v,b){return function(){return this.parseList32(v,b)}},ie.recordList=function(v,b){return function(){return this.parseRecordList(v,b)}},ie.recordList32=function(v,b){return function(){return this.parseRecordList32(v,b)}},ie.pointer=function(v){return function(){return this.parsePointer(v)}},ie.pointer32=function(v){return function(){return this.parsePointer32(v)}},ie.tag=ie.prototype.parseTag,ie.byte=ie.prototype.parseByte,ie.uShort=ie.offset16=ie.prototype.parseUShort,ie.uShortList=ie.prototype.parseUShortList,ie.uLong=ie.offset32=ie.prototype.parseULong,ie.uLongList=ie.prototype.parseULongList,ie.struct=ie.prototype.parseStruct,ie.coverage=ie.prototype.parseCoverage,ie.classDef=ie.prototype.parseClassDef;var Fe={reserved:ie.uShort,reqFeatureIndex:ie.uShort,featureIndexes:ie.uShortList};ie.prototype.parseScriptList=function(){return this.parsePointer(ie.recordList({tag:ie.tag,script:ie.pointer({defaultLangSys:ie.pointer(Fe),langSysRecords:ie.recordList({tag:ie.tag,langSys:ie.pointer(Fe)})})}))||[]},ie.prototype.parseFeatureList=function(){return this.parsePointer(ie.recordList({tag:ie.tag,feature:ie.pointer({featureParams:ie.offset16,lookupListIndexes:ie.uShortList})}))||[]},ie.prototype.parseLookupList=function(v){return this.parsePointer(ie.list(ie.pointer(function(){var b=this.parseUShort();ge.argument(1<=b&&b<=9,"GPOS/GSUB lookup type "+b+" unknown.");var S=this.parseUShort(),E=16&S;return{lookupType:b,lookupFlag:S,subtables:this.parseList(ie.pointer(v[b])),markFilteringSet:E?this.parseUShort():void 0}})))||[]},ie.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var v=this.parseUShort(),b=this.parseUShort();return ge.argument(v===1&&b<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ie.offset32,featureTableSubstitutionOffset:ie.offset32})})||[]};var Ce={getByte:Ke,getCard8:Ke,getUShort:$e,getCard16:$e,getShort:function(v,b){return v.getInt16(b,!1)},getULong:Le,getFixed:ae,getTag:function(v,b){for(var S="",E=b;E<b+4;E+=1)S+=String.fromCharCode(v.getInt8(E));return S},getOffset:function(v,b,S){for(var E=0,L=0;L<S;L+=1)E<<=8,E+=v.getUint8(b+L);return E},getBytes:function(v,b,S){for(var E=[],L=b;L<S;L+=1)E.push(v.getUint8(L));return E},bytesToString:function(v){for(var b="",S=0;S<v.length;S+=1)b+=String.fromCharCode(v[S]);return b},Parser:ie},z={parse:function(v,b){var S={};S.version=Ce.getUShort(v,b),ge.argument(S.version===0,"cmap table version should be 0."),S.numTables=Ce.getUShort(v,b+2);for(var E=-1,L=S.numTables-1;0<=L;--L){var j=Ce.getUShort(v,b+4+8*L),U=Ce.getUShort(v,b+4+8*L+2);if(j===3&&(U===0||U===1||U===10)||j===0&&(U===0||U===1||U===2||U===3||U===4)){E=Ce.getULong(v,b+4+8*L+4);break}}if(E===-1)throw new Error("No valid cmap sub-tables found.");var Y=new Ce.Parser(v,b+E);if(S.format=Y.parseUShort(),S.format===12)(function(ee,fe){var Me;fe.parseUShort(),ee.length=fe.parseULong(),ee.language=fe.parseULong(),ee.groupCount=Me=fe.parseULong(),ee.glyphIndexMap={};for(var Ae=0;Ae<Me;Ae+=1)for(var oe=fe.parseULong(),tt=fe.parseULong(),Je=fe.parseULong(),He=oe;He<=tt;He+=1)ee.glyphIndexMap[He]=Je,Je++})(S,Y);else{if(S.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+S.format+").");(function(ee,fe,Me,Ae,oe){var tt;ee.length=fe.parseUShort(),ee.language=fe.parseUShort(),ee.segCount=tt=fe.parseUShort()>>1,fe.skip("uShort",3),ee.glyphIndexMap={};for(var Je=new Ce.Parser(Me,Ae+oe+14),He=new Ce.Parser(Me,Ae+oe+16+2*tt),Oe=new Ce.Parser(Me,Ae+oe+16+4*tt),Ge=new Ce.Parser(Me,Ae+oe+16+6*tt),lt=Ae+oe+16+8*tt,ot=0;ot<tt-1;ot+=1)for(var Et=void 0,pt=Je.parseUShort(),vt=He.parseUShort(),$t=Oe.parseShort(),Ct=Ge.parseUShort(),At=vt;At<=pt;At+=1)Ct!==0?(lt=Ge.offset+Ge.relativeOffset-2,lt+=Ct,lt+=2*(At-vt),(Et=Ce.getUShort(Me,lt))!==0&&(Et=Et+$t&65535)):Et=At+$t&65535,ee.glyphIndexMap[At]=Et})(S,Y,v,b,E)}return S},make:function(v){var b,S=!0;for(b=v.length-1;0<b;--b)if(65535<v.get(b).unicode){console.log("Adding CMAP format 12 (needed!)"),S=!1;break}var E=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:S?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:S?12:20}];S||(E=E.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),E=E.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var L,j,U,Y=new Pe.Table("cmap",E);for(Y.segments=[],b=0;b<v.length;b+=1){for(var ee=v.get(b),fe=0;fe<ee.unicodes.length;fe+=1)L=Y,j=ee.unicodes[fe],U=b,L.segments.push({end:j,start:j,delta:-(j-U),offset:0,glyphIndex:U});Y.segments=Y.segments.sort(function(Et,pt){return Et.start-pt.start})}Y.segments.push({end:65535,start:65535,delta:1,offset:0});var Me=Y.segments.length,Ae=0,oe=[],tt=[],Je=[],He=[],Oe=[],Ge=[];for(b=0;b<Me;b+=1){var lt=Y.segments[b];lt.end<=65535&&lt.start<=65535?(oe=oe.concat({name:"end_"+b,type:"USHORT",value:lt.end}),tt=tt.concat({name:"start_"+b,type:"USHORT",value:lt.start}),Je=Je.concat({name:"idDelta_"+b,type:"SHORT",value:lt.delta}),He=He.concat({name:"idRangeOffset_"+b,type:"USHORT",value:lt.offset}),lt.glyphId!==void 0&&(Oe=Oe.concat({name:"glyph_"+b,type:"USHORT",value:lt.glyphId}))):Ae+=1,S||lt.glyphIndex===void 0||(Ge=(Ge=(Ge=Ge.concat({name:"cmap12Start_"+b,type:"ULONG",value:lt.start})).concat({name:"cmap12End_"+b,type:"ULONG",value:lt.end})).concat({name:"cmap12Glyph_"+b,type:"ULONG",value:lt.glyphIndex}))}if(Y.segCountX2=2*(Me-Ae),Y.searchRange=2*Math.pow(2,Math.floor(Math.log(Me-Ae)/Math.log(2))),Y.entrySelector=Math.log(Y.searchRange/2)/Math.log(2),Y.rangeShift=Y.segCountX2-Y.searchRange,Y.fields=Y.fields.concat(oe),Y.fields.push({name:"reservedPad",type:"USHORT",value:0}),Y.fields=Y.fields.concat(tt),Y.fields=Y.fields.concat(Je),Y.fields=Y.fields.concat(He),Y.fields=Y.fields.concat(Oe),Y.cmap4Length=14+2*oe.length+2+2*tt.length+2*Je.length+2*He.length+2*Oe.length,!S){var ot=16+4*Ge.length;Y.cmap12Offset=20+Y.cmap4Length,Y.fields=Y.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ot},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ge.length/3}]),Y.fields=Y.fields.concat(Ge)}return Y}},Z=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],H=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],J=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],he=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Te(v){this.font=v}function Ie(v){this.cmap=v}function Xe(v,b){this.encoding=v,this.charset=b}function Se(v){switch(v.version){case 1:this.names=he.slice();break;case 2:this.names=new Array(v.numberOfGlyphs);for(var b=0;b<v.numberOfGlyphs;b++)v.glyphNameIndex[b]<he.length?this.names[b]=he[v.glyphNameIndex[b]]:this.names[b]=v.names[v.glyphNameIndex[b]-he.length];break;case 2.5:this.names=new Array(v.numberOfGlyphs);for(var S=0;S<v.numberOfGlyphs;S++)this.names[S]=he[S+v.glyphNameIndex[S]];break;case 3:default:this.names=[]}}Te.prototype.charToGlyphIndex=function(v){var b=v.codePointAt(0),S=this.font.glyphs;if(S){for(var E=0;E<S.length;E+=1)for(var L=S.get(E),j=0;j<L.unicodes.length;j+=1)if(L.unicodes[j]===b)return E}return null},Ie.prototype.charToGlyphIndex=function(v){return this.cmap.glyphIndexMap[v.codePointAt(0)]||0},Xe.prototype.charToGlyphIndex=function(v){var b=v.codePointAt(0),S=this.encoding[b];return this.charset.indexOf(S)},Se.prototype.nameToGlyphIndex=function(v){return this.names.indexOf(v)},Se.prototype.glyphIndexToName=function(v){return this.names[v]};var Qe={line:function(v,b,S,E,L){v.beginPath(),v.moveTo(b,S),v.lineTo(E,L),v.stroke()}};function it(v){this.bindConstructorValues(v)}function St(v,b,S){Object.defineProperty(v,b,{get:function(){return v.path,v[S]},set:function(E){v[S]=E},enumerable:!0,configurable:!0})}function xt(v,b){if(this.font=v,this.glyphs={},Array.isArray(b))for(var S=0;S<b.length;S++)this.glyphs[S]=b[S];this.length=b&&b.length||0}it.prototype.bindConstructorValues=function(v){var b,S;this.index=v.index||0,this.name=v.name||null,this.unicode=v.unicode||void 0,this.unicodes=v.unicodes||v.unicode!==void 0?[v.unicode]:[],v.xMin&&(this.xMin=v.xMin),v.yMin&&(this.yMin=v.yMin),v.xMax&&(this.xMax=v.xMax),v.yMax&&(this.yMax=v.yMax),v.advanceWidth&&(this.advanceWidth=v.advanceWidth),Object.defineProperty(this,"path",(b=v.path,S=b||new K,{configurable:!0,get:function(){return typeof S=="function"&&(S=S()),S},set:function(E){S=E}}))},it.prototype.addUnicode=function(v){this.unicodes.length===0&&(this.unicode=v),this.unicodes.push(v)},it.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},it.prototype.getPath=function(v,b,S,E,L){var j,U;v=v!==void 0?v:0,b=b!==void 0?b:0,S=S!==void 0?S:72;var Y=(E=E||{}).xScale,ee=E.yScale;if(E.hinting&&L&&L.hinting&&(U=this.path&&L.hinting.exec(this,S)),U)j=L.hinting.getCommands(U),v=Math.round(v),b=Math.round(b),Y=ee=1;else{j=this.path.commands;var fe=1/this.path.unitsPerEm*S;Y===void 0&&(Y=fe),ee===void 0&&(ee=fe)}for(var Me=new K,Ae=0;Ae<j.length;Ae+=1){var oe=j[Ae];oe.type==="M"?Me.moveTo(v+oe.x*Y,b+-oe.y*ee):oe.type==="L"?Me.lineTo(v+oe.x*Y,b+-oe.y*ee):oe.type==="Q"?Me.quadraticCurveTo(v+oe.x1*Y,b+-oe.y1*ee,v+oe.x*Y,b+-oe.y*ee):oe.type==="C"?Me.curveTo(v+oe.x1*Y,b+-oe.y1*ee,v+oe.x2*Y,b+-oe.y2*ee,v+oe.x*Y,b+-oe.y*ee):oe.type==="Z"&&Me.closePath()}return Me},it.prototype.getContours=function(){if(this.points===void 0)return[];for(var v=[],b=[],S=0;S<this.points.length;S+=1){var E=this.points[S];b.push(E),E.lastPointOfContour&&(v.push(b),b=[])}return ge.argument(b.length===0,"There are still points left in the current contour."),v},it.prototype.getMetrics=function(){for(var v=this.path.commands,b=[],S=[],E=0;E<v.length;E+=1){var L=v[E];L.type!=="Z"&&(b.push(L.x),S.push(L.y)),L.type!=="Q"&&L.type!=="C"||(b.push(L.x1),S.push(L.y1)),L.type==="C"&&(b.push(L.x2),S.push(L.y2))}var j={xMin:Math.min.apply(null,b),yMin:Math.min.apply(null,S),xMax:Math.max.apply(null,b),yMax:Math.max.apply(null,S),leftSideBearing:this.leftSideBearing};return isFinite(j.xMin)||(j.xMin=0),isFinite(j.xMax)||(j.xMax=this.advanceWidth),isFinite(j.yMin)||(j.yMin=0),isFinite(j.yMax)||(j.yMax=0),j.rightSideBearing=this.advanceWidth-j.leftSideBearing-(j.xMax-j.xMin),j},it.prototype.draw=function(v,b,S,E,L){this.getPath(b,S,E,L).draw(v)},it.prototype.drawPoints=function(v,b,S,E){function L(Ae,oe,tt,Je){var He=2*Math.PI;v.beginPath();for(var Oe=0;Oe<Ae.length;Oe+=1)v.moveTo(oe+Ae[Oe].x*Je,tt+Ae[Oe].y*Je),v.arc(oe+Ae[Oe].x*Je,tt+Ae[Oe].y*Je,2,0,He,!1);v.closePath(),v.fill()}b=b!==void 0?b:0,S=S!==void 0?S:0,E=E!==void 0?E:24;for(var j=1/this.path.unitsPerEm*E,U=[],Y=[],ee=this.path,fe=0;fe<ee.commands.length;fe+=1){var Me=ee.commands[fe];Me.x!==void 0&&U.push({x:Me.x,y:-Me.y}),Me.x1!==void 0&&Y.push({x:Me.x1,y:-Me.y1}),Me.x2!==void 0&&Y.push({x:Me.x2,y:-Me.y2})}v.fillStyle="blue",L(U,b,S,j),v.fillStyle="red",L(Y,b,S,j)},it.prototype.drawMetrics=function(v,b,S,E){var L;b=b!==void 0?b:0,S=S!==void 0?S:0,E=E!==void 0?E:24,L=1/this.path.unitsPerEm*E,v.lineWidth=1,v.strokeStyle="black",Qe.line(v,b,-1e4,b,1e4),Qe.line(v,-1e4,S,1e4,S);var j=this.xMin||0,U=this.yMin||0,Y=this.xMax||0,ee=this.yMax||0,fe=this.advanceWidth||0;v.strokeStyle="blue",Qe.line(v,b+j*L,-1e4,b+j*L,1e4),Qe.line(v,b+Y*L,-1e4,b+Y*L,1e4),Qe.line(v,-1e4,S+-U*L,1e4,S+-U*L),Qe.line(v,-1e4,S+-ee*L,1e4,S+-ee*L),v.strokeStyle="green",Qe.line(v,b+fe*L,-1e4,b+fe*L,1e4)},xt.prototype.get=function(v){return typeof this.glyphs[v]=="function"&&(this.glyphs[v]=this.glyphs[v]()),this.glyphs[v]},xt.prototype.push=function(v,b){this.glyphs[v]=b,this.length++};var ht={GlyphSet:xt,glyphLoader:function(v,b){return new it({index:b,font:v})},ttfGlyphLoader:function(v,b,S,E,L,j){return function(){var U=new it({index:b,font:v});return U.path=function(){S(U,E,L);var Y=j(v.glyphs,U);return Y.unitsPerEm=v.unitsPerEm,Y},St(U,"xMin","_xMin"),St(U,"xMax","_xMax"),St(U,"yMin","_yMin"),St(U,"yMax","_yMax"),U}},cffGlyphLoader:function(v,b,S,E){return function(){var L=new it({index:b,font:v});return L.path=function(){var j=S(v,L,E);return j.unitsPerEm=v.unitsPerEm,j},L}}};function _t(v,b){if(v===b)return!0;if(Array.isArray(v)&&Array.isArray(b)){if(v.length!==b.length)return!1;for(var S=0;S<v.length;S+=1)if(!_t(v[S],b[S]))return!1;return!0}return!1}function Tt(v){return v.length<1240?107:v.length<33900?1131:32768}function lr(v,b,S){var E,L,j=[],U=[],Y=Ce.getCard16(v,b);if(Y!==0){var ee=Ce.getByte(v,b+2);E=b+(Y+1)*ee+2;for(var fe=b+3,Me=0;Me<Y+1;Me+=1)j.push(Ce.getOffset(v,fe,ee)),fe+=ee;L=E+j[Y]}else L=b+2;for(var Ae=0;Ae<j.length-1;Ae+=1){var oe=Ce.getBytes(v,E+j[Ae],E+j[Ae+1]);S&&(oe=S(oe)),U.push(oe)}return{objects:U,startOffset:b,endOffset:L}}function Nr(v,b){if(b===28)return v.parseByte()<<8|v.parseByte();if(b===29)return v.parseByte()<<24|v.parseByte()<<16|v.parseByte()<<8|v.parseByte();if(b===30)return function(S){for(var E="",L=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var j=S.parseByte(),U=j>>4,Y=15&j;if(U==15||(E+=L[U],Y==15))break;E+=L[Y]}return parseFloat(E)}(v);if(32<=b&&b<=246)return b-139;if(247<=b&&b<=250)return 256*(b-247)+v.parseByte()+108;if(251<=b&&b<=254)return 256*-(b-251)-v.parseByte()-108;throw new Error("Invalid b0 "+b)}function qr(v,b,S){b=b!==void 0?b:0;var E=new Ce.Parser(v,b),L=[],j=[];for(S=S!==void 0?S:v.length;E.relativeOffset<S;){var U=E.parseByte();U<=21?(U===12&&(U=1200+E.parseByte()),L.push([U,j]),j=[]):j.push(Nr(E,U))}return function(Y){for(var ee={},fe=0;fe<Y.length;fe+=1){var Me=Y[fe][0],Ae=Y[fe][1],oe=void 0;if(oe=Ae.length===1?Ae[0]:Ae,ee.hasOwnProperty(Me)&&!isNaN(ee[Me]))throw new Error("Object "+ee+" already has key "+Me);ee[Me]=oe}return ee}(L)}function Tr(v,b){return b=b<=390?Z[b]:v[b-391]}function nn(v,b,S){for(var E,L={},j=0;j<b.length;j+=1){var U=b[j];if(Array.isArray(U.type)){var Y=[];Y.length=U.type.length;for(var ee=0;ee<U.type.length;ee++)(E=v[U.op]!==void 0?v[U.op][ee]:void 0)===void 0&&(E=U.value!==void 0&&U.value[ee]!==void 0?U.value[ee]:null),U.type[ee]==="SID"&&(E=Tr(S,E)),Y[ee]=E;L[U.name]=Y}else(E=v[U.op])===void 0&&(E=U.value!==void 0?U.value:null),U.type==="SID"&&(E=Tr(S,E)),L[U.name]=E}return L}var ve=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],ke=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function We(v,b,S,E){return nn(qr(v,b,S),ke,E)}function Be(v,b,S,E){for(var L,j,U=[],Y=0;Y<S.length;Y+=1){var ee=new DataView(new Uint8Array(S[Y]).buffer),fe=(j=E,nn(qr(L=ee,0,L.byteLength),ve,j));fe._subrs=[],fe._subrsBias=0;var Me=fe.private[0],Ae=fe.private[1];if(Me!==0&&Ae!==0){var oe=We(v,Ae+b,Me,E);if(fe._defaultWidthX=oe.defaultWidthX,fe._nominalWidthX=oe.nominalWidthX,oe.subrs!==0){var tt=lr(v,Ae+oe.subrs+b);fe._subrs=tt.objects,fe._subrsBias=Tt(fe._subrs)}fe._privateDict=oe}U.push(fe)}return U}function Ye(v,b,S){var E,L,j,U,Y,ee,fe,Me,Ae=new K,oe=[],tt=0,Je=!1,He=!1,Oe=0,Ge=0;if(v.isCIDFont){var lt=v.tables.cff.topDict._fdSelect[b.index],ot=v.tables.cff.topDict._fdArray[lt];Y=ot._subrs,ee=ot._subrsBias,fe=ot._defaultWidthX,Me=ot._nominalWidthX}else Y=v.tables.cff.topDict._subrs,ee=v.tables.cff.topDict._subrsBias,fe=v.tables.cff.topDict._defaultWidthX,Me=v.tables.cff.topDict._nominalWidthX;var Et=fe;function pt($t,Ct){He&&Ae.closePath(),Ae.moveTo($t,Ct),He=!0}function vt(){oe.length%2==0||Je||(Et=oe.shift()+Me),tt+=oe.length>>1,oe.length=0,Je=!0}return function $t(Ct){for(var At,Rt,Nt,Dt,Jt,Ft,jt,Kt,Gt,tr,Ot,rr,Ht=0;Ht<Ct.length;){var qt=Ct[Ht];switch(Ht+=1,qt){case 1:case 3:vt();break;case 4:1<oe.length&&!Je&&(Et=oe.shift()+Me,Je=!0),Ge+=oe.pop(),pt(Oe,Ge);break;case 5:for(;0<oe.length;)Oe+=oe.shift(),Ge+=oe.shift(),Ae.lineTo(Oe,Ge);break;case 6:for(;0<oe.length&&(Oe+=oe.shift(),Ae.lineTo(Oe,Ge),oe.length!==0);)Ge+=oe.shift(),Ae.lineTo(Oe,Ge);break;case 7:for(;0<oe.length&&(Ge+=oe.shift(),Ae.lineTo(Oe,Ge),oe.length!==0);)Oe+=oe.shift(),Ae.lineTo(Oe,Ge);break;case 8:for(;0<oe.length;)E=Oe+oe.shift(),L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),Oe=j+oe.shift(),Ge=U+oe.shift(),Ae.curveTo(E,L,j,U,Oe,Ge);break;case 10:Jt=oe.pop()+ee,(Ft=Y[Jt])&&$t(Ft);break;case 11:return;case 12:switch(qt=Ct[Ht],Ht+=1,qt){case 35:E=Oe+oe.shift(),L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),jt=j+oe.shift(),Kt=U+oe.shift(),Gt=jt+oe.shift(),tr=Kt+oe.shift(),Ot=Gt+oe.shift(),rr=tr+oe.shift(),Oe=Ot+oe.shift(),Ge=rr+oe.shift(),oe.shift(),Ae.curveTo(E,L,j,U,jt,Kt),Ae.curveTo(Gt,tr,Ot,rr,Oe,Ge);break;case 34:E=Oe+oe.shift(),L=Ge,j=E+oe.shift(),U=L+oe.shift(),jt=j+oe.shift(),Kt=U,Gt=jt+oe.shift(),tr=U,Ot=Gt+oe.shift(),rr=Ge,Oe=Ot+oe.shift(),Ae.curveTo(E,L,j,U,jt,Kt),Ae.curveTo(Gt,tr,Ot,rr,Oe,Ge);break;case 36:E=Oe+oe.shift(),L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),jt=j+oe.shift(),Kt=U,Gt=jt+oe.shift(),tr=U,Ot=Gt+oe.shift(),rr=tr+oe.shift(),Oe=Ot+oe.shift(),Ae.curveTo(E,L,j,U,jt,Kt),Ae.curveTo(Gt,tr,Ot,rr,Oe,Ge);break;case 37:E=Oe+oe.shift(),L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),jt=j+oe.shift(),Kt=U+oe.shift(),Gt=jt+oe.shift(),tr=Kt+oe.shift(),Ot=Gt+oe.shift(),rr=tr+oe.shift(),Math.abs(Ot-Oe)>Math.abs(rr-Ge)?Oe=Ot+oe.shift():Ge=rr+oe.shift(),Ae.curveTo(E,L,j,U,jt,Kt),Ae.curveTo(Gt,tr,Ot,rr,Oe,Ge);break;default:console.log("Glyph "+b.index+": unknown operator 1200"+qt),oe.length=0}break;case 14:0<oe.length&&!Je&&(Et=oe.shift()+Me,Je=!0),He&&(Ae.closePath(),He=!1);break;case 18:vt();break;case 19:case 20:vt(),Ht+=tt+7>>3;break;case 21:2<oe.length&&!Je&&(Et=oe.shift()+Me,Je=!0),Ge+=oe.pop(),pt(Oe+=oe.pop(),Ge);break;case 22:1<oe.length&&!Je&&(Et=oe.shift()+Me,Je=!0),pt(Oe+=oe.pop(),Ge);break;case 23:vt();break;case 24:for(;2<oe.length;)E=Oe+oe.shift(),L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),Oe=j+oe.shift(),Ge=U+oe.shift(),Ae.curveTo(E,L,j,U,Oe,Ge);Oe+=oe.shift(),Ge+=oe.shift(),Ae.lineTo(Oe,Ge);break;case 25:for(;6<oe.length;)Oe+=oe.shift(),Ge+=oe.shift(),Ae.lineTo(Oe,Ge);E=Oe+oe.shift(),L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),Oe=j+oe.shift(),Ge=U+oe.shift(),Ae.curveTo(E,L,j,U,Oe,Ge);break;case 26:for(oe.length%2&&(Oe+=oe.shift());0<oe.length;)E=Oe,L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),Oe=j,Ge=U+oe.shift(),Ae.curveTo(E,L,j,U,Oe,Ge);break;case 27:for(oe.length%2&&(Ge+=oe.shift());0<oe.length;)E=Oe+oe.shift(),L=Ge,j=E+oe.shift(),U=L+oe.shift(),Oe=j+oe.shift(),Ge=U,Ae.curveTo(E,L,j,U,Oe,Ge);break;case 28:At=Ct[Ht],Rt=Ct[Ht+1],oe.push((At<<24|Rt<<16)>>16),Ht+=2;break;case 29:Jt=oe.pop()+v.gsubrsBias,(Ft=v.gsubrs[Jt])&&$t(Ft);break;case 30:for(;0<oe.length&&(E=Oe,L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),Oe=j+oe.shift(),Ge=U+(oe.length===1?oe.shift():0),Ae.curveTo(E,L,j,U,Oe,Ge),oe.length!==0);)E=Oe+oe.shift(),L=Ge,j=E+oe.shift(),U=L+oe.shift(),Ge=U+oe.shift(),Oe=j+(oe.length===1?oe.shift():0),Ae.curveTo(E,L,j,U,Oe,Ge);break;case 31:for(;0<oe.length&&(E=Oe+oe.shift(),L=Ge,j=E+oe.shift(),U=L+oe.shift(),Ge=U+oe.shift(),Oe=j+(oe.length===1?oe.shift():0),Ae.curveTo(E,L,j,U,Oe,Ge),oe.length!==0);)E=Oe,L=Ge+oe.shift(),j=E+oe.shift(),U=L+oe.shift(),Oe=j+oe.shift(),Ge=U+(oe.length===1?oe.shift():0),Ae.curveTo(E,L,j,U,Oe,Ge);break;default:qt<32?console.log("Glyph "+b.index+": unknown operator "+qt):qt<247?oe.push(qt-139):qt<251?(At=Ct[Ht],Ht+=1,oe.push(256*(qt-247)+At+108)):qt<255?(At=Ct[Ht],Ht+=1,oe.push(256*-(qt-251)-At-108)):(At=Ct[Ht],Rt=Ct[Ht+1],Nt=Ct[Ht+2],Dt=Ct[Ht+3],Ht+=4,oe.push((At<<24|Rt<<16|Nt<<8|Dt)/65536))}}}(S),b.advanceWidth=Et,Ae}function bt(v,b){var S,E=Z.indexOf(v);return 0<=E&&(S=E),0<=(E=b.indexOf(v))?S=E+Z.length:(S=Z.length+b.length,b.push(v)),S}function gt(v,b,S){for(var E={},L=0;L<v.length;L+=1){var j=v[L],U=b[j.name];U===void 0||_t(U,j.value)||(j.type==="SID"&&(U=bt(U,S)),E[j.op]={name:j.name,type:j.type,value:U})}return E}function ft(v,b){var S=new Pe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return S.dict=gt(ve,v,b),S}function le(v){var b=new Pe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return b.topDicts=[{name:"topDict_0",type:"TABLE",value:v}],b}function je(v){var b=[],S=v.path;b.push({name:"width",type:"NUMBER",value:v.advanceWidth});for(var E=0,L=0,j=0;j<S.commands.length;j+=1){var U=void 0,Y=void 0,ee=S.commands[j];if(ee.type==="Q"&&(ee={type:"C",x:ee.x,y:ee.y,x1:1/3*E+2/3*ee.x1,y1:1/3*L+2/3*ee.y1,x2:1/3*ee.x+2/3*ee.x1,y2:1/3*ee.y+2/3*ee.y1}),ee.type==="M")U=Math.round(ee.x-E),Y=Math.round(ee.y-L),b.push({name:"dx",type:"NUMBER",value:U}),b.push({name:"dy",type:"NUMBER",value:Y}),b.push({name:"rmoveto",type:"OP",value:21}),E=Math.round(ee.x),L=Math.round(ee.y);else if(ee.type==="L")U=Math.round(ee.x-E),Y=Math.round(ee.y-L),b.push({name:"dx",type:"NUMBER",value:U}),b.push({name:"dy",type:"NUMBER",value:Y}),b.push({name:"rlineto",type:"OP",value:5}),E=Math.round(ee.x),L=Math.round(ee.y);else if(ee.type==="C"){var fe=Math.round(ee.x1-E),Me=Math.round(ee.y1-L),Ae=Math.round(ee.x2-ee.x1),oe=Math.round(ee.y2-ee.y1);U=Math.round(ee.x-ee.x2),Y=Math.round(ee.y-ee.y2),b.push({name:"dx1",type:"NUMBER",value:fe}),b.push({name:"dy1",type:"NUMBER",value:Me}),b.push({name:"dx2",type:"NUMBER",value:Ae}),b.push({name:"dy2",type:"NUMBER",value:oe}),b.push({name:"dx",type:"NUMBER",value:U}),b.push({name:"dy",type:"NUMBER",value:Y}),b.push({name:"rrcurveto",type:"OP",value:8}),E=Math.round(ee.x),L=Math.round(ee.y)}}return b.push({name:"endchar",type:"OP",value:14}),b}var qe={parse:function(v,b,S){S.tables.cff={};var E,L,j,U=lr(v,(E=v,L=b,(j={}).formatMajor=Ce.getCard8(E,L),j.formatMinor=Ce.getCard8(E,L+1),j.size=Ce.getCard8(E,L+2),j.offsetSize=Ce.getCard8(E,L+3),j.startOffset=L,j.endOffset=L+4,j).endOffset,Ce.bytesToString),Y=lr(v,U.endOffset),ee=lr(v,Y.endOffset,Ce.bytesToString),fe=lr(v,ee.endOffset);S.gsubrs=fe.objects,S.gsubrsBias=Tt(S.gsubrs);var Me=Be(v,b,Y.objects,ee.objects);if(Me.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Me.length);var Ae=Me[0];if((S.tables.cff.topDict=Ae)._privateDict&&(S.defaultWidthX=Ae._privateDict.defaultWidthX,S.nominalWidthX=Ae._privateDict.nominalWidthX),Ae.ros[0]!==void 0&&Ae.ros[1]!==void 0&&(S.isCIDFont=!0),S.isCIDFont){var oe=Ae.fdArray,tt=Ae.fdSelect;if(oe===0||tt===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var Je=Be(v,b,lr(v,oe+=b).objects,ee.objects);Ae._fdArray=Je,tt+=b,Ae._fdSelect=function(vt,$t,Ct,At){var Rt,Nt=[],Dt=new Ce.Parser(vt,$t),Jt=Dt.parseCard8();if(Jt===0)for(var Ft=0;Ft<Ct;Ft++){if(At<=(Rt=Dt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Rt+" (FD count "+At+")");Nt.push(Rt)}else{if(Jt!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Jt);var jt,Kt=Dt.parseCard16(),Gt=Dt.parseCard16();if(Gt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Gt);for(var tr=0;tr<Kt;tr++){if(Rt=Dt.parseCard8(),jt=Dt.parseCard16(),At<=Rt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Rt+" (FD count "+At+")");if(Ct<jt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+jt);for(;Gt<jt;Gt++)Nt.push(Rt);Gt=jt}if(jt!==Ct)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+jt)}return Nt}(v,tt,S.numGlyphs,Je.length)}var He=b+Ae.private[1],Oe=We(v,He,Ae.private[0],ee.objects);if(S.defaultWidthX=Oe.defaultWidthX,S.nominalWidthX=Oe.nominalWidthX,Oe.subrs!==0){var Ge=lr(v,He+Oe.subrs);S.subrs=Ge.objects,S.subrsBias=Tt(S.subrs)}else S.subrs=[],S.subrsBias=0;var lt=lr(v,b+Ae.charStrings);S.nGlyphs=lt.objects.length;var ot=function(vt,$t,Ct,At){var Rt,Nt,Dt=new Ce.Parser(vt,$t);--Ct;var Jt=[".notdef"],Ft=Dt.parseCard8();if(Ft===0)for(var jt=0;jt<Ct;jt+=1)Rt=Dt.parseSID(),Jt.push(Tr(At,Rt));else if(Ft===1)for(;Jt.length<=Ct;){Rt=Dt.parseSID(),Nt=Dt.parseCard8();for(var Kt=0;Kt<=Nt;Kt+=1)Jt.push(Tr(At,Rt)),Rt+=1}else{if(Ft!==2)throw new Error("Unknown charset format "+Ft);for(;Jt.length<=Ct;){Rt=Dt.parseSID(),Nt=Dt.parseCard16();for(var Gt=0;Gt<=Nt;Gt+=1)Jt.push(Tr(At,Rt)),Rt+=1}}return Jt}(v,b+Ae.charset,S.nGlyphs,ee.objects);Ae.encoding===0?S.cffEncoding=new Xe(H,ot):Ae.encoding===1?S.cffEncoding=new Xe(J,ot):S.cffEncoding=function(vt,$t,Ct){var At,Rt={},Nt=new Ce.Parser(vt,$t),Dt=Nt.parseCard8();if(Dt===0)for(var Jt=Nt.parseCard8(),Ft=0;Ft<Jt;Ft+=1)Rt[At=Nt.parseCard8()]=Ft;else{if(Dt!==1)throw new Error("Unknown encoding format "+Dt);var jt=Nt.parseCard8();At=1;for(var Kt=0;Kt<jt;Kt+=1)for(var Gt=Nt.parseCard8(),tr=Nt.parseCard8(),Ot=Gt;Ot<=Gt+tr;Ot+=1)Rt[Ot]=At,At+=1}return new Xe(Rt,Ct)}(v,b+Ae.encoding,ot),S.encoding=S.encoding||S.cffEncoding,S.glyphs=new ht.GlyphSet(S);for(var Et=0;Et<S.nGlyphs;Et+=1){var pt=lt.objects[Et];S.glyphs.push(Et,ht.cffGlyphLoader(S,Et,Ye,pt))}},make:function(v,b){for(var S,E=new Pe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),L=1/b.unitsPerEm,j={version:b.version,fullName:b.fullName,familyName:b.familyName,weight:b.weightName,fontBBox:b.fontBBox||[0,0,0,0],fontMatrix:[L,0,0,L,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},U=[],Y=1;Y<v.length;Y+=1)S=v.get(Y),U.push(S.name);var ee=[];E.header=new Pe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),E.nameIndex=function(Je){var He=new Pe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);He.names=[];for(var Oe=0;Oe<Je.length;Oe+=1)He.names.push({name:"name_"+Oe,type:"NAME",value:Je[Oe]});return He}([b.postScriptName]);var fe,Me,Ae,oe=ft(j,ee);E.topDictIndex=le(oe),E.globalSubrIndex=new Pe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),E.charsets=function(Je,He){for(var Oe=new Pe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Ge=0;Ge<Je.length;Ge+=1){var lt=bt(Je[Ge],He);Oe.fields.push({name:"glyph_"+Ge,type:"SID",value:lt})}return Oe}(U,ee),E.charStringsIndex=function(Je){for(var He=new Pe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Oe=0;Oe<Je.length;Oe+=1){var Ge=Je.get(Oe),lt=je(Ge);He.charStrings.push({name:Ge.name,type:"CHARSTRING",value:lt})}return He}(v),E.privateDict=(fe={},Me=ee,(Ae=new Pe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=gt(ke,fe,Me),Ae),E.stringIndex=function(Je){var He=new Pe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);He.strings=[];for(var Oe=0;Oe<Je.length;Oe+=1)He.strings.push({name:"string_"+Oe,type:"STRING",value:Je[Oe]});return He}(ee);var tt=E.header.sizeOf()+E.nameIndex.sizeOf()+E.topDictIndex.sizeOf()+E.stringIndex.sizeOf()+E.globalSubrIndex.sizeOf();return j.charset=tt,j.encoding=0,j.charStrings=j.charset+E.charsets.sizeOf(),j.private[1]=j.charStrings+E.charStringsIndex.sizeOf(),oe=ft(j,ee),E.topDictIndex=le(oe),E}},Ue={parse:function(v,b){var S={},E=new Ce.Parser(v,b);return S.version=E.parseVersion(),S.fontRevision=Math.round(1e3*E.parseFixed())/1e3,S.checkSumAdjustment=E.parseULong(),S.magicNumber=E.parseULong(),ge.argument(S.magicNumber===1594834165,"Font header has wrong magic number."),S.flags=E.parseUShort(),S.unitsPerEm=E.parseUShort(),S.created=E.parseLongDateTime(),S.modified=E.parseLongDateTime(),S.xMin=E.parseShort(),S.yMin=E.parseShort(),S.xMax=E.parseShort(),S.yMax=E.parseShort(),S.macStyle=E.parseUShort(),S.lowestRecPPEM=E.parseUShort(),S.fontDirectionHint=E.parseShort(),S.indexToLocFormat=E.parseShort(),S.glyphDataFormat=E.parseShort(),S},make:function(v){var b=Math.round(new Date().getTime()/1e3)+2082844800,S=b;return v.createdTimestamp&&(S=v.createdTimestamp+2082844800),new Pe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:S},{name:"modified",type:"LONGDATETIME",value:b},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],v)}},et={parse:function(v,b){var S={},E=new Ce.Parser(v,b);return S.version=E.parseVersion(),S.ascender=E.parseShort(),S.descender=E.parseShort(),S.lineGap=E.parseShort(),S.advanceWidthMax=E.parseUShort(),S.minLeftSideBearing=E.parseShort(),S.minRightSideBearing=E.parseShort(),S.xMaxExtent=E.parseShort(),S.caretSlopeRise=E.parseShort(),S.caretSlopeRun=E.parseShort(),S.caretOffset=E.parseShort(),E.relativeOffset+=8,S.metricDataFormat=E.parseShort(),S.numberOfHMetrics=E.parseUShort(),S},make:function(v){return new Pe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],v)}},ze={parse:function(v,b,S,E,L){for(var j,U,Y=new Ce.Parser(v,b),ee=0;ee<E;ee+=1){ee<S&&(j=Y.parseUShort(),U=Y.parseShort());var fe=L.get(ee);fe.advanceWidth=j,fe.leftSideBearing=U}},make:function(v){for(var b=new Pe.Table("hmtx",[]),S=0;S<v.length;S+=1){var E=v.get(S),L=E.advanceWidth||0,j=E.leftSideBearing||0;b.fields.push({name:"advanceWidth_"+S,type:"USHORT",value:L}),b.fields.push({name:"leftSideBearing_"+S,type:"SHORT",value:j})}return b}},at={make:function(v){for(var b=new Pe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:v.length}]),S="",E=12+4*v.length,L=0;L<v.length;++L){var j=S.indexOf(v[L]);j<0&&(j=S.length,S+=v[L]),b.fields.push({name:"offset "+L,type:"USHORT",value:E+j}),b.fields.push({name:"length "+L,type:"USHORT",value:v[L].length})}return b.fields.push({name:"stringPool",type:"CHARARRAY",value:S}),b},parse:function(v,b){var S=new Ce.Parser(v,b),E=S.parseULong();ge.argument(E===1,"Unsupported ltag table version."),S.skip("uLong",1);for(var L=S.parseULong(),j=[],U=0;U<L;U++){for(var Y="",ee=b+S.parseUShort(),fe=S.parseUShort(),Me=ee;Me<ee+fe;++Me)Y+=String.fromCharCode(v.getInt8(Me));j.push(Y)}return j}},Mt={parse:function(v,b){var S={},E=new Ce.Parser(v,b);return S.version=E.parseVersion(),S.numGlyphs=E.parseUShort(),S.version===1&&(S.maxPoints=E.parseUShort(),S.maxContours=E.parseUShort(),S.maxCompositePoints=E.parseUShort(),S.maxCompositeContours=E.parseUShort(),S.maxZones=E.parseUShort(),S.maxTwilightPoints=E.parseUShort(),S.maxStorage=E.parseUShort(),S.maxFunctionDefs=E.parseUShort(),S.maxInstructionDefs=E.parseUShort(),S.maxStackElements=E.parseUShort(),S.maxSizeOfInstructions=E.parseUShort(),S.maxComponentElements=E.parseUShort(),S.maxComponentDepth=E.parseUShort()),S},make:function(v){return new Pe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:v}])}},yt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],wt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},nt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},It={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function dt(v,b,S){switch(v){case 0:if(b===65535)return"und";if(S)return S[b];break;case 1:return wt[b];case 3:return It[b]}}var kt="utf-16",Fr={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},mr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function li(v,b,S){switch(v){case 0:return kt;case 1:return mr[S]||Fr[b];case 3:if(b===1||b===10)return kt}}function ui(v){var b={};for(var S in v)b[v[S]]=parseInt(S);return b}function os(v,b,S,E,L,j){return new Pe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:v},{name:"encodingID",type:"USHORT",value:b},{name:"languageID",type:"USHORT",value:S},{name:"nameID",type:"USHORT",value:E},{name:"length",type:"USHORT",value:L},{name:"offset",type:"USHORT",value:j}])}function ci(v,b){var S=function(j,U){var Y=j.length,ee=U.length-Y+1;e:for(var fe=0;fe<ee;fe++)for(;fe<ee;fe++){for(var Me=0;Me<Y;Me++)if(U[fe+Me]!==j[Me])continue e;return fe}return-1}(v,b);if(S<0){S=b.length;for(var E=0,L=v.length;E<L;++E)b.push(v[E])}return S}var Jl={parse:function(v,b,S){for(var E={},L=new Ce.Parser(v,b),j=L.parseUShort(),U=L.parseUShort(),Y=L.offset+L.parseUShort(),ee=0;ee<U;ee++){var fe=L.parseUShort(),Me=L.parseUShort(),Ae=L.parseUShort(),oe=L.parseUShort(),tt=yt[oe]||oe,Je=L.parseUShort(),He=L.parseUShort(),Oe=dt(fe,Ae,S),Ge=li(fe,Me,Ae);if(Ge!==void 0&&Oe!==void 0){var lt=void 0;if(lt=Ge===kt?ce.UTF16(v,Y+He,Je):ce.MACSTRING(v,Y+He,Je,Ge)){var ot=E[tt];ot===void 0&&(ot=E[tt]={}),ot[Oe]=lt}}}return j===1&&L.parseUShort(),E},make:function(v,b){var S,E=[],L={},j=ui(yt);for(var U in v){var Y=j[U];if(Y===void 0&&(Y=U),S=parseInt(Y),isNaN(S))throw new Error('Name table entry "'+U+'" does not exist, see nameTableNames for complete list.');L[S]=v[U],E.push(S)}for(var ee=ui(wt),fe=ui(It),Me=[],Ae=[],oe=0;oe<E.length;oe++){var tt=L[S=E[oe]];for(var Je in tt){var He=tt[Je],Oe=1,Ge=ee[Je],lt=nt[Ge],ot=li(Oe,lt,Ge),Et=de.MACSTRING(He,ot);Et===void 0&&(Oe=0,(Ge=b.indexOf(Je))<0&&(Ge=b.length,b.push(Je)),lt=4,Et=de.UTF16(He));var pt=ci(Et,Ae);Me.push(os(Oe,lt,Ge,S,Et.length,pt));var vt=fe[Je];if(vt!==void 0){var $t=de.UTF16(He),Ct=ci($t,Ae);Me.push(os(3,1,vt,S,$t.length,Ct))}}}Me.sort(function(Nt,Dt){return Nt.platformID-Dt.platformID||Nt.encodingID-Dt.encodingID||Nt.languageID-Dt.languageID||Nt.nameID-Dt.nameID});for(var At=new Pe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Me.length},{name:"stringOffset",type:"USHORT",value:6+12*Me.length}]),Rt=0;Rt<Me.length;Rt++)At.fields.push({name:"record_"+Rt,type:"RECORD",value:Me[Rt]});return At.fields.push({name:"strings",type:"LITERAL",value:Ae}),At}},ia=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],sa={parse:function(v,b){var S={},E=new Ce.Parser(v,b);S.version=E.parseUShort(),S.xAvgCharWidth=E.parseShort(),S.usWeightClass=E.parseUShort(),S.usWidthClass=E.parseUShort(),S.fsType=E.parseUShort(),S.ySubscriptXSize=E.parseShort(),S.ySubscriptYSize=E.parseShort(),S.ySubscriptXOffset=E.parseShort(),S.ySubscriptYOffset=E.parseShort(),S.ySuperscriptXSize=E.parseShort(),S.ySuperscriptYSize=E.parseShort(),S.ySuperscriptXOffset=E.parseShort(),S.ySuperscriptYOffset=E.parseShort(),S.yStrikeoutSize=E.parseShort(),S.yStrikeoutPosition=E.parseShort(),S.sFamilyClass=E.parseShort(),S.panose=[];for(var L=0;L<10;L++)S.panose[L]=E.parseByte();return S.ulUnicodeRange1=E.parseULong(),S.ulUnicodeRange2=E.parseULong(),S.ulUnicodeRange3=E.parseULong(),S.ulUnicodeRange4=E.parseULong(),S.achVendID=String.fromCharCode(E.parseByte(),E.parseByte(),E.parseByte(),E.parseByte()),S.fsSelection=E.parseUShort(),S.usFirstCharIndex=E.parseUShort(),S.usLastCharIndex=E.parseUShort(),S.sTypoAscender=E.parseShort(),S.sTypoDescender=E.parseShort(),S.sTypoLineGap=E.parseShort(),S.usWinAscent=E.parseUShort(),S.usWinDescent=E.parseUShort(),1<=S.version&&(S.ulCodePageRange1=E.parseULong(),S.ulCodePageRange2=E.parseULong()),2<=S.version&&(S.sxHeight=E.parseShort(),S.sCapHeight=E.parseShort(),S.usDefaultChar=E.parseUShort(),S.usBreakChar=E.parseUShort(),S.usMaxContent=E.parseUShort()),S},make:function(v){return new Pe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],v)},unicodeRanges:ia,getUnicodeRange:function(v){for(var b=0;b<ia.length;b+=1){var S=ia[b];if(v>=S.begin&&v<S.end)return b}return-1}},Kl={parse:function(v,b){var S={},E=new Ce.Parser(v,b);switch(S.version=E.parseVersion(),S.italicAngle=E.parseFixed(),S.underlinePosition=E.parseShort(),S.underlineThickness=E.parseShort(),S.isFixedPitch=E.parseULong(),S.minMemType42=E.parseULong(),S.maxMemType42=E.parseULong(),S.minMemType1=E.parseULong(),S.maxMemType1=E.parseULong(),S.version){case 1:S.names=he.slice();break;case 2:S.numberOfGlyphs=E.parseUShort(),S.glyphNameIndex=new Array(S.numberOfGlyphs);for(var L=0;L<S.numberOfGlyphs;L++)S.glyphNameIndex[L]=E.parseUShort();S.names=[];for(var j=0;j<S.numberOfGlyphs;j++)if(S.glyphNameIndex[j]>=he.length){var U=E.parseChar();S.names.push(E.parseString(U))}break;case 2.5:S.numberOfGlyphs=E.parseUShort(),S.offset=new Array(S.numberOfGlyphs);for(var Y=0;Y<S.numberOfGlyphs;Y++)S.offset[Y]=E.parseChar()}return S},make:function(){return new Pe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Ur=new Array(9);Ur[1]=function(){var v=this.offset+this.relativeOffset,b=this.parseUShort();return b===1?{substFormat:1,coverage:this.parsePointer(ie.coverage),deltaGlyphId:this.parseUShort()}:b===2?{substFormat:2,coverage:this.parsePointer(ie.coverage),substitute:this.parseOffset16List()}:void ge.assert(!1,"0x"+v.toString(16)+": lookup type 1 format must be 1 or 2.")},Ur[2]=function(){var v=this.parseUShort();return ge.argument(v===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ie.coverage),sequences:this.parseListOfLists()}},Ur[3]=function(){var v=this.parseUShort();return ge.argument(v===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ie.coverage),alternateSets:this.parseListOfLists()}},Ur[4]=function(){var v=this.parseUShort();return ge.argument(v===1,"GSUB ligature table identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ie.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var di={sequenceIndex:ie.uShort,lookupListIndex:ie.uShort};Ur[5]=function(){var v=this.offset+this.relativeOffset,b=this.parseUShort();if(b===1)return{substFormat:b,coverage:this.parsePointer(ie.coverage),ruleSets:this.parseListOfLists(function(){var L=this.parseUShort(),j=this.parseUShort();return{input:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(j,di)}})};if(b===2)return{substFormat:b,coverage:this.parsePointer(ie.coverage),classDef:this.parsePointer(ie.classDef),classSets:this.parseListOfLists(function(){var L=this.parseUShort(),j=this.parseUShort();return{classes:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(j,di)}})};if(b===3){var S=this.parseUShort(),E=this.parseUShort();return{substFormat:b,coverages:this.parseList(S,ie.pointer(ie.coverage)),lookupRecords:this.parseRecordList(E,di)}}ge.assert(!1,"0x"+v.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Ur[6]=function(){var v=this.offset+this.relativeOffset,b=this.parseUShort();return b===1?{substFormat:1,coverage:this.parsePointer(ie.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(di)}})}:b===2?{substFormat:2,coverage:this.parsePointer(ie.coverage),backtrackClassDef:this.parsePointer(ie.classDef),inputClassDef:this.parsePointer(ie.classDef),lookaheadClassDef:this.parsePointer(ie.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(di)}})}:b===3?{substFormat:3,backtrackCoverage:this.parseList(ie.pointer(ie.coverage)),inputCoverage:this.parseList(ie.pointer(ie.coverage)),lookaheadCoverage:this.parseList(ie.pointer(ie.coverage)),lookupRecords:this.parseRecordList(di)}:void ge.assert(!1,"0x"+v.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Ur[7]=function(){var v=this.parseUShort();ge.argument(v===1,"GSUB Extension Substitution subtable identifier-format must be 1");var b=this.parseUShort(),S=new ie(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:b,extension:Ur[b].call(S)}},Ur[8]=function(){var v=this.parseUShort();return ge.argument(v===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ie.coverage),backtrackCoverage:this.parseList(ie.pointer(ie.coverage)),lookaheadCoverage:this.parseList(ie.pointer(ie.coverage)),substitutes:this.parseUShortList()}};var Ks=new Array(9);Ks[1]=function(v){return v.substFormat===1?new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Pe.Coverage(v.coverage)},{name:"deltaGlyphID",type:"USHORT",value:v.deltaGlyphId}]):new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Pe.Coverage(v.coverage)}].concat(Pe.ushortList("substitute",v.substitute)))},Ks[3]=function(v){return ge.assert(v.substFormat===1,"Lookup type 3 substFormat must be 1."),new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Pe.Coverage(v.coverage)}].concat(Pe.tableList("altSet",v.alternateSets,function(b){return new Pe.Table("alternateSetTable",Pe.ushortList("alternate",b))})))},Ks[4]=function(v){return ge.assert(v.substFormat===1,"Lookup type 4 substFormat must be 1."),new Pe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Pe.Coverage(v.coverage)}].concat(Pe.tableList("ligSet",v.ligatureSets,function(b){return new Pe.Table("ligatureSetTable",Pe.tableList("ligature",b,function(S){return new Pe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:S.ligGlyph}].concat(Pe.ushortList("component",S.components,S.components.length+1)))}))})))};var $l={parse:function(v,b){var S=new ie(v,b=b||0),E=S.parseVersion(1);return ge.argument(E===1||E===1.1,"Unsupported GSUB table version."),E===1?{version:E,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Ur)}:{version:E,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Ur),variations:S.parseFeatureVariationsList()}},make:function(v){return new Pe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Pe.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Pe.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Pe.LookupList(v.lookups,Ks)}])}},Ql={parse:function(v,b){var S=new Ce.Parser(v,b),E=S.parseULong();ge.argument(E===1,"Unsupported META table version."),S.parseULong(),S.parseULong();for(var L=S.parseULong(),j={},U=0;U<L;U++){var Y=S.parseTag(),ee=S.parseULong(),fe=S.parseULong(),Me=ce.UTF8(v,b+ee,fe);j[Y]=Me}return j},make:function(v){var b=Object.keys(v).length,S="",E=16+12*b,L=new Pe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:E},{name:"numTags",type:"ULONG",value:b}]);for(var j in v){var U=S.length;S+=v[j],L.fields.push({name:"tag "+j,type:"TAG",value:j}),L.fields.push({name:"offset "+j,type:"ULONG",value:E+U}),L.fields.push({name:"length "+j,type:"ULONG",value:v[j].length})}return L.fields.push({name:"stringPool",type:"CHARARRAY",value:S}),L}};function eu(v){return Math.log(v)/Math.log(2)|0}function oa(v){for(;v.length%4!=0;)v.push(0);for(var b=0,S=0;S<v.length;S+=4)b+=(v[S]<<24)+(v[S+1]<<16)+(v[S+2]<<8)+v[S+3];return b%=Math.pow(2,32)}function tu(v,b,S,E){return new Pe.Record("Table Record",[{name:"tag",type:"TAG",value:v!==void 0?v:""},{name:"checkSum",type:"ULONG",value:b!==void 0?b:0},{name:"offset",type:"ULONG",value:S!==void 0?S:0},{name:"length",type:"ULONG",value:E!==void 0?E:0}])}function ru(v){var b=new Pe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);b.tables=v,b.numTables=v.length;var S=Math.pow(2,eu(b.numTables));b.searchRange=16*S,b.entrySelector=eu(S),b.rangeShift=16*b.numTables-b.searchRange;for(var E=[],L=[],j=b.sizeOf()+tu().sizeOf()*b.numTables;j%4!=0;)j+=1,L.push({name:"padding",type:"BYTE",value:0});for(var U=0;U<v.length;U+=1){var Y=v[U];ge.argument(Y.tableName.length===4,"Table name"+Y.tableName+" is invalid.");var ee=Y.sizeOf(),fe=tu(Y.tableName,oa(Y.encode()),j,ee);for(E.push({name:fe.tag+" Table Record",type:"RECORD",value:fe}),L.push({name:Y.tableName+" table",type:"RECORD",value:Y}),j+=ee,ge.argument(!isNaN(j),"Something went wrong calculating the offset.");j%4!=0;)j+=1,L.push({name:"padding",type:"BYTE",value:0})}return E.sort(function(Me,Ae){return Me.value.tag>Ae.value.tag?1:-1}),b.fields=b.fields.concat(E),b.fields=b.fields.concat(L),b}function nu(v,b,S){for(var E=0;E<b.length;E+=1){var L=v.charToGlyphIndex(b[E]);if(0<L)return v.glyphs.get(L).getMetrics()}return S}var Bh={make:ru,fontToTable:function(v){for(var b,S=[],E=[],L=[],j=[],U=[],Y=[],ee=[],fe=0,Me=0,Ae=0,oe=0,tt=0,Je=0;Je<v.glyphs.length;Je+=1){var He=v.glyphs.get(Je),Oe=0|He.unicode;if(isNaN(He.advanceWidth))throw new Error("Glyph "+He.name+" ("+Je+"): advanceWidth is not a number.");(Oe<b||b===void 0)&&0<Oe&&(b=Oe),fe<Oe&&(fe=Oe);var Ge=sa.getUnicodeRange(Oe);if(Ge<32)Me|=1<<Ge;else if(Ge<64)Ae|=1<<Ge-32;else if(Ge<96)oe|=1<<Ge-64;else{if(!(Ge<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");tt|=1<<Ge-96}if(He.name!==".notdef"){var lt=He.getMetrics();S.push(lt.xMin),E.push(lt.yMin),L.push(lt.xMax),j.push(lt.yMax),Y.push(lt.leftSideBearing),ee.push(lt.rightSideBearing),U.push(He.advanceWidth)}}var ot={xMin:Math.min.apply(null,S),yMin:Math.min.apply(null,E),xMax:Math.max.apply(null,L),yMax:Math.max.apply(null,j),advanceWidthMax:Math.max.apply(null,U),advanceWidthAvg:function(pi){for(var Du=0,pa=0;pa<pi.length;pa+=1)Du+=pi[pa];return Du/pi.length}(U),minLeftSideBearing:Math.min.apply(null,Y),maxLeftSideBearing:Math.max.apply(null,Y),minRightSideBearing:Math.min.apply(null,ee)};ot.ascender=v.ascender,ot.descender=v.descender;var Et=Ue.make({flags:3,unitsPerEm:v.unitsPerEm,xMin:ot.xMin,yMin:ot.yMin,xMax:ot.xMax,yMax:ot.yMax,lowestRecPPEM:3,createdTimestamp:v.createdTimestamp}),pt=et.make({ascender:ot.ascender,descender:ot.descender,advanceWidthMax:ot.advanceWidthMax,minLeftSideBearing:ot.minLeftSideBearing,minRightSideBearing:ot.minRightSideBearing,xMaxExtent:ot.maxLeftSideBearing+(ot.xMax-ot.xMin),numberOfHMetrics:v.glyphs.length}),vt=Mt.make(v.glyphs.length),$t=sa.make({xAvgCharWidth:Math.round(ot.advanceWidthAvg),usWeightClass:v.tables.os2.usWeightClass,usWidthClass:v.tables.os2.usWidthClass,usFirstCharIndex:b,usLastCharIndex:fe,ulUnicodeRange1:Me,ulUnicodeRange2:Ae,ulUnicodeRange3:oe,ulUnicodeRange4:tt,fsSelection:v.tables.os2.fsSelection,sTypoAscender:ot.ascender,sTypoDescender:ot.descender,sTypoLineGap:0,usWinAscent:ot.yMax,usWinDescent:Math.abs(ot.yMin),ulCodePageRange1:1,sxHeight:nu(v,"xyvw",{yMax:Math.round(ot.ascender/2)}).yMax,sCapHeight:nu(v,"HIKLEFJMNTZBDPRAGOQSUVWXY",ot).yMax,usDefaultChar:v.hasChar(" ")?32:0,usBreakChar:v.hasChar(" ")?32:0}),Ct=ze.make(v.glyphs),At=z.make(v.glyphs),Rt=v.getEnglishName("fontFamily"),Nt=v.getEnglishName("fontSubfamily"),Dt=Rt+" "+Nt,Jt=v.getEnglishName("postScriptName");Jt=Jt||Rt.replace(/\s/g,"")+"-"+Nt;var Ft={};for(var jt in v.names)Ft[jt]=v.names[jt];Ft.uniqueID||(Ft.uniqueID={en:v.getEnglishName("manufacturer")+":"+Dt}),Ft.postScriptName||(Ft.postScriptName={en:Jt}),Ft.preferredFamily||(Ft.preferredFamily=v.names.fontFamily),Ft.preferredSubfamily||(Ft.preferredSubfamily=v.names.fontSubfamily);var Kt=[],Gt=Jl.make(Ft,Kt),tr=0<Kt.length?at.make(Kt):void 0,Ot=Kl.make(),rr=qe.make(v.glyphs,{version:v.getEnglishName("version"),fullName:Dt,familyName:Rt,weightName:Nt,postScriptName:Jt,unitsPerEm:v.unitsPerEm,fontBBox:[0,ot.yMin,ot.ascender,ot.advanceWidthMax]}),Ht=v.metas&&0<Object.keys(v.metas).length?Ql.make(v.metas):void 0,qt=[Et,pt,vt,$t,Gt,At,Ot,rr,Ct];tr&&qt.push(tr),v.tables.gsub&&qt.push($l.make(v.tables.gsub)),Ht&&qt.push(Ht);for(var Zr=ru(qt),fi=oa(Zr.encode()),Hn=Zr.fields,Ir=!1,Wn=0;Wn<Hn.length;Wn+=1)if(Hn[Wn].name==="head table"){Hn[Wn].value.checkSumAdjustment=2981146554-fi,Ir=!0;break}if(!Ir)throw new Error("Could not find head table with checkSum to adjust.");return Zr},computeCheckSum:oa};function aa(v,b){for(var S=0,E=v.length-1;S<=E;){var L=S+E>>>1,j=v[L].tag;if(j===b)return L;j<b?S=1+L:E=L-1}return-S-1}function iu(v,b){for(var S=0,E=v.length-1;S<=E;){var L=S+E>>>1,j=v[L];if(j===b)return L;j<b?S=1+L:E=L-1}return-S-1}function su(v,b){for(var S,E=0,L=v.length-1;E<=L;){var j=E+L>>>1,U=(S=v[j]).start;if(U===b)return S;U<b?E=1+j:L=j-1}if(0<E)return b>(S=v[E-1]).end?0:S}function $s(v,b){this.font=v,this.tableName=b}function Qs(v){$s.call(this,v,"gpos")}function Xr(v){$s.call(this,v,"gsub")}function Gh(v,b){var S=v.length;if(S!==b.length)return!1;for(var E=0;E<S;E++)if(v[E]!==b[E])return!1;return!0}function ou(v,b,S){for(var E=v.subtables,L=0;L<E.length;L++){var j=E[L];if(j.substFormat===b)return j}if(S)return E.push(S),S}function au(v){for(var b=new ArrayBuffer(v.length),S=new Uint8Array(b),E=0;E<v.length;++E)S[E]=v[E];return b}function hi(v,b){if(!v)throw b}function lu(v,b,S,E,L){var j;return j=0<(b&E)?(j=v.parseByte(),(b&L)==0&&(j=-j),S+j):0<(b&L)?S:S+v.parseShort()}function zh(v,b,S){var E,L,j=new Ce.Parser(b,S);if(v.numberOfContours=j.parseShort(),v._xMin=j.parseShort(),v._yMin=j.parseShort(),v._xMax=j.parseShort(),v._yMax=j.parseShort(),0<v.numberOfContours){for(var U=v.endPointIndices=[],Y=0;Y<v.numberOfContours;Y+=1)U.push(j.parseUShort());v.instructionLength=j.parseUShort(),v.instructions=[];for(var ee=0;ee<v.instructionLength;ee+=1)v.instructions.push(j.parseByte());var fe=U[U.length-1]+1;E=[];for(var Me=0;Me<fe;Me+=1)if(L=j.parseByte(),E.push(L),0<(8&L))for(var Ae=j.parseByte(),oe=0;oe<Ae;oe+=1)E.push(L),Me+=1;if(ge.argument(E.length===fe,"Bad flags."),0<U.length){var tt,Je=[];if(0<fe){for(var He=0;He<fe;He+=1)L=E[He],(tt={}).onCurve=!!(1&L),tt.lastPointOfContour=0<=U.indexOf(He),Je.push(tt);for(var Oe=0,Ge=0;Ge<fe;Ge+=1)L=E[Ge],(tt=Je[Ge]).x=lu(j,L,Oe,2,16),Oe=tt.x;for(var lt=0,ot=0;ot<fe;ot+=1)L=E[ot],(tt=Je[ot]).y=lu(j,L,lt,4,32),lt=tt.y}v.points=Je}else v.points=[]}else if(v.numberOfContours===0)v.points=[];else{v.isComposite=!0,v.points=[],v.components=[];for(var Et=!0;Et;){E=j.parseUShort();var pt={glyphIndex:j.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&E)?0<(2&E)?(pt.dx=j.parseShort(),pt.dy=j.parseShort()):pt.matchedPoints=[j.parseUShort(),j.parseUShort()]:0<(2&E)?(pt.dx=j.parseChar(),pt.dy=j.parseChar()):pt.matchedPoints=[j.parseByte(),j.parseByte()],0<(8&E)?pt.xScale=pt.yScale=j.parseF2Dot14():0<(64&E)?(pt.xScale=j.parseF2Dot14(),pt.yScale=j.parseF2Dot14()):0<(128&E)&&(pt.xScale=j.parseF2Dot14(),pt.scale01=j.parseF2Dot14(),pt.scale10=j.parseF2Dot14(),pt.yScale=j.parseF2Dot14()),v.components.push(pt),Et=!!(32&E)}if(256&E){v.instructionLength=j.parseUShort(),v.instructions=[];for(var vt=0;vt<v.instructionLength;vt+=1)v.instructions.push(j.parseByte())}}}function la(v,b){for(var S=[],E=0;E<v.length;E+=1){var L=v[E],j={x:b.xScale*L.x+b.scale01*L.y+b.dx,y:b.scale10*L.x+b.yScale*L.y+b.dy,onCurve:L.onCurve,lastPointOfContour:L.lastPointOfContour};S.push(j)}return S}function uu(v){var b=new K;if(!v)return b;for(var S=function(Ae){for(var oe=[],tt=[],Je=0;Je<Ae.length;Je+=1){var He=Ae[Je];tt.push(He),He.lastPointOfContour&&(oe.push(tt),tt=[])}return ge.argument(tt.length===0,"There are still points left in the current contour."),oe}(v),E=0;E<S.length;++E){var L=S[E],j=null,U=L[L.length-1],Y=L[0];if(U.onCurve)b.moveTo(U.x,U.y);else if(Y.onCurve)b.moveTo(Y.x,Y.y);else{var ee={x:.5*(U.x+Y.x),y:.5*(U.y+Y.y)};b.moveTo(ee.x,ee.y)}for(var fe=0;fe<L.length;++fe)if(j=U,U=Y,Y=L[(fe+1)%L.length],U.onCurve)b.lineTo(U.x,U.y);else{var Me=Y;j.onCurve||(.5*(U.x+j.x),.5*(U.y+j.y)),Y.onCurve||(Me={x:.5*(U.x+Y.x),y:.5*(U.y+Y.y)}),b.quadraticCurveTo(U.x,U.y,Me.x,Me.y)}b.closePath()}return b}function Vh(v,b){if(b.isComposite)for(var S=0;S<b.components.length;S+=1){var E=b.components[S],L=v.get(E.glyphIndex);if(L.getPath(),L.points){var j=void 0;if(E.matchedPoints===void 0)j=la(L.points,E);else{if(E.matchedPoints[0]>b.points.length-1||E.matchedPoints[1]>L.points.length-1)throw Error("Matched points out of range in "+b.name);var U=b.points[E.matchedPoints[0]],Y=L.points[E.matchedPoints[1]],ee={xScale:E.xScale,scale01:E.scale01,scale10:E.scale10,yScale:E.yScale,dx:0,dy:0};Y=la([Y],ee)[0],ee.dx=U.x-Y.x,ee.dy=U.y-Y.y,j=la(L.points,ee)}b.points=b.points.concat(j)}}return uu(b.points)}(Qs.prototype=$s.prototype={searchTag:aa,binSearch:iu,getTable:function(v){var b=this.font.tables[this.tableName];return!b&&v&&(b=this.font.tables[this.tableName]=this.createDefaultTable()),b},getScriptNames:function(){var v=this.getTable();return v?v.scripts.map(function(b){return b.tag}):[]},getDefaultScriptName:function(){var v=this.getTable();if(v){for(var b=!1,S=0;S<v.scripts.length;S++){var E=v.scripts[S].tag;if(E==="DFLT")return E;E==="latn"&&(b=!0)}return b?"latn":void 0}},getScriptTable:function(v,b){var S=this.getTable(b);if(S){v=v||"DFLT";var E=S.scripts,L=aa(S.scripts,v);if(0<=L)return E[L].script;if(b){var j={tag:v,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return E.splice(-1-L,0,j),j.script}}},getLangSysTable:function(v,b,S){var E=this.getScriptTable(v,S);if(E){if(!b||b==="dflt"||b==="DFLT")return E.defaultLangSys;var L=aa(E.langSysRecords,b);if(0<=L)return E.langSysRecords[L].langSys;if(S){var j={tag:b,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return E.langSysRecords.splice(-1-L,0,j),j.langSys}}},getFeatureTable:function(v,b,S,E){var L=this.getLangSysTable(v,b,E);if(L){for(var j,U=L.featureIndexes,Y=this.font.tables[this.tableName].features,ee=0;ee<U.length;ee++)if((j=Y[U[ee]]).tag===S)return j.feature;if(E){var fe=Y.length;return ge.assert(fe===0||S>=Y[fe-1].tag,"Features must be added in alphabetical order."),j={tag:S,feature:{params:0,lookupListIndexes:[]}},Y.push(j),U.push(fe),j.feature}}},getLookupTables:function(v,b,S,E,L){var j=this.getFeatureTable(v,b,S,L),U=[];if(j){for(var Y,ee=j.lookupListIndexes,fe=this.font.tables[this.tableName].lookups,Me=0;Me<ee.length;Me++)(Y=fe[ee[Me]]).lookupType===E&&U.push(Y);if(U.length===0&&L){Y={lookupType:E,lookupFlag:0,subtables:[],markFilteringSet:void 0};var Ae=fe.length;return fe.push(Y),ee.push(Ae),[Y]}}return U},getGlyphClass:function(v,b){switch(v.format){case 1:return v.startGlyph<=b&&b<v.startGlyph+v.classes.length?v.classes[b-v.startGlyph]:0;case 2:var S=su(v.ranges,b);return S?S.classId:0}},getCoverageIndex:function(v,b){switch(v.format){case 1:var S=iu(v.glyphs,b);return 0<=S?S:-1;case 2:var E=su(v.ranges,b);return E?E.index+b-E.start:-1}},expandCoverage:function(v){if(v.format===1)return v.glyphs;for(var b=[],S=v.ranges,E=0;E<S.length;E++)for(var L=S[E],j=L.start,U=L.end,Y=j;Y<=U;Y++)b.push(Y);return b}}).init=function(){var v=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(v)},Qs.prototype.getKerningValue=function(v,b,S){for(var E=0;E<v.length;E++)for(var L=v[E].subtables,j=0;j<L.length;j++){var U=L[j],Y=this.getCoverageIndex(U.coverage,b);if(!(Y<0))switch(U.posFormat){case 1:for(var ee=U.pairSets[Y],fe=0;fe<ee.length;fe++){var Me=ee[fe];if(Me.secondGlyph===S)return Me.value1&&Me.value1.xAdvance||0}break;case 2:var Ae=this.getGlyphClass(U.classDef1,b),oe=this.getGlyphClass(U.classDef2,S),tt=U.classRecords[Ae][oe];return tt.value1&&tt.value1.xAdvance||0}}return 0},Qs.prototype.getKerningTables=function(v,b){if(this.font.tables.gpos)return this.getLookupTables(v,b,"kern",2)},(Xr.prototype=$s.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Xr.prototype.getSingle=function(v,b,S){for(var E=[],L=this.getLookupTables(b,S,v,1),j=0;j<L.length;j++)for(var U=L[j].subtables,Y=0;Y<U.length;Y++){var ee=U[Y],fe=this.expandCoverage(ee.coverage),Me=void 0;if(ee.substFormat===1){var Ae=ee.deltaGlyphId;for(Me=0;Me<fe.length;Me++){var oe=fe[Me];E.push({sub:oe,by:oe+Ae})}}else{var tt=ee.substitute;for(Me=0;Me<fe.length;Me++)E.push({sub:fe[Me],by:tt[Me]})}}return E},Xr.prototype.getAlternates=function(v,b,S){for(var E=[],L=this.getLookupTables(b,S,v,3),j=0;j<L.length;j++)for(var U=L[j].subtables,Y=0;Y<U.length;Y++)for(var ee=U[Y],fe=this.expandCoverage(ee.coverage),Me=ee.alternateSets,Ae=0;Ae<fe.length;Ae++)E.push({sub:fe[Ae],by:Me[Ae]});return E},Xr.prototype.getLigatures=function(v,b,S){for(var E=[],L=this.getLookupTables(b,S,v,4),j=0;j<L.length;j++)for(var U=L[j].subtables,Y=0;Y<U.length;Y++)for(var ee=U[Y],fe=this.expandCoverage(ee.coverage),Me=ee.ligatureSets,Ae=0;Ae<fe.length;Ae++)for(var oe=fe[Ae],tt=Me[Ae],Je=0;Je<tt.length;Je++){var He=tt[Je];E.push({sub:[oe].concat(He.components),by:He.ligGlyph})}return E},Xr.prototype.addSingle=function(v,b,S,E){var L=ou(this.getLookupTables(S,E,v,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});ge.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format);var j=b.sub,U=this.binSearch(L.coverage.glyphs,j);U<0&&(U=-1-U,L.coverage.glyphs.splice(U,0,j),L.substitute.splice(U,0,0)),L.substitute[U]=b.by},Xr.prototype.addAlternate=function(v,b,S,E){var L=ou(this.getLookupTables(S,E,v,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});ge.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format);var j=b.sub,U=this.binSearch(L.coverage.glyphs,j);U<0&&(U=-1-U,L.coverage.glyphs.splice(U,0,j),L.alternateSets.splice(U,0,0)),L.alternateSets[U]=b.by},Xr.prototype.addLigature=function(v,b,S,E){var L=this.getLookupTables(S,E,v,4,!0)[0],j=L.subtables[0];j||(j={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},L.subtables[0]=j),ge.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format);var U=b.sub[0],Y=b.sub.slice(1),ee={ligGlyph:b.by,components:Y},fe=this.binSearch(j.coverage.glyphs,U);if(0<=fe){for(var Me=j.ligatureSets[fe],Ae=0;Ae<Me.length;Ae++)if(Gh(Me[Ae].components,Y))return;Me.push(ee)}else fe=-1-fe,j.coverage.glyphs.splice(fe,0,U),j.ligatureSets.splice(fe,0,[ee])},Xr.prototype.getFeature=function(v,b,S){if(/ss\d\d/.test(v))return this.getSingle(v,b,S);switch(v){case"aalt":case"salt":return this.getSingle(v,b,S).concat(this.getAlternates(v,b,S));case"dlig":case"liga":case"rlig":return this.getLigatures(v,b,S)}},Xr.prototype.add=function(v,b,S,E){if(/ss\d\d/.test(v))return this.addSingle(v,b,S,E);switch(v){case"aalt":case"salt":return typeof b.by=="number"?this.addSingle(v,b,S,E):this.addAlternate(v,b,S,E);case"dlig":case"liga":case"rlig":return this.addLigature(v,b,S,E)}};var cu,Vn,du,ua,hu={getPath:uu,parse:function(v,b,S,E){for(var L=new ht.GlyphSet(E),j=0;j<S.length-1;j+=1){var U=S[j];U!==S[j+1]?L.push(j,ht.ttfGlyphLoader(E,j,zh,v,b+U,Vh)):L.push(j,ht.glyphLoader(E,j))}return L}};function fu(v){this.font=v,this.getCommands=function(b){return hu.getPath(b).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Hh(v){return v}function pu(v){return Math.sign(v)*Math.round(Math.abs(v))}function Wh(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function qh(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function Xh(v){return Math.sign(v)*Math.ceil(Math.abs(v))}function Yh(v){return Math.sign(v)*Math.floor(Math.abs(v))}function mu(v){var b=this.srPeriod,S=this.srPhase,E=1;return v<0&&(v=-v,E=-1),v+=this.srThreshold-S,v=Math.trunc(v/b)*b,(v+=S)<0?S*E:v*E}var Yr={x:1,y:0,axis:"x",distance:function(v,b,S,E){return(S?v.xo:v.x)-(E?b.xo:b.x)},interpolate:function(v,b,S,E){var L,j,U,Y,ee,fe,Me;if(!E||E===this)return L=v.xo-b.xo,j=v.xo-S.xo,ee=b.x-b.xo,fe=S.x-S.xo,(Me=(U=Math.abs(L))+(Y=Math.abs(j)))===0?void(v.x=v.xo+(ee+fe)/2):void(v.x=v.xo+(ee*Y+fe*U)/Me);L=E.distance(v,b,!0,!0),j=E.distance(v,S,!0,!0),ee=E.distance(b,b,!1,!0),fe=E.distance(S,S,!1,!0),(Me=(U=Math.abs(L))+(Y=Math.abs(j)))!==0?Yr.setRelative(v,v,(ee*Y+fe*U)/Me,E,!0):Yr.setRelative(v,v,(ee+fe)/2,E,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(v,b,S,E,L){if(E&&E!==this){var j=L?b.xo:b.x,U=L?b.yo:b.y,Y=j+S*E.x,ee=U+S*E.y;v.x=Y+(v.y-ee)/E.normalSlope}else v.x=(L?b.xo:b.x)+S},slope:0,touch:function(v){v.xTouched=!0},touched:function(v){return v.xTouched},untouch:function(v){v.xTouched=!1}},sn={x:0,y:1,axis:"y",distance:function(v,b,S,E){return(S?v.yo:v.y)-(E?b.yo:b.y)},interpolate:function(v,b,S,E){var L,j,U,Y,ee,fe,Me;if(!E||E===this)return L=v.yo-b.yo,j=v.yo-S.yo,ee=b.y-b.yo,fe=S.y-S.yo,(Me=(U=Math.abs(L))+(Y=Math.abs(j)))===0?void(v.y=v.yo+(ee+fe)/2):void(v.y=v.yo+(ee*Y+fe*U)/Me);L=E.distance(v,b,!0,!0),j=E.distance(v,S,!0,!0),ee=E.distance(b,b,!1,!0),fe=E.distance(S,S,!1,!0),(Me=(U=Math.abs(L))+(Y=Math.abs(j)))!==0?sn.setRelative(v,v,(ee*Y+fe*U)/Me,E,!0):sn.setRelative(v,v,(ee+fe)/2,E,!0)},normalSlope:0,setRelative:function(v,b,S,E,L){if(E&&E!==this){var j=L?b.xo:b.x,U=L?b.yo:b.y,Y=j+S*E.x,ee=U+S*E.y;v.y=ee+E.normalSlope*(v.x-Y)}else v.y=(L?b.yo:b.y)+S},slope:Number.POSITIVE_INFINITY,touch:function(v){v.yTouched=!0},touched:function(v){return v.yTouched},untouch:function(v){v.yTouched=!1}};function as(v,b){this.x=v,this.y=b,this.axis=void 0,this.slope=b/v,this.normalSlope=-v/b,Object.freeze(this)}function ls(v,b){var S=Math.sqrt(v*v+b*b);return b/=S,(v/=S)==1&&b===0?Yr:v===0&&b===1?sn:new as(v,b)}function on(v,b,S,E){this.x=this.xo=Math.round(64*v)/64,this.y=this.yo=Math.round(64*b)/64,this.lastPointOfContour=S,this.onCurve=E,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Yr),Object.freeze(sn),as.prototype.distance=function(v,b,S,E){return this.x*Yr.distance(v,b,S,E)+this.y*sn.distance(v,b,S,E)},as.prototype.interpolate=function(v,b,S,E){var L,j,U,Y,ee,fe,Me;U=E.distance(v,b,!0,!0),Y=E.distance(v,S,!0,!0),L=E.distance(b,b,!1,!0),j=E.distance(S,S,!1,!0),(Me=(ee=Math.abs(U))+(fe=Math.abs(Y)))!==0?this.setRelative(v,v,(L*fe+j*ee)/Me,E,!0):this.setRelative(v,v,(L+j)/2,E,!0)},as.prototype.setRelative=function(v,b,S,E,L){E=E||this;var j=L?b.xo:b.x,U=L?b.yo:b.y,Y=j+S*E.x,ee=U+S*E.y,fe=E.normalSlope,Me=this.slope,Ae=v.x,oe=v.y;v.x=(Me*Ae-fe*Y+ee-oe)/(Me-fe),v.y=Me*(v.x-Ae)+oe},as.prototype.touch=function(v){v.xTouched=!0,v.yTouched=!0},on.prototype.nextTouched=function(v){for(var b=this.nextPointOnContour;!v.touched(b)&&b!==this;)b=b.nextPointOnContour;return b},on.prototype.prevTouched=function(v){for(var b=this.prevPointOnContour;!v.touched(b)&&b!==this;)b=b.prevPointOnContour;return b};var us=Object.freeze(new on(0,0)),Zh={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function _n(v,b){switch(this.env=v,this.stack=[],this.prog=b,v){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Yr,this.round=pu}}function eo(v){for(var b=v.tZone=new Array(v.gZone.length),S=0;S<b.length;S++)b[S]=new on(0,0)}function gu(v,b){var S,E=v.prog,L=v.ip,j=1;do if((S=E[++L])===88)j++;else if(S===89)j--;else if(S===64)L+=E[L+1]+1;else if(S===65)L+=2*E[L+1]+1;else if(176<=S&&S<=183)L+=S-176+1;else if(184<=S&&S<=191)L+=2*(S-184+1);else if(b&&j===1&&S===27)break;while(0<j);v.ip=L}function yu(v,b){o.DEBUG&&console.log(b.step,"SVTCA["+v.axis+"]"),b.fv=b.pv=b.dpv=v}function vu(v,b){o.DEBUG&&console.log(b.step,"SPVTCA["+v.axis+"]"),b.pv=b.dpv=v}function _u(v,b){o.DEBUG&&console.log(b.step,"SFVTCA["+v.axis+"]"),b.fv=v}function bu(v,b){var S,E,L=b.stack,j=L.pop(),U=L.pop(),Y=b.z2[j],ee=b.z1[U];o.DEBUG&&console.log("SPVTL["+v+"]",j,U),E=v?(S=Y.y-ee.y,ee.x-Y.x):(S=ee.x-Y.x,ee.y-Y.y),b.pv=b.dpv=ls(S,E)}function xu(v,b){var S,E,L=b.stack,j=L.pop(),U=L.pop(),Y=b.z2[j],ee=b.z1[U];o.DEBUG&&console.log("SFVTL["+v+"]",j,U),E=v?(S=Y.y-ee.y,ee.x-Y.x):(S=ee.x-Y.x,ee.y-Y.y),b.fv=ls(S,E)}function ca(v){o.DEBUG&&console.log(v.step,"POP[]"),v.stack.pop()}function wu(v,b){var S=b.stack.pop(),E=b.z0[S],L=b.fv,j=b.pv;o.DEBUG&&console.log(b.step,"MDAP["+v+"]",S);var U=j.distance(E,us);v&&(U=b.round(U)),L.setRelative(E,us,U,j),L.touch(E),b.rp0=b.rp1=S}function Su(v,b){var S,E,L,j=b.z2,U=j.length-2;o.DEBUG&&console.log(b.step,"IUP["+v.axis+"]");for(var Y=0;Y<U;Y++)S=j[Y],v.touched(S)||(E=S.prevTouched(v))!==S&&(E===(L=S.nextTouched(v))&&v.setRelative(S,S,v.distance(E,E,!1,!0),v,!0),v.interpolate(S,E,L,v))}function Mu(v,b){for(var S=b.stack,E=v?b.rp1:b.rp2,L=(v?b.z0:b.z1)[E],j=b.fv,U=b.pv,Y=b.loop,ee=b.z2;Y--;){var fe=S.pop(),Me=ee[fe],Ae=U.distance(L,L,!1,!0);j.setRelative(Me,Me,Ae,U),j.touch(Me),o.DEBUG&&console.log(b.step,(1<b.loop?"loop "+(b.loop-Y)+": ":"")+"SHP["+(v?"rp1":"rp2")+"]",fe)}b.loop=1}function Eu(v,b){var S=b.stack,E=v?b.rp1:b.rp2,L=(v?b.z0:b.z1)[E],j=b.fv,U=b.pv,Y=S.pop(),ee=b.z2[b.contours[Y]],fe=ee;o.DEBUG&&console.log(b.step,"SHC["+v+"]",Y);for(var Me=U.distance(L,L,!1,!0);fe!==L&&j.setRelative(fe,fe,Me,U),(fe=fe.nextPointOnContour)!==ee;);}function Tu(v,b){var S,E,L=b.stack,j=v?b.rp1:b.rp2,U=(v?b.z0:b.z1)[j],Y=b.fv,ee=b.pv,fe=L.pop();switch(o.DEBUG&&console.log(b.step,"SHZ["+v+"]",fe),fe){case 0:S=b.tZone;break;case 1:S=b.gZone;break;default:throw new Error("Invalid zone")}for(var Me=ee.distance(U,U,!1,!0),Ae=S.length-2,oe=0;oe<Ae;oe++)E=S[oe],Y.setRelative(E,E,Me,ee)}function Au(v,b){var S=b.stack,E=S.pop()/64,L=S.pop(),j=b.z1[L],U=b.z0[b.rp0],Y=b.fv,ee=b.pv;Y.setRelative(j,U,E,ee),Y.touch(j),o.DEBUG&&console.log(b.step,"MSIRP["+v+"]",E,L),b.rp1=b.rp0,b.rp2=L,v&&(b.rp0=L)}function Lu(v,b){var S=b.stack,E=S.pop(),L=S.pop(),j=b.z0[L],U=b.fv,Y=b.pv,ee=b.cvt[E];o.DEBUG&&console.log(b.step,"MIAP["+v+"]",E,"(",ee,")",L);var fe=Y.distance(j,us);v&&(Math.abs(fe-ee)<b.cvCutIn&&(fe=ee),fe=b.round(fe)),U.setRelative(j,us,fe,Y),b.zp0===0&&(j.xo=j.x,j.yo=j.y),U.touch(j),b.rp0=b.rp1=L}function Cu(v,b){var S=b.stack,E=S.pop(),L=b.z2[E];o.DEBUG&&console.log(b.step,"GC["+v+"]",E),S.push(64*b.dpv.distance(L,us,v,!1))}function Ru(v,b){var S=b.stack,E=S.pop(),L=S.pop(),j=b.z1[E],U=b.z0[L],Y=b.dpv.distance(U,j,v,v);o.DEBUG&&console.log(b.step,"MD["+v+"]",E,L,"->",Y),b.stack.push(Math.round(64*Y))}function da(v,b){var S=b.stack,E=S.pop(),L=b.fv,j=b.pv,U=b.ppem,Y=b.deltaBase+16*(v-1),ee=b.deltaShift,fe=b.z0;o.DEBUG&&console.log(b.step,"DELTAP["+v+"]",E,S);for(var Me=0;Me<E;Me++){var Ae=S.pop(),oe=S.pop();if(Y+((240&oe)>>4)===U){var tt=(15&oe)-8;0<=tt&&tt++,o.DEBUG&&console.log(b.step,"DELTAPFIX",Ae,"by",tt*ee);var Je=fe[Ae];L.setRelative(Je,Je,tt*ee,j)}}}function to(v,b){var S=b.stack,E=S.pop();o.DEBUG&&console.log(b.step,"ROUND[]"),S.push(64*b.round(E/64))}function ha(v,b){var S=b.stack,E=S.pop(),L=b.ppem,j=b.deltaBase+16*(v-1),U=b.deltaShift;o.DEBUG&&console.log(b.step,"DELTAC["+v+"]",E,S);for(var Y=0;Y<E;Y++){var ee=S.pop(),fe=S.pop();if(j+((240&fe)>>4)===L){var Me=(15&fe)-8;0<=Me&&Me++;var Ae=Me*U;o.DEBUG&&console.log(b.step,"DELTACFIX",ee,"by",Ae),b.cvt[ee]+=Ae}}}function Pu(v,b){var S,E,L=b.stack,j=L.pop(),U=L.pop(),Y=b.z2[j],ee=b.z1[U];o.DEBUG&&console.log(b.step,"SDPVTL["+v+"]",j,U),E=v?(S=Y.y-ee.y,ee.x-Y.x):(S=ee.x-Y.x,ee.y-Y.y),b.dpv=ls(S,E)}function bn(v,b){var S=b.stack,E=b.prog,L=b.ip;o.DEBUG&&console.log(b.step,"PUSHB["+v+"]");for(var j=0;j<v;j++)S.push(E[++L]);b.ip=L}function xn(v,b){var S=b.ip,E=b.prog,L=b.stack;o.DEBUG&&console.log(b.ip,"PUSHW["+v+"]");for(var j=0;j<v;j++){var U=E[++S]<<8|E[++S];32768&U&&(U=-(1+(65535^U))),L.push(U)}b.ip=S}function ct(v,b,S,E,L,j){var U,Y,ee,fe,Me=j.stack,Ae=v&&Me.pop(),oe=Me.pop(),tt=j.rp0,Je=j.z0[tt],He=j.z1[oe],Oe=j.minDis,Ge=j.fv,lt=j.dpv;ee=0<=(Y=U=lt.distance(He,Je,!0,!0))?1:-1,Y=Math.abs(Y),v&&(fe=j.cvt[Ae],E&&Math.abs(Y-fe)<j.cvCutIn&&(Y=fe)),S&&Y<Oe&&(Y=Oe),E&&(Y=j.round(Y)),Ge.setRelative(He,Je,ee*Y,lt),Ge.touch(He),o.DEBUG&&console.log(j.step,(v?"MIRP[":"MDRP[")+(b?"M":"m")+(S?">":"_")+(E?"R":"_")+(L===0?"Gr":L===1?"Bl":L===2?"Wh":"")+"]",v?Ae+"("+j.cvt[Ae]+","+fe+")":"",oe,"(d =",U,"->",ee*Y,")"),j.rp1=j.rp0,j.rp2=oe,b&&(j.rp0=oe)}fu.prototype.exec=function(v,b){if(typeof b!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var S=this.font,E=this._prepState;if(!E||E.ppem!==b){var L=this._fpgmState;if(!L){_n.prototype=Zh,(L=this._fpgmState=new _n("fpgm",S.tables.fpgm)).funcs=[],L.font=S,o.DEBUG&&(console.log("---EXEC FPGM---"),L.step=-1);try{Vn(L)}catch(fe){return console.log("Hinting error in FPGM:"+fe),void(this._errorState=3)}}_n.prototype=L,(E=this._prepState=new _n("prep",S.tables.prep)).ppem=b;var j=S.tables.cvt;if(j)for(var U=E.cvt=new Array(j.length),Y=b/S.unitsPerEm,ee=0;ee<j.length;ee++)U[ee]=j[ee]*Y;else E.cvt=[];o.DEBUG&&(console.log("---EXEC PREP---"),E.step=-1);try{Vn(E)}catch(fe){this._errorState<2&&console.log("Hinting error in PREP:"+fe),this._errorState=2}}if(!(1<this._errorState))try{return du(v,E)}catch(fe){return this._errorState<1&&(console.log("Hinting error:"+fe),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},du=function(v,b){var S,E,L,j=b.ppem/b.font.unitsPerEm,U=j,Y=v.components;if(_n.prototype=b,Y){var ee=b.font;E=[],S=[];for(var fe=0;fe<Y.length;fe++){var Me=Y[fe],Ae=ee.glyphs.get(Me.glyphIndex);L=new _n("glyf",Ae.instructions),o.DEBUG&&(console.log("---EXEC COMP "+fe+"---"),L.step=-1),ua(Ae,L,j,U);for(var oe=Math.round(Me.dx*j),tt=Math.round(Me.dy*U),Je=L.gZone,He=L.contours,Oe=0;Oe<Je.length;Oe++){var Ge=Je[Oe];Ge.xTouched=Ge.yTouched=!1,Ge.xo=Ge.x=Ge.x+oe,Ge.yo=Ge.y=Ge.y+tt}var lt=E.length;E.push.apply(E,Je);for(var ot=0;ot<He.length;ot++)S.push(He[ot]+lt)}v.instructions&&!L.inhibitGridFit&&((L=new _n("glyf",v.instructions)).gZone=L.z0=L.z1=L.z2=E,L.contours=S,E.push(new on(0,0),new on(Math.round(v.advanceWidth*j),0)),o.DEBUG&&(console.log("---EXEC COMPOSITE---"),L.step=-1),Vn(L),E.length-=2)}else L=new _n("glyf",v.instructions),o.DEBUG&&(console.log("---EXEC GLYPH---"),L.step=-1),ua(v,L,j,U),E=L.gZone;return E},ua=function(v,b,S,E){for(var L,j,U,Y=v.points||[],ee=Y.length,fe=b.gZone=b.z0=b.z1=b.z2=[],Me=b.contours=[],Ae=0;Ae<ee;Ae++)L=Y[Ae],fe[Ae]=new on(L.x*S,L.y*E,L.lastPointOfContour,L.onCurve);for(var oe=0;oe<ee;oe++)L=fe[oe],j||(j=L,Me.push(oe)),L.lastPointOfContour?((L.nextPointOnContour=j).prevPointOnContour=L,j=void 0):(U=fe[oe+1],(L.nextPointOnContour=U).prevPointOnContour=L);if(!b.inhibitGridFit){if(o.DEBUG){console.log("PROCESSING GLYPH",b.stack);for(var tt=0;tt<ee;tt++)console.log(tt,fe[tt].x,fe[tt].y)}if(fe.push(new on(0,0),new on(Math.round(v.advanceWidth*S),0)),Vn(b),fe.length-=2,o.DEBUG){console.log("FINISHED GLYPH",b.stack);for(var Je=0;Je<ee;Je++)console.log(Je,fe[Je].x,fe[Je].y)}}},Vn=function(v){var b=v.prog;if(b){var S,E=b.length;for(v.ip=0;v.ip<E;v.ip++){if(o.DEBUG&&v.step++,!(S=cu[b[v.ip]]))throw new Error("unknown instruction: 0x"+Number(b[v.ip]).toString(16));S(v)}}},cu=[yu.bind(void 0,sn),yu.bind(void 0,Yr),vu.bind(void 0,sn),vu.bind(void 0,Yr),_u.bind(void 0,sn),_u.bind(void 0,Yr),bu.bind(void 0,0),bu.bind(void 0,1),xu.bind(void 0,0),xu.bind(void 0,1),function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"SPVFS[]",S,E),v.pv=v.dpv=ls(E,S)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"SPVFS[]",S,E),v.fv=ls(E,S)},function(v){var b=v.stack,S=v.pv;o.DEBUG&&console.log(v.step,"GPV[]"),b.push(16384*S.x),b.push(16384*S.y)},function(v){var b=v.stack,S=v.fv;o.DEBUG&&console.log(v.step,"GFV[]"),b.push(16384*S.x),b.push(16384*S.y)},function(v){v.fv=v.pv,o.DEBUG&&console.log(v.step,"SFVTPV[]")},function(v){var b=v.stack,S=b.pop(),E=b.pop(),L=b.pop(),j=b.pop(),U=b.pop(),Y=v.z0,ee=v.z1,fe=Y[S],Me=Y[E],Ae=ee[L],oe=ee[j],tt=v.z2[U];o.DEBUG&&console.log("ISECT[], ",S,E,L,j,U);var Je=fe.x,He=fe.y,Oe=Me.x,Ge=Me.y,lt=Ae.x,ot=Ae.y,Et=oe.x,pt=oe.y,vt=(Je-Oe)*(ot-pt)-(He-Ge)*(lt-Et),$t=Je*Ge-He*Oe,Ct=lt*pt-ot*Et;tt.x=($t*(lt-Et)-Ct*(Je-Oe))/vt,tt.y=($t*(ot-pt)-Ct*(He-Ge))/vt},function(v){v.rp0=v.stack.pop(),o.DEBUG&&console.log(v.step,"SRP0[]",v.rp0)},function(v){v.rp1=v.stack.pop(),o.DEBUG&&console.log(v.step,"SRP1[]",v.rp1)},function(v){v.rp2=v.stack.pop(),o.DEBUG&&console.log(v.step,"SRP2[]",v.rp2)},function(v){var b=v.stack.pop();switch(o.DEBUG&&console.log(v.step,"SZP0[]",b),v.zp0=b){case 0:v.tZone||eo(v),v.z0=v.tZone;break;case 1:v.z0=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var b=v.stack.pop();switch(o.DEBUG&&console.log(v.step,"SZP1[]",b),v.zp1=b){case 0:v.tZone||eo(v),v.z1=v.tZone;break;case 1:v.z1=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var b=v.stack.pop();switch(o.DEBUG&&console.log(v.step,"SZP2[]",b),v.zp2=b){case 0:v.tZone||eo(v),v.z2=v.tZone;break;case 1:v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var b=v.stack.pop();switch(o.DEBUG&&console.log(v.step,"SZPS[]",b),v.zp0=v.zp1=v.zp2=b,b){case 0:v.tZone||eo(v),v.z0=v.z1=v.z2=v.tZone;break;case 1:v.z0=v.z1=v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){v.loop=v.stack.pop(),o.DEBUG&&console.log(v.step,"SLOOP[]",v.loop)},function(v){o.DEBUG&&console.log(v.step,"RTG[]"),v.round=pu},function(v){o.DEBUG&&console.log(v.step,"RTHG[]"),v.round=qh},function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"SMD[]",b),v.minDis=b/64},function(v){o.DEBUG&&console.log(v.step,"ELSE[]"),gu(v,!1)},function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"JMPR[]",b),v.ip+=b-1},function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"SCVTCI[]",b),v.cvCutIn=b/64},void 0,void 0,function(v){var b=v.stack;o.DEBUG&&console.log(v.step,"DUP[]"),b.push(b[b.length-1])},ca,function(v){o.DEBUG&&console.log(v.step,"CLEAR[]"),v.stack.length=0},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"SWAP[]"),b.push(S),b.push(E)},function(v){var b=v.stack;o.DEBUG&&console.log(v.step,"DEPTH[]"),b.push(b.length)},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"CINDEX[]",S),b.push(b[b.length-S])},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"MINDEX[]",S),b.push(b.splice(b.length-S,1)[0])},void 0,void 0,void 0,function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"LOOPCALL[]",S,E);var L=v.ip,j=v.prog;v.prog=v.funcs[S];for(var U=0;U<E;U++)Vn(v),o.DEBUG&&console.log(++v.step,U+1<E?"next loopcall":"done loopcall",U);v.ip=L,v.prog=j},function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"CALL[]",b);var S=v.ip,E=v.prog;v.prog=v.funcs[b],Vn(v),v.ip=S,v.prog=E,o.DEBUG&&console.log(++v.step,"returning from",b)},function(v){if(v.env!=="fpgm")throw new Error("FDEF not allowed here");var b=v.stack,S=v.prog,E=v.ip,L=b.pop(),j=E;for(o.DEBUG&&console.log(v.step,"FDEF[]",L);S[++E]!==45;);v.ip=E,v.funcs[L]=S.slice(j+1,E)},void 0,wu.bind(void 0,0),wu.bind(void 0,1),Su.bind(void 0,sn),Su.bind(void 0,Yr),Mu.bind(void 0,0),Mu.bind(void 0,1),Eu.bind(void 0,0),Eu.bind(void 0,1),Tu.bind(void 0,0),Tu.bind(void 0,1),function(v){for(var b=v.stack,S=v.loop,E=v.fv,L=b.pop()/64,j=v.z2;S--;){var U=b.pop(),Y=j[U];o.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-S)+": ":"")+"SHPIX[]",U,L),E.setRelative(Y,Y,L),E.touch(Y)}v.loop=1},function(v){for(var b=v.stack,S=v.rp1,E=v.rp2,L=v.loop,j=v.z0[S],U=v.z1[E],Y=v.fv,ee=v.dpv,fe=v.z2;L--;){var Me=b.pop(),Ae=fe[Me];o.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-L)+": ":"")+"IP[]",Me,S,"<->",E),Y.interpolate(Ae,j,U,ee),Y.touch(Ae)}v.loop=1},Au.bind(void 0,0),Au.bind(void 0,1),function(v){for(var b=v.stack,S=v.rp0,E=v.z0[S],L=v.loop,j=v.fv,U=v.pv,Y=v.z1;L--;){var ee=b.pop(),fe=Y[ee];o.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-L)+": ":"")+"ALIGNRP[]",ee),j.setRelative(fe,E,0,U),j.touch(fe)}v.loop=1},function(v){o.DEBUG&&console.log(v.step,"RTDG[]"),v.round=Wh},Lu.bind(void 0,0),Lu.bind(void 0,1),function(v){var b=v.prog,S=v.ip,E=v.stack,L=b[++S];o.DEBUG&&console.log(v.step,"NPUSHB[]",L);for(var j=0;j<L;j++)E.push(b[++S]);v.ip=S},function(v){var b=v.ip,S=v.prog,E=v.stack,L=S[++b];o.DEBUG&&console.log(v.step,"NPUSHW[]",L);for(var j=0;j<L;j++){var U=S[++b]<<8|S[++b];32768&U&&(U=-(1+(65535^U))),E.push(U)}v.ip=b},function(v){var b=v.stack,S=v.store;S=S||(v.store=[]);var E=b.pop(),L=b.pop();o.DEBUG&&console.log(v.step,"WS",E,L),S[L]=E},function(v){var b=v.stack,S=v.store,E=b.pop();o.DEBUG&&console.log(v.step,"RS",E);var L=S&&S[E]||0;b.push(L)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"WCVTP",S,E),v.cvt[E]=S/64},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"RCVT",S),b.push(64*v.cvt[S])},Cu.bind(void 0,0),Cu.bind(void 0,1),void 0,Ru.bind(void 0,0),Ru.bind(void 0,1),function(v){o.DEBUG&&console.log(v.step,"MPPEM[]"),v.stack.push(v.ppem)},void 0,function(v){o.DEBUG&&console.log(v.step,"FLIPON[]"),v.autoFlip=!0},void 0,void 0,function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"LT[]",S,E),b.push(E<S?1:0)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"LTEQ[]",S,E),b.push(E<=S?1:0)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"GT[]",S,E),b.push(S<E?1:0)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"GTEQ[]",S,E),b.push(S<=E?1:0)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"EQ[]",S,E),b.push(S===E?1:0)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"NEQ[]",S,E),b.push(S!==E?1:0)},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"ODD[]",S),b.push(Math.trunc(S)%2?1:0)},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"EVEN[]",S),b.push(Math.trunc(S)%2?0:1)},function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"IF[]",b),b||(gu(v,!0),o.DEBUG&&console.log(v.step,"EIF[]"))},function(v){o.DEBUG&&console.log(v.step,"EIF[]")},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"AND[]",S,E),b.push(S&&E?1:0)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"OR[]",S,E),b.push(S||E?1:0)},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"NOT[]",S),b.push(S?0:1)},da.bind(void 0,1),function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"SDB[]",b),v.deltaBase=b},function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"SDS[]",b),v.deltaShift=Math.pow(.5,b)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"ADD[]",S,E),b.push(E+S)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"SUB[]",S,E),b.push(E-S)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"DIV[]",S,E),b.push(64*E/S)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"MUL[]",S,E),b.push(E*S/64)},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"ABS[]",S),b.push(Math.abs(S))},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"NEG[]",S),b.push(-S)},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"FLOOR[]",S),b.push(64*Math.floor(S/64))},function(v){var b=v.stack,S=b.pop();o.DEBUG&&console.log(v.step,"CEILING[]",S),b.push(64*Math.ceil(S/64))},to.bind(void 0,0),to.bind(void 0,1),to.bind(void 0,2),to.bind(void 0,3),void 0,void 0,void 0,void 0,function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"WCVTF[]",S,E),v.cvt[E]=S*v.ppem/v.font.unitsPerEm},da.bind(void 0,2),da.bind(void 0,3),ha.bind(void 0,1),ha.bind(void 0,2),ha.bind(void 0,3),function(v){var b,S=v.stack.pop();switch(o.DEBUG&&console.log(v.step,"SROUND[]",S),v.round=mu,192&S){case 0:b=.5;break;case 64:b=1;break;case 128:b=2;break;default:throw new Error("invalid SROUND value")}switch(v.srPeriod=b,48&S){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*b;break;case 32:v.srPhase=.5*b;break;case 48:v.srPhase=.75*b;break;default:throw new Error("invalid SROUND value")}S&=15,v.srThreshold=S===0?0:(S/8-.5)*b},function(v){var b,S=v.stack.pop();switch(o.DEBUG&&console.log(v.step,"S45ROUND[]",S),v.round=mu,192&S){case 0:b=Math.sqrt(2)/2;break;case 64:b=Math.sqrt(2);break;case 128:b=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(v.srPeriod=b,48&S){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*b;break;case 32:v.srPhase=.5*b;break;case 48:v.srPhase=.75*b;break;default:throw new Error("invalid S45ROUND value")}S&=15,v.srThreshold=S===0?0:(S/8-.5)*b},void 0,void 0,function(v){o.DEBUG&&console.log(v.step,"ROFF[]"),v.round=Hh},void 0,function(v){o.DEBUG&&console.log(v.step,"RUTG[]"),v.round=Xh},function(v){o.DEBUG&&console.log(v.step,"RDTG[]"),v.round=Yh},ca,ca,void 0,void 0,void 0,void 0,void 0,function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"SCANCTRL[]",b)},Pu.bind(void 0,0),Pu.bind(void 0,1),function(v){var b=v.stack,S=b.pop(),E=0;o.DEBUG&&console.log(v.step,"GETINFO[]",S),1&S&&(E=35),32&S&&(E|=4096),b.push(E)},void 0,function(v){var b=v.stack,S=b.pop(),E=b.pop(),L=b.pop();o.DEBUG&&console.log(v.step,"ROLL[]"),b.push(E),b.push(S),b.push(L)},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"MAX[]",S,E),b.push(Math.max(E,S))},function(v){var b=v.stack,S=b.pop(),E=b.pop();o.DEBUG&&console.log(v.step,"MIN[]",S,E),b.push(Math.min(E,S))},function(v){var b=v.stack.pop();o.DEBUG&&console.log(v.step,"SCANTYPE[]",b)},function(v){var b=v.stack.pop(),S=v.stack.pop();switch(o.DEBUG&&console.log(v.step,"INSTCTRL[]",b,S),b){case 1:return void(v.inhibitGridFit=!!S);case 2:return void(v.ignoreCvt=!!S);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,bn.bind(void 0,1),bn.bind(void 0,2),bn.bind(void 0,3),bn.bind(void 0,4),bn.bind(void 0,5),bn.bind(void 0,6),bn.bind(void 0,7),bn.bind(void 0,8),xn.bind(void 0,1),xn.bind(void 0,2),xn.bind(void 0,3),xn.bind(void 0,4),xn.bind(void 0,5),xn.bind(void 0,6),xn.bind(void 0,7),xn.bind(void 0,8),ct.bind(void 0,0,0,0,0,0),ct.bind(void 0,0,0,0,0,1),ct.bind(void 0,0,0,0,0,2),ct.bind(void 0,0,0,0,0,3),ct.bind(void 0,0,0,0,1,0),ct.bind(void 0,0,0,0,1,1),ct.bind(void 0,0,0,0,1,2),ct.bind(void 0,0,0,0,1,3),ct.bind(void 0,0,0,1,0,0),ct.bind(void 0,0,0,1,0,1),ct.bind(void 0,0,0,1,0,2),ct.bind(void 0,0,0,1,0,3),ct.bind(void 0,0,0,1,1,0),ct.bind(void 0,0,0,1,1,1),ct.bind(void 0,0,0,1,1,2),ct.bind(void 0,0,0,1,1,3),ct.bind(void 0,0,1,0,0,0),ct.bind(void 0,0,1,0,0,1),ct.bind(void 0,0,1,0,0,2),ct.bind(void 0,0,1,0,0,3),ct.bind(void 0,0,1,0,1,0),ct.bind(void 0,0,1,0,1,1),ct.bind(void 0,0,1,0,1,2),ct.bind(void 0,0,1,0,1,3),ct.bind(void 0,0,1,1,0,0),ct.bind(void 0,0,1,1,0,1),ct.bind(void 0,0,1,1,0,2),ct.bind(void 0,0,1,1,0,3),ct.bind(void 0,0,1,1,1,0),ct.bind(void 0,0,1,1,1,1),ct.bind(void 0,0,1,1,1,2),ct.bind(void 0,0,1,1,1,3),ct.bind(void 0,1,0,0,0,0),ct.bind(void 0,1,0,0,0,1),ct.bind(void 0,1,0,0,0,2),ct.bind(void 0,1,0,0,0,3),ct.bind(void 0,1,0,0,1,0),ct.bind(void 0,1,0,0,1,1),ct.bind(void 0,1,0,0,1,2),ct.bind(void 0,1,0,0,1,3),ct.bind(void 0,1,0,1,0,0),ct.bind(void 0,1,0,1,0,1),ct.bind(void 0,1,0,1,0,2),ct.bind(void 0,1,0,1,0,3),ct.bind(void 0,1,0,1,1,0),ct.bind(void 0,1,0,1,1,1),ct.bind(void 0,1,0,1,1,2),ct.bind(void 0,1,0,1,1,3),ct.bind(void 0,1,1,0,0,0),ct.bind(void 0,1,1,0,0,1),ct.bind(void 0,1,1,0,0,2),ct.bind(void 0,1,1,0,0,3),ct.bind(void 0,1,1,0,1,0),ct.bind(void 0,1,1,0,1,1),ct.bind(void 0,1,1,0,1,2),ct.bind(void 0,1,1,0,1,3),ct.bind(void 0,1,1,1,0,0),ct.bind(void 0,1,1,1,0,1),ct.bind(void 0,1,1,1,0,2),ct.bind(void 0,1,1,1,0,3),ct.bind(void 0,1,1,1,1,0),ct.bind(void 0,1,1,1,1,1),ct.bind(void 0,1,1,1,1,2),ct.bind(void 0,1,1,1,1,3)];var Jh=Array.from||function(v){return v.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Vt(v){(v=v||{}).empty||(hi(v.familyName,"When creating a new Font object, familyName is required."),hi(v.styleName,"When creating a new Font object, styleName is required."),hi(v.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),hi(v.ascender,"When creating a new Font object, ascender is required."),hi(v.descender,"When creating a new Font object, descender is required."),hi(v.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:v.familyName||" "},fontSubfamily:{en:v.styleName||" "},fullName:{en:v.fullName||v.familyName+" "+v.styleName},postScriptName:{en:v.postScriptName||(v.familyName+v.styleName).replace(/\s/g,"")},designer:{en:v.designer||" "},designerURL:{en:v.designerURL||" "},manufacturer:{en:v.manufacturer||" "},manufacturerURL:{en:v.manufacturerURL||" "},license:{en:v.license||" "},licenseURL:{en:v.licenseURL||" "},version:{en:v.version||"Version 0.1"},description:{en:v.description||" "},copyright:{en:v.copyright||" "},trademark:{en:v.trademark||" "}},this.unitsPerEm=v.unitsPerEm||1e3,this.ascender=v.ascender,this.descender=v.descender,this.createdTimestamp=v.createdTimestamp,this.tables={os2:{usWeightClass:v.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:v.widthClass||this.usWidthClasses.MEDIUM,fsSelection:v.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ht.GlyphSet(this,v.glyphs||[]),this.encoding=new Te(this),this.position=new Qs(this),this.substitution=new Xr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new fu(this):void 0}})}function Iu(v,b){var S=JSON.stringify(v),E=256;for(var L in b){var j=parseInt(L);if(j&&!(j<256)){if(JSON.stringify(b[L])===S)return j;E<=j&&(E=j+1)}}return b[E]=v,E}function Kh(v,b,S,E){for(var L=[{name:"nameID_"+v,type:"USHORT",value:Iu(b.name,E)},{name:"flags_"+v,type:"USHORT",value:0}],j=0;j<S.length;++j){var U=S[j].tag;L.push({name:"axis_"+v+" "+U,type:"FIXED",value:b.coordinates[U]<<16})}return L}function $h(v,b,S,E){var L={},j=new Ce.Parser(v,b);L.name=E[j.parseUShort()]||{},j.skip("uShort",1),L.coordinates={};for(var U=0;U<S.length;++U)L.coordinates[S[U].tag]=j.parseFixed();return L}Vt.prototype.hasChar=function(v){return this.encoding.charToGlyphIndex(v)!==null},Vt.prototype.charToGlyphIndex=function(v){return this.encoding.charToGlyphIndex(v)},Vt.prototype.charToGlyph=function(v){var b=this.charToGlyphIndex(v),S=this.glyphs.get(b);return S=S||this.glyphs.get(0)},Vt.prototype.stringToGlyphs=function(v,b){b=b||this.defaultRenderOptions;for(var S=Jh(v),E=[],L=0;L<S.length;L+=1){var j=S[L];E.push(this.charToGlyphIndex(j))}var U=E.length;if(b.features){var Y=b.script||this.substitution.getDefaultScriptName(),ee=[];b.features.liga&&(ee=ee.concat(this.substitution.getFeature("liga",Y,b.language))),b.features.rlig&&(ee=ee.concat(this.substitution.getFeature("rlig",Y,b.language)));for(var fe=0;fe<U;fe+=1)for(var Me=0;Me<ee.length;Me++){for(var Ae=ee[Me],oe=Ae.sub,tt=oe.length,Je=0;Je<tt&&oe[Je]===E[fe+Je];)Je++;Je===tt&&(E.splice(fe,tt,Ae.by),U=U-tt+1)}}for(var He=new Array(U),Oe=this.glyphs.get(0),Ge=0;Ge<U;Ge+=1)He[Ge]=this.glyphs.get(E[Ge])||Oe;return He},Vt.prototype.nameToGlyphIndex=function(v){return this.glyphNames.nameToGlyphIndex(v)},Vt.prototype.nameToGlyph=function(v){var b=this.nameToGlyphIndex(v),S=this.glyphs.get(b);return S=S||this.glyphs.get(0)},Vt.prototype.glyphIndexToName=function(v){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(v):""},Vt.prototype.getKerningValue=function(v,b){v=v.index||v,b=b.index||b;var S=this.position.defaultKerningTables;return S?this.position.getKerningValue(S,v,b):this.kerningPairs[v+","+b]||0},Vt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Vt.prototype.forEachGlyph=function(v,b,S,E,L,j){b=b!==void 0?b:0,S=S!==void 0?S:0,E=E!==void 0?E:72,L=L||this.defaultRenderOptions;var U,Y=1/this.unitsPerEm*E,ee=this.stringToGlyphs(v,L);if(L.kerning){var fe=L.script||this.position.getDefaultScriptName();U=this.position.getKerningTables(fe,L.language)}for(var Me=0;Me<ee.length;Me+=1){var Ae=ee[Me];j.call(this,Ae,b,S,E,L),Ae.advanceWidth&&(b+=Ae.advanceWidth*Y),L.kerning&&Me<ee.length-1&&(b+=(U?this.position.getKerningValue(U,Ae.index,ee[Me+1].index):this.getKerningValue(Ae,ee[Me+1]))*Y),L.letterSpacing?b+=L.letterSpacing*E:L.tracking&&(b+=L.tracking/1e3*E)}return b},Vt.prototype.getPath=function(v,b,S,E,L){var j=new K;return this.forEachGlyph(v,b,S,E,L,function(U,Y,ee,fe){var Me=U.getPath(Y,ee,fe,L,this);j.extend(Me)}),j},Vt.prototype.getPaths=function(v,b,S,E,L){var j=[];return this.forEachGlyph(v,b,S,E,L,function(U,Y,ee,fe){var Me=U.getPath(Y,ee,fe,L,this);j.push(Me)}),j},Vt.prototype.getAdvanceWidth=function(v,b,S){return this.forEachGlyph(v,0,0,b,S,function(){})},Vt.prototype.draw=function(v,b,S,E,L,j){this.getPath(b,S,E,L,j).draw(v)},Vt.prototype.drawPoints=function(v,b,S,E,L,j){this.forEachGlyph(b,S,E,L,j,function(U,Y,ee,fe){U.drawPoints(v,Y,ee,fe)})},Vt.prototype.drawMetrics=function(v,b,S,E,L,j){this.forEachGlyph(b,S,E,L,j,function(U,Y,ee,fe){U.drawMetrics(v,Y,ee,fe)})},Vt.prototype.getEnglishName=function(v){var b=this.names[v];if(b)return b.en},Vt.prototype.validate=function(){var v=this;function b(S){var E=v.getEnglishName(S);E&&E.trim().length}b("fontFamily"),b("weightName"),b("manufacturer"),b("copyright"),b("version"),this.unitsPerEm},Vt.prototype.toTables=function(){return Bh.fontToTable(this)},Vt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Vt.prototype.toArrayBuffer=function(){for(var v=this.toTables().encode(),b=new ArrayBuffer(v.length),S=new Uint8Array(b),E=0;E<v.length;E++)S[E]=v[E];return b},Vt.prototype.download=function(v){var b=this.getEnglishName("fontFamily"),S=this.getEnglishName("fontSubfamily");v=v||b.replace(/\s/g,"")+"-"+S+".otf";var E=this.toArrayBuffer();if(typeof window!="undefined")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,E.byteLength,function(U){U.root.getFile(v,{create:!0},function(Y){Y.createWriter(function(ee){var fe=new DataView(E),Me=new Blob([fe],{type:"font/opentype"});ee.write(Me),ee.addEventListener("writeend",function(){location.href=Y.toURL()},!1)})})},function(U){throw new Error(U.name+": "+U.message)});else{var L=e("fs"),j=function(U){for(var Y=new s(U.byteLength),ee=new Uint8Array(U),fe=0;fe<Y.length;++fe)Y[fe]=ee[fe];return Y}(E);L.writeFileSync(v,j)}},Vt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Vt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Vt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Qh={make:function(v,b){var S,E,L,j,U=new Pe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:v.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:v.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*v.axes.length}]);U.offsetToData=U.sizeOf();for(var Y=0;Y<v.axes.length;Y++)U.fields=U.fields.concat((S=Y,E=v.axes[Y],L=b,j=Iu(E.name,L),[{name:"tag_"+S,type:"TAG",value:E.tag},{name:"minValue_"+S,type:"FIXED",value:E.minValue<<16},{name:"defaultValue_"+S,type:"FIXED",value:E.defaultValue<<16},{name:"maxValue_"+S,type:"FIXED",value:E.maxValue<<16},{name:"flags_"+S,type:"USHORT",value:0},{name:"nameID_"+S,type:"USHORT",value:j}]));for(var ee=0;ee<v.instances.length;ee++)U.fields=U.fields.concat(Kh(ee,v.instances[ee],v.axes,b));return U},parse:function(v,b,S){var E=new Ce.Parser(v,b),L=E.parseULong();ge.argument(L===65536,"Unsupported fvar table version.");var j=E.parseOffset16();E.skip("uShort",1);for(var U,Y,ee,fe,Me,Ae=E.parseUShort(),oe=E.parseUShort(),tt=E.parseUShort(),Je=E.parseUShort(),He=[],Oe=0;Oe<Ae;Oe++)He.push((U=v,Y=b+j+Oe*oe,ee=S,Me=fe=void 0,fe={},Me=new Ce.Parser(U,Y),fe.tag=Me.parseTag(),fe.minValue=Me.parseFixed(),fe.defaultValue=Me.parseFixed(),fe.maxValue=Me.parseFixed(),Me.skip("uShort",1),fe.name=ee[Me.parseUShort()]||{},fe));for(var Ge=[],lt=b+j+Ae*oe,ot=0;ot<tt;ot++)Ge.push($h(v,lt+ot*Je,He,S));return{axes:He,instances:Ge}}},Br=new Array(10);Br[1]=function(){var v=this.offset+this.relativeOffset,b=this.parseUShort();return b===1?{posFormat:1,coverage:this.parsePointer(ie.coverage),value:this.parseValueRecord()}:b===2?{posFormat:2,coverage:this.parsePointer(ie.coverage),values:this.parseValueRecordList()}:void ge.assert(!1,"0x"+v.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Br[2]=function(){var v=this.offset+this.relativeOffset,b=this.parseUShort();ge.assert(b===1||b===2,"0x"+v.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var S=this.parsePointer(ie.coverage),E=this.parseUShort(),L=this.parseUShort();if(b===1)return{posFormat:b,coverage:S,valueFormat1:E,valueFormat2:L,pairSets:this.parseList(ie.pointer(ie.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(E),value2:this.parseValueRecord(L)}})))};if(b===2){var j=this.parsePointer(ie.classDef),U=this.parsePointer(ie.classDef),Y=this.parseUShort(),ee=this.parseUShort();return{posFormat:b,coverage:S,valueFormat1:E,valueFormat2:L,classDef1:j,classDef2:U,class1Count:Y,class2Count:ee,classRecords:this.parseList(Y,ie.list(ee,function(){return{value1:this.parseValueRecord(E),value2:this.parseValueRecord(L)}}))}}},Br[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Br[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Br[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Br[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Br[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Br[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Br[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var ef=new Array(10),tf={parse:function(v,b){var S=new ie(v,b=b||0),E=S.parseVersion(1);return ge.argument(E===1||E===1.1,"Unsupported GPOS table version "+E),E===1?{version:E,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Br)}:{version:E,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Br),variations:S.parseFeatureVariationsList()}},make:function(v){return new Pe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Pe.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Pe.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Pe.LookupList(v.lookups,ef)}])}},rf={parse:function(v,b){var S=new Ce.Parser(v,b),E=S.parseUShort();if(E===0)return function(L){var j={};L.skip("uShort");var U=L.parseUShort();ge.argument(U===0,"Unsupported kern sub-table version."),L.skip("uShort",2);var Y=L.parseUShort();L.skip("uShort",3);for(var ee=0;ee<Y;ee+=1){var fe=L.parseUShort(),Me=L.parseUShort(),Ae=L.parseShort();j[fe+","+Me]=Ae}return j}(S);if(E===1)return function(L){var j={};L.skip("uShort"),1<L.parseULong()&&console.warn("Only the first kern subtable is supported."),L.skip("uLong");var U=255&L.parseUShort();if(L.skip("uShort"),U==0){var Y=L.parseUShort();L.skip("uShort",3);for(var ee=0;ee<Y;ee+=1){var fe=L.parseUShort(),Me=L.parseUShort(),Ae=L.parseShort();j[fe+","+Me]=Ae}}return j}(S);throw new Error("Unsupported kern table version ("+E+").")}},nf={parse:function(v,b,S,E){for(var L=new Ce.Parser(v,b),j=E?L.parseUShort:L.parseULong,U=[],Y=0;Y<S+1;Y+=1){var ee=j.call(L);E&&(ee*=2),U.push(ee)}return U}};function sf(v,b){e("fs").readFile(v,function(S,E){if(S)return b(S.message);b(null,au(E))})}function of(v,b){var S=new XMLHttpRequest;S.open("get",v,!0),S.responseType="arraybuffer",S.onload=function(){return S.response?b(null,S.response):b("Font could not be loaded: "+S.statusText)},S.onerror=function(){b("Font could not be loaded")},S.send()}function Ou(v,b){for(var S=[],E=12,L=0;L<b;L+=1){var j=Ce.getTag(v,E),U=Ce.getULong(v,E+4),Y=Ce.getULong(v,E+8),ee=Ce.getULong(v,E+12);S.push({tag:j,checksum:U,offset:Y,length:ee,compression:!1}),E+=16}return S}function or(v,b){if(b.compression!=="WOFF")return{data:v,offset:b.offset};var S=new Uint8Array(v.buffer,b.offset+2,b.compressedLength-2),E=new Uint8Array(b.length);if(X(S,E),E.byteLength!==b.length)throw new Error("Decompression error: "+b.tag+" decompressed length doesn't match recorded length");return{data:new DataView(E.buffer,0),offset:0}}function fa(v){var b,S,E,L,j,U,Y,ee,fe,Me,Ae,oe,tt,Je,He=new Vt({empty:!0}),Oe=new DataView(v,0),Ge=[],lt=Ce.getTag(Oe,0);if(lt===String.fromCharCode(0,1,0,0)||lt==="true"||lt==="typ1")He.outlinesFormat="truetype",Ge=Ou(Oe,E=Ce.getUShort(Oe,4));else if(lt==="OTTO")He.outlinesFormat="cff",Ge=Ou(Oe,E=Ce.getUShort(Oe,4));else{if(lt!=="wOFF")throw new Error("Unsupported OpenType signature "+lt);var ot=Ce.getTag(Oe,4);if(ot===String.fromCharCode(0,1,0,0))He.outlinesFormat="truetype";else{if(ot!=="OTTO")throw new Error("Unsupported OpenType flavor "+lt);He.outlinesFormat="cff"}Ge=function(Ot,rr){for(var Ht=[],qt=44,Zr=0;Zr<rr;Zr+=1){var fi=Ce.getTag(Ot,qt),Hn=Ce.getULong(Ot,qt+4),Ir=Ce.getULong(Ot,qt+8),Wn=Ce.getULong(Ot,qt+12),pi=void 0;pi=Ir<Wn&&"WOFF",Ht.push({tag:fi,offset:Hn,compression:pi,compressedLength:Ir,length:Wn}),qt+=20}return Ht}(Oe,E=Ce.getUShort(Oe,12))}for(var Et=0;Et<E;Et+=1){var pt=Ge[Et],vt=void 0;switch(pt.tag){case"cmap":vt=or(Oe,pt),He.tables.cmap=z.parse(vt.data,vt.offset),He.encoding=new Ie(He.tables.cmap);break;case"cvt ":vt=or(Oe,pt),Je=new Ce.Parser(vt.data,vt.offset),He.tables.cvt=Je.parseShortList(pt.length/2);break;case"fvar":j=pt;break;case"fpgm":vt=or(Oe,pt),Je=new Ce.Parser(vt.data,vt.offset),He.tables.fpgm=Je.parseByteList(pt.length);break;case"head":vt=or(Oe,pt),He.tables.head=Ue.parse(vt.data,vt.offset),He.unitsPerEm=He.tables.head.unitsPerEm,b=He.tables.head.indexToLocFormat;break;case"hhea":vt=or(Oe,pt),He.tables.hhea=et.parse(vt.data,vt.offset),He.ascender=He.tables.hhea.ascender,He.descender=He.tables.hhea.descender,He.numberOfHMetrics=He.tables.hhea.numberOfHMetrics;break;case"hmtx":fe=pt;break;case"ltag":vt=or(Oe,pt),S=at.parse(vt.data,vt.offset);break;case"maxp":vt=or(Oe,pt),He.tables.maxp=Mt.parse(vt.data,vt.offset),He.numGlyphs=He.tables.maxp.numGlyphs;break;case"name":oe=pt;break;case"OS/2":vt=or(Oe,pt),He.tables.os2=sa.parse(vt.data,vt.offset);break;case"post":vt=or(Oe,pt),He.tables.post=Kl.parse(vt.data,vt.offset),He.glyphNames=new Se(He.tables.post);break;case"prep":vt=or(Oe,pt),Je=new Ce.Parser(vt.data,vt.offset),He.tables.prep=Je.parseByteList(pt.length);break;case"glyf":U=pt;break;case"loca":Ae=pt;break;case"CFF ":L=pt;break;case"kern":Me=pt;break;case"GPOS":Y=pt;break;case"GSUB":ee=pt;break;case"meta":tt=pt}}var $t=or(Oe,oe);if(He.tables.name=Jl.parse($t.data,$t.offset,S),He.names=He.tables.name,U&&Ae){var Ct=b===0,At=or(Oe,Ae),Rt=nf.parse(At.data,At.offset,He.numGlyphs,Ct),Nt=or(Oe,U);He.glyphs=hu.parse(Nt.data,Nt.offset,Rt,He)}else{if(!L)throw new Error("Font doesn't contain TrueType or CFF outlines.");var Dt=or(Oe,L);qe.parse(Dt.data,Dt.offset,He)}var Jt=or(Oe,fe);if(ze.parse(Jt.data,Jt.offset,He.numberOfHMetrics,He.numGlyphs,He.glyphs),function(Ot){for(var rr,Ht=Ot.tables.cmap.glyphIndexMap,qt=Object.keys(Ht),Zr=0;Zr<qt.length;Zr+=1){var fi=qt[Zr],Hn=Ht[fi];(rr=Ot.glyphs.get(Hn)).addUnicode(parseInt(fi))}for(var Ir=0;Ir<Ot.glyphs.length;Ir+=1)rr=Ot.glyphs.get(Ir),Ot.cffEncoding?Ot.isCIDFont?rr.name="gid"+Ir:rr.name=Ot.cffEncoding.charset[Ir]:Ot.glyphNames.names&&(rr.name=Ot.glyphNames.glyphIndexToName(Ir))}(He),Me){var Ft=or(Oe,Me);He.kerningPairs=rf.parse(Ft.data,Ft.offset)}else He.kerningPairs={};if(Y){var jt=or(Oe,Y);He.tables.gpos=tf.parse(jt.data,jt.offset),He.position.init()}if(ee){var Kt=or(Oe,ee);He.tables.gsub=$l.parse(Kt.data,Kt.offset)}if(j){var Gt=or(Oe,j);He.tables.fvar=Qh.parse(Gt.data,Gt.offset,He.names)}if(tt){var tr=or(Oe,tt);He.tables.meta=Ql.parse(tr.data,tr.offset),He.metas=He.tables.meta}return He}o.Font=Vt,o.Glyph=it,o.Path=K,o.BoundingBox=Q,o._parse=Ce,o.parse=fa,o.load=function(v,b){(typeof window=="undefined"?sf:of)(v,function(S,E){if(S)return b(S);var L;try{L=fa(E)}catch(j){return b(j,null)}return b(null,L)})},o.loadSync=function(v){return fa(au(e("fs").readFileSync(v)))},Object.defineProperty(o,"__esModule",{value:!0})}(typeof i=="object"&&n!==void 0?i:r.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],237:[function(e,n,i){(function(s){function r(h,p){for(var u=0,a=h.length-1;0<=a;a--){var l=h[a];l==="."?h.splice(a,1):l===".."?(h.splice(a,1),u++):u&&(h.splice(a,1),u--)}if(p)for(;u--;)h.unshift("..");return h}function o(h,p){if(h.filter)return h.filter(p);for(var u=[],a=0;a<h.length;a++)p(h[a],a,h)&&u.push(h[a]);return u}i.resolve=function(){for(var h="",p=!1,u=arguments.length-1;-1<=u&&!p;u--){var a=0<=u?arguments[u]:s.cwd();if(typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");a&&(h=a+"/"+h,p=a.charAt(0)==="/")}return(p?"/":"")+(h=r(o(h.split("/"),function(l){return!!l}),!p).join("/"))||"."},i.normalize=function(h){var p=i.isAbsolute(h),u=c(h,-1)==="/";return(h=r(o(h.split("/"),function(a){return!!a}),!p).join("/"))||p||(h="."),h&&u&&(h+="/"),(p?"/":"")+h},i.isAbsolute=function(h){return h.charAt(0)==="/"},i.join=function(){var h=Array.prototype.slice.call(arguments,0);return i.normalize(o(h,function(p,u){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},i.relative=function(h,p){function u(_){for(var x=0;x<_.length&&_[x]==="";x++);for(var w=_.length-1;0<=w&&_[w]==="";w--);return w<x?[]:_.slice(x,w-x+1)}h=i.resolve(h).substr(1),p=i.resolve(p).substr(1);for(var a=u(h.split("/")),l=u(p.split("/")),d=Math.min(a.length,l.length),f=d,m=0;m<d;m++)if(a[m]!==l[m]){f=m;break}var g=[];for(m=f;m<a.length;m++)g.push("..");return(g=g.concat(l.slice(f))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(h){if(typeof h!="string"&&(h+=""),h.length===0)return".";for(var p=h.charCodeAt(0),u=p===47,a=-1,l=!0,d=h.length-1;1<=d;--d)if((p=h.charCodeAt(d))===47){if(!l){a=d;break}}else l=!1;return a===-1?u?"/":".":u&&a===1?"/":h.slice(0,a)},i.basename=function(h,p){var u=function(a){typeof a!="string"&&(a+="");var l,d=0,f=-1,m=!0;for(l=a.length-1;0<=l;--l)if(a.charCodeAt(l)===47){if(!m){d=l+1;break}}else f===-1&&(m=!1,f=l+1);return f===-1?"":a.slice(d,f)}(h);return p&&u.substr(-1*p.length)===p&&(u=u.substr(0,u.length-p.length)),u},i.extname=function(h){typeof h!="string"&&(h+="");for(var p=-1,u=0,a=-1,l=!0,d=0,f=h.length-1;0<=f;--f){var m=h.charCodeAt(f);if(m===47){if(l)continue;u=f+1;break}a===-1&&(l=!1,a=f+1),m===46?p===-1?p=f:d!==1&&(d=1):p!==-1&&(d=-1)}return p===-1||a===-1||d===0||d===1&&p===a-1&&p===u+1?"":h.slice(p,a)};var c="ab".substr(-1)==="b"?function(h,p,u){return h.substr(p,u)}:function(h,p,u){return p<0&&(p=h.length+p),h.substr(p,u)}}).call(this,e("_process"))},{_process:238}],238:[function(e,n,i){var s,r,o=n.exports={};function c(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function p(x){if(s===setTimeout)return setTimeout(x,0);if((s===c||!s)&&setTimeout)return s=setTimeout,setTimeout(x,0);try{return s(x,0)}catch{try{return s.call(null,x,0)}catch{return s.call(this,x,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:c}catch{s=c}try{r=typeof clearTimeout=="function"?clearTimeout:h}catch{r=h}})();var u,a=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?a=u.concat(a):d=-1,a.length&&m())}function m(){if(!l){var x=p(f);l=!0;for(var w=a.length;w;){for(u=a,a=[];++d<w;)u&&u[d].run();d=-1,w=a.length}u=null,l=!1,function(M){if(r===clearTimeout)return clearTimeout(M);if((r===h||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(M);try{r(M)}catch{try{return r.call(null,M)}catch{return r.call(this,M)}}}(x)}}function g(x,w){this.fun=x,this.array=w}function _(){}o.nextTick=function(x){var w=new Array(arguments.length-1);if(1<arguments.length)for(var M=1;M<arguments.length;M++)w[M-1]=arguments[M];a.push(new g(x,w)),a.length!==1||l||p(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(x){return[]},o.binding=function(x){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(x){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],239:[function(e,n,i){(function(s){if(!s.fetch){var r="URLSearchParams"in s,o="Symbol"in s&&"iterator"in Symbol,c="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),h="FormData"in s,p="ArrayBuffer"in s;if(p)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(D){return D&&DataView.prototype.isPrototypeOf(D)},l=ArrayBuffer.isView||function(D){return D&&-1<u.indexOf(Object.prototype.toString.call(D))};x.prototype.append=function(D,k){D=m(D),k=g(k);var N=this.map[D];this.map[D]=N?N+","+k:k},x.prototype.delete=function(D){delete this.map[m(D)]},x.prototype.get=function(D){return D=m(D),this.has(D)?this.map[D]:null},x.prototype.has=function(D){return this.map.hasOwnProperty(m(D))},x.prototype.set=function(D,k){this.map[m(D)]=g(k)},x.prototype.forEach=function(D,k){for(var N in this.map)this.map.hasOwnProperty(N)&&D.call(k,this.map[N],N,this)},x.prototype.keys=function(){var D=[];return this.forEach(function(k,N){D.push(N)}),_(D)},x.prototype.values=function(){var D=[];return this.forEach(function(k){D.push(k)}),_(D)},x.prototype.entries=function(){var D=[];return this.forEach(function(k,N){D.push([N,k])}),_(D)},o&&(x.prototype[Symbol.iterator]=x.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},I.call(R.prototype),I.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},O.error=function(){var D=new O(null,{status:0,statusText:""});return D.type="error",D};var f=[301,302,303,307,308];O.redirect=function(D,k){if(f.indexOf(k)===-1)throw new RangeError("Invalid status code");return new O(null,{status:k,headers:{location:D}})},s.Headers=x,s.Request=R,s.Response=O,s.fetch=function(D,k){return new Promise(function(N,q){var X=new R(D,k),G=new XMLHttpRequest;G.onload=function(){var Q,K,_e={status:G.status,statusText:G.statusText,headers:(Q=G.getAllResponseHeaders()||"",K=new x,Q.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ge){var ce=ge.split(":"),de=ce.shift().trim();if(de){var Ee=ce.join(":").trim();K.append(de,Ee)}}),K)};_e.url="responseURL"in G?G.responseURL:_e.headers.get("X-Request-URL");var pe="response"in G?G.response:G.responseText;N(new O(pe,_e))},G.onerror=function(){q(new TypeError("Network request failed"))},G.ontimeout=function(){q(new TypeError("Network request failed"))},G.open(X.method,X.url,!0),X.credentials==="include"?G.withCredentials=!0:X.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&c&&(G.responseType="blob"),X.headers.forEach(function(Q,K){G.setRequestHeader(K,Q)}),G.send(X._bodyInit===void 0?null:X._bodyInit)})},s.fetch.polyfill=!0}function m(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function g(D){return typeof D!="string"&&(D=String(D)),D}function _(D){var k={next:function(){var N=D.shift();return{done:N===void 0,value:N}}};return o&&(k[Symbol.iterator]=function(){return k}),k}function x(D){this.map={},D instanceof x?D.forEach(function(k,N){this.append(N,k)},this):Array.isArray(D)?D.forEach(function(k){this.append(k[0],k[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(k){this.append(k,D[k])},this)}function w(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function M(D){return new Promise(function(k,N){D.onload=function(){k(D.result)},D.onerror=function(){N(D.error)}})}function A(D){var k=new FileReader,N=M(k);return k.readAsArrayBuffer(D),N}function T(D){if(D.slice)return D.slice(0);var k=new Uint8Array(D.byteLength);return k.set(new Uint8Array(D)),k.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(c&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(h&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(r&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(p&&c&&a(D))this._bodyArrayBuffer=T(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(D)&&!l(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var D=w(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var D,k,N,q=w(this);if(q)return q;if(this._bodyBlob)return D=this._bodyBlob,k=new FileReader,N=M(k),k.readAsText(D),N;if(this._bodyArrayBuffer)return Promise.resolve(function(X){for(var G=new Uint8Array(X),Q=new Array(G.length),K=0;K<G.length;K++)Q[K]=String.fromCharCode(G[K]);return Q.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(D,k){var N,q,X=(k=k||{}).body;if(D instanceof R){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,k.headers||(this.headers=new x(D.headers)),this.method=D.method,this.mode=D.mode,X||D._bodyInit==null||(X=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=k.credentials||this.credentials||"omit",!k.headers&&this.headers||(this.headers=new x(k.headers)),this.method=(N=k.method||this.method||"GET",q=N.toUpperCase(),-1<d.indexOf(q)?q:N),this.mode=k.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&X)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(X)}function P(D){var k=new FormData;return D.trim().split("&").forEach(function(N){if(N){var q=N.split("="),X=q.shift().replace(/\+/g," "),G=q.join("=").replace(/\+/g," ");k.append(decodeURIComponent(X),decodeURIComponent(G))}}),k}function O(D,k){k=k||{},this.type="default",this.status=k.status===void 0?200:k.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in k?k.statusText:"OK",this.headers=new x(k.headers),this.url=k.url||"",this._initBody(D)}})(typeof self!="undefined"?self:this)},{}],240:[function(e,n,i){e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=c(e("../core/main")),o=c(e("../color/color_conversion"));function c(a){return a&&a.__esModule?a:{default:a}}var h=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];r.default.prototype._rgbColorName=function(a){var l=o.default._rgbaToHSBA(a);return function(d){var f;if(d[0]!==0){d[0]=Math.round(100*d[0]);var m=d[0].toString().split(""),g=m.length-1;m[g]=parseInt(m[g]),m[g]<2.5?m[g]=0:2.5<=m[g]&&m[g]<7.5&&(m[g]=5),m.length===2?(m[0]=parseInt(m[0]),7.5<=m[g]&&(m[g]=0,m[0]=m[0]+1),d[0]=10*m[0]+m[1]):7.5<=m[g]?d[0]=10:d[0]=m[g]}d[2]=d[2]/255;for(var _=d.length-1;1<=_;_--)d[_]<=.25?d[_]=0:.25<d[_]&&d[_]<.75?d[_]=.5:d[_]=1;if(d[0]===0&&d[1]===0&&d[2]===1){for(var x=2;0<=x;x--)s[x]=Math.round(1e4*s[x])/1e4;for(var w=0;w<h.length;w++){if(h[w].h===s[0]&&h[w].s===s[1]&&h[w].b===s[2]){f=h[w].name;break}f="white"}}else for(var M=0;M<p.length;M++)if(p[M].h===d[0]&&p[M].s===d[1]&&p[M].b===d[2]){f=p[M].name;break}return f}([(s=l)[0],l[1],l[2]])};var u=r.default;i.default=u},{"../color/color_conversion":246,"../core/main":260,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.split":188}],241:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},o="_Description",c="_fallbackDesc",h="_fallbackTable",p="_Label",u="_labelDesc",a="_labelTable";function l(f){if(f==="label"||f==="fallback")throw new Error("description should not be LABEL or FALLBACK");return f.endsWith(".")||f.endsWith(";")||f.endsWith(",")||f.endsWith("?")||f.endsWith("!")||(f+="."),f}r.default.prototype.describe=function(f,m){if(r.default._validateParameters("describe",arguments),typeof f=="string"){var g=this.canvas.id;f=l(f),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==f&&(this.descriptions.fallback.innerHTML=f):this._describeHTML("fallback",f),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==f&&(this.descriptions.label.innerHTML=f):this._describeHTML("label",f))}},r.default.prototype.describeElement=function(f,m,g){if(r.default._validateParameters("describeElement",arguments),typeof m=="string"&&typeof f=="string"){var _=this.canvas.id;m=l(m);var x=function(M){if(M==="label"||M==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return M.endsWith(".")||M.endsWith(";")||M.endsWith(",")?M=M.replace(/.$/,":"):M.endsWith(":")||(M+=":"),M}(f);f=f.replace(/[^a-zA-Z0-9]/g,"");var w='<th scope="row">'.concat(x,"</th><td>").concat(m,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(_).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[f]?this.descriptions.fallbackElements[f].innerHTML!==w&&(this.descriptions.fallbackElements[f].innerHTML=w):this._describeElementHTML("fallback",f,w),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[f]?this.descriptions.labelElements[f].innerHTML!==w&&(this.descriptions.labelElements[f].innerHTML=w):this._describeElementHTML("label",f,w))}},r.default.prototype._describeHTML=function(f,m){var g=this.canvas.id;if(f==="fallback"){if(this.dummyDOM.querySelector("#".concat(g+o)))this.dummyDOM.querySelector("#"+g+h).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+c,'"></p>'));else{var _='<div id="'.concat(g).concat(o,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(c,'"></p></div>');this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#".concat(g)).innerHTML=_}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(c)),void(this.descriptions.fallback.innerHTML=m)}if(f==="label"){if(this.dummyDOM.querySelector("#".concat(g+p)))this.dummyDOM.querySelector("#".concat(g+a))&&this.dummyDOM.querySelector("#".concat(g+a)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(u,'"></p>'));else{var x='<div id="'.concat(g).concat(p,'" class="p5Label"><p id="').concat(g).concat(u,'"></p></div>');this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",x)}return this.descriptions.label=this.dummyDOM.querySelector("#"+g+u),void(this.descriptions.label.innerHTML=m)}},r.default.prototype._describeElementHTML=function(f,m,g){var _=this.canvas.id;if(f==="fallback"){if(this.dummyDOM.querySelector("#".concat(_+o)))this.dummyDOM.querySelector("#"+_+h)||this.dummyDOM.querySelector("#"+_+c).insertAdjacentHTML("afterend",'<table id="'.concat(_).concat(h,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var x='<div id="'.concat(_).concat(o,'" role="region" aria-label="Canvas Description"><table id="').concat(_).concat(h,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(_,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutput")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+_).innerHTML=x}var w=document.createElement("tr");return w.id=_+"_fte_"+m,this.dummyDOM.querySelector("#"+_+h).appendChild(w),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(_).concat("_fte_").concat(m)),void(this.descriptions.fallbackElements[m].innerHTML=g)}if(f==="label"){if(this.dummyDOM.querySelector("#".concat(_+p)))this.dummyDOM.querySelector("#".concat(_+a))||this.dummyDOM.querySelector("#"+_+u).insertAdjacentHTML("afterend",'<table id="'.concat(_+a,'"></table>'));else{var M='<div id="'.concat(_).concat(p,'" class="p5Label"><table id="').concat(_).concat(a,'"></table></div>');this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",M):this.dummyDOM.querySelector("#"+_).insertAdjacentHTML("afterend",M)}var A=document.createElement("tr");A.id=_+"_lte_"+m,this.dummyDOM.querySelector("#"+_+a).appendChild(A),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(_).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=g}};var d=r.default;i.default=d},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.ends-with":181,"core-js/modules/es.string.replace":186}],242:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype._updateGridOutput=function(c){if(this.dummyDOM.querySelector("#".concat(c,"_summary"))){var h=this._accessibleOutputs[c],p=function(l,d){var f="",m="",g=0;for(var _ in d){var x=0;for(var w in d[_]){var M='<li id="'.concat(l,"shape").concat(g,'">').concat(d[_][w].color," ").concat(_,",");_==="line"?M+=" location = ".concat(d[_][w].pos,", length = ").concat(d[_][w].length," pixels"):(M+=" location = ".concat(d[_][w].pos),_!=="point"&&(M+=", area = ".concat(d[_][w].area," %")),M+="</li>"),f+=M,x++,g++}m=1<x?"".concat(m," ").concat(x," ").concat(_,"s"):"".concat(m," ").concat(x," ").concat(_)}return{numShapes:[g,m],details:f}}(c,this.ingredients.shapes),u=function(l,d,f,m){var g="".concat(d," canvas, ").concat(f," by ").concat(m," pixels, contains ").concat(l[0]);return g=l[0]===1?"".concat(g," shape: ").concat(l[1]):"".concat(g," shapes: ").concat(l[1]),g}(p.numShapes,this.ingredients.colors.background,this.width,this.height),a=function(l,d){var f=0,m="",g=Array.apply(null,Array(10)).map(function(){});for(var _ in g)g[_]=Array.apply(null,Array(10)).map(function(){});for(var x in d)for(var w in d[x]){var M=void 0;M=x!=="line"?'<a href="#'.concat(l,"shape").concat(f,'">').concat(d[x][w].color," ").concat(x,"</a>"):'<a href="#'.concat(l,"shape").concat(f,'">').concat(d[x][w].color," ").concat(x," midpoint</a>"),g[d[x][w].loc.locY][d[x][w].loc.locX]?g[d[x][w].loc.locY][d[x][w].loc.locX]=g[d[x][w].loc.locY][d[x][w].loc.locX]+"  "+M:g[d[x][w].loc.locY][d[x][w].loc.locX]=M,f++}for(var A in g){var T="<tr>";for(var I in g[A])T+="<td>",g[A][I]!==void 0&&(T+=g[A][I]),T+="</td>";m=m+T+"</tr>"}return m}(c,this.ingredients.shapes);u!==h.summary.innerHTML&&(h.summary.innerHTML=u),a!==h.map.innerHTML&&(h.map.innerHTML=a),p.details!==h.shapeDetails.innerHTML&&(h.shapeDetails.innerHTML=p.details),this._accessibleOutputs[c]=h}};var o=r.default;i.default=o},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.map":159}],243:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(p,u,a){return p[0]<.4*u?p[1]<.4*a?"top left":p[1]>.6*a?"bottom left":"mid left":p[0]>.6*u?p[1]<.4*a?"top right":p[1]>.6*a?"bottom right":"mid right":p[1]<.4*a?"top middle":p[1]>.6*a?"bottom middle":"middle"}function c(p,u,a){var l=Math.floor(p[0]/u*10),d=Math.floor(p[1]/a*10);return l===10&&--l,d===10&&--d,{locX:l,locY:d}}r.default.prototype.textOutput=function(p){r.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),p===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},r.default.prototype.gridOutput=function(p){r.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),p===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},r.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},r.default.prototype._createOutput=function(p,u){var a,l,d,f=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(f).parentNode);var m="";u==="Fallback"?(a=f+p,l=f+"accessibleOutput",this.dummyDOM.querySelector("#".concat(l))||(this.dummyDOM.querySelector("#".concat(f,"_Description"))?this.dummyDOM.querySelector("#".concat(f,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(l,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(f)).innerHTML='<div id="'.concat(l,'" role="region" aria-label="Canvas Outputs"></div>'))):u==="Label"&&(a=f+p+(m=u),l=f+"accessibleOutput"+u,this.dummyDOM.querySelector("#".concat(l))||(this.dummyDOM.querySelector("#".concat(f,"_Label"))?this.dummyDOM.querySelector("#".concat(f,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(l,'"></div>')):this.dummyDOM.querySelector("#".concat(f)).insertAdjacentHTML("afterend",'<div id="'.concat(l,'"></div>')))),this._accessibleOutputs[a]={},p==="textOutput"?(m="#".concat(f,"gridOutput").concat(m),d='<div id="'.concat(a,'">Text Output<div id="').concat(a,'Summary" aria-label="text output summary"><p id="').concat(a,'_summary"></p><ul id="').concat(a,'_list"></ul></div><table id="').concat(a,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#".concat(l)).innerHTML=d,this._accessibleOutputs[a].list=this.dummyDOM.querySelector("#".concat(a,"_list"))):p==="gridOutput"&&(m="#".concat(f,"textOutput").concat(m),d='<div id="'.concat(a,'">Grid Output<p id="').concat(a,'_summary" aria-label="grid output summary"><table id="').concat(a,'_map" summary="grid output content"></table><ul id="').concat(a,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("afterend",d):this.dummyDOM.querySelector("#".concat(l)).innerHTML=d,this._accessibleOutputs[a].map=this.dummyDOM.querySelector("#".concat(a,"_map"))),this._accessibleOutputs[a].shapeDetails=this.dummyDOM.querySelector("#".concat(a,"_shapeDetails")),this._accessibleOutputs[a].summary=this.dummyDOM.querySelector("#".concat(a,"_summary"))},r.default.prototype._updateAccsOutput=function(){var p=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(p+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(p+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(p+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(p+"gridOutputLabel"))},r.default.prototype._accsBackground=function(p){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==p&&(this.ingredients.colors.backgroundRGBA=p,this.ingredients.colors.background=this._rgbColorName(p))},r.default.prototype._accsCanvasColors=function(p,u){p==="fill"?this.ingredients.colors.fillRGBA!==u&&(this.ingredients.colors.fillRGBA=u,this.ingredients.colors.fill=this._rgbColorName(u)):p==="stroke"&&this.ingredients.colors.strokeRGBA!==u&&(this.ingredients.colors.strokeRGBA=u,this.ingredients.colors.stroke=this._rgbColorName(u))},r.default.prototype._accsOutput=function(p,u){p==="ellipse"&&u[2]===u[3]?p="circle":p==="rectangle"&&u[2]===u[3]&&(p="square");var a={},l=!0,d=function(_,x){var w,M;return M=_==="rectangle"||_==="ellipse"||_==="arc"||_==="circle"||_==="square"?(w=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):_==="triangle"?(w=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):_==="quadrilateral"?(w=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):_==="line"?(w=(x[0]+x[2])/2,(x[1]+x[3])/2):(w=x[0],x[1]),[w,M]}(p,u);if(p==="line"){a.color=this.ingredients.colors.stroke,a.length=Math.round(this.dist(u[0],u[1],u[2],u[3]));var f=o([u[0],[1]],this.width,this.height),m=o([u[2],[3]],this.width,this.height);a.loc=c(d,this.width,this.height),a.pos=f===m?"at ".concat(f):"from ".concat(f," to ").concat(m)}else p==="point"?a.color=this.ingredients.colors.stroke:(a.color=this.ingredients.colors.fill,a.area=function(_,x,w,M){var A=0;if(_==="arc"){var T=((x[5]-x[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(A=T*x[2]*x[3]/8,x[6]==="open"||x[6]==="chord"){var I=x[0],R=x[1],P=x[0]+x[2]/2*Math.cos(x[4]).toFixed(2),O=x[1]+x[3]/2*Math.sin(x[4]).toFixed(2),D=x[0]+x[2]/2*Math.cos(x[5]).toFixed(2),k=x[1]+x[3]/2*Math.sin(x[5]).toFixed(2),N=Math.abs(I*(O-k)+P*(k-R)+D*(R-O))/2;T>Math.PI?A+=N:A-=N}}else _==="ellipse"||_==="circle"?A=3.14*x[2]/2*x[3]/2:_==="line"||_==="point"?A=0:_==="quadrilateral"?A=Math.abs((x[6]+x[0])*(x[7]-x[1])+(x[0]+x[2])*(x[1]-x[3])+(x[2]+x[4])*(x[3]-x[5])+(x[4]+x[6])*(x[5]-x[7]))/2:_==="rectangle"||_==="square"?A=x[2]*x[3]:_==="triangle"&&(A=Math.abs(x[0]*(x[3]-x[5])+x[2]*(x[5]-x[1])+x[4]*(x[1]-x[3]))/2);return Math.round(100*A/(w*M))}(p,u,this.width,this.height)),a.pos=o(d,this.width,this.height),a.loc=c(d,this.width,this.height);if(this.ingredients.shapes[p]){if(this.ingredients.shapes[p]!==[a]){for(var g in this.ingredients.shapes[p])JSON.stringify(this.ingredients.shapes[p][g])===JSON.stringify(a)&&(l=!1);l===!0&&this.ingredients.shapes[p].push(a)}}else this.ingredients.shapes[p]=[a]};var h=r.default;i.default=h},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.map":159,"core-js/modules/es.number.to-fixed":169}],244:[function(e,n,i){e("core-js/modules/es.array.concat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype._updateTextOutput=function(c){if(this.dummyDOM.querySelector("#".concat(c,"_summary"))){var h=this._accessibleOutputs[c],p=function(l,d){var f="",m=0;for(var g in d)for(var _ in d[g]){var x='<li><a href="#'.concat(l,"shape").concat(m,'">').concat(d[g][_].color," ").concat(g,"</a>");g==="line"?x+=", ".concat(d[g][_].pos,", ").concat(d[g][_].length," pixels long.</li>"):(x+=", at ".concat(d[g][_].pos),g!=="point"&&(x+=", covering ".concat(d[g][_].area,"% of the canvas")),x+=".</li>"),f+=x,m++}return{numShapes:m,listShapes:f}}(c,this.ingredients.shapes),u=function(l,d,f,m){var g="Your output is a, ".concat(f," by ").concat(m," pixels, ").concat(d," canvas containing the following");return g=l===1?"".concat(g," shape:"):"".concat(g," ").concat(l," shapes:"),g}(p.numShapes,this.ingredients.colors.background,this.width,this.height),a=function(l,d){var f="",m=0;for(var g in d)for(var _ in d[g]){var x='<tr id="'.concat(l,"shape").concat(m,'"><th>').concat(d[g][_].color," ").concat(g,"</th>");g==="line"?x+="<td>location = ".concat(d[g][_].pos,"</td><td>length = ").concat(d[g][_].length," pixels</td></tr>"):(x+="<td>location = ".concat(d[g][_].pos,"</td>"),g!=="point"&&(x+="<td> area = ".concat(d[g][_].area,"%</td>")),x+="</tr>"),f+=x,m++}return f}(c,this.ingredients.shapes);u!==h.summary.innerHTML&&(h.summary.innerHTML=u),p.listShapes!==h.list.innerHTML&&(h.list.innerHTML=p.listShapes),a!==h.shapeDetails.innerHTML&&(h.shapeDetails.innerHTML=a),this._accessibleOutputs[c]=h}};var o=r.default;i.default=o},{"../core/main":260,"core-js/modules/es.array.concat":148}],245:[function(e,n,i){var s,r=(s=e("./core/main"))&&s.__esModule?s:{default:s};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),n.exports=r.default},{"./accessibility/color_namer":240,"./accessibility/describe":241,"./accessibility/gridOutput":242,"./accessibility/outputs":243,"./accessibility/textOutput":244,"./color/color_conversion":246,"./color/creating_reading":247,"./color/p5.Color":248,"./color/setting":249,"./core/constants":250,"./core/environment":251,"./core/friendly_errors/fes_core":252,"./core/friendly_errors/file_errors":253,"./core/friendly_errors/stacktrace":254,"./core/friendly_errors/validate_params":255,"./core/helpers":256,"./core/init":257,"./core/legacy":259,"./core/main":260,"./core/p5.Element":261,"./core/p5.Graphics":262,"./core/p5.Renderer":263,"./core/p5.Renderer2D":264,"./core/preload":265,"./core/rendering":266,"./core/shape/2d_primitives":267,"./core/shape/attributes":268,"./core/shape/curves":269,"./core/shape/vertex":270,"./core/shim":271,"./core/structure":272,"./core/transform":273,"./data/local_storage.js":274,"./data/p5.TypedDict":275,"./dom/dom":276,"./events/acceleration":277,"./events/keyboard":278,"./events/mouse":279,"./events/touch":280,"./image/filters":281,"./image/image":282,"./image/loading_displaying":283,"./image/p5.Image":284,"./image/pixels":285,"./io/files":286,"./io/p5.Table":287,"./io/p5.TableRow":288,"./io/p5.XML":289,"./math/calculation":290,"./math/math":291,"./math/noise":292,"./math/p5.Vector":293,"./math/random":294,"./math/trigonometry":295,"./typography/attributes":296,"./typography/loading_displaying":297,"./typography/p5.Font":298,"./utilities/array_functions":299,"./utilities/conversion":300,"./utilities/string_functions":301,"./utilities/time_date":302,"./webgl/3d_primitives":303,"./webgl/interaction":304,"./webgl/light":305,"./webgl/loading":306,"./webgl/material":307,"./webgl/p5.Camera":308,"./webgl/p5.Geometry":309,"./webgl/p5.Matrix":310,"./webgl/p5.RenderBuffer":311,"./webgl/p5.RendererGL":314,"./webgl/p5.RendererGL.Immediate":312,"./webgl/p5.RendererGL.Retained":313,"./webgl/p5.Shader":315,"./webgl/p5.Texture":316,"./webgl/text":317}],246:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.ColorConversion={},r.default.ColorConversion._hsbaToHSLA=function(c){var h=c[0],p=c[1],u=c[2],a=(2-p)*u/2;return a!=0&&(a==1?p=0:a<.5?p/=2-p:p=p*u/(2-2*a)),[h,p,a,c[3]]},r.default.ColorConversion._hsbaToRGBA=function(c){var h=6*c[0],p=c[1],u=c[2],a=[];if(p===0)a=[u,u,u,c[3]];else{var l,d,f,m=Math.floor(h),g=u*(1-p),_=u*(1-p*(h-m)),x=u*(1-p*(1+m-h));f=m===1?(l=_,d=u,g):m===2?(l=g,d=u,x):m===3?(l=g,d=_,u):m===4?(l=x,d=g,u):m===5?(l=u,d=g,_):(l=u,d=x,g),a=[l,d,f,c[3]]}return a},r.default.ColorConversion._hslaToHSBA=function(c){var h,p=c[0],u=c[1],a=c[2];return[p,u=2*((h=a<.5?(1+u)*a:a+u-a*u)-a)/h,h,c[3]]},r.default.ColorConversion._hslaToRGBA=function(c){var h=6*c[0],p=c[1],u=c[2],a=[];if(p===0)a=[u,u,u,c[3]];else{var l,d=2*u-(l=u<.5?(1+p)*u:u+p-u*p),f=function(m,g,_){return m<0?m+=6:6<=m&&(m-=6),m<1?g+(_-g)*m:m<3?_:m<4?g+(_-g)*(4-m):g};a=[f(2+h,d,l),f(h,d,l),f(h-2,d,l),c[3]]}return a},r.default.ColorConversion._rgbaToHSBA=function(c){var h,p,u=c[0],a=c[1],l=c[2],d=Math.max(u,a,l),f=d-Math.min(u,a,l);return f==0?p=h=0:(p=f/d,u===d?h=(a-l)/f:a===d?h=2+(l-u)/f:l===d&&(h=4+(u-a)/f),h<0?h+=6:6<=h&&(h-=6)),[h/6,p,d,c[3]]},r.default.ColorConversion._rgbaToHSLA=function(c){var h,p,u=c[0],a=c[1],l=c[2],d=Math.max(u,a,l),f=Math.min(u,a,l),m=d+f,g=d-f;return g==0?p=h=0:(p=m<1?g/m:g/(2-m),u===d?h=(a-l)/g:a===d?h=2+(l-u)/g:l===d&&(h=4+(u-a)/g),h<0?h+=6:6<=h&&(h-=6)),[h/6,p,m/2,c[3]]};var o=r.default.ColorConversion;i.default=o},{"../core/main":260}],247:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.alpha=function(u){return o.default._validateParameters("alpha",arguments),this.color(u)._getAlpha()},o.default.prototype.blue=function(u){return o.default._validateParameters("blue",arguments),this.color(u)._getBlue()},o.default.prototype.brightness=function(u){return o.default._validateParameters("brightness",arguments),this.color(u)._getBrightness()},o.default.prototype.color=function(){if(o.default._validateParameters("color",arguments),arguments[0]instanceof o.default.Color)return arguments[0];var u=arguments[0]instanceof Array?arguments[0]:arguments;return new o.default.Color(this,u)},o.default.prototype.green=function(u){return o.default._validateParameters("green",arguments),this.color(u)._getGreen()},o.default.prototype.hue=function(u){return o.default._validateParameters("hue",arguments),this.color(u)._getHue()},o.default.prototype.lerpColor=function(u,a,l){o.default._validateParameters("lerpColor",arguments);var d,f,m,g,_,x,w=this._colorMode,M=this._colorMaxes;if(w===c.RGB)_=u.levels.map(function(A){return A/255}),x=a.levels.map(function(A){return A/255});else if(w===c.HSB)u._getBrightness(),a._getBrightness(),_=u.hsba,x=a.hsba;else{if(w!==c.HSL)throw new Error("".concat(w,"cannot be used for interpolation."));u._getLightness(),a._getLightness(),_=u.hsla,x=a.hsla}return l=Math.max(Math.min(l,1),0),this.lerp===void 0&&(this.lerp=function(A,T,I){return I*(T-A)+A}),d=this.lerp(_[0],x[0],l),f=this.lerp(_[1],x[1],l),m=this.lerp(_[2],x[2],l),g=this.lerp(_[3],x[3],l),d*=M[w][0],f*=M[w][1],m*=M[w][2],g*=M[w][3],this.color(d,f,m,g)},o.default.prototype.lightness=function(u){return o.default._validateParameters("lightness",arguments),this.color(u)._getLightness()},o.default.prototype.red=function(u){return o.default._validateParameters("red",arguments),this.color(u)._getRed()},o.default.prototype.saturation=function(u){return o.default._validateParameters("saturation",arguments),this.color(u)._getSaturation()};var p=o.default;i.default=p},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"./p5.Color":248,"core-js/modules/es.array.map":159}],248:[function(e,n,i){function s(_){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("../core/main")),o=function(_){if(_&&_.__esModule)return _;if(_===null||s(_)!=="object"&&typeof _!="function")return{default:_};var x=h();if(x&&x.has(_))return x.get(_);var w={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in _)if(Object.prototype.hasOwnProperty.call(_,A)){var T=M?Object.getOwnPropertyDescriptor(_,A):null;T&&(T.get||T.set)?Object.defineProperty(w,A,T):w[A]=_[A]}return w.default=_,x&&x.set(_,w),w}(e("../core/constants")),c=p(e("./color_conversion"));function h(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return h=function(){return _},_}function p(_){return _&&_.__esModule?_:{default:_}}r.default.Color=function(_,x){if(this._storeModeAndMaxes(_._colorMode,_._colorMaxes),this.mode!==o.RGB&&this.mode!==o.HSL&&this.mode!==o.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=r.default.Color._parseInputs.apply(this,x),this._calculateLevels(),this},r.default.Color.prototype.toString=function(_){var x=this.levels,w=this._array,M=w[3];switch(_){case"#rrggbb":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16));case"#rrggbbaa":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16),x[3]<16?"0".concat(x[3].toString(16)):x[3].toString(16));case"#rgb":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16),Math.round(15*w[3]).toString(16));case"rgb":return"rgb(".concat(x[0],", ",x[1],", ",x[2],")");case"rgb%":return"rgb(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%, ",(100*w[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[o.HSB][0],", ",this.hsba[1]*this.maxes[o.HSB][1],", ",this.hsba[2]*this.maxes[o.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[o.HSB][0],", ",this.hsba[1]*this.maxes[o.HSB][1],", ",this.hsba[2]*this.maxes[o.HSB][2],", ",M,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[o.HSL][0],", ",this.hsla[1]*this.maxes[o.HSL][1],", ",this.hsla[2]*this.maxes[o.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[o.HSL][0],", ",this.hsla[1]*this.maxes[o.HSL][1],", ",this.hsla[2]*this.maxes[o.HSL][2],", ",M,")");case"hsla%":return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(x[0],",",x[1],",",x[2],",",M,")")}},r.default.Color.prototype.setRed=function(_){this._array[0]=_/this.maxes[o.RGB][0],this._calculateLevels()},r.default.Color.prototype.setGreen=function(_){this._array[1]=_/this.maxes[o.RGB][1],this._calculateLevels()},r.default.Color.prototype.setBlue=function(_){this._array[2]=_/this.maxes[o.RGB][2],this._calculateLevels()},r.default.Color.prototype.setAlpha=function(_){this._array[3]=_/this.maxes[this.mode][3],this._calculateLevels()},r.default.Color.prototype._calculateLevels=function(){for(var _=this._array,x=this.levels=new Array(_.length),w=_.length-1;0<=w;--w)x[w]=Math.round(255*_[w])},r.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},r.default.Color.prototype._storeModeAndMaxes=function(_,x){this.mode=_,this.maxes=x},r.default.Color.prototype._getMode=function(){return this.mode},r.default.Color.prototype._getMaxes=function(){return this.maxes},r.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[o.RGB][2]},r.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[o.HSB][2]},r.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[o.RGB][1]},r.default.Color.prototype._getHue=function(){return this.mode===o.HSB?(this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[o.HSB][0]):(this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[o.HSL][0])},r.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[o.HSL][2]},r.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[o.RGB][0]},r.default.Color.prototype._getSaturation=function(){return this.mode===o.HSB?(this.hsba||(this.hsba=c.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[o.HSB][1]):(this.hsla||(this.hsla=c.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[o.HSL][1])};var u={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a=/\s*/,l=/(\d{1,3})/,d=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,f=new RegExp("".concat(d.source,"%")),m={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",l.source,",",l.source,",",l.source,"\\)$"].join(a.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(a.source),"i"),RGBA:new RegExp(["^rgba\\(",l.source,",",l.source,",",l.source,",",d.source,"\\)$"].join(a.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",d.source,"\\)$"].join(a.source),"i"),HSL:new RegExp(["^hsl\\(",l.source,",",f.source,",",f.source,"\\)$"].join(a.source),"i"),HSLA:new RegExp(["^hsla\\(",l.source,",",f.source,",",f.source,",",d.source,"\\)$"].join(a.source),"i"),HSB:new RegExp(["^hsb\\(",l.source,",",f.source,",",f.source,"\\)$"].join(a.source),"i"),HSBA:new RegExp(["^hsba\\(",l.source,",",f.source,",",f.source,",",d.source,"\\)$"].join(a.source),"i")};r.default.Color._parseInputs=function(_,x,w,M){var A,T=arguments.length,I=this.mode,R=this.maxes[I],P=[];if(3<=T){for(P[0]=_/R[0],P[1]=x/R[1],P[2]=w/R[2],P[3]=typeof M=="number"?M/R[3]:1,A=P.length-1;0<=A;--A){var O=P[A];O<0?P[A]=0:1<O&&(P[A]=1)}return I===o.HSL?c.default._hslaToRGBA(P):I===o.HSB?c.default._hsbaToRGBA(P):P}if(T===1&&typeof _=="string"){var D=_.trim().toLowerCase();if(u[D])return r.default.Color._parseInputs.call(this,u[D]);if(m.HEX3.test(D))return(P=m.HEX3.exec(D).slice(1).map(function(k){return parseInt(k+k,16)/255}))[3]=1,P;if(m.HEX6.test(D))return(P=m.HEX6.exec(D).slice(1).map(function(k){return parseInt(k,16)/255}))[3]=1,P;if(m.HEX4.test(D))return P=m.HEX4.exec(D).slice(1).map(function(k){return parseInt(k+k,16)/255});if(m.HEX8.test(D))return P=m.HEX8.exec(D).slice(1).map(function(k){return parseInt(k,16)/255});if(m.RGB.test(D))return(P=m.RGB.exec(D).slice(1).map(function(k){return k/255}))[3]=1,P;if(m.RGB_PERCENT.test(D))return(P=m.RGB_PERCENT.exec(D).slice(1).map(function(k){return parseFloat(k)/100}))[3]=1,P;if(m.RGBA.test(D))return P=m.RGBA.exec(D).slice(1).map(function(k,N){return N===3?parseFloat(k):k/255});if(m.RGBA_PERCENT.test(D))return P=m.RGBA_PERCENT.exec(D).slice(1).map(function(k,N){return N===3?parseFloat(k):parseFloat(k)/100});if(m.HSL.test(D)?(P=m.HSL.exec(D).slice(1).map(function(k,N){return N===0?parseInt(k,10)/360:parseInt(k,10)/100}))[3]=1:m.HSLA.test(D)&&(P=m.HSLA.exec(D).slice(1).map(function(k,N){return N===0?parseInt(k,10)/360:N===3?parseFloat(k):parseInt(k,10)/100})),(P=P.map(function(k){return Math.max(Math.min(k,1),0)})).length)return c.default._hslaToRGBA(P);if(m.HSB.test(D)?(P=m.HSB.exec(D).slice(1).map(function(k,N){return N===0?parseInt(k,10)/360:parseInt(k,10)/100}))[3]=1:m.HSBA.test(D)&&(P=m.HSBA.exec(D).slice(1).map(function(k,N){return N===0?parseInt(k,10)/360:N===3?parseFloat(k):parseInt(k,10)/100})),P.length){for(A=P.length-1;0<=A;--A)P[A]=Math.max(Math.min(P[A],1),0);return c.default._hsbaToRGBA(P)}P=[1,1,1,1]}else{if(T!==1&&T!==2||typeof _!="number")throw new Error("".concat(arguments,"is not a valid color representation."));P[0]=_/R[2],P[1]=_/R[2],P[2]=_/R[2],P[3]=typeof x=="number"?x/R[3]:1,P=P.map(function(k){return Math.max(Math.min(k,1),0)})}return P};var g=r.default.Color;i.default=g},{"../core/constants":250,"../core/main":260,"./color_conversion":246,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.trim":190}],249:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.array.fill"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}e("./p5.Color"),o.default.prototype.background=function(){var u;return(u=this._renderer).background.apply(u,arguments),this},o.default.prototype.clear=function(){return this._renderer.clear(),this},o.default.prototype.colorMode=function(u,a,l,d,f){if(o.default._validateParameters("colorMode",arguments),u===c.RGB||u===c.HSB||u===c.HSL){this._colorMode=u;var m=this._colorMaxes[u];arguments.length===2?(m[0]=a,m[1]=a,m[2]=a,m[3]=a):arguments.length===4?(m[0]=a,m[1]=l,m[2]=d):arguments.length===5&&(m[0]=a,m[1]=l,m[2]=d,m[3]=f)}return this},o.default.prototype.fill=function(){var u;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(u=this._renderer).fill.apply(u,arguments),this},o.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},o.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},o.default.prototype.stroke=function(){var u;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(u=this._renderer).stroke.apply(u,arguments),this},o.default.prototype.erase=function(){var u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255;return this._renderer.erase(u,a),this},o.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=o.default;i.default=p},{"../core/constants":250,"../core/main":260,"./p5.Color":248,"core-js/modules/es.array.fill":150}],250:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.BEZIER=i.QUADRATIC=i.LINEAR=i._CTX_MIDDLE=i._DEFAULT_LEADMULT=i._DEFAULT_TEXT_FILL=i.WORD=i.CHAR=i.BOLDITALIC=i.BOLD=i.ITALIC=i.NORMAL=i.BLUR=i.ERODE=i.DILATE=i.POSTERIZE=i.INVERT=i.OPAQUE=i.GRAY=i.THRESHOLD=i.BURN=i.DODGE=i.SOFT_LIGHT=i.HARD_LIGHT=i.OVERLAY=i.REPLACE=i.SCREEN=i.MULTIPLY=i.EXCLUSION=i.SUBTRACT=i.DIFFERENCE=i.LIGHTEST=i.DARKEST=i.ADD=i.REMOVE=i.BLEND=i.UP_ARROW=i.TAB=i.SHIFT=i.RIGHT_ARROW=i.RETURN=i.OPTION=i.LEFT_ARROW=i.ESCAPE=i.ENTER=i.DOWN_ARROW=i.DELETE=i.CONTROL=i.BACKSPACE=i.ALT=i.AUTO=i.HSL=i.HSB=i.RGB=i.MITER=i.BEVEL=i.ROUND=i.SQUARE=i.PROJECT=i.PIE=i.CHORD=i.OPEN=i.CLOSE=i.TESS=i.QUAD_STRIP=i.QUADS=i.TRIANGLE_STRIP=i.TRIANGLE_FAN=i.TRIANGLES=i.LINE_LOOP=i.LINE_STRIP=i.LINES=i.POINTS=i.BASELINE=i.BOTTOM=i.TOP=i.CENTER=i.LEFT=i.RIGHT=i.RADIUS=i.CORNERS=i.CORNER=i.RAD_TO_DEG=i.DEG_TO_RAD=i.RADIANS=i.DEGREES=i.TWO_PI=i.TAU=i.QUARTER_PI=i.PI=i.HALF_PI=i.WAIT=i.TEXT=i.MOVE=i.HAND=i.CROSS=i.ARROW=i.WEBGL=i.P2D=i.VERSION=void 0,i.FALLBACK=i.LABEL=i.AXES=i.GRID=i._DEFAULT_FILL=i._DEFAULT_STROKE=i.PORTRAIT=i.LANDSCAPE=i.MIRROR=i.CLAMP=i.REPEAT=i.NEAREST=i.IMAGE=i.IMMEDIATE=i.TEXTURE=i.FILL=i.STROKE=i.CURVE=void 0;var s=Math.PI;i.VERSION="1.4.0",i.P2D="p2d",i.WEBGL="webgl",i.ARROW="default",i.CROSS="crosshair",i.HAND="pointer",i.MOVE="move",i.TEXT="text",i.WAIT="wait";var r=s/2;i.HALF_PI=r;var o=s;i.PI=o;var c=s/4;i.QUARTER_PI=c;var h=2*s;i.TAU=h;var p=2*s;i.TWO_PI=p,i.DEGREES="degrees",i.RADIANS="radians";var u=s/180;i.DEG_TO_RAD=u;var a=180/s;i.RAD_TO_DEG=a,i.CORNER="corner",i.CORNERS="corners",i.RADIUS="radius",i.RIGHT="right",i.LEFT="left",i.CENTER="center",i.TOP="top",i.BOTTOM="bottom",i.BASELINE="alphabetic",i.POINTS=0,i.LINES=1,i.LINE_STRIP=3,i.LINE_LOOP=2,i.TRIANGLES=4,i.TRIANGLE_FAN=6,i.TRIANGLE_STRIP=5,i.QUADS="quads",i.QUAD_STRIP="quad_strip",i.TESS="tess",i.CLOSE="close",i.OPEN="open",i.CHORD="chord",i.PIE="pie",i.PROJECT="square",i.SQUARE="butt",i.ROUND="round",i.BEVEL="bevel",i.MITER="miter",i.RGB="rgb",i.HSB="hsb",i.HSL="hsl",i.AUTO="auto",i.ALT=18,i.BACKSPACE=8,i.CONTROL=17,i.DELETE=46,i.DOWN_ARROW=40,i.ENTER=13,i.ESCAPE=27,i.LEFT_ARROW=37,i.OPTION=18,i.RETURN=13,i.RIGHT_ARROW=39,i.SHIFT=16,i.TAB=9,i.UP_ARROW=38,i.BLEND="source-over",i.REMOVE="destination-out",i.ADD="lighter",i.DARKEST="darken",i.LIGHTEST="lighten",i.DIFFERENCE="difference",i.SUBTRACT="subtract",i.EXCLUSION="exclusion",i.MULTIPLY="multiply",i.SCREEN="screen",i.REPLACE="copy",i.OVERLAY="overlay",i.HARD_LIGHT="hard-light",i.SOFT_LIGHT="soft-light",i.DODGE="color-dodge",i.BURN="color-burn",i.THRESHOLD="threshold",i.GRAY="gray",i.OPAQUE="opaque",i.INVERT="invert",i.POSTERIZE="posterize",i.DILATE="dilate",i.ERODE="erode",i.BLUR="blur",i.NORMAL="normal",i.ITALIC="italic",i.BOLD="bold",i.BOLDITALIC="bold italic",i.CHAR="CHAR",i.WORD="WORD",i._DEFAULT_TEXT_FILL="#000000",i._DEFAULT_LEADMULT=1.25,i._CTX_MIDDLE="middle",i.LINEAR="linear",i.QUADRATIC="quadratic",i.BEZIER="bezier",i.CURVE="curve",i.STROKE="stroke",i.FILL="fill",i.TEXTURE="texture",i.IMMEDIATE="immediate",i.IMAGE="image",i.NEAREST="nearest",i.REPEAT="repeat",i.CLAMP="clamp",i.MIRROR="mirror",i.LANDSCAPE="landscape",i.PORTRAIT="portrait",i._DEFAULT_STROKE="#000000",i._DEFAULT_FILL="#FFFFFF",i.GRID="grid",i.AXES="axes",i.LABEL="label",i.FALLBACK="fallback"},{}],251:[function(e,n,i){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("./main"))&&r.__esModule?r:{default:r},c=function(f){if(f&&f.__esModule)return f;if(f===null||s(f)!=="object"&&typeof f!="function")return{default:f};var m=h();if(m&&m.has(f))return m.get(f);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var w=_?Object.getOwnPropertyDescriptor(f,x):null;w&&(w.get||w.set)?Object.defineProperty(g,x,w):g[x]=f[x]}return g.default=f,m&&m.set(f,g),g}(e("./constants"));function h(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return h=function(){return f},f}var p=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT];o.default.prototype._frameRate=0,o.default.prototype._lastFrameTime=window.performance.now(),o.default.prototype._targetFrameRate=60;var u=window.print;function a(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function l(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}o.default.prototype.print=function(){var f;arguments.length?(f=console).log.apply(f,arguments):u()},o.default.prototype.frameCount=0,o.default.prototype.deltaTime=0,o.default.prototype.focused=document.hasFocus(),o.default.prototype.cursor=function(f,m,g){var _="auto",x=this._curElement.elt;if(p.includes(f))_=f;else if(typeof f=="string"){var w="";m&&g&&typeof m=="number"&&typeof g=="number"&&(w="".concat(m," ").concat(g)),_=f.substring(0,7)==="http://"||f.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(f)?"url(".concat(f,") ").concat(w,", auto"):f}x.style.cursor=_},o.default.prototype.frameRate=function(f){return o.default._validateParameters("frameRate",arguments),typeof f!="number"||f<0?this._frameRate:(this._setProperty("_targetFrameRate",f),f===0&&this._setProperty("_frameRate",f),this)},o.default.prototype.getFrameRate=function(){return this.frameRate()},o.default.prototype.setFrameRate=function(f){return this.frameRate(f)},o.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.default.prototype.displayWidth=screen.width,o.default.prototype.displayHeight=screen.height,o.default.prototype.windowWidth=a(),o.default.prototype.windowHeight=l(),o.default.prototype._onresize=function(f){this._setProperty("windowWidth",a()),this._setProperty("windowHeight",l());var m,g=this._isGlobal?window:this;typeof g.windowResized=="function"&&((m=g.windowResized(f))===void 0||m||f.preventDefault())},o.default.prototype.width=0,o.default.prototype.height=0,o.default.prototype.fullscreen=function(f){if(o.default._validateParameters("fullscreen",arguments),f===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;f?function(m){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");m.requestFullscreen?m.requestFullscreen():m.mozRequestFullScreen?m.mozRequestFullScreen():m.webkitRequestFullscreen?m.webkitRequestFullscreen():m.msRequestFullscreen&&m.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},o.default.prototype.pixelDensity=function(f){var m;return o.default._validateParameters("pixelDensity",arguments),typeof f=="number"?(f!==this._pixelDensity&&(this._pixelDensity=f),(m=this).resizeCanvas(this.width,this.height,!0)):m=this._pixelDensity,m},o.default.prototype.displayDensity=function(){return window.devicePixelRatio},o.default.prototype.getURL=function(){return location.href},o.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(f){return f!==""})},o.default.prototype.getURLParams=function(){for(var f,m=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,g={};(f=m.exec(location.search))!=null;)f.index===m.lastIndex&&m.lastIndex++,g[f[1]]=f[2];return g};var d=o.default;i.default=d},{"./constants":250,"./main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.includes":154,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.search":187,"core-js/modules/es.string.split":188}],252:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};e("../internationalization");var o=null,c=null;r.default._friendlyError=r.default._checkForUserDefinedFunctions=r.default._fesErrorMonitor=function(){},o=null;var h="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";c=function(){function a(d){return Object.getOwnPropertyNames(d).filter(function(f){return f[0]!=="_"&&!(f in l)&&(l[f]=!0)}).map(function(f){var m;return m=typeof d[f]=="function"?"function":f===f.toUpperCase()?"constant":"variable",{name:f,type:m}})}var l={};(o=[].concat(a(r.default.prototype),a(e("../constants")))).sort(function(d,f){return f.name.length-d.name.length})};function p(a,l){l=l||console.log.bind(console),o||c(),o.some(function(d){if(a.message&&a.message.match("\\W?".concat(d.name,"\\W"))!==null){var f=d.type==="function"?"".concat(d.name,"()"):d.name;return l("Did you just try to use p5.js's ".concat(f," ").concat(d.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(h)),!0}})}r.default.prototype._helpForMisusedAtTopLevelCode=p,document.readyState!=="complete"&&(window.addEventListener("error",p,!1),window.addEventListener("load",function(){window.removeEventListener("error",p,!1)}));var u=r.default;i.default=u},{"../constants":250,"../internationalization":258,"../main":260,"./browser_errors":void 0,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.some":161,"core-js/modules/es.function.name":163,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.get-own-property-names":171,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.search":187,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],253:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};e("../internationalization"),r.default._friendlyFileLoadError=function(){};var o=r.default;i.default=o},{"../internationalization":258,"../main":260}],254:[function(e,n,i){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};function o(){var h=/(^|@)\S+:\d+/,p=/^\s*at .*(\S+:\d+|\(native\))/m,u=/^(eval@)?(\[native code])?$/;return{parse:function(a){return a.stacktrace!==void 0||a["opera#sourceloc"]!==void 0?this.parseOpera(a):a.stack&&a.stack.match(p)?this.parseV8OrIE(a):a.stack?this.parseFFOrSafari(a):void 0},extractLocation:function(a){if(a.indexOf(":")===-1)return[a];var l=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(a.replace(/[()]/g,""));return[l[1],l[2]||void 0,l[3]||void 0]},parseV8OrIE:function(a){return a.stack.split(`
`).filter(function(l){return!!l.match(p)},this).map(function(l){-1<l.indexOf("(eval ")&&(l=l.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var d=l.replace(/^\s+/,"").replace(/\(eval code/g,"("),f=d.match(/ (\((.+):(\d+):(\d+)\)$)/),m=(d=f?d.replace(f[0],""):d).split(/\s+/).slice(1),g=this.extractLocation(f?f[1]:m.pop());return{functionName:m.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(g[0])?void 0:g[0],lineNumber:g[1],columnNumber:g[2],source:l}},this)},parseFFOrSafari:function(a){return a.stack.split(`
`).filter(function(l){return!l.match(u)},this).map(function(l){if(-1<l.indexOf(" > eval")&&(l=l.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),l.indexOf("@")===-1&&l.indexOf(":")===-1)return{functionName:l};var d=/((.*".+"[^@]*)?[^@]*)(?:@)/,f=l.match(d),m=f&&f[1]?f[1]:void 0,g=this.extractLocation(l.replace(d,""));return{functionName:m,fileName:g[0],lineNumber:g[1],columnNumber:g[2],source:l}},this)},parseOpera:function(a){return!a.stacktrace||-1<a.message.indexOf(`
`)&&a.message.split(`
`).length>a.stacktrace.split(`
`).length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(a){for(var l=/Line (\d+).*script (?:in )?(\S+)/i,d=a.message.split(`
`),f=[],m=2,g=d.length;m<g;m+=2){var _=l.exec(d[m]);_&&f.push({fileName:_[2],lineNumber:_[1],source:d[m]})}return f},parseOpera10:function(a){for(var l=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=a.stacktrace.split(`
`),f=[],m=0,g=d.length;m<g;m+=2){var _=l.exec(d[m]);_&&f.push({functionName:_[3]||void 0,fileName:_[2],lineNumber:_[1],source:d[m]})}return f},parseOpera11:function(a){return a.stack.split(`
`).filter(function(l){return!!l.match(h)&&!l.match(/^Error created at/)},this).map(function(l){var d,f=l.split("@"),m=this.extractLocation(f.pop()),g=f.shift()||"",_=g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return g.match(/\(([^)]*)\)/)&&(d=g.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:_,args:d===void 0||d==="[arguments not available]"?void 0:d.split(","),fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:l}},this)}}}r.default._getErrorStackParser=function(){return new o};var c=r.default;i.default=c},{"../main":260,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188}],255:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};(function(p){if(!(p&&p.__esModule)&&!(p===null||c(p)!=="object"&&typeof p!="function")){var u=o();if(u&&u.has(p))return u.get(p);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in p)if(Object.prototype.hasOwnProperty.call(p,d)){var f=l?Object.getOwnPropertyDescriptor(p,d):null;f&&(f.get||f.set)?Object.defineProperty(a,d,f):a[d]=p[d]}a.default=p,u&&u.set(p,a)}})(e("../constants")),e("../internationalization");function o(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return o=function(){return p},p}function c(p){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(p)}r.default._validateParameters=r.default._clearValidateParamsCache=function(){};var h=r.default;i.default=h},{"../../../docs/parameterData.json":void 0,"../constants":250,"../internationalization":258,"../main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.map":164,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.get-prototype-of":172,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.reflect.construct":176,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.set":180,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],256:[function(e,n,i){function s(h){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=function(h){if(h&&h.__esModule)return h;if(h===null||s(h)!=="object"&&typeof h!="function")return{default:h};var p=o();if(p&&p.has(h))return p.get(h);var u={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in h)if(Object.prototype.hasOwnProperty.call(h,l)){var d=a?Object.getOwnPropertyDescriptor(h,l):null;d&&(d.get||d.set)?Object.defineProperty(u,l,d):u[l]=h[l]}return u.default=h,p&&p.set(h,u),u}(e("./constants"));function o(){if(typeof WeakMap!="function")return null;var h=new WeakMap;return o=function(){return h},h}var c={modeAdjust:function(h,p,u,a,l){return l===r.CORNER?{x:h,y:p,w:u,h:a}:l===r.CORNERS?{x:h,y:p,w:u-h,h:a-p}:l===r.RADIUS?{x:h-u,y:p-a,w:2*u,h:2*a}:l===r.CENTER?{x:h-.5*u,y:p-.5*a,w:u,h:a}:void 0}};i.default=c},{"./constants":250}],257:[function(e,n,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};e("./internationalization");var o=Promise.resolve();Promise.all([new Promise(function(c,h){document.readyState==="complete"?c():window.addEventListener("load",c,!1)}),o]).then(function(){window._setupDone===void 0?window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!r.default.instance&&new r.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")})},{"../core/main":260,"./internationalization":258,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.iterator":183,"core-js/modules/web.dom-collections.iterator":226}],258:[function(e,n,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.initialize=i.translator=void 0;var s,r,o=h(e("i18next")),c=h(e("i18next-browser-languagedetector"));function h(l){return l&&l.__esModule?l:{default:l}}function p(l,d){for(var f=0;f<d.length;f++){var m=d[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var u=function(){function l(m,g){(function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")})(this,l),this.init(m,g)}var d,f;return d=l,(f=[{key:"fetchWithTimeout",value:function(m,g,_){var x=2<arguments.length&&_!==void 0?_:2e3;return Promise.race([fetch(m,g),new Promise(function(w,M){return setTimeout(function(){return M(new Error("timeout"))},x)})])}},{key:"init",value:function(m,g){var _=1<arguments.length&&g!==void 0?g:{};this.services=m,this.options=_}},{key:"read",value:function(m,g,_){var x=this.options.loadPath;if(m===this.options.fallback)_(null,s[m][g]);else if(r.includes(m)){var w=this.services.interpolator.interpolate(x,{lng:m,ns:g});this.loadUrl(w,_)}else _("Not found",!1)}},{key:"loadUrl",value:function(m,g){this.fetchWithTimeout(m).then(function(_){if(!_.ok)throw new Error("failed loading ".concat(m));return _.json()},function(){throw new Error("failed loading ".concat(m))}).then(function(_){return g(null,_)}).catch(g)}}])&&p(d.prototype,f),l}();u.type="backend";var a=function(l,d){console.debug("p5.js translator called before translations were loaded"),o.default.t(l,d)};i.translator=a,i.initialize=function(){return o.default.use(c.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:s}).then(function(l){i.translator=a=l},function(l){return console.debug("Translations failed to load (".concat(l,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/web.dom-collections.iterator":226,i18next:3,"i18next-browser-languagedetector":3}],259:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var o=r.default;i.default=o},{"./main":260}],260:[function(e,n,i){function s(a){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("./shim");var r=function(a){if(a&&a.__esModule)return a;if(a===null||s(a)!=="object"&&typeof a!="function")return{default:a};var l=o();if(l&&l.has(a))return l.get(a);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in a)if(Object.prototype.hasOwnProperty.call(a,m)){var g=f?Object.getOwnPropertyDescriptor(a,m):null;g&&(g.get||g.set)?Object.defineProperty(d,m,g):d[m]=a[m]}return d.default=a,l&&l.set(a,d),d}(e("./constants"));function o(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return o=function(){return a},a}function c(a,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}var h=function(){function a(f,m,g){var _=this;(function(K,_e){if(!(K instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,a),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=m,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var x=Object.getOwnPropertyNames(a.prototype._registeredMethods),w=!0,M=!1,A=void 0;try{for(var T,I=x[Symbol.iterator]();!(w=(T=I.next()).done);w=!0){var R=T.value;this._registeredMethods[R]=a.prototype._registeredMethods[R].slice()}}catch(K){M=!0,A=K}finally{try{w||I.return==null||I.return()}finally{if(M)throw A}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){_._userNode&&typeof _._userNode=="string"&&(_._userNode=document.getElementById(_._userNode));var K=_._isGlobal?window:_;if(K.preload){var _e=document.getElementById(_._loadingScreenId);_e||((_e=document.createElement("div")).innerHTML="Loading...",_e.style.position="absolute",_e.id=_._loadingScreenId,(_._userNode||document.body).appendChild(_e));var pe=_._preloadMethods;for(var ge in pe){pe[ge]=pe[ge]||a;var ce=pe[ge];ce!==a.prototype&&ce!==a||(_._isGlobal&&(window[ge]=_._wrapPreload(_,ge)),ce=_),_._registeredPreloadMethods[ge]=ce[ge],ce[ge]=_._wrapPreload(ce,ge)}K.preload(),_._runIfPreloadsAreDone()}else _._setup(),_._draw()},this._runIfPreloadsAreDone=function(){var K=this._isGlobal?window:this;if(K._preloadCount===0){var _e=document.getElementById(K._loadingScreenId);_e&&_e.parentNode.removeChild(_e),this._setupDone||(this._lastFrameTime=window.performance.now(),K._setup(),K._draw())}},this._decrementPreload=function(){var K=this._isGlobal?window:this;typeof K.preload=="function"&&(K._setProperty("_preloadCount",K._preloadCount-1),K._runIfPreloadsAreDone())},this._wrapPreload=function(K,_e){var pe=this;return function(){pe._incrementPreload();for(var ge=arguments.length,ce=new Array(ge),de=0;de<ge;de++)ce[de]=arguments[de];return pe._registeredPreloadMethods[_e].apply(K,ce)}},this._incrementPreload=function(){var K=this._isGlobal?window:this;K._setProperty("_preloadCount",K._preloadCount+1)},this._setup=function(){_.createCanvas(_._defaultCanvasSize.width,_._defaultCanvasSize.height,"p2d");var K=_._isGlobal?window:_;if(typeof K.preload=="function")for(var _e in _._preloadMethods)K[_e]=_._preloadMethods[_e][_e],K[_e]&&_&&(K[_e]=K[_e].bind(_));_._millisStart=window.performance.now(),typeof K.setup=="function"&&K.setup();var pe=document.getElementsByTagName("canvas"),ge=!0,ce=!1,de=void 0;try{for(var Ee,C=pe[Symbol.iterator]();!(ge=(Ee=C.next()).done);ge=!0){var F=Ee.value;F.dataset.hidden==="true"&&(F.style.visibility="",delete F.dataset.hidden)}}catch(V){ce=!0,de=V}finally{try{ge||C.return==null||C.return()}finally{if(ce)throw de}}_._lastFrameTime=window.performance.now(),_._setupDone=!0,(_._accessibleOutputs.grid||_._accessibleOutputs.text)&&_._updateAccsOutput()},this._draw=function(){var K=window.performance.now(),_e=K-_._lastFrameTime,pe=1e3/_._targetFrameRate;(!_._loop||pe-5<=_e)&&(_.redraw(),_._frameRate=1e3/(K-_._lastFrameTime),_.deltaTime=K-_._lastFrameTime,_._setProperty("deltaTime",_.deltaTime),_._lastFrameTime=K,_._updateMouseCoords!==void 0&&(_._updateMouseCoords(),_._setProperty("movedX",0),_._setProperty("movedY",0))),_._loop&&(_._requestAnimId=window.requestAnimationFrame(_._draw))},this._setProperty=function(K,_e){_[K]=_e,_._isGlobal&&(window[K]=_e)},this.remove=function(){var K=document.getElementById(_._loadingScreenId);if(K&&(K.parentNode.removeChild(K),_._incrementPreload()),_._curElement){for(var _e in _._loop=!1,_._requestAnimId&&window.cancelAnimationFrame(_._requestAnimId),_._events)window.removeEventListener(_e,_._events[_e]);var pe=!0,ge=!1,ce=void 0;try{for(var de,Ee=_._elements[Symbol.iterator]();!(pe=(de=Ee.next()).done);pe=!0){var C=de.value;for(var F in C.elt&&C.elt.parentNode&&C.elt.parentNode.removeChild(C.elt),C._events)C.elt.removeEventListener(F,C._events[F])}}catch(se){ge=!0,ce=se}finally{try{pe||Ee.return==null||Ee.return()}finally{if(ge)throw ce}}var V=_;_._registeredMethods.remove.forEach(function(se){se!==void 0&&se.call(V)})}if(_._isGlobal){for(var ne in a.prototype)try{delete window[ne]}catch{window[ne]=void 0}for(var re in _)if(_.hasOwnProperty(re))try{delete window[re]}catch{window[re]=void 0}a.instance=null}},this._registeredMethods.init.forEach(function(K){K!==void 0&&K.call(this)},this),this._setupPromisePreloads();var P=this._createFriendlyGlobalFunctionBinder();if(f)f(this),a._checkForUserDefinedFunctions(this);else{for(var O in this._isGlobal=!0,a.instance=this,a.prototype)if(typeof a.prototype[O]=="function"){var D=O.substring(2);this._events.hasOwnProperty(D)||(Math.hasOwnProperty(O)&&Math[O]===a.prototype[O]?P(O,a.prototype[O]):P(O,a.prototype[O].bind(this)))}else P(O,a.prototype[O]);for(var k in this)this.hasOwnProperty(k)&&P(k,this[k])}for(var N in this._events){var q=this["_on".concat(N)];if(q){var X=q.bind(this);window.addEventListener(N,X,{passive:!1}),this._events[N]=X}}function G(){_._setProperty("focused",!0)}function Q(){_._setProperty("focused",!1)}window.addEventListener("focus",G),window.addEventListener("blur",Q),this.registerMethod("remove",function(){window.removeEventListener("focus",G),window.removeEventListener("blur",Q)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var l,d;return l=a,(d=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=r.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(f,m){a.prototype._preloadMethods.hasOwnProperty(f)||(a.prototype._preloadMethods[f]=m)}},{key:"registerMethod",value:function(f,m){var g=this||a.prototype;g._registeredMethods.hasOwnProperty(f)||(g._registeredMethods[f]=[]),g._registeredMethods[f].push(m)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(f){var m=0<arguments.length&&f!==void 0?f:{},g=m.globalObject||window;return m.log||console.log.bind(console),function(_,x){g[_]=x}}}])&&c(l.prototype,d),a}();for(var p in h.instance=null,h.disableFriendlyErrors=!1,r)h.prototype[p]=r[p];h.prototype._preloadMethods={loadJSON:h.prototype,loadImage:h.prototype,loadStrings:h.prototype,loadXML:h.prototype,loadBytes:h.prototype,loadTable:h.prototype,loadFont:h.prototype,loadModel:h.prototype,loadShader:h.prototype},h.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},h.prototype._registeredPreloadMethods={};var u=h;i.default=u},{"./constants":250,"./shim":271,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.get-own-property-names":171,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],261:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.Element=function(c,h){this.elt=c,this._pInst=this._pixelsState=h,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},r.default.Element.prototype.parent=function(c){return c===void 0?this.elt.parentNode:(typeof c=="string"?(c[0]==="#"&&(c=c.substring(1)),c=document.getElementById(c)):c instanceof r.default.Element&&(c=c.elt),c.appendChild(this.elt),this)},r.default.Element.prototype.id=function(c){return c===void 0?this.elt.id:(this.elt.id=c,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},r.default.Element.prototype.class=function(c){return c===void 0?this.elt.className:(this.elt.className=c,this)},r.default.Element.prototype.mousePressed=function(c){return r.default.Element._adjustListener("mousedown",function(h){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(h),c.call(this)},this),this},r.default.Element.prototype.doubleClicked=function(c){return r.default.Element._adjustListener("dblclick",c,this),this},r.default.Element.prototype.mouseWheel=function(c){return r.default.Element._adjustListener("wheel",c,this),this},r.default.Element.prototype.mouseReleased=function(c){return r.default.Element._adjustListener("mouseup",c,this),this},r.default.Element.prototype.mouseClicked=function(c){return r.default.Element._adjustListener("click",c,this),this},r.default.Element.prototype.mouseMoved=function(c){return r.default.Element._adjustListener("mousemove",c,this),this},r.default.Element.prototype.mouseOver=function(c){return r.default.Element._adjustListener("mouseover",c,this),this},r.default.Element.prototype.mouseOut=function(c){return r.default.Element._adjustListener("mouseout",c,this),this},r.default.Element.prototype.touchStarted=function(c){return r.default.Element._adjustListener("touchstart",c,this),this},r.default.Element.prototype.touchMoved=function(c){return r.default.Element._adjustListener("touchmove",c,this),this},r.default.Element.prototype.touchEnded=function(c){return r.default.Element._adjustListener("touchend",c,this),this},r.default.Element.prototype.dragOver=function(c){return r.default.Element._adjustListener("dragover",c,this),this},r.default.Element.prototype.dragLeave=function(c){return r.default.Element._adjustListener("dragleave",c,this),this},r.default.Element._adjustListener=function(c,h,p){return h===!1?r.default.Element._detachListener(c,p):r.default.Element._attachListener(c,h,p),this},r.default.Element._attachListener=function(c,h,p){p._events[c]&&r.default.Element._detachListener(c,p);var u=h.bind(p);p.elt.addEventListener(c,u,!1),p._events[c]=u},r.default.Element._detachListener=function(c,h){var p=h._events[c];h.elt.removeEventListener(c,p,!1),h._events[c]=null},r.default.Element.prototype._setProperty=function(c,h){this[c]=h};var o=r.default.Element;i.default=o},{"./main":260}],262:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("./main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("./constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}o.default.Graphics=function(u,a,l,d){var f=l||c.P2D;this.canvas=document.createElement("canvas");var m=d._userNode||document.body;for(var g in m.appendChild(this.canvas),o.default.Element.call(this,this.canvas,d),o.default.prototype)this[g]||(typeof o.default.prototype[g]=="function"?this[g]=o.default.prototype[g].bind(this):this[g]=o.default.prototype[g]);return o.default.prototype._initializeInstanceVariables.apply(this),this.width=u,this.height=a,this._pixelDensity=d._pixelDensity,f===c.WEBGL?this._renderer=new o.default.RendererGL(this.canvas,this,!1):this._renderer=new o.default.Renderer2D(this.canvas,this,!1),d._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(u,a),this._renderer._applyDefaults(),this},o.default.Graphics.prototype=Object.create(o.default.Element.prototype),o.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},o.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var u=this._pInst._elements.indexOf(this);for(var a in u!==-1&&this._pInst._elements.splice(u,1),this._events)this.elt.removeEventListener(a,this._events[a])};var p=o.default.Graphics;i.default=p},{"./constants":250,"./main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.splice":162}],263:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s},o=function(a){if(a&&a.__esModule)return a;if(a===null||h(a)!=="object"&&typeof a!="function")return{default:a};var l=c();if(l&&l.has(a))return l.get(a);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in a)if(Object.prototype.hasOwnProperty.call(a,m)){var g=f?Object.getOwnPropertyDescriptor(a,m):null;g&&(g.get||g.set)?Object.defineProperty(d,m,g):d[m]=a[m]}return d.default=a,l&&l.set(a,d),d}(e("../core/constants"));function c(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return c=function(){return a},a}function h(a){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}function p(a){var l=0,d=0;if(a.offsetParent)for(;l+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;);else l+=a.offsetLeft,d+=a.offsetTop;return[l,d]}r.default.Renderer=function(a,l,d){r.default.Element.call(this,a,l),this.canvas=a,this._pixelsState=l,d?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=o.LEFT,this._textBaseline=o.BASELINE,this._textWrap=o.WORD,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},r.default.Renderer.prototype=Object.create(r.default.Element.prototype),r.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},r.default.Renderer.prototype.pop=function(a){a.properties&&Object.assign(this,a.properties)},r.default.Renderer.prototype.resize=function(a,l){this.width=a,this.height=l,this.elt.width=a*this._pInst._pixelDensity,this.elt.height=l*this._pInst._pixelDensity,this.elt.style.width="".concat(a,"px"),this.elt.style.height="".concat(l,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},r.default.Renderer.prototype.get=function(a,l,d,f){var m=this._pixelsState,g=m._pixelDensity,_=this.canvas;if(a===void 0&&l===void 0)a=l=0,d=m.width,f=m.height;else if(a*=g,l*=g,d===void 0&&f===void 0)return a<0||l<0||a>=_.width||l>=_.height?[0,0,0,0]:this._getPixel(a,l);var x=new r.default.Image(d,f);return x.canvas.getContext("2d").drawImage(_,a,l,d*g,f*g,0,0,d,f),x},r.default.Renderer.prototype.textLeading=function(a){return typeof a=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",a),this._pInst):this._textLeading},r.default.Renderer.prototype.textSize=function(a){return typeof a=="number"?(this._setProperty("_textSize",a),this._leadingSet||this._setProperty("_textLeading",a*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},r.default.Renderer.prototype.textStyle=function(a){return a?(a!==o.NORMAL&&a!==o.ITALIC&&a!==o.BOLD&&a!==o.BOLDITALIC||this._setProperty("_textStyle",a),this._applyTextProperties()):this._textStyle},r.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},r.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},r.default.Renderer.prototype.textAlign=function(a,l){return a!==void 0?(this._setProperty("_textAlign",a),l!==void 0&&this._setProperty("_textBaseline",l),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},r.default.Renderer.prototype.textWrap=function(a){return this._setProperty("_textWrap",a),this._textWrap},r.default.Renderer.prototype.text=function(a,l,d,f,m){var g,_,x,w,M,A,T,I=this._pInst,R=this._textWrap,P=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&a!==void 0){if(typeof a!="string"&&(a=a.toString()),g=(a=a.replace(/(\t)/g,"  ")).split(`
`),f!==void 0){switch(this._rectMode===o.CENTER&&(l-=f/2),this._textAlign){case o.CENTER:l+=f/2;break;case o.RIGHT:l+=f}var O=!1;if(m!==void 0){switch(this._rectMode===o.CENTER&&(d-=m/2),this._textBaseline){case o.BOTTOM:T=d+(m-totalHeight),d=Math.max(T,d);break;case o.CENTER:T=d+(m-totalHeight)/2,d=Math.max(T,d);break;case o.BASELINE:O=!0,this._textBaseline=o.TOP}P=d+m-I.textAscent()}if(R===o.WORD)for(var D=0;D<g.length;D++){_="",M=g[D].split(" ");for(var k=0;k<M.length;k++)x="".concat(_+M[k])+" ",f<(w=this.textWidth(x))&&0<_.length?(this._renderText(I,_,l,d,P),_="".concat(M[k])+" ",d+=I.textLeading()):_=x;this._renderText(I,_,l,d,P),d+=I.textLeading(),O&&(this._textBaseline=o.BASELINE)}else{for(var N=0;N<g.length;N++){_="",A=g[N].split("");for(var q=0;q<A.length;q++)x="".concat(_+A[q]),(w=this.textWidth(x))<=f?_+=A[q]:f<w&&0<_.length&&(this._renderText(I,_,l,d,P),d+=I.textLeading(),_="".concat(A[q]))}this._renderText(I,_,l,d,P),d+=I.textLeading(),O&&(this._textBaseline=o.BASELINE)}}else{var X=0,G=I.textAlign().vertical;G===o.CENTER?X=(g.length-1)*I.textLeading()/2:G===o.BOTTOM&&(X=(g.length-1)*I.textLeading());for(var Q=0;Q<g.length;Q++)this._renderText(I,g[Q],l,d-X,P),d+=I.textLeading()}return I}},r.default.Renderer.prototype._applyDefaults=function(){return this},r.default.Renderer.prototype._isOpenType=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return h(a)==="object"&&a.font&&a.font.supported},r.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var a=document.createElement("span");a.style.fontFamily=this._textFont,a.style.fontSize="".concat(this._textSize,"px"),a.innerHTML="ABCjgq|";var l=document.createElement("div");l.style.display="inline-block",l.style.width="1px",l.style.height="0px";var d=document.createElement("div");d.appendChild(a),d.appendChild(l),d.style.height="0px",d.style.overflow="hidden",document.body.appendChild(d),l.style.verticalAlign="baseline";var f=p(l),m=p(a),g=f[1]-m[1];l.style.verticalAlign="bottom",f=p(l),m=p(a);var _=f[1]-m[1]-g;return document.body.removeChild(d),this._setProperty("_textAscent",g),this._setProperty("_textDescent",_),this};var u=r.default.Renderer;i.default=u},{"../core/constants":250,"./main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],264:[function(e,n,i){function s(l){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("./main")),o=function(l){if(l&&l.__esModule)return l;if(l===null||s(l)!=="object"&&typeof l!="function")return{default:l};var d=h();if(d&&d.has(l))return d.get(l);var f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)){var _=m?Object.getOwnPropertyDescriptor(l,g):null;_&&(_.get||_.set)?Object.defineProperty(f,g,_):f[g]=l[g]}return f.default=l,d&&d.set(l,f),f}(e("./constants")),c=p(e("../image/filters"));function h(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return h=function(){return l},l}function p(l){return l&&l.__esModule?l:{default:l}}e("./p5.Renderer");var u="rgba(0,0,0,0)";r.default.Renderer2D=function(l,d,f){return r.default.Renderer.call(this,l,d,f),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},r.default.Renderer2D.prototype=Object.create(r.default.Renderer.prototype),r.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=o.BLEND,this._setFill(o._DEFAULT_FILL),this._setStroke(o._DEFAULT_STROKE),this.drawingContext.lineCap=o.ROUND,this.drawingContext.font="normal 12px sans-serif"},r.default.Renderer2D.prototype.resize=function(l,d){r.default.Renderer.prototype.resize.call(this,l,d),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},r.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof r.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var l,d=this._getFill(),f=(l=this._pInst).color.apply(l,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(f.levels);var m=f.toString();this._setFill(m),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(d),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},r.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},r.default.Renderer2D.prototype.fill=function(){var l,d=(l=this._pInst).color.apply(l,arguments);this._setFill(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",d.levels)},r.default.Renderer2D.prototype.stroke=function(){var l,d=(l=this._pInst).color.apply(l,arguments);this._setStroke(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",d.levels)},r.default.Renderer2D.prototype.erase=function(l,d){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var f=this._pInst.color(255,l).toString();this.drawingContext.fillStyle=f,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var m=this._pInst.color(255,d).toString();this.drawingContext.strokeStyle=m;var g=this._cachedBlendMode;this.blendMode(o.REMOVE),this._cachedBlendMode=g,this._isErasing=!0}},r.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},r.default.Renderer2D.prototype.image=function(l,d,f,m,g,_,x,w,M){var A;l.gifProperties&&l._animateGif(this._pInst);try{this._tint&&(r.default.MediaElement&&l instanceof r.default.MediaElement&&l.loadPixels(),l.canvas&&(A=this._getTintedImageCanvas(l))),A=A||l.canvas||l.elt;var T=1;l.width&&0<l.width&&(T=A.width/l.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(A,T*d,T*f,T*m,T*g,_,x,w,M),this._isErasing&&this._pInst.erase()}catch(I){if(I.name!=="NS_ERROR_NOT_AVAILABLE")throw I}},r.default.Renderer2D.prototype._getTintedImageCanvas=function(l){if(!l.canvas)return l;var d=c.default._toPixels(l.canvas),f=document.createElement("canvas");f.width=l.canvas.width,f.height=l.canvas.height;for(var m=f.getContext("2d"),g=m.createImageData(l.canvas.width,l.canvas.height),_=g.data,x=0;x<d.length;x+=4){var w=d[x],M=d[x+1],A=d[x+2],T=d[x+3];_[x]=w*this._tint[0]/255,_[x+1]=M*this._tint[1]/255,_[x+2]=A*this._tint[2]/255,_[x+3]=T*this._tint[3]/255}return m.putImageData(g,0,0),f},r.default.Renderer2D.prototype.blendMode=function(l){if(l===o.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(l!==o.BLEND&&l!==o.REMOVE&&l!==o.DARKEST&&l!==o.LIGHTEST&&l!==o.DIFFERENCE&&l!==o.MULTIPLY&&l!==o.EXCLUSION&&l!==o.SCREEN&&l!==o.REPLACE&&l!==o.OVERLAY&&l!==o.HARD_LIGHT&&l!==o.SOFT_LIGHT&&l!==o.DODGE&&l!==o.BURN&&l!==o.ADD)throw new Error("Mode ".concat(l," not recognized."));this._cachedBlendMode=l,this.drawingContext.globalCompositeOperation=l}},r.default.Renderer2D.prototype.blend=function(){for(var l=this.drawingContext.globalCompositeOperation,d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];var g=f[f.length-1],_=Array.prototype.slice.call(f,0,f.length-1);this.drawingContext.globalCompositeOperation=g,r.default.prototype.copy.apply(this,_),this.drawingContext.globalCompositeOperation=l},r.default.Renderer2D.prototype._getPixel=function(l,d){var f;return[(f=this.drawingContext.getImageData(l,d,1,1).data)[0],f[1],f[2],f[3]]},r.default.Renderer2D.prototype.loadPixels=function(){var l=this._pixelsState,d=l._pixelDensity,f=this.width*d,m=this.height*d,g=this.drawingContext.getImageData(0,0,f,m);l._setProperty("imageData",g),l._setProperty("pixels",g.data)},r.default.Renderer2D.prototype.set=function(l,d,f){l=Math.floor(l),d=Math.floor(d);var m=this._pixelsState;if(f instanceof r.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(m._pixelDensity,m._pixelDensity),this.drawingContext.clearRect(l,d,f.width,f.height),this.drawingContext.drawImage(f.canvas,l,d),this.drawingContext.restore();else{var g=0,_=0,x=0,w=0,M=4*(d*m._pixelDensity*(this.width*m._pixelDensity)+l*m._pixelDensity);if(m.imageData||m.loadPixels.call(m),typeof f=="number")M<m.pixels.length&&(x=_=g=f,w=255);else if(f instanceof Array){if(f.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");M<m.pixels.length&&(g=f[0],_=f[1],x=f[2],w=f[3])}else f instanceof r.default.Color&&M<m.pixels.length&&(g=f.levels[0],_=f.levels[1],x=f.levels[2],w=f.levels[3]);for(var A=0;A<m._pixelDensity;A++)for(var T=0;T<m._pixelDensity;T++)M=4*((d*m._pixelDensity+T)*this.width*m._pixelDensity+(l*m._pixelDensity+A)),m.pixels[M]=g,m.pixels[M+1]=_,m.pixels[M+2]=x,m.pixels[M+3]=w}},r.default.Renderer2D.prototype.updatePixels=function(l,d,f,m){var g=this._pixelsState,_=g._pixelDensity;l===void 0&&d===void 0&&f===void 0&&m===void 0&&(d=l=0,f=this.width,m=this.height),l*=_,d*=_,f*=_,m*=_,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=g.imageData),this.drawingContext.putImageData(g.imageData,l,d,0,0,f,m)},r.default.Renderer2D.prototype._acuteArcToBezier=function(l,d){var f=d/2,m=Math.cos(f),g=Math.sin(f),_=1/Math.tan(f),x=l+f,w=Math.cos(x),M=Math.sin(x),A=(4-m)/3,T=g+(m-A)*_;return{ax:Math.cos(l).toFixed(7),ay:Math.sin(l).toFixed(7),bx:(A*w+T*M).toFixed(7),by:(A*M-T*w).toFixed(7),cx:(A*w-T*M).toFixed(7),cy:(A*M+T*w).toFixed(7),dx:Math.cos(l+d).toFixed(7),dy:Math.sin(l+d).toFixed(7)}},r.default.Renderer2D.prototype.arc=function(l,d,f,m,g,_,x){var w=this.drawingContext,M=f/2,A=m/2,T=0,I=[];for(l+=M,d+=A;1e-5<=_-g;)T=Math.min(_-g,o.HALF_PI),I.push(this._acuteArcToBezier(g,T)),g+=T;return this._doFill&&(w.beginPath(),I.forEach(function(R,P){P===0&&w.moveTo(l+R.ax*M,d+R.ay*A),w.bezierCurveTo(l+R.bx*M,d+R.by*A,l+R.cx*M,d+R.cy*A,l+R.dx*M,d+R.dy*A)}),x!==o.PIE&&x!=null||w.lineTo(l,d),w.closePath(),w.fill()),this._doStroke&&(w.beginPath(),I.forEach(function(R,P){P===0&&w.moveTo(l+R.ax*M,d+R.ay*A),w.bezierCurveTo(l+R.bx*M,d+R.by*A,l+R.cx*M,d+R.cy*A,l+R.dx*M,d+R.dy*A)}),x===o.PIE?(w.lineTo(l,d),w.closePath()):x===o.CHORD&&w.closePath(),w.stroke()),this},r.default.Renderer2D.prototype.ellipse=function(l){var d=this.drawingContext,f=this._doFill,m=this._doStroke,g=parseFloat(l[0]),_=parseFloat(l[1]),x=parseFloat(l[2]),w=parseFloat(l[3]);if(f&&!m){if(this._getFill()===u)return this}else if(!f&&m&&this._getStroke()===u)return this;var M=x/2*.5522847498,A=w/2*.5522847498,T=g+x,I=_+w,R=g+x/2,P=_+w/2;d.beginPath(),d.moveTo(g,P),d.bezierCurveTo(g,P-A,R-M,_,R,_),d.bezierCurveTo(R+M,_,T,P-A,T,P),d.bezierCurveTo(T,P+A,R+M,I,R,I),d.bezierCurveTo(R-M,I,g,P+A,g,P),f&&d.fill(),m&&d.stroke()},r.default.Renderer2D.prototype.line=function(l,d,f,m){var g=this.drawingContext;return this._doStroke&&(this._getStroke()===u||(g.beginPath(),g.moveTo(l,d),g.lineTo(f,m),g.stroke())),this},r.default.Renderer2D.prototype.point=function(l,d){var f=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===u)return this;var m=this._getStroke(),g=this._getFill();this._setFill(m),f.beginPath(),f.arc(l,d,f.lineWidth/2,0,o.TWO_PI,!1),f.fill(),this._setFill(g)},r.default.Renderer2D.prototype.quad=function(l,d,f,m,g,_,x,w){var M=this.drawingContext,A=this._doFill,T=this._doStroke;if(A&&!T){if(this._getFill()===u)return this}else if(!A&&T&&this._getStroke()===u)return this;return M.beginPath(),M.moveTo(l,d),M.lineTo(f,m),M.lineTo(g,_),M.lineTo(x,w),M.closePath(),A&&M.fill(),T&&M.stroke(),this},r.default.Renderer2D.prototype.rect=function(l){var d=l[0],f=l[1],m=l[2],g=l[3],_=l[4],x=l[5],w=l[6],M=l[7],A=this.drawingContext,T=this._doFill,I=this._doStroke;if(T&&!I){if(this._getFill()===u)return this}else if(!T&&I&&this._getStroke()===u)return this;if(A.beginPath(),_===void 0)A.rect(d,f,m,g);else{x===void 0&&(x=_),w===void 0&&(w=x),M===void 0&&(M=w);var R=Math.abs(m),P=Math.abs(g),O=R/2,D=P/2;R<2*_&&(_=O),P<2*_&&(_=D),R<2*x&&(x=O),P<2*x&&(x=D),R<2*w&&(w=O),P<2*w&&(w=D),R<2*M&&(M=O),P<2*M&&(M=D),A.beginPath(),A.moveTo(d+_,f),A.arcTo(d+m,f,d+m,f+g,x),A.arcTo(d+m,f+g,d,f+g,w),A.arcTo(d,f+g,d,f,M),A.arcTo(d,f,d+m,f,_),A.closePath()}return this._doFill&&A.fill(),this._doStroke&&A.stroke(),this},r.default.Renderer2D.prototype.triangle=function(l){var d=this.drawingContext,f=this._doFill,m=this._doStroke,g=l[0],_=l[1],x=l[2],w=l[3],M=l[4],A=l[5];if(f&&!m){if(this._getFill()===u)return this}else if(!f&&m&&this._getStroke()===u)return this;d.beginPath(),d.moveTo(g,_),d.lineTo(x,w),d.lineTo(M,A),d.closePath(),f&&d.fill(),m&&d.stroke()},r.default.Renderer2D.prototype.endShape=function(l,d,f,m,g,_,x){if(d.length===0)return this;if(!this._doStroke&&!this._doFill)return this;var w,M,A,T=l===o.CLOSE;T&&!_&&d.push(d[0]);var I=d.length;if(!f||x!==o.POLYGON&&x!==null)if(!m||x!==o.POLYGON&&x!==null)if(!g||x!==o.POLYGON&&x!==null)if(x===o.POINTS)for(M=0;M<I;M++)w=d[M],this._doStroke&&this._pInst.stroke(w[6]),this._pInst.point(w[0],w[1]);else if(x===o.LINES)for(M=0;M+1<I;M+=2)w=d[M],this._doStroke&&this._pInst.stroke(d[M+1][6]),this._pInst.line(w[0],w[1],d[M+1][0],d[M+1][1]);else if(x===o.TRIANGLES)for(M=0;M+2<I;M+=3)w=d[M],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(d[M+1][0],d[M+1][1]),this.drawingContext.lineTo(d[M+2][0],d[M+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(d[M+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(d[M+2][6]),this.drawingContext.stroke());else if(x===o.TRIANGLE_STRIP)for(M=0;M+1<I;M++)w=d[M],this.drawingContext.beginPath(),this.drawingContext.moveTo(d[M+1][0],d[M+1][1]),this.drawingContext.lineTo(w[0],w[1]),this._doStroke&&this._pInst.stroke(d[M+1][6]),this._doFill&&this._pInst.fill(d[M+1][5]),M+2<I&&(this.drawingContext.lineTo(d[M+2][0],d[M+2][1]),this._doStroke&&this._pInst.stroke(d[M+2][6]),this._doFill&&this._pInst.fill(d[M+2][5])),this._doFillStrokeClose(T);else if(x===o.TRIANGLE_FAN){if(2<I){for(this.drawingContext.beginPath(),M=2;M<I;M++)w=d[M],this.drawingContext.moveTo(d[0][0],d[0][1]),this.drawingContext.lineTo(d[M-1][0],d[M-1][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(d[0][0],d[0][1]),M<I-1&&(this._doFill&&w[5]!==d[M+1][5]||this._doStroke&&w[6]!==d[M+1][6])&&(this._doFill&&(this._pInst.fill(w[5]),this.drawingContext.fill(),this._pInst.fill(d[M+1][5])),this._doStroke&&(this._pInst.stroke(w[6]),this.drawingContext.stroke(),this._pInst.stroke(d[M+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(T)}}else if(x===o.QUADS)for(M=0;M+3<I;M+=4){for(w=d[M],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),A=1;A<4;A++)this.drawingContext.lineTo(d[M+A][0],d[M+A][1]);this.drawingContext.lineTo(w[0],w[1]),this._doFill&&this._pInst.fill(d[M+3][5]),this._doStroke&&this._pInst.stroke(d[M+3][6]),this._doFillStrokeClose(T)}else if(x===o.QUAD_STRIP){if(3<I)for(M=0;M+1<I;M+=2)w=d[M],this.drawingContext.beginPath(),M+3<I?(this.drawingContext.moveTo(d[M+2][0],d[M+2][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(d[M+1][0],d[M+1][1]),this.drawingContext.lineTo(d[M+3][0],d[M+3][1]),this._doFill&&this._pInst.fill(d[M+3][5]),this._doStroke&&this._pInst.stroke(d[M+3][6])):(this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(d[M+1][0],d[M+1][1])),this._doFillStrokeClose(T)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[0][0],d[0][1]),M=1;M<I;M++)(w=d[M]).isVert&&(w.moveTo?this.drawingContext.moveTo(w[0],w[1]):this.drawingContext.lineTo(w[0],w[1]));this._doFillStrokeClose(T)}else{for(this.drawingContext.beginPath(),M=0;M<I;M++)d[M].isVert?d[M].moveTo?this.drawingContext.moveTo(d[M][0],d[M][1]):this.drawingContext.lineTo(d[M][0],d[M][1]):this.drawingContext.quadraticCurveTo(d[M][0],d[M][1],d[M][2],d[M][3]);this._doFillStrokeClose(T)}else{for(this.drawingContext.beginPath(),M=0;M<I;M++)d[M].isVert?d[M].moveTo?this.drawingContext.moveTo(d[M][0],d[M][1]):this.drawingContext.lineTo(d[M][0],d[M][1]):this.drawingContext.bezierCurveTo(d[M][0],d[M][1],d[M][2],d[M][3],d[M][4],d[M][5]);this._doFillStrokeClose(T)}else if(3<I){var R=[],P=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[1][0],d[1][1]),M=1;M+2<I;M++)w=d[M],R[0]=[w[0],w[1]],R[1]=[w[0]+(P*d[M+1][0]-P*d[M-1][0])/6,w[1]+(P*d[M+1][1]-P*d[M-1][1])/6],R[2]=[d[M+1][0]+(P*d[M][0]-P*d[M+2][0])/6,d[M+1][1]+(P*d[M][1]-P*d[M+2][1])/6],R[3]=[d[M+1][0],d[M+1][1]],this.drawingContext.bezierCurveTo(R[1][0],R[1][1],R[2][0],R[2][1],R[3][0],R[3][1]);T&&this.drawingContext.lineTo(d[M+1][0],d[M+1][1]),this._doFillStrokeClose(T)}return _=g=m=f=!1,T&&d.pop(),this},r.default.Renderer2D.prototype.strokeCap=function(l){return l!==o.ROUND&&l!==o.SQUARE&&l!==o.PROJECT||(this.drawingContext.lineCap=l),this},r.default.Renderer2D.prototype.strokeJoin=function(l){return l!==o.ROUND&&l!==o.BEVEL&&l!==o.MITER||(this.drawingContext.lineJoin=l),this},r.default.Renderer2D.prototype.strokeWeight=function(l){return this.drawingContext.lineWidth=l===void 0||l===0?1e-4:l,this},r.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},r.default.Renderer2D.prototype._setFill=function(l){l!==this._cachedFillStyle&&(this.drawingContext.fillStyle=l,this._cachedFillStyle=l)},r.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},r.default.Renderer2D.prototype._setStroke=function(l){l!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=l,this._cachedStrokeStyle=l)},r.default.Renderer2D.prototype.bezier=function(l,d,f,m,g,_,x,w){return this._pInst.beginShape(),this._pInst.vertex(l,d),this._pInst.bezierVertex(f,m,g,_,x,w),this._pInst.endShape(),this},r.default.Renderer2D.prototype.curve=function(l,d,f,m,g,_,x,w){return this._pInst.beginShape(),this._pInst.curveVertex(l,d),this._pInst.curveVertex(f,m),this._pInst.curveVertex(g,_),this._pInst.curveVertex(x,w),this._pInst.endShape(),this},r.default.Renderer2D.prototype._doFillStrokeClose=function(l){l&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},r.default.Renderer2D.prototype.applyMatrix=function(l,d,f,m,g,_){this.drawingContext.transform(l,d,f,m,g,_)},r.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},r.default.Renderer2D.prototype.rotate=function(l){this.drawingContext.rotate(l)},r.default.Renderer2D.prototype.scale=function(l,d){return this.drawingContext.scale(l,d),this},r.default.Renderer2D.prototype.translate=function(l,d){return l instanceof r.default.Vector&&(d=l.y,l=l.x),this.drawingContext.translate(l,d),this},r.default.Renderer2D.prototype.text=function(l,d,f,m,g){var _;m!==void 0&&this.drawingContext.textBaseline===o.BASELINE&&(_=!0,this.drawingContext.textBaseline=o.TOP);var x=r.default.Renderer.prototype.text.apply(this,arguments);return _&&(this.drawingContext.textBaseline=o.BASELINE),x},r.default.Renderer2D.prototype._renderText=function(l,d,f,m,g){if(!(g<=m))return l.push(),this._isOpenType()?this._textFont._renderPath(d,f,m,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(d,f,m),this._doFill&&(this._fillSet||this._setFill(o._DEFAULT_TEXT_FILL),this.drawingContext.fillText(d,f,m))),l.pop(),l},r.default.Renderer2D.prototype.textWidth=function(l){return this._isOpenType()?this._textFont._textWidth(l,this._textSize):this.drawingContext.measureText(l).width},r.default.Renderer2D.prototype._applyTextProperties=function(){var l,d=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),l=this._textFont,this._isOpenType()&&(l=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(l||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===o.CENTER?this.drawingContext.textBaseline=o._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,d},r.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),r.default.Renderer.prototype.push.apply(this)},r.default.Renderer2D.prototype.pop=function(l){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,r.default.Renderer.prototype.pop.call(this,l)};var a=r.default.Renderer2D;i.default=a},{"../image/filters":281,"./constants":250,"./main":260,"./p5.Renderer":263,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.number.to-fixed":169,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179}],265:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.prototype._promisePreloads=[];var o=!(r.default.prototype.registerPromisePreload=function(h){r.default.prototype._promisePreloads.push(h)});r.default.prototype._setupPromisePreloads=function(){var h=!0,p=!1,u=void 0;try{for(var a,l=this._promisePreloads[Symbol.iterator]();!(h=(a=l.next()).done);h=!0){var d=a.value,f=this,m=d.method,g=d.addCallbacks,_=d.legacyPreloadSetup,x=d.target||this,w=x[m].bind(x);if(x===r.default.prototype){if(o)continue;f=null,w=x[m]}x[m]=this._wrapPromisePreload(f,w,g),_&&(x[_.method]=this._legacyPreloadGenerator(f,_,x[m]))}}catch(M){p=!0,u=M}finally{try{h||l.return==null||l.return()}finally{if(p)throw u}}o=!0},r.default.prototype._wrapPromisePreload=function(h,p,u){var a=function(){var l=this;this._incrementPreload();for(var d=null,f=null,m=arguments.length,g=new Array(m),_=0;_<m;_++)g[_]=arguments[_];if(u)for(var x=g.length-1;0<=x&&!f&&typeof g[x]=="function";x--)f=d,d=g.pop();var w=Promise.resolve(p.apply(this,g));return d&&w.then(d),f&&w.catch(f),w.then(function(){return l._decrementPreload()}),w};return h&&(a=a.bind(h)),a};function c(){return{}}r.default.prototype._legacyPreloadGenerator=function(h,p,u){var a=p.createBaseObject||c,l=function(){var d=this;this._incrementPreload();var f=a.apply(this,arguments);return u.apply(this,arguments).then(function(m){Object.assign(f,m),d._decrementPreload()}),f};return h&&(l=l.bind(h)),l}},{"./main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],266:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s},o=function(a){if(a&&a.__esModule)return a;if(a===null||h(a)!=="object"&&typeof a!="function")return{default:a};var l=c();if(l&&l.has(a))return l.get(a);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in a)if(Object.prototype.hasOwnProperty.call(a,m)){var g=f?Object.getOwnPropertyDescriptor(a,m):null;g&&(g.get||g.set)?Object.defineProperty(d,m,g):d[m]=a[m]}return d.default=a,l&&l.set(a,d),d}(e("./constants"));function c(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return c=function(){return a},a}function h(a){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var p="defaultCanvas0";r.default.prototype.createCanvas=function(a,l,d){r.default._validateParameters("createCanvas",arguments);var f,m=d||o.P2D;if(m===o.WEBGL){if(f=document.getElementById(p)){f.parentNode.removeChild(f);var g=this._renderer;this._elements=this._elements.filter(function(w){return w!==g})}(f=document.createElement("canvas")).id=p,f.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)f=this.canvas;else{f=document.createElement("canvas");for(var _=0;document.getElementById("defaultCanvas".concat(_));)_++;p="defaultCanvas".concat(_),f.id=p,f.classList.add("p5Canvas")}if(this._setupDone||(f.dataset.hidden=!0,f.style.visibility="hidden"),this._userNode)this._userNode.appendChild(f);else{if(document.getElementsByTagName("main").length===0){var x=document.createElement("main");document.body.appendChild(x)}document.getElementsByTagName("main")[0].appendChild(f)}return m===o.WEBGL?(this._setProperty("_renderer",new r.default.RendererGL(f,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new r.default.Renderer2D(f,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(a,l),this._renderer._applyDefaults(),this._renderer},r.default.prototype.resizeCanvas=function(a,l,d){if(r.default._validateParameters("resizeCanvas",arguments),this._renderer){var f={};for(var m in this.drawingContext){var g=this.drawingContext[m];h(g)!=="object"&&typeof g!="function"&&(f[m]=g)}for(var _ in this._renderer.resize(a,l),this.width=a,this.height=l,f)try{this.drawingContext[_]=f[_]}catch{}d||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},r.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},r.default.prototype.createGraphics=function(a,l,d){return r.default._validateParameters("createGraphics",arguments),new r.default.Graphics(a,l,d,this)},r.default.prototype.blendMode=function(a){r.default._validateParameters("blendMode",arguments),a===o.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),a=o.BLEND),this._renderer.blendMode(a)};var u=r.default;i.default=u},{"../webgl/p5.RendererGL":314,"./constants":250,"./main":260,"./p5.Graphics":262,"./p5.Renderer2D":264,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],267:[function(e,n,i){function s(a){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}e("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("../main")),o=function(a){if(a&&a.__esModule)return a;if(a===null||s(a)!=="object"&&typeof a!="function")return{default:a};var l=h();if(l&&l.has(a))return l.get(a);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in a)if(Object.prototype.hasOwnProperty.call(a,m)){var g=f?Object.getOwnPropertyDescriptor(a,m):null;g&&(g.get||g.set)?Object.defineProperty(d,m,g):d[m]=a[m]}return d.default=a,l&&l.set(a,d),d}(e("../constants")),c=p(e("../helpers"));function h(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return h=function(){return a},a}function p(a){return a&&a.__esModule?a:{default:a}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),r.default.prototype._normalizeArcAngles=function(a,l,d,f,m){var g;return a-=o.TWO_PI*Math.floor(a/o.TWO_PI),l-=o.TWO_PI*Math.floor(l/o.TWO_PI),g=Math.min(Math.abs(a-l),o.TWO_PI-Math.abs(a-l)),m&&(a=a<=o.HALF_PI?Math.atan(d/f*Math.tan(a)):a>o.HALF_PI&&a<=3*o.HALF_PI?Math.atan(d/f*Math.tan(a))+o.PI:Math.atan(d/f*Math.tan(a))+o.TWO_PI,l=l<=o.HALF_PI?Math.atan(d/f*Math.tan(l)):l>o.HALF_PI&&l<=3*o.HALF_PI?Math.atan(d/f*Math.tan(l))+o.PI:Math.atan(d/f*Math.tan(l))+o.TWO_PI),l<a&&(l+=o.TWO_PI),{start:a,stop:l,correspondToSamePoint:g<1e-5}},r.default.prototype.arc=function(a,l,d,f,m,g,_,x){if(r.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(m===g)return this;m=this._toRadians(m),g=this._toRadians(g),d=Math.abs(d),f=Math.abs(f);var w=c.default.modeAdjust(a,l,d,f,this._renderer._ellipseMode),M=this._normalizeArcAngles(m,g,w.w,w.h,!0);return M.correspondToSamePoint?this._renderer.ellipse([w.x,w.y,w.w,w.h,x]):(this._renderer.arc(w.x,w.y,w.w,w.h,M.start,M.stop,_,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[w.x,w.y,w.w,w.h,M.start,M.stop,_])),this},r.default.prototype.ellipse=function(a,l,d,f,m){return r.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},r.default.prototype.circle=function(){r.default._validateParameters("circle",arguments);var a=Array.prototype.slice.call(arguments,0,2);return a.push(arguments[2]),a.push(arguments[2]),this._renderEllipse.apply(this,a)},r.default.prototype._renderEllipse=function(a,l,d,f,m){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;d<0&&(d=Math.abs(d)),f===void 0?f=d:f<0&&(f=Math.abs(f));var g=c.default.modeAdjust(a,l,d,f,this._renderer._ellipseMode);return this._renderer.ellipse([g.x,g.y,g.w,g.h,m]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[g.x,g.y,g.w,g.h]),this},r.default.prototype.line=function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];var f;return r.default._validateParameters("line",l),this._renderer._doStroke&&(f=this._renderer).line.apply(f,l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",l),this},r.default.prototype.point=function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];var f;return r.default._validateParameters("point",l),this._renderer._doStroke&&(l.length===1&&l[0]instanceof r.default.Vector?this._renderer.point.call(this._renderer,l[0].x,l[0].y,l[0].z):((f=this._renderer).point.apply(f,l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",l))),this},r.default.prototype.quad=function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];var f;return r.default._validateParameters("quad",l),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&l.length<=12?this._renderer.quad.call(this._renderer,l[0],l[1],0,l[2],l[3],0,l[4],l[5],0,l[6],l[7],0,l[8],l[9]):((f=this._renderer).quad.apply(f,l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",l))),this},r.default.prototype.rect=function(){return r.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},r.default.prototype.square=function(a,l,d,f,m,g,_){return r.default._validateParameters("square",arguments),this._renderRect.call(this,a,l,d,d,f,m,g,_)},r.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var a=c.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),l=[a.x,a.y,a.w,a.h],d=4;d<arguments.length;d++)l[d]=arguments[d];this._renderer.rect(l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[a.x,a.y,a.w,a.h])}return this},r.default.prototype.triangle=function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return r.default._validateParameters("triangle",l),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",l),this};var u=r.default;i.default=u},{"../constants":250,"../friendly_errors/fes_core":252,"../friendly_errors/file_errors":253,"../friendly_errors/validate_params":255,"../helpers":256,"../main":260,"core-js/modules/es.array.slice":160}],268:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}o.default.prototype.ellipseMode=function(u){return o.default._validateParameters("ellipseMode",arguments),u!==c.CORNER&&u!==c.CORNERS&&u!==c.RADIUS&&u!==c.CENTER||(this._renderer._ellipseMode=u),this},o.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},o.default.prototype.rectMode=function(u){return o.default._validateParameters("rectMode",arguments),u!==c.CORNER&&u!==c.CORNERS&&u!==c.RADIUS&&u!==c.CENTER||(this._renderer._rectMode=u),this},o.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},o.default.prototype.strokeCap=function(u){return o.default._validateParameters("strokeCap",arguments),u!==c.ROUND&&u!==c.SQUARE&&u!==c.PROJECT||this._renderer.strokeCap(u),this},o.default.prototype.strokeJoin=function(u){return o.default._validateParameters("strokeJoin",arguments),u!==c.ROUND&&u!==c.BEVEL&&u!==c.MITER||this._renderer.strokeJoin(u),this},o.default.prototype.strokeWeight=function(u){return o.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(u),this};var p=o.default;i.default=p},{"../constants":250,"../main":260}],269:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../main"))&&s.__esModule?s:{default:s};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),r.default.prototype.bezier=function(){for(var c,h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return r.default._validateParameters("bezier",p),(this._renderer._doStroke||this._renderer._doFill)&&(c=this._renderer).bezier.apply(c,p),this},r.default.prototype.bezierDetail=function(c){return r.default._validateParameters("bezierDetail",arguments),this._bezierDetail=c,this},r.default.prototype.bezierPoint=function(c,h,p,u,a){r.default._validateParameters("bezierPoint",arguments);var l=1-a;return Math.pow(l,3)*c+3*Math.pow(l,2)*a*h+3*l*Math.pow(a,2)*p+Math.pow(a,3)*u},r.default.prototype.bezierTangent=function(c,h,p,u,a){r.default._validateParameters("bezierTangent",arguments);var l=1-a;return 3*u*Math.pow(a,2)-3*p*Math.pow(a,2)+6*p*l*a-6*h*l*a+3*h*Math.pow(l,2)-3*c*Math.pow(l,2)},r.default.prototype.curve=function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];var u;return r.default._validateParameters("curve",h),this._renderer._doStroke&&(u=this._renderer).curve.apply(u,h),this},r.default.prototype.curveDetail=function(c){return r.default._validateParameters("curveDetail",arguments),this._curveDetail=c<3?3:c,this},r.default.prototype.curveTightness=function(c){return r.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=c,this},r.default.prototype.curvePoint=function(c,h,p,u,a){r.default._validateParameters("curvePoint",arguments);var l=a*a*a,d=a*a;return c*(-.5*l+d-.5*a)+h*(1.5*l-2.5*d+1)+p*(-1.5*l+2*d+.5*a)+u*(.5*l-.5*d)},r.default.prototype.curveTangent=function(c,h,p,u,a){r.default._validateParameters("curveTangent",arguments);var l=a*a;return c*(-3*l/2+2*a-.5)+h*(9*l/2-5*a)+p*(-9*l/2+4*a+.5)+u*(3*l/2-a)};var o=r.default;i.default=o},{"../friendly_errors/fes_core":252,"../friendly_errors/file_errors":253,"../friendly_errors/validate_params":255,"../main":260}],270:[function(e,n,i){function s(x){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}e("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../main"))&&r.__esModule?r:{default:r},c=function(x){if(x&&x.__esModule)return x;if(x===null||s(x)!=="object"&&typeof x!="function")return{default:x};var w=h();if(w&&w.has(x))return w.get(x);var M={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in x)if(Object.prototype.hasOwnProperty.call(x,T)){var I=A?Object.getOwnPropertyDescriptor(x,T):null;I&&(I.get||I.set)?Object.defineProperty(M,T,I):M[T]=x[T]}return M.default=x,w&&w.set(x,M),M}(e("../constants"));function h(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return h=function(){return x},x}var p=null,u=[],a=[],l=!1,d=!1,f=!1,m=!1,g=!0;o.default.prototype.beginContour=function(){return a=[],m=!0,this},o.default.prototype.beginShape=function(x){var w;return o.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(w=this._renderer).beginShape.apply(w,arguments):(p=x===c.POINTS||x===c.LINES||x===c.TRIANGLES||x===c.TRIANGLE_FAN||x===c.TRIANGLE_STRIP||x===c.QUADS||x===c.QUAD_STRIP?x:null,u=[],a=[]),this},o.default.prototype.bezierVertex=function(){for(var x=arguments.length,w=new Array(x),M=0;M<x;M++)w[M]=arguments[M];var A;if(o.default._validateParameters("bezierVertex",w),this._renderer.isP3D)(A=this._renderer).bezierVertex.apply(A,w);else if(u.length===0)o.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{l=!0;for(var T=[],I=0;I<w.length;I++)T[I]=w[I];T.isVert=!1,m?a.push(T):u.push(T)}return this},o.default.prototype.curveVertex=function(){for(var x=arguments.length,w=new Array(x),M=0;M<x;M++)w[M]=arguments[M];var A;return o.default._validateParameters("curveVertex",w),this._renderer.isP3D?(A=this._renderer).curveVertex.apply(A,w):(d=!0,this.vertex(w[0],w[1])),this},o.default.prototype.endContour=function(){var x=a[0].slice();x.isVert=a[0].isVert,x.moveTo=!1,a.push(x),g&&(u.push(u[0]),g=!1);for(var w=0;w<a.length;w++)u.push(a[w]);return this},o.default.prototype.endShape=function(x){if(o.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(x,d,l,f,m,p);else{if(u.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var w=x===c.CLOSE;w&&!m&&u.push(u[0]),this._renderer.endShape(x,u,d,l,f,m,p),g=!(m=f=l=d=!1),w&&u.pop()}return this},o.default.prototype.quadraticVertex=function(){for(var x=arguments.length,w=new Array(x),M=0;M<x;M++)w[M]=arguments[M];if(o.default._validateParameters("quadraticVertex",w),this._renderer.isP3D){var A;(A=this._renderer).quadraticVertex.apply(A,w)}else{if(this._contourInited){var T={};return T.x=w[0],T.y=w[1],T.x3=w[2],T.y3=w[3],T.type=c.QUADRATIC,this._contourVertices.push(T),this}if(0<u.length){f=!0;for(var I=[],R=0;R<w.length;R++)I[R]=w[R];I.isVert=!1,m?a.push(I):u.push(I)}else o.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},o.default.prototype.vertex=function(x,w,M,A,T){if(this._renderer.isP3D){var I;(I=this._renderer).vertex.apply(I,arguments)}else{var R=[];R.isVert=!0,R[0]=x,R[1]=w,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),M&&(R.moveTo=M),m?(a.length===0&&(R.moveTo=!0),a.push(R)):u.push(R)}return this},o.default.prototype.normal=function(x,w,M){var A;return this._assert3d("normal"),o.default._validateParameters("normal",arguments),(A=this._renderer).normal.apply(A,arguments),this};var _=o.default;i.default=_},{"../constants":250,"../main":260,"core-js/modules/es.array.slice":160}],271:[function(e,n,i){function s(r){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(r)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r,o){window.setTimeout(r,1e3/60)},typeof Uint8ClampedArray=="undefined"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var r=Object.keys,o=Object.defineProperty,c=typeof Symbol=="function"&&s(Symbol())==="symbol",h=Object.prototype.propertyIsEnumerable,p=function(u){return function(a){return h.call(u,a)}};o(Object,"assign",{value:function(u,a){if(u==null)throw new TypeError("target must be an object");var l,d,f,m,g=Object(u);for(l=1;l<arguments.length;++l)for(d=Object(arguments[l]),m=r(d),c&&Object.getOwnPropertySymbols&&m.push.apply(m,Object.getOwnPropertySymbols(d).filter(p(d))),f=0;f<m.length;++f)g[m[f]]=d[m[f]];return g},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-clamped-array":224,"core-js/modules/web.dom-collections.iterator":226}],272:[function(e,n,i){e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var c=this._styles.pop();c?(this._renderer.pop(c.renderer),Object.assign(this,c.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(c){if(!this._inUserDraw&&this._setupDone){var h=parseInt(c);(isNaN(h)||h<1)&&(h=1);var p=this._isGlobal?window:this;if(typeof p.draw=="function"){p.setup===void 0&&p.scale(p._pixelDensity,p._pixelDensity);for(var u=function(l){l.call(p)},a=0;a<h;a++){p.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),p._renderer.isP3D&&p._renderer._update(),p._setProperty("frameCount",p.frameCount+1),p._registeredMethods.pre.forEach(u),this._inUserDraw=!0;try{p.draw()}finally{this._inUserDraw=!1}p._registeredMethods.post.forEach(u)}}}};var o=r.default;i.default=o},{"./main":260,"core-js/modules/es.array.for-each":152,"core-js/modules/es.object.assign":170,"core-js/modules/web.dom-collections.for-each":225}],273:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("./main"))&&s.__esModule?s:{default:s};function o(h){return function(p){if(Array.isArray(p)){for(var u=0,a=new Array(p.length);u<p.length;u++)a[u]=p[u];return a}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.applyMatrix=function(){var h,p,u=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||u?(h=this._renderer).applyMatrix.apply(h,o(arguments[0])):(p=this._renderer).applyMatrix.apply(p,arguments),this},r.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.default.prototype.rotate=function(h,p){return r.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(h),p),this},r.default.prototype.rotateX=function(h){return this._assert3d("rotateX"),r.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(h)),this},r.default.prototype.rotateY=function(h){return this._assert3d("rotateY"),r.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(h)),this},r.default.prototype.rotateZ=function(h){return this._assert3d("rotateZ"),r.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(h)),this},r.default.prototype.scale=function(h,p,u){if(r.default._validateParameters("scale",arguments),h instanceof r.default.Vector){var a=h;h=a.x,p=a.y,u=a.z}else if(h instanceof Array){var l=h;h=l[0],p=l[1],u=l[2]||1}return isNaN(p)?p=u=h:isNaN(u)&&(u=1),this._renderer.scale.call(this._renderer,h,p,u),this},r.default.prototype.shearX=function(h){r.default._validateParameters("shearX",arguments);var p=this._toRadians(h);return this._renderer.applyMatrix(1,0,Math.tan(p),1,0,0),this},r.default.prototype.shearY=function(h){r.default._validateParameters("shearY",arguments);var p=this._toRadians(h);return this._renderer.applyMatrix(1,Math.tan(p),0,1,0,0),this},r.default.prototype.translate=function(h,p,u){return r.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(h,p,u):this._renderer.translate(h,p),this};var c=r.default;i.default=c},{"./main":260,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.get-prototype-of":172,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226}],274:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(h){return function(p){if(Array.isArray(p)){for(var u=0,a=new Array(p.length);u<p.length;u++)a[u]=p[u];return a}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(h){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}r.default.prototype.storeItem=function(h,p){typeof h!="string"&&console.log("The argument that you passed to storeItem() - ".concat(h," is not a string.")),h.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(h," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var u=c(p);switch(u){case"number":case"boolean":p=p.toString();break;case"object":p instanceof r.default.Color?u="p5.Color":p instanceof r.default.Vector&&(u="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(h,p);var a="".concat(h,"p5TypeID");localStorage.setItem(a,u)},r.default.prototype.getItem=function(h){var p=localStorage.getItem(h),u=localStorage.getItem("".concat(h,"p5TypeID"));if(u===void 0)console.log("Unable to determine type of item stored under ".concat(h,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(u){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,o(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,o(p))}return p},r.default.prototype.clearStorage=function(){localStorage.clear()},r.default.prototype.removeItem=function(h){typeof h!="string"&&console.log("The argument that you passed to removeItem() - ".concat(h," is not a string.")),localStorage.removeItem(h),localStorage.removeItem("".concat(h,"p5TypeID"))}},{"../core/main":260,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.ends-with":181,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],275:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.createStringDict=function(c,h){return r.default._validateParameters("createStringDict",arguments),new r.default.StringDict(c,h)},r.default.prototype.createNumberDict=function(c,h){return r.default._validateParameters("createNumberDict",arguments),new r.default.NumberDict(c,h)},r.default.TypedDict=function(c,h){return c instanceof Object?this.data=c:(this.data={},this.data[c]=h),this},r.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},r.default.TypedDict.prototype.hasKey=function(c){return this.data.hasOwnProperty(c)},r.default.TypedDict.prototype.get=function(c){if(this.data.hasOwnProperty(c))return this.data[c];console.log("".concat(c," does not exist in this Dictionary"))},r.default.TypedDict.prototype.set=function(c,h){this._validate(h)?this.data[c]=h:console.log("Those values dont work for this dictionary type.")},r.default.TypedDict.prototype._addObj=function(c){for(var h in c)this.set(h,c[h])},r.default.TypedDict.prototype.create=function(c,h){c instanceof Object&&h===void 0?this._addObj(c):c!==void 0?this.set(c,h):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},r.default.TypedDict.prototype.clear=function(){this.data={}},r.default.TypedDict.prototype.remove=function(c){if(!this.data.hasOwnProperty(c))throw new Error("".concat(c," does not exist in this Dictionary"));delete this.data[c]},r.default.TypedDict.prototype.print=function(){for(var c in this.data)console.log("key:".concat(c," value:").concat(this.data[c]))},r.default.TypedDict.prototype.saveTable=function(c){var h="";for(var p in this.data)h+="".concat(p,",").concat(this.data[p],`
`);var u=new Blob([h],{type:"text/csv"});r.default.prototype.downloadFile(u,c||"mycsv","csv")},r.default.TypedDict.prototype.saveJSON=function(c,h){r.default.prototype.saveJSON(this.data,c,h)},r.default.TypedDict.prototype._validate=function(c){return!0},r.default.StringDict=function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];r.default.TypedDict.apply(this,h)},r.default.StringDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.StringDict.prototype._validate=function(c){return typeof c=="string"},r.default.NumberDict=function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];r.default.TypedDict.apply(this,h)},r.default.NumberDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.NumberDict.prototype._validate=function(c){return typeof c=="number"},r.default.NumberDict.prototype.add=function(c,h){this.data.hasOwnProperty(c)?this.data[c]+=h:console.log("The key - ".concat(c," does not exist in this dictionary."))},r.default.NumberDict.prototype.sub=function(c,h){this.add(c,-h)},r.default.NumberDict.prototype.mult=function(c,h){this.data.hasOwnProperty(c)?this.data[c]*=h:console.log("The key - ".concat(c," does not exist in this dictionary."))},r.default.NumberDict.prototype.div=function(c,h){this.data.hasOwnProperty(c)?this.data[c]/=h:console.log("The key - ".concat(c," does not exist in this dictionary."))},r.default.NumberDict.prototype._valueTest=function(c){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var h=this.data[Object.keys(this.data)[0]];for(var p in this.data)this.data[p]*c<h*c&&(h=this.data[p]);return h},r.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},r.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},r.default.NumberDict.prototype._keyTest=function(c){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var h=Object.keys(this.data)[0],p=1;p<Object.keys(this.data).length;p++)Object.keys(this.data)[p]*c<h*c&&(h=Object.keys(this.data)[p]);return h},r.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},r.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var o=r.default.TypedDict;i.default=o},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.object.keys":173,"core-js/modules/es.string.sub":189}],276:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(a){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}function c(a,l,d){(l._userNode?l._userNode:document.body).appendChild(a);var f=d?new r.default.MediaElement(a,l):new r.default.Element(a,l);return l._elements.push(f),f}function h(a,l,d,f){var m=document.createElement(l);typeof(d=d||"")=="string"&&(d=[d]);var g=!0,_=!1,x=void 0;try{for(var w,M=d[Symbol.iterator]();!(g=(w=M.next()).done);g=!0){var A=w.value,T=document.createElement("source");T.setAttribute("src",A),m.appendChild(T)}}catch(R){_=!0,x=R}finally{try{g||M.return==null||M.return()}finally{if(_)throw x}}typeof f=="function"&&m.addEventListener("canplaythrough",function R(){f(),m.removeEventListener("canplaythrough",R)});var I=c(m,a,!0);return I.loadedmetadata=!1,m.addEventListener("loadedmetadata",function(){I.width=m.videoWidth,I.height=m.videoHeight,I.elt.width===0&&(I.elt.width=m.videoWidth),I.elt.height===0&&(I.elt.height=m.videoHeight),I.presetPlaybackRate&&(I.elt.playbackRate=I.presetPlaybackRate,delete I.presetPlaybackRate),I.loadedmetadata=!0}),I}r.default.prototype.select=function(a,l){r.default._validateParameters("select",arguments);var d=this._getContainer(l).querySelector(a);return d?this._wrapElement(d):null},r.default.prototype.selectAll=function(a,l){r.default._validateParameters("selectAll",arguments);var d=[],f=this._getContainer(l).querySelectorAll(a);if(f)for(var m=0;m<f.length;m++){var g=this._wrapElement(f[m]);d.push(g)}return d},r.default.prototype._getContainer=function(a){var l=document;return typeof a=="string"?l=document.querySelector(a)||document:a instanceof r.default.Element?l=a.elt:a instanceof HTMLElement&&(l=a),l},r.default.prototype._wrapElement=function(a){var l=Array.prototype.slice.call(a.children);if(a.tagName!=="INPUT"||a.type!=="checkbox")return a.tagName==="VIDEO"||a.tagName==="AUDIO"?new r.default.MediaElement(a,this):a.tagName==="SELECT"?this.createSelect(new r.default.Element(a,this)):0<l.length&&l.every(function(f){return f.tagName==="INPUT"||f.tagName==="LABEL"})?this.createRadio(new r.default.Element(a,this)):new r.default.Element(a,this);var d=new r.default.Element(a,this);return d.checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},d},r.default.prototype.removeElements=function(a){r.default._validateParameters("removeElements",arguments),this._elements.filter(function(l){return!(l.elt instanceof HTMLCanvasElement)}).map(function(l){return l.remove()})},r.default.Element.prototype.changed=function(a){return r.default.Element._adjustListener("change",a,this),this},r.default.Element.prototype.input=function(a){return r.default.Element._adjustListener("input",a,this),this},r.default.prototype.createDiv=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("div");return l.innerHTML=a,c(l,this)},r.default.prototype.createP=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("p");return l.innerHTML=a,c(l,this)},r.default.prototype.createSpan=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("span");return l.innerHTML=a,c(l,this)},r.default.prototype.createImg=function(){r.default._validateParameters("createImg",arguments);var a,l=document.createElement("img"),d=arguments;return 1<d.length&&typeof d[1]=="string"&&(l.alt=d[1]),2<d.length&&typeof d[2]=="string"&&(l.crossOrigin=d[2]),l.src=d[0],a=c(l,this),l.addEventListener("load",function(){a.width=l.offsetWidth||l.width,a.height=l.offsetHeight||l.height;var f=d[d.length-1];typeof f=="function"&&f(a)}),a},r.default.prototype.createA=function(a,l,d){r.default._validateParameters("createA",arguments);var f=document.createElement("a");return f.href=a,f.innerHTML=l,d&&(f.target=d),c(f,this)},r.default.prototype.createSlider=function(a,l,d,f){r.default._validateParameters("createSlider",arguments);var m=document.createElement("input");return m.type="range",m.min=a,m.max=l,f===0?m.step=1e-18:f&&(m.step=f),typeof d=="number"&&(m.value=d),c(m,this)},r.default.prototype.createButton=function(a,l){r.default._validateParameters("createButton",arguments);var d=document.createElement("button");return d.innerHTML=a,l&&(d.value=l),c(d,this)},r.default.prototype.createCheckbox=function(){r.default._validateParameters("createCheckbox",arguments);var a=document.createElement("div"),l=document.createElement("input");l.type="checkbox",a.appendChild(l);var d=c(a,this);if(d.checked=function(){var g=d.elt.getElementsByTagName("input")[0];if(g){if(arguments.length===0)return g.checked;g.checked=!!arguments[0]}return d},this.value=function(g){return d.value=g,this},arguments[0]){var f=Math.random().toString(36).slice(2),m=document.createElement("label");l.setAttribute("id",f),m.htmlFor=f,d.value(arguments[0]),m.appendChild(document.createTextNode(arguments[0])),a.appendChild(m)}return arguments[1]&&(l.checked=!0),d},r.default.prototype.createSelect=function(){var a;r.default._validateParameters("createSelect",arguments);var l=arguments[0];if(l instanceof r.default.Element&&l.elt instanceof HTMLSelectElement)a=l,this.elt=l.elt;else if(l instanceof HTMLSelectElement)a=c(l,this),this.elt=l;else{var d=document.createElement("select");l&&typeof l=="boolean"&&d.setAttribute("multiple","true"),a=c(d,this),this.elt=d}return a.option=function(f,m){var g;if(f!==void 0){for(var _=0;_<this.elt.length;_+=1)if(this.elt[_].innerHTML===f){g=_;break}if(g!==void 0)m===!1?this.elt.remove(g):this.elt[g].value=m;else{var x=document.createElement("option");x.innerHTML=f,x.value=m===void 0?f:m,this.elt.appendChild(x),this._pInst._elements.push(x)}}},a.selected=function(f){if(f!==void 0){for(var m=0;m<this.elt.length;m+=1)this.elt[m].value.toString()===f.toString()&&(this.elt.selectedIndex=m);return this}if(this.elt.getAttribute("multiple")){var g=[],_=!0,x=!1,w=void 0;try{for(var M,A=this.elt.selectedOptions[Symbol.iterator]();!(_=(M=A.next()).done);_=!0){var T=M.value;g.push(T.value)}}catch(I){x=!0,w=I}finally{try{_||A.return==null||A.return()}finally{if(x)throw w}}return g}return this.elt.value},a.disable=function(f){if(typeof f=="string")for(var m=0;m<this.elt.length;m++)this.elt[m].value.toString()===f&&(this.elt[m].disabled=!0,this.elt[m].selected=!1);else this.elt.disabled=!0;return this},a},r.default.prototype.createRadio=function(){var a,l,d=arguments[0];d instanceof HTMLDivElement||d instanceof HTMLSpanElement?(a=d,typeof arguments[1]=="string"&&(l=arguments[1])):(typeof d=="string"&&(l=d),a=document.createElement("div"));var f=c(this.elt=a,this);f._name=l||"radioOption";function m(_){return _ instanceof HTMLInputElement&&_.type==="radio"}function g(_){return _.nextElementSibling instanceof HTMLLabelElement}return f._getOptionsArray=function(){return Array.from(this.elt.children).filter(m)},f.option=function(_,x){var w,M,A=!0,T=!1,I=void 0;try{for(var R,P=f._getOptionsArray()[Symbol.iterator]();!(A=(R=P.next()).done);A=!0){var O=R.value;if(O.value===_){w=O;break}}}catch(D){T=!0,I=D}finally{try{A||P.return==null||P.return()}finally{if(T)throw I}}return w===void 0&&((w=document.createElement("input")).setAttribute("type","radio"),w.setAttribute("value",_),this.elt.appendChild(w)),g(w)?M=w.nextElementSibling:(M=document.createElement("label"),w.insertAdjacentElement("afterend",M)),M.innerHTML=x===void 0?_:x,w.setAttribute("name",f._name),w},f.remove=function(_){var x=!0,w=!1,M=void 0;try{for(var A,T=f._getOptionsArray()[Symbol.iterator]();!(x=(A=T.next()).done);x=!0){var I=A.value;if(I.value===_)return g(I)&&I.nextElementSibling.remove(),void I.remove()}}catch(R){w=!0,M=R}finally{try{x||T.return==null||T.return()}finally{if(w)throw M}}},f.value=function(){var _="",x=!0,w=!1,M=void 0;try{for(var A,T=f._getOptionsArray()[Symbol.iterator]();!(x=(A=T.next()).done);x=!0){var I=A.value;if(I.checked){_=I.value;break}}}catch(R){w=!0,M=R}finally{try{x||T.return==null||T.return()}finally{if(w)throw M}}return _},f.selected=function(_){var x=null;if(_===void 0){var w=!0,M=!1,A=void 0;try{for(var T,I=f._getOptionsArray()[Symbol.iterator]();!(w=(T=I.next()).done);w=!0){var R=T.value;if(R.checked){x=R;break}}}catch(X){M=!0,A=X}finally{try{w||I.return==null||I.return()}finally{if(M)throw A}}}else{var P=!0,O=!1,D=void 0;try{for(var k,N=f._getOptionsArray()[Symbol.iterator]();!(P=(k=N.next()).done);P=!0){var q=k.value;q.value===_&&(q.setAttribute("checked",!0),x=q)}}catch(X){O=!0,D=X}finally{try{P||N.return==null||N.return()}finally{if(O)throw D}}}return x},f.disable=function(){var _=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],x=!0,w=!1,M=void 0;try{for(var A,T=f._getOptionsArray()[Symbol.iterator]();!(x=(A=T.next()).done);x=!0)A.value.setAttribute("disabled",_)}catch(I){w=!0,M=I}finally{try{x||T.return==null||T.return()}finally{if(w)throw M}}},f},r.default.prototype.createColorPicker=function(a){r.default._validateParameters("createColorPicker",arguments);var l,d=document.createElement("input");return d.type="color",a?a instanceof r.default.Color?d.value=a.toString("#rrggbb"):(r.default.prototype._colorMode="rgb",r.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},d.value=r.default.prototype.color(a).toString("#rrggbb")):d.value="#000000",(l=c(d,this)).color=function(){return a&&(a.mode&&(r.default.prototype._colorMode=a.mode),a.maxes&&(r.default.prototype._colorMaxes=a.maxes)),r.default.prototype.color(this.elt.value)},l},r.default.prototype.createInput=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";r.default._validateParameters("createInput",arguments);var d=document.createElement("input");return d.setAttribute("value",a),d.setAttribute("type",l),c(d,this)},r.default.prototype.createFileInput=function(a){var l=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(r.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var d=document.createElement("input");return d.setAttribute("type","file"),l&&d.setAttribute("multiple",!0),d.addEventListener("change",function(f){var m=!0,g=!1,_=void 0;try{for(var x,w=f.target.files[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var M=x.value;r.default.File._load(M,a)}}catch(A){g=!0,_=A}finally{try{m||w.return==null||w.return()}finally{if(g)throw _}}},!1),c(d,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},r.default.prototype.createVideo=function(a,l){return r.default._validateParameters("createVideo",arguments),h(this,"video",a,l)},r.default.prototype.createAudio=function(a,l){return r.default._validateParameters("createAudio",arguments),h(this,"audio",a,l)},r.default.prototype.VIDEO="video",r.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(a){var l=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return l?new Promise(function(d,f){l.call(navigator,a,d,f)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),r.default.prototype.createCapture=function(){if(r.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var a,l,d=!0,f=!0,m=!0,g=!1,_=void 0;try{for(var x,w=arguments[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var M=x.value;M===r.default.prototype.VIDEO?f=!1:M===r.default.prototype.AUDIO?d=!1:o(M)==="object"?a=M:typeof M=="function"&&(l=M)}}catch(I){g=!0,_=I}finally{try{m||w.return==null||w.return()}finally{if(g)throw _}}a=a||{video:d,audio:f};var A=document.createElement("video");A.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(a).then(function(I){try{"srcObject"in A?A.srcObject=I:A.src=window.URL.createObjectURL(I)}catch{A.src=I}},console.log);var T=c(A,this,!0);return T.loadedmetadata=!1,A.addEventListener("loadedmetadata",function(){A.play(),A.width?(T.width=A.width,T.height=A.height):(T.width=T.elt.width=A.videoWidth,T.height=T.elt.height=A.videoHeight),T.loadedmetadata=!0,l&&l(A.srcObject)}),T},r.default.prototype.createElement=function(a,l){r.default._validateParameters("createElement",arguments);var d=document.createElement(a);return l!==void 0&&(d.innerHTML=l),c(d,this)},r.default.Element.prototype.addClass=function(a){return this.elt.className?this.hasClass(a)||(this.elt.className=this.elt.className+" "+a):this.elt.className=a,this},r.default.Element.prototype.removeClass=function(a){return this.elt.classList.remove(a),this},r.default.Element.prototype.hasClass=function(a){return this.elt.classList.contains(a)},r.default.Element.prototype.toggleClass=function(a){return this.elt.classList.contains(a)?this.elt.classList.remove(a):this.elt.classList.add(a),this},r.default.Element.prototype.child=function(a){return a===void 0?this.elt.childNodes:(typeof a=="string"?(a[0]==="#"&&(a=a.substring(1)),a=document.getElementById(a)):a instanceof r.default.Element&&(a=a.elt),a instanceof HTMLElement&&this.elt.appendChild(a),this)},r.default.Element.prototype.center=function(a){var l=this.elt.style.display,d=this.elt.style.display==="none",f=this.parent().style.display==="none",m={x:this.elt.offsetLeft,y:this.elt.offsetTop};d&&this.show(),f&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var g=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),_=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return a==="both"||a===void 0?this.position(g/2+this.parent().offsetLeft,_/2+this.parent().offsetTop):a==="horizontal"?this.position(g/2+this.parent().offsetLeft,m.y):a==="vertical"&&this.position(m.x,_/2+this.parent().offsetTop),this.style("display",l),d&&this.hide(),f&&this.parent().hide(),this},r.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},r.default.Element.prototype.position=function(){if(arguments.length===0)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var a="absolute";return arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"||(a=arguments[2]),this.elt.style.position=a,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},r.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var a="";return this.elt.style.transform&&(a=(a=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=a,this},r.default.Element.prototype._rotate=function(){var a="";return this.elt.style.transform&&(a=(a=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=a,this},r.default.Element.prototype.style=function(a,l){if(l instanceof r.default.Color&&(l="rgba("+l.levels[0]+","+l.levels[1]+","+l.levels[2]+","+l.levels[3]/255+")"),l===void 0){if(a.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(a);for(var d=a.split(";"),f=0;f<d.length;f++){var m=d[f].split(":");m[0]&&m[1]&&(this.elt.style[m[0].trim()]=m[1].trim())}}else if(this.elt.style[a]=l,a==="width"||a==="height"||a==="left"||a==="top"){var g=window.getComputedStyle(this.elt).getPropertyValue(a).replace(/\D+/g,"");this[a]=parseInt(g,10)}return this},r.default.Element.prototype.attribute=function(a,l){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return l===void 0?this.elt.getAttribute(a):(this.elt.setAttribute(a,l),this);if(l===void 0)return this.elt.firstChild.getAttribute(a);for(var d=0;d<this.elt.childNodes.length;d++)this.elt.childNodes[d].setAttribute(a,l)},r.default.Element.prototype.removeAttribute=function(a){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var l=0;l<this.elt.childNodes.length;l++)this.elt.childNodes[l].removeAttribute(a);return this.elt.removeAttribute(a),this},r.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},r.default.Element.prototype.show=function(){return this.elt.style.display="block",this},r.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},r.default.Element.prototype.size=function(a,l){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var d=a,f=l,m=r.default.prototype.AUTO;if(d!==m||f!==m){if(d===m?d=l*this.width/this.height:f===m&&(f=a*this.height/this.width),this.elt instanceof HTMLCanvasElement){var g,_={},x=this.elt.getContext("2d");for(g in x)_[g]=x[g];for(g in this.elt.setAttribute("width",d*this._pInst._pixelDensity),this.elt.setAttribute("height",f*this._pInst._pixelDensity),this.elt.style.width=d+"px",this.elt.style.height=f+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),_)this.elt.getContext("2d")[g]=_[g]}else this.elt.style.width=d+"px",this.elt.style.height=f+"px",this.elt.width=d,this.elt.height=f;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},r.default.Element.prototype.remove=function(){if(this instanceof r.default.MediaElement){this.stop();var a=this.elt.srcObject;a!==null&&a.getTracks().forEach(function(f){f.stop()})}var l=this._pInst._elements.indexOf(this);for(var d in l!==-1&&this._pInst._elements.splice(l,1),this._events)this.elt.removeEventListener(d,this._events[d]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},r.default.Element.prototype.drop=function(a,l){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var d=function(f){f.preventDefault()};this.elt.addEventListener("dragover",d),this.elt.addEventListener("dragleave",d)}r.default.Element._attachListener("drop",function(f){f.preventDefault(),typeof l=="function"&&l.call(this,f);for(var m=f.dataTransfer.files,g=0;g<m.length;g++){var _=m[g];r.default.File._load(_,a)}},this)}else console.log("The File APIs are not fully supported in this browser.");return this},r.default.MediaElement=function(a,l){r.default.Element.call(this,a,l);var d=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(d,"src",{get:function(){var f=d.elt.children[0].src,m=d.elt.src===window.location.href?"":d.elt.src;return f===window.location.href?m:f},set:function(f){for(var m=0;m<d.elt.children.length;m++)d.elt.removeChild(d.elt.children[m]);var g=document.createElement("source");g.src=f,a.appendChild(g),d.elt.src=f,d.modified=!0}}),d._onended=function(){},d.elt.onended=function(){d._onended(d)}},r.default.MediaElement.prototype=Object.create(r.default.Element.prototype),r.default.MediaElement.prototype.play=function(){var a,l=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),(a=(1<this.elt.readyState||this.elt.load(),this.elt.play()))&&a.catch&&a.catch(function(d){d.name==="NotAllowedError"?r.default._friendlyAutoplayError(l.src):console.error("Media play method encountered an unexpected error",d)}),this},r.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},r.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},r.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},r.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},r.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var a=this,l=setTimeout(function(){return r.default._friendlyAutoplayError(a.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(l)},{passive:!0,once:!0})},r.default.MediaElement.prototype.autoplay=function(a){var l=this,d=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",a),a&&!d){var f=function(){return l._setupAutoplayFailDetection()};this.elt.readyState===4?f():this.elt.addEventListener("canplay",f,{passive:!0,once:!0})}return this},r.default.MediaElement.prototype.volume=function(a){if(a===void 0)return this.elt.volume;this.elt.volume=a},r.default.MediaElement.prototype.speed=function(a){if(a===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=a:this.presetPlaybackRate=a},r.default.MediaElement.prototype.time=function(a){return a===void 0?this.elt.currentTime:(this.elt.currentTime=a,this)},r.default.MediaElement.prototype.duration=function(){return this.elt.duration},r.default.MediaElement.prototype.pixels=[],r.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},r.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),r.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},r.default.MediaElement.prototype.updatePixels=function(a,l,d,f){return this.loadedmetadata&&(this._ensureCanvas(),r.default.Renderer2D.prototype.updatePixels.call(this,a,l,d,f)),this.setModified(!0),this},r.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),r.default.Renderer2D.prototype.get.apply(this,arguments)},r.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),r.default.Renderer2D.prototype._getPixel.apply(this,arguments)},r.default.MediaElement.prototype.set=function(a,l,d){this.loadedmetadata&&(this._ensureCanvas(),r.default.Renderer2D.prototype.set.call(this,a,l,d),this.setModified(!0))},r.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),r.default.prototype.copy.apply(this,arguments)},r.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),r.default.Image.prototype.mask.apply(this,arguments)},r.default.MediaElement.prototype.isModified=function(){return this._modified},r.default.MediaElement.prototype.setModified=function(a){this._modified=a},r.default.MediaElement.prototype.onended=function(a){return this._onended=a,this},r.default.MediaElement.prototype.connect=function(a){var l,d;if(typeof r.default.prototype.getAudioContext=="function")l=r.default.prototype.getAudioContext(),d=r.default.soundOut.input;else try{d=(l=a.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=l.createMediaElementSource(this.elt),this.audioSourceNode.connect(d)),a?a.input?this.audioSourceNode.connect(a.input):this.audioSourceNode.connect(a):this.audioSourceNode.connect(d)},r.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},r.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},r.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function p(a,l,d,f){this.callback=a,this.time=l,this.id=d,this.val=f}r.default.MediaElement.prototype.addCue=function(a,l,d){var f=this._cueIDCounter++,m=new p(l,a,f,d);return this._cues.push(m),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),f},r.default.MediaElement.prototype.removeCue=function(a){for(var l=0;l<this._cues.length;l++)this._cues[l].id===a&&(console.log(a),this._cues.splice(l,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},r.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},r.default.MediaElement.prototype._onTimeUpdate=function(){for(var a=this.time(),l=0;l<this._cues.length;l++){var d=this._cues[l].time,f=this._cues[l].val;this._prevTime<d&&d<=a&&this._cues[l].callback(f)}this._prevTime=a},r.default.File=function(a,l){this.file=a,this._pInst=l;var d=a.type.split("/");this.type=d[0],this.subtype=d[1],this.name=a.name,this.size=a.size,this.data=void 0},r.default.File._createLoader=function(a,l){var d=new FileReader;return d.onload=function(f){var m=new r.default.File(a);if(m.file.type==="application/json")m.data=JSON.parse(f.target.result);else if(m.file.type==="text/xml"){var g=new DOMParser().parseFromString(f.target.result,"text/xml");m.data=new r.default.XML(g.documentElement)}else m.data=f.target.result;l(m)},d},r.default.File._load=function(a,l){if(/^text\//.test(a.type)||a.type==="application/json")r.default.File._createLoader(a,l).readAsText(a);else if(/^(video|audio)\//.test(a.type)){var d=new r.default.File(a);d.data=URL.createObjectURL(a),l(d)}else r.default.File._createLoader(a,l).readAsDataURL(a)};var u=r.default;i.default=u},{"../core/main":260,"core-js/modules/es.array.every":149,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.from":153,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226,"core-js/modules/web.url":228}],277:[function(e,n,i){function s(x){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(x){if(x&&x.__esModule)return x;if(x===null||s(x)!=="object"&&typeof x!="function")return{default:x};var w=h();if(w&&w.has(x))return w.get(x);var M={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in x)if(Object.prototype.hasOwnProperty.call(x,T)){var I=A?Object.getOwnPropertyDescriptor(x,T):null;I&&(I.get||I.set)?Object.defineProperty(M,T,I):M[T]=x[T]}return M.default=x,w&&w.set(x,M),M}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return h=function(){return x},x}o.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",o.default.prototype.accelerationX=0,o.default.prototype.accelerationY=0,o.default.prototype.accelerationZ=0,o.default.prototype.pAccelerationX=0,o.default.prototype.pAccelerationY=0,o.default.prototype.pAccelerationZ=0,o.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},o.default.prototype.rotationX=0,o.default.prototype.rotationY=0,o.default.prototype.rotationZ=0,o.default.prototype.pRotationX=0,o.default.prototype.pRotationY=0;var p=o.default.prototype.pRotationZ=0,u=0,a=0,l="clockwise",d="clockwise",f="clockwise";o.default.prototype.pRotateDirectionX=void 0,o.default.prototype.pRotateDirectionY=void 0,o.default.prototype.pRotateDirectionZ=void 0,o.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},o.default.prototype.turnAxis=void 0;var m=.5,g=30;o.default.prototype.setMoveThreshold=function(x){o.default._validateParameters("setMoveThreshold",arguments),m=x},o.default.prototype.setShakeThreshold=function(x){o.default._validateParameters("setShakeThreshold",arguments),g=x},o.default.prototype._ondeviceorientation=function(x){this._updatePRotations(),this._angleMode===c.radians&&(x.beta=x.beta*(_PI/180),x.gamma=x.gamma*(_PI/180),x.alpha=x.alpha*(_PI/180)),this._setProperty("rotationX",x.beta),this._setProperty("rotationY",x.gamma),this._setProperty("rotationZ",x.alpha),this._handleMotion()},o.default.prototype._ondevicemotion=function(x){this._updatePAccelerations(),this._setProperty("accelerationX",2*x.acceleration.x),this._setProperty("accelerationY",2*x.acceleration.y),this._setProperty("accelerationZ",2*x.acceleration.z),this._handleMotion()},o.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var x,w,M=this._isGlobal?window:this;if(typeof M.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>m||Math.abs(this.accelerationY-this.pAccelerationY)>m||Math.abs(this.accelerationZ-this.pAccelerationZ)>m)&&M.deviceMoved(),typeof M.deviceTurned=="function"){var A=this.rotationX+180,T=this.pRotationX+180,I=p+180;0<A-T&&A-T<270||A-T<-270?l="clockwise":(A-T<0||270<A-T)&&(l="counter-clockwise"),l!==this.pRotateDirectionX&&(I=A),90<Math.abs(A-I)&&Math.abs(A-I)<270&&(I=A,this._setProperty("turnAxis","X"),M.deviceTurned()),this.pRotateDirectionX=l,p=I-180;var R=this.rotationY+180,P=this.pRotationY+180,O=u+180;0<R-P&&R-P<270||R-P<-270?d="clockwise":(R-P<0||270<R-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(O=R),90<Math.abs(R-O)&&Math.abs(R-O)<270&&(O=R,this._setProperty("turnAxis","Y"),M.deviceTurned()),this.pRotateDirectionY=d,u=O-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?f="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(f="counter-clockwise"),f!==this.pRotateDirectionZ&&(a=this.rotationZ),90<Math.abs(this.rotationZ-a)&&Math.abs(this.rotationZ-a)<270&&(a=this.rotationZ,this._setProperty("turnAxis","Z"),M.deviceTurned()),this.pRotateDirectionZ=f,this._setProperty("turnAxis",void 0)}typeof M.deviceShaken=="function"&&(this.pAccelerationX!==null&&(x=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),g<x+w&&M.deviceShaken())};var _=o.default;i.default=_},{"../core/constants":250,"../core/main":260}],278:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.isKeyPressed=!1,r.default.prototype.keyIsPressed=!1,r.default.prototype.key="",r.default.prototype.keyCode=0,r.default.prototype._onkeydown=function(c){if(!this._downKeys[c.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which);var h=this._isGlobal?window:this;typeof h.keyPressed=="function"&&!c.charCode&&h.keyPressed(c)===!1&&c.preventDefault()}},r.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var h=this._isGlobal?window:this;typeof h.keyReleased=="function"&&h.keyReleased(c)===!1&&c.preventDefault()},r.default.prototype._onkeypress=function(c){if(c.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which);var h=this._isGlobal?window:this;typeof h.keyTyped=="function"&&h.keyTyped(c)===!1&&c.preventDefault()}},r.default.prototype._onblur=function(c){this._downKeys={}},r.default.prototype.keyIsDown=function(c){return r.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},r.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1};var o=r.default;i.default=o},{"../core/main":260}],279:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}o.default.prototype.movedX=0,o.default.prototype.movedY=0,o.default.prototype._hasMouseInteracted=!1,o.default.prototype.mouseX=0,o.default.prototype.mouseY=0,o.default.prototype.pmouseX=0,o.default.prototype.pmouseY=0,o.default.prototype.winMouseX=0,o.default.prototype.winMouseY=0,o.default.prototype.pwinMouseX=0,o.default.prototype.pwinMouseY=0,o.default.prototype.mouseButton=0,o.default.prototype.mouseIsPressed=!1,o.default.prototype._updateNextMouseCoords=function(u){if(this._curElement!==null&&(!u.touches||0<u.touches.length)){var a=function(l,d,f,m){m&&!m.clientX&&(m.touches?m=m.touches[0]:m.changedTouches&&(m=m.changedTouches[0]));var g=l.getBoundingClientRect(),_=l.scrollWidth/d||1,x=l.scrollHeight/f||1;return{x:(m.clientX-g.left)/_,y:(m.clientY-g.top)/x,winX:m.clientX,winY:m.clientY,id:m.identifier}}(this._curElement.elt,this.width,this.height,u);this._setProperty("movedX",u.movementX),this._setProperty("movedY",u.movementY),this._setProperty("mouseX",a.x),this._setProperty("mouseY",a.y),this._setProperty("winMouseX",a.winX),this._setProperty("winMouseY",a.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},o.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},o.default.prototype._setMouseButton=function(u){u.button===1?this._setProperty("mouseButton",c.CENTER):u.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},o.default.prototype._onmousemove=function(u){var a=this._isGlobal?window:this;this._updateNextMouseCoords(u),this.mouseIsPressed?typeof a.mouseDragged=="function"?a.mouseDragged(u)===!1&&u.preventDefault():typeof a.touchMoved=="function"&&a.touchMoved(u)===!1&&u.preventDefault():typeof a.mouseMoved=="function"&&a.mouseMoved(u)===!1&&u.preventDefault()},o.default.prototype._onmousedown=function(u){var a=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(u),this._updateNextMouseCoords(u),typeof a.mousePressed=="function"?a.mousePressed(u)===!1&&u.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof a.touchStarted=="function"&&a.touchStarted(u)===!1&&u.preventDefault()},o.default.prototype._onmouseup=function(u){var a=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof a.mouseReleased=="function"?a.mouseReleased(u)===!1&&u.preventDefault():typeof a.touchEnded=="function"&&a.touchEnded(u)===!1&&u.preventDefault()},o.default.prototype._ondragend=o.default.prototype._onmouseup,o.default.prototype._ondragover=o.default.prototype._onmousemove,o.default.prototype._onclick=function(u){var a=this._isGlobal?window:this;typeof a.mouseClicked=="function"&&a.mouseClicked(u)===!1&&u.preventDefault()},o.default.prototype._ondblclick=function(u){var a=this._isGlobal?window:this;typeof a.doubleClicked=="function"&&a.doubleClicked(u)===!1&&u.preventDefault()},o.default.prototype._mouseWheelDeltaY=0,o.default.prototype._pmouseWheelDeltaY=0,o.default.prototype._onwheel=function(u){var a=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",u.deltaY),typeof a.mouseWheel=="function"&&(u.delta=u.deltaY,a.mouseWheel(u)===!1&&u.preventDefault())},o.default.prototype.requestPointerLock=function(){var u=this._curElement.elt;return u.requestPointerLock=u.requestPointerLock||u.mozRequestPointerLock,u.requestPointerLock?(u.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},o.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var p=o.default;i.default=p},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.string.includes":182}],280:[function(e,n,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(h,p,u,a,l){var d=4<arguments.length&&l!==void 0?l:0,f=h.getBoundingClientRect(),m=h.scrollWidth/p||1,g=h.scrollHeight/u||1,_=a.touches[d]||a.changedTouches[d];return{x:(_.clientX-f.left)/m,y:(_.clientY-f.top)/g,winX:_.clientX,winY:_.clientY,id:_.identifier}}r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(h){if(this._curElement!==null){for(var p=[],u=0;u<h.touches.length;u++)p[u]=o(this._curElement.elt,this.width,this.height,h,u);this._setProperty("touches",p)}},r.default.prototype._ontouchstart=function(h){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(h),this._updateNextMouseCoords(h),this._updateMouseCoords(),typeof p.touchStarted=="function"?p.touchStarted(h)===!1&&h.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof p.mousePressed=="function"&&p.mousePressed(h)===!1&&h.preventDefault()},r.default.prototype._ontouchmove=function(h){var p=this._isGlobal?window:this;this._updateTouchCoords(h),this._updateNextMouseCoords(h),typeof p.touchMoved=="function"?p.touchMoved(h)===!1&&h.preventDefault():typeof p.mouseDragged=="function"&&p.mouseDragged(h)===!1&&h.preventDefault()},r.default.prototype._ontouchend=function(h){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(h),this._updateNextMouseCoords(h);var p=this._isGlobal?window:this;typeof p.touchEnded=="function"?p.touchEnded(h)===!1&&h.preventDefault():typeof p.mouseReleased=="function"&&p.mouseReleased(h)===!1&&h.preventDefault()};var c=r.default;i.default=c},{"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.string.includes":182}],281:[function(e,n,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r,o,c,h={};function p(a,l){for(var d,f,m,g,_,x,w,M,A,T,I=h._toPixels(a),R=a.width,P=a.height,O=R*P,D=new Int32Array(O),k=0;k<O;k++)D[k]=h._getARGB(I,k);var N,q,X,G,Q=new Int32Array(O),K=new Int32Array(O),_e=new Int32Array(O),pe=new Int32Array(O),ge=0;for(function(de){var Ee=3.5*de|0;if(s!==(Ee=Ee<1?1:Ee<248?Ee:248)){r=1+(s=Ee)<<1,o=new Int32Array(r),c=new Array(r);for(var C=0;C<r;C++)c[C]=new Int32Array(256);for(var F,V,ne,re,se=1,te=Ee-1;se<Ee;se++){o[Ee+se]=o[te]=V=te*te,ne=c[Ee+se],re=c[te--];for(var be=0;be<256;be++)ne[be]=re[be]=V*be}F=o[Ee]=Ee*Ee,ne=c[Ee];for(var $=0;$<256;$++)ne[$]=F*$}}(l),q=0;q<P;q++){for(N=0;N<R;N++){if(g=m=f=_=d=0,(x=N-s)<0)T=-x,x=0;else{if(R<=x)break;T=0}for(X=T;X<r&&!(R<=x);X++){var ce=D[x+ge];_+=(G=c[X])[(-16777216&ce)>>>24],f+=G[(16711680&ce)>>16],m+=G[(65280&ce)>>8],g+=G[255&ce],d+=o[X],x++}Q[w=ge+N]=_/d,K[w]=f/d,_e[w]=m/d,pe[w]=g/d}ge+=R}for(A=(M=-s)*R,q=ge=0;q<P;q++){for(N=0;N<R;N++){if(g=m=f=_=d=0,M<0)T=w=-M,x=N;else{if(P<=M)break;T=0,w=M,x=N+A}for(X=T;X<r&&!(P<=w);X++)_+=(G=c[X])[Q[x]],f+=G[K[x]],m+=G[_e[x]],g+=G[pe[x]],d+=o[X],w++,x+=R;D[N+ge]=_/d<<24|f/d<<16|m/d<<8|g/d}ge+=R,A+=R,M++}h._setPixels(I,D)}h._toPixels=function(a){if(a instanceof ImageData)return a.data;if(a.getContext("2d"))return a.getContext("2d").getImageData(0,0,a.width,a.height).data;if(a.getContext("webgl")){var l=a.getContext("webgl"),d=l.drawingBufferWidth*l.drawingBufferHeight*4,f=new Uint8Array(d);return l.readPixels(0,0,a.width,a.height,l.RGBA,l.UNSIGNED_BYTE,f),f}},h._getARGB=function(a,l){var d=4*l;return a[3+d]<<24&4278190080|a[d]<<16&16711680|a[1+d]<<8&65280|255&a[2+d]},h._setPixels=function(a,l){for(var d=0,f=0,m=a.length;f<m;f++)a[(d=4*f)+0]=(16711680&l[f])>>>16,a[d+1]=(65280&l[f])>>>8,a[d+2]=255&l[f],a[d+3]=(4278190080&l[f])>>>24},h._toImageData=function(a){return a instanceof ImageData?a:a.getContext("2d").getImageData(0,0,a.width,a.height)},h._createImageData=function(a,l){return h._tmpCanvas=document.createElement("canvas"),h._tmpCtx=h._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(a,l)},h.apply=function(a,l,d){var f=a.getContext("2d"),m=f.getImageData(0,0,a.width,a.height),g=l(m,d);g instanceof ImageData?f.putImageData(g,0,0,0,0,a.width,a.height):f.putImageData(m,0,0,0,0,a.width,a.height)},h.threshold=function(a,l){var d=h._toPixels(a);l===void 0&&(l=.5);for(var f=Math.floor(255*l),m=0;m<d.length;m+=4){var g=void 0;g=f<=.2126*d[m]+.7152*d[m+1]+.0722*d[m+2]?255:0,d[m]=d[m+1]=d[m+2]=g}},h.gray=function(a){for(var l=h._toPixels(a),d=0;d<l.length;d+=4){var f=.2126*l[d]+.7152*l[d+1]+.0722*l[d+2];l[d]=l[d+1]=l[d+2]=f}},h.opaque=function(a){for(var l=h._toPixels(a),d=0;d<l.length;d+=4)l[d+3]=255;return l},h.invert=function(a){for(var l=h._toPixels(a),d=0;d<l.length;d+=4)l[d]=255-l[d],l[d+1]=255-l[d+1],l[d+2]=255-l[d+2]},h.posterize=function(a,l){var d=h._toPixels(a);if(l<2||255<l)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var f=l-1,m=0;m<d.length;m+=4){var g=d[m],_=d[m+1],x=d[m+2];d[m]=255*(g*l>>8)/f,d[m+1]=255*(_*l>>8)/f,d[m+2]=255*(x*l>>8)/f}},h.dilate=function(a){for(var l,d,f,m,g,_,x,w,M,A,T,I,R,P,O,D,k,N=h._toPixels(a),q=0,X=N.length?N.length/4:0,G=new Int32Array(X);q<X;)for(d=(l=q)+a.width;q<d;)f=m=h._getARGB(N,q),(x=q-1)<l&&(x=q),d<=(_=q+1)&&(_=q),(w=q-a.width)<0&&(w=0),X<=(M=q+a.width)&&(M=q),I=h._getARGB(N,w),T=h._getARGB(N,x),R=h._getARGB(N,M),(g=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<(O=77*(T>>16&255)+151*(T>>8&255)+28*(255&T))&&(m=T,g=O),g<(P=77*((A=h._getARGB(N,_))>>16&255)+151*(A>>8&255)+28*(255&A))&&(m=A,g=P),g<(D=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))&&(m=I,g=D),g<(k=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))&&(m=R,g=k),G[q++]=m;h._setPixels(N,G)},h.erode=function(a){for(var l,d,f,m,g,_,x,w,M,A,T,I,R,P,O,D,k,N=h._toPixels(a),q=0,X=N.length?N.length/4:0,G=new Int32Array(X);q<X;)for(d=(l=q)+a.width;q<d;)f=m=h._getARGB(N,q),(x=q-1)<l&&(x=q),d<=(_=q+1)&&(_=q),(w=q-a.width)<0&&(w=0),X<=(M=q+a.width)&&(M=q),I=h._getARGB(N,w),T=h._getARGB(N,x),R=h._getARGB(N,M),(O=77*(T>>16&255)+151*(T>>8&255)+28*(255&T))<(g=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))&&(m=T,g=O),(P=77*((A=h._getARGB(N,_))>>16&255)+151*(A>>8&255)+28*(255&A))<g&&(m=A,g=P),(D=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))<g&&(m=I,g=D),(k=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))<g&&(m=R,g=k),G[q++]=m;h._setPixels(N,G)},h.blur=function(a,l){p(a,l)};var u=h;i.default=u},{"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.int32-array":206,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223}],282:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(e("../core/main")),r=o(e("omggif"));function o(p){return p&&p.__esModule?p:{default:p}}function c(p){return function(u){if(Array.isArray(u)){for(var a=0,l=new Array(u.length);a<u.length;a++)l[a]=u[a];return l}}(p)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.createImage=function(p,u){return s.default._validateParameters("createImage",arguments),new s.default.Image(p,u)},s.default.prototype.saveCanvas=function(){s.default._validateParameters("saveCanvas",arguments);var p,u,a,l,d=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(p=arguments[0],d.shift()):arguments[0]instanceof s.default.Element?(p=arguments[0].elt,d.shift()):p=this._curElement&&this._curElement.elt,1<=d.length&&(u=d[0]),2<=d.length&&(a=d[1]),a=a||s.default.prototype._checkFileExtension(u,a)[1]||"png"){default:l="image/png";break;case"jpeg":case"jpg":l="image/jpeg"}p.toBlob(function(f){s.default.prototype.downloadFile(f,u,a)},l)},s.default.prototype.saveGif=function(p,u){var a=p.gifProperties,l=a.loopLimit;l===1?l=null:l===null&&(l=0);for(var d=new Uint8Array(p.width*p.height*a.numFrames),f=[],m={},g=0;g<a.numFrames;g++){for(var _=new Set,x=a.frames[g].image.data,w=x.length,M=new Uint32Array(p.width*p.height),A=0,T=0;A<w;A+=4,T++){var I=x[A+0]<<16|x[A+1]<<8|x[A+2]<<0;_.add(I),M[T]=I}var R=c(_).sort().toString();m[R]===void 0?m[R]={freq:1,frames:[g]}:(m[R].freq+=1,m[R].frames.push(g)),f.push(M)}var P=[],O=Object.keys(m).sort(function(C,F){return m[F].freq-m[C].freq}),D=O[0].split(",").map(function(C){return parseInt(C)});P=P.concat(m[D].frames);for(var k=new Set(D),N=1;N<O.length;N++){var q=O[N].split(",").map(function(C){return parseInt(C)}).filter(function(C){return!k.has(C)});if(D.length+q.length<=256){for(var X=0;X<q.length;X++)D.push(q[X]),k.add(q[X]);P=P.concat(m[O[N]].frames)}}P=new Set(P);for(var G={},Q=0;Q<D.length;Q++)G[D[Q]]||(G[D[Q]]=Q);for(var K=1;K<D.length;)K<<=1;D.length=K;for(var _e={loop:l,palette:new Uint32Array(D)},pe=new r.default.GifWriter(d,p.width,p.height,_e),ge={},ce=function(C){for(var F=!P.has(C),V=F?[]:D,ne=new Uint8Array(p.width*p.height),re={},se=new Set,te=0;te<f[C].length;te++){var be=f[C][te];F?(re[be]===void 0&&(re[be]=V.length,V.push(be)),ne[te]=re[be]):ne[te]=G[be],0<C&&f[C-1][te]!==be&&se.add(be)}var $={},me=V.filter(function(xe){return!se.has(xe)});if(0<me.length){var ue=me[0],B=F?re[ue]:G[ue];if(0<C){for(var W=0;W<f[C].length;W++)f[C-1][W]===f[C][W]&&(ne[W]=B);$.transparent=B,ge.frameOpts.disposal=1}}if($.delay=a.frames[C].delay/10,F){for(var ye=1;ye<V.length;)ye<<=1;V.length=ye,$.palette=new Uint32Array(V)}0<C&&pe.addFrame(0,0,p.width,p.height,ge.pixelPaletteIndex,ge.frameOpts),ge={pixelPaletteIndex:ne,frameOpts:$}},de=0;de<a.numFrames;de++)ce(de);ge.frameOpts.disposal=1,pe.addFrame(0,0,p.width,p.height,ge.pixelPaletteIndex,ge.frameOpts);var Ee=new Blob([d.slice(0,pe.end())],{type:"image/gif"});s.default.prototype.downloadFile(Ee,u,"gif")},s.default.prototype.saveFrames=function(p,u,a,l,d){s.default._validateParameters("saveFrames",arguments);var f=a||3;f=s.default.prototype.constrain(f,0,15),f*=1e3;var m=l||15;m=s.default.prototype.constrain(m,0,22);var g=0,_=s.default.prototype._makeFrame,x=this._curElement.elt,w=[],M=setInterval(function(){w.push(_(p+g,u,x)),g++},1e3/m);setTimeout(function(){if(clearInterval(M),d)d(w);else{var A=!0,T=!1,I=void 0;try{for(var R,P=w[Symbol.iterator]();!(A=(R=P.next()).done);A=!0){var O=R.value;s.default.prototype.downloadFile(O.imageData,O.filename,O.ext)}}catch(D){T=!0,I=D}finally{try{A||P.return==null||P.return()}finally{if(T)throw I}}}w=[]},f+.01)},s.default.prototype._makeFrame=function(p,u,a){var l,d;if(l=this?this._curElement.elt:a,u)switch(u.toLowerCase()){case"png":d="image/png";break;case"jpeg":case"jpg":d="image/jpeg";break;default:d="image/png"}else u="png",d="image/png";var f=l.toDataURL(d);f=f.replace(d,"image/octet-stream");var m={};return m.imageData=f,m.filename=p,m.ext=u,m};var h=s.default;i.default=h},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.set":180,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,omggif:235}],283:[function(e,n,i){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=a(e("../core/main")),o=a(e("./filters")),c=a(e("../core/helpers")),h=function(f){if(f&&f.__esModule)return f;if(f===null||s(f)!=="object"&&typeof f!="function")return{default:f};var m=u();if(m&&m.has(f))return m.get(f);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var w=_?Object.getOwnPropertyDescriptor(f,x):null;w&&(w.get||w.set)?Object.defineProperty(g,x,w):g[x]=f[x]}return g.default=f,m&&m.set(f,g),g}(e("../core/constants")),p=a(e("omggif"));function u(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return u=function(){return f},f}function a(f){return f&&f.__esModule?f:{default:f}}function l(f,m){return 0<f&&f<m?f:m}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.loadImage=function(f,m,g){r.default._validateParameters("loadImage",arguments);var _=new r.default.Image(1,1,this),x=this,w=new Request(f,{method:"GET",mode:"cors"});return fetch(f,w).then(function(M){var A=M.headers.get("content-type");if(A===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),A&&A.includes("image/gif"))M.arrayBuffer().then(function(I){I&&function(R,P,O,D,k){var N=new p.default.GifReader(R);P.width=P.canvas.width=N.width,P.height=P.canvas.height=N.height;var q=[],X=N.numFrames(),G=new Uint8ClampedArray(P.width*P.height*4);if(1<X){for(var Q=function(Ee,C){try{C.decodeAndBlitFrameRGBA(Ee,G)}catch(F){r.default._friendlyFileLoadError(8,P.src),typeof D=="function"?D(F):console.error(F)}},K=0;K<X;K++){var _e=N.frameInfo(K),pe=P.drawingContext.getImageData(0,0,P.width,P.height);G=pe.data.slice(),Q(K,N);var ge=new ImageData(G,P.width,P.height);P.drawingContext.putImageData(ge,0,0);var ce=_e.delay;ce===0&&(ce=10),q.push({image:P.drawingContext.getImageData(0,0,P.width,P.height),delay:10*ce}),_e.disposal===2?P.drawingContext.clearRect(_e.x,_e.y,_e.width,_e.height):_e.disposal===3&&P.drawingContext.putImageData(pe,0,0,_e.x,_e.y,_e.width,_e.height)}var de=N.loopCount();de===null?de=1:de===0&&(de=null),P.drawingContext.putImageData(q[0].image,0,0),P.gifProperties={displayIndex:0,loopLimit:de,loopCount:0,frames:q,numFrames:X,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof O=="function"&&O(P),k()}(new Uint8Array(I),_,m,g,function(R){x._decrementPreload()}.bind(x))},function(I){typeof g=="function"?g(I):console.error(I)});else{var T=new Image;T.onload=function(){_.width=_.canvas.width=T.width,_.height=_.canvas.height=T.height,_.drawingContext.drawImage(T,0,0),_.modified=!0,typeof m=="function"&&m(_),x._decrementPreload()},T.onerror=function(I){r.default._friendlyFileLoadError(0,T.src),typeof g=="function"?g(I):console.error(I)},f.indexOf("data:image/")!==0&&(T.crossOrigin="Anonymous"),T.src=f}_.modified=!0}).catch(function(M){r.default._friendlyFileLoadError(0,f),typeof g=="function"?g(M):console.error(M)}),_},r.default.prototype.image=function(f,m,g,_,x,w,M,A,T){r.default._validateParameters("image",arguments);var I=f.width,R=f.height;f.elt&&f.elt.videoWidth&&!f.canvas&&(I=f.elt.videoWidth,R=f.elt.videoHeight);var P=m,O=g,D=_||I,k=x||R,N=w||0,q=M||0,X=A||I,G=T||R;X=l(X,I),G=l(G,R);var Q=1;f.elt&&!f.canvas&&f.elt.style.width&&(Q=f.elt.videoWidth&&!_?f.elt.videoWidth:f.elt.width,Q/=parseInt(f.elt.style.width,10)),N*=Q,q*=Q,G*=Q,X*=Q;var K=c.default.modeAdjust(P,O,D,k,this._renderer._imageMode);this._renderer.image(f,N,q,X,G,K.x,K.y,K.w,K.h)},r.default.prototype.tint=function(){for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];r.default._validateParameters("tint",m);var _=this.color.apply(this,m);this._renderer._tint=_.levels},r.default.prototype.noTint=function(){this._renderer._tint=null},r.default.prototype._getTintedImageCanvas=function(f){if(!f.canvas)return f;var m=o.default._toPixels(f.canvas),g=document.createElement("canvas");g.width=f.canvas.width,g.height=f.canvas.height;for(var _=g.getContext("2d"),x=_.createImageData(f.canvas.width,f.canvas.height),w=x.data,M=0;M<m.length;M+=4){var A=m[M],T=m[M+1],I=m[M+2],R=m[M+3];w[M]=A*this._renderer._tint[0]/255,w[M+1]=T*this._renderer._tint[1]/255,w[M+2]=I*this._renderer._tint[2]/255,w[M+3]=R*this._renderer._tint[3]/255}return _.putImageData(x,0,0),g},r.default.prototype.imageMode=function(f){r.default._validateParameters("imageMode",arguments),f!==h.CORNER&&f!==h.CORNERS&&f!==h.CENTER||(this._renderer._imageMode=f)};var d=r.default;i.default=d},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/helpers":256,"../core/main":260,"./filters":281,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.includes":182,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/es.typed-array.uint8-clamped-array":224,omggif:235}],284:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(e("../core/main")),r=o(e("./filters"));function o(h){return h&&h.__esModule?h:{default:h}}s.default.Image=function(h,p){this.width=h,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},s.default.Image.prototype._animateGif=function(h){var p=this.gifProperties,u=h._lastFrameTime+h.deltaTime;if(p.lastChangeTime===0&&(p.lastChangeTime=u),p.playing){p.timeDisplayed=u-p.lastChangeTime;var a=p.frames[p.displayIndex].delay;if(p.timeDisplayed>=a){var l=Math.floor(p.timeDisplayed/a);if(p.timeDisplayed=0,p.lastChangeTime=u,p.displayIndex+=l,p.loopCount=Math.floor(p.displayIndex/p.numFrames),p.loopLimit!==null&&p.loopCount>=p.loopLimit)p.playing=!1;else{var d=p.displayIndex%p.numFrames;this.drawingContext.putImageData(p.frames[d].image,0,0),p.displayIndex=d,this.setModified(!0)}}}},s.default.Image.prototype._setProperty=function(h,p){this[h]=p,this.setModified(!0)},s.default.Image.prototype.loadPixels=function(){s.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},s.default.Image.prototype.updatePixels=function(h,p,u,a){s.default.Renderer2D.prototype.updatePixels.call(this,h,p,u,a),this.setModified(!0)},s.default.Image.prototype.get=function(h,p,u,a){return s.default._validateParameters("p5.Image.get",arguments),s.default.Renderer2D.prototype.get.apply(this,arguments)},s.default.Image.prototype._getPixel=s.default.Renderer2D.prototype._getPixel,s.default.Image.prototype.set=function(h,p,u){s.default.Renderer2D.prototype.set.call(this,h,p,u),this.setModified(!0)},s.default.Image.prototype.resize=function(h,p){h===0&&p===0?(h=this.canvas.width,p=this.canvas.height):h===0?h=this.canvas.width*p/this.canvas.height:p===0&&(p=this.canvas.height*h/this.canvas.width),h=Math.floor(h),p=Math.floor(p);var u=document.createElement("canvas");if(u.width=h,u.height=p,this.gifProperties)for(var a=this.gifProperties,l=function(m,g){for(var _=0,x=0;x<g.height;x++)for(var w=0;w<g.width;w++){var M=Math.floor(w*m.width/g.width),A=4*(Math.floor(x*m.height/g.height)*m.width+M);g.data[_++]=m.data[A++],g.data[_++]=m.data[A++],g.data[_++]=m.data[A++],g.data[_++]=m.data[A++]}},d=0;d<a.numFrames;d++){var f=this.drawingContext.createImageData(h,p);l(a.frames[d].image,f),a.frames[d].image=f}u.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,u.width,u.height),this.canvas.width=this.width=h,this.canvas.height=this.height=p,this.drawingContext.drawImage(u,0,0,h,p,0,0,h,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},s.default.Image.prototype.copy=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];s.default.prototype.copy.apply(this,p)},s.default.Image.prototype.mask=function(h){h===void 0&&(h=this);var p=this.drawingContext.globalCompositeOperation,u=1;h instanceof s.default.Renderer&&(u=h._pInst._pixelDensity);var a=[h,0,0,u*h.width,u*h.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",s.default.Image.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=p,this.setModified(!0)},s.default.Image.prototype.filter=function(h,p){r.default.apply(this.canvas,r.default[h],p),this.setModified(!0)},s.default.Image.prototype.blend=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];s.default._validateParameters("p5.Image.blend",arguments),s.default.prototype.blend.apply(this,p),this.setModified(!0)},s.default.Image.prototype.setModified=function(h){this._modified=h},s.default.Image.prototype.isModified=function(){return this._modified},s.default.Image.prototype.save=function(h,p){this.gifProperties?s.default.prototype.saveGif(this,h):s.default.prototype.saveCanvas(this.canvas,h,p)},s.default.Image.prototype.reset=function(){if(this.gifProperties){var h=this.gifProperties;h.playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0)}},s.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var h=this.gifProperties;return h.displayIndex%h.numFrames}},s.default.Image.prototype.setFrame=function(h){if(this.gifProperties){var p=this.gifProperties;h<p.numFrames&&0<=h?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=h,this.drawingContext.putImageData(p.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},s.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},s.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},s.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},s.default.Image.prototype.delay=function(h,p){if(this.gifProperties){var u=this.gifProperties;if(p<u.numFrames&&0<=p)u.frames[p].delay=h;else{var a=!0,l=!1,d=void 0;try{for(var f,m=u.frames[Symbol.iterator]();!(a=(f=m.next()).done);a=!0)f.value.delay=h}catch(g){l=!0,d=g}finally{try{a||m.return==null||m.return()}finally{if(l)throw d}}}}};var c=s.default.Image;i.default=c},{"../core/main":260,"./filters":281,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],285:[function(e,n,i){e("core-js/modules/es.array.filter"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(e("../core/main")),r=o(e("./filters"));function o(h){return h&&h.__esModule?h:{default:h}}e("../color/p5.Color"),s.default.prototype.pixels=[],s.default.prototype.blend=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];var a;s.default._validateParameters("blend",p),this._renderer?(a=this._renderer).blend.apply(a,p):s.default.Renderer2D.prototype.blend.apply(this,p)},s.default.prototype.copy=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];var a,l,d,f,m,g,_,x,w;if(s.default._validateParameters("copy",p),p.length===9)a=p[0],l=p[1],d=p[2],f=p[3],m=p[4],g=p[5],_=p[6],x=p[7],w=p[8];else{if(p.length!==8)throw new Error("Signature not supported");a=this,l=p[0],d=p[1],f=p[2],m=p[3],g=p[4],_=p[5],x=p[6],w=p[7]}s.default.prototype._copyHelper(this,a,l,d,f,m,g,_,x,w)},s.default.prototype._copyHelper=function(h,p,u,a,l,d,f,m,g,_){p.loadPixels();var x=p.canvas.width/p.width,w=0,M=0;p._renderer&&p._renderer.isP3D&&(w=p.width/2,M=p.height/2),h._renderer&&h._renderer.isP3D?s.default.RendererGL.prototype.image.call(h._renderer,p,u+w,a+M,l,d,f,m,g,_):h.drawingContext.drawImage(p.canvas,x*(u+w),x*(a+M),x*l,x*d,f,m,g,_)},s.default.prototype.filter=function(h,p){s.default._validateParameters("filter",arguments),this.canvas!==void 0?r.default.apply(this.canvas,r.default[h],p):r.default.apply(this.elt,r.default[h],p)},s.default.prototype.get=function(h,p,u,a){var l;return s.default._validateParameters("get",arguments),(l=this._renderer).get.apply(l,arguments)},s.default.prototype.loadPixels=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];s.default._validateParameters("loadPixels",p),this._renderer.loadPixels()},s.default.prototype.set=function(h,p,u){this._renderer.set(h,p,u)},s.default.prototype.updatePixels=function(h,p,u,a){s.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(h,p,u,a)};var c=s.default;i.default=c},{"../color/p5.Color":248,"../core/main":260,"./filters":281,"core-js/modules/es.array.filter":151}],286:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=c(e("../core/main"));e("whatwg-fetch"),e("es6-promise/auto");var r=c(e("fetch-jsonp")),o=c(e("file-saver"));function c(d){return d&&d.__esModule?d:{default:d}}function h(d){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function p(d,f){var m={};if((f=f||[])===void 0)for(var g=0;g<d.length;g++)f[g.toString()]=g;for(var _=0;_<f.length;_++){var x=f[_],w=d[_];m[x]=w}return m}function u(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function a(d,f){f&&f!==!0&&f!=="true"||(f="");var m="";return(d=d||"untitled")&&d.includes(".")&&(m=d.split(".").pop()),f&&m!==f&&(m=f,d="".concat(d,".").concat(m)),[d,m]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),s.default.prototype.loadJSON=function(){for(var d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];s.default._validateParameters("loadJSON",f);for(var g,_,x,w=f[0],M={},A="json",T=1;T<f.length;T++){var I=f[T];typeof I=="string"?I!=="jsonp"&&I!=="json"||(A=I):typeof I=="function"?g?_=I:g=I:h(I)==="object"&&(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))&&(A="jsonp",x=I)}var R=this;return this.httpDo(w,"GET",x,A,function(P){for(var O in P)M[O]=P[O];g!==void 0&&g(P),R._decrementPreload()},function(P){if(s.default._friendlyFileLoadError(5,w),!_)throw P;_(P)}),M},s.default.prototype.loadStrings=function(){for(var d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];s.default._validateParameters("loadStrings",f);for(var g,_,x=[],w=1;w<f.length;w++){var M=f[w];typeof M=="function"&&(g===void 0?g=M:_===void 0&&(_=M))}var A=this;return s.default.prototype.httpDo.call(this,f[0],"GET","text",function(T){for(var I=T.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,P=I.length;R<P;R+=32768)Array.prototype.push.apply(x,I.slice(R,Math.min(R+32768,P)));g!==void 0&&g(x),A._decrementPreload()},function(T){if(s.default._friendlyFileLoadError(3,T),!_)throw T;_(T)}),x},s.default.prototype.loadTable=function(d){var f,m,g,_=!1,x=d.substring(d.lastIndexOf(".")+1,d.length);x==="csv"?g=",":x==="ssv"?g=";":x==="tsv"&&(g="	");for(var w=1;w<arguments.length;w++)typeof arguments[w]=="function"?f===void 0?f=arguments[w]:m===void 0&&(m=arguments[w]):typeof arguments[w]=="string"&&(arguments[w]==="header"&&(_=!0),arguments[w]==="csv"?g=",":arguments[w]==="ssv"?g=";":arguments[w]==="tsv"&&(g="	"));var M=new s.default.Table,A=this;return this.httpDo(d,"GET","table",function(T){for(var I,R,P={},O=[],D=0,k=null,N=function(){P.currentState=0,P.token=""},q=function(){k.push(P.token),N()},X=function(){P.currentState=4,O.push(k),k=null};;){if((I=T[D++])==null){if(P.escaped)throw new Error("Unclosed quote in file.");if(k){q(),X();break}}if(k===null&&(P.escaped=!1,k=[],N()),P.currentState===0){if(I==='"'){P.escaped=!0,P.currentState=1;continue}P.currentState=1}if(P.currentState===1&&P.escaped)if(I==='"')T[D]==='"'?(P.token+='"',D++):(P.escaped=!1,P.currentState=2);else{if(I==="\r")continue;P.token+=I}else I==="\r"?(T[D]===`
`&&D++,q(),X()):I===`
`?(q(),X()):I===g?q():P.currentState===1&&(P.token+=I)}if(_)M.columns=O.shift();else for(var G=0;G<O[0].length;G++)M.columns[G]="null";for(var Q=0;Q<O.length;Q++)(O[Q].length!==1||O[Q][0]!=="undefined"&&O[Q][0]!=="")&&((R=new s.default.TableRow).arr=O[Q],R.obj=p(O[Q],M.columns),M.addRow(R));typeof f=="function"&&f(M),A._decrementPreload()},function(T){s.default._friendlyFileLoadError(2,d),m?m(T):console.error(T)}),M},s.default.prototype.loadXML=function(){for(var d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];for(var g,_,x=new s.default.XML,w=1;w<f.length;w++){var M=f[w];typeof M=="function"&&(g===void 0?g=M:_===void 0&&(_=M))}var A=this;return this.httpDo(f[0],"GET","xml",function(T){for(var I in T)x[I]=T[I];g!==void 0&&g(x),A._decrementPreload()},function(T){if(s.default._friendlyFileLoadError(1,T),!_)throw T;_(T)}),x},s.default.prototype.loadBytes=function(d,f,m){var g={},_=this;return this.httpDo(d,"GET","arrayBuffer",function(x){g.bytes=new Uint8Array(x),typeof f=="function"&&f(g),_._decrementPreload()},function(x){if(s.default._friendlyFileLoadError(6,d),!m)throw x;m(x)}),g},s.default.prototype.httpGet=function(){s.default._validateParameters("httpGet",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"GET"),s.default.prototype.httpDo.apply(this,d)},s.default.prototype.httpPost=function(){s.default._validateParameters("httpPost",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"POST"),s.default.prototype.httpDo.apply(this,d)},s.default.prototype.httpDo=function(){for(var d,f,m,g,_,x={},w=0,M="text/plain",A=arguments.length-1;0<A&&typeof(A<0||arguments.length<=A?void 0:arguments[A])=="function";A--)w++;var T=arguments.length<=0?void 0:arguments[0];if(arguments.length-w==2&&typeof T=="string"&&h(arguments.length<=1?void 0:arguments[1])==="object")g=new Request(T,arguments.length<=1?void 0:arguments[1]),f=arguments.length<=2?void 0:arguments[2],m=arguments.length<=3?void 0:arguments[3];else{for(var I,R="GET",P=1;P<arguments.length;P++){var O=P<0||arguments.length<=P?void 0:arguments[P];if(typeof O=="string")O==="GET"||O==="POST"||O==="PUT"||O==="DELETE"?R=O:O==="json"||O==="jsonp"||O==="binary"||O==="arrayBuffer"||O==="xml"||O==="text"||O==="table"?d=O:I=O;else if(typeof O=="number")I=O.toString();else if(h(O)==="object")if(O.hasOwnProperty("jsonpCallback")||O.hasOwnProperty("jsonpCallbackFunction"))for(var D in O)x[D]=O[D];else M=O instanceof s.default.XML?(I=O.serialize(),"application/xml"):(I=JSON.stringify(O),"application/json");else typeof O=="function"&&(f?m=O:f=O)}var k=R==="GET"?new Headers:new Headers({"Content-Type":M});g=new Request(T,{method:R,mode:"cors",body:I,headers:k})}return(_=(_=(d=d||(T.includes("json")?"json":T.includes("xml")?"xml":"text"))==="jsonp"?(0,r.default)(T,x):fetch(g)).then(function(N){if(!N.ok){var q=new Error(N.body);throw q.status=N.status,q.ok=!1,q}var X=0;switch(d!=="jsonp"&&(X=N.headers.get("content-length")),X&&64e6<X&&s.default._friendlyFileLoadError(7,T),d){case"json":case"jsonp":return N.json();case"binary":return N.blob();case"arrayBuffer":return N.arrayBuffer();case"xml":return N.text().then(function(G){var Q=new DOMParser().parseFromString(G,"text/xml");return new s.default.XML(Q.documentElement)});default:return N.text()}})).then(f||function(){}),_.catch(m||console.error),_},window.URL=window.URL||window.webkitURL,s.default.prototype._pWriters=[],s.default.prototype.createWriter=function(d,f){var m;for(var g in s.default.prototype._pWriters)if(s.default.prototype._pWriters[g].name===d)return m=new s.default.PrintWriter(d+this.millis(),f),s.default.prototype._pWriters.push(m),m;return m=new s.default.PrintWriter(d,f),s.default.prototype._pWriters.push(m),m},s.default.PrintWriter=function(d,f){var m=this;this.name=d,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g=[];for(var _ in g.push(this.content),s.default.prototype.writeFile(g,d,f),s.default.prototype._pWriters)s.default.prototype._pWriters[_].name===this.name&&s.default.prototype._pWriters.splice(_,1);m.clear(),m={}}},s.default.prototype.save=function(d,f,m){var g=arguments,_=this._curElement?this._curElement.elt:this.elt;if(g.length!==0)if(g[0]instanceof s.default.Renderer||g[0]instanceof s.default.Graphics)s.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")s.default.prototype.saveCanvas(_,g[0]);else switch(a(g[1],g[2])[1]){case"json":return void s.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void s.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?s.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof s.default.Table?s.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof s.default.Image?s.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof s.default.SoundFile&&s.default.prototype.saveSound(g[0],g[1],g[2],g[3])}else s.default.prototype.saveCanvas(_)},s.default.prototype.saveJSON=function(d,f,m){var g;s.default._validateParameters("saveJSON",arguments),g=m?JSON.stringify(d):JSON.stringify(d,void 0,2),this.saveStrings(g.split(`
`),f,"json")},s.default.prototype.saveJSONObject=s.default.prototype.saveJSON,s.default.prototype.saveJSONArray=s.default.prototype.saveJSON,s.default.prototype.saveStrings=function(d,f,m,g){s.default._validateParameters("saveStrings",arguments);for(var _=m||"txt",x=this.createWriter(f,_),w=0;w<d.length;w++)g?x.write(d[w]+`\r
`):x.write(d[w]+`
`);x.close(),x.clear()},s.default.prototype.saveTable=function(d,f,m){var g;s.default._validateParameters("saveTable",arguments),g=m===void 0?f.substring(f.lastIndexOf(".")+1,f.length):m;var _=this.createWriter(f,g),x=d.columns,w=",";if(g==="tsv"&&(w="	"),g!=="html"){if(x[0]!=="0"){for(var M=0;M<x.length;M++)M<x.length-1?_.write(x[M]+w):_.write(x[M]);_.write(`
`)}for(var A=0;A<d.rows.length;A++){var T=void 0;for(T=0;T<d.rows[A].arr.length;T++)T<d.rows[A].arr.length-1?g==="csv"&&String(d.rows[A].arr[T]).includes(",")?_.write('"'+d.rows[A].arr[T]+'"'+w):_.write(d.rows[A].arr[T]+w):g==="csv"&&String(d.rows[A].arr[T]).includes(",")?_.write('"'+d.rows[A].arr[T]+'"'):_.write(d.rows[A].arr[T]);_.write(`
`)}}else{if(_.print("<html>"),_.print("<head>"),_.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),_.print("</head>"),_.print("<body>"),_.print("  <table>"),x[0]!=="0"){_.print("    <tr>");for(var I=0;I<x.length;I++){var R=u(x[I]);_.print("      <td>".concat(R)),_.print("      </td>")}_.print("    </tr>")}for(var P=0;P<d.rows.length;P++){_.print("    <tr>");for(var O=0;O<d.columns.length;O++){var D=u(d.rows[P].getString(O));_.print("      <td>".concat(D)),_.print("      </td>")}_.print("    </tr>")}_.print("  </table>"),_.print("</body>"),_.print("</html>")}_.close(),_.clear()},s.default.prototype.writeFile=function(d,f,m){var g="application/octet-stream";s.default.prototype._isSafari()&&(g="text/plain");var _=new Blob(d,{type:g});s.default.prototype.downloadFile(_,f,m)},s.default.prototype.downloadFile=function(d,f,m){var g=a(f,m),_=g[0];if(d instanceof Blob)o.default.saveAs(d,_);else{var x=document.createElement("a");if(x.href=d,x.download=_,x.onclick=function(M){var A;A=M,document.body.removeChild(A.target),M.stopPropagation()},x.style.display="none",document.body.appendChild(x),s.default.prototype._isSafari()){var w=`Hello, Safari user! To download this file...
`;w+=`1. Go to File --> Save As.
`,w+=`2. Choose "Page Source" as the Format.
`,w+='3. Name it with this extension: ."'.concat(g[1],'"'),alert(w)}x.click()}},s.default.prototype._checkFileExtension=a,s.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var l=s.default;i.default=l},{"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,"core-js/modules/web.url":228,"es6-promise/auto":229,"fetch-jsonp":231,"file-saver":232,"whatwg-fetch":239}],287:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.Table=function(c){this.columns=[],this.rows=[]},r.default.Table.prototype.addRow=function(c){var h=c||new r.default.TableRow;if(h.arr===void 0||h.obj===void 0)throw new Error("invalid TableRow: ".concat(h));return(h.table=this).rows.push(h),h},r.default.Table.prototype.removeRow=function(c){this.rows[c].table=null;var h=this.rows.splice(c+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(h)},r.default.Table.prototype.getRow=function(c){return this.rows[c]},r.default.Table.prototype.getRows=function(){return this.rows},r.default.Table.prototype.findRow=function(c,h){if(typeof h=="string"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[h]===c)return this.rows[p]}else for(var u=0;u<this.rows.length;u++)if(this.rows[u].arr[h]===c)return this.rows[u];return null},r.default.Table.prototype.findRows=function(c,h){var p=[];if(typeof h=="string")for(var u=0;u<this.rows.length;u++)this.rows[u].obj[h]===c&&p.push(this.rows[u]);else for(var a=0;a<this.rows.length;a++)this.rows[a].arr[h]===c&&p.push(this.rows[a]);return p},r.default.Table.prototype.matchRow=function(c,h){if(typeof h=="number"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[h].match(c))return this.rows[p]}else for(var u=0;u<this.rows.length;u++)if(this.rows[u].obj[h].match(c))return this.rows[u];return null},r.default.Table.prototype.matchRows=function(c,h){var p=[];if(typeof h=="number")for(var u=0;u<this.rows.length;u++)this.rows[u].arr[h].match(c)&&p.push(this.rows[u]);else for(var a=0;a<this.rows.length;a++)this.rows[a].obj[h].match(c)&&p.push(this.rows[a]);return p},r.default.Table.prototype.getColumn=function(c){var h=[];if(typeof c=="string")for(var p=0;p<this.rows.length;p++)h.push(this.rows[p].obj[c]);else for(var u=0;u<this.rows.length;u++)h.push(this.rows[u].arr[c]);return h},r.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},r.default.Table.prototype.addColumn=function(c){var h=c||null;this.columns.push(h)},r.default.Table.prototype.getColumnCount=function(){return this.columns.length},r.default.Table.prototype.getRowCount=function(){return this.rows.length},r.default.Table.prototype.removeTokens=function(c,h){for(var p=[],u=0;u<c.length;u++)p.push(c.charAt(u).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var a=new RegExp(p.join("|"),"g");if(h===void 0)for(var l=0;l<this.columns.length;l++)for(var d=0;d<this.rows.length;d++){var f=this.rows[d].arr[l];f=f.replace(a,""),this.rows[d].arr[l]=f,this.rows[d].obj[this.columns[l]]=f}else if(typeof h=="string")for(var m=0;m<this.rows.length;m++){var g=this.rows[m].obj[h];g=g.replace(a,""),this.rows[m].obj[h]=g;var _=this.columns.indexOf(h);this.rows[m].arr[_]=g}else for(var x=0;x<this.rows.length;x++){var w=this.rows[x].arr[h];w=w.replace(a,""),this.rows[x].arr[h]=w,this.rows[x].obj[this.columns[h]]=w}},r.default.Table.prototype.trim=function(c){var h=new RegExp(" ","g");if(c===void 0)for(var p=0;p<this.columns.length;p++)for(var u=0;u<this.rows.length;u++){var a=this.rows[u].arr[p];a=a.replace(h,""),this.rows[u].arr[p]=a,this.rows[u].obj[this.columns[p]]=a}else if(typeof c=="string")for(var l=0;l<this.rows.length;l++){var d=this.rows[l].obj[c];d=d.replace(h,""),this.rows[l].obj[c]=d;var f=this.columns.indexOf(c);this.rows[l].arr[f]=d}else for(var m=0;m<this.rows.length;m++){var g=this.rows[m].arr[c];g=g.replace(h,""),this.rows[m].arr[c]=g,this.rows[m].obj[this.columns[c]]=g}},r.default.Table.prototype.removeColumn=function(c){var h,p;typeof c=="string"?(h=c,p=this.columns.indexOf(c)):(p=c,h=this.columns[c]);var u=this.columns.splice(p+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(u);for(var a=0;a<this.rows.length;a++){var l=this.rows[a].arr,d=l.splice(p+1,l.length);l.pop(),this.rows[a].arr=l.concat(d),delete this.rows[a].obj[h]}},r.default.Table.prototype.set=function(c,h,p){this.rows[c].set(h,p)},r.default.Table.prototype.setNum=function(c,h,p){this.rows[c].setNum(h,p)},r.default.Table.prototype.setString=function(c,h,p){this.rows[c].setString(h,p)},r.default.Table.prototype.get=function(c,h){return this.rows[c].get(h)},r.default.Table.prototype.getNum=function(c,h){return this.rows[c].getNum(h)},r.default.Table.prototype.getString=function(c,h){return this.rows[c].getString(h)},r.default.Table.prototype.getObject=function(c){for(var h,p={},u=0;u<this.rows.length;u++)if(h=this.rows[u].obj,typeof c=="string"){if(!(0<=this.columns.indexOf(c)))throw new Error('This table has no column named "'.concat(c,'"'));p[h[c]]=h}else p[u]=this.rows[u].obj;return p},r.default.Table.prototype.getArray=function(){for(var c=[],h=0;h<this.rows.length;h++)c.push(this.rows[h].arr);return c};var o=r.default;i.default=o},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.splice":162,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.trim":190}],288:[function(e,n,i){e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.TableRow=function(c,h){var p=[],u={};c&&(h=h||",",p=c.split(h));for(var a=0;a<p.length;a++){var l=a,d=p[a];u[l]=d}this.arr=p,this.obj=u,this.table=null},r.default.TableRow.prototype.set=function(c,h){if(typeof c=="string"){var p=this.table.columns.indexOf(c);if(!(0<=p))throw new Error('This table has no column named "'.concat(c,'"'));this.obj[c]=h,this.arr[p]=h}else{if(!(c<this.table.columns.length))throw new Error("Column #".concat(c," is out of the range of this table"));this.arr[c]=h;var u=this.table.columns[c];this.obj[u]=h}},r.default.TableRow.prototype.setNum=function(c,h){var p=parseFloat(h);this.set(c,p)},r.default.TableRow.prototype.setString=function(c,h){var p=h.toString();this.set(c,p)},r.default.TableRow.prototype.get=function(c){return typeof c=="string"?this.obj[c]:this.arr[c]},r.default.TableRow.prototype.getNum=function(c){var h;if((h=parseFloat(typeof c=="string"?this.obj[c]:this.arr[c])).toString()==="NaN")throw"Error: ".concat(this.obj[c]," is NaN (Not a Number)");return h},r.default.TableRow.prototype.getString=function(c){return typeof c=="string"?this.obj[c].toString():this.arr[c].toString()};var o=r.default;i.default=o},{"../core/main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.split":188}],289:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(h){for(var p=[],u=0;u<h.length;u++)p.push(new r.default.XML(h[u]));return p}r.default.XML=function(h){if(h)this.DOM=h;else{var p=document.implementation.createDocument(null,"doc");this.DOM=p.createElement("root")}},r.default.XML.prototype.getParent=function(){return new r.default.XML(this.DOM.parentElement)},r.default.XML.prototype.getName=function(){return this.DOM.tagName},r.default.XML.prototype.setName=function(h){var p=this.DOM.innerHTML,u=this.DOM.attributes,a=document.implementation.createDocument(null,"default").createElement(h);a.innerHTML=p;for(var l=0;l<u.length;l++)a.setAttribute(u[l].nodeName,u.nodeValue);this.DOM=a},r.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},r.default.XML.prototype.listChildren=function(){for(var h=[],p=0;p<this.DOM.childNodes.length;p++)h.push(this.DOM.childNodes[p].nodeName);return h},r.default.XML.prototype.getChildren=function(h){return o(h?this.DOM.getElementsByTagName(h):this.DOM.children)},r.default.XML.prototype.getChild=function(h){if(typeof h!="string")return new r.default.XML(this.DOM.children[h]);var p=!0,u=!1,a=void 0;try{for(var l,d=this.DOM.children[Symbol.iterator]();!(p=(l=d.next()).done);p=!0){var f=l.value;if(f.tagName===h)return new r.default.XML(f)}}catch(m){u=!0,a=m}finally{try{p||d.return==null||d.return()}finally{if(u)throw a}}},r.default.XML.prototype.addChild=function(h){h instanceof r.default.XML&&this.DOM.appendChild(h.DOM)},r.default.XML.prototype.removeChild=function(h){var p=-1;if(typeof h=="string"){for(var u=0;u<this.DOM.children.length;u++)if(this.DOM.children[u].tagName===h){p=u;break}}else p=h;p!==-1&&this.DOM.removeChild(this.DOM.children[p])},r.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},r.default.XML.prototype.listAttributes=function(){var h=[],p=!0,u=!1,a=void 0;try{for(var l,d=this.DOM.attributes[Symbol.iterator]();!(p=(l=d.next()).done);p=!0){var f=l.value;h.push(f.nodeName)}}catch(m){u=!0,a=m}finally{try{p||d.return==null||d.return()}finally{if(u)throw a}}return h},r.default.XML.prototype.hasAttribute=function(h){var p={},u=!0,a=!1,l=void 0;try{for(var d,f=this.DOM.attributes[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var m=d.value;p[m.nodeName]=m.nodeValue}}catch(g){a=!0,l=g}finally{try{u||f.return==null||f.return()}finally{if(a)throw l}}return!!p[h]},r.default.XML.prototype.getNum=function(h,p){var u={},a=!0,l=!1,d=void 0;try{for(var f,m=this.DOM.attributes[Symbol.iterator]();!(a=(f=m.next()).done);a=!0){var g=f.value;u[g.nodeName]=g.nodeValue}}catch(_){l=!0,d=_}finally{try{a||m.return==null||m.return()}finally{if(l)throw d}}return Number(u[h])||p||0},r.default.XML.prototype.getString=function(h,p){var u={},a=!0,l=!1,d=void 0;try{for(var f,m=this.DOM.attributes[Symbol.iterator]();!(a=(f=m.next()).done);a=!0){var g=f.value;u[g.nodeName]=g.nodeValue}}catch(_){l=!0,d=_}finally{try{a||m.return==null||m.return()}finally{if(l)throw d}}return u[h]?String(u[h]):p||null},r.default.XML.prototype.setAttribute=function(h,p){this.DOM.setAttribute(h,p)},r.default.XML.prototype.getContent=function(h){return this.DOM.textContent.replace(/\s\s+/g,",")||h||null},r.default.XML.prototype.setContent=function(h){this.DOM.children.length||(this.DOM.textContent=h)},r.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)};var c=r.default;i.default=c},{"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],290:[function(e,n,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var h=arguments.length,p=[],u=0,a=0;a<h;a++){var l=arguments[a];if((l=+l)==1/0||l===-1/0)return 1/0;u<(l=Math.abs(l))&&(u=l),p[a]=l}u===0&&(u=1);for(var d=0,f=0,m=0;m<h;m++){var g=p[m]/u,_=g*g-f,x=d+_;f=x-d-_,d=x}return Math.sqrt(d)*u}r.default.prototype.abs=Math.abs,r.default.prototype.ceil=Math.ceil,r.default.prototype.constrain=function(h,p,u){return r.default._validateParameters("constrain",arguments),Math.max(Math.min(h,u),p)},r.default.prototype.dist=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return r.default._validateParameters("dist",p),p.length===4?o(p[2]-p[0],p[3]-p[1]):p.length===6?o(p[3]-p[0],p[4]-p[1],p[5]-p[2]):void 0},r.default.prototype.exp=Math.exp,r.default.prototype.floor=Math.floor,r.default.prototype.lerp=function(h,p,u){return r.default._validateParameters("lerp",arguments),u*(p-h)+h},r.default.prototype.log=Math.log,r.default.prototype.mag=function(h,p){return r.default._validateParameters("mag",arguments),o(h,p)},r.default.prototype.map=function(h,p,u,a,l,d){r.default._validateParameters("map",arguments);var f=(h-p)/(u-p)*(l-a)+a;return d?a<l?this.constrain(f,a,l):this.constrain(f,l,a):f},r.default.prototype.max=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return p[0]instanceof Array?Math.max.apply(null,p[0]):Math.max.apply(null,p)},r.default.prototype.min=function(){for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return p[0]instanceof Array?Math.min.apply(null,p[0]):Math.min.apply(null,p)},r.default.prototype.norm=function(h,p,u){return r.default._validateParameters("norm",arguments),this.map(h,p,u,0,1)},r.default.prototype.pow=Math.pow,r.default.prototype.round=function(h,p){return p?Number(Math.round(h+"e"+p)+"e-"+p):Math.round(h)},r.default.prototype.sq=function(h){return h*h},r.default.prototype.sqrt=Math.sqrt,r.default.prototype.fract=function(h){r.default._validateParameters("fract",arguments);var p=0,u=Number(h);if(isNaN(u)||Math.abs(u)===1/0)return u;if(u<0&&(u=-u,p=1),!String(u).includes(".")||String(u).includes("e"))return u<1?Math.abs(p-u):0;var a=String(u);return a=Number("0"+a.slice(a.indexOf("."))),Math.abs(p-a)};var c=r.default;i.default=c},{"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.math.hypot":165,"core-js/modules/es.number.constructor":167,"core-js/modules/es.string.includes":182}],291:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.createVector=function(c,h,p){return this instanceof r.default?new r.default.Vector(this,arguments):new r.default.Vector(c,h,p)};var o=r.default;i.default=o},{"../core/main":260}],292:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(l){return .5*(1-Math.cos(l*Math.PI))}var c,h=4095,p=4,u=.5;r.default.prototype.noise=function(l){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var m=0;m<4096;m++)c[m]=Math.random()}l<0&&(l=-l),d<0&&(d=-d),f<0&&(f=-f);for(var g,_,x,w,M,A=Math.floor(l),T=Math.floor(d),I=Math.floor(f),R=l-A,P=d-T,O=f-I,D=0,k=.5,N=0;N<p;N++){var q=A+(T<<4)+(I<<8);g=o(R),_=o(P),x=c[q&h],x+=g*(c[q+1&h]-x),w=c[q+16&h],x+=_*((w+=g*(c[q+16+1&h]-w))-x),w=c[(q+=256)&h],w+=g*(c[q+1&h]-w),M=c[q+16&h],w+=_*((M+=g*(c[q+16+1&h]-M))-w),D+=(x+=o(O)*(w-x))*k,k*=u,A<<=1,T<<=1,I<<=1,1<=(R*=2)&&(A++,R--),1<=(P*=2)&&(T++,P--),1<=(O*=2)&&(I++,O--)}return D},r.default.prototype.noiseDetail=function(l,d){0<l&&(p=l),0<d&&(u=d)},r.default.prototype.noiseSeed=function(l){var d,f,m,g=(m=4294967296,{setSeed:function(x){f=d=(x==null?Math.random()*m:x)>>>0},getSeed:function(){return d},rand:function(){return(f=(1664525*f+1013904223)%m)/m}});g.setSeed(l),c=new Array(4096);for(var _=0;_<4096;_++)c[_]=g.rand()};var a=r.default;i.default=a},{"../core/main":260}],293:[function(e,n,i){function s(l){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(l){if(l&&l.__esModule)return l;if(l===null||s(l)!=="object"&&typeof l!="function")return{default:l};var d=h();if(d&&d.has(l))return d.get(l);var f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)){var _=m?Object.getOwnPropertyDescriptor(l,g):null;_&&(_.get||_.set)?Object.defineProperty(f,g,_):f[g]=l[g]}return f.default=l,d&&d.set(l,f),f}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return h=function(){return l},l}o.default.Vector=function(l,d,f){var m,g,_;_=l instanceof o.default?(this.p5=l,m=d[0]||0,g=d[1]||0,d[2]||0):(m=l||0,g=d||0,f||0),this.x=m,this.y=g,this.z=_},o.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},o.default.Vector.prototype.set=function(l,d,f){return l instanceof o.default.Vector?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):l instanceof Array?(this.x=l[0]||0,this.y=l[1]||0,this.z=l[2]||0):(this.x=l||0,this.y=d||0,this.z=f||0),this},o.default.Vector.prototype.copy=function(){return this.p5?new o.default.Vector(this.p5,[this.x,this.y,this.z]):new o.default.Vector(this.x,this.y,this.z)},o.default.Vector.prototype.add=function(l,d,f){return l instanceof o.default.Vector?(this.x+=l.x||0,this.y+=l.y||0,this.z+=l.z||0):l instanceof Array?(this.x+=l[0]||0,this.y+=l[1]||0,this.z+=l[2]||0):(this.x+=l||0,this.y+=d||0,this.z+=f||0),this};function p(l,d){return l!==0&&(this.x=this.x%l),d!==0&&(this.y=this.y%d),this}function u(l,d,f){return l!==0&&(this.x=this.x%l),d!==0&&(this.y=this.y%d),f!==0&&(this.z=this.z%f),this}o.default.Vector.prototype.rem=function(l,d,f){if(l instanceof o.default.Vector){if(Number.isFinite(l.x)&&Number.isFinite(l.y)&&Number.isFinite(l.z)){var m=parseFloat(l.x),g=parseFloat(l.y),_=parseFloat(l.z);u.call(this,m,g,_)}}else if(l instanceof Array)l.every(function(M){return Number.isFinite(M)})&&(l.length===2&&p.call(this,l[0],l[1]),l.length===3&&u.call(this,l[0],l[1],l[2]));else if(arguments.length===1){if(Number.isFinite(l)&&l!==0)return this.x=this.x%l,this.y=this.y%l,this.z=this.z%l,this}else if(arguments.length===2){var x=Array.prototype.slice.call(arguments);x.every(function(M){return Number.isFinite(M)})&&x.length===2&&p.call(this,x[0],x[1])}else if(arguments.length===3){var w=Array.prototype.slice.call(arguments);w.every(function(M){return Number.isFinite(M)})&&w.length===3&&u.call(this,w[0],w[1],w[2])}},o.default.Vector.prototype.sub=function(l,d,f){return l instanceof o.default.Vector?(this.x-=l.x||0,this.y-=l.y||0,this.z-=l.z||0):l instanceof Array?(this.x-=l[0]||0,this.y-=l[1]||0,this.z-=l[2]||0):(this.x-=l||0,this.y-=d||0,this.z-=f||0),this},o.default.Vector.prototype.mult=function(l,d,f){if(l instanceof o.default.Vector)return Number.isFinite(l.x)&&Number.isFinite(l.y)&&Number.isFinite(l.z)&&typeof l.x=="number"&&typeof l.y=="number"&&typeof l.z=="number"?(this.x*=l.x,this.y*=l.y,this.z*=l.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(l instanceof Array)return l.every(function(g){return Number.isFinite(g)})&&l.every(function(g){return typeof g=="number"})?l.length===1?(this.x*=l[0],this.y*=l[0],this.z*=l[0]):l.length===2?(this.x*=l[0],this.y*=l[1]):l.length===3&&(this.x*=l[0],this.y*=l[1],this.z*=l[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var m=Array.prototype.slice.call(arguments);return m.every(function(g){return Number.isFinite(g)})&&m.every(function(g){return typeof g=="number"})?(arguments.length===1&&(this.x*=l,this.y*=l,this.z*=l),arguments.length===2&&(this.x*=l,this.y*=d),arguments.length===3&&(this.x*=l,this.y*=d,this.z*=f)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},o.default.Vector.prototype.div=function(l,d,f){if(l instanceof o.default.Vector){if(Number.isFinite(l.x)&&Number.isFinite(l.y)&&Number.isFinite(l.z)&&typeof l.x=="number"&&typeof l.y=="number"&&typeof l.z=="number"){if(l.x===0||l.y===0||l.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=l.x,this.y/=l.y,this.z/=l.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(l instanceof Array){if(l.every(function(g){return Number.isFinite(g)})&&l.every(function(g){return typeof g=="number"})){if(l.some(function(g){return g===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;l.length===1?(this.x/=l[0],this.y/=l[0],this.z/=l[0]):l.length===2?(this.x/=l[0],this.y/=l[1]):l.length===3&&(this.x/=l[0],this.y/=l[1],this.z/=l[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var m=Array.prototype.slice.call(arguments);if(m.every(function(g){return Number.isFinite(g)})&&m.every(function(g){return typeof g=="number"})){if(m.some(function(g){return g===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=l,this.y/=l,this.z/=l),arguments.length===2&&(this.x/=l,this.y/=d),arguments.length===3&&(this.x/=l,this.y/=d,this.z/=f)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},o.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},o.default.Vector.prototype.magSq=function(){var l=this.x,d=this.y,f=this.z;return l*l+d*d+f*f},o.default.Vector.prototype.dot=function(l,d,f){return l instanceof o.default.Vector?this.dot(l.x,l.y,l.z):this.x*(l||0)+this.y*(d||0)+this.z*(f||0)},o.default.Vector.prototype.cross=function(l){var d=this.y*l.z-this.z*l.y,f=this.z*l.x-this.x*l.z,m=this.x*l.y-this.y*l.x;return this.p5?new o.default.Vector(this.p5,[d,f,m]):new o.default.Vector(d,f,m)},o.default.Vector.prototype.dist=function(l){return l.copy().sub(this).mag()},o.default.Vector.prototype.normalize=function(){var l=this.mag();return l!==0&&this.mult(1/l),this},o.default.Vector.prototype.limit=function(l){var d=this.magSq();return l*l<d&&this.div(Math.sqrt(d)).mult(l),this},o.default.Vector.prototype.setMag=function(l){return this.normalize().mult(l)},o.default.Vector.prototype.heading=function(){var l=Math.atan2(this.y,this.x);return this.p5?this.p5._fromRadians(l):l},o.default.Vector.prototype.setHeading=function(l){var d=this.mag();return this.x=d*Math.cos(l),this.y=d*Math.sin(l),this},o.default.Vector.prototype.rotate=function(l){var d=this.heading()+l;this.p5&&(d=this.p5._toRadians(d));var f=this.mag();return this.x=Math.cos(d)*f,this.y=Math.sin(d)*f,this},o.default.Vector.prototype.angleBetween=function(l){var d,f=this.dot(l)/(this.mag()*l.mag());return d=Math.acos(Math.min(1,Math.max(-1,f))),d*=Math.sign(this.cross(l).z||1),this.p5&&(d=this.p5._fromRadians(d)),d},o.default.Vector.prototype.lerp=function(l,d,f,m){return l instanceof o.default.Vector?this.lerp(l.x,l.y,l.z,d):(this.x+=(l-this.x)*m||0,this.y+=(d-this.y)*m||0,this.z+=(f-this.z)*m||0,this)},o.default.Vector.prototype.reflect=function(l){return l.normalize(),this.sub(l.mult(2*this.dot(l)))},o.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},o.default.Vector.prototype.equals=function(l,d,f){var m,g,_;return _=l instanceof o.default.Vector?(m=l.x||0,g=l.y||0,l.z||0):l instanceof Array?(m=l[0]||0,g=l[1]||0,l[2]||0):(m=l||0,g=d||0,f||0),this.x===m&&this.y===g&&this.z===_},o.default.Vector.fromAngle=function(l,d){return d===void 0&&(d=1),new o.default.Vector(d*Math.cos(l),d*Math.sin(l),0)},o.default.Vector.fromAngles=function(l,d,f){f===void 0&&(f=1);var m=Math.cos(d),g=Math.sin(d),_=Math.cos(l),x=Math.sin(l);return new o.default.Vector(f*x*g,-f*_,f*x*m)},o.default.Vector.random2D=function(){return this.fromAngle(Math.random()*c.TWO_PI)},o.default.Vector.random3D=function(){var l=Math.random()*c.TWO_PI,d=2*Math.random()-1,f=Math.sqrt(1-d*d),m=f*Math.cos(l),g=f*Math.sin(l);return new o.default.Vector(m,g,d)},o.default.Vector.add=function(l,d,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),f.add(d),f},o.default.Vector.rem=function(l,d){if(l instanceof o.default.Vector&&d instanceof o.default.Vector){var f=l.copy();return f.rem(d),f}},o.default.Vector.sub=function(l,d,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),f.sub(d),f},o.default.Vector.mult=function(l,d,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),f.mult(d),f},o.default.Vector.rotate=function(l,d,f){return arguments.length===2?f=l.copy():(f instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),f.set(l)),f.rotate(d),f},o.default.Vector.div=function(l,d,f){return f?f.set(l):(f=l.copy(),arguments.length===3&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),f.div(d),f},o.default.Vector.dot=function(l,d){return l.dot(d)},o.default.Vector.cross=function(l,d){return l.cross(d)},o.default.Vector.dist=function(l,d){return l.dist(d)},o.default.Vector.lerp=function(l,d,f,m){return m?m.set(l):(m=l.copy(),arguments.length===4&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),m.lerp(d,f),m},o.default.Vector.mag=function(l){var d=l.x,f=l.y,m=l.z,g=d*d+f*f+m*m;return Math.sqrt(g)},o.default.Vector.normalize=function(l,d){return arguments.length<2?d=l.copy():(d instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),d.set(l)),d.normalize()};var a=o.default.Vector;i.default=a},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.every":149,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.some":161,"core-js/modules/es.math.sign":166,"core-js/modules/es.number.constructor":167,"core-js/modules/es.number.is-finite":168,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.sub":189}],294:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},o="_lcg_random_state",c=4294967296,h=0;r.default.prototype._lcg=function(u){return this[u]=(1664525*this[u]+1013904223)%c,this[u]/c},r.default.prototype._lcgSetSeed=function(u,a){this[u]=(a==null?Math.random()*c:a)>>>0},r.default.prototype.randomSeed=function(u){this._lcgSetSeed(o,u),this._gaussian_previous=!1},r.default.prototype.random=function(u,a){var l;if(r.default._validateParameters("random",arguments),l=this[o]!=null?this._lcg(o):Math.random(),u===void 0)return l;if(a===void 0)return u instanceof Array?u[Math.floor(l*u.length)]:l*u;if(a<u){var d=u;u=a,a=d}return l*(a-u)+u},r.default.prototype.randomGaussian=function(u){var a,l,d,f,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)a=h,this._gaussian_previous=!1;else{for(;1<=(f=(l=this.random(2)-1)*l+(d=this.random(2)-1)*d););a=l*(f=Math.sqrt(-2*Math.log(f)/f)),h=d*f,this._gaussian_previous=!0}return a*m+(u||0)};var p=r.default;i.default=p},{"../core/main":260}],295:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}o.default.prototype._angleMode=c.RADIANS,o.default.prototype.acos=function(u){return this._fromRadians(Math.acos(u))},o.default.prototype.asin=function(u){return this._fromRadians(Math.asin(u))},o.default.prototype.atan=function(u){return this._fromRadians(Math.atan(u))},o.default.prototype.atan2=function(u,a){return this._fromRadians(Math.atan2(u,a))},o.default.prototype.cos=function(u){return Math.cos(this._toRadians(u))},o.default.prototype.sin=function(u){return Math.sin(this._toRadians(u))},o.default.prototype.tan=function(u){return Math.tan(this._toRadians(u))},o.default.prototype.degrees=function(u){return u*c.RAD_TO_DEG},o.default.prototype.radians=function(u){return u*c.DEG_TO_RAD},o.default.prototype.angleMode=function(u){u!==c.DEGREES&&u!==c.RADIANS||(this._angleMode=u)},o.default.prototype._toRadians=function(u){return this._angleMode===c.DEGREES?u*c.DEG_TO_RAD:u},o.default.prototype._toDegrees=function(u){return this._angleMode===c.RADIANS?u*c.RAD_TO_DEG:u},o.default.prototype._fromRadians=function(u){return this._angleMode===c.DEGREES?u*c.RAD_TO_DEG:u};var p=o.default;i.default=p},{"../core/constants":250,"../core/main":260}],296:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.textAlign=function(c,h){var p;return r.default._validateParameters("textAlign",arguments),(p=this._renderer).textAlign.apply(p,arguments)},r.default.prototype.textLeading=function(c){var h;return r.default._validateParameters("textLeading",arguments),(h=this._renderer).textLeading.apply(h,arguments)},r.default.prototype.textSize=function(c){var h;return r.default._validateParameters("textSize",arguments),(h=this._renderer).textSize.apply(h,arguments)},r.default.prototype.textStyle=function(c){var h;return r.default._validateParameters("textStyle",arguments),(h=this._renderer).textStyle.apply(h,arguments)},r.default.prototype.textWidth=function(){for(var c,h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return p[0]+="",r.default._validateParameters("textWidth",p),p[0].length===0?0:(c=this._renderer).textWidth.apply(c,p)},r.default.prototype.textAscent=function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return r.default._validateParameters("textAscent",h),this._renderer.textAscent()},r.default.prototype.textDescent=function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return r.default._validateParameters("textDescent",h),this._renderer.textDescent()},r.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},r.default.prototype.textWrap=function(c){if(c!=="WORD"&&c!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(c)};var o=r.default;i.default=o},{"../core/main":260}],297:[function(e,n,i){function s(l){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=u(e("../core/constants")),h=u(e("opentype.js"));function p(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return p=function(){return l},l}function u(l){if(l&&l.__esModule)return l;if(l===null||s(l)!=="object"&&typeof l!="function")return{default:l};var d=p();if(d&&d.has(l))return d.get(l);var f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)){var _=m?Object.getOwnPropertyDescriptor(l,g):null;_&&(_.get||_.set)?Object.defineProperty(f,g,_):f[g]=l[g]}return f.default=l,d&&d.set(l,f),f}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.loadFont=function(l,d,f){o.default._validateParameters("loadFont",arguments);var m=new o.default.Font(this),g=this;return h.load(l,function(_,x){if(_)return o.default._friendlyFileLoadError(4,l),f!==void 0?f(_):void console.error(_,l);m.font=x,d!==void 0&&d(m),g._decrementPreload();var w,M,A=l.split("\\").pop().split("/").pop(),T=A.lastIndexOf("."),I=T<1?null:A.substr(T+1);["ttf","otf","woff","woff2"].includes(I)&&(w=A.substr(0,T),(M=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(w,`;
src: url(`).concat(l,`);
}
`))),document.head.appendChild(M))}),m},o.default.prototype.text=function(l,d,f,m,g){var _;return o.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(_=this._renderer).text.apply(_,arguments):this},o.default.prototype.textFont=function(l,d){if(o.default._validateParameters("textFont",arguments),arguments.length){if(!l)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",l),d&&(this._renderer._setProperty("_textSize",d),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",d*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var a=o.default;i.default=a},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.split":188,"opentype.js":236}],298:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},o=function(R){if(R&&R.__esModule)return R;if(R===null||h(R)!=="object"&&typeof R!="function")return{default:R};var P=c();if(P&&P.has(R))return P.get(R);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in R)if(Object.prototype.hasOwnProperty.call(R,k)){var N=D?Object.getOwnPropertyDescriptor(R,k):null;N&&(N.get||N.set)?Object.defineProperty(O,k,N):O[k]=R[k]}return O.default=R,P&&P.set(R,O),O}(e("../core/constants"));function c(){if(typeof WeakMap!="function")return null;var R=new WeakMap;return c=function(){return R},R}function h(R){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(R)}function p(R,P){for(var O=function(X,G){if(h(X)!=="object")X=G;else for(var Q in G)X[Q]===void 0&&(X[Q]=G[Q]);return X}(P,{sampleFactor:.1,simplifyThreshold:0}),D=g(R,0,1),k=D/(D*O.sampleFactor),N=[],q=0;q<D;q+=k)N.push(g(R,q));return O.simplifyThreshold&&function(X){for(var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Q=0,K=X.length-1;3<X.length&&0<=K;--K)d(l(X,K-1),l(X,K),l(X,K+1),G)&&(X.splice(K%X.length,1),Q++)}(N,O.simplifyThreshold),N}function u(R){for(var P,O=[],D=0;D<R.length;D++)R[D].type==="M"&&(P&&O.push(P),P=[]),P.push(a(R[D]));return O.push(P),O}function a(R){var P=[R.type];return R.type==="M"||R.type==="L"?P.push(R.x,R.y):R.type==="C"?P.push(R.x1,R.y1,R.x2,R.y2,R.x,R.y):R.type==="Q"&&P.push(R.x1,R.y1,R.x,R.y),P}function l(R,P){var O=R.length;return R[P<0?P%O+O:P%O]}function d(R,P,O,D){if(!D)return k=R,q=O,((N=P)[0]-k[0])*(q[1]-k[1])-(q[0]-k[0])*(N[1]-k[1])==0;var k,N,q;d.tmpPoint1===void 0&&(d.tmpPoint1=[],d.tmpPoint2=[]);var X=d.tmpPoint1,G=d.tmpPoint2;X.x=P.x-R.x,X.y=P.y-R.y,G.x=O.x-P.x,G.y=O.y-P.y;var Q=X.x*G.x+X.y*G.y,K=Math.sqrt(X.x*X.x+X.y*X.y),_e=Math.sqrt(G.x*G.x+G.y*G.y);return Math.acos(Q/(K*_e))<D}function f(R,P,O,D,k,N,q,X,G){var Q=1-G,K=Math.pow(Q,3),_e=Math.pow(Q,2),pe=G*G,ge=pe*G,ce=K*R+3*_e*G*O+3*Q*G*G*k+ge*q,de=K*P+3*_e*G*D+3*Q*G*G*N+ge*X,Ee=R+2*G*(O-R)+pe*(k-2*O+R),C=P+2*G*(D-P)+pe*(N-2*D+P),F=O+2*G*(k-O)+pe*(q-2*k+O),V=D+2*G*(N-D)+pe*(X-2*N+D),ne=Q*R+G*O,re=Q*P+G*D,se=Q*k+G*q,te=Q*N+G*X,be=90-180*Math.atan2(Ee-F,C-V)/Math.PI;return(F<Ee||C<V)&&(be+=180),{x:ce,y:de,m:{x:Ee,y:C},n:{x:F,y:V},start:{x:ne,y:re},end:{x:se,y:te},alpha:be}}function m(R,P,O,D,k,N,q,X,G){return G==null?A(R,P,O,D,k,N,q,X):f(R,P,O,D,k,N,q,X,function(Q,K,_e,pe,ge,ce,de,Ee,C){if(!(C<0||A(Q,K,_e,pe,ge,ce,de,Ee)<C)){var F,V=.5,ne=1-V;for(F=A(Q,K,_e,pe,ge,ce,de,Ee,ne);.01<Math.abs(F-C);)F=A(Q,K,_e,pe,ge,ce,de,Ee,ne+=(F<C?1:-1)*(V/=2));return ne}}(R,P,O,D,k,N,q,X,G))}function g(R,P,O){for(var D,k,N,q,X,G=0,Q=0,K=(R=function(_e,pe){function ge(ye,xe,Re){var Ve,Pe;if(!ye)return["C",xe.x,xe.y,xe.x,xe.y,xe.x,xe.y];switch(ye[0]in{T:1,Q:1}||(xe.qx=xe.qy=null),ye[0]){case"M":xe.X=ye[1],xe.Y=ye[2];break;case"A":ye=["C"].concat(function Ke($e,Le,ae,De,ie,Fe,Ce,z,Z,H){var J=Math.PI,he=120*J/180,Te,Ie,Xe,Se,Qe=J/180*(+ie||0),it=[],St,xt=function(yt,wt,nt){var It=yt*Math.cos(nt)-wt*Math.sin(nt),dt=yt*Math.sin(nt)+wt*Math.cos(nt);return{x:It,y:dt}};if(H)Te=H[0],Ie=H[1],Xe=H[2],Se=H[3];else{St=xt($e,Le,-Qe),$e=St.x,Le=St.y,St=xt(z,Z,-Qe),z=St.x,Z=St.y;var ht=($e-z)/2,_t=(Le-Z)/2,Tt=ht*ht/(ae*ae)+_t*_t/(De*De);1<Tt&&(Tt=Math.sqrt(Tt),ae*=Tt,De*=Tt);var lr=ae*ae,Nr=De*De,qr=(Fe===Ce?-1:1)*Math.sqrt(Math.abs((lr*Nr-lr*_t*_t-Nr*ht*ht)/(lr*_t*_t+Nr*ht*ht)));Xe=qr*ae*_t/De+($e+z)/2,Se=qr*-De*ht/ae+(Le+Z)/2,Te=Math.asin(((Le-Se)/De).toFixed(9)),Ie=Math.asin(((Z-Se)/De).toFixed(9)),(Te=$e<Xe?J-Te:Te)<0&&(Te=2*J+Te),(Ie=z<Xe?J-Ie:Ie)<0&&(Ie=2*J+Ie),Ce&&Ie<Te&&(Te-=2*J),!Ce&&Te<Ie&&(Ie-=2*J)}var Tr=Ie-Te;if(Math.abs(Tr)>he){var nn=Ie,ve=z,ke=Z;Ie=Te+he*(Ce&&Te<Ie?1:-1),z=Xe+ae*Math.cos(Ie),Z=Se+De*Math.sin(Ie),it=Ke(z,Z,ae,De,ie,0,Ce,ve,ke,[Ie,nn,Xe,Se])}Tr=Ie-Te;var We=Math.cos(Te),Be=Math.sin(Te),Ye=Math.cos(Ie),bt=Math.sin(Ie),gt=Math.tan(Tr/4),ft=4/3*ae*gt,le=4/3*De*gt,je=[$e,Le],qe=[$e+ft*Be,Le-le*We],Ue=[z+ft*bt,Z-le*Ye],et=[z,Z];qe[0]=2*je[0]-qe[0],qe[1]=2*je[1]-qe[1];{if(H)return[qe,Ue,et].concat(it);it=[qe,Ue,et].concat(it).join().split(",");for(var ze=[],at=0,Mt=it.length;at<Mt;at++)ze[at]=at%2?xt(it[at-1],it[at],Qe).y:xt(it[at],it[at+1],Qe).x;return ze}}.apply(0,[xe.x,xe.y].concat(ye.slice(1))));break;case"S":Pe=Re==="C"||Re==="S"?(Ve=2*xe.x-xe.bx,2*xe.y-xe.by):(Ve=xe.x,xe.y),ye=["C",Ve,Pe].concat(ye.slice(1));break;case"T":Re==="Q"||Re==="T"?(xe.qx=2*xe.x-xe.qx,xe.qy=2*xe.y-xe.qy):(xe.qx=xe.x,xe.qy=xe.y),ye=["C"].concat(M(xe.x,xe.y,xe.qx,xe.qy,ye[1],ye[2]));break;case"Q":xe.qx=ye[1],xe.qy=ye[2],ye=["C"].concat(M(xe.x,xe.y,ye[1],ye[2],ye[3],ye[4]));break;case"L":ye=["C"].concat(w(xe.x,xe.y,ye[1],ye[2]));break;case"H":ye=["C"].concat(w(xe.x,xe.y,ye[1],xe.y));break;case"V":ye=["C"].concat(w(xe.x,xe.y,xe.x,ye[1]));break;case"Z":ye=["C"].concat(w(xe.x,xe.y,xe.X,xe.Y))}return ye}function ce(ye,xe){if(7<ye[xe].length){ye[xe].shift();for(var Re=ye[xe];Re.length;)re[xe]="A",F&&(se[xe]="A"),ye.splice(xe++,0,["C"].concat(Re.splice(0,6)));ye.splice(xe,1),Ee=Math.max(C.length,F&&F.length||0)}}function de(ye,xe,Re,Ve,Pe){ye&&xe&&ye[Pe][0]==="M"&&xe[Pe][0]!=="M"&&(xe.splice(Pe,0,["M",Ve.x,Ve.y]),Re.bx=0,Re.by=0,Re.x=ye[Pe][1],Re.y=ye[Pe][2],Ee=Math.max(C.length,F&&F.length||0))}var Ee,C=_(_e),F=pe&&_(pe),V={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},re=[],se=[],te="",be="";Ee=Math.max(C.length,F&&F.length||0);for(var $=0;$<Ee;$++){C[$]&&(te=C[$][0]),te!=="C"&&(re[$]=te,$&&(be=re[$-1])),C[$]=ge(C[$],V,be),re[$]!=="A"&&te==="C"&&(re[$]="C"),ce(C,$),F&&(F[$]&&(te=F[$][0]),te!=="C"&&(se[$]=te,$&&(be=se[$-1])),F[$]=ge(F[$],ne,be),se[$]!=="A"&&te==="C"&&(se[$]="C"),ce(F,$)),de(C,F,V,ne,$),de(F,C,ne,V,$);var me=C[$],ue=F&&F[$],B=me.length,W=F&&ue.length;V.x=me[B-2],V.y=me[B-1],V.bx=parseFloat(me[B-4])||V.x,V.by=parseFloat(me[B-3])||V.y,ne.bx=F&&(parseFloat(ue[W-4])||ne.x),ne.by=F&&(parseFloat(ue[W-3])||ne.y),ne.x=F&&ue[W-2],ne.y=F&&ue[W-1]}return F?[C,F]:C}(R)).length;Q<K;Q++){if((N=R[Q])[0]==="M")D=+N[1],k=+N[2];else{if(P<G+(q=m(D,k,N[1],N[2],N[3],N[4],N[5],N[6]))&&!O)return{x:(X=m(D,k,N[1],N[2],N[3],N[4],N[5],N[6],P-G)).x,y:X.y,alpha:X.alpha};G+=q,D=+N[5],k=+N[6]}N.shift()+N}return(X=O?G:f(D,k,N[0],N[1],N[2],N[3],N[4],N[5],1)).alpha&&(X={x:X.x,y:X.y,alpha:X.alpha}),X}function _(R){var P,O=[],D=0,k=0,N=0,q=0,X=0;if(!R)return O;R[0][0]==="M"&&(N=D=+R[0][1],q=k=+R[0][2],X++,O[0]=["M",D,k]);for(var G,Q,K=R.length===3&&R[0][0]==="M"&&R[1][0].toUpperCase()==="R"&&R[2][0].toUpperCase()==="Z",_e=X,pe=R.length;_e<pe;_e++){if(O.push(G=[]),(Q=R[_e])[0]!==String.prototype.toUpperCase.call(Q[0]))switch(G[0]=String.prototype.toUpperCase.call(Q[0]),G[0]){case"A":G[1]=Q[1],G[2]=Q[2],G[3]=Q[3],G[4]=Q[4],G[5]=Q[5],G[6]=+(Q[6]+D),G[7]=+(Q[7]+k);break;case"V":G[1]=+Q[1]+k;break;case"H":G[1]=+Q[1]+D;break;case"R":for(var ge=2,ce=(P=[D,k].concat(Q.slice(1))).length;ge<ce;ge++)P[ge]=+P[ge]+D,P[++ge]=+P[ge]+k;O.pop(),O=O.concat(x(P,K));break;case"M":N=+Q[1]+D,q=+Q[2]+k;break;default:for(var de=1,Ee=Q.length;de<Ee;de++)G[de]=+Q[de]+(de%2?D:k)}else if(Q[0]==="R")P=[D,k].concat(Q.slice(1)),O.pop(),O=O.concat(x(P,K)),G=["R"].concat(Q.slice(-2));else for(var C=0,F=Q.length;C<F;C++)G[C]=Q[C];switch(G[0]){case"Z":D=N,k=q;break;case"H":D=G[1];break;case"V":k=G[1];break;case"M":N=G[G.length-2],q=G[G.length-1];break;default:D=G[G.length-2],k=G[G.length-1]}}return O}function x(R,P){for(var O=[],D=0,k=R.length;D<k-2*!P;D+=2){var N=[{x:+R[D-2],y:+R[D-1]},{x:+R[D],y:+R[D+1]},{x:+R[D+2],y:+R[D+3]},{x:+R[D+4],y:+R[D+5]}];P?D?k-4===D?N[3]={x:+R[0],y:+R[1]}:k-2===D&&(N[2]={x:+R[0],y:+R[1]},N[3]={x:+R[2],y:+R[3]}):N[0]={x:+R[k-2],y:+R[k-1]}:k-4===D?N[3]=N[2]:D||(N[0]={x:+R[D],y:+R[D+1]}),O.push(["C",(-N[0].x+6*N[1].x+N[2].x)/6,(-N[0].y+6*N[1].y+N[2].y)/6,(N[1].x+6*N[2].x-N[3].x)/6,(N[1].y+6*N[2].y-N[3].y)/6,N[2].x,N[2].y])}return O}function w(R,P,O,D){return[R,P,O,D,O,D]}function M(R,P,O,D,k,N){return[1/3*R+2/3*O,1/3*P+2/3*D,1/3*k+2/3*O,1/3*N+2/3*D,k,N]}function A(R,P,O,D,k,N,q,X,G){G==null&&(G=1);for(var Q=(G=1<G?1:G<0?0:G)/2,K=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_e=0,pe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ge=0;ge<12;ge++){var ce=Q*K[ge]+Q,de=T(ce,R,O,k,q),Ee=T(ce,P,D,N,X),C=de*de+Ee*Ee;_e+=pe[ge]*Math.sqrt(C)}return Q*_e}function T(R,P,O,D,k){return R*(R*(-3*P+9*O-9*D+3*k)+6*P-12*O+6*D)-3*P+3*O}r.default.Font=function(R){this.parent=R,this.cache={},this.font=void 0},r.default.Font.prototype.textBounds=function(R){var P,O=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,k=3<arguments.length?arguments[3]:void 0,N=4<arguments.length?arguments[4]:void 0,q=N&&N.renderer&&N.renderer._pInst||this.parent,X=q._renderer.drawingContext;if(X.textAlign||o.LEFT,X.textBaseline||o.BASELINE,k=k||q._renderer._textSize,!P){var G,Q,K=[],_e=[],pe=[];pe[0]=[];var ge=[],ce=this._scale(k),de=q._renderer.textLeading(),Ee=0;this.font.forEachGlyph(R,O,D,k,N,function(re,se,te,be){var $=re.getMetrics();re.index===0||re.index===10?pe[Ee+=1]=[]:(pe[Ee].push(se+$.xMin*ce),pe[Ee].push(se+$.xMax*ce),ge.push(te+Ee*de+-$.yMin*ce),ge.push(te+Ee*de+-$.yMax*ce))}),0<pe[Ee].length&&(K[Ee]=Math.min.apply(null,pe[Ee]),_e[Ee]=Math.max.apply(null,pe[Ee]));for(var C=0,F=0;F<=Ee;F++){K[F]=Math.min.apply(null,pe[F]),_e[F]=Math.max.apply(null,pe[F]);var V=_e[F]-K[F];C<V&&(C=V)}var ne=Math.min.apply(null,K);P={x:ne,y:G=Math.min.apply(null,ge),h:Math.max.apply(null,ge)-G,w:C,advance:ne-O},Q=this._handleAlignment(q._renderer,R,P.x,P.y,P.w+P.advance),P.x=Q.x,P.y=Q.y}return P},r.default.Font.prototype.textToPoints=function(R,P,O,D,k){var N,q=0,X=[],G=this._getGlyphs(R);D=D||this.parent._renderer._textSize;for(var Q=0;Q<G.length;Q++){if(!(G[N=Q].name&&G[N].name==="space"||R.length===G.length&&R[N]===" "||G[N].index&&G[N].index===3))for(var K=u(G[Q].getPath(P,O,D).commands),_e=0;_e<K.length;_e++)for(var pe=p(K[_e],k),ge=0;ge<pe.length;ge++)pe[ge].x+=q,X.push(pe[ge]);q+=G[Q].advanceWidth*this._scale(D)}return X},r.default.Font.prototype._getGlyphs=function(R){return this.font.stringToGlyphs(R)},r.default.Font.prototype._getPath=function(R,P,O,D){var k=(D&&D.renderer&&D.renderer._pInst||this.parent)._renderer,N=this._handleAlignment(k,R,P,O);return this.font.getPath(R,N.x,N.y,k._textSize,D)},r.default.Font.prototype._getPathData=function(R,P,O,D){var k=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,P,O,D):h(P)==="object"&&(D=P),D&&typeof D.decimals=="number"&&(k=D.decimals),R.toPathData(k)},r.default.Font.prototype._getSVG=function(R,P,O,D){var k=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,P,O,D):h(P)==="object"&&(D=P),D&&(typeof D.decimals=="number"&&(k=D.decimals),typeof D.strokeWidth=="number"&&(R.strokeWidth=D.strokeWidth),D.fill!==void 0&&(R.fill=D.fill),D.stroke!==void 0&&(R.stroke=D.stroke)),R.toSVG(k)},r.default.Font.prototype._renderPath=function(R,P,O,D){var k,N=D&&D.renderer||this.parent._renderer,q=N.drawingContext;k=h(R)==="object"&&R.commands?R.commands:this._getPath(R,P,O,D).commands,q.beginPath();var X=!0,G=!1,Q=void 0;try{for(var K,_e=k[Symbol.iterator]();!(X=(K=_e.next()).done);X=!0){var pe=K.value;pe.type==="M"?q.moveTo(pe.x,pe.y):pe.type==="L"?q.lineTo(pe.x,pe.y):pe.type==="C"?q.bezierCurveTo(pe.x1,pe.y1,pe.x2,pe.y2,pe.x,pe.y):pe.type==="Q"?q.quadraticCurveTo(pe.x1,pe.y1,pe.x,pe.y):pe.type==="Z"&&q.closePath()}}catch(ge){G=!0,Q=ge}finally{try{X||_e.return==null||_e.return()}finally{if(G)throw Q}}return N._doStroke&&N._strokeSet&&q.stroke(),N._doFill&&(N._fillSet||N._setFill(o._DEFAULT_TEXT_FILL),q.fill()),this},r.default.Font.prototype._textWidth=function(R,P){return this.font.getAdvanceWidth(R,P)},r.default.Font.prototype._textAscent=function(R){return this.font.ascender*this._scale(R)},r.default.Font.prototype._textDescent=function(R){return-this.font.descender*this._scale(R)},r.default.Font.prototype._scale=function(R){return 1/this.font.unitsPerEm*(R||this.parent._renderer._textSize)},r.default.Font.prototype._handleAlignment=function(R,P,O,D,k){var N=R._textSize;switch(k===void 0&&(k=this._textWidth(P,N)),R._textAlign){case o.CENTER:O-=k/2;break;case o.RIGHT:O-=k}switch(R._textBaseline){case o.TOP:D+=this._textAscent(N);break;case o.CENTER:D+=this._textAscent(N)/2;break;case o.BOTTOM:D-=this._textDescent(N)}return{x:O,y:D}};var I=r.default;i.default=I},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.number.to-fixed":169,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],299:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.append=function(c,h){return c.push(h),c},r.default.prototype.arrayCopy=function(c,h,p,u,a){var l,d;c=a!==void 0?(d=Math.min(a,c.length),l=u,c.slice(h,d+h)):(d=p!==void 0?(d=p,Math.min(d,c.length)):c.length,l=0,p=h,c.slice(0,d)),Array.prototype.splice.apply(p,[l,d].concat(c))},r.default.prototype.concat=function(c,h){return c.concat(h)},r.default.prototype.reverse=function(c){return c.reverse()},r.default.prototype.shorten=function(c){return c.pop(),c},r.default.prototype.shuffle=function(c,h){for(var p,u,a=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(c),l=(c=h||a?c:c.slice()).length;1<l;)p=this.random(0,1)*l|0,u=c[--l],c[l]=c[p],c[p]=u;return c},r.default.prototype.sort=function(c,h){var p=h?c.slice(0,Math.min(h,c.length)):c,u=h?c.slice(Math.min(h,c.length)):[];return(p=typeof p[0]=="string"?p.sort():p.sort(function(a,l){return a-l})).concat(u)},r.default.prototype.splice=function(c,h,p){return Array.prototype.splice.apply(c,[p,0].concat(h)),c},r.default.prototype.subset=function(c,h,p){return p!==void 0?c.slice(h,h+p):c.slice(h,c.length)};var o=r.default;i.default=o},{"../core/main":260,"core-js/modules/es.array-buffer.constructor":147,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174}],300:[function(e,n,i){e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},r.default.prototype.int=function(c){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,h):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(p){return r.default.prototype.int(p,h)}):void 0},r.default.prototype.str=function(c){return c instanceof Array?c.map(r.default.prototype.str):String(c)},r.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(r.default.prototype.boolean):void 0},r.default.prototype.byte=function(c){var h=r.default.prototype.int(c,10);return typeof h=="number"?(h+128)%256-128:h instanceof Array?h.map(r.default.prototype.byte):void 0},r.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(r.default.prototype.char):typeof c=="string"?r.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},r.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(r.default.prototype.unchar):void 0},r.default.prototype.hex=function(c,h){if(h=h==null?h=8:h,c instanceof Array)return c.map(function(u){return r.default.prototype.hex(u,h)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(h);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var p=Number(c).toString(16).toUpperCase();p.length<h;)p="0".concat(p);return p.length>=h&&(p=p.substring(p.length-h,p.length)),p}},r.default.prototype.unhex=function(c){return c instanceof Array?c.map(r.default.prototype.unhex):parseInt("0x".concat(c),16)};var o=r.default;i.default=o},{"../core/main":260,"core-js/modules/es.array.map":159,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.repeat":185}],301:[function(e,n,i){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(a,l,d){var f=a<0,m=f?a.toString().substring(1):a.toString(),g=m.indexOf("."),_=g!==-1?m.substring(0,g):m,x=g!==-1?m.substring(g+1):"",w=f?"-":"";if(d!==void 0){var M="";(g!==-1||0<d-x.length)&&(M="."),x.length>d&&(x=x.substring(0,d));for(var A=0;A<l-_.length;A++)w+="0";w+=_,w+=M,w+=x;for(var T=0;T<d-x.length;T++)w+="0";return w}for(var I=0;I<Math.max(l-_.length,0);I++)w+="0";return w+=m}function c(a,l){var d=(a=a.toString()).indexOf("."),f=d!==-1?a.substring(d):"",m=d!==-1?a.substring(0,d):a;if(m=m.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),l===0)f="";else if(l!==void 0)if(l>f.length)for(var g=l-(f+=d===-1?".":"").length+1,_=0;_<g;_++)f+="0";else f=f.substring(0,l+1);return m+f}function h(a){return 0<parseFloat(a)?"+".concat(a.toString()):a.toString()}function p(a){return 0<=parseFloat(a)?" ".concat(a.toString()):a.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.join=function(a,l){return r.default._validateParameters("join",arguments),a.join(l)},r.default.prototype.match=function(a,l){return r.default._validateParameters("match",arguments),a.match(l)},r.default.prototype.matchAll=function(a,l){r.default._validateParameters("matchAll",arguments);for(var d=new RegExp(l,"g"),f=d.exec(a),m=[];f!==null;)m.push(f),f=d.exec(a);return m},r.default.prototype.nf=function(a,l,d){return r.default._validateParameters("nf",arguments),a instanceof Array?a.map(function(f){return o(f,l,d)}):Object.prototype.toString.call(a)==="[object Arguments]"?a.length===3?this.nf(a[0],a[1],a[2]):a.length===2?this.nf(a[0],a[1]):this.nf(a[0]):o(a,l,d)},r.default.prototype.nfc=function(a,l){return r.default._validateParameters("nfc",arguments),a instanceof Array?a.map(function(d){return c(d,l)}):c(a,l)},r.default.prototype.nfp=function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];r.default._validateParameters("nfp",l);var f=r.default.prototype.nf.apply(this,l);return f instanceof Array?f.map(h):h(f)},r.default.prototype.nfs=function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];r.default._validateParameters("nfs",l);var f=r.default.prototype.nf.apply(this,l);return f instanceof Array?f.map(p):p(f)},r.default.prototype.split=function(a,l){return r.default._validateParameters("split",arguments),a.split(l)},r.default.prototype.splitTokens=function(a,l){var d;if(r.default._validateParameters("splitTokens",arguments),l!==void 0){var f=l,m=/\]/g.exec(f),g=/\[/g.exec(f);d=g&&m?(f=f.slice(0,m.index)+f.slice(m.index+1),g=/\[/g.exec(f),f=f.slice(0,g.index)+f.slice(g.index+1),new RegExp("[\\[".concat(f,"\\]]"),"g")):m?(f=f.slice(0,m.index)+f.slice(m.index+1),new RegExp("[".concat(f,"\\]]"),"g")):g?(f=f.slice(0,g.index)+f.slice(g.index+1),new RegExp("[".concat(f,"\\[]"),"g")):new RegExp("[".concat(f,"]"),"g")}else d=/\s/g;return a.split(d).filter(function(_){return _})},r.default.prototype.trim=function(a){return r.default._validateParameters("trim",arguments),a instanceof Array?a.map(this.trim):a.trim()};var u=r.default;i.default=u},{"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190}],302:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()};var o=r.default;i.default=o},{"../core/main":260}],303:[function(e,n,i){function s(a){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./p5.Geometry");var c=function(a){if(a&&a.__esModule)return a;if(a===null||s(a)!=="object"&&typeof a!="function")return{default:a};var l=h();if(l&&l.has(a))return l.get(a);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in a)if(Object.prototype.hasOwnProperty.call(a,m)){var g=f?Object.getOwnPropertyDescriptor(a,m):null;g&&(g.get||g.set)?Object.defineProperty(d,m,g):d[m]=a[m]}return d.default=a,l&&l.set(a,d),d}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return h=function(){return a},a}o.default.prototype.plane=function(a,l,d,f){this._assert3d("plane"),o.default._validateParameters("plane",arguments),a===void 0&&(a=50),l===void 0&&(l=a),d===void 0&&(d=1),f===void 0&&(f=1);var m="plane|".concat(d,"|").concat(f);if(!this._renderer.geometryInHash(m)){var g=new o.default.Geometry(d,f,function(){for(var _,x,w,M=0;M<=this.detailY;M++){x=M/this.detailY;for(var A=0;A<=this.detailX;A++)_=A/this.detailX,w=new o.default.Vector(_-.5,x-.5,0),this.vertices.push(w),this.uvs.push(_,x)}});g.computeFaces().computeNormals(),d<=1&&f<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(m,g)}return this._renderer.drawBuffersScaled(m,a,l,1),this},o.default.prototype.box=function(a,l,d,f,m){this._assert3d("box"),o.default._validateParameters("box",arguments),a===void 0&&(a=50),l===void 0&&(l=a),d===void 0&&(d=l);var g=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;f===void 0&&(f=g?1:4),m===void 0&&(m=g?1:4);var _="box|".concat(f,"|").concat(m);if(!this._renderer.geometryInHash(_)){var x=new o.default.Geometry(f,m,function(){var w=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var M=0;M<w.length;M++){for(var A=w[M],T=4*M,I=0;I<4;I++){var R=A[I],P=new o.default.Vector((2*(1&R)-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);this.vertices.push(P),this.uvs.push(1&I,(2&I)/2)}this.faces.push([T,1+T,2+T]),this.faces.push([2+T,1+T,3+T])}});x.computeNormals(),f<=4&&m<=4?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(_,x)}return this._renderer.drawBuffersScaled(_,a,l,d),this},o.default.prototype.sphere=function(a,l,d){return this._assert3d("sphere"),o.default._validateParameters("sphere",arguments),a===void 0&&(a=50),l===void 0&&(l=24),d===void 0&&(d=16),this.ellipsoid(a,a,a,l,d),this};function p(a,l,d,f,m,g,_){a=a<=0?1:a,l=l<0?0:l,d=d<=0?a:d,f=f<3?3:f;var x,w,M,A=(g=g===void 0||g)?-2:0,T=(m=m<1?1:m)+((_=_===void 0?l!==0:_)?2:0),I=Math.atan2(a-l,d),R=Math.sin(I),P=Math.cos(I);for(x=A;x<=T;++x){var O=x/m,D=d*O,k=void 0;for(k=x<0?(O=D=0,a):m<x?(D=d,O=1,l):a+(l-a)*O,x!==-2&&x!==m+2||(k=0),D-=d/2,w=0;w<f;++w){var N=w/(f-1),q=2*Math.PI*N,X=Math.sin(q),G=Math.cos(q);this.vertices.push(new o.default.Vector(X*k,D,G*k));var Q=void 0;Q=x<0?new o.default.Vector(0,-1,0):m<x&&l?new o.default.Vector(0,1,0):new o.default.Vector(X*P,R,G*P),this.vertexNormals.push(Q),this.uvs.push(N,O)}}var K=0;if(g){for(M=0;M<f;++M){var _e=(M+1)%f;this.faces.push([K+M,K+f+_e,K+f+M])}K+=2*f}for(x=0;x<m;++x){for(w=0;w<f;++w){var pe=(w+1)%f;this.faces.push([K+w,K+pe,K+f+pe]),this.faces.push([K+w,K+f+pe,K+f+w])}K+=f}if(_)for(K+=f,w=0;w<f;++w)this.faces.push([K+w,K+(w+1)%f,K+f])}o.default.prototype.cylinder=function(a,l,d,f,m,g){this._assert3d("cylinder"),o.default._validateParameters("cylinder",arguments),a===void 0&&(a=50),l===void 0&&(l=a),d===void 0&&(d=24),f===void 0&&(f=1),g===void 0&&(g=!0),m===void 0&&(m=!0);var _="cylinder|".concat(d,"|").concat(f,"|").concat(m,"|").concat(g);if(!this._renderer.geometryInHash(_)){var x=new o.default.Geometry(d,f);p.call(x,1,1,1,d,f,m,g),d<=24&&f<=16?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,x)}return this._renderer.drawBuffersScaled(_,a,l,a),this},o.default.prototype.cone=function(a,l,d,f,m){this._assert3d("cone"),o.default._validateParameters("cone",arguments),a===void 0&&(a=50),l===void 0&&(l=a),d===void 0&&(d=24),f===void 0&&(f=1),m===void 0&&(m=!0);var g="cone|".concat(d,"|").concat(f,"|").concat(m);if(!this._renderer.geometryInHash(g)){var _=new o.default.Geometry(d,f);p.call(_,1,0,1,d,f,m,!1),d<=24&&f<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,_)}return this._renderer.drawBuffersScaled(g,a,l,a),this},o.default.prototype.ellipsoid=function(a,l,d,f,m){this._assert3d("ellipsoid"),o.default._validateParameters("ellipsoid",arguments),a===void 0&&(a=50),l===void 0&&(l=a),d===void 0&&(d=a),f===void 0&&(f=24),m===void 0&&(m=16);var g="ellipsoid|".concat(f,"|").concat(m);if(!this._renderer.geometryInHash(g)){var _=new o.default.Geometry(f,m,function(){for(var x=0;x<=this.detailY;x++)for(var w=x/this.detailY,M=Math.PI*w-Math.PI/2,A=Math.cos(M),T=Math.sin(M),I=0;I<=this.detailX;I++){var R=I/this.detailX,P=2*Math.PI*R,O=Math.cos(P),D=Math.sin(P),k=new o.default.Vector(A*D,T,A*O);this.vertices.push(k),this.vertexNormals.push(k),this.uvs.push(R,w)}});_.computeFaces(),f<=24&&m<=24?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(g,_)}return this._renderer.drawBuffersScaled(g,a,l,d),this},o.default.prototype.torus=function(a,l,d,f){if(this._assert3d("torus"),o.default._validateParameters("torus",arguments),a===void 0)a=50;else if(!a)return;if(l===void 0)l=10;else if(!l)return;d===void 0&&(d=24),f===void 0&&(f=16);var m=(l/a).toPrecision(4),g="torus|".concat(m,"|").concat(d,"|").concat(f);if(!this._renderer.geometryInHash(g)){var _=new o.default.Geometry(d,f,function(){for(var x=0;x<=this.detailY;x++)for(var w=x/this.detailY,M=2*Math.PI*w,A=Math.cos(M),T=Math.sin(M),I=1+m*A,R=0;R<=this.detailX;R++){var P=R/this.detailX,O=2*Math.PI*P,D=Math.cos(O),k=Math.sin(O),N=new o.default.Vector(I*D,I*k,m*T),q=new o.default.Vector(A*D,A*k,T);this.vertices.push(N),this.vertexNormals.push(q),this.uvs.push(P,w)}});_.computeFaces(),d<=24&&f<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,_)}return this._renderer.drawBuffersScaled(g,a,a,a),this},o.default.RendererGL.prototype.point=function(a,l,d){d===void 0&&(d=0);var f=[];return f.push(new o.default.Vector(a,l,d)),this._drawPoints(f,this.immediateMode.buffers.point),this},o.default.RendererGL.prototype.triangle=function(a){var l=a[0],d=a[1],f=a[2],m=a[3],g=a[4],_=a[5];if(!this.geometryInHash("tri")){var x=new o.default.Geometry(1,1,function(){var A=[];A.push(new o.default.Vector(0,0,0)),A.push(new o.default.Vector(0,1,0)),A.push(new o.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=A,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]});x._makeTriangleEdges()._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)}var w=this.uMVMatrix.copy();try{var M=new o.default.Matrix([f-l,m-d,0,0,g-l,_-d,0,0,0,0,1,0,l,d,0,1]).mult(this.uMVMatrix);this.uMVMatrix=M,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},o.default.RendererGL.prototype.ellipse=function(a){this.arc(a[0],a[1],a[2],a[3],0,c.TWO_PI,c.OPEN,a[4])},o.default.RendererGL.prototype.arc=function(a){var l,d,f=a,m=arguments[1],g=arguments[2],_=arguments[3],x=arguments[4],w=arguments[5],M=arguments[6],A=arguments[7]||25;if(d=Math.abs(w-x)>=c.TWO_PI?"".concat(l="ellipse","|").concat(A,"|"):"".concat(l="arc","|").concat(x,"|").concat(w,"|").concat(M,"|").concat(A,"|"),!this.geometryInHash(d)){var T=new o.default.Geometry(A,1,function(){if(this.strokeIndices=[],x.toFixed(10)!==w.toFixed(10)){M!==c.PIE&&M!==void 0||(this.vertices.push(new o.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var R=0;R<=A;R++){var P=(w-x)*(R/A)+x,O=.5+Math.cos(P)/2,D=.5+Math.sin(P)/2;this.vertices.push(new o.default.Vector(O,D,0)),this.uvs.push([O,D]),R<A-1&&(this.faces.push([0,R+1,R+2]),this.strokeIndices.push([R+1,R+2]))}switch(M){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}});T.computeNormals(),A<=50?T._makeTriangleEdges()._edgesToVertices(T):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(l," with more than 50 detail")),this.createBuffers(d,T)}var I=this.uMVMatrix.copy();try{this.uMVMatrix.translate([f,m,0]),this.uMVMatrix.scale(g,_,1),this.drawBuffers(d)}finally{this.uMVMatrix=I}return this},o.default.RendererGL.prototype.rect=function(a){var l=this._pInst._glAttributes.perPixelLighting,d=a[0],f=a[1],m=a[2],g=a[3],_=a[4]||(l?1:24),x=a[5]||(l?1:16),w="rect|".concat(_,"|").concat(x);if(!this.geometryInHash(w)){var M=new o.default.Geometry(_,x,function(){for(var T=0;T<=this.detailY;T++)for(var I=T/this.detailY,R=0;R<=this.detailX;R++){var P=R/this.detailX,O=new o.default.Vector(P,I,0);this.vertices.push(O),this.uvs.push(P,I)}0<_&&0<x&&(this.strokeIndices=[[0,_],[_,(_+1)*(x+1)-1],[(_+1)*(x+1)-1,(_+1)*x],[(_+1)*x,0]])});M.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(w,M)}var A=this.uMVMatrix.copy();try{this.uMVMatrix.translate([d,f,0]),this.uMVMatrix.scale(m,g,1),this.drawBuffers(w)}finally{this.uMVMatrix=A}return this},o.default.RendererGL.prototype.quad=function(a,l,d,f,m,g,_,x,w,M,A,T,I,R){I===void 0&&(I=2),R===void 0&&(R=2);var P="quad|".concat(a,"|").concat(l,"|").concat(d,"|").concat(f,"|").concat(m,"|").concat(g,"|").concat(_,"|").concat(x,"|").concat(w,"|").concat(M,"|").concat(A,"|").concat(T,"|").concat(I,"|").concat(R);if(!this.geometryInHash(P)){var O=new o.default.Geometry(I,R,function(){for(var Q=1/(this.detailX-1),K=1/(this.detailY-1),_e=0;_e<this.detailY;_e++)for(var pe=0;pe<this.detailX;pe++){var ge=pe*Q,ce=_e*K,de=(1-ge)*((1-ce)*a+ce*M)+ge*((1-ce)*f+ce*_),Ee=(1-ge)*((1-ce)*l+ce*A)+ge*((1-ce)*m+ce*x),C=(1-ge)*((1-ce)*d+ce*T)+ge*((1-ce)*g+ce*w);this.vertices.push(new o.default.Vector(de,Ee,C)),this.uvs.push([ge,ce])}});O.faces=[];for(var D=0;D<R-1;D++)for(var k=0;k<I-1;k++){var N=k+D*I,q=k+1+D*I,X=k+1+(D+1)*I,G=k+(D+1)*I;O.faces.push([N,q,X]),O.faces.push([N,X,G])}O.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(P,O)}return this.drawBuffers(P),this},o.default.RendererGL.prototype.bezier=function(a,l,d,f,m,g,_,x,w,M,A,T){arguments.length===8&&(A=x,M=_,x=g,_=m,m=f,f=d,d=g=w=T=0);var I=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=I;R++){var P=Math.pow(1-R/I,3),O=R/I*3*Math.pow(1-R/I,2),D=3*Math.pow(R/I,2)*(1-R/I),k=Math.pow(R/I,3);this.vertex(a*P+f*O+_*D+M*k,l*P+m*O+x*D+A*k,d*P+g*O+w*D+T*k)}return this.endShape(),this},o.default.RendererGL.prototype.curve=function(a,l,d,f,m,g,_,x,w,M,A,T){arguments.length===8&&(M=_,A=x,_=m,x=f,m=f=d,d=g=w=T=0);var I=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=I;R++){var P=.5*Math.pow(R/I,3),O=.5*Math.pow(R/I,2),D=R/I*.5,k=P*(3*f-a-3*_+M)+O*(2*a-5*f+4*_-M)+D*(-a+_)+2*f*.5,N=P*(3*m-l-3*x+A)+O*(2*l-5*m+4*x-A)+D*(-l+x)+2*m*.5,q=P*(3*g-d-3*w+T)+O*(2*d-5*g+4*w-T)+D*(-d+w)+2*g*.5;this.vertex(k,N,q)}return this.endShape(),this},o.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},o.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var a,l,d,f,m,g=[],_=[],x=[],w=arguments.length;if((a=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,A=0,T=1,I=0;A<1;){if(a=parseFloat(A.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(a),T.toFixed(6)===M.toFixed(6)){a=parseFloat(T.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(a);break}A+=M,T-=M,++I}}var R=this._lookUpTableBezier.length;if(w===6){for(this.isBezier=!0,g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],_=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],d=_[0]*this._lookUpTableBezier[m][0]+_[1]*this._lookUpTableBezier[m][1]+_[2]*this._lookUpTableBezier[m][2]+_[3]*this._lookUpTableBezier[m][3],this.vertex(l,d);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(w===9){for(this.isBezier=!0,g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],_=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],x=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],d=_[0]*this._lookUpTableBezier[m][0]+_[1]*this._lookUpTableBezier[m][1]+_[2]*this._lookUpTableBezier[m][2]+_[3]*this._lookUpTableBezier[m][3],f=x[0]*this._lookUpTableBezier[m][0]+x[1]*this._lookUpTableBezier[m][1]+x[2]*this._lookUpTableBezier[m][2]+x[3]*this._lookUpTableBezier[m][3],this.vertex(l,d,f);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},o.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var a,l,d,f,m,g=[],_=[],x=[],w=arguments.length;if((a=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var M=1/this._lutQuadraticDetail,A=0,T=1,I=0;A<1;){if(a=parseFloat(A.toFixed(6)),this._lookUpTableQuadratic[I]=this._quadraticCoefficients(a),T.toFixed(6)===M.toFixed(6)){a=parseFloat(T.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableQuadratic[I]=this._quadraticCoefficients(a);break}A+=M,T-=M,++I}}var R=this._lookUpTableQuadratic.length;if(w===4){for(this.isQuadratic=!0,g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],_=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],m=0;m<R;m++)l=g[0]*this._lookUpTableQuadratic[m][0]+g[1]*this._lookUpTableQuadratic[m][1]+g[2]*this._lookUpTableQuadratic[m][2],d=_[0]*this._lookUpTableQuadratic[m][0]+_[1]*this._lookUpTableQuadratic[m][1]+_[2]*this._lookUpTableQuadratic[m][2],this.vertex(l,d);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(w===6){for(this.isQuadratic=!0,g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],_=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],m=0;m<R;m++)l=g[0]*this._lookUpTableQuadratic[m][0]+g[1]*this._lookUpTableQuadratic[m][1]+g[2]*this._lookUpTableQuadratic[m][2],d=_[0]*this._lookUpTableQuadratic[m][0]+_[1]*this._lookUpTableQuadratic[m][1]+_[2]*this._lookUpTableQuadratic[m][2],f=x[0]*this._lookUpTableQuadratic[m][0]+x[1]*this._lookUpTableQuadratic[m][1]+x[2]*this._lookUpTableQuadratic[m][2],this.vertex(l,d,f);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},o.default.RendererGL.prototype.curveVertex=function(){var a,l,d,f,m,g=[],_=[],x=[],w=arguments.length;if((a=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var M=1/this._lutBezierDetail,A=0,T=1,I=0;A<1;){if(a=parseFloat(A.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(a),T.toFixed(6)===M.toFixed(6)){a=parseFloat(T.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(a);break}A+=M,T-=M,++I}}var R=this._lookUpTableBezier.length;if(w===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),_=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],d=_[0]*this._lookUpTableBezier[m][0]+_[1]*this._lookUpTableBezier[m][1]+_[2]*this._lookUpTableBezier[m][2]+_[3]*this._lookUpTableBezier[m][3],this.vertex(l,d);for(m=0;m<w;m++)this.immediateMode._curveVertex.shift()}}else if(w===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),_=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),m=0;m<R;m++)l=g[0]*this._lookUpTableBezier[m][0]+g[1]*this._lookUpTableBezier[m][1]+g[2]*this._lookUpTableBezier[m][2]+g[3]*this._lookUpTableBezier[m][3],d=_[0]*this._lookUpTableBezier[m][0]+_[1]*this._lookUpTableBezier[m][1]+_[2]*this._lookUpTableBezier[m][2]+_[3]*this._lookUpTableBezier[m][3],f=x[0]*this._lookUpTableBezier[m][0]+x[1]*this._lookUpTableBezier[m][1]+x[2]*this._lookUpTableBezier[m][2]+x[3]*this._lookUpTableBezier[m][3],this.vertex(l,d,f);for(m=0;m<w;m++)this.immediateMode._curveVertex.shift()}},o.default.RendererGL.prototype.image=function(a,l,d,f,m,g,_,x,w){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(a),this._pInst.textureMode(c.NORMAL);var M=0;l<=a.width&&(M=l/a.width);var A=1;l+f<=a.width&&(A=(l+f)/a.width);var T=0;d<=a.height&&(T=d/a.height);var I=1;d+m<=a.height&&(I=(d+m)/a.height),this.beginShape(),this.vertex(g,_,0,M,T),this.vertex(g+x,_,0,A,T),this.vertex(g+x,_+w,0,A,I),this.vertex(g,_+w,0,M,I),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var u=o.default;i.default=u},{"../core/constants":250,"../core/main":260,"./p5.Geometry":309,"core-js/modules/es.array.concat":148,"core-js/modules/es.number.to-fixed":169}],304:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}o.default.prototype.orbitControl=function(u,a,l){if(this._assert3d("orbitControl"),o.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var d=this._renderer._curCamera;u===void 0&&(u=1),a===void 0&&(a=u),l===void 0&&(l=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var f=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,l*f):this._renderer._curCamera._orbit(0,0,-l*f)),this.mouseIsPressed){if(this.mouseButton===this.LEFT){var m=-u*(this.mouseX-this.pmouseX)/f,g=a*(this.mouseY-this.pmouseY)/f;this._renderer._curCamera._orbit(m,g,0)}else if(this.mouseButton===this.RIGHT){var _=d._getLocalAxes(),x=Math.sqrt(_.x[0]*_.x[0]+_.x[2]*_.x[2]);x!==0&&(_.x[0]/=x,_.x[2]/=x);var w=Math.sqrt(_.y[0]*_.y[0]+_.y[2]*_.y[2]);w!==0&&(_.y[0]/=w,_.y[2]/=w);var M=-1*u*(this.mouseX-this.pmouseX),A=-1*a*(this.mouseY-this.pmouseY);d.setPosition(d.eyeX+M*_.x[0]+A*_.z[0],d.eyeY,d.eyeZ+M*_.x[2]+A*_.z[2])}}return this}},o.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var u=arguments.length,a=new Array(u),l=0;l<u;l++)a[l]=arguments[l];o.default._validateParameters("debugMode",a);for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1);a[0]===c.GRID?this.registerMethod("post",this._grid.call(this,a[1],a[2],a[3],a[4],a[5])):a[0]===c.AXES?this.registerMethod("post",this._axesIcon.call(this,a[1],a[2],a[3],a[4])):(this.registerMethod("post",this._grid.call(this,a[0],a[1],a[2],a[3],a[4])),this.registerMethod("post",this._axesIcon.call(this,a[5],a[6],a[7],a[8])))},o.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1)},o.default.prototype._grid=function(u,a,l,d,f){u===void 0&&(u=this.width/2),a===void 0&&(a=Math.round(u/30)<4?4:Math.round(u/30)),l===void 0&&(l=0),d===void 0&&(d=0),f===void 0&&(f=0);var m=u/a,g=u/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var _=0;_<=a;_++)this.beginShape(this.LINES),this.vertex(-g+l,d,_*m-g+f),this.vertex(+g+l,d,_*m-g+f),this.endShape();for(var x=0;x<=a;x++)this.beginShape(this.LINES),this.vertex(x*m-g+l,d,-g+f),this.vertex(x*m-g+l,d,+g+f),this.endShape();this.pop()}},o.default.prototype._axesIcon=function(u,a,l,d){return u===void 0&&(u=40<this.width/20?this.width/20:40),a===void 0&&(a=-this.width/4),l===void 0&&(l=a),d===void 0&&(d=a),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(a,l,d),this.vertex(a+u,l,d),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(a,l,d),this.vertex(a,l+u,d),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(a,l,d),this.vertex(a,l,d+u),this.endShape(),this.pop()}};var p=o.default;i.default=p},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179}],305:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}o.default.prototype.ambientLight=function(u,a,l,d){this._assert3d("ambientLight"),o.default._validateParameters("ambientLight",arguments);var f=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(f._array[0],f._array[1],f._array[2]),this._renderer._enableLighting=!0,this},o.default.prototype.specularColor=function(u,a,l){this._assert3d("specularColor"),o.default._validateParameters("specularColor",arguments);var d=this.color.apply(this,arguments);return this._renderer.specularColors=[d._array[0],d._array[1],d._array[2]],this},o.default.prototype.directionalLight=function(u,a,l,d,f,m){var g,_,x,w;this._assert3d("directionalLight"),o.default._validateParameters("directionalLight",arguments),g=u instanceof o.default.Color?u:this.color(u,a,l);var M=arguments[arguments.length-1];w=typeof M=="number"?(_=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(_=M.x,x=M.y,M.z);var A=Math.sqrt(_*_+x*x+w*w);return this._renderer.directionalLightDirections.push(_/A,x/A,w/A),this._renderer.directionalLightDiffuseColors.push(g._array[0],g._array[1],g._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.pointLight=function(u,a,l,d,f,m){var g,_,x,w;this._assert3d("pointLight"),o.default._validateParameters("pointLight",arguments),g=u instanceof o.default.Color?u:this.color(u,a,l);var M=arguments[arguments.length-1];return w=typeof M=="number"?(_=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(_=M.x,x=M.y,M.z),this._renderer.pointLightPositions.push(_,x,w),this._renderer.pointLightDiffuseColors.push(g._array[0],g._array[1],g._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===c.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var u=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,u),this.directionalLight(0,0,u,0,0,-1)}return this},o.default.prototype.lightFalloff=function(u,a,l){return this._assert3d("lightFalloff"),o.default._validateParameters("lightFalloff",arguments),u<0&&(u=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),a<0&&(a=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),u===0&&a===0&&l===0&&(u=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=u,this._renderer.linearAttenuation=a,this._renderer.quadraticAttenuation=l,this},o.default.prototype.spotLight=function(u,a,l,d,f,m,g,_,x,w,M){var A,T,I;this._assert3d("spotLight"),o.default._validateParameters("spotLight",arguments);var R=arguments.length;switch(R){case 11:case 10:A=this.color(u,a,l),T=new o.default.Vector(d,f,m),I=new o.default.Vector(g,_,x);break;case 9:u instanceof o.default.Color?(A=u,T=new o.default.Vector(a,l,d),I=new o.default.Vector(f,m,g),w=_,M=x):d instanceof o.default.Vector?(A=this.color(u,a,l),T=d,I=new o.default.Vector(f,m,g),w=_,M=x):g instanceof o.default.Vector?(A=this.color(u,a,l),T=new o.default.Vector(d,f,m),I=g,w=_,M=x):(A=this.color(u,a,l),T=new o.default.Vector(d,f,m),I=new o.default.Vector(g,_,x));break;case 8:w=(I=u instanceof o.default.Color?(A=u,T=new o.default.Vector(a,l,d),new o.default.Vector(f,m,g)):d instanceof o.default.Vector?(A=this.color(u,a,l),T=d,new o.default.Vector(f,m,g)):(A=this.color(u,a,l),T=new o.default.Vector(d,f,m),g),_);break;case 7:u instanceof o.default.Color&&a instanceof o.default.Vector?(A=u,T=a,I=new o.default.Vector(l,d,f),w=m,M=g):u instanceof o.default.Color&&f instanceof o.default.Vector?(A=u,T=new o.default.Vector(a,l,d),I=f,w=m,M=g):d instanceof o.default.Vector&&f instanceof o.default.Vector?(A=this.color(u,a,l),T=d,I=f,w=m,M=g):I=u instanceof o.default.Color?(A=u,T=new o.default.Vector(a,l,d),new o.default.Vector(f,m,g)):d instanceof o.default.Vector?(A=this.color(u,a,l),T=d,new o.default.Vector(f,m,g)):(A=this.color(u,a,l),T=new o.default.Vector(d,f,m),g);break;case 6:d instanceof o.default.Vector&&f instanceof o.default.Vector?(A=this.color(u,a,l),T=d,I=f,w=m):u instanceof o.default.Color&&f instanceof o.default.Vector?(A=u,T=new o.default.Vector(a,l,d),I=f,w=m):u instanceof o.default.Color&&a instanceof o.default.Vector&&(A=u,T=a,I=new o.default.Vector(l,d,f),w=m);break;case 5:u instanceof o.default.Color&&a instanceof o.default.Vector&&l instanceof o.default.Vector?(A=u,T=a,I=l,w=d,M=f):d instanceof o.default.Vector&&f instanceof o.default.Vector?(A=this.color(u,a,l),T=d,I=f):u instanceof o.default.Color&&f instanceof o.default.Vector?(A=u,T=new o.default.Vector(a,l,d),I=f):u instanceof o.default.Color&&a instanceof o.default.Vector&&(A=u,T=a,I=new o.default.Vector(l,d,f));break;case 4:A=u,T=a,I=l,w=d;break;case 3:A=u,T=a,I=l;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(R<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(A._array[0],A._array[1],A._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(T.x,T.y,T.z),I.normalize(),this._renderer.spotLightDirections.push(I.x,I.y,I.z),w===void 0&&(w=Math.PI/3),M!==void 0&&M<1?(M=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):M===void 0&&(M=100),w=this._renderer._pInst._toRadians(w),this._renderer.spotLightAngle.push(Math.cos(w)),this._renderer.spotLightConc.push(M),this._renderer._enableLighting=!0,this},o.default.prototype.noLights=function(){return this._assert3d("noLights"),o.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var p=o.default;i.default=p},{"../core/constants":250,"../core/main":260}],306:[function(e,n,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};function o(h,p,u){for(var a=0,l=h.length;a<l;a++)if(h[a]!==p.getUint8(u+a,!1))return!1;return!0}e("./p5.Geometry"),r.default.prototype.loadModel=function(h){var p,u,a;r.default._validateParameters("loadModel",arguments);var l=h.slice(-4);typeof arguments[1]=="boolean"?(p=arguments[1],u=arguments[2],a=arguments[3],arguments[4]!==void 0&&(l=arguments[4])):(p=!1,u=arguments[1],a=arguments[2],arguments[3]!==void 0&&(l=arguments[3]));var d=new r.default.Geometry;d.gid="".concat(h,"|").concat(p);var f=this;return l.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(m){(function(g,_){if(function(M){for(var A=new DataView(M),T=[115,111,108,105,100],I=0;I<5;I++)if(o(T,A,I))return!1;return!0}(_))(function(M,A){for(var T,I,R,P,O,D,k,N=new DataView(A),q=N.getUint32(80,!0),X=!1,G=0;G<70;G++)N.getUint32(G,!1)===1129270351&&N.getUint8(G+4)===82&&N.getUint8(G+5)===61&&(X=!0,P=[],O=N.getUint8(G+6)/255,D=N.getUint8(G+7)/255,k=N.getUint8(G+8)/255);for(var Q=0;Q<q;Q++){var K=84+50*Q,_e=N.getFloat32(K,!0),pe=N.getFloat32(4+K,!0),ge=N.getFloat32(8+K,!0);if(X){var ce=N.getUint16(48+K,!0);R=(32768&ce)==0?(T=(31&ce)/31,I=(ce>>5&31)/31,(ce>>10&31)/31):(T=O,I=D,k)}for(var de=new r.default.Vector(_e,pe,ge),Ee=1;Ee<=3;Ee++){var C=K+12*Ee,F=new r.default.Vector(N.getFloat32(C,!0),N.getFloat32(4+C,!0),N.getFloat32(8+C,!0));M.vertices.push(F),M.vertexNormals.push(de),X&&P.push(T,I,R)}M.faces.push([3*Q,3*Q+1,3*Q+2]),M.uvs.push([0,0],[0,0],[0,0])}})(g,_);else{var x=new DataView(_);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");var w=new TextDecoder("utf-8").decode(x).split(`
`);(function(M,A){for(var T,I,R="",P=[],O=0;O<A.length;++O){for(var D=A[O].trim(),k=D.split(" "),N=0;N<k.length;++N)k[N]===""&&k.splice(N,1);if(k.length!==0)switch(R){case"":if(k[0]!=="solid")return console.error(D),console.error('Invalid state "'.concat(k[0],'", should be "solid"'));R="solid";break;case"solid":if(k[0]!=="facet"||k[1]!=="normal")return console.error(D),console.error('Invalid state "'.concat(k[0],'", should be "facet normal"'));T=new r.default.Vector(parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4])),M.vertexNormals.push(T,T,T),R="facet normal";break;case"facet normal":if(k[0]!=="outer"||k[1]!=="loop")return console.error(D),console.error('Invalid state "'.concat(k[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(k[0]==="vertex")I=new r.default.Vector(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),M.vertices.push(I),M.uvs.push([0,0]),P.push(M.vertices.indexOf(I));else{if(k[0]!=="endloop")return console.error(D),console.error('Invalid state "'.concat(k[0],'", should be "vertex" or "endloop"'));M.faces.push(P),P=[],R="endloop"}break;case"endloop":if(k[0]!=="endfacet")return console.error(D),console.error('Invalid state "'.concat(k[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(k[0]!=="endsolid"){if(k[0]!=="facet"||k[1]!=="normal")return console.error(D),console.error('Invalid state "'.concat(k[0],'", should be "endsolid" or "facet normal"'));T=new r.default.Vector(parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4])),M.vertexNormals.push(T,T,T),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}})(g,w)}})(d,m),p&&d.normalize(),f._decrementPreload(),typeof u=="function"&&u(d)},a):l.match(/\.obj$/i)?this.loadStrings(h,function(m){(function(g,_){for(var x={v:[],vt:[],vn:[]},w={},M=0;M<_.length;++M){var A=_[M].trim().split(/\b\s+/);if(0<A.length){if(A[0]==="v"||A[0]==="vn"){var T=new r.default.Vector(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]));x[A[0]].push(T)}else if(A[0]==="vt"){var I=[parseFloat(A[1]),1-parseFloat(A[2])];x[A[0]].push(I)}else if(A[0]==="f")for(var R=3;R<A.length;++R){for(var P=[],O=[1,R-1,R],D=0;D<O.length;++D){var k=A[O[D]],N=0;if(w[k]!==void 0)N=w[k];else{for(var q=k.split("/"),X=0;X<q.length;X++)q[X]=parseInt(q[X])-1;N=w[k]=g.vertices.length,g.vertices.push(x.v[q[0]].copy()),x.vt[q[1]]?g.uvs.push(x.vt[q[1]].slice()):g.uvs.push([0,0]),x.vn[q[2]]&&g.vertexNormals.push(x.vn[q[2]].copy())}P.push(N)}P[0]!==P[1]&&P[0]!==P[2]&&P[1]!==P[2]&&g.faces.push(P)}}}g.vertexNormals.length===0&&g.computeNormals()})(d,m),p&&d.normalize(),f._decrementPreload(),typeof u=="function"&&u(d)},a):(r.default._friendlyFileLoadError(3,h),a?a():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),d},r.default.prototype.model=function(h){this._assert3d("model"),r.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var c=r.default;i.default=c},{"../core/main":260,"./p5.Geometry":309,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.match":184,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190}],307:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.array.join"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}e("./p5.Texture"),o.default.prototype.loadShader=function(u,a,l,d){o.default._validateParameters("loadShader",arguments),d=d||console.error;function f(){g._decrementPreload(),l&&l(m)}var m=new o.default.Shader,g=this,_=!1,x=!1;return this.loadStrings(u,function(w){m._vertSrc=w.join(`
`),x=!0,_&&f()},d),this.loadStrings(a,function(w){m._fragSrc=w.join(`
`),_=!0,x&&f()},d),m},o.default.prototype.createShader=function(u,a){return this._assert3d("createShader"),o.default._validateParameters("createShader",arguments),new o.default.Shader(this._renderer,u,a)},o.default.prototype.shader=function(u){return this._assert3d("shader"),o.default._validateParameters("shader",arguments),u._renderer===void 0&&(u._renderer=this._renderer),u.init(),u.isStrokeShader()?this._renderer.userStrokeShader=u:(this._renderer.userFillShader=u,this._renderer._useNormalMaterial=!1),this},o.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},o.default.prototype.texture=function(u){return this._assert3d("texture"),o.default._validateParameters("texture",arguments),u.gifProperties&&u._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=u,this._renderer._setProperty("_doFill",!0),this},o.default.prototype.textureMode=function(u){u!==c.IMAGE&&u!==c.NORMAL?console.warn("You tried to set ".concat(u," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=u},o.default.prototype.textureWrap=function(u){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u;this._renderer.textureWrapX=u,this._renderer.textureWrapY=a;for(var l=this._renderer.textures,d=0;d<l.length;d++)l[d].setWrapMode(u,a)},o.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var u=arguments.length,a=new Array(u),l=0;l<u;l++)a[l]=arguments[l];return o.default._validateParameters("normalMaterial",a),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},o.default.prototype.ambientMaterial=function(u,a,l){this._assert3d("ambientMaterial"),o.default._validateParameters("ambientMaterial",arguments);var d=o.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=d._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.emissiveMaterial=function(u,a,l,d){this._assert3d("emissiveMaterial"),o.default._validateParameters("emissiveMaterial",arguments);var f=o.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=f._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.specularMaterial=function(u,a,l,d){this._assert3d("specularMaterial"),o.default._validateParameters("specularMaterial",arguments);var f=o.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=f._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.shininess=function(u){return this._assert3d("shininess"),o.default._validateParameters("shininess",arguments),u<1&&(u=1),this._renderer._useShininess=u,this},o.default.RendererGL.prototype._applyColorBlend=function(u){var a=this.GL,l=this.drawMode===c.TEXTURE||u[u.length-1]<1||this._isErasing;return l!==this._isBlending&&(l||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?a.enable(a.BLEND):a.disable(a.BLEND),a.depthMask(!0),this._isBlending=l),this._applyBlendMode(),u},o.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var u=this.GL;switch(this.curBlendMode){case c.BLEND:case c.ADD:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA);break;case c.REMOVE:u.blendEquation(u.FUNC_REVERSE_SUBTRACT),u.blendFunc(u.SRC_ALPHA,u.DST_ALPHA);break;case c.MULTIPLY:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ONE,u.ONE);break;case c.SCREEN:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE,u.ONE,u.ONE);break;case c.EXCLUSION:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE);break;case c.REPLACE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO);break;case c.SUBTRACT:u.blendEquationSeparate(u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD),u.blendFuncSeparate(u.SRC_ALPHA,u.ONE,u.ONE,u.ONE);break;case c.DARKEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MIN_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MAX_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=o.default;i.default=p},{"../core/constants":250,"../core/main":260,"./p5.Texture":316,"core-js/modules/es.array.join":157}],308:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.prototype.camera=function(){var c;this._assert3d("camera");for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return r.default._validateParameters("camera",p),(c=this._renderer._curCamera).camera.apply(c,p),this},r.default.prototype.perspective=function(){var c;this._assert3d("perspective");for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return r.default._validateParameters("perspective",p),(c=this._renderer._curCamera).perspective.apply(c,p),this},r.default.prototype.ortho=function(){var c;this._assert3d("ortho");for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return r.default._validateParameters("ortho",p),(c=this._renderer._curCamera).ortho.apply(c,p),this},r.default.prototype.frustum=function(){var c;this._assert3d("frustum");for(var h=arguments.length,p=new Array(h),u=0;u<h;u++)p[u]=arguments[u];return r.default._validateParameters("frustum",p),(c=this._renderer._curCamera).frustum.apply(c,p),this},r.default.prototype.createCamera=function(){this._assert3d("createCamera");var c=new r.default.Camera(this._renderer);return c._computeCameraDefaultSettings(),c._setDefaultCamera(),this._renderer._curCamera=c},r.default.Camera=function(c){this._renderer=c,this.cameraType="default",this.cameraMatrix=new r.default.Matrix,this.projMatrix=new r.default.Matrix},r.default.Camera.prototype.perspective=function(c,h,p,u){this.cameraType=0<arguments.length?"custom":"default",c===void 0?(c=this.defaultCameraFOV,this.cameraFOV=c):this.cameraFOV=this._renderer._pInst._toRadians(c),h===void 0&&(h=this.defaultAspectRatio),p===void 0&&(p=this.defaultCameraNear),u===void 0&&(u=this.defaultCameraFar),p<=1e-4&&(p=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),u<p&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=p,this.cameraFar=u,this.projMatrix=r.default.Matrix.identity();var a=1/Math.tan(this.cameraFOV/2),l=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(a/h,0,0,0,0,-a,0,0,0,0,(u+p)*l,-1,0,0,2*u*p*l,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},r.default.Camera.prototype.ortho=function(c,h,p,u,a,l){c===void 0&&(c=-this._renderer.width/2),h===void 0&&(h=this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),u===void 0&&(u=this._renderer.height/2),a===void 0&&(a=0),l===void 0&&(l=Math.max(this._renderer.width,this._renderer.height));var d=h-c,f=u-p,m=l-a,g=2/d,_=2/f,x=-2/m,w=-(h+c)/d,M=-(u+p)/f,A=-(l+a)/m;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,-_,0,0,0,0,x,0,w,M,A,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype.frustum=function(c,h,p,u,a,l){c===void 0&&(c=-this._renderer.width/2),h===void 0&&(h=this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),u===void 0&&(u=this._renderer.height/2),a===void 0&&(a=0),l===void 0&&(l=Math.max(this._renderer.width,this._renderer.height));var d=h-c,f=u-p,m=l-a,g=2*a/d,_=2*a/f,x=-2*l*a/m,w=(h+c)/d,M=(u+p)/f,A=-(l+a)/m;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,_,0,0,w,M,A,-1,0,0,x,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype._rotateView=function(c,h,p,u){var a=this.centerX,l=this.centerY,d=this.centerZ;a-=this.eyeX,l-=this.eyeY,d-=this.eyeZ;var f=r.default.Matrix.identity(this._renderer._pInst);f.rotate(this._renderer._pInst._toRadians(c),h,p,u);var m=[a*f.mat4[0]+l*f.mat4[4]+d*f.mat4[8],a*f.mat4[1]+l*f.mat4[5]+d*f.mat4[9],a*f.mat4[2]+l*f.mat4[6]+d*f.mat4[10]];m[0]+=this.eyeX,m[1]+=this.eyeY,m[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,m[0],m[1],m[2],this.upX,this.upY,this.upZ)},r.default.Camera.prototype.pan=function(c){var h=this._getLocalAxes();this._rotateView(c,h.y[0],h.y[1],h.y[2])},r.default.Camera.prototype.tilt=function(c){var h=this._getLocalAxes();this._rotateView(c,h.x[0],h.x[1],h.x[2])},r.default.Camera.prototype.lookAt=function(c,h,p){this.camera(this.eyeX,this.eyeY,this.eyeZ,c,h,p,this.upX,this.upY,this.upZ)},r.default.Camera.prototype.camera=function(c,h,p,u,a,l,d,f,m){c===void 0&&(c=this.defaultEyeX,h=this.defaultEyeY,p=this.defaultEyeZ,u=c,a=h,f=1,m=d=l=0),this.eyeX=c,this.eyeY=h,this.eyeZ=p,u!==void 0&&(this.centerX=u,this.centerY=a,this.centerZ=l),d!==void 0&&(this.upX=d,this.upY=f,this.upZ=m);var g=this._getLocalAxes();this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1);var _=-c,x=-h,w=-p;return this.cameraMatrix.translate([_,x,w]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},r.default.Camera.prototype.move=function(c,h,p){var u=this._getLocalAxes(),a=[u.x[0]*c,u.x[1]*c,u.x[2]*c],l=[u.y[0]*h,u.y[1]*h,u.y[2]*h],d=[u.z[0]*p,u.z[1]*p,u.z[2]*p];this.camera(this.eyeX+a[0]+l[0]+d[0],this.eyeY+a[1]+l[1]+d[1],this.eyeZ+a[2]+l[2]+d[2],this.centerX+a[0]+l[0]+d[0],this.centerY+a[1]+l[1]+d[1],this.centerZ+a[2]+l[2]+d[2],0,1,0)},r.default.Camera.prototype.setPosition=function(c,h,p){var u=c-this.eyeX,a=h-this.eyeY,l=p-this.eyeZ;this.camera(c,h,p,this.centerX+u,this.centerY+a,this.centerZ+l,0,1,0)},r.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},r.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},r.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},r.default.Camera.prototype.copy=function(){var c=new r.default.Camera(this._renderer);return c.cameraFOV=this.cameraFOV,c.aspectRatio=this.aspectRatio,c.eyeX=this.eyeX,c.eyeY=this.eyeY,c.eyeZ=this.eyeZ,c.centerX=this.centerX,c.centerY=this.centerY,c.centerZ=this.centerZ,c.cameraNear=this.cameraNear,c.cameraFar=this.cameraFar,c.cameraType=this.cameraType,c.cameraMatrix=this.cameraMatrix.copy(),c.projMatrix=this.projMatrix.copy(),c},r.default.Camera.prototype._getLocalAxes=function(){var c=this.eyeX-this.centerX,h=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,u=Math.sqrt(c*c+h*h+p*p);u!==0&&(c/=u,h/=u,p/=u);var a=this.upX,l=this.upY,d=this.upZ,f=l*p-d*h,m=-a*p+d*c,g=a*h-l*c;a=h*g-p*m,l=-c*g+p*f,d=c*m-h*f;var _=Math.sqrt(f*f+m*m+g*g);_!==0&&(f/=_,m/=_,g/=_);var x=Math.sqrt(a*a+l*l+d*d);return x!==0&&(a/=x,l/=x,d/=x),{x:[f,m,g],y:[a,l,d],z:[c,h,p]}},r.default.Camera.prototype._orbit=function(c,h,p){var u=this.eyeX-this.centerX,a=this.eyeY-this.centerY,l=this.eyeZ-this.centerZ,d=Math.sqrt(u*u+a*a+l*l),f=Math.atan2(u,l),m=Math.acos(Math.max(-1,Math.min(1,a/d)));f+=c,(d+=p)<0&&(d=.1),(m+=h)>Math.PI?m=Math.PI:m<=0&&(m=.001);var g=Math.sin(m)*d*Math.sin(f),_=Math.cos(m)*d,x=Math.sin(m)*d*Math.cos(f);this.camera(g+this.centerX,_+this.centerY,x+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},r.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},r.default.prototype.setCamera=function(c){this._renderer._curCamera=c,this._renderer.uPMatrix.set(c.projMatrix.mat4[0],c.projMatrix.mat4[1],c.projMatrix.mat4[2],c.projMatrix.mat4[3],c.projMatrix.mat4[4],c.projMatrix.mat4[5],c.projMatrix.mat4[6],c.projMatrix.mat4[7],c.projMatrix.mat4[8],c.projMatrix.mat4[9],c.projMatrix.mat4[10],c.projMatrix.mat4[11],c.projMatrix.mat4[12],c.projMatrix.mat4[13],c.projMatrix.mat4[14],c.projMatrix.mat4[15])};var o=r.default.Camera;i.default=o},{"../core/main":260}],309:[function(e,n,i){e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.Geometry=function(c,h,p){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=c!==void 0?c:1,this.detailY=h!==void 0?h:1,this.dirtyFlags={},p instanceof Function&&p.call(this),this},r.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},r.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var c,h,p,u,a=this.detailX+1,l=0;l<this.detailY;l++)for(var d=0;d<this.detailX;d++)h=(c=l*a+d)+1,p=(l+1)*a+d+1,u=(l+1)*a+d,this.faces.push([c,h,u]),this.faces.push([u,h,p]);return this},r.default.Geometry.prototype._getFaceNormal=function(c){var h=this.faces[c],p=this.vertices[h[0]],u=this.vertices[h[1]],a=this.vertices[h[2]],l=r.default.Vector.sub(u,p),d=r.default.Vector.sub(a,p),f=r.default.Vector.cross(l,d),m=r.default.Vector.mag(f),g=m/(r.default.Vector.mag(l)*r.default.Vector.mag(d));return g===0||isNaN(g)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),f):(1<g&&(g=1),f.mult(Math.asin(g)/m))},r.default.Geometry.prototype.computeNormals=function(){var c,h=this.vertexNormals,p=this.vertices,u=this.faces;for(c=h.length=0;c<p.length;++c)h.push(new r.default.Vector);for(var a=0;a<u.length;++a)for(var l=u[a],d=this._getFaceNormal(a),f=0;f<3;++f)h[l[f]].add(d);for(c=0;c<p.length;++c)h[c].normalize();return this},r.default.Geometry.prototype.averageNormals=function(){for(var c=0;c<=this.detailY;c++){var h=this.detailX+1,p=r.default.Vector.add(this.vertexNormals[c*h],this.vertexNormals[c*h+this.detailX]);p=r.default.Vector.div(p,2),this.vertexNormals[c*h]=p,this.vertexNormals[c*h+this.detailX]=p}return this},r.default.Geometry.prototype.averagePoleNormals=function(){for(var c=new r.default.Vector(0,0,0),h=0;h<this.detailX;h++)c.add(this.vertexNormals[h]);c=r.default.Vector.div(c,this.detailX);for(var p=0;p<this.detailX;p++)this.vertexNormals[p]=c;c=new r.default.Vector(0,0,0);for(var u=this.vertices.length-1;u>this.vertices.length-1-this.detailX;u--)c.add(this.vertexNormals[u]);c=r.default.Vector.div(c,this.detailX);for(var a=this.vertices.length-1;a>this.vertices.length-1-this.detailX;a--)this.vertexNormals[a]=c;return this},r.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var c=0,h=this.strokeIndices.length;c<h;c++)this.edges.push(this.strokeIndices[c]);else for(var p=0;p<this.faces.length;p++)this.edges.push([this.faces[p][0],this.faces[p][1]]),this.edges.push([this.faces[p][1],this.faces[p][2]]),this.edges.push([this.faces[p][2],this.faces[p][0]]);return this},r.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var c=this.lineNormals.length=0;c<this.edges.length;c++){var h=this.vertices[this.edges[c][0]],p=this.vertices[this.edges[c][1]],u=p.copy().sub(h).normalize(),a=h.array(),l=h.array(),d=p.array(),f=p.array(),m=u.array(),g=u.array();m.push(1),g.push(-1),this.lineNormals.push(m,g,m,m,g,g),this.lineVertices.push(a,l,d,d,l,f)}return this},r.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var c=this.vertices[0].copy(),h=this.vertices[0].copy(),p=0;p<this.vertices.length;p++)c.x=Math.max(c.x,this.vertices[p].x),h.x=Math.min(h.x,this.vertices[p].x),c.y=Math.max(c.y,this.vertices[p].y),h.y=Math.min(h.y,this.vertices[p].y),c.z=Math.max(c.z,this.vertices[p].z),h.z=Math.min(h.z,this.vertices[p].z);for(var u=r.default.Vector.lerp(c,h,.5),a=r.default.Vector.sub(c,h),l=200/Math.max(Math.max(a.x,a.y),a.z),d=0;d<this.vertices.length;d++)this.vertices[d].sub(u),this.vertices[d].mult(l)}return this};var o=r.default.Geometry;i.default=o},{"../core/main":260,"core-js/modules/es.string.sub":189}],310:[function(e,n,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s},o=Array,c=function(p){return p instanceof Array};typeof Float32Array!="undefined"&&(o=Float32Array,c=function(p){return p instanceof Array||p instanceof Float32Array}),r.default.Matrix=function(){for(var p=new Array(arguments.length),u=0;u<p.length;++u)p[u]=arguments[u];return p.length&&p[p.length-1]instanceof r.default&&(this.p5=p[p.length-1]),p[0]==="mat3"?this.mat3=Array.isArray(p[1])?p[1]:new o([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(p[0])?p[0]:new o([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},r.default.Matrix.prototype.set=function(p){return p instanceof r.default.Matrix?this.mat4=p.mat4:c(p)?this.mat4=p:arguments.length===16&&(this.mat4[0]=p,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},r.default.Matrix.prototype.get=function(){return new r.default.Matrix(this.mat4,this.p5)},r.default.Matrix.prototype.copy=function(){var p=new r.default.Matrix(this.p5);return p.mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15],p},r.default.Matrix.identity=function(p){return new r.default.Matrix(p)},r.default.Matrix.prototype.transpose=function(p){var u,a,l,d,f,m;return p instanceof r.default.Matrix?(u=p.mat4[1],a=p.mat4[2],l=p.mat4[3],d=p.mat4[6],f=p.mat4[7],m=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=u,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=a,this.mat4[9]=d,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=l,this.mat4[13]=f,this.mat4[14]=m,this.mat4[15]=p.mat4[15]):c(p)&&(u=p[1],a=p[2],l=p[3],d=p[6],f=p[7],m=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=u,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=a,this.mat4[9]=d,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=l,this.mat4[13]=f,this.mat4[14]=m,this.mat4[15]=p[15]),this},r.default.Matrix.prototype.invert=function(p){var u,a,l,d,f,m,g,_,x,w,M,A,T,I,R,P;p instanceof r.default.Matrix?(u=p.mat4[0],a=p.mat4[1],l=p.mat4[2],d=p.mat4[3],f=p.mat4[4],m=p.mat4[5],g=p.mat4[6],_=p.mat4[7],x=p.mat4[8],w=p.mat4[9],M=p.mat4[10],A=p.mat4[11],T=p.mat4[12],I=p.mat4[13],R=p.mat4[14],P=p.mat4[15]):c(p)&&(u=p[0],a=p[1],l=p[2],d=p[3],f=p[4],m=p[5],g=p[6],_=p[7],x=p[8],w=p[9],M=p[10],A=p[11],T=p[12],I=p[13],R=p[14],P=p[15]);var O=u*m-a*f,D=u*g-l*f,k=u*_-d*f,N=a*g-l*m,q=a*_-d*m,X=l*_-d*g,G=x*I-w*T,Q=x*R-M*T,K=x*P-A*T,_e=w*R-M*I,pe=w*P-A*I,ge=M*P-A*R,ce=O*ge-D*pe+k*_e+N*K-q*Q+X*G;return ce?(ce=1/ce,this.mat4[0]=(m*ge-g*pe+_*_e)*ce,this.mat4[1]=(l*pe-a*ge-d*_e)*ce,this.mat4[2]=(I*X-R*q+P*N)*ce,this.mat4[3]=(M*q-w*X-A*N)*ce,this.mat4[4]=(g*K-f*ge-_*Q)*ce,this.mat4[5]=(u*ge-l*K+d*Q)*ce,this.mat4[6]=(R*k-T*X-P*D)*ce,this.mat4[7]=(x*X-M*k+A*D)*ce,this.mat4[8]=(f*pe-m*K+_*G)*ce,this.mat4[9]=(a*K-u*pe-d*G)*ce,this.mat4[10]=(T*q-I*k+P*O)*ce,this.mat4[11]=(w*k-x*q-A*O)*ce,this.mat4[12]=(m*Q-f*_e-g*G)*ce,this.mat4[13]=(u*_e-a*Q+l*G)*ce,this.mat4[14]=(I*D-T*N-R*O)*ce,this.mat4[15]=(x*N-w*D+M*O)*ce,this):null},r.default.Matrix.prototype.invert3x3=function(){var p=this.mat3[0],u=this.mat3[1],a=this.mat3[2],l=this.mat3[3],d=this.mat3[4],f=this.mat3[5],m=this.mat3[6],g=this.mat3[7],_=this.mat3[8],x=_*d-f*g,w=-_*l+f*m,M=g*l-d*m,A=p*x+u*w+a*M;return A?(A=1/A,this.mat3[0]=x*A,this.mat3[1]=(-_*u+a*g)*A,this.mat3[2]=(f*u-a*d)*A,this.mat3[3]=w*A,this.mat3[4]=(_*p-a*m)*A,this.mat3[5]=(-f*p+a*l)*A,this.mat3[6]=M*A,this.mat3[7]=(-g*p+u*m)*A,this.mat3[8]=(d*p-u*l)*A,this):null},r.default.Matrix.prototype.transpose3x3=function(p){var u=p[1],a=p[2],l=p[5];return this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=u,this.mat3[5]=p[7],this.mat3[6]=a,this.mat3[7]=l,this},r.default.Matrix.prototype.inverseTranspose=function(p){this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=p.mat4[0],this.mat3[1]=p.mat4[1],this.mat3[2]=p.mat4[2],this.mat3[3]=p.mat4[4],this.mat3[4]=p.mat4[5],this.mat3[5]=p.mat4[6],this.mat3[6]=p.mat4[8],this.mat3[7]=p.mat4[9],this.mat3[8]=p.mat4[10]);var u=this.invert3x3();if(u)u.transpose3x3(this.mat3);else for(var a=0;a<9;a++)this.mat3[a]=0;return this},r.default.Matrix.prototype.determinant=function(){var p=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],u=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],a=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],l=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],d=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],f=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],m=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],g=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],_=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],x=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],w=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return p*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-u*w+a*x+l*_-d*g+f*m},r.default.Matrix.prototype.mult=function(p){var u;if(p===this||p===this.mat4)u=this.copy().mat4;else if(p instanceof r.default.Matrix)u=p.mat4;else if(c(p))u=p;else{if(arguments.length!==16)return;u=arguments}var a=this.mat4[0],l=this.mat4[1],d=this.mat4[2],f=this.mat4[3];return this.mat4[0]=a*u[0]+l*u[4]+d*u[8]+f*u[12],this.mat4[1]=a*u[1]+l*u[5]+d*u[9]+f*u[13],this.mat4[2]=a*u[2]+l*u[6]+d*u[10]+f*u[14],this.mat4[3]=a*u[3]+l*u[7]+d*u[11]+f*u[15],a=this.mat4[4],l=this.mat4[5],d=this.mat4[6],f=this.mat4[7],this.mat4[4]=a*u[0]+l*u[4]+d*u[8]+f*u[12],this.mat4[5]=a*u[1]+l*u[5]+d*u[9]+f*u[13],this.mat4[6]=a*u[2]+l*u[6]+d*u[10]+f*u[14],this.mat4[7]=a*u[3]+l*u[7]+d*u[11]+f*u[15],a=this.mat4[8],l=this.mat4[9],d=this.mat4[10],f=this.mat4[11],this.mat4[8]=a*u[0]+l*u[4]+d*u[8]+f*u[12],this.mat4[9]=a*u[1]+l*u[5]+d*u[9]+f*u[13],this.mat4[10]=a*u[2]+l*u[6]+d*u[10]+f*u[14],this.mat4[11]=a*u[3]+l*u[7]+d*u[11]+f*u[15],a=this.mat4[12],l=this.mat4[13],d=this.mat4[14],f=this.mat4[15],this.mat4[12]=a*u[0]+l*u[4]+d*u[8]+f*u[12],this.mat4[13]=a*u[1]+l*u[5]+d*u[9]+f*u[13],this.mat4[14]=a*u[2]+l*u[6]+d*u[10]+f*u[14],this.mat4[15]=a*u[3]+l*u[7]+d*u[11]+f*u[15],this},r.default.Matrix.prototype.apply=function(p){var u;if(p===this||p===this.mat4)u=this.copy().mat4;else if(p instanceof r.default.Matrix)u=p.mat4;else if(c(p))u=p;else{if(arguments.length!==16)return;u=arguments}var a=this.mat4,l=a[0],d=a[4],f=a[8],m=a[12];a[0]=u[0]*l+u[1]*d+u[2]*f+u[3]*m,a[4]=u[4]*l+u[5]*d+u[6]*f+u[7]*m,a[8]=u[8]*l+u[9]*d+u[10]*f+u[11]*m,a[12]=u[12]*l+u[13]*d+u[14]*f+u[15]*m;var g=a[1],_=a[5],x=a[9],w=a[13];a[1]=u[0]*g+u[1]*_+u[2]*x+u[3]*w,a[5]=u[4]*g+u[5]*_+u[6]*x+u[7]*w,a[9]=u[8]*g+u[9]*_+u[10]*x+u[11]*w,a[13]=u[12]*g+u[13]*_+u[14]*x+u[15]*w;var M=a[2],A=a[6],T=a[10],I=a[14];a[2]=u[0]*M+u[1]*A+u[2]*T+u[3]*I,a[6]=u[4]*M+u[5]*A+u[6]*T+u[7]*I,a[10]=u[8]*M+u[9]*A+u[10]*T+u[11]*I,a[14]=u[12]*M+u[13]*A+u[14]*T+u[15]*I;var R=a[3],P=a[7],O=a[11],D=a[15];return a[3]=u[0]*R+u[1]*P+u[2]*O+u[3]*D,a[7]=u[4]*R+u[5]*P+u[6]*O+u[7]*D,a[11]=u[8]*R+u[9]*P+u[10]*O+u[11]*D,a[15]=u[12]*R+u[13]*P+u[14]*O+u[15]*D,this},r.default.Matrix.prototype.scale=function(p,u,a){return p instanceof r.default.Vector?(u=p.y,a=p.z,p=p.x):p instanceof Array&&(u=p[1],a=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=u,this.mat4[5]*=u,this.mat4[6]*=u,this.mat4[7]*=u,this.mat4[8]*=a,this.mat4[9]*=a,this.mat4[10]*=a,this.mat4[11]*=a,this},r.default.Matrix.prototype.rotate=function(p,u,a,l){u instanceof r.default.Vector?(a=u.y,l=u.z,u=u.x):u instanceof Array&&(a=u[1],l=u[2],u=u[0]);var d=Math.sqrt(u*u+a*a+l*l);u*=1/d,a*=1/d,l*=1/d;var f=this.mat4[0],m=this.mat4[1],g=this.mat4[2],_=this.mat4[3],x=this.mat4[4],w=this.mat4[5],M=this.mat4[6],A=this.mat4[7],T=this.mat4[8],I=this.mat4[9],R=this.mat4[10],P=this.mat4[11],O=Math.sin(p),D=Math.cos(p),k=1-D,N=u*u*k+D,q=a*u*k+l*O,X=l*u*k-a*O,G=u*a*k-l*O,Q=a*a*k+D,K=l*a*k+u*O,_e=u*l*k+a*O,pe=a*l*k-u*O,ge=l*l*k+D;return this.mat4[0]=f*N+x*q+T*X,this.mat4[1]=m*N+w*q+I*X,this.mat4[2]=g*N+M*q+R*X,this.mat4[3]=_*N+A*q+P*X,this.mat4[4]=f*G+x*Q+T*K,this.mat4[5]=m*G+w*Q+I*K,this.mat4[6]=g*G+M*Q+R*K,this.mat4[7]=_*G+A*Q+P*K,this.mat4[8]=f*_e+x*pe+T*ge,this.mat4[9]=m*_e+w*pe+I*ge,this.mat4[10]=g*_e+M*pe+R*ge,this.mat4[11]=_*_e+A*pe+P*ge,this},r.default.Matrix.prototype.translate=function(p){var u=p[0],a=p[1],l=p[2]||0;this.mat4[12]+=this.mat4[0]*u+this.mat4[4]*a+this.mat4[8]*l,this.mat4[13]+=this.mat4[1]*u+this.mat4[5]*a+this.mat4[9]*l,this.mat4[14]+=this.mat4[2]*u+this.mat4[6]*a+this.mat4[10]*l,this.mat4[15]+=this.mat4[3]*u+this.mat4[7]*a+this.mat4[11]*l},r.default.Matrix.prototype.rotateX=function(p){this.rotate(p,1,0,0)},r.default.Matrix.prototype.rotateY=function(p){this.rotate(p,0,1,0)},r.default.Matrix.prototype.rotateZ=function(p){this.rotate(p,0,0,1)},r.default.Matrix.prototype.perspective=function(p,u,a,l){var d=1/Math.tan(p/2),f=1/(a-l);return this.mat4[0]=d/u,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=d,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(l+a)*f,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*l*a*f,this.mat4[15]=0,this},r.default.Matrix.prototype.ortho=function(p,u,a,l,d,f){var m=1/(p-u),g=1/(a-l),_=1/(d-f);return this.mat4[0]=-2*m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*_,this.mat4[11]=0,this.mat4[12]=(p+u)*m,this.mat4[13]=(l+a)*g,this.mat4[14]=(f+d)*_,this.mat4[15]=1,this};var h=r.default.Matrix;i.default=h},{"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220}],311:[function(e,n,i){e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.RenderBuffer=function(c,h,p,u,a,l){this.size=c,this.src=h,this.dst=p,this.attr=u,this._renderer=a,this.map=l},r.default.RenderBuffer.prototype._prepareBuffer=function(c,h){var p,u=h.attributes,a=this._renderer.GL;p=c.model?c.model:c;var l=u[this.attr];if(l){var d=c[this.dst],f=p[this.src];if(0<f.length){var m=!d;if(m&&(c[this.dst]=d=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,d),m||p.dirtyFlags[this.src]!==!1){var g=this.map,_=g?g(f):f;this._renderer._bindBuffer(d,a.ARRAY_BUFFER,_),p.dirtyFlags[this.src]=!1}h.enableAttrib(l,this.size)}}};var o=r.default.RenderBuffer;i.default=o},{"../core/main":260,"core-js/modules/es.array.map":159}],312:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}e("./p5.RenderBuffer"),o.default.RendererGL.prototype.beginShape=function(u){return this.immediateMode.shapeMode=u!==void 0?u:c.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},o.default.RendererGL.prototype.vertex=function(u,a){var l,d,f;l=d=f=0,arguments.length===3?l=arguments[2]:arguments.length===4?(d=arguments[2],f=arguments[3]):arguments.length===5&&(l=arguments[2],d=arguments[3],f=arguments[4]);var m=new o.default.Vector(u,a,l);this.immediateMode.geometry.vertices.push(m),this.immediateMode.geometry.vertexNormals.push(this._currentNormal);var g=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(g[0],g[1],g[2],g[3]),this.textureMode===c.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(d/=this._tex.width,f/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(d,f),this.immediateMode._bezierVertex[0]=u,this.immediateMode._bezierVertex[1]=a,this.immediateMode._bezierVertex[2]=l,this.immediateMode._quadraticVertex[0]=u,this.immediateMode._quadraticVertex[1]=a,this.immediateMode._quadraticVertex[2]=l,this},o.default.RendererGL.prototype.normal=function(u,a,l){return u instanceof o.default.Vector?this._currentNormal=u:this._currentNormal=new o.default.Vector(u,a,l),this},o.default.RendererGL.prototype.endShape=function(u,a,l,d,f,m){return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},o.default.RendererGL.prototype._processVertices=function(u){if(this.immediateMode.geometry.vertices.length!==0){var a=this._doStroke&&this.drawMode!==c.TEXTURE,l=u===c.CLOSE;a&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,l),this.immediateMode.geometry._edgesToVertices());var d=this.immediateMode.shapeMode===c.TESS;(this.isBezier||this.isQuadratic||this.isCurve||d)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape()}},o.default.RendererGL.prototype._calculateEdges=function(u,a,l){var d=[],f=0;switch(u){case c.TRIANGLE_STRIP:for(f=0;f<a.length-2;f++)d.push([f,f+1]),d.push([f,f+2]);d.push([f,f+1]);break;case c.TRIANGLES:for(f=0;f<a.length-2;f+=3)d.push([f,f+1]),d.push([f+1,f+2]),d.push([f+2,f]);break;case c.LINES:for(f=0;f<a.length-1;f+=2)d.push([f,f+1]);break;default:for(f=0;f<a.length-1;f++)d.push([f,f+1])}return l&&d.push([a.length-1,0]),d},o.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=c.TRIANGLES;var u=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],a=this._triangulate(u);this.immediateMode.geometry.vertices=[];for(var l=0,d=a.length;l<d;l+=3)this.vertex(a[l],a[l+1],a[l+2])},o.default.RendererGL.prototype._drawImmediateFill=function(){var u=this.GL,a=this._getImmediateFillShader();this._setFillUniforms(a);var l=!0,d=!1,f=void 0;try{for(var m,g=this.immediateMode.buffers.fill[Symbol.iterator]();!(l=(m=g.next()).done);l=!0)m.value._prepareBuffer(this.immediateMode.geometry,a)}catch(_){d=!0,f=_}finally{try{l||g.return==null||g.return()}finally{if(d)throw f}}this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),u.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),a.unbindShader()},o.default.RendererGL.prototype._drawImmediateStroke=function(){var u=this.GL,a=this._getImmediateStrokeShader();this._setStrokeUniforms(a);var l=!0,d=!1,f=void 0;try{for(var m,g=this.immediateMode.buffers.stroke[Symbol.iterator]();!(l=(m=g.next()).done);l=!0)m.value._prepareBuffer(this.immediateMode.geometry,a)}catch(_){d=!0,f=_}finally{try{l||g.return==null||g.return()}finally{if(d)throw f}}this._applyColorBlend(this.curStrokeColor),u.drawArrays(u.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),a.unbindShader()};var p=o.default.RendererGL;i.default=p},{"../core/constants":250,"../core/main":260,"./p5.RenderBuffer":311,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/web.dom-collections.iterator":226}],313:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};e("./p5.RendererGL"),e("./p5.RenderBuffer");var o=0;r.default.RendererGL.prototype._initBufferDefaults=function(h){if(this._freeBuffers(h),1e3<++o){var p=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[p],o--}return this.retainedMode.geometry[h]={}},r.default.RendererGL.prototype._freeBuffers=function(h){var p=this.retainedMode.geometry[h];if(p){delete this.retainedMode.geometry[h],o--;var u=this.GL;p.indexBuffer&&u.deleteBuffer(p.indexBuffer),a(this.retainedMode.buffers.stroke),a(this.retainedMode.buffers.fill)}function a(l){var d=!0,f=!1,m=void 0;try{for(var g,_=l[Symbol.iterator]();!(d=(g=_.next()).done);d=!0){var x=g.value;p[x.dst]&&(u.deleteBuffer(p[x.dst]),p[x.dst]=null)}}catch(w){f=!0,m=w}finally{try{d||_.return==null||_.return()}finally{if(f)throw m}}}},r.default.RendererGL.prototype.createBuffers=function(h,p){var u=this.GL,a=this._initBufferDefaults(h);a.model=p;var l=a.indexBuffer;if(p.faces.length){l=l||(a.indexBuffer=u.createBuffer());var d=r.default.RendererGL.prototype._flatten(p.faces),f=d.some(function(g){return 65535<g}),m=f?Uint32Array:Uint16Array;this._bindBuffer(l,u.ELEMENT_ARRAY_BUFFER,d,m),a.indexBufferType=f?u.UNSIGNED_INT:u.UNSIGNED_SHORT,a.vertexCount=3*p.faces.length}else l&&(u.deleteBuffer(l),a.indexBuffer=null),a.vertexCount=p.vertices?p.vertices.length:0;return a.lineVertexCount=p.lineVertices?p.lineVertices.length:0,a},r.default.RendererGL.prototype.drawBuffers=function(h){var p=this.GL,u=this.retainedMode.geometry[h];if(this._doStroke&&0<u.lineVertexCount){var a=this._getRetainedStrokeShader();this._setStrokeUniforms(a);var l=!0,d=!1,f=void 0;try{for(var m,g=this.retainedMode.buffers.stroke[Symbol.iterator]();!(l=(m=g.next()).done);l=!0)m.value._prepareBuffer(u,a)}catch(I){d=!0,f=I}finally{try{l||g.return==null||g.return()}finally{if(d)throw f}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(p.TRIANGLES,h),a.unbindShader()}if(this._doFill){var _=this._getRetainedFillShader();this._setFillUniforms(_);var x=!0,w=!1,M=void 0;try{for(var A,T=this.retainedMode.buffers.fill[Symbol.iterator]();!(x=(A=T.next()).done);x=!0)A.value._prepareBuffer(u,_)}catch(I){w=!0,M=I}finally{try{x||T.return==null||T.return()}finally{if(w)throw M}}u.indexBuffer&&this._bindBuffer(u.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(p.TRIANGLES,h),_.unbindShader()}return this},r.default.RendererGL.prototype.drawBuffersScaled=function(h,p,u,a){var l=this.uMVMatrix.copy();try{this.uMVMatrix.scale(p,u,a),this.drawBuffers(h)}finally{this.uMVMatrix=l}},r.default.RendererGL.prototype._drawArrays=function(h,p){return this.GL.drawArrays(h,0,this.retainedMode.geometry[p].lineVertexCount),this},r.default.RendererGL.prototype._drawElements=function(h,p){var u=this.retainedMode.geometry[p],a=this.GL;if(u.indexBuffer){if(u.indexBufferType===a.UNSIGNED_INT&&!a.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");a.drawElements(a.TRIANGLES,u.vertexCount,u.indexBufferType,0)}else a.drawArrays(h||a.TRIANGLES,0,u.vertexCount)},r.default.RendererGL.prototype._drawPoints=function(h,p){var u=this.GL,a=this._getImmediatePointShader();this._setPointUniforms(a),this._bindBuffer(p,u.ARRAY_BUFFER,this._vToNArray(h),Float32Array,u.STATIC_DRAW),a.enableAttrib(a.attributes.aPosition,3),u.drawArrays(u.Points,0,h.length),a.unbindShader()};var c=r.default.RendererGL;i.default=c},{"../core/main":260,"./p5.RenderBuffer":311,"./p5.RendererGL":314,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.some":161,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint16-array":221,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/web.dom-collections.iterator":226}],314:[function(e,n,i){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=p(e("../core/main")),o=function(f){if(f&&f.__esModule)return f;if(f===null||s(f)!=="object"&&typeof f!="function")return{default:f};var m=h();if(m&&m.has(f))return m.get(f);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var w=_?Object.getOwnPropertyDescriptor(f,x):null;w&&(w.get||w.set)?Object.defineProperty(g,x,w):g[x]=f[x]}return g.default=f,m&&m.set(f,g),g}(e("../core/constants")),c=p(e("libtess"));e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");function h(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return h=function(){return f},f}function p(f){return f&&f.__esModule?f:{default:f}}function u(f){return function(m){if(Array.isArray(m)){for(var g=0,_=new Array(m.length);g<m.length;g++)_[g]=m[g];return _}}(f)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,l={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:a+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:a+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;
  }
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`};r.default.RendererGL=function(f,m,g,_){return r.default.Renderer.call(this,f,m,g),this._setAttributeDefaults(m),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=o.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=o.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new r.default.Matrix,this.uPMatrix=new r.default.Matrix,this.uNMatrix=new r.default.Matrix("mat3"),this._currentNormal=new r.default.Vector(0,0,1),this._curCamera=new r.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new r.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new r.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new r.default.RenderBuffer(4,"vertexColors","colorBuffer","aMaterialColor",this),new r.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new r.default.Geometry,shapeMode:o.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new r.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new r.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new r.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new r.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=o.IMAGE,this.textureWrapX=o.CLAMP,this.textureWrapY=o.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},r.default.RendererGL.prototype=Object.create(r.default.Renderer.prototype),r.default.RendererGL.prototype._setAttributeDefaults=function(f){var m={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};f._glAttributes===null?f._glAttributes=m:f._glAttributes=Object.assign(m,f._glAttributes)},r.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var f=this.drawingContext;f.enable(f.DEPTH_TEST),f.depthFunc(f.LEQUAL),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(m){throw m}},r.default.RendererGL.prototype._resetContext=function(f,m){var g=this.width,_=this.height,x=this.canvas.id,w=this._pInst instanceof r.default.Graphics;if(w){var M=this._pInst;M.canvas.parentNode.removeChild(M.canvas),M.canvas=document.createElement("canvas"),(M._pInst._userNode||document.body).appendChild(M.canvas),r.default.Element.call(M,M.canvas,M._pInst),M.width=g,M.height=_}else{var A=this.canvas;A&&A.parentNode.removeChild(A),(A=document.createElement("canvas")).id=x,this._pInst._userNode?this._pInst._userNode.appendChild(A):document.body.appendChild(A),this._pInst.canvas=A}var T=new r.default.RendererGL(this._pInst.canvas,this._pInst,!w);this._pInst._setProperty("_renderer",T),T.resize(g,_),T._applyDefaults(),w||this._pInst._elements.push(T),typeof m=="function"&&setTimeout(function(){m.apply(window._renderer,f)},0)},r.default.prototype.setAttributes=function(f,m){if(this._glAttributes!==void 0){var g=!0;if(m!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[f]!==m&&(this._glAttributes[f]=m,g=!1)):f instanceof Object&&this._glAttributes!==f&&(this._glAttributes=f,g=!1),this._renderer.isP3D&&!g){if(!this._setupDone){for(var _ in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(_))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},r.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},r.default.RendererGL.prototype.background=function(){var f,m=(f=this._pInst).color.apply(f,arguments),g=m.levels[0]/255,_=m.levels[1]/255,x=m.levels[2]/255,w=m.levels[3]/255;this.GL.clearColor(g,_,x,w),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},r.default.RendererGL.prototype.fill=function(f,m,g,_){var x=r.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=x._array,this.drawMode=o.FILL,this._useNormalMaterial=!1,this._tex=null},r.default.RendererGL.prototype.stroke=function(f,m,g,_){arguments[3]=255;var x=r.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=x._array},r.default.RendererGL.prototype.strokeCap=function(f){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},r.default.RendererGL.prototype.strokeJoin=function(f){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},r.default.RendererGL.prototype.filter=function(f){console.error("filter() does not work in WEBGL mode")},r.default.RendererGL.prototype.blendMode=function(f){f===o.DARKEST||f===o.LIGHTEST||f===o.ADD||f===o.BLEND||f===o.SUBTRACT||f===o.SCREEN||f===o.EXCLUSION||f===o.REPLACE||f===o.MULTIPLY||f===o.REMOVE?this.curBlendMode=f:f!==o.BURN&&f!==o.OVERLAY&&f!==o.HARD_LIGHT&&f!==o.SOFT_LIGHT&&f!==o.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},r.default.RendererGL.prototype.erase=function(f,m){this._isErasing||(this._applyBlendMode(o.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,f/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,m/255])},r.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},r.default.RendererGL.prototype.strokeWeight=function(f){this.curStrokeWeight!==f&&(this.pointSize=f,this.curStrokeWeight=f)},r.default.RendererGL.prototype._getPixel=function(f,m){var g;return g=new Uint8Array(4),this.drawingContext.readPixels(f,m,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,g),[g[0],g[1],g[2],g[3]]},r.default.RendererGL.prototype.loadPixels=function(){var f=this._pixelsState;if(this._pInst._glAttributes.preserveDrawingBuffer===!0){var m=f.pixels,g=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;m instanceof Uint8Array&&m.length===g||(m=new Uint8Array(g),this._pixelsState._setProperty("pixels",m));var _=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*_,this.height*_,this.GL.RGBA,this.GL.UNSIGNED_BYTE,m)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},r.default.RendererGL.prototype.geometryInHash=function(f){return this.retainedMode.geometry[f]!==void 0},r.default.RendererGL.prototype.resize=function(f,m){r.default.Renderer.prototype.resize.call(this,f,m),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var g=this._pixelsState;g.pixels!==void 0&&g._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},r.default.RendererGL.prototype.clear=function(){var f=(arguments.length<=0?void 0:arguments[0])||0,m=(arguments.length<=1?void 0:arguments[1])||0,g=(arguments.length<=2?void 0:arguments[2])||0,_=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(f,m,g,_),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},r.default.RendererGL.prototype.applyMatrix=function(f,m,g,_,x,w){arguments.length===16?r.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([f,m,0,0,g,_,0,0,0,0,1,0,x,w,0,1])},r.default.RendererGL.prototype.translate=function(f,m,g){return f instanceof r.default.Vector&&(g=f.z,m=f.y,f=f.x),this.uMVMatrix.translate([f,m,g]),this},r.default.RendererGL.prototype.scale=function(f,m,g){return this.uMVMatrix.scale(f,m,g),this},r.default.RendererGL.prototype.rotate=function(f,m){return m===void 0?this.rotateZ(f):(r.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},r.default.RendererGL.prototype.rotateX=function(f){return this.rotate(f,1,0,0),this},r.default.RendererGL.prototype.rotateY=function(f){return this.rotate(f,0,1,0),this},r.default.RendererGL.prototype.rotateZ=function(f){return this.rotate(f,0,0,1),this},r.default.RendererGL.prototype.push=function(){var f=r.default.Renderer.prototype.push.apply(this),m=f.properties;return m.uMVMatrix=this.uMVMatrix.copy(),m.uPMatrix=this.uPMatrix.copy(),m._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),m.ambientLightColors=this.ambientLightColors.slice(),m.specularColors=this.specularColors.slice(),m.directionalLightDirections=this.directionalLightDirections.slice(),m.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),m.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),m.pointLightPositions=this.pointLightPositions.slice(),m.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),m.pointLightSpecularColors=this.pointLightSpecularColors.slice(),m.spotLightPositions=this.spotLightPositions.slice(),m.spotLightDirections=this.spotLightDirections.slice(),m.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),m.spotLightSpecularColors=this.spotLightSpecularColors.slice(),m.spotLightAngle=this.spotLightAngle.slice(),m.spotLightConc=this.spotLightConc.slice(),m.userFillShader=this.userFillShader,m.userStrokeShader=this.userStrokeShader,m.userPointShader=this.userPointShader,m.pointSize=this.pointSize,m.curStrokeWeight=this.curStrokeWeight,m.curStrokeColor=this.curStrokeColor,m.curFillColor=this.curFillColor,m._useSpecularMaterial=this._useSpecularMaterial,m._useEmissiveMaterial=this._useEmissiveMaterial,m._useShininess=this._useShininess,m.constantAttenuation=this.constantAttenuation,m.linearAttenuation=this.linearAttenuation,m.quadraticAttenuation=this.quadraticAttenuation,m._enableLighting=this._enableLighting,m._useNormalMaterial=this._useNormalMaterial,m._tex=this._tex,m.drawMode=this.drawMode,m._currentNormal=this._currentNormal,f},r.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=r.default.Matrix.identity(this._pInst),this},r.default.RendererGL.prototype._getImmediateStrokeShader=function(){var f=this.userStrokeShader;return f&&f.isStrokeShader()?f:this._getLineShader()},r.default.RendererGL.prototype._getRetainedStrokeShader=r.default.RendererGL.prototype._getImmediateStrokeShader,r.default.RendererGL.prototype._getImmediateFillShader=function(){var f=this.userFillShader;if(this._useNormalMaterial&&(!f||!f.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!f||!f.isLightShader())return this._getLightShader()}else if(this._tex){if(!f||!f.isTextureShader())return this._getLightShader()}else if(!f)return this._getImmediateModeShader();return f},r.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var f=this.userFillShader;if(this._enableLighting){if(!f||!f.isLightShader())return this._getLightShader()}else if(this._tex){if(!f||!f.isTextureShader())return this._getLightShader()}else if(!f)return this._getColorShader();return f},r.default.RendererGL.prototype._getImmediatePointShader=function(){var f=this.userPointShader;return f&&f.isPointShader()?f:this._getPointShader()},r.default.RendererGL.prototype._getRetainedLineShader=r.default.RendererGL.prototype._getImmediateLineShader,r.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new r.default.Shader(this,l.phongVert,l.phongFrag):this._defaultLightShader=new r.default.Shader(this,l.lightVert,l.lightTextureFrag)),this._defaultLightShader},r.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new r.default.Shader(this,l.immediateVert,l.vertexColorFrag)),this._defaultImmediateModeShader},r.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new r.default.Shader(this,l.normalVert,l.normalFrag)),this._defaultNormalShader},r.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new r.default.Shader(this,l.normalVert,l.basicFrag)),this._defaultColorShader},r.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new r.default.Shader(this,l.pointVert,l.pointFrag)),this._defaultPointShader},r.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new r.default.Shader(this,l.lineVert,l.lineFrag)),this._defaultLineShader},r.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new r.default.Shader(this,l.fontVert,l.fontFrag)),this._defaultFontShader},r.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var f=new r.default.Image(1,1);f.set(0,0,255),this._emptyTexture=new r.default.Texture(this,f)}return this._emptyTexture},r.default.RendererGL.prototype.getTexture=function(f){var m=this.textures,g=!0,_=!1,x=void 0;try{for(var w,M=m[Symbol.iterator]();!(g=(w=M.next()).done);g=!0){var A=w.value;if(A.src===f)return A}}catch(I){_=!0,x=I}finally{try{g||M.return==null||M.return()}finally{if(_)throw x}}var T=new r.default.Texture(this,f);return m.push(T),T},r.default.RendererGL.prototype._setStrokeUniforms=function(f){f.bindShader(),f.setUniform("uMaterialColor",this.curStrokeColor),f.setUniform("uStrokeWeight",this.curStrokeWeight)},r.default.RendererGL.prototype._setFillUniforms=function(f){f.bindShader(),f.setUniform("uMaterialColor",this.curFillColor),f.setUniform("isTexture",!!this._tex),this._tex&&f.setUniform("uSampler",this._tex),f.setUniform("uTint",this._tint),f.setUniform("uSpecular",this._useSpecularMaterial),f.setUniform("uEmissive",this._useEmissiveMaterial),f.setUniform("uShininess",this._useShininess),f.setUniform("uUseLighting",this._enableLighting);var m=this.pointLightDiffuseColors.length/3;f.setUniform("uPointLightCount",m),f.setUniform("uPointLightLocation",this.pointLightPositions),f.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),f.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var g=this.directionalLightDiffuseColors.length/3;f.setUniform("uDirectionalLightCount",g),f.setUniform("uLightingDirection",this.directionalLightDirections),f.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),f.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var _=this.ambientLightColors.length/3;f.setUniform("uAmbientLightCount",_),f.setUniform("uAmbientColor",this.ambientLightColors);var x=this.spotLightDiffuseColors.length/3;f.setUniform("uSpotLightCount",x),f.setUniform("uSpotLightAngle",this.spotLightAngle),f.setUniform("uSpotLightConc",this.spotLightConc),f.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),f.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),f.setUniform("uSpotLightLocation",this.spotLightPositions),f.setUniform("uSpotLightDirection",this.spotLightDirections),f.setUniform("uConstantAttenuation",this.constantAttenuation),f.setUniform("uLinearAttenuation",this.linearAttenuation),f.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),f.bindTextures()},r.default.RendererGL.prototype._setPointUniforms=function(f){f.bindShader(),f.setUniform("uMaterialColor",this.curStrokeColor),f.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},r.default.RendererGL.prototype._bindBuffer=function(f,m,g,_,x){if(m=m||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(m,f),g!==void 0){var w=new(_||Float32Array)(g);this.GL.bufferData(m,w,x||this.GL.STATIC_DRAW)}},r.default.RendererGL.prototype._arraysEqual=function(f,m){var g=f.length;if(g!==m.length)return!1;for(var _=0;_<g;_++)if(f[_]!==m[_])return!1;return!0},r.default.RendererGL.prototype._isTypedArray=function(f){return f instanceof Uint32Array},r.default.RendererGL.prototype._flatten=function(f){if(f.length===0)return[];if(2e4<f.length){var m,g=Object.prototype.toString,_=[],x=f.slice();for(m=x.pop();g.call(m)==="[object Array]"?x.push.apply(x,u(m)):_.push(m),x.length&&(m=x.pop())!==void 0;);return _.reverse(),_}var w;return(w=[]).concat.apply(w,u(f))},r.default.RendererGL.prototype._vToNArray=function(f){var m=[],g=!0,_=!1,x=void 0;try{for(var w,M=f[Symbol.iterator]();!(g=(w=M.next()).done);g=!0){var A=w.value;m.push(A.x,A.y,A.z)}}catch(T){_=!0,x=T}finally{try{g||M.return==null||M.return()}finally{if(_)throw x}}return m},r.default.prototype._assert3d=function(f){if(!this._renderer.isP3D)throw new Error("".concat(f,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},r.default.RendererGL.prototype._initTessy=function(){var f=new c.default.GluTesselator;return f.gluTessCallback(c.default.gluEnum.GLU_TESS_VERTEX_DATA,function(m,g){g[g.length]=m[0],g[g.length]=m[1],g[g.length]=m[2]}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_BEGIN,function(m){m!==c.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(m))}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_ERROR,function(m){console.log("error callback"),console.log("error number: ".concat(m))}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_COMBINE,function(m,g,_){return[m[0],m[1],m[2]]}),f.gluTessCallback(c.default.gluEnum.GLU_TESS_EDGE_FLAG,function(m){}),f},r.default.RendererGL.prototype._triangulate=function(f){this._tessy.gluTessNormal(0,0,1);var m=[];this._tessy.gluTessBeginPolygon(m);for(var g=0;g<f.length;g++){this._tessy.gluTessBeginContour();for(var _=f[g],x=0;x<_.length;x+=3){var w=[_[x],_[x+1],_[x+2]];this._tessy.gluTessVertex(w,w)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),m},r.default.RendererGL.prototype._bezierCoefficients=function(f){var m=f*f,g=1-f,_=g*g;return[_*g,3*_*f,3*g*m,m*f]},r.default.RendererGL.prototype._quadraticCoefficients=function(f){var m=1-f;return[m*m,2*m*f,f*f]},r.default.RendererGL.prototype._bezierToCatmull=function(f){return[f[1],f[1]+(f[2]-f[0])/this._curveTightness,f[2]-(f[3]-f[1])/this._curveTightness,f[2]]};var d=r.default.RendererGL;i.default=d},{"../core/constants":250,"../core/main":260,"../core/p5.Renderer":263,"./p5.Camera":308,"./p5.Matrix":310,"./p5.Shader":315,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.from":153,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.float64-array":201,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.int16-array":205,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint16-array":221,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,libtess:234,path:237}],315:[function(e,n,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,r=(s=e("../core/main"))&&s.__esModule?s:{default:s};r.default.Shader=function(c,h,p){this._renderer=c,this._vertSrc=h,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},r.default.Shader.prototype.init=function(){if(this._glProgram===0){var c=this._renderer.GL;if(this._vertShader=c.createShader(c.VERTEX_SHADER),c.shaderSource(this._vertShader,this._vertSrc),c.compileShader(this._vertShader),!c.getShaderParameter(this._vertShader,c.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(c.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=c.createShader(c.FRAGMENT_SHADER),c.shaderSource(this._fragShader,this._fragSrc),c.compileShader(this._fragShader),!c.getShaderParameter(this._fragShader,c.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(c.getShaderInfoLog(this._fragShader))),null;this._glProgram=c.createProgram(),c.attachShader(this._glProgram,this._vertShader),c.attachShader(this._glProgram,this._fragShader),c.linkProgram(this._glProgram),c.getProgramParameter(this._glProgram,c.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(c.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},r.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var c=this._renderer.GL,h=c.getProgramParameter(this._glProgram,c.ACTIVE_ATTRIBUTES),p=0;p<h;++p){var u=c.getActiveAttrib(this._glProgram,p),a=u.name,l=c.getAttribLocation(this._glProgram,a),d={};d.name=a,d.location=l,d.index=p,d.type=u.type,d.size=u.size,this.attributes[a]=d}this._loadedAttributes=!0}},r.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var c=this._renderer.GL,h=c.getProgramParameter(this._glProgram,c.ACTIVE_UNIFORMS),p=0,u=0;u<h;++u){var a=c.getActiveUniform(this._glProgram,u),l={};l.location=c.getUniformLocation(this._glProgram,a.name),l.size=a.size;var d=a.name;1<a.size&&(d=d.substring(0,d.indexOf("[0]"))),l.name=d,l.type=a.type,l._cachedData=void 0,l.type===c.SAMPLER_2D&&(l.samplerIndex=p,p++,this.samplers.push(l)),l.isArray=l.type===c.FLOAT_MAT3||l.type===c.FLOAT_MAT4||l.type===c.FLOAT_VEC2||l.type===c.FLOAT_VEC3||l.type===c.FLOAT_VEC4||l.type===c.INT_VEC2||l.type===c.INT_VEC3||l.type===c.INT_VEC4,this.uniforms[d]=l}this._loadedUniforms=!0}},r.default.Shader.prototype.compile=function(){},r.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},r.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},r.default.Shader.prototype.bindTextures=function(){var c=this._renderer.GL,h=!0,p=!1,u=void 0;try{for(var a,l=this.samplers[Symbol.iterator]();!(h=(a=l.next()).done);h=!0){var d=a.value,f=d.texture;f===void 0&&(f=this._renderer._getEmptyTexture()),c.activeTexture(c.TEXTURE0+d.samplerIndex),f.bindTexture(),f.update(),c.uniform1i(d.location,d.samplerIndex)}}catch(m){p=!0,u=m}finally{try{h||l.return==null||l.return()}finally{if(p)throw u}}},r.default.Shader.prototype.updateTextures=function(){var c=!0,h=!1,p=void 0;try{for(var u,a=this.samplers[Symbol.iterator]();!(c=(u=a.next()).done);c=!0){var l=u.value.texture;l&&l.update()}}catch(d){h=!0,p=d}finally{try{c||a.return==null||a.return()}finally{if(h)throw p}}},r.default.Shader.prototype.unbindTextures=function(){},r.default.Shader.prototype._setMatrixUniforms=function(){this.setUniform("uProjectionMatrix",this._renderer.uPMatrix.mat4),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uModelViewMatrix",this._renderer.uMVMatrix.mat4),this.setUniform("uViewMatrix",this._renderer._curCamera.cameraMatrix.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},r.default.Shader.prototype.useProgram=function(){var c=this._renderer.GL;return this._renderer._curShader!==this&&(c.useProgram(this._glProgram),this._renderer._curShader=this),this},r.default.Shader.prototype.setUniform=function(c,h){var p=this.uniforms[c];if(p){var u=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,h))return;p._cachedData=h.slice(0)}else{if(p._cachedData&&p._cachedData===h)return;p._cachedData=h}var a=p.location;switch(this.useProgram(),p.type){case u.BOOL:h===!0?u.uniform1i(a,1):u.uniform1i(a,0);break;case u.INT:1<p.size?h.length&&u.uniform1iv(a,h):u.uniform1i(a,h);break;case u.FLOAT:1<p.size?h.length&&u.uniform1fv(a,h):u.uniform1f(a,h);break;case u.FLOAT_MAT3:u.uniformMatrix3fv(a,!1,h);break;case u.FLOAT_MAT4:u.uniformMatrix4fv(a,!1,h);break;case u.FLOAT_VEC2:1<p.size?h.length&&u.uniform2fv(a,h):u.uniform2f(a,h[0],h[1]);break;case u.FLOAT_VEC3:1<p.size?h.length&&u.uniform3fv(a,h):u.uniform3f(a,h[0],h[1],h[2]);break;case u.FLOAT_VEC4:1<p.size?h.length&&u.uniform4fv(a,h):u.uniform4f(a,h[0],h[1],h[2],h[3]);break;case u.INT_VEC2:1<p.size?h.length&&u.uniform2iv(a,h):u.uniform2i(a,h[0],h[1]);break;case u.INT_VEC3:1<p.size?h.length&&u.uniform3iv(a,h):u.uniform3i(a,h[0],h[1],h[2]);break;case u.INT_VEC4:1<p.size?h.length&&u.uniform4iv(a,h):u.uniform4i(a,h[0],h[1],h[2],h[3]);break;case u.SAMPLER_2D:u.activeTexture(u.TEXTURE0+p.samplerIndex),p.texture=this._renderer.getTexture(h),u.uniform1i(p.location,p.samplerIndex)}return this}},r.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},r.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},r.default.Shader.prototype.isTextureShader=function(){return 0<this.samplerIndex},r.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},r.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},r.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},r.default.Shader.prototype.enableAttrib=function(c,h,p,u,a,l){if(c){var d=c.location;if(d!==-1){var f=this._renderer.GL;c.enabled||(f.enableVertexAttribArray(d),c.enabled=!0),this._renderer.GL.vertexAttribPointer(d,h,p||f.FLOAT,u||!1,a||0,l||0)}}return this};var o=r.default.Shader;i.default=o},{"../core/main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],316:[function(e,n,i){function s(u){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(u)}e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var a=h();if(a&&a.has(u))return a.get(u);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var m=d?Object.getOwnPropertyDescriptor(u,f):null;m&&(m.get||m.set)?Object.defineProperty(l,f,m):l[f]=u[f]}return l.default=u,a&&a.set(u,l),l}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return h=function(){return u},u}o.default.Texture=function(u,a){this._renderer=u;var l=this._renderer.GL;this.src=a,this.glTex=void 0,this.glTarget=l.TEXTURE_2D,this.glFormat=l.RGBA,this.mipmaps=!1,this.glMinFilter=l.LINEAR,this.glMagFilter=l.LINEAR,this.glWrapS=l.CLAMP_TO_EDGE,this.glWrapT=l.CLAMP_TO_EDGE,this.isSrcMediaElement=o.default.MediaElement!==void 0&&a instanceof o.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=o.default.Element!==void 0&&a instanceof o.default.Element&&!(a instanceof o.default.Graphics),this.isSrcP5Image=a instanceof o.default.Image,this.isSrcP5Graphics=a instanceof o.default.Graphics,this.isImageData=typeof ImageData!="undefined"&&a instanceof ImageData;var d=this._getTextureDataFromSource();return this.width=d.width,this.height=d.height,this.init(d),this},o.default.Texture.prototype._getTextureDataFromSource=function(){var u;return this.isSrcP5Image?u=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?u=this.src.elt:this.isImageData&&(u=this.src),u},o.default.Texture.prototype.init=function(u){var a=this._renderer.GL;if(this.glTex=a.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,this.glMagFilter),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata){var l=new Uint8Array([1,1,1,1]);a.texImage2D(this.glTarget,0,a.RGBA,1,1,0,this.glFormat,a.UNSIGNED_BYTE,l)}else a.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,a.UNSIGNED_BYTE,u)},o.default.Texture.prototype.update=function(){var u=this.src;if(u.width===0||u.height===0)return!1;var a=this._getTextureDataFromSource(),l=!1,d=this._renderer.GL;return a.width!==this.width||a.height!==this.height?(l=!0,this.width=a.width,this.height=a.height,this.isSrcP5Image?u.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&u.setModified(!0)):this.isSrcP5Image?u.isModified()&&(l=!0,u.setModified(!1)):this.isSrcMediaElement?u.isModified()?(l=!0,u.setModified(!1)):u.loadedmetadata&&this._videoPrevUpdateTime!==u.time()&&(this._videoPrevUpdateTime=u.time(),l=!0):this.isImageData?u._dirty&&(l=!(u._dirty=!1)):l=!0,l&&(this.bindTexture(),d.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,d.UNSIGNED_BYTE,a)),l},o.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},o.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},o.default.Texture.prototype.setInterpolation=function(u,a){var l=this._renderer.GL;u===c.NEAREST?this.glMinFilter=l.NEAREST:this.glMinFilter=l.LINEAR,a===c.NEAREST?this.glMagFilter=l.NEAREST:this.glMagFilter=l.LINEAR,this.bindTexture(),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.glMinFilter),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},o.default.Texture.prototype.setWrapMode=function(u,a){function l(g){return(g&g-1)==0}var d=this._renderer.GL,f=l(this.width),m=l(this.height);u===c.REPEAT?f&&m?this.glWrapS=d.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=d.CLAMP_TO_EDGE):u===c.MIRROR?f&&m?this.glWrapS=d.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=d.CLAMP_TO_EDGE):this.glWrapS=d.CLAMP_TO_EDGE,a===c.REPEAT?f&&m?this.glWrapT=d.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=d.CLAMP_TO_EDGE):a===c.MIRROR?f&&m?this.glWrapT=d.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=d.CLAMP_TO_EDGE):this.glWrapT=d.CLAMP_TO_EDGE,this.bindTexture(),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this.glWrapS),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var p=o.default.Texture;i.default=p},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223}],317:[function(e,n,i){function s(d){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var r,o=(r=e("../core/main"))&&r.__esModule?r:{default:r},c=function(d){if(d&&d.__esModule)return d;if(d===null||s(d)!=="object"&&typeof d!="function")return{default:d};var f=h();if(f&&f.has(d))return f.get(d);var m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in d)if(Object.prototype.hasOwnProperty.call(d,_)){var x=g?Object.getOwnPropertyDescriptor(d,_):null;x&&(x.get||x.set)?Object.defineProperty(m,_,x):m[_]=d[_]}return m.default=d,f&&f.set(d,m),m}(e("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var d=new WeakMap;return h=function(){return d},d}e("./p5.Shader"),e("./p5.RendererGL.Retained"),o.default.RendererGL.prototype._applyTextProperties=function(){},o.default.RendererGL.prototype.textWidth=function(d){return this._isOpenType()?this._textFont._textWidth(d,this._textSize):0};function p(d,f){this.width=d,this.height=f,this.infos=[],this.findImage=function(m){var g,_,x=this.width*this.height;if(x<m)throw new Error("font is too complex to render in 3D");for(var w=this.infos.length-1;0<=w;--w){var M=this.infos[w];if(M.index+m<x){_=(g=M).imageData;break}}if(!g){try{_=new ImageData(this.width,this.height)}catch{var A=document.getElementsByTagName("canvas")[0],T=!A;A||((A=document.createElement("canvas")).style.display="none",document.body.appendChild(A));var I=A.getContext("2d");I&&(_=I.createImageData(this.width,this.height)),T&&document.body.removeChild(A)}g={index:0,imageData:_},this.infos.push(g)}var R=g.index;return g.index+=m,_._dirty=!0,{imageData:_,index:R}}}function u(d,f,m,g,_){var x=d.imageData.data,w=4*d.index++;x[w++]=f,x[w++]=m,x[w++]=g,x[w++]=_}function a(d){this.font=d,this.strokeImageInfos=new p(64,64),this.colDimImageInfos=new p(64,64),this.rowDimImageInfos=new p(64,64),this.colCellImageInfos=new p(64,64),this.rowCellImageInfos=new p(64,64),this.glyphInfos={},this.getGlyphInfo=function(f){var m=this.glyphInfos[f.index];if(m)return m;var g,_=f.getBoundingBox(),x=_.x1,w=_.y1,M=_.x2-x,A=_.y2-w,T=f.path.commands;if(M==0||A==0||!T.length)return this.glyphInfos[f.index]={};var I,R,P,O,D=[],k=[],N=[];for(g=8;0<=g;--g)N.push([]);for(g=8;0<=g;--g)k.push([]);function q(xe,Re,Ve){var Pe=D.length;function Ke(Z,H,J){for(var he=Z.length;0<he--;){var Te=Z[he];Te<H&&(H=Te),J<Te&&(J=Te)}return{min:H,max:J}}D.push(Ve);for(var $e=Ke(xe,1,0),Le=Math.max(Math.floor(9*$e.min),0),ae=Math.min(Math.ceil(9*$e.max),9),De=Le;De<ae;++De)N[De].push(Pe);for(var ie=Ke(Re,1,0),Fe=Math.max(Math.floor(9*ie.min),0),Ce=Math.min(Math.ceil(9*ie.max),9),z=Fe;z<Ce;++z)k[z].push(Pe)}function X(xe){return(Re=(Pe=255)*xe)<(Ve=0)?Ve:Pe<Re?Pe:Re;var Re,Ve,Pe}function G(xe,Re,Ve,Pe){this.p0=xe,this.c0=Re,this.c1=Ve,this.p1=Pe,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return o.default.Vector.sub(o.default.Vector.sub(this.p1,this.p0),o.default.Vector.mult(o.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Ke){var $e=o.default.Vector.lerp(this.p0,this.c0,Ke),Le=o.default.Vector.lerp(this.c0,this.c1,Ke),ae=o.default.Vector.lerp($e,Le,Ke);this.c1=o.default.Vector.lerp(this.c1,this.p1,Ke),this.c0=o.default.Vector.lerp(Le,this.c1,Ke);var De=o.default.Vector.lerp(ae,this.c0,Ke),ie=new G(this.p0,$e,ae,De);return this.p0=De,ie},this.splitInflections=function(){var Ke=o.default.Vector.sub(this.c0,this.p0),$e=o.default.Vector.sub(o.default.Vector.sub(this.c1,this.c0),Ke),Le=o.default.Vector.sub(o.default.Vector.sub(o.default.Vector.sub(this.p1,this.c1),Ke),o.default.Vector.mult($e,2)),ae=[],De=$e.x*Le.y-$e.y*Le.x;if(De!==0){var ie=Ke.x*Le.y-Ke.y*Le.x,Fe=Ke.x*$e.y-Ke.y*$e.x,Ce=ie*ie-4*De*Fe;if(0<=Ce){De<0&&(De=-De,ie=-ie,Fe=-Fe);var z=Math.sqrt(Ce),Z=(-ie-z)/(2*De),H=(-ie+z)/(2*De);0<Z&&Z<1&&(ae.push(this.split(Z)),H=1-(1-H)/(1-Z)),0<H&&H<1&&ae.push(this.split(H))}}return ae.push(this),ae}}function Q(xe,Re,Ve,Pe,Ke,$e,Le,ae){var De=new G(new o.default.Vector(xe,Re),new o.default.Vector(Ve,Pe),new o.default.Vector(Ke,$e),new o.default.Vector(Le,ae)).splitInflections(),ie=[],Fe=30/l,Ce=!0,z=!1,Z=void 0;try{for(var H,J=De[Symbol.iterator]();!(Ce=(H=J.next()).done);Ce=!0){for(var he=H.value,Te=[],Ie=void 0;!(.125<=(Ie=Fe/he.quadError()));){var Xe=Math.pow(Ie,1/3),Se=he.split(Xe),Qe=he.split(1-Xe/(1-Xe));ie.push(Se),Te.push(he),he=Qe}Ie<1&&ie.push(he.split(.5)),ie.push(he),Array.prototype.push.apply(ie,Te.reverse())}}catch(it){z=!0,Z=it}finally{try{Ce||J.return==null||J.return()}finally{if(z)throw Z}}return ie}function K(xe,Re,Ve,Pe){q([xe,Ve],[Re,Pe],{x:xe,y:Re,cx:(xe+Ve)/2,cy:(Re+Pe)/2})}function _e(xe,Re,Ve,Pe){return Math.abs(Ve-xe)<1e-5&&Math.abs(Pe-Re)<1e-5}var pe=!0,ge=!1,ce=void 0;try{for(var de,Ee=T[Symbol.iterator]();!(pe=(de=Ee.next()).done);pe=!0){var C=de.value,F=(C.x-x)/M,V=(C.y-w)/A;if(!_e(I,R,F,V)){switch(C.type){case"M":P=F,O=V;break;case"L":K(I,R,F,V);break;case"Q":var ne=(C.x1-x)/M,re=(C.y1-w)/A;q([I,F,ne],[R,V,re],{x:I,y:R,cx:ne,cy:re});break;case"Z":_e(I,R,P,O)?D.push({x:I,y:R}):(K(I,R,P,O),D.push({x:P,y:O}));break;case"C":for(var se=Q(I,R,(C.x1-x)/M,(C.y1-w)/A,(C.x2-x)/M,(C.y2-w)/A,F,V),te=0;te<se.length;te++){var be=se[te].toQuadratic();q([be.x,be.x1,be.cx],[be.y,be.y1,be.cy],be)}break;default:throw new Error("unknown command type: ".concat(C.type))}I=F,R=V}}}catch(xe){ge=!0,ce=xe}finally{try{pe||Ee.return==null||Ee.return()}finally{if(ge)throw ce}}for(var $=D.length,me=this.strokeImageInfos.findImage($),ue=me.index,B=0;B<$;++B){var W=D[B];u(me,X(W.x),X(W.y),X(W.cx),X(W.cy))}function ye(xe,Re,Ve){for(var Pe=xe.length,Ke=Re.findImage(Pe),$e=Ke.index,Le=0,ae=0;ae<Pe;++ae)Le+=xe[ae].length;for(var De=Ve.findImage(Le),ie=0;ie<Pe;++ie){var Fe=xe[ie],Ce=Fe.length,z=De.index;u(Ke,z>>7,127&z,Ce>>7,127&Ce);for(var Z=0;Z<Ce;++Z){var H=Fe[Z]+ue;u(De,H>>7,127&H,0,0)}}return{cellImageInfo:De,dimOffset:$e,dimImageInfo:Ke}}return(m=this.glyphInfos[f.index]={glyph:f,uGlyphRect:[_.x1,-_.y1,_.x2,-_.y2],strokeImageInfo:me,strokes:D,colInfo:ye(N,this.colDimImageInfos,this.colCellImageInfos),rowInfo:ye(k,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[m.colInfo.dimOffset,m.rowInfo.dimOffset],m}}var l=Math.sqrt(3);o.default.RendererGL.prototype._renderText=function(d,f,m,g,_){if(this._textFont&&typeof this._textFont!="string"){if(!(_<=g)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),d;d.push();var x=this._doStroke,w=this.drawMode;this._doStroke=!1,this.drawMode=c.TEXTURE;var M=this._textFont.font,A=this._textFont._fontInfo;A=A||(this._textFont._fontInfo=new a(M));var T=this._textFont._handleAlignment(this,f,m,g),I=this._textSize/M.unitsPerEm;this.translate(T.x,T.y,0),this.scale(I,I,1);var R=this.GL,P=!this._defaultFontShader,O=this._getFontShader();O.init(),O.bindShader(),P&&(O.setUniform("uGridImageSize",[64,64]),O.setUniform("uCellsImageSize",[64,64]),O.setUniform("uStrokeImageSize",[64,64]),O.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var D=this.retainedMode.geometry.glyph;if(!D){var k=this._textGeom=new o.default.Geometry(1,1,function(){for(var se=0;se<=1;se++)for(var te=0;te<=1;te++)this.vertices.push(new o.default.Vector(te,se,0)),this.uvs.push(te,se)});k.computeFaces().computeNormals(),D=this.createBuffers("glyph",k)}var N=!0,q=!1,X=void 0;try{for(var G,Q=this.retainedMode.buffers.text[Symbol.iterator]();!(N=(G=Q.next()).done);N=!0)G.value._prepareBuffer(D,O)}catch(se){q=!0,X=se}finally{try{N||Q.return==null||Q.return()}finally{if(q)throw X}}this._bindBuffer(D.indexBuffer,R.ELEMENT_ARRAY_BUFFER),O.setUniform("uMaterialColor",this.curFillColor);try{var K=0,_e=null,pe=M.stringToGlyphs(f),ge=!0,ce=!1,de=void 0;try{for(var Ee,C=pe[Symbol.iterator]();!(ge=(Ee=C.next()).done);ge=!0){var F=Ee.value;_e&&(K+=M.getKerningValue(_e,F));var V=A.getGlyphInfo(F);if(V.uGlyphRect){var ne=V.rowInfo,re=V.colInfo;O.setUniform("uSamplerStrokes",V.strokeImageInfo.imageData),O.setUniform("uSamplerRowStrokes",ne.cellImageInfo.imageData),O.setUniform("uSamplerRows",ne.dimImageInfo.imageData),O.setUniform("uSamplerColStrokes",re.cellImageInfo.imageData),O.setUniform("uSamplerCols",re.dimImageInfo.imageData),O.setUniform("uGridOffset",V.uGridOffset),O.setUniform("uGlyphRect",V.uGlyphRect),O.setUniform("uGlyphOffset",K),O.bindTextures(),R.drawElements(R.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}K+=F.advanceWidth,_e=F}}catch(se){ce=!0,de=se}finally{try{ge||C.return==null||C.return()}finally{if(ce)throw de}}}finally{O.unbindShader(),this._doStroke=x,this.drawMode=w,d.pop()}return d}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":250,"../core/main":260,"./p5.RendererGL.Retained":313,"./p5.Shader":315,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.string.sub":189,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}]},{},[245])(245)})})(e1);export{N_ as A,n1 as G,Mr as P,gd as S,zt as W,ah as a,r1 as b,i1 as c};
